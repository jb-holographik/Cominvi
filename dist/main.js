var Em=Object.defineProperty;var Mm=(te,ee,ne)=>ee in te?Em(te,ee,{enumerable:!0,configurable:!0,writable:!0,value:ne}):te[ee]=ne;var Jr=(te,ee,ne)=>(Mm(te,typeof ee!="symbol"?ee+"":ee,ne),ne);var __vite_style__=document.createElement("style");__vite_style__.innerHTML=`.maplibregl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgb(0,0,0,0)}.maplibregl-canvas{left:0;position:absolute;top:0}.maplibregl-map:fullscreen{height:100%;width:100%}.maplibregl-ctrl-group button.maplibregl-ctrl-compass{touch-action:none}.maplibregl-canvas-container.maplibregl-interactive,.maplibregl-ctrl-group button.maplibregl-ctrl-compass{cursor:grab;-webkit-user-select:none;-moz-user-select:none;user-select:none}.maplibregl-canvas-container.maplibregl-interactive.maplibregl-track-pointer{cursor:pointer}.maplibregl-canvas-container.maplibregl-interactive:active,.maplibregl-ctrl-group button.maplibregl-ctrl-compass:active{cursor:grabbing}.maplibregl-canvas-container.maplibregl-touch-zoom-rotate,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate .maplibregl-canvas{touch-action:pan-x pan-y}.maplibregl-canvas-container.maplibregl-touch-drag-pan,.maplibregl-canvas-container.maplibregl-touch-drag-pan .maplibregl-canvas{touch-action:pinch-zoom}.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan .maplibregl-canvas{touch-action:none}.maplibregl-canvas-container.maplibregl-touch-drag-pan.maplibregl-cooperative-gestures,.maplibregl-canvas-container.maplibregl-touch-drag-pan.maplibregl-cooperative-gestures .maplibregl-canvas{touch-action:pan-x pan-y}.maplibregl-ctrl-bottom-left,.maplibregl-ctrl-bottom-right,.maplibregl-ctrl-top-left,.maplibregl-ctrl-top-right{pointer-events:none;position:absolute;z-index:2}.maplibregl-ctrl-top-left{left:0;top:0}.maplibregl-ctrl-top-right{right:0;top:0}.maplibregl-ctrl-bottom-left{bottom:0;left:0}.maplibregl-ctrl-bottom-right{bottom:0;right:0}.maplibregl-ctrl{clear:both;pointer-events:auto;transform:translate(0)}.maplibregl-ctrl-top-left .maplibregl-ctrl{float:left;margin:10px 0 0 10px}.maplibregl-ctrl-top-right .maplibregl-ctrl{float:right;margin:10px 10px 0 0}.maplibregl-ctrl-bottom-left .maplibregl-ctrl{float:left;margin:0 0 10px 10px}.maplibregl-ctrl-bottom-right .maplibregl-ctrl{float:right;margin:0 10px 10px 0}.maplibregl-ctrl-group{background:#fff;border-radius:4px}.maplibregl-ctrl-group:not(:empty){box-shadow:0 0 0 2px #0000001a}@media (forced-colors:active){.maplibregl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.maplibregl-ctrl-group button{background-color:transparent;border:0;box-sizing:border-box;cursor:pointer;display:block;height:29px;outline:none;padding:0;width:29px}.maplibregl-ctrl-group button+button{border-top:1px solid #ddd}.maplibregl-ctrl button .maplibregl-ctrl-icon{background-position:50%;background-repeat:no-repeat;display:block;height:100%;width:100%}@media (forced-colors:active){.maplibregl-ctrl-icon{background-color:transparent}.maplibregl-ctrl-group button+button{border-top:1px solid ButtonText}}.maplibregl-ctrl button::-moz-focus-inner{border:0;padding:0}.maplibregl-ctrl-attrib-button:focus,.maplibregl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.maplibregl-ctrl button:disabled{cursor:not-allowed}.maplibregl-ctrl button:disabled .maplibregl-ctrl-icon{opacity:.25}@media (hover:hover){.maplibregl-ctrl button:not(:disabled):hover{background-color:#0000000d}}.maplibregl-ctrl button:not(:disabled):active{background-color:#0000000d}.maplibregl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.maplibregl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.maplibregl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.maplibregl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.maplibregl-ctrl-group button:focus:only-child{border-radius:inherit}.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E")}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E")}}.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E")}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E")}}.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E")}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E")}}.maplibregl-ctrl button.maplibregl-ctrl-globe .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='none' stroke='%23333' viewBox='0 0 22 22'%3E%3Ccircle cx='11' cy='11' r='8.5'/%3E%3Cpath d='M17.5 11c0 4.819-3.02 8.5-6.5 8.5S4.5 15.819 4.5 11 7.52 2.5 11 2.5s6.5 3.681 6.5 8.5Z'/%3E%3Cpath d='M13.5 11c0 2.447-.331 4.64-.853 6.206-.262.785-.562 1.384-.872 1.777-.314.399-.58.517-.775.517s-.461-.118-.775-.517c-.31-.393-.61-.992-.872-1.777C8.831 15.64 8.5 13.446 8.5 11s.331-4.64.853-6.206c.262-.785.562-1.384.872-1.777.314-.399.58-.517.775-.517s.461.118.775.517c.31.393.61.992.872 1.777.522 1.565.853 3.76.853 6.206Z'/%3E%3Cpath d='M11 7.5c-1.909 0-3.622-.166-4.845-.428-.616-.132-1.08-.283-1.379-.434a1.3 1.3 0 0 1-.224-.138q.07-.058.224-.138c.299-.151.763-.302 1.379-.434C7.378 5.666 9.091 5.5 11 5.5s3.622.166 4.845.428c.616.132 1.08.283 1.379.434.105.053.177.1.224.138q-.07.058-.224.138c-.299.151-.763.302-1.379.434-1.223.262-2.936.428-4.845.428ZM4.486 6.436ZM11 16.5c-1.909 0-3.622-.166-4.845-.428-.616-.132-1.08-.283-1.379-.434a1.3 1.3 0 0 1-.224-.138 1.3 1.3 0 0 1 .224-.138c.299-.151.763-.302 1.379-.434C7.378 14.666 9.091 14.5 11 14.5s3.622.166 4.845.428c.616.132 1.08.283 1.379.434.105.053.177.1.224.138a1.3 1.3 0 0 1-.224.138c-.299.151-.763.302-1.379.434-1.223.262-2.936.428-4.845.428Zm-6.514-1.064ZM11 12.5c-2.46 0-4.672-.222-6.255-.574-.796-.177-1.406-.38-1.805-.59a1.5 1.5 0 0 1-.39-.272.3.3 0 0 1-.047-.064.3.3 0 0 1 .048-.064c.066-.073.189-.167.389-.272.399-.21 1.009-.413 1.805-.59C6.328 9.722 8.54 9.5 11 9.5s4.672.222 6.256.574c.795.177 1.405.38 1.804.59.2.105.323.2.39.272a.3.3 0 0 1 .047.064.3.3 0 0 1-.048.064 1.4 1.4 0 0 1-.389.272c-.399.21-1.009.413-1.804.59-1.584.352-3.796.574-6.256.574Zm-8.501-1.51v.002zm0 .018v.002zm17.002.002v-.002zm0-.018v-.002z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-globe-enabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='none' stroke='%2333b5e5' viewBox='0 0 22 22'%3E%3Ccircle cx='11' cy='11' r='8.5'/%3E%3Cpath d='M17.5 11c0 4.819-3.02 8.5-6.5 8.5S4.5 15.819 4.5 11 7.52 2.5 11 2.5s6.5 3.681 6.5 8.5Z'/%3E%3Cpath d='M13.5 11c0 2.447-.331 4.64-.853 6.206-.262.785-.562 1.384-.872 1.777-.314.399-.58.517-.775.517s-.461-.118-.775-.517c-.31-.393-.61-.992-.872-1.777C8.831 15.64 8.5 13.446 8.5 11s.331-4.64.853-6.206c.262-.785.562-1.384.872-1.777.314-.399.58-.517.775-.517s.461.118.775.517c.31.393.61.992.872 1.777.522 1.565.853 3.76.853 6.206Z'/%3E%3Cpath d='M11 7.5c-1.909 0-3.622-.166-4.845-.428-.616-.132-1.08-.283-1.379-.434a1.3 1.3 0 0 1-.224-.138q.07-.058.224-.138c.299-.151.763-.302 1.379-.434C7.378 5.666 9.091 5.5 11 5.5s3.622.166 4.845.428c.616.132 1.08.283 1.379.434.105.053.177.1.224.138q-.07.058-.224.138c-.299.151-.763.302-1.379.434-1.223.262-2.936.428-4.845.428ZM4.486 6.436ZM11 16.5c-1.909 0-3.622-.166-4.845-.428-.616-.132-1.08-.283-1.379-.434a1.3 1.3 0 0 1-.224-.138 1.3 1.3 0 0 1 .224-.138c.299-.151.763-.302 1.379-.434C7.378 14.666 9.091 14.5 11 14.5s3.622.166 4.845.428c.616.132 1.08.283 1.379.434.105.053.177.1.224.138a1.3 1.3 0 0 1-.224.138c-.299.151-.763.302-1.379.434-1.223.262-2.936.428-4.845.428Zm-6.514-1.064ZM11 12.5c-2.46 0-4.672-.222-6.255-.574-.796-.177-1.406-.38-1.805-.59a1.5 1.5 0 0 1-.39-.272.3.3 0 0 1-.047-.064.3.3 0 0 1 .048-.064c.066-.073.189-.167.389-.272.399-.21 1.009-.413 1.805-.59C6.328 9.722 8.54 9.5 11 9.5s4.672.222 6.256.574c.795.177 1.405.38 1.804.59.2.105.323.2.39.272a.3.3 0 0 1 .047.064.3.3 0 0 1-.048.064 1.4 1.4 0 0 1-.389.272c-.399.21-1.009.413-1.804.59-1.584.352-3.796.574-6.256.574Zm-8.501-1.51v.002zm0 .018v.002zm17.002.002v-.002zm0-.018v-.002z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-terrain .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='%23333' viewBox='0 0 22 22'%3E%3Cpath d='m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-terrain-enabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='%2333b5e5' viewBox='0 0 22 22'%3E%3Cpath d='m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23aaa' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e58978' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e54e33' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-waiting .maplibregl-ctrl-icon{animation:maplibregl-spin 2s linear infinite}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23999' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e58978' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e54e33' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23666' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E")}}@keyframes maplibregl-spin{0%{transform:rotate(0)}to{transform:rotate(1turn)}}a.maplibregl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E");background-repeat:no-repeat;cursor:pointer;display:block;height:23px;margin:0 0 -4px -4px;overflow:hidden;width:88px}a.maplibregl-ctrl-logo.maplibregl-compact{width:14px}@media (forced-colors:active){a.maplibregl-ctrl-logo{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){a.maplibregl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E")}}.maplibregl-ctrl.maplibregl-ctrl-attrib{background-color:#ffffff80;margin:0;padding:0 5px}@media screen{.maplibregl-ctrl-attrib.maplibregl-compact{background-color:#fff;border-radius:12px;box-sizing:content-box;color:#000;margin:10px;min-height:20px;padding:2px 24px 2px 0;position:relative}.maplibregl-ctrl-attrib.maplibregl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.maplibregl-ctrl-bottom-left>.maplibregl-ctrl-attrib.maplibregl-compact-show,.maplibregl-ctrl-top-left>.maplibregl-ctrl-attrib.maplibregl-compact-show{border-radius:12px;padding:2px 8px 2px 28px}.maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-inner{display:none}.maplibregl-ctrl-attrib-button{background-color:#ffffff80;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E");border:0;border-radius:12px;box-sizing:border-box;cursor:pointer;display:none;height:24px;outline:none;position:absolute;right:0;top:0;width:24px}.maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;list-style:none}.maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button::-webkit-details-marker{display:none}.maplibregl-ctrl-bottom-left .maplibregl-ctrl-attrib-button,.maplibregl-ctrl-top-left .maplibregl-ctrl-attrib-button{left:0}.maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-button,.maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-inner{display:block}.maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-button{background-color:#0000000d}.maplibregl-ctrl-bottom-right>.maplibregl-ctrl-attrib.maplibregl-compact:after{bottom:0;right:0}.maplibregl-ctrl-top-right>.maplibregl-ctrl-attrib.maplibregl-compact:after{right:0;top:0}.maplibregl-ctrl-top-left>.maplibregl-ctrl-attrib.maplibregl-compact:after{left:0;top:0}.maplibregl-ctrl-bottom-left>.maplibregl-ctrl-attrib.maplibregl-compact:after{bottom:0;left:0}}@media screen and (forced-colors:active){.maplibregl-ctrl-attrib.maplibregl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='%23fff' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E")}}@media screen and (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl-attrib.maplibregl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E")}}.maplibregl-ctrl-attrib a{color:#000000bf;text-decoration:none}.maplibregl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.maplibregl-attrib-empty{display:none}.maplibregl-ctrl-scale{background-color:#ffffffbf;border:2px solid #333;border-top:#333;box-sizing:border-box;color:#333;font-size:10px;padding:0 5px}.maplibregl-popup{display:flex;left:0;pointer-events:none;position:absolute;top:0;will-change:transform}.maplibregl-popup-anchor-top,.maplibregl-popup-anchor-top-left,.maplibregl-popup-anchor-top-right{flex-direction:column}.maplibregl-popup-anchor-bottom,.maplibregl-popup-anchor-bottom-left,.maplibregl-popup-anchor-bottom-right{flex-direction:column-reverse}.maplibregl-popup-anchor-left{flex-direction:row}.maplibregl-popup-anchor-right{flex-direction:row-reverse}.maplibregl-popup-tip{border:10px solid transparent;height:0;width:0;z-index:1}.maplibregl-popup-anchor-top .maplibregl-popup-tip{align-self:center;border-bottom-color:#fff;border-top:none}.maplibregl-popup-anchor-top-left .maplibregl-popup-tip{align-self:flex-start;border-bottom-color:#fff;border-left:none;border-top:none}.maplibregl-popup-anchor-top-right .maplibregl-popup-tip{align-self:flex-end;border-bottom-color:#fff;border-right:none;border-top:none}.maplibregl-popup-anchor-bottom .maplibregl-popup-tip{align-self:center;border-bottom:none;border-top-color:#fff}.maplibregl-popup-anchor-bottom-left .maplibregl-popup-tip{align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.maplibregl-popup-anchor-bottom-right .maplibregl-popup-tip{align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.maplibregl-popup-anchor-left .maplibregl-popup-tip{align-self:center;border-left:none;border-right-color:#fff}.maplibregl-popup-anchor-right .maplibregl-popup-tip{align-self:center;border-left-color:#fff;border-right:none}.maplibregl-popup-close-button{background-color:transparent;border:0;border-radius:0 3px 0 0;cursor:pointer;position:absolute;right:0;top:0}.maplibregl-popup-close-button:hover{background-color:#0000000d}.maplibregl-popup-content{background:#fff;border-radius:3px;box-shadow:0 1px 2px #0000001a;padding:15px 10px;pointer-events:auto;position:relative}.maplibregl-popup-anchor-top-left .maplibregl-popup-content{border-top-left-radius:0}.maplibregl-popup-anchor-top-right .maplibregl-popup-content{border-top-right-radius:0}.maplibregl-popup-anchor-bottom-left .maplibregl-popup-content{border-bottom-left-radius:0}.maplibregl-popup-anchor-bottom-right .maplibregl-popup-content{border-bottom-right-radius:0}.maplibregl-popup-track-pointer{display:none}.maplibregl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.maplibregl-map:hover .maplibregl-popup-track-pointer{display:flex}.maplibregl-map:active .maplibregl-popup-track-pointer{display:none}.maplibregl-user-location-dot,.maplibregl-user-location-dot:before{background-color:#1da1f2;border-radius:50%;height:15px;width:15px}.maplibregl-user-location-dot:before{animation:maplibregl-user-location-dot-pulse 2s infinite;content:"";position:absolute}.maplibregl-user-location-dot:after{border:2px solid #fff;border-radius:50%;box-shadow:0 0 3px #00000059;box-sizing:border-box;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px}@keyframes maplibregl-user-location-dot-pulse{0%{opacity:1;transform:scale(1)}70%{opacity:0;transform:scale(3)}to{opacity:0;transform:scale(1)}}.maplibregl-user-location-dot-stale{background-color:#aaa}.maplibregl-user-location-dot-stale:after{display:none}.maplibregl-user-location-accuracy-circle{background-color:#1da1f233;border-radius:100%;height:1px;width:1px}.maplibregl-crosshair,.maplibregl-crosshair .maplibregl-interactive,.maplibregl-crosshair .maplibregl-interactive:active{cursor:crosshair}.maplibregl-boxzoom{background:#fff;border:2px dotted #202020;height:0;left:0;opacity:.5;position:absolute;top:0;width:0}.maplibregl-cooperative-gesture-screen{align-items:center;background:rgba(0,0,0,.4);color:#fff;display:flex;font-size:1.4em;inset:0;justify-content:center;line-height:1.2;opacity:0;padding:1rem;pointer-events:none;position:absolute;transition:opacity 1s ease 1s;z-index:99999}.maplibregl-cooperative-gesture-screen.maplibregl-show{opacity:1;transition:opacity .05s}.maplibregl-cooperative-gesture-screen .maplibregl-mobile-message{display:none}@media (hover:none),(pointer:coarse){.maplibregl-cooperative-gesture-screen .maplibregl-desktop-message{display:none}.maplibregl-cooperative-gesture-screen .maplibregl-mobile-message{display:block}}.maplibregl-pseudo-fullscreen{height:100%!important;left:0!important;position:fixed!important;top:0!important;width:100%!important;z-index:99999}.w-webflow-badge{display:none!important;visibility:hidden}.page-wrap{overflow:hidden}[data-barba-namespace=article] .page-wrap{height:auto;min-height:100vh;overflow:visible}.service-icon,.icon-wrap{mix-blend-mode:multiply}.navlink_label{white-space:nowrap}.scroll-item>.body-xl,.scroll-item>.body-xxl,.scroll-item>.body-next{transition:all .2s ease-in-out}.eyebrows.is-white .is-eyebrow{border-color:var(--white);color:var(--white)}.eyebrows.is-white .is-eyebrow:nth-of-type(2){background-color:var(--white);color:var(--black)}.testimonial-line{padding-bottom:.08em}.mask-overlay,.mask-overlay.is-active{display:none!important}.region,.region.highlight{transition:all .5s ease-out}.is-map .region{pointer-events:all}.region.highlight{fill:#f479200d;stroke:#f4792080;z-index:2}.marker .dot{transition:fill .3s,r .3s}.project-card,.project-card.is-dimmed{transition:all .2s ease-out}.marker.highlight circle{fill:#ff9345;filter:drop-shadow(0 0 2px rgba(255,255,255,.5)) drop-shadow(0 0 5px #ff8832) drop-shadow(0 0 12px #ff8832)}.marker.highlight rect{fill-opacity:0}.marker,.marker.highlight,.marker.dimmed,.marker.highlight rect{transition:all .5s ease-out;opacity:1}.marker.dimmed{opacity:0}.marker.highlight{opacity:1}.project-item{transition:all .2s ease-out}.processes .process:nth-child(10){height:calc(100vh - 2em)}[data-video=last].video{position:relative;top:0}.svgtext-mask{padding-top:1px}.is-text-mask>.mask-fill:last-child{margin-left:-1px}.machines-inner>.machines_wrap:first-of-type .machines-list-list>.machines-list-item:first-of-type,.machines-bottom>.machines_wrap:first-of-type .machines-list-list>.machines-list-item:first-of-type{padding-top:.6em}.machines_images{position:absolute;top:1em;left:0;width:0;height:0;overflow:hidden}.machines_button-wrap{position:absolute;top:1em}.machines_images.is-open .machines_images-item.is-active{position:absolute;top:0;left:0;width:100%;height:100%;z-index:2}.machines_images.is-open .machines_images-list{transform:none!important;height:100%;overflow:hidden}.machines_images.is-open .machines_images-item:not(.is-active){pointer-events:none}.toggle .toggle-indicator{pointer-events:none}.workshops_left_top>.eyebrows{padding-top:0}.footer-link{position:relative}.footer-link:hover{opacity:1}.footer-link:after{content:"";position:absolute;width:100%;transform:scaleX(0);height:1px;bottom:0;left:0;background-color:#151515;transform-origin:bottom right;transition:transform .5s cubic-bezier(.32,.01,0,1)}.footer-link:hover:after{transform:scaleX(1);transform-origin:bottom left}h1>.is-h1-span-wrap:last-child>span{padding-bottom:.025em}.workshops .toggle-option{cursor:default}.w-background-video>video{inset:0}.loader-logo_outline{position:fixed;left:0;top:0;z-index:4;border-radius:.55em;outline:.188em solid var(--primary);outline-offset:-.188em;pointer-events:none;mix-blend-mode:normal}.machines-grid_name-inner .body-xl>span{padding-bottom:.2em;overflow:hidden}.machines-grid_name-inner .body-xl{line-height:80%}.is-plus-wrap>.is-plus{width:.875em}.machines-grid_close-button_row .button_label{line-height:.8}.story-maskwrap>.svgtext-mask{padding:0}.circle.is-2 g{opacity:1}.section_positions .content-bottom{border:none}#all:after,.blog-category:after{content:"";position:absolute;width:100%;transform:scaleX(0);height:3px;bottom:-1em;left:0;background-color:#151515;transform-origin:bottom right;transition:transform .5s cubic-bezier(.32,.01,0,1)}.blog-category:after{bottom:-2em}#all.is-list-active:after,.blog-category.is-list-active:after{transform:scaleX(1);transform-origin:bottom left}.blogline-line{position:relative}.blog-name>.body-l>.blogline-line:after{content:"";position:absolute;width:100%;transform:scaleX(0);height:3px;bottom:0;left:0;background-color:#151515;transform-origin:bottom right;transition:transform .5s cubic-bezier(.32,.01,0,1)}.blog-inner_item.is-green:hover>.blog-name>.body-l>.blogline-line:after,.blog-inner_item:hover>.blog-name>.body-l>.blogline-line:after{transform:scaleX(1)!important;transform-origin:bottom left}.machines-grid_item,.machines .machines-list-item{cursor:pointer}.button-white_inner .arrow-white-2_bg{fill:var(--primary)}.w-richtext{font-size:var(--size-font)}.w-richtext figure{max-width:47.2%;margin-bottom:.7em;width:100%;height:30em}.w-richtext figure.w-richtext-align-fullwidth{margin:6em 0;width:100%;height:30em}.w-richtext figure>div,.w-richtext figure.w-richtext-align-fullwidth>div{position:relative;width:100%;height:30em;overflow:hidden}.w-richtext figure>div>img,.w-richtext figure.w-richtext-align-fullwidth>div>img{object-fit:cover;width:100%;height:30em}.blog-content figure>.image-wrapper{overflow:hidden}.blogline-line{height:1.1em}.blog-content .w-richtext figure>.imgage-wrapper,.blog-content .w-richtext figure>.imgage-p{border-radius:8px!important}.w-input:focus{border-color:var(--primary)}.is-g-map [aria-label="Passer en plein \\e9 cran"],.is-g-map .gm-style div:nth-child(14)>div,.is-g-map .gm-style div:nth-child(16)>div,.is-g-map .gmnoprint,.is-g-map .gm-control-active{opacity:0;transition:opacity .3s ease-in-out}.cylindar__wrapper{width:100%;height:100svh;position:relative;perspective:70vw;overflow:hidden;display:flex;flex-direction:row;justify-content:space-between;align-items:center}.cylindar__text__wrapper{position:absolute;width:100%;height:100%;transform-style:preserve-3d;transform-origin:center center;text-align:center}.scroll-indicator_c{display:flex;flex-direction:column;justify-content:flex-start;align-items:center;width:100%;height:100%;background:transparent;transform-style:preserve-3d;transform-origin:center center;pointer-events:none;position:relative}.scroll-indicator_c .scroll-tick{backface-visibility:hidden;-webkit-backface-visibility:hidden;position:absolute;top:50%;left:50%;transform-style:preserve-3d}.cylindar__text__item{position:absolute;top:50%;left:50%;width:100%;backface-visibility:hidden}.scroll-indicator_c .scroll-tick{height:1.5px;background-color:var(--primary)}.cursor-pointer.is-white .cursor-pointer_inner{background-color:var(--white)}.cursor-pointer.is-white .cursor-pointer_label,.cursor-pointer.is-white .read-icon{color:var(--primary)}.section_services.is-2 .service-image.is-4{display:block}.swiper.projects-wrapper{padding-left:0;padding-right:0;overflow:hidden}.projects-list.swiper-wrapper{display:flex;flex-direction:row;align-items:stretch;justify-content:flex-start!important}.projects-list.swiper-wrapper .swiper-slide{flex:0 0 auto}.swiper.projects-wrapper,.projects-list.swiper-wrapper{touch-action:pan-x!important}.swiper.projects-wrapper .swiper-wrapper{cursor:grab}.swiper.projects-wrapper .swiper-wrapper:active{cursor:grabbing}.swiper.projects-wrapper .project-card,.swiper.projects-wrapper .project-item{-webkit-user-drag:none;user-select:none}.section_partners .content.is-12-col{margin-top:-10em}.cylindar__text__item .body-xl{transition:all .15s ease-in-out}.section_next{position:relative;height:calc(100svh + 1px)}.maplibregl-ctrl-bottom-right{display:none!important}.maplibregl-map{font:unset!important}.maplibregl-marker{left:0;position:absolute;top:0;transition:opacity .2s;will-change:transform}.maplibregl-marker svg>g>g:nth-of-type(1){opacity:.4}.maplibregl-marker svg>g>g:nth-of-type(3){opacity:.1}.maplibregl-ctrl-top-right{top:auto;right:1em;bottom:1em}.maplibregl-ctrl.maplibregl-ctrl-group{position:static;background-color:transparent;border:none;box-shadow:none;display:flex;flex-direction:row;gap:.5em;margin:0}.maplibregl-ctrl-group button+button{border:none}button.maplibregl-ctrl-compass{display:none}.maplibregl-ctrl.maplibregl-ctrl-group button{background-color:var(--white);border-radius:50%;height:2em;width:2em;border:1px solid hsla(0,0%,0%,.3);color:var(--primary);transition:border .2s ease-in-out}.maplibregl-ctrl.maplibregl-ctrl-group button:hover{background-color:var(--white);border:1px solid hsla(0,0%,0%,1);transition:border .2s ease-in-out}.maplibregl-ctrl-zoom-in{order:2}.maplibregl-ctrl-group button:focus:first-child{border:1px solid hsla(0,0%,0%,.3);border-radius:50%}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{color:var(--white);background-image:url("data:image/svg+xml;utf8,<svg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'><path d='M3.33 8h9.33' stroke='black' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/><path d='M8 3.33v9.33' stroke='black' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/></svg>");background-size:50%;transition:opacity .2s ease-in-out}.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{color:var(--white);background-image:url("data:image/svg+xml;utf8,<svg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'><path d='M3.33 8h9.33' stroke='black' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/></svg>");background-size:50%;transition:opacity .2s ease-in-out}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in:hover .maplibregl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-zoom-out:hover .maplibregl-ctrl-icon{opacity:1;transition:opacity .2s ease-in-out}@media (min-width: 991px){.processes .process:first-child .process-infos{padding-top:0}}@media (max-width: 767px) and (orientation: landscape){.m-overlay{display:flex}}@media (max-width: 767px){.machines-wrapper,.machines-grid-wrapper{display:none!important}.workshops_left-sm .workshops_left_middle .body-xl.is-black,.workshops_left-sm .workshops_left_bottom .body-s{display:block;visibility:visible;opacity:1}.workshops_left-sm .workshops_left_middle .body-xl.is-black:not(.is-active),.workshops_left-sm .workshops_left_bottom .body-s:not(.is-active){opacity:0;visibility:hidden;pointer-events:none}.processes>.process:nth-child(10) .process_inner{border:none}.blog-category:after{bottom:-1.5em}.blog-date .eyebrow-m br,.blog-main_link .eyebrow-m br{display:none}.blog-content{align-items:flex-start}.blog-content h1,.blog-content h2,.blog-content h3,.blog-content p{width:100%;padding:0 16px}.w-richtext figure{max-width:100%;height:15em;margin-bottom:2em;padding:0 16px}.blog-content .w-richtext figure>.imgage-wrapper,.blog-content .w-richtext figure>.imgage-p,.blog-content .w-richtext-align-fullwidth figure>.imgage-wrapper,.blog-content .w-richtext-align-fullwidth figure>.imgage-p{height:100%!important}.w-richtext figure.w-richtext-align-fullwidth{height:100vh;padding:0}.blog-content .w-richtext-align-fullwidth .image-wrapper,.blog-content .w-richtext-align-fullwidth .image-p{height:100%!important;border-radius:0}.projects-list.swiper-wrapper{padding-left:1em}.swiper.projects-wrapper{padding-right:1em}.section_partners .content.is-12-col{margin-top:-25em;padding-bottom:8em}.cylindar__text__item .body-xl.is-o-20,.cylindar__text__item .body-xl.is-active{font-size:1em}}@media (min-width: 768px){.swiper.projects-wrapper .swiper-slide{opacity:0;pointer-events:none}.swiper.projects-wrapper .swiper-slide.swiper-slide-active{opacity:1;pointer-events:auto;display:block}.swiper.projects-wrapper .swiper-wrapper{will-change:transform}.swiper.projects-wrapper .projects-list.swiper-wrapper{gap:0!important;column-gap:0!important;row-gap:0!important;padding-left:0!important;padding-right:0!important}.swiper.projects-wrapper{padding-left:0!important;padding-right:0!important}}@media screen and (min-width: 991px){.is-big-safety{aspect-ratio:2 / 2.5}}:root{--swiper-theme-color: #007aff}:host{position:relative;display:block;margin-left:auto;margin-right:auto;z-index:1}.swiper{margin-left:auto;margin-right:auto;position:relative;overflow:hidden;list-style:none;padding:0;z-index:1;display:block}.swiper-vertical>.swiper-wrapper{flex-direction:column}.swiper-wrapper{position:relative;width:100%;height:100%;z-index:1;display:flex;transition-property:transform;transition-timing-function:var(--swiper-wrapper-transition-timing-function, initial);box-sizing:content-box}.swiper-android .swiper-slide,.swiper-ios .swiper-slide,.swiper-wrapper{transform:translateZ(0)}.swiper-horizontal{touch-action:pan-y}.swiper-vertical{touch-action:pan-x}.swiper-slide{flex-shrink:0;width:100%;height:100%;position:relative;transition-property:transform;display:block}.swiper-slide-invisible-blank{visibility:hidden}.swiper-autoheight,.swiper-autoheight .swiper-slide{height:auto}.swiper-autoheight .swiper-wrapper{align-items:flex-start;transition-property:transform,height}.swiper-backface-hidden .swiper-slide{transform:translateZ(0);backface-visibility:hidden}.swiper-3d.swiper-css-mode .swiper-wrapper{perspective:1200px}.swiper-3d .swiper-wrapper{transform-style:preserve-3d}.swiper-3d{perspective:1200px;.swiper-slide,.swiper-cube-shadow {transform-style: preserve-3d;}}.swiper-css-mode{> .swiper-wrapper {overflow: auto; scrollbar-width: none; -ms-overflow-style: none; &::-webkit-scrollbar {display: none;}} > .swiper-wrapper > .swiper-slide {scroll-snap-align: start start;} &.swiper-horizontal {> .swiper-wrapper {scroll-snap-type: x mandatory;}} &.swiper-vertical {> .swiper-wrapper {scroll-snap-type: y mandatory;}} &.swiper-free-mode {> .swiper-wrapper {scroll-snap-type: none;} > .swiper-wrapper > .swiper-slide {scroll-snap-align: none;}} &.swiper-centered {> .swiper-wrapper::before {content: ""; flex-shrink: 0; order: 9999;} > .swiper-wrapper > .swiper-slide {scroll-snap-align: center center; scroll-snap-stop: always;}} &.swiper-centered.swiper-horizontal {> .swiper-wrapper > .swiper-slide:first-child {margin-inline-start: var(--swiper-centered-offset-before);} > .swiper-wrapper::before {height: 100%; min-height: 1px; width: var(--swiper-centered-offset-after);}} &.swiper-centered.swiper-vertical {> .swiper-wrapper > .swiper-slide:first-child {margin-block-start: var(--swiper-centered-offset-before);} > .swiper-wrapper::before {width: 100%; min-width: 1px; height: var(--swiper-centered-offset-after);}}}.swiper-3d{.swiper-slide-shadow,.swiper-slide-shadow-left,.swiper-slide-shadow-right,.swiper-slide-shadow-top,.swiper-slide-shadow-bottom,.swiper-slide-shadow,.swiper-slide-shadow-left,.swiper-slide-shadow-right,.swiper-slide-shadow-top,.swiper-slide-shadow-bottom {position: absolute; left: 0; top: 0; width: 100%; height: 100%; pointer-events: none; z-index: 10;} .swiper-slide-shadow {background: rgba(0,0,0,.15);} .swiper-slide-shadow-left {background-image: linear-gradient(to left,rgba(0,0,0,.5),rgba(0,0,0,0));} .swiper-slide-shadow-right {background-image: linear-gradient(to right,rgba(0,0,0,.5),rgba(0,0,0,0));} .swiper-slide-shadow-top {background-image: linear-gradient(to top,rgba(0,0,0,.5),rgba(0,0,0,0));} .swiper-slide-shadow-bottom {background-image: linear-gradient(to bottom,rgba(0,0,0,.5),rgba(0,0,0,0));}}.swiper-lazy-preloader{width:42px;height:42px;position:absolute;left:50%;top:50%;margin-left:-21px;margin-top:-21px;z-index:10;transform-origin:50%;box-sizing:border-box;border:4px solid var(--swiper-preloader-color, var(--swiper-theme-color));border-radius:50%;border-top-color:transparent}.swiper:not(.swiper-watch-progress),.swiper-watch-progress .swiper-slide-visible{.swiper-lazy-preloader {animation: swiper-preloader-spin 1s infinite linear;}}.swiper-lazy-preloader-white{--swiper-preloader-color: #fff}.swiper-lazy-preloader-black{--swiper-preloader-color: #000}@keyframes swiper-preloader-spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`;document.head.appendChild(__vite_style__);(function(te){typeof define=="function"&&define.amd?define(te):te()})(function(){"use strict";var maplibreGl$1="",style="";function _assertThisInitialized(te){if(te===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return te}function _inheritsLoose(te,ee){te.prototype=Object.create(ee.prototype),te.prototype.constructor=te,te.__proto__=ee}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var _config={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},_defaults$2={duration:.5,overwrite:!1,delay:0},_suppressOverwrites$1,_reverting$1,_context$2,_bigNum$2=1e8,_tinyNum=1/_bigNum$2,_2PI=Math.PI*2,_HALF_PI=_2PI/4,_gsID=0,_sqrt$1=Math.sqrt,_cos$1=Math.cos,_sin$1=Math.sin,_isString$1=function(ee){return typeof ee=="string"},_isFunction$1=function(ee){return typeof ee=="function"},_isNumber$2=function(ee){return typeof ee=="number"},_isUndefined=function(ee){return typeof ee=="undefined"},_isObject$1=function(ee){return typeof ee=="object"},_isNotFalse=function(ee){return ee!==!1},_windowExists$2=function(){return typeof window!="undefined"},_isFuncOrString=function(ee){return _isFunction$1(ee)||_isString$1(ee)},_isTypedArray=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},_isArray=Array.isArray,_strictNumExp=/(?:-?\.?\d|\.)+/gi,_numExp$1=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,_numWithUnitExp=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,_complexStringNumExp=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,_relExp=/[+-]=-?[.\d]+/,_delimitedValueExp=/[^,'"\[\]\s]+/gi,_unitExp=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,_globalTimeline,_win$3,_coreInitted$3,_doc$3,_globals={},_installScope={},_coreReady,_install=function(ee){return(_installScope=_merge(ee,_globals))&&gsap$3},_missingPlugin=function(ee,ne){return console.warn("Invalid property",ee,"set to",ne,"Missing plugin? gsap.registerPlugin()")},_warn=function(ee,ne){return!ne&&console.warn(ee)},_addGlobal=function(ee,ne){return ee&&(_globals[ee]=ne)&&_installScope&&(_installScope[ee]=ne)||_globals},_emptyFunc=function(){return 0},_startAtRevertConfig={suppressEvents:!0,isStart:!0,kill:!1},_revertConfigNoKill={suppressEvents:!0,kill:!1},_revertConfig={suppressEvents:!0},_reservedProps={},_lazyTweens=[],_lazyLookup={},_lastRenderedFrame,_plugins={},_effects={},_nextGCFrame=30,_harnessPlugins=[],_callbackNames="",_harness=function(ee){var ne=ee[0],se,ae;if(_isObject$1(ne)||_isFunction$1(ne)||(ee=[ee]),!(se=(ne._gsap||{}).harness)){for(ae=_harnessPlugins.length;ae--&&!_harnessPlugins[ae].targetTest(ne););se=_harnessPlugins[ae]}for(ae=ee.length;ae--;)ee[ae]&&(ee[ae]._gsap||(ee[ae]._gsap=new GSCache(ee[ae],se)))||ee.splice(ae,1);return ee},_getCache=function(ee){return ee._gsap||_harness(toArray$1(ee))[0]._gsap},_getProperty=function(ee,ne,se){return(se=ee[ne])&&_isFunction$1(se)?ee[ne]():_isUndefined(se)&&ee.getAttribute&&ee.getAttribute(ne)||se},_forEachName=function(ee,ne){return(ee=ee.split(",")).forEach(ne)||ee},_round$3=function(ee){return Math.round(ee*1e5)/1e5||0},_roundPrecise=function(ee){return Math.round(ee*1e7)/1e7||0},_parseRelative=function(ee,ne){var se=ne.charAt(0),ae=parseFloat(ne.substr(2));return ee=parseFloat(ee),se==="+"?ee+ae:se==="-"?ee-ae:se==="*"?ee*ae:ee/ae},_arrayContainsAny=function(ee,ne){for(var se=ne.length,ae=0;ee.indexOf(ne[ae])<0&&++ae<se;);return ae<se},_lazyRender=function(){var ee=_lazyTweens.length,ne=_lazyTweens.slice(0),se,ae;for(_lazyLookup={},_lazyTweens.length=0,se=0;se<ee;se++)ae=ne[se],ae&&ae._lazy&&(ae.render(ae._lazy[0],ae._lazy[1],!0)._lazy=0)},_isRevertWorthy=function(ee){return!!(ee._initted||ee._startAt||ee.add)},_lazySafeRender=function(ee,ne,se,ae){_lazyTweens.length&&!_reverting$1&&_lazyRender(),ee.render(ne,se,ae||!!(_reverting$1&&ne<0&&_isRevertWorthy(ee))),_lazyTweens.length&&!_reverting$1&&_lazyRender()},_numericIfPossible=function(ee){var ne=parseFloat(ee);return(ne||ne===0)&&(ee+"").match(_delimitedValueExp).length<2?ne:_isString$1(ee)?ee.trim():ee},_passThrough$1=function(ee){return ee},_setDefaults$1=function(ee,ne){for(var se in ne)se in ee||(ee[se]=ne[se]);return ee},_setKeyframeDefaults=function(ee){return function(ne,se){for(var ae in se)ae in ne||ae==="duration"&&ee||ae==="ease"||(ne[ae]=se[ae])}},_merge=function(ee,ne){for(var se in ne)ee[se]=ne[se];return ee},_mergeDeep=function te(ee,ne){for(var se in ne)se!=="__proto__"&&se!=="constructor"&&se!=="prototype"&&(ee[se]=_isObject$1(ne[se])?te(ee[se]||(ee[se]={}),ne[se]):ne[se]);return ee},_copyExcluding=function(ee,ne){var se={},ae;for(ae in ee)ae in ne||(se[ae]=ee[ae]);return se},_inheritDefaults=function(ee){var ne=ee.parent||_globalTimeline,se=ee.keyframes?_setKeyframeDefaults(_isArray(ee.keyframes)):_setDefaults$1;if(_isNotFalse(ee.inherit))for(;ne;)se(ee,ne.vars.defaults),ne=ne.parent||ne._dp;return ee},_arraysMatch=function(ee,ne){for(var se=ee.length,ae=se===ne.length;ae&&se--&&ee[se]===ne[se];);return se<0},_addLinkedListItem=function(ee,ne,se,ae,ue){se===void 0&&(se="_first"),ae===void 0&&(ae="_last");var de=ee[ae],oe;if(ue)for(oe=ne[ue];de&&de[ue]>oe;)de=de._prev;return de?(ne._next=de._next,de._next=ne):(ne._next=ee[se],ee[se]=ne),ne._next?ne._next._prev=ne:ee[ae]=ne,ne._prev=de,ne.parent=ne._dp=ee,ne},_removeLinkedListItem=function(ee,ne,se,ae){se===void 0&&(se="_first"),ae===void 0&&(ae="_last");var ue=ne._prev,de=ne._next;ue?ue._next=de:ee[se]===ne&&(ee[se]=de),de?de._prev=ue:ee[ae]===ne&&(ee[ae]=ue),ne._next=ne._prev=ne.parent=null},_removeFromParent=function(ee,ne){ee.parent&&(!ne||ee.parent.autoRemoveChildren)&&ee.parent.remove&&ee.parent.remove(ee),ee._act=0},_uncache=function(ee,ne){if(ee&&(!ne||ne._end>ee._dur||ne._start<0))for(var se=ee;se;)se._dirty=1,se=se.parent;return ee},_recacheAncestors=function(ee){for(var ne=ee.parent;ne&&ne.parent;)ne._dirty=1,ne.totalDuration(),ne=ne.parent;return ee},_rewindStartAt=function(ee,ne,se,ae){return ee._startAt&&(_reverting$1?ee._startAt.revert(_revertConfigNoKill):ee.vars.immediateRender&&!ee.vars.autoRevert||ee._startAt.render(ne,!0,ae))},_hasNoPausedAncestors=function te(ee){return!ee||ee._ts&&te(ee.parent)},_elapsedCycleDuration=function(ee){return ee._repeat?_animationCycle(ee._tTime,ee=ee.duration()+ee._rDelay)*ee:0},_animationCycle=function(ee,ne){var se=Math.floor(ee=_roundPrecise(ee/ne));return ee&&se===ee?se-1:se},_parentToChildTotalTime=function(ee,ne){return(ee-ne._start)*ne._ts+(ne._ts>=0?0:ne._dirty?ne.totalDuration():ne._tDur)},_setEnd=function(ee){return ee._end=_roundPrecise(ee._start+(ee._tDur/Math.abs(ee._ts||ee._rts||_tinyNum)||0))},_alignPlayhead=function(ee,ne){var se=ee._dp;return se&&se.smoothChildTiming&&ee._ts&&(ee._start=_roundPrecise(se._time-(ee._ts>0?ne/ee._ts:((ee._dirty?ee.totalDuration():ee._tDur)-ne)/-ee._ts)),_setEnd(ee),se._dirty||_uncache(se,ee)),ee},_postAddChecks=function(ee,ne){var se;if((ne._time||!ne._dur&&ne._initted||ne._start<ee._time&&(ne._dur||!ne.add))&&(se=_parentToChildTotalTime(ee.rawTime(),ne),(!ne._dur||_clamp$1(0,ne.totalDuration(),se)-ne._tTime>_tinyNum)&&ne.render(se,!0)),_uncache(ee,ne)._dp&&ee._initted&&ee._time>=ee._dur&&ee._ts){if(ee._dur<ee.duration())for(se=ee;se._dp;)se.rawTime()>=0&&se.totalTime(se._tTime),se=se._dp;ee._zTime=-_tinyNum}},_addToTimeline=function(ee,ne,se,ae){return ne.parent&&_removeFromParent(ne),ne._start=_roundPrecise((_isNumber$2(se)?se:se||ee!==_globalTimeline?_parsePosition$1(ee,se,ne):ee._time)+ne._delay),ne._end=_roundPrecise(ne._start+(ne.totalDuration()/Math.abs(ne.timeScale())||0)),_addLinkedListItem(ee,ne,"_first","_last",ee._sort?"_start":0),_isFromOrFromStart(ne)||(ee._recent=ne),ae||_postAddChecks(ee,ne),ee._ts<0&&_alignPlayhead(ee,ee._tTime),ee},_scrollTrigger=function(ee,ne){return(_globals.ScrollTrigger||_missingPlugin("scrollTrigger",ne))&&_globals.ScrollTrigger.create(ne,ee)},_attemptInitTween=function(ee,ne,se,ae,ue){if(_initTween(ee,ne,ue),!ee._initted)return 1;if(!se&&ee._pt&&!_reverting$1&&(ee._dur&&ee.vars.lazy!==!1||!ee._dur&&ee.vars.lazy)&&_lastRenderedFrame!==_ticker.frame)return _lazyTweens.push(ee),ee._lazy=[ue,ae],1},_parentPlayheadIsBeforeStart=function te(ee){var ne=ee.parent;return ne&&ne._ts&&ne._initted&&!ne._lock&&(ne.rawTime()<0||te(ne))},_isFromOrFromStart=function(ee){var ne=ee.data;return ne==="isFromStart"||ne==="isStart"},_renderZeroDurationTween=function(ee,ne,se,ae){var ue=ee.ratio,de=ne<0||!ne&&(!ee._start&&_parentPlayheadIsBeforeStart(ee)&&!(!ee._initted&&_isFromOrFromStart(ee))||(ee._ts<0||ee._dp._ts<0)&&!_isFromOrFromStart(ee))?0:1,oe=ee._rDelay,me=0,ve,Ee,Pe;if(oe&&ee._repeat&&(me=_clamp$1(0,ee._tDur,ne),Ee=_animationCycle(me,oe),ee._yoyo&&Ee&1&&(de=1-de),Ee!==_animationCycle(ee._tTime,oe)&&(ue=1-de,ee.vars.repeatRefresh&&ee._initted&&ee.invalidate())),de!==ue||_reverting$1||ae||ee._zTime===_tinyNum||!ne&&ee._zTime){if(!ee._initted&&_attemptInitTween(ee,ne,ae,se,me))return;for(Pe=ee._zTime,ee._zTime=ne||(se?_tinyNum:0),se||(se=ne&&!Pe),ee.ratio=de,ee._from&&(de=1-de),ee._time=0,ee._tTime=me,ve=ee._pt;ve;)ve.r(de,ve.d),ve=ve._next;ne<0&&_rewindStartAt(ee,ne,se,!0),ee._onUpdate&&!se&&_callback$1(ee,"onUpdate"),me&&ee._repeat&&!se&&ee.parent&&_callback$1(ee,"onRepeat"),(ne>=ee._tDur||ne<0)&&ee.ratio===de&&(de&&_removeFromParent(ee,1),!se&&!_reverting$1&&(_callback$1(ee,de?"onComplete":"onReverseComplete",!0),ee._prom&&ee._prom()))}else ee._zTime||(ee._zTime=ne)},_findNextPauseTween=function(ee,ne,se){var ae;if(se>ne)for(ae=ee._first;ae&&ae._start<=se;){if(ae.data==="isPause"&&ae._start>ne)return ae;ae=ae._next}else for(ae=ee._last;ae&&ae._start>=se;){if(ae.data==="isPause"&&ae._start<ne)return ae;ae=ae._prev}},_setDuration=function(ee,ne,se,ae){var ue=ee._repeat,de=_roundPrecise(ne)||0,oe=ee._tTime/ee._tDur;return oe&&!ae&&(ee._time*=de/ee._dur),ee._dur=de,ee._tDur=ue?ue<0?1e10:_roundPrecise(de*(ue+1)+ee._rDelay*ue):de,oe>0&&!ae&&_alignPlayhead(ee,ee._tTime=ee._tDur*oe),ee.parent&&_setEnd(ee),se||_uncache(ee.parent,ee),ee},_onUpdateTotalDuration=function(ee){return ee instanceof Timeline?_uncache(ee):_setDuration(ee,ee._dur)},_zeroPosition={_start:0,endTime:_emptyFunc,totalDuration:_emptyFunc},_parsePosition$1=function te(ee,ne,se){var ae=ee.labels,ue=ee._recent||_zeroPosition,de=ee.duration()>=_bigNum$2?ue.endTime(!1):ee._dur,oe,me,ve;return _isString$1(ne)&&(isNaN(ne)||ne in ae)?(me=ne.charAt(0),ve=ne.substr(-1)==="%",oe=ne.indexOf("="),me==="<"||me===">"?(oe>=0&&(ne=ne.replace(/=/,"")),(me==="<"?ue._start:ue.endTime(ue._repeat>=0))+(parseFloat(ne.substr(1))||0)*(ve?(oe<0?ue:se).totalDuration()/100:1)):oe<0?(ne in ae||(ae[ne]=de),ae[ne]):(me=parseFloat(ne.charAt(oe-1)+ne.substr(oe+1)),ve&&se&&(me=me/100*(_isArray(se)?se[0]:se).totalDuration()),oe>1?te(ee,ne.substr(0,oe-1),se)+me:de+me)):ne==null?de:+ne},_createTweenType=function(ee,ne,se){var ae=_isNumber$2(ne[1]),ue=(ae?2:1)+(ee<2?0:1),de=ne[ue],oe,me;if(ae&&(de.duration=ne[1]),de.parent=se,ee){for(oe=de,me=se;me&&!("immediateRender"in oe);)oe=me.vars.defaults||{},me=_isNotFalse(me.vars.inherit)&&me.parent;de.immediateRender=_isNotFalse(oe.immediateRender),ee<2?de.runBackwards=1:de.startAt=ne[ue-1]}return new Tween(ne[0],de,ne[ue+1])},_conditionalReturn=function(ee,ne){return ee||ee===0?ne(ee):ne},_clamp$1=function(ee,ne,se){return se<ee?ee:se>ne?ne:se},getUnit=function(ee,ne){return!_isString$1(ee)||!(ne=_unitExp.exec(ee))?"":ne[1]},clamp$1=function(ee,ne,se){return _conditionalReturn(se,function(ae){return _clamp$1(ee,ne,ae)})},_slice=[].slice,_isArrayLike=function(ee,ne){return ee&&_isObject$1(ee)&&"length"in ee&&(!ne&&!ee.length||ee.length-1 in ee&&_isObject$1(ee[0]))&&!ee.nodeType&&ee!==_win$3},_flatten=function(ee,ne,se){return se===void 0&&(se=[]),ee.forEach(function(ae){var ue;return _isString$1(ae)&&!ne||_isArrayLike(ae,1)?(ue=se).push.apply(ue,toArray$1(ae)):se.push(ae)})||se},toArray$1=function(ee,ne,se){return _context$2&&!ne&&_context$2.selector?_context$2.selector(ee):_isString$1(ee)&&!se&&(_coreInitted$3||!_wake())?_slice.call((ne||_doc$3).querySelectorAll(ee),0):_isArray(ee)?_flatten(ee,se):_isArrayLike(ee)?_slice.call(ee,0):ee?[ee]:[]},selector=function(ee){return ee=toArray$1(ee)[0]||_warn("Invalid scope")||{},function(ne){var se=ee.current||ee.nativeElement||ee;return toArray$1(ne,se.querySelectorAll?se:se===ee?_warn("Invalid scope")||_doc$3.createElement("div"):ee)}},shuffle=function(ee){return ee.sort(function(){return .5-Math.random()})},distribute=function(ee){if(_isFunction$1(ee))return ee;var ne=_isObject$1(ee)?ee:{each:ee},se=_parseEase(ne.ease),ae=ne.from||0,ue=parseFloat(ne.base)||0,de={},oe=ae>0&&ae<1,me=isNaN(ae)||oe,ve=ne.axis,Ee=ae,Pe=ae;return _isString$1(ae)?Ee=Pe={center:.5,edges:.5,end:1}[ae]||0:!oe&&me&&(Ee=ae[0],Pe=ae[1]),function(ye,Te,Ae){var Ce=(Ae||ne).length,De=de[Ce],Ie,ze,Re,Oe,qe,Ze,Ue,Ye,ct;if(!De){if(ct=ne.grid==="auto"?0:(ne.grid||[1,_bigNum$2])[1],!ct){for(Ue=-_bigNum$2;Ue<(Ue=Ae[ct++].getBoundingClientRect().left)&&ct<Ce;);ct<Ce&&ct--}for(De=de[Ce]=[],Ie=me?Math.min(ct,Ce)*Ee-.5:ae%ct,ze=ct===_bigNum$2?0:me?Ce*Pe/ct-.5:ae/ct|0,Ue=0,Ye=_bigNum$2,Ze=0;Ze<Ce;Ze++)Re=Ze%ct-Ie,Oe=ze-(Ze/ct|0),De[Ze]=qe=ve?Math.abs(ve==="y"?Oe:Re):_sqrt$1(Re*Re+Oe*Oe),qe>Ue&&(Ue=qe),qe<Ye&&(Ye=qe);ae==="random"&&shuffle(De),De.max=Ue-Ye,De.min=Ye,De.v=Ce=(parseFloat(ne.amount)||parseFloat(ne.each)*(ct>Ce?Ce-1:ve?ve==="y"?Ce/ct:ct:Math.max(ct,Ce/ct))||0)*(ae==="edges"?-1:1),De.b=Ce<0?ue-Ce:ue,De.u=getUnit(ne.amount||ne.each)||0,se=se&&Ce<0?_invertEase(se):se}return Ce=(De[ye]-De.min)/De.max||0,_roundPrecise(De.b+(se?se(Ce):Ce)*De.v)+De.u}},_roundModifier=function(ee){var ne=Math.pow(10,((ee+"").split(".")[1]||"").length);return function(se){var ae=_roundPrecise(Math.round(parseFloat(se)/ee)*ee*ne);return(ae-ae%1)/ne+(_isNumber$2(se)?0:getUnit(se))}},snap=function(ee,ne){var se=_isArray(ee),ae,ue;return!se&&_isObject$1(ee)&&(ae=se=ee.radius||_bigNum$2,ee.values?(ee=toArray$1(ee.values),(ue=!_isNumber$2(ee[0]))&&(ae*=ae)):ee=_roundModifier(ee.increment)),_conditionalReturn(ne,se?_isFunction$1(ee)?function(de){return ue=ee(de),Math.abs(ue-de)<=ae?ue:de}:function(de){for(var oe=parseFloat(ue?de.x:de),me=parseFloat(ue?de.y:0),ve=_bigNum$2,Ee=0,Pe=ee.length,ye,Te;Pe--;)ue?(ye=ee[Pe].x-oe,Te=ee[Pe].y-me,ye=ye*ye+Te*Te):ye=Math.abs(ee[Pe]-oe),ye<ve&&(ve=ye,Ee=Pe);return Ee=!ae||ve<=ae?ee[Ee]:de,ue||Ee===de||_isNumber$2(de)?Ee:Ee+getUnit(de)}:_roundModifier(ee))},random=function(ee,ne,se,ae){return _conditionalReturn(_isArray(ee)?!ne:se===!0?!!(se=0):!ae,function(){return _isArray(ee)?ee[~~(Math.random()*ee.length)]:(se=se||1e-5)&&(ae=se<1?Math.pow(10,(se+"").length-2):1)&&Math.floor(Math.round((ee-se/2+Math.random()*(ne-ee+se*.99))/se)*se*ae)/ae})},pipe=function(){for(var ee=arguments.length,ne=new Array(ee),se=0;se<ee;se++)ne[se]=arguments[se];return function(ae){return ne.reduce(function(ue,de){return de(ue)},ae)}},unitize=function(ee,ne){return function(se){return ee(parseFloat(se))+(ne||getUnit(se))}},normalize=function(ee,ne,se){return mapRange(ee,ne,0,1,se)},_wrapArray=function(ee,ne,se){return _conditionalReturn(se,function(ae){return ee[~~ne(ae)]})},wrap=function te(ee,ne,se){var ae=ne-ee;return _isArray(ee)?_wrapArray(ee,te(0,ee.length),ne):_conditionalReturn(se,function(ue){return(ae+(ue-ee)%ae)%ae+ee})},wrapYoyo=function te(ee,ne,se){var ae=ne-ee,ue=ae*2;return _isArray(ee)?_wrapArray(ee,te(0,ee.length-1),ne):_conditionalReturn(se,function(de){return de=(ue+(de-ee)%ue)%ue||0,ee+(de>ae?ue-de:de)})},_replaceRandom=function(ee){for(var ne=0,se="",ae,ue,de,oe;~(ae=ee.indexOf("random(",ne));)de=ee.indexOf(")",ae),oe=ee.charAt(ae+7)==="[",ue=ee.substr(ae+7,de-ae-7).match(oe?_delimitedValueExp:_strictNumExp),se+=ee.substr(ne,ae-ne)+random(oe?ue:+ue[0],oe?0:+ue[1],+ue[2]||1e-5),ne=de+1;return se+ee.substr(ne,ee.length-ne)},mapRange=function(ee,ne,se,ae,ue){var de=ne-ee,oe=ae-se;return _conditionalReturn(ue,function(me){return se+((me-ee)/de*oe||0)})},interpolate=function te(ee,ne,se,ae){var ue=isNaN(ee+ne)?0:function(Te){return(1-Te)*ee+Te*ne};if(!ue){var de=_isString$1(ee),oe={},me,ve,Ee,Pe,ye;if(se===!0&&(ae=1)&&(se=null),de)ee={p:ee},ne={p:ne};else if(_isArray(ee)&&!_isArray(ne)){for(Ee=[],Pe=ee.length,ye=Pe-2,ve=1;ve<Pe;ve++)Ee.push(te(ee[ve-1],ee[ve]));Pe--,ue=function(Ae){Ae*=Pe;var Ce=Math.min(ye,~~Ae);return Ee[Ce](Ae-Ce)},se=ne}else ae||(ee=_merge(_isArray(ee)?[]:{},ee));if(!Ee){for(me in ne)_addPropTween.call(oe,ee,me,"get",ne[me]);ue=function(Ae){return _renderPropTweens(Ae,oe)||(de?ee.p:ee)}}}return _conditionalReturn(se,ue)},_getLabelInDirection=function(ee,ne,se){var ae=ee.labels,ue=_bigNum$2,de,oe,me;for(de in ae)oe=ae[de]-ne,oe<0==!!se&&oe&&ue>(oe=Math.abs(oe))&&(me=de,ue=oe);return me},_callback$1=function(ee,ne,se){var ae=ee.vars,ue=ae[ne],de=_context$2,oe=ee._ctx,me,ve,Ee;if(!!ue)return me=ae[ne+"Params"],ve=ae.callbackScope||ee,se&&_lazyTweens.length&&_lazyRender(),oe&&(_context$2=oe),Ee=me?ue.apply(ve,me):ue.call(ve),_context$2=de,Ee},_interrupt=function(ee){return _removeFromParent(ee),ee.scrollTrigger&&ee.scrollTrigger.kill(!!_reverting$1),ee.progress()<1&&_callback$1(ee,"onInterrupt"),ee},_quickTween,_registerPluginQueue=[],_createPlugin=function(ee){if(!!ee)if(ee=!ee.name&&ee.default||ee,_windowExists$2()||ee.headless){var ne=ee.name,se=_isFunction$1(ee),ae=ne&&!se&&ee.init?function(){this._props=[]}:ee,ue={init:_emptyFunc,render:_renderPropTweens,add:_addPropTween,kill:_killPropTweensOf,modifier:_addPluginModifier,rawVars:0},de={targetTest:0,get:0,getSetter:_getSetter,aliases:{},register:0};if(_wake(),ee!==ae){if(_plugins[ne])return;_setDefaults$1(ae,_setDefaults$1(_copyExcluding(ee,ue),de)),_merge(ae.prototype,_merge(ue,_copyExcluding(ee,de))),_plugins[ae.prop=ne]=ae,ee.targetTest&&(_harnessPlugins.push(ae),_reservedProps[ne]=1),ne=(ne==="css"?"CSS":ne.charAt(0).toUpperCase()+ne.substr(1))+"Plugin"}_addGlobal(ne,ae),ee.register&&ee.register(gsap$3,ae,PropTween)}else _registerPluginQueue.push(ee)},_255=255,_colorLookup={aqua:[0,_255,_255],lime:[0,_255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,_255],navy:[0,0,128],white:[_255,_255,_255],olive:[128,128,0],yellow:[_255,_255,0],orange:[_255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[_255,0,0],pink:[_255,192,203],cyan:[0,_255,_255],transparent:[_255,_255,_255,0]},_hue=function(ee,ne,se){return ee+=ee<0?1:ee>1?-1:0,(ee*6<1?ne+(se-ne)*ee*6:ee<.5?se:ee*3<2?ne+(se-ne)*(2/3-ee)*6:ne)*_255+.5|0},splitColor=function(ee,ne,se){var ae=ee?_isNumber$2(ee)?[ee>>16,ee>>8&_255,ee&_255]:0:_colorLookup.black,ue,de,oe,me,ve,Ee,Pe,ye,Te,Ae;if(!ae){if(ee.substr(-1)===","&&(ee=ee.substr(0,ee.length-1)),_colorLookup[ee])ae=_colorLookup[ee];else if(ee.charAt(0)==="#"){if(ee.length<6&&(ue=ee.charAt(1),de=ee.charAt(2),oe=ee.charAt(3),ee="#"+ue+ue+de+de+oe+oe+(ee.length===5?ee.charAt(4)+ee.charAt(4):"")),ee.length===9)return ae=parseInt(ee.substr(1,6),16),[ae>>16,ae>>8&_255,ae&_255,parseInt(ee.substr(7),16)/255];ee=parseInt(ee.substr(1),16),ae=[ee>>16,ee>>8&_255,ee&_255]}else if(ee.substr(0,3)==="hsl"){if(ae=Ae=ee.match(_strictNumExp),!ne)me=+ae[0]%360/360,ve=+ae[1]/100,Ee=+ae[2]/100,de=Ee<=.5?Ee*(ve+1):Ee+ve-Ee*ve,ue=Ee*2-de,ae.length>3&&(ae[3]*=1),ae[0]=_hue(me+1/3,ue,de),ae[1]=_hue(me,ue,de),ae[2]=_hue(me-1/3,ue,de);else if(~ee.indexOf("="))return ae=ee.match(_numExp$1),se&&ae.length<4&&(ae[3]=1),ae}else ae=ee.match(_strictNumExp)||_colorLookup.transparent;ae=ae.map(Number)}return ne&&!Ae&&(ue=ae[0]/_255,de=ae[1]/_255,oe=ae[2]/_255,Pe=Math.max(ue,de,oe),ye=Math.min(ue,de,oe),Ee=(Pe+ye)/2,Pe===ye?me=ve=0:(Te=Pe-ye,ve=Ee>.5?Te/(2-Pe-ye):Te/(Pe+ye),me=Pe===ue?(de-oe)/Te+(de<oe?6:0):Pe===de?(oe-ue)/Te+2:(ue-de)/Te+4,me*=60),ae[0]=~~(me+.5),ae[1]=~~(ve*100+.5),ae[2]=~~(Ee*100+.5)),se&&ae.length<4&&(ae[3]=1),ae},_colorOrderData=function(ee){var ne=[],se=[],ae=-1;return ee.split(_colorExp).forEach(function(ue){var de=ue.match(_numWithUnitExp)||[];ne.push.apply(ne,de),se.push(ae+=de.length+1)}),ne.c=se,ne},_formatColors=function(ee,ne,se){var ae="",ue=(ee+ae).match(_colorExp),de=ne?"hsla(":"rgba(",oe=0,me,ve,Ee,Pe;if(!ue)return ee;if(ue=ue.map(function(ye){return(ye=splitColor(ye,ne,1))&&de+(ne?ye[0]+","+ye[1]+"%,"+ye[2]+"%,"+ye[3]:ye.join(","))+")"}),se&&(Ee=_colorOrderData(ee),me=se.c,me.join(ae)!==Ee.c.join(ae)))for(ve=ee.replace(_colorExp,"1").split(_numWithUnitExp),Pe=ve.length-1;oe<Pe;oe++)ae+=ve[oe]+(~me.indexOf(oe)?ue.shift()||de+"0,0,0,0)":(Ee.length?Ee:ue.length?ue:se).shift());if(!ve)for(ve=ee.split(_colorExp),Pe=ve.length-1;oe<Pe;oe++)ae+=ve[oe]+ue[oe];return ae+ve[Pe]},_colorExp=function(){var te="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",ee;for(ee in _colorLookup)te+="|"+ee+"\\b";return new RegExp(te+")","gi")}(),_hslExp=/hsl[a]?\(/,_colorStringFilter=function(ee){var ne=ee.join(" "),se;if(_colorExp.lastIndex=0,_colorExp.test(ne))return se=_hslExp.test(ne),ee[1]=_formatColors(ee[1],se),ee[0]=_formatColors(ee[0],se,_colorOrderData(ee[1])),!0},_tickerActive,_ticker=function(){var te=Date.now,ee=500,ne=33,se=te(),ae=se,ue=1e3/240,de=ue,oe=[],me,ve,Ee,Pe,ye,Te,Ae=function Ce(De){var Ie=te()-ae,ze=De===!0,Re,Oe,qe,Ze;if((Ie>ee||Ie<0)&&(se+=Ie-ne),ae+=Ie,qe=ae-se,Re=qe-de,(Re>0||ze)&&(Ze=++Pe.frame,ye=qe-Pe.time*1e3,Pe.time=qe=qe/1e3,de+=Re+(Re>=ue?4:ue-Re),Oe=1),ze||(me=ve(Ce)),Oe)for(Te=0;Te<oe.length;Te++)oe[Te](qe,ye,Ze,De)};return Pe={time:0,frame:0,tick:function(){Ae(!0)},deltaRatio:function(De){return ye/(1e3/(De||60))},wake:function(){_coreReady&&(!_coreInitted$3&&_windowExists$2()&&(_win$3=_coreInitted$3=window,_doc$3=_win$3.document||{},_globals.gsap=gsap$3,(_win$3.gsapVersions||(_win$3.gsapVersions=[])).push(gsap$3.version),_install(_installScope||_win$3.GreenSockGlobals||!_win$3.gsap&&_win$3||{}),_registerPluginQueue.forEach(_createPlugin)),Ee=typeof requestAnimationFrame!="undefined"&&requestAnimationFrame,me&&Pe.sleep(),ve=Ee||function(De){return setTimeout(De,de-Pe.time*1e3+1|0)},_tickerActive=1,Ae(2))},sleep:function(){(Ee?cancelAnimationFrame:clearTimeout)(me),_tickerActive=0,ve=_emptyFunc},lagSmoothing:function(De,Ie){ee=De||1/0,ne=Math.min(Ie||33,ee)},fps:function(De){ue=1e3/(De||240),de=Pe.time*1e3+ue},add:function(De,Ie,ze){var Re=Ie?function(Oe,qe,Ze,Ue){De(Oe,qe,Ze,Ue),Pe.remove(Re)}:De;return Pe.remove(De),oe[ze?"unshift":"push"](Re),_wake(),Re},remove:function(De,Ie){~(Ie=oe.indexOf(De))&&oe.splice(Ie,1)&&Te>=Ie&&Te--},_listeners:oe},Pe}(),_wake=function(){return!_tickerActive&&_ticker.wake()},_easeMap={},_customEaseExp=/^[\d.\-M][\d.\-,\s]/,_quotesExp=/["']/g,_parseObjectInString=function(ee){for(var ne={},se=ee.substr(1,ee.length-3).split(":"),ae=se[0],ue=1,de=se.length,oe,me,ve;ue<de;ue++)me=se[ue],oe=ue!==de-1?me.lastIndexOf(","):me.length,ve=me.substr(0,oe),ne[ae]=isNaN(ve)?ve.replace(_quotesExp,"").trim():+ve,ae=me.substr(oe+1).trim();return ne},_valueInParentheses=function(ee){var ne=ee.indexOf("(")+1,se=ee.indexOf(")"),ae=ee.indexOf("(",ne);return ee.substring(ne,~ae&&ae<se?ee.indexOf(")",se+1):se)},_configEaseFromString=function(ee){var ne=(ee+"").split("("),se=_easeMap[ne[0]];return se&&ne.length>1&&se.config?se.config.apply(null,~ee.indexOf("{")?[_parseObjectInString(ne[1])]:_valueInParentheses(ee).split(",").map(_numericIfPossible)):_easeMap._CE&&_customEaseExp.test(ee)?_easeMap._CE("",ee):se},_invertEase=function(ee){return function(ne){return 1-ee(1-ne)}},_propagateYoyoEase=function te(ee,ne){for(var se=ee._first,ae;se;)se instanceof Timeline?te(se,ne):se.vars.yoyoEase&&(!se._yoyo||!se._repeat)&&se._yoyo!==ne&&(se.timeline?te(se.timeline,ne):(ae=se._ease,se._ease=se._yEase,se._yEase=ae,se._yoyo=ne)),se=se._next},_parseEase=function(ee,ne){return ee&&(_isFunction$1(ee)?ee:_easeMap[ee]||_configEaseFromString(ee))||ne},_insertEase=function(ee,ne,se,ae){se===void 0&&(se=function(me){return 1-ne(1-me)}),ae===void 0&&(ae=function(me){return me<.5?ne(me*2)/2:1-ne((1-me)*2)/2});var ue={easeIn:ne,easeOut:se,easeInOut:ae},de;return _forEachName(ee,function(oe){_easeMap[oe]=_globals[oe]=ue,_easeMap[de=oe.toLowerCase()]=se;for(var me in ue)_easeMap[de+(me==="easeIn"?".in":me==="easeOut"?".out":".inOut")]=_easeMap[oe+"."+me]=ue[me]}),ue},_easeInOutFromOut=function(ee){return function(ne){return ne<.5?(1-ee(1-ne*2))/2:.5+ee((ne-.5)*2)/2}},_configElastic=function te(ee,ne,se){var ae=ne>=1?ne:1,ue=(se||(ee?.3:.45))/(ne<1?ne:1),de=ue/_2PI*(Math.asin(1/ae)||0),oe=function(Ee){return Ee===1?1:ae*Math.pow(2,-10*Ee)*_sin$1((Ee-de)*ue)+1},me=ee==="out"?oe:ee==="in"?function(ve){return 1-oe(1-ve)}:_easeInOutFromOut(oe);return ue=_2PI/ue,me.config=function(ve,Ee){return te(ee,ve,Ee)},me},_configBack=function te(ee,ne){ne===void 0&&(ne=1.70158);var se=function(de){return de?--de*de*((ne+1)*de+ne)+1:0},ae=ee==="out"?se:ee==="in"?function(ue){return 1-se(1-ue)}:_easeInOutFromOut(se);return ae.config=function(ue){return te(ee,ue)},ae};_forEachName("Linear,Quad,Cubic,Quart,Quint,Strong",function(te,ee){var ne=ee<5?ee+1:ee;_insertEase(te+",Power"+(ne-1),ee?function(se){return Math.pow(se,ne)}:function(se){return se},function(se){return 1-Math.pow(1-se,ne)},function(se){return se<.5?Math.pow(se*2,ne)/2:1-Math.pow((1-se)*2,ne)/2})}),_easeMap.Linear.easeNone=_easeMap.none=_easeMap.Linear.easeIn,_insertEase("Elastic",_configElastic("in"),_configElastic("out"),_configElastic()),function(te,ee){var ne=1/ee,se=2*ne,ae=2.5*ne,ue=function(oe){return oe<ne?te*oe*oe:oe<se?te*Math.pow(oe-1.5/ee,2)+.75:oe<ae?te*(oe-=2.25/ee)*oe+.9375:te*Math.pow(oe-2.625/ee,2)+.984375};_insertEase("Bounce",function(de){return 1-ue(1-de)},ue)}(7.5625,2.75),_insertEase("Expo",function(te){return Math.pow(2,10*(te-1))*te+te*te*te*te*te*te*(1-te)}),_insertEase("Circ",function(te){return-(_sqrt$1(1-te*te)-1)}),_insertEase("Sine",function(te){return te===1?1:-_cos$1(te*_HALF_PI)+1}),_insertEase("Back",_configBack("in"),_configBack("out"),_configBack()),_easeMap.SteppedEase=_easeMap.steps=_globals.SteppedEase={config:function(ee,ne){ee===void 0&&(ee=1);var se=1/ee,ae=ee+(ne?0:1),ue=ne?1:0,de=1-_tinyNum;return function(oe){return((ae*_clamp$1(0,de,oe)|0)+ue)*se}}},_defaults$2.ease=_easeMap["quad.out"],_forEachName("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(te){return _callbackNames+=te+","+te+"Params,"});var GSCache=function(ee,ne){this.id=_gsID++,ee._gsap=this,this.target=ee,this.harness=ne,this.get=ne?ne.get:_getProperty,this.set=ne?ne.getSetter:_getSetter},Animation=function(){function te(ne){this.vars=ne,this._delay=+ne.delay||0,(this._repeat=ne.repeat===1/0?-2:ne.repeat||0)&&(this._rDelay=ne.repeatDelay||0,this._yoyo=!!ne.yoyo||!!ne.yoyoEase),this._ts=1,_setDuration(this,+ne.duration,1,1),this.data=ne.data,_context$2&&(this._ctx=_context$2,_context$2.data.push(this)),_tickerActive||_ticker.wake()}var ee=te.prototype;return ee.delay=function(se){return se||se===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+se-this._delay),this._delay=se,this):this._delay},ee.duration=function(se){return arguments.length?this.totalDuration(this._repeat>0?se+(se+this._rDelay)*this._repeat:se):this.totalDuration()&&this._dur},ee.totalDuration=function(se){return arguments.length?(this._dirty=0,_setDuration(this,this._repeat<0?se:(se-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},ee.totalTime=function(se,ae){if(_wake(),!arguments.length)return this._tTime;var ue=this._dp;if(ue&&ue.smoothChildTiming&&this._ts){for(_alignPlayhead(this,se),!ue._dp||ue.parent||_postAddChecks(ue,this);ue&&ue.parent;)ue.parent._time!==ue._start+(ue._ts>=0?ue._tTime/ue._ts:(ue.totalDuration()-ue._tTime)/-ue._ts)&&ue.totalTime(ue._tTime,!0),ue=ue.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&se<this._tDur||this._ts<0&&se>0||!this._tDur&&!se)&&_addToTimeline(this._dp,this,this._start-this._delay)}return(this._tTime!==se||!this._dur&&!ae||this._initted&&Math.abs(this._zTime)===_tinyNum||!se&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=se),_lazySafeRender(this,se,ae)),this},ee.time=function(se,ae){return arguments.length?this.totalTime(Math.min(this.totalDuration(),se+_elapsedCycleDuration(this))%(this._dur+this._rDelay)||(se?this._dur:0),ae):this._time},ee.totalProgress=function(se,ae){return arguments.length?this.totalTime(this.totalDuration()*se,ae):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},ee.progress=function(se,ae){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-se:se)+_elapsedCycleDuration(this),ae):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},ee.iteration=function(se,ae){var ue=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(se-1)*ue,ae):this._repeat?_animationCycle(this._tTime,ue)+1:1},ee.timeScale=function(se,ae){if(!arguments.length)return this._rts===-_tinyNum?0:this._rts;if(this._rts===se)return this;var ue=this.parent&&this._ts?_parentToChildTotalTime(this.parent._time,this):this._tTime;return this._rts=+se||0,this._ts=this._ps||se===-_tinyNum?0:this._rts,this.totalTime(_clamp$1(-Math.abs(this._delay),this.totalDuration(),ue),ae!==!1),_setEnd(this),_recacheAncestors(this)},ee.paused=function(se){return arguments.length?(this._ps!==se&&(this._ps=se,se?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(_wake(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==_tinyNum&&(this._tTime-=_tinyNum)))),this):this._ps},ee.startTime=function(se){if(arguments.length){this._start=se;var ae=this.parent||this._dp;return ae&&(ae._sort||!this.parent)&&_addToTimeline(ae,this,se-this._delay),this}return this._start},ee.endTime=function(se){return this._start+(_isNotFalse(se)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},ee.rawTime=function(se){var ae=this.parent||this._dp;return ae?se&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?_parentToChildTotalTime(ae.rawTime(se),this):this._tTime:this._tTime},ee.revert=function(se){se===void 0&&(se=_revertConfig);var ae=_reverting$1;return _reverting$1=se,_isRevertWorthy(this)&&(this.timeline&&this.timeline.revert(se),this.totalTime(-.01,se.suppressEvents)),this.data!=="nested"&&se.kill!==!1&&this.kill(),_reverting$1=ae,this},ee.globalTime=function(se){for(var ae=this,ue=arguments.length?se:ae.rawTime();ae;)ue=ae._start+ue/(Math.abs(ae._ts)||1),ae=ae._dp;return!this.parent&&this._sat?this._sat.globalTime(se):ue},ee.repeat=function(se){return arguments.length?(this._repeat=se===1/0?-2:se,_onUpdateTotalDuration(this)):this._repeat===-2?1/0:this._repeat},ee.repeatDelay=function(se){if(arguments.length){var ae=this._time;return this._rDelay=se,_onUpdateTotalDuration(this),ae?this.time(ae):this}return this._rDelay},ee.yoyo=function(se){return arguments.length?(this._yoyo=se,this):this._yoyo},ee.seek=function(se,ae){return this.totalTime(_parsePosition$1(this,se),_isNotFalse(ae))},ee.restart=function(se,ae){return this.play().totalTime(se?-this._delay:0,_isNotFalse(ae)),this._dur||(this._zTime=-_tinyNum),this},ee.play=function(se,ae){return se!=null&&this.seek(se,ae),this.reversed(!1).paused(!1)},ee.reverse=function(se,ae){return se!=null&&this.seek(se||this.totalDuration(),ae),this.reversed(!0).paused(!1)},ee.pause=function(se,ae){return se!=null&&this.seek(se,ae),this.paused(!0)},ee.resume=function(){return this.paused(!1)},ee.reversed=function(se){return arguments.length?(!!se!==this.reversed()&&this.timeScale(-this._rts||(se?-_tinyNum:0)),this):this._rts<0},ee.invalidate=function(){return this._initted=this._act=0,this._zTime=-_tinyNum,this},ee.isActive=function(){var se=this.parent||this._dp,ae=this._start,ue;return!!(!se||this._ts&&this._initted&&se.isActive()&&(ue=se.rawTime(!0))>=ae&&ue<this.endTime(!0)-_tinyNum)},ee.eventCallback=function(se,ae,ue){var de=this.vars;return arguments.length>1?(ae?(de[se]=ae,ue&&(de[se+"Params"]=ue),se==="onUpdate"&&(this._onUpdate=ae)):delete de[se],this):de[se]},ee.then=function(se){var ae=this;return new Promise(function(ue){var de=_isFunction$1(se)?se:_passThrough$1,oe=function(){var ve=ae.then;ae.then=null,_isFunction$1(de)&&(de=de(ae))&&(de.then||de===ae)&&(ae.then=ve),ue(de),ae.then=ve};ae._initted&&ae.totalProgress()===1&&ae._ts>=0||!ae._tTime&&ae._ts<0?oe():ae._prom=oe})},ee.kill=function(){_interrupt(this)},te}();_setDefaults$1(Animation.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-_tinyNum,_prom:0,_ps:!1,_rts:1});var Timeline=function(te){_inheritsLoose(ee,te);function ee(se,ae){var ue;return se===void 0&&(se={}),ue=te.call(this,se)||this,ue.labels={},ue.smoothChildTiming=!!se.smoothChildTiming,ue.autoRemoveChildren=!!se.autoRemoveChildren,ue._sort=_isNotFalse(se.sortChildren),_globalTimeline&&_addToTimeline(se.parent||_globalTimeline,_assertThisInitialized(ue),ae),se.reversed&&ue.reverse(),se.paused&&ue.paused(!0),se.scrollTrigger&&_scrollTrigger(_assertThisInitialized(ue),se.scrollTrigger),ue}var ne=ee.prototype;return ne.to=function(ae,ue,de){return _createTweenType(0,arguments,this),this},ne.from=function(ae,ue,de){return _createTweenType(1,arguments,this),this},ne.fromTo=function(ae,ue,de,oe){return _createTweenType(2,arguments,this),this},ne.set=function(ae,ue,de){return ue.duration=0,ue.parent=this,_inheritDefaults(ue).repeatDelay||(ue.repeat=0),ue.immediateRender=!!ue.immediateRender,new Tween(ae,ue,_parsePosition$1(this,de),1),this},ne.call=function(ae,ue,de){return _addToTimeline(this,Tween.delayedCall(0,ae,ue),de)},ne.staggerTo=function(ae,ue,de,oe,me,ve,Ee){return de.duration=ue,de.stagger=de.stagger||oe,de.onComplete=ve,de.onCompleteParams=Ee,de.parent=this,new Tween(ae,de,_parsePosition$1(this,me)),this},ne.staggerFrom=function(ae,ue,de,oe,me,ve,Ee){return de.runBackwards=1,_inheritDefaults(de).immediateRender=_isNotFalse(de.immediateRender),this.staggerTo(ae,ue,de,oe,me,ve,Ee)},ne.staggerFromTo=function(ae,ue,de,oe,me,ve,Ee,Pe){return oe.startAt=de,_inheritDefaults(oe).immediateRender=_isNotFalse(oe.immediateRender),this.staggerTo(ae,ue,oe,me,ve,Ee,Pe)},ne.render=function(ae,ue,de){var oe=this._time,me=this._dirty?this.totalDuration():this._tDur,ve=this._dur,Ee=ae<=0?0:_roundPrecise(ae),Pe=this._zTime<0!=ae<0&&(this._initted||!ve),ye,Te,Ae,Ce,De,Ie,ze,Re,Oe,qe,Ze,Ue;if(this!==_globalTimeline&&Ee>me&&ae>=0&&(Ee=me),Ee!==this._tTime||de||Pe){if(oe!==this._time&&ve&&(Ee+=this._time-oe,ae+=this._time-oe),ye=Ee,Oe=this._start,Re=this._ts,Ie=!Re,Pe&&(ve||(oe=this._zTime),(ae||!ue)&&(this._zTime=ae)),this._repeat){if(Ze=this._yoyo,De=ve+this._rDelay,this._repeat<-1&&ae<0)return this.totalTime(De*100+ae,ue,de);if(ye=_roundPrecise(Ee%De),Ee===me?(Ce=this._repeat,ye=ve):(qe=_roundPrecise(Ee/De),Ce=~~qe,Ce&&Ce===qe&&(ye=ve,Ce--),ye>ve&&(ye=ve)),qe=_animationCycle(this._tTime,De),!oe&&this._tTime&&qe!==Ce&&this._tTime-qe*De-this._dur<=0&&(qe=Ce),Ze&&Ce&1&&(ye=ve-ye,Ue=1),Ce!==qe&&!this._lock){var Ye=Ze&&qe&1,ct=Ye===(Ze&&Ce&1);if(Ce<qe&&(Ye=!Ye),oe=Ye?0:Ee%ve?ve:Ee,this._lock=1,this.render(oe||(Ue?0:_roundPrecise(Ce*De)),ue,!ve)._lock=0,this._tTime=Ee,!ue&&this.parent&&_callback$1(this,"onRepeat"),this.vars.repeatRefresh&&!Ue&&(this.invalidate()._lock=1),oe&&oe!==this._time||Ie!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(ve=this._dur,me=this._tDur,ct&&(this._lock=2,oe=Ye?ve:-1e-4,this.render(oe,!0),this.vars.repeatRefresh&&!Ue&&this.invalidate()),this._lock=0,!this._ts&&!Ie)return this;_propagateYoyoEase(this,Ue)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(ze=_findNextPauseTween(this,_roundPrecise(oe),_roundPrecise(ye)),ze&&(Ee-=ye-(ye=ze._start))),this._tTime=Ee,this._time=ye,this._act=!Re,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=ae,oe=0),!oe&&Ee&&!ue&&!qe&&(_callback$1(this,"onStart"),this._tTime!==Ee))return this;if(ye>=oe&&ae>=0)for(Te=this._first;Te;){if(Ae=Te._next,(Te._act||ye>=Te._start)&&Te._ts&&ze!==Te){if(Te.parent!==this)return this.render(ae,ue,de);if(Te.render(Te._ts>0?(ye-Te._start)*Te._ts:(Te._dirty?Te.totalDuration():Te._tDur)+(ye-Te._start)*Te._ts,ue,de),ye!==this._time||!this._ts&&!Ie){ze=0,Ae&&(Ee+=this._zTime=-_tinyNum);break}}Te=Ae}else{Te=this._last;for(var at=ae<0?ae:ye;Te;){if(Ae=Te._prev,(Te._act||at<=Te._end)&&Te._ts&&ze!==Te){if(Te.parent!==this)return this.render(ae,ue,de);if(Te.render(Te._ts>0?(at-Te._start)*Te._ts:(Te._dirty?Te.totalDuration():Te._tDur)+(at-Te._start)*Te._ts,ue,de||_reverting$1&&_isRevertWorthy(Te)),ye!==this._time||!this._ts&&!Ie){ze=0,Ae&&(Ee+=this._zTime=at?-_tinyNum:_tinyNum);break}}Te=Ae}}if(ze&&!ue&&(this.pause(),ze.render(ye>=oe?0:-_tinyNum)._zTime=ye>=oe?1:-1,this._ts))return this._start=Oe,_setEnd(this),this.render(ae,ue,de);this._onUpdate&&!ue&&_callback$1(this,"onUpdate",!0),(Ee===me&&this._tTime>=this.totalDuration()||!Ee&&oe)&&(Oe===this._start||Math.abs(Re)!==Math.abs(this._ts))&&(this._lock||((ae||!ve)&&(Ee===me&&this._ts>0||!Ee&&this._ts<0)&&_removeFromParent(this,1),!ue&&!(ae<0&&!oe)&&(Ee||oe||!me)&&(_callback$1(this,Ee===me&&ae>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(Ee<me&&this.timeScale()>0)&&this._prom())))}return this},ne.add=function(ae,ue){var de=this;if(_isNumber$2(ue)||(ue=_parsePosition$1(this,ue,ae)),!(ae instanceof Animation)){if(_isArray(ae))return ae.forEach(function(oe){return de.add(oe,ue)}),this;if(_isString$1(ae))return this.addLabel(ae,ue);if(_isFunction$1(ae))ae=Tween.delayedCall(0,ae);else return this}return this!==ae?_addToTimeline(this,ae,ue):this},ne.getChildren=function(ae,ue,de,oe){ae===void 0&&(ae=!0),ue===void 0&&(ue=!0),de===void 0&&(de=!0),oe===void 0&&(oe=-_bigNum$2);for(var me=[],ve=this._first;ve;)ve._start>=oe&&(ve instanceof Tween?ue&&me.push(ve):(de&&me.push(ve),ae&&me.push.apply(me,ve.getChildren(!0,ue,de)))),ve=ve._next;return me},ne.getById=function(ae){for(var ue=this.getChildren(1,1,1),de=ue.length;de--;)if(ue[de].vars.id===ae)return ue[de]},ne.remove=function(ae){return _isString$1(ae)?this.removeLabel(ae):_isFunction$1(ae)?this.killTweensOf(ae):(ae.parent===this&&_removeLinkedListItem(this,ae),ae===this._recent&&(this._recent=this._last),_uncache(this))},ne.totalTime=function(ae,ue){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=_roundPrecise(_ticker.time-(this._ts>0?ae/this._ts:(this.totalDuration()-ae)/-this._ts))),te.prototype.totalTime.call(this,ae,ue),this._forcing=0,this):this._tTime},ne.addLabel=function(ae,ue){return this.labels[ae]=_parsePosition$1(this,ue),this},ne.removeLabel=function(ae){return delete this.labels[ae],this},ne.addPause=function(ae,ue,de){var oe=Tween.delayedCall(0,ue||_emptyFunc,de);return oe.data="isPause",this._hasPause=1,_addToTimeline(this,oe,_parsePosition$1(this,ae))},ne.removePause=function(ae){var ue=this._first;for(ae=_parsePosition$1(this,ae);ue;)ue._start===ae&&ue.data==="isPause"&&_removeFromParent(ue),ue=ue._next},ne.killTweensOf=function(ae,ue,de){for(var oe=this.getTweensOf(ae,de),me=oe.length;me--;)_overwritingTween!==oe[me]&&oe[me].kill(ae,ue);return this},ne.getTweensOf=function(ae,ue){for(var de=[],oe=toArray$1(ae),me=this._first,ve=_isNumber$2(ue),Ee;me;)me instanceof Tween?_arrayContainsAny(me._targets,oe)&&(ve?(!_overwritingTween||me._initted&&me._ts)&&me.globalTime(0)<=ue&&me.globalTime(me.totalDuration())>ue:!ue||me.isActive())&&de.push(me):(Ee=me.getTweensOf(oe,ue)).length&&de.push.apply(de,Ee),me=me._next;return de},ne.tweenTo=function(ae,ue){ue=ue||{};var de=this,oe=_parsePosition$1(de,ae),me=ue,ve=me.startAt,Ee=me.onStart,Pe=me.onStartParams,ye=me.immediateRender,Te,Ae=Tween.to(de,_setDefaults$1({ease:ue.ease||"none",lazy:!1,immediateRender:!1,time:oe,overwrite:"auto",duration:ue.duration||Math.abs((oe-(ve&&"time"in ve?ve.time:de._time))/de.timeScale())||_tinyNum,onStart:function(){if(de.pause(),!Te){var De=ue.duration||Math.abs((oe-(ve&&"time"in ve?ve.time:de._time))/de.timeScale());Ae._dur!==De&&_setDuration(Ae,De,0,1).render(Ae._time,!0,!0),Te=1}Ee&&Ee.apply(Ae,Pe||[])}},ue));return ye?Ae.render(0):Ae},ne.tweenFromTo=function(ae,ue,de){return this.tweenTo(ue,_setDefaults$1({startAt:{time:_parsePosition$1(this,ae)}},de))},ne.recent=function(){return this._recent},ne.nextLabel=function(ae){return ae===void 0&&(ae=this._time),_getLabelInDirection(this,_parsePosition$1(this,ae))},ne.previousLabel=function(ae){return ae===void 0&&(ae=this._time),_getLabelInDirection(this,_parsePosition$1(this,ae),1)},ne.currentLabel=function(ae){return arguments.length?this.seek(ae,!0):this.previousLabel(this._time+_tinyNum)},ne.shiftChildren=function(ae,ue,de){de===void 0&&(de=0);for(var oe=this._first,me=this.labels,ve;oe;)oe._start>=de&&(oe._start+=ae,oe._end+=ae),oe=oe._next;if(ue)for(ve in me)me[ve]>=de&&(me[ve]+=ae);return _uncache(this)},ne.invalidate=function(ae){var ue=this._first;for(this._lock=0;ue;)ue.invalidate(ae),ue=ue._next;return te.prototype.invalidate.call(this,ae)},ne.clear=function(ae){ae===void 0&&(ae=!0);for(var ue=this._first,de;ue;)de=ue._next,this.remove(ue),ue=de;return this._dp&&(this._time=this._tTime=this._pTime=0),ae&&(this.labels={}),_uncache(this)},ne.totalDuration=function(ae){var ue=0,de=this,oe=de._last,me=_bigNum$2,ve,Ee,Pe;if(arguments.length)return de.timeScale((de._repeat<0?de.duration():de.totalDuration())/(de.reversed()?-ae:ae));if(de._dirty){for(Pe=de.parent;oe;)ve=oe._prev,oe._dirty&&oe.totalDuration(),Ee=oe._start,Ee>me&&de._sort&&oe._ts&&!de._lock?(de._lock=1,_addToTimeline(de,oe,Ee-oe._delay,1)._lock=0):me=Ee,Ee<0&&oe._ts&&(ue-=Ee,(!Pe&&!de._dp||Pe&&Pe.smoothChildTiming)&&(de._start+=Ee/de._ts,de._time-=Ee,de._tTime-=Ee),de.shiftChildren(-Ee,!1,-1/0),me=0),oe._end>ue&&oe._ts&&(ue=oe._end),oe=ve;_setDuration(de,de===_globalTimeline&&de._time>ue?de._time:ue,1,1),de._dirty=0}return de._tDur},ee.updateRoot=function(ae){if(_globalTimeline._ts&&(_lazySafeRender(_globalTimeline,_parentToChildTotalTime(ae,_globalTimeline)),_lastRenderedFrame=_ticker.frame),_ticker.frame>=_nextGCFrame){_nextGCFrame+=_config.autoSleep||120;var ue=_globalTimeline._first;if((!ue||!ue._ts)&&_config.autoSleep&&_ticker._listeners.length<2){for(;ue&&!ue._ts;)ue=ue._next;ue||_ticker.sleep()}}},ee}(Animation);_setDefaults$1(Timeline.prototype,{_lock:0,_hasPause:0,_forcing:0});var _addComplexStringPropTween=function(ee,ne,se,ae,ue,de,oe){var me=new PropTween(this._pt,ee,ne,0,1,_renderComplexString,null,ue),ve=0,Ee=0,Pe,ye,Te,Ae,Ce,De,Ie,ze;for(me.b=se,me.e=ae,se+="",ae+="",(Ie=~ae.indexOf("random("))&&(ae=_replaceRandom(ae)),de&&(ze=[se,ae],de(ze,ee,ne),se=ze[0],ae=ze[1]),ye=se.match(_complexStringNumExp)||[];Pe=_complexStringNumExp.exec(ae);)Ae=Pe[0],Ce=ae.substring(ve,Pe.index),Te?Te=(Te+1)%5:Ce.substr(-5)==="rgba("&&(Te=1),Ae!==ye[Ee++]&&(De=parseFloat(ye[Ee-1])||0,me._pt={_next:me._pt,p:Ce||Ee===1?Ce:",",s:De,c:Ae.charAt(1)==="="?_parseRelative(De,Ae)-De:parseFloat(Ae)-De,m:Te&&Te<4?Math.round:0},ve=_complexStringNumExp.lastIndex);return me.c=ve<ae.length?ae.substring(ve,ae.length):"",me.fp=oe,(_relExp.test(ae)||Ie)&&(me.e=0),this._pt=me,me},_addPropTween=function(ee,ne,se,ae,ue,de,oe,me,ve,Ee){_isFunction$1(ae)&&(ae=ae(ue||0,ee,de));var Pe=ee[ne],ye=se!=="get"?se:_isFunction$1(Pe)?ve?ee[ne.indexOf("set")||!_isFunction$1(ee["get"+ne.substr(3)])?ne:"get"+ne.substr(3)](ve):ee[ne]():Pe,Te=_isFunction$1(Pe)?ve?_setterFuncWithParam:_setterFunc:_setterPlain,Ae;if(_isString$1(ae)&&(~ae.indexOf("random(")&&(ae=_replaceRandom(ae)),ae.charAt(1)==="="&&(Ae=_parseRelative(ye,ae)+(getUnit(ye)||0),(Ae||Ae===0)&&(ae=Ae))),!Ee||ye!==ae||_forceAllPropTweens)return!isNaN(ye*ae)&&ae!==""?(Ae=new PropTween(this._pt,ee,ne,+ye||0,ae-(ye||0),typeof Pe=="boolean"?_renderBoolean:_renderPlain,0,Te),ve&&(Ae.fp=ve),oe&&Ae.modifier(oe,this,ee),this._pt=Ae):(!Pe&&!(ne in ee)&&_missingPlugin(ne,ae),_addComplexStringPropTween.call(this,ee,ne,ye,ae,Te,me||_config.stringFilter,ve))},_processVars=function(ee,ne,se,ae,ue){if(_isFunction$1(ee)&&(ee=_parseFuncOrString(ee,ue,ne,se,ae)),!_isObject$1(ee)||ee.style&&ee.nodeType||_isArray(ee)||_isTypedArray(ee))return _isString$1(ee)?_parseFuncOrString(ee,ue,ne,se,ae):ee;var de={},oe;for(oe in ee)de[oe]=_parseFuncOrString(ee[oe],ue,ne,se,ae);return de},_checkPlugin=function(ee,ne,se,ae,ue,de){var oe,me,ve,Ee;if(_plugins[ee]&&(oe=new _plugins[ee]).init(ue,oe.rawVars?ne[ee]:_processVars(ne[ee],ae,ue,de,se),se,ae,de)!==!1&&(se._pt=me=new PropTween(se._pt,ue,ee,0,1,oe.render,oe,0,oe.priority),se!==_quickTween))for(ve=se._ptLookup[se._targets.indexOf(ue)],Ee=oe._props.length;Ee--;)ve[oe._props[Ee]]=me;return oe},_overwritingTween,_forceAllPropTweens,_initTween=function te(ee,ne,se){var ae=ee.vars,ue=ae.ease,de=ae.startAt,oe=ae.immediateRender,me=ae.lazy,ve=ae.onUpdate,Ee=ae.runBackwards,Pe=ae.yoyoEase,ye=ae.keyframes,Te=ae.autoRevert,Ae=ee._dur,Ce=ee._startAt,De=ee._targets,Ie=ee.parent,ze=Ie&&Ie.data==="nested"?Ie.vars.targets:De,Re=ee._overwrite==="auto"&&!_suppressOverwrites$1,Oe=ee.timeline,qe,Ze,Ue,Ye,ct,at,ft,pt,Mt,At,_t,Qe,it;if(Oe&&(!ye||!ue)&&(ue="none"),ee._ease=_parseEase(ue,_defaults$2.ease),ee._yEase=Pe?_invertEase(_parseEase(Pe===!0?ue:Pe,_defaults$2.ease)):0,Pe&&ee._yoyo&&!ee._repeat&&(Pe=ee._yEase,ee._yEase=ee._ease,ee._ease=Pe),ee._from=!Oe&&!!ae.runBackwards,!Oe||ye&&!ae.stagger){if(pt=De[0]?_getCache(De[0]).harness:0,Qe=pt&&ae[pt.prop],qe=_copyExcluding(ae,_reservedProps),Ce&&(Ce._zTime<0&&Ce.progress(1),ne<0&&Ee&&oe&&!Te?Ce.render(-1,!0):Ce.revert(Ee&&Ae?_revertConfigNoKill:_startAtRevertConfig),Ce._lazy=0),de){if(_removeFromParent(ee._startAt=Tween.set(De,_setDefaults$1({data:"isStart",overwrite:!1,parent:Ie,immediateRender:!0,lazy:!Ce&&_isNotFalse(me),startAt:null,delay:0,onUpdate:ve&&function(){return _callback$1(ee,"onUpdate")},stagger:0},de))),ee._startAt._dp=0,ee._startAt._sat=ee,ne<0&&(_reverting$1||!oe&&!Te)&&ee._startAt.revert(_revertConfigNoKill),oe&&Ae&&ne<=0&&se<=0){ne&&(ee._zTime=ne);return}}else if(Ee&&Ae&&!Ce){if(ne&&(oe=!1),Ue=_setDefaults$1({overwrite:!1,data:"isFromStart",lazy:oe&&!Ce&&_isNotFalse(me),immediateRender:oe,stagger:0,parent:Ie},qe),Qe&&(Ue[pt.prop]=Qe),_removeFromParent(ee._startAt=Tween.set(De,Ue)),ee._startAt._dp=0,ee._startAt._sat=ee,ne<0&&(_reverting$1?ee._startAt.revert(_revertConfigNoKill):ee._startAt.render(-1,!0)),ee._zTime=ne,!oe)te(ee._startAt,_tinyNum,_tinyNum);else if(!ne)return}for(ee._pt=ee._ptCache=0,me=Ae&&_isNotFalse(me)||me&&!Ae,Ze=0;Ze<De.length;Ze++){if(ct=De[Ze],ft=ct._gsap||_harness(De)[Ze]._gsap,ee._ptLookup[Ze]=At={},_lazyLookup[ft.id]&&_lazyTweens.length&&_lazyRender(),_t=ze===De?Ze:ze.indexOf(ct),pt&&(Mt=new pt).init(ct,Qe||qe,ee,_t,ze)!==!1&&(ee._pt=Ye=new PropTween(ee._pt,ct,Mt.name,0,1,Mt.render,Mt,0,Mt.priority),Mt._props.forEach(function(Ge){At[Ge]=Ye}),Mt.priority&&(at=1)),!pt||Qe)for(Ue in qe)_plugins[Ue]&&(Mt=_checkPlugin(Ue,qe,ee,_t,ct,ze))?Mt.priority&&(at=1):At[Ue]=Ye=_addPropTween.call(ee,ct,Ue,"get",qe[Ue],_t,ze,0,ae.stringFilter);ee._op&&ee._op[Ze]&&ee.kill(ct,ee._op[Ze]),Re&&ee._pt&&(_overwritingTween=ee,_globalTimeline.killTweensOf(ct,At,ee.globalTime(ne)),it=!ee.parent,_overwritingTween=0),ee._pt&&me&&(_lazyLookup[ft.id]=1)}at&&_sortPropTweensByPriority(ee),ee._onInit&&ee._onInit(ee)}ee._onUpdate=ve,ee._initted=(!ee._op||ee._pt)&&!it,ye&&ne<=0&&Oe.render(_bigNum$2,!0,!0)},_updatePropTweens=function(ee,ne,se,ae,ue,de,oe,me){var ve=(ee._pt&&ee._ptCache||(ee._ptCache={}))[ne],Ee,Pe,ye,Te;if(!ve)for(ve=ee._ptCache[ne]=[],ye=ee._ptLookup,Te=ee._targets.length;Te--;){if(Ee=ye[Te][ne],Ee&&Ee.d&&Ee.d._pt)for(Ee=Ee.d._pt;Ee&&Ee.p!==ne&&Ee.fp!==ne;)Ee=Ee._next;if(!Ee)return _forceAllPropTweens=1,ee.vars[ne]="+=0",_initTween(ee,oe),_forceAllPropTweens=0,me?_warn(ne+" not eligible for reset"):1;ve.push(Ee)}for(Te=ve.length;Te--;)Pe=ve[Te],Ee=Pe._pt||Pe,Ee.s=(ae||ae===0)&&!ue?ae:Ee.s+(ae||0)+de*Ee.c,Ee.c=se-Ee.s,Pe.e&&(Pe.e=_round$3(se)+getUnit(Pe.e)),Pe.b&&(Pe.b=Ee.s+getUnit(Pe.b))},_addAliasesToVars=function(ee,ne){var se=ee[0]?_getCache(ee[0]).harness:0,ae=se&&se.aliases,ue,de,oe,me;if(!ae)return ne;ue=_merge({},ne);for(de in ae)if(de in ue)for(me=ae[de].split(","),oe=me.length;oe--;)ue[me[oe]]=ue[de];return ue},_parseKeyframe=function(ee,ne,se,ae){var ue=ne.ease||ae||"power1.inOut",de,oe;if(_isArray(ne))oe=se[ee]||(se[ee]=[]),ne.forEach(function(me,ve){return oe.push({t:ve/(ne.length-1)*100,v:me,e:ue})});else for(de in ne)oe=se[de]||(se[de]=[]),de==="ease"||oe.push({t:parseFloat(ee),v:ne[de],e:ue})},_parseFuncOrString=function(ee,ne,se,ae,ue){return _isFunction$1(ee)?ee.call(ne,se,ae,ue):_isString$1(ee)&&~ee.indexOf("random(")?_replaceRandom(ee):ee},_staggerTweenProps=_callbackNames+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",_staggerPropsToSkip={};_forEachName(_staggerTweenProps+",id,stagger,delay,duration,paused,scrollTrigger",function(te){return _staggerPropsToSkip[te]=1});var Tween=function(te){_inheritsLoose(ee,te);function ee(se,ae,ue,de){var oe;typeof ae=="number"&&(ue.duration=ae,ae=ue,ue=null),oe=te.call(this,de?ae:_inheritDefaults(ae))||this;var me=oe.vars,ve=me.duration,Ee=me.delay,Pe=me.immediateRender,ye=me.stagger,Te=me.overwrite,Ae=me.keyframes,Ce=me.defaults,De=me.scrollTrigger,Ie=me.yoyoEase,ze=ae.parent||_globalTimeline,Re=(_isArray(se)||_isTypedArray(se)?_isNumber$2(se[0]):"length"in ae)?[se]:toArray$1(se),Oe,qe,Ze,Ue,Ye,ct,at,ft;if(oe._targets=Re.length?_harness(Re):_warn("GSAP target "+se+" not found. https://gsap.com",!_config.nullTargetWarn)||[],oe._ptLookup=[],oe._overwrite=Te,Ae||ye||_isFuncOrString(ve)||_isFuncOrString(Ee)){if(ae=oe.vars,Oe=oe.timeline=new Timeline({data:"nested",defaults:Ce||{},targets:ze&&ze.data==="nested"?ze.vars.targets:Re}),Oe.kill(),Oe.parent=Oe._dp=_assertThisInitialized(oe),Oe._start=0,ye||_isFuncOrString(ve)||_isFuncOrString(Ee)){if(Ue=Re.length,at=ye&&distribute(ye),_isObject$1(ye))for(Ye in ye)~_staggerTweenProps.indexOf(Ye)&&(ft||(ft={}),ft[Ye]=ye[Ye]);for(qe=0;qe<Ue;qe++)Ze=_copyExcluding(ae,_staggerPropsToSkip),Ze.stagger=0,Ie&&(Ze.yoyoEase=Ie),ft&&_merge(Ze,ft),ct=Re[qe],Ze.duration=+_parseFuncOrString(ve,_assertThisInitialized(oe),qe,ct,Re),Ze.delay=(+_parseFuncOrString(Ee,_assertThisInitialized(oe),qe,ct,Re)||0)-oe._delay,!ye&&Ue===1&&Ze.delay&&(oe._delay=Ee=Ze.delay,oe._start+=Ee,Ze.delay=0),Oe.to(ct,Ze,at?at(qe,ct,Re):0),Oe._ease=_easeMap.none;Oe.duration()?ve=Ee=0:oe.timeline=0}else if(Ae){_inheritDefaults(_setDefaults$1(Oe.vars.defaults,{ease:"none"})),Oe._ease=_parseEase(Ae.ease||ae.ease||"none");var pt=0,Mt,At,_t;if(_isArray(Ae))Ae.forEach(function(Qe){return Oe.to(Re,Qe,">")}),Oe.duration();else{Ze={};for(Ye in Ae)Ye==="ease"||Ye==="easeEach"||_parseKeyframe(Ye,Ae[Ye],Ze,Ae.easeEach);for(Ye in Ze)for(Mt=Ze[Ye].sort(function(Qe,it){return Qe.t-it.t}),pt=0,qe=0;qe<Mt.length;qe++)At=Mt[qe],_t={ease:At.e,duration:(At.t-(qe?Mt[qe-1].t:0))/100*ve},_t[Ye]=At.v,Oe.to(Re,_t,pt),pt+=_t.duration;Oe.duration()<ve&&Oe.to({},{duration:ve-Oe.duration()})}}ve||oe.duration(ve=Oe.duration())}else oe.timeline=0;return Te===!0&&!_suppressOverwrites$1&&(_overwritingTween=_assertThisInitialized(oe),_globalTimeline.killTweensOf(Re),_overwritingTween=0),_addToTimeline(ze,_assertThisInitialized(oe),ue),ae.reversed&&oe.reverse(),ae.paused&&oe.paused(!0),(Pe||!ve&&!Ae&&oe._start===_roundPrecise(ze._time)&&_isNotFalse(Pe)&&_hasNoPausedAncestors(_assertThisInitialized(oe))&&ze.data!=="nested")&&(oe._tTime=-_tinyNum,oe.render(Math.max(0,-Ee)||0)),De&&_scrollTrigger(_assertThisInitialized(oe),De),oe}var ne=ee.prototype;return ne.render=function(ae,ue,de){var oe=this._time,me=this._tDur,ve=this._dur,Ee=ae<0,Pe=ae>me-_tinyNum&&!Ee?me:ae<_tinyNum?0:ae,ye,Te,Ae,Ce,De,Ie,ze,Re,Oe;if(!ve)_renderZeroDurationTween(this,ae,ue,de);else if(Pe!==this._tTime||!ae||de||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==Ee||this._lazy){if(ye=Pe,Re=this.timeline,this._repeat){if(Ce=ve+this._rDelay,this._repeat<-1&&Ee)return this.totalTime(Ce*100+ae,ue,de);if(ye=_roundPrecise(Pe%Ce),Pe===me?(Ae=this._repeat,ye=ve):(De=_roundPrecise(Pe/Ce),Ae=~~De,Ae&&Ae===De?(ye=ve,Ae--):ye>ve&&(ye=ve)),Ie=this._yoyo&&Ae&1,Ie&&(Oe=this._yEase,ye=ve-ye),De=_animationCycle(this._tTime,Ce),ye===oe&&!de&&this._initted&&Ae===De)return this._tTime=Pe,this;Ae!==De&&(Re&&this._yEase&&_propagateYoyoEase(Re,Ie),this.vars.repeatRefresh&&!Ie&&!this._lock&&ye!==Ce&&this._initted&&(this._lock=de=1,this.render(_roundPrecise(Ce*Ae),!0).invalidate()._lock=0))}if(!this._initted){if(_attemptInitTween(this,Ee?ae:ye,de,ue,Pe))return this._tTime=0,this;if(oe!==this._time&&!(de&&this.vars.repeatRefresh&&Ae!==De))return this;if(ve!==this._dur)return this.render(ae,ue,de)}if(this._tTime=Pe,this._time=ye,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=ze=(Oe||this._ease)(ye/ve),this._from&&(this.ratio=ze=1-ze),!oe&&Pe&&!ue&&!De&&(_callback$1(this,"onStart"),this._tTime!==Pe))return this;for(Te=this._pt;Te;)Te.r(ze,Te.d),Te=Te._next;Re&&Re.render(ae<0?ae:Re._dur*Re._ease(ye/this._dur),ue,de)||this._startAt&&(this._zTime=ae),this._onUpdate&&!ue&&(Ee&&_rewindStartAt(this,ae,ue,de),_callback$1(this,"onUpdate")),this._repeat&&Ae!==De&&this.vars.onRepeat&&!ue&&this.parent&&_callback$1(this,"onRepeat"),(Pe===this._tDur||!Pe)&&this._tTime===Pe&&(Ee&&!this._onUpdate&&_rewindStartAt(this,ae,!0,!0),(ae||!ve)&&(Pe===this._tDur&&this._ts>0||!Pe&&this._ts<0)&&_removeFromParent(this,1),!ue&&!(Ee&&!oe)&&(Pe||oe||Ie)&&(_callback$1(this,Pe===me?"onComplete":"onReverseComplete",!0),this._prom&&!(Pe<me&&this.timeScale()>0)&&this._prom()))}return this},ne.targets=function(){return this._targets},ne.invalidate=function(ae){return(!ae||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(ae),te.prototype.invalidate.call(this,ae)},ne.resetTo=function(ae,ue,de,oe,me){_tickerActive||_ticker.wake(),this._ts||this.play();var ve=Math.min(this._dur,(this._dp._time-this._start)*this._ts),Ee;return this._initted||_initTween(this,ve),Ee=this._ease(ve/this._dur),_updatePropTweens(this,ae,ue,de,oe,Ee,ve,me)?this.resetTo(ae,ue,de,oe,1):(_alignPlayhead(this,0),this.parent||_addLinkedListItem(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},ne.kill=function(ae,ue){if(ue===void 0&&(ue="all"),!ae&&(!ue||ue==="all"))return this._lazy=this._pt=0,this.parent?_interrupt(this):this.scrollTrigger&&this.scrollTrigger.kill(!!_reverting$1),this;if(this.timeline){var de=this.timeline.totalDuration();return this.timeline.killTweensOf(ae,ue,_overwritingTween&&_overwritingTween.vars.overwrite!==!0)._first||_interrupt(this),this.parent&&de!==this.timeline.totalDuration()&&_setDuration(this,this._dur*this.timeline._tDur/de,0,1),this}var oe=this._targets,me=ae?toArray$1(ae):oe,ve=this._ptLookup,Ee=this._pt,Pe,ye,Te,Ae,Ce,De,Ie;if((!ue||ue==="all")&&_arraysMatch(oe,me))return ue==="all"&&(this._pt=0),_interrupt(this);for(Pe=this._op=this._op||[],ue!=="all"&&(_isString$1(ue)&&(Ce={},_forEachName(ue,function(ze){return Ce[ze]=1}),ue=Ce),ue=_addAliasesToVars(oe,ue)),Ie=oe.length;Ie--;)if(~me.indexOf(oe[Ie])){ye=ve[Ie],ue==="all"?(Pe[Ie]=ue,Ae=ye,Te={}):(Te=Pe[Ie]=Pe[Ie]||{},Ae=ue);for(Ce in Ae)De=ye&&ye[Ce],De&&((!("kill"in De.d)||De.d.kill(Ce)===!0)&&_removeLinkedListItem(this,De,"_pt"),delete ye[Ce]),Te!=="all"&&(Te[Ce]=1)}return this._initted&&!this._pt&&Ee&&_interrupt(this),this},ee.to=function(ae,ue){return new ee(ae,ue,arguments[2])},ee.from=function(ae,ue){return _createTweenType(1,arguments)},ee.delayedCall=function(ae,ue,de,oe){return new ee(ue,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:ae,onComplete:ue,onReverseComplete:ue,onCompleteParams:de,onReverseCompleteParams:de,callbackScope:oe})},ee.fromTo=function(ae,ue,de){return _createTweenType(2,arguments)},ee.set=function(ae,ue){return ue.duration=0,ue.repeatDelay||(ue.repeat=0),new ee(ae,ue)},ee.killTweensOf=function(ae,ue,de){return _globalTimeline.killTweensOf(ae,ue,de)},ee}(Animation);_setDefaults$1(Tween.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),_forEachName("staggerTo,staggerFrom,staggerFromTo",function(te){Tween[te]=function(){var ee=new Timeline,ne=_slice.call(arguments,0);return ne.splice(te==="staggerFromTo"?5:4,0,0),ee[te].apply(ee,ne)}});var _setterPlain=function(ee,ne,se){return ee[ne]=se},_setterFunc=function(ee,ne,se){return ee[ne](se)},_setterFuncWithParam=function(ee,ne,se,ae){return ee[ne](ae.fp,se)},_setterAttribute=function(ee,ne,se){return ee.setAttribute(ne,se)},_getSetter=function(ee,ne){return _isFunction$1(ee[ne])?_setterFunc:_isUndefined(ee[ne])&&ee.setAttribute?_setterAttribute:_setterPlain},_renderPlain=function(ee,ne){return ne.set(ne.t,ne.p,Math.round((ne.s+ne.c*ee)*1e6)/1e6,ne)},_renderBoolean=function(ee,ne){return ne.set(ne.t,ne.p,!!(ne.s+ne.c*ee),ne)},_renderComplexString=function(ee,ne){var se=ne._pt,ae="";if(!ee&&ne.b)ae=ne.b;else if(ee===1&&ne.e)ae=ne.e;else{for(;se;)ae=se.p+(se.m?se.m(se.s+se.c*ee):Math.round((se.s+se.c*ee)*1e4)/1e4)+ae,se=se._next;ae+=ne.c}ne.set(ne.t,ne.p,ae,ne)},_renderPropTweens=function(ee,ne){for(var se=ne._pt;se;)se.r(ee,se.d),se=se._next},_addPluginModifier=function(ee,ne,se,ae){for(var ue=this._pt,de;ue;)de=ue._next,ue.p===ae&&ue.modifier(ee,ne,se),ue=de},_killPropTweensOf=function(ee){for(var ne=this._pt,se,ae;ne;)ae=ne._next,ne.p===ee&&!ne.op||ne.op===ee?_removeLinkedListItem(this,ne,"_pt"):ne.dep||(se=1),ne=ae;return!se},_setterWithModifier=function(ee,ne,se,ae){ae.mSet(ee,ne,ae.m.call(ae.tween,se,ae.mt),ae)},_sortPropTweensByPriority=function(ee){for(var ne=ee._pt,se,ae,ue,de;ne;){for(se=ne._next,ae=ue;ae&&ae.pr>ne.pr;)ae=ae._next;(ne._prev=ae?ae._prev:de)?ne._prev._next=ne:ue=ne,(ne._next=ae)?ae._prev=ne:de=ne,ne=se}ee._pt=ue},PropTween=function(){function te(ne,se,ae,ue,de,oe,me,ve,Ee){this.t=se,this.s=ue,this.c=de,this.p=ae,this.r=oe||_renderPlain,this.d=me||this,this.set=ve||_setterPlain,this.pr=Ee||0,this._next=ne,ne&&(ne._prev=this)}var ee=te.prototype;return ee.modifier=function(se,ae,ue){this.mSet=this.mSet||this.set,this.set=_setterWithModifier,this.m=se,this.mt=ue,this.tween=ae},te}();_forEachName(_callbackNames+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(te){return _reservedProps[te]=1}),_globals.TweenMax=_globals.TweenLite=Tween,_globals.TimelineLite=_globals.TimelineMax=Timeline,_globalTimeline=new Timeline({sortChildren:!1,defaults:_defaults$2,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),_config.stringFilter=_colorStringFilter;var _media=[],_listeners$1={},_emptyArray$1=[],_lastMediaTime=0,_contextID=0,_dispatch$1=function(ee){return(_listeners$1[ee]||_emptyArray$1).map(function(ne){return ne()})},_onMediaChange=function(){var ee=Date.now(),ne=[];ee-_lastMediaTime>2&&(_dispatch$1("matchMediaInit"),_media.forEach(function(se){var ae=se.queries,ue=se.conditions,de,oe,me,ve;for(oe in ae)de=_win$3.matchMedia(ae[oe]).matches,de&&(me=1),de!==ue[oe]&&(ue[oe]=de,ve=1);ve&&(se.revert(),me&&ne.push(se))}),_dispatch$1("matchMediaRevert"),ne.forEach(function(se){return se.onMatch(se,function(ae){return se.add(null,ae)})}),_lastMediaTime=ee,_dispatch$1("matchMedia"))},Context=function(){function te(ne,se){this.selector=se&&selector(se),this.data=[],this._r=[],this.isReverted=!1,this.id=_contextID++,ne&&this.add(ne)}var ee=te.prototype;return ee.add=function(se,ae,ue){_isFunction$1(se)&&(ue=ae,ae=se,se=_isFunction$1);var de=this,oe=function(){var ve=_context$2,Ee=de.selector,Pe;return ve&&ve!==de&&ve.data.push(de),ue&&(de.selector=selector(ue)),_context$2=de,Pe=ae.apply(de,arguments),_isFunction$1(Pe)&&de._r.push(Pe),_context$2=ve,de.selector=Ee,de.isReverted=!1,Pe};return de.last=oe,se===_isFunction$1?oe(de,function(me){return de.add(null,me)}):se?de[se]=oe:oe},ee.ignore=function(se){var ae=_context$2;_context$2=null,se(this),_context$2=ae},ee.getTweens=function(){var se=[];return this.data.forEach(function(ae){return ae instanceof te?se.push.apply(se,ae.getTweens()):ae instanceof Tween&&!(ae.parent&&ae.parent.data==="nested")&&se.push(ae)}),se},ee.clear=function(){this._r.length=this.data.length=0},ee.kill=function(se,ae){var ue=this;if(se?function(){for(var oe=ue.getTweens(),me=ue.data.length,ve;me--;)ve=ue.data[me],ve.data==="isFlip"&&(ve.revert(),ve.getChildren(!0,!0,!1).forEach(function(Ee){return oe.splice(oe.indexOf(Ee),1)}));for(oe.map(function(Ee){return{g:Ee._dur||Ee._delay||Ee._sat&&!Ee._sat.vars.immediateRender?Ee.globalTime(0):-1/0,t:Ee}}).sort(function(Ee,Pe){return Pe.g-Ee.g||-1/0}).forEach(function(Ee){return Ee.t.revert(se)}),me=ue.data.length;me--;)ve=ue.data[me],ve instanceof Timeline?ve.data!=="nested"&&(ve.scrollTrigger&&ve.scrollTrigger.revert(),ve.kill()):!(ve instanceof Tween)&&ve.revert&&ve.revert(se);ue._r.forEach(function(Ee){return Ee(se,ue)}),ue.isReverted=!0}():this.data.forEach(function(oe){return oe.kill&&oe.kill()}),this.clear(),ae)for(var de=_media.length;de--;)_media[de].id===this.id&&_media.splice(de,1)},ee.revert=function(se){this.kill(se||{})},te}(),MatchMedia=function(){function te(ne){this.contexts=[],this.scope=ne,_context$2&&_context$2.data.push(this)}var ee=te.prototype;return ee.add=function(se,ae,ue){_isObject$1(se)||(se={matches:se});var de=new Context(0,ue||this.scope),oe=de.conditions={},me,ve,Ee;_context$2&&!de.selector&&(de.selector=_context$2.selector),this.contexts.push(de),ae=de.add("onMatch",ae),de.queries=se;for(ve in se)ve==="all"?Ee=1:(me=_win$3.matchMedia(se[ve]),me&&(_media.indexOf(de)<0&&_media.push(de),(oe[ve]=me.matches)&&(Ee=1),me.addListener?me.addListener(_onMediaChange):me.addEventListener("change",_onMediaChange)));return Ee&&ae(de,function(Pe){return de.add(null,Pe)}),this},ee.revert=function(se){this.kill(se||{})},ee.kill=function(se){this.contexts.forEach(function(ae){return ae.kill(se,!0)})},te}(),_gsap={registerPlugin:function(){for(var ee=arguments.length,ne=new Array(ee),se=0;se<ee;se++)ne[se]=arguments[se];ne.forEach(function(ae){return _createPlugin(ae)})},timeline:function(ee){return new Timeline(ee)},getTweensOf:function(ee,ne){return _globalTimeline.getTweensOf(ee,ne)},getProperty:function(ee,ne,se,ae){_isString$1(ee)&&(ee=toArray$1(ee)[0]);var ue=_getCache(ee||{}).get,de=se?_passThrough$1:_numericIfPossible;return se==="native"&&(se=""),ee&&(ne?de((_plugins[ne]&&_plugins[ne].get||ue)(ee,ne,se,ae)):function(oe,me,ve){return de((_plugins[oe]&&_plugins[oe].get||ue)(ee,oe,me,ve))})},quickSetter:function(ee,ne,se){if(ee=toArray$1(ee),ee.length>1){var ae=ee.map(function(Ee){return gsap$3.quickSetter(Ee,ne,se)}),ue=ae.length;return function(Ee){for(var Pe=ue;Pe--;)ae[Pe](Ee)}}ee=ee[0]||{};var de=_plugins[ne],oe=_getCache(ee),me=oe.harness&&(oe.harness.aliases||{})[ne]||ne,ve=de?function(Ee){var Pe=new de;_quickTween._pt=0,Pe.init(ee,se?Ee+se:Ee,_quickTween,0,[ee]),Pe.render(1,Pe),_quickTween._pt&&_renderPropTweens(1,_quickTween)}:oe.set(ee,me);return de?ve:function(Ee){return ve(ee,me,se?Ee+se:Ee,oe,1)}},quickTo:function(ee,ne,se){var ae,ue=gsap$3.to(ee,_setDefaults$1((ae={},ae[ne]="+=0.1",ae.paused=!0,ae.stagger=0,ae),se||{})),de=function(me,ve,Ee){return ue.resetTo(ne,me,ve,Ee)};return de.tween=ue,de},isTweening:function(ee){return _globalTimeline.getTweensOf(ee,!0).length>0},defaults:function(ee){return ee&&ee.ease&&(ee.ease=_parseEase(ee.ease,_defaults$2.ease)),_mergeDeep(_defaults$2,ee||{})},config:function(ee){return _mergeDeep(_config,ee||{})},registerEffect:function(ee){var ne=ee.name,se=ee.effect,ae=ee.plugins,ue=ee.defaults,de=ee.extendTimeline;(ae||"").split(",").forEach(function(oe){return oe&&!_plugins[oe]&&!_globals[oe]&&_warn(ne+" effect requires "+oe+" plugin.")}),_effects[ne]=function(oe,me,ve){return se(toArray$1(oe),_setDefaults$1(me||{},ue),ve)},de&&(Timeline.prototype[ne]=function(oe,me,ve){return this.add(_effects[ne](oe,_isObject$1(me)?me:(ve=me)&&{},this),ve)})},registerEase:function(ee,ne){_easeMap[ee]=_parseEase(ne)},parseEase:function(ee,ne){return arguments.length?_parseEase(ee,ne):_easeMap},getById:function(ee){return _globalTimeline.getById(ee)},exportRoot:function(ee,ne){ee===void 0&&(ee={});var se=new Timeline(ee),ae,ue;for(se.smoothChildTiming=_isNotFalse(ee.smoothChildTiming),_globalTimeline.remove(se),se._dp=0,se._time=se._tTime=_globalTimeline._time,ae=_globalTimeline._first;ae;)ue=ae._next,(ne||!(!ae._dur&&ae instanceof Tween&&ae.vars.onComplete===ae._targets[0]))&&_addToTimeline(se,ae,ae._start-ae._delay),ae=ue;return _addToTimeline(_globalTimeline,se,0),se},context:function(ee,ne){return ee?new Context(ee,ne):_context$2},matchMedia:function(ee){return new MatchMedia(ee)},matchMediaRefresh:function(){return _media.forEach(function(ee){var ne=ee.conditions,se,ae;for(ae in ne)ne[ae]&&(ne[ae]=!1,se=1);se&&ee.revert()})||_onMediaChange()},addEventListener:function(ee,ne){var se=_listeners$1[ee]||(_listeners$1[ee]=[]);~se.indexOf(ne)||se.push(ne)},removeEventListener:function(ee,ne){var se=_listeners$1[ee],ae=se&&se.indexOf(ne);ae>=0&&se.splice(ae,1)},utils:{wrap,wrapYoyo,distribute,random,snap,normalize,getUnit,clamp:clamp$1,splitColor,toArray:toArray$1,selector,mapRange,pipe,unitize,interpolate,shuffle},install:_install,effects:_effects,ticker:_ticker,updateRoot:Timeline.updateRoot,plugins:_plugins,globalTimeline:_globalTimeline,core:{PropTween,globals:_addGlobal,Tween,Timeline,Animation,getCache:_getCache,_removeLinkedListItem,reverting:function(){return _reverting$1},context:function(ee){return ee&&_context$2&&(_context$2.data.push(ee),ee._ctx=_context$2),_context$2},suppressOverwrites:function(ee){return _suppressOverwrites$1=ee}}};_forEachName("to,from,fromTo,delayedCall,set,killTweensOf",function(te){return _gsap[te]=Tween[te]}),_ticker.add(Timeline.updateRoot),_quickTween=_gsap.to({},{duration:0});var _getPluginPropTween=function(ee,ne){for(var se=ee._pt;se&&se.p!==ne&&se.op!==ne&&se.fp!==ne;)se=se._next;return se},_addModifiers=function(ee,ne){var se=ee._targets,ae,ue,de;for(ae in ne)for(ue=se.length;ue--;)de=ee._ptLookup[ue][ae],de&&(de=de.d)&&(de._pt&&(de=_getPluginPropTween(de,ae)),de&&de.modifier&&de.modifier(ne[ae],ee,se[ue],ae))},_buildModifierPlugin=function(ee,ne){return{name:ee,headless:1,rawVars:1,init:function(ae,ue,de){de._onInit=function(oe){var me,ve;if(_isString$1(ue)&&(me={},_forEachName(ue,function(Ee){return me[Ee]=1}),ue=me),ne){me={};for(ve in ue)me[ve]=ne(ue[ve]);ue=me}_addModifiers(oe,ue)}}}},gsap$3=_gsap.registerPlugin({name:"attr",init:function(ee,ne,se,ae,ue){var de,oe,me;this.tween=se;for(de in ne)me=ee.getAttribute(de)||"",oe=this.add(ee,"setAttribute",(me||0)+"",ne[de],ae,ue,0,0,de),oe.op=de,oe.b=me,this._props.push(de)},render:function(ee,ne){for(var se=ne._pt;se;)_reverting$1?se.set(se.t,se.p,se.b,se):se.r(ee,se.d),se=se._next}},{name:"endArray",headless:1,init:function(ee,ne){for(var se=ne.length;se--;)this.add(ee,se,ee[se]||0,ne[se],0,0,0,0,0,1)}},_buildModifierPlugin("roundProps",_roundModifier),_buildModifierPlugin("modifiers"),_buildModifierPlugin("snap",snap))||_gsap;Tween.version=Timeline.version=gsap$3.version="3.13.0",_coreReady=1,_windowExists$2()&&_wake(),_easeMap.Power0,_easeMap.Power1,_easeMap.Power2,_easeMap.Power3,_easeMap.Power4,_easeMap.Linear,_easeMap.Quad,_easeMap.Cubic,_easeMap.Quart,_easeMap.Quint,_easeMap.Strong,_easeMap.Elastic,_easeMap.Back,_easeMap.SteppedEase,_easeMap.Bounce,_easeMap.Sine,_easeMap.Expo,_easeMap.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var _win$2,_doc$2,_docElement,_pluginInitted,_tempDiv,_recentSetterPlugin,_reverting,_windowExists$1=function(){return typeof window!="undefined"},_transformProps={},_RAD2DEG=180/Math.PI,_DEG2RAD$1=Math.PI/180,_atan2=Math.atan2,_bigNum$1=1e8,_capsExp$1=/([A-Z])/g,_horizontalExp=/(left|right|width|margin|padding|x)/i,_complexExp=/[\s,\(]\S/,_propertyAliases={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},_renderCSSProp=function(ee,ne){return ne.set(ne.t,ne.p,Math.round((ne.s+ne.c*ee)*1e4)/1e4+ne.u,ne)},_renderPropWithEnd=function(ee,ne){return ne.set(ne.t,ne.p,ee===1?ne.e:Math.round((ne.s+ne.c*ee)*1e4)/1e4+ne.u,ne)},_renderCSSPropWithBeginning=function(ee,ne){return ne.set(ne.t,ne.p,ee?Math.round((ne.s+ne.c*ee)*1e4)/1e4+ne.u:ne.b,ne)},_renderRoundedCSSProp=function(ee,ne){var se=ne.s+ne.c*ee;ne.set(ne.t,ne.p,~~(se+(se<0?-.5:.5))+ne.u,ne)},_renderNonTweeningValue=function(ee,ne){return ne.set(ne.t,ne.p,ee?ne.e:ne.b,ne)},_renderNonTweeningValueOnlyAtEnd=function(ee,ne){return ne.set(ne.t,ne.p,ee!==1?ne.b:ne.e,ne)},_setterCSSStyle=function(ee,ne,se){return ee.style[ne]=se},_setterCSSProp=function(ee,ne,se){return ee.style.setProperty(ne,se)},_setterTransform=function(ee,ne,se){return ee._gsap[ne]=se},_setterScale=function(ee,ne,se){return ee._gsap.scaleX=ee._gsap.scaleY=se},_setterScaleWithRender=function(ee,ne,se,ae,ue){var de=ee._gsap;de.scaleX=de.scaleY=se,de.renderTransform(ue,de)},_setterTransformWithRender=function(ee,ne,se,ae,ue){var de=ee._gsap;de[ne]=se,de.renderTransform(ue,de)},_transformProp$1="transform",_transformOriginProp=_transformProp$1+"Origin",_saveStyle=function te(ee,ne){var se=this,ae=this.target,ue=ae.style,de=ae._gsap;if(ee in _transformProps&&ue){if(this.tfm=this.tfm||{},ee!=="transform")ee=_propertyAliases[ee]||ee,~ee.indexOf(",")?ee.split(",").forEach(function(oe){return se.tfm[oe]=_get(ae,oe)}):this.tfm[ee]=de.x?de[ee]:_get(ae,ee),ee===_transformOriginProp&&(this.tfm.zOrigin=de.zOrigin);else return _propertyAliases.transform.split(",").forEach(function(oe){return te.call(se,oe,ne)});if(this.props.indexOf(_transformProp$1)>=0)return;de.svg&&(this.svgo=ae.getAttribute("data-svg-origin"),this.props.push(_transformOriginProp,ne,"")),ee=_transformProp$1}(ue||ne)&&this.props.push(ee,ne,ue[ee])},_removeIndependentTransforms=function(ee){ee.translate&&(ee.removeProperty("translate"),ee.removeProperty("scale"),ee.removeProperty("rotate"))},_revertStyle=function(){var ee=this.props,ne=this.target,se=ne.style,ae=ne._gsap,ue,de;for(ue=0;ue<ee.length;ue+=3)ee[ue+1]?ee[ue+1]===2?ne[ee[ue]](ee[ue+2]):ne[ee[ue]]=ee[ue+2]:ee[ue+2]?se[ee[ue]]=ee[ue+2]:se.removeProperty(ee[ue].substr(0,2)==="--"?ee[ue]:ee[ue].replace(_capsExp$1,"-$1").toLowerCase());if(this.tfm){for(de in this.tfm)ae[de]=this.tfm[de];ae.svg&&(ae.renderTransform(),ne.setAttribute("data-svg-origin",this.svgo||"")),ue=_reverting(),(!ue||!ue.isStart)&&!se[_transformProp$1]&&(_removeIndependentTransforms(se),ae.zOrigin&&se[_transformOriginProp]&&(se[_transformOriginProp]+=" "+ae.zOrigin+"px",ae.zOrigin=0,ae.renderTransform()),ae.uncache=1)}},_getStyleSaver=function(ee,ne){var se={target:ee,props:[],revert:_revertStyle,save:_saveStyle};return ee._gsap||gsap$3.core.getCache(ee),ne&&ee.style&&ee.nodeType&&ne.split(",").forEach(function(ae){return se.save(ae)}),se},_supports3D,_createElement=function(ee,ne){var se=_doc$2.createElementNS?_doc$2.createElementNS((ne||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),ee):_doc$2.createElement(ee);return se&&se.style?se:_doc$2.createElement(ee)},_getComputedProperty=function te(ee,ne,se){var ae=getComputedStyle(ee);return ae[ne]||ae.getPropertyValue(ne.replace(_capsExp$1,"-$1").toLowerCase())||ae.getPropertyValue(ne)||!se&&te(ee,_checkPropPrefix(ne)||ne,1)||""},_prefixes="O,Moz,ms,Ms,Webkit".split(","),_checkPropPrefix=function(ee,ne,se){var ae=ne||_tempDiv,ue=ae.style,de=5;if(ee in ue&&!se)return ee;for(ee=ee.charAt(0).toUpperCase()+ee.substr(1);de--&&!(_prefixes[de]+ee in ue););return de<0?null:(de===3?"ms":de>=0?_prefixes[de]:"")+ee},_initCore$2=function(){_windowExists$1()&&window.document&&(_win$2=window,_doc$2=_win$2.document,_docElement=_doc$2.documentElement,_tempDiv=_createElement("div")||{style:{}},_createElement("div"),_transformProp$1=_checkPropPrefix(_transformProp$1),_transformOriginProp=_transformProp$1+"Origin",_tempDiv.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",_supports3D=!!_checkPropPrefix("perspective"),_reverting=gsap$3.core.reverting,_pluginInitted=1)},_getReparentedCloneBBox=function(ee){var ne=ee.ownerSVGElement,se=_createElement("svg",ne&&ne.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),ae=ee.cloneNode(!0),ue;ae.style.display="block",se.appendChild(ae),_docElement.appendChild(se);try{ue=ae.getBBox()}catch{}return se.removeChild(ae),_docElement.removeChild(se),ue},_getAttributeFallbacks=function(ee,ne){for(var se=ne.length;se--;)if(ee.hasAttribute(ne[se]))return ee.getAttribute(ne[se])},_getBBox=function(ee){var ne,se;try{ne=ee.getBBox()}catch{ne=_getReparentedCloneBBox(ee),se=1}return ne&&(ne.width||ne.height)||se||(ne=_getReparentedCloneBBox(ee)),ne&&!ne.width&&!ne.x&&!ne.y?{x:+_getAttributeFallbacks(ee,["x","cx","x1"])||0,y:+_getAttributeFallbacks(ee,["y","cy","y1"])||0,width:0,height:0}:ne},_isSVG=function(ee){return!!(ee.getCTM&&(!ee.parentNode||ee.ownerSVGElement)&&_getBBox(ee))},_removeProperty=function(ee,ne){if(ne){var se=ee.style,ae;ne in _transformProps&&ne!==_transformOriginProp&&(ne=_transformProp$1),se.removeProperty?(ae=ne.substr(0,2),(ae==="ms"||ne.substr(0,6)==="webkit")&&(ne="-"+ne),se.removeProperty(ae==="--"?ne:ne.replace(_capsExp$1,"-$1").toLowerCase())):se.removeAttribute(ne)}},_addNonTweeningPT=function(ee,ne,se,ae,ue,de){var oe=new PropTween(ee._pt,ne,se,0,1,de?_renderNonTweeningValueOnlyAtEnd:_renderNonTweeningValue);return ee._pt=oe,oe.b=ae,oe.e=ue,ee._props.push(se),oe},_nonConvertibleUnits={deg:1,rad:1,turn:1},_nonStandardLayouts={grid:1,flex:1},_convertToUnit=function te(ee,ne,se,ae){var ue=parseFloat(se)||0,de=(se+"").trim().substr((ue+"").length)||"px",oe=_tempDiv.style,me=_horizontalExp.test(ne),ve=ee.tagName.toLowerCase()==="svg",Ee=(ve?"client":"offset")+(me?"Width":"Height"),Pe=100,ye=ae==="px",Te=ae==="%",Ae,Ce,De,Ie;if(ae===de||!ue||_nonConvertibleUnits[ae]||_nonConvertibleUnits[de])return ue;if(de!=="px"&&!ye&&(ue=te(ee,ne,se,"px")),Ie=ee.getCTM&&_isSVG(ee),(Te||de==="%")&&(_transformProps[ne]||~ne.indexOf("adius")))return Ae=Ie?ee.getBBox()[me?"width":"height"]:ee[Ee],_round$3(Te?ue/Ae*Pe:ue/100*Ae);if(oe[me?"width":"height"]=Pe+(ye?de:ae),Ce=ae!=="rem"&&~ne.indexOf("adius")||ae==="em"&&ee.appendChild&&!ve?ee:ee.parentNode,Ie&&(Ce=(ee.ownerSVGElement||{}).parentNode),(!Ce||Ce===_doc$2||!Ce.appendChild)&&(Ce=_doc$2.body),De=Ce._gsap,De&&Te&&De.width&&me&&De.time===_ticker.time&&!De.uncache)return _round$3(ue/De.width*Pe);if(Te&&(ne==="height"||ne==="width")){var ze=ee.style[ne];ee.style[ne]=Pe+ae,Ae=ee[Ee],ze?ee.style[ne]=ze:_removeProperty(ee,ne)}else(Te||de==="%")&&!_nonStandardLayouts[_getComputedProperty(Ce,"display")]&&(oe.position=_getComputedProperty(ee,"position")),Ce===ee&&(oe.position="static"),Ce.appendChild(_tempDiv),Ae=_tempDiv[Ee],Ce.removeChild(_tempDiv),oe.position="absolute";return me&&Te&&(De=_getCache(Ce),De.time=_ticker.time,De.width=Ce[Ee]),_round$3(ye?Ae*ue/Pe:Ae&&ue?Pe/Ae*ue:0)},_get=function(ee,ne,se,ae){var ue;return _pluginInitted||_initCore$2(),ne in _propertyAliases&&ne!=="transform"&&(ne=_propertyAliases[ne],~ne.indexOf(",")&&(ne=ne.split(",")[0])),_transformProps[ne]&&ne!=="transform"?(ue=_parseTransform(ee,ae),ue=ne!=="transformOrigin"?ue[ne]:ue.svg?ue.origin:_firstTwoOnly(_getComputedProperty(ee,_transformOriginProp))+" "+ue.zOrigin+"px"):(ue=ee.style[ne],(!ue||ue==="auto"||ae||~(ue+"").indexOf("calc("))&&(ue=_specialProps[ne]&&_specialProps[ne](ee,ne,se)||_getComputedProperty(ee,ne)||_getProperty(ee,ne)||(ne==="opacity"?1:0))),se&&!~(ue+"").trim().indexOf(" ")?_convertToUnit(ee,ne,ue,se)+se:ue},_tweenComplexCSSString=function(ee,ne,se,ae){if(!se||se==="none"){var ue=_checkPropPrefix(ne,ee,1),de=ue&&_getComputedProperty(ee,ue,1);de&&de!==se?(ne=ue,se=de):ne==="borderColor"&&(se=_getComputedProperty(ee,"borderTopColor"))}var oe=new PropTween(this._pt,ee.style,ne,0,1,_renderComplexString),me=0,ve=0,Ee,Pe,ye,Te,Ae,Ce,De,Ie,ze,Re,Oe,qe;if(oe.b=se,oe.e=ae,se+="",ae+="",ae.substring(0,6)==="var(--"&&(ae=_getComputedProperty(ee,ae.substring(4,ae.indexOf(")")))),ae==="auto"&&(Ce=ee.style[ne],ee.style[ne]=ae,ae=_getComputedProperty(ee,ne)||ae,Ce?ee.style[ne]=Ce:_removeProperty(ee,ne)),Ee=[se,ae],_colorStringFilter(Ee),se=Ee[0],ae=Ee[1],ye=se.match(_numWithUnitExp)||[],qe=ae.match(_numWithUnitExp)||[],qe.length){for(;Pe=_numWithUnitExp.exec(ae);)De=Pe[0],ze=ae.substring(me,Pe.index),Ae?Ae=(Ae+1)%5:(ze.substr(-5)==="rgba("||ze.substr(-5)==="hsla(")&&(Ae=1),De!==(Ce=ye[ve++]||"")&&(Te=parseFloat(Ce)||0,Oe=Ce.substr((Te+"").length),De.charAt(1)==="="&&(De=_parseRelative(Te,De)+Oe),Ie=parseFloat(De),Re=De.substr((Ie+"").length),me=_numWithUnitExp.lastIndex-Re.length,Re||(Re=Re||_config.units[ne]||Oe,me===ae.length&&(ae+=Re,oe.e+=Re)),Oe!==Re&&(Te=_convertToUnit(ee,ne,Ce,Re)||0),oe._pt={_next:oe._pt,p:ze||ve===1?ze:",",s:Te,c:Ie-Te,m:Ae&&Ae<4||ne==="zIndex"?Math.round:0});oe.c=me<ae.length?ae.substring(me,ae.length):""}else oe.r=ne==="display"&&ae==="none"?_renderNonTweeningValueOnlyAtEnd:_renderNonTweeningValue;return _relExp.test(ae)&&(oe.e=0),this._pt=oe,oe},_keywordToPercent={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},_convertKeywordsToPercentages=function(ee){var ne=ee.split(" "),se=ne[0],ae=ne[1]||"50%";return(se==="top"||se==="bottom"||ae==="left"||ae==="right")&&(ee=se,se=ae,ae=ee),ne[0]=_keywordToPercent[se]||se,ne[1]=_keywordToPercent[ae]||ae,ne.join(" ")},_renderClearProps=function(ee,ne){if(ne.tween&&ne.tween._time===ne.tween._dur){var se=ne.t,ae=se.style,ue=ne.u,de=se._gsap,oe,me,ve;if(ue==="all"||ue===!0)ae.cssText="",me=1;else for(ue=ue.split(","),ve=ue.length;--ve>-1;)oe=ue[ve],_transformProps[oe]&&(me=1,oe=oe==="transformOrigin"?_transformOriginProp:_transformProp$1),_removeProperty(se,oe);me&&(_removeProperty(se,_transformProp$1),de&&(de.svg&&se.removeAttribute("transform"),ae.scale=ae.rotate=ae.translate="none",_parseTransform(se,1),de.uncache=1,_removeIndependentTransforms(ae)))}},_specialProps={clearProps:function(ee,ne,se,ae,ue){if(ue.data!=="isFromStart"){var de=ee._pt=new PropTween(ee._pt,ne,se,0,0,_renderClearProps);return de.u=ae,de.pr=-10,de.tween=ue,ee._props.push(se),1}}},_identity2DMatrix=[1,0,0,1,0,0],_rotationalProperties={},_isNullTransform=function(ee){return ee==="matrix(1, 0, 0, 1, 0, 0)"||ee==="none"||!ee},_getComputedTransformMatrixAsArray=function(ee){var ne=_getComputedProperty(ee,_transformProp$1);return _isNullTransform(ne)?_identity2DMatrix:ne.substr(7).match(_numExp$1).map(_round$3)},_getMatrix=function(ee,ne){var se=ee._gsap||_getCache(ee),ae=ee.style,ue=_getComputedTransformMatrixAsArray(ee),de,oe,me,ve;return se.svg&&ee.getAttribute("transform")?(me=ee.transform.baseVal.consolidate().matrix,ue=[me.a,me.b,me.c,me.d,me.e,me.f],ue.join(",")==="1,0,0,1,0,0"?_identity2DMatrix:ue):(ue===_identity2DMatrix&&!ee.offsetParent&&ee!==_docElement&&!se.svg&&(me=ae.display,ae.display="block",de=ee.parentNode,(!de||!ee.offsetParent&&!ee.getBoundingClientRect().width)&&(ve=1,oe=ee.nextElementSibling,_docElement.appendChild(ee)),ue=_getComputedTransformMatrixAsArray(ee),me?ae.display=me:_removeProperty(ee,"display"),ve&&(oe?de.insertBefore(ee,oe):de?de.appendChild(ee):_docElement.removeChild(ee))),ne&&ue.length>6?[ue[0],ue[1],ue[4],ue[5],ue[12],ue[13]]:ue)},_applySVGOrigin=function(ee,ne,se,ae,ue,de){var oe=ee._gsap,me=ue||_getMatrix(ee,!0),ve=oe.xOrigin||0,Ee=oe.yOrigin||0,Pe=oe.xOffset||0,ye=oe.yOffset||0,Te=me[0],Ae=me[1],Ce=me[2],De=me[3],Ie=me[4],ze=me[5],Re=ne.split(" "),Oe=parseFloat(Re[0])||0,qe=parseFloat(Re[1])||0,Ze,Ue,Ye,ct;se?me!==_identity2DMatrix&&(Ue=Te*De-Ae*Ce)&&(Ye=Oe*(De/Ue)+qe*(-Ce/Ue)+(Ce*ze-De*Ie)/Ue,ct=Oe*(-Ae/Ue)+qe*(Te/Ue)-(Te*ze-Ae*Ie)/Ue,Oe=Ye,qe=ct):(Ze=_getBBox(ee),Oe=Ze.x+(~Re[0].indexOf("%")?Oe/100*Ze.width:Oe),qe=Ze.y+(~(Re[1]||Re[0]).indexOf("%")?qe/100*Ze.height:qe)),ae||ae!==!1&&oe.smooth?(Ie=Oe-ve,ze=qe-Ee,oe.xOffset=Pe+(Ie*Te+ze*Ce)-Ie,oe.yOffset=ye+(Ie*Ae+ze*De)-ze):oe.xOffset=oe.yOffset=0,oe.xOrigin=Oe,oe.yOrigin=qe,oe.smooth=!!ae,oe.origin=ne,oe.originIsAbsolute=!!se,ee.style[_transformOriginProp]="0px 0px",de&&(_addNonTweeningPT(de,oe,"xOrigin",ve,Oe),_addNonTweeningPT(de,oe,"yOrigin",Ee,qe),_addNonTweeningPT(de,oe,"xOffset",Pe,oe.xOffset),_addNonTweeningPT(de,oe,"yOffset",ye,oe.yOffset)),ee.setAttribute("data-svg-origin",Oe+" "+qe)},_parseTransform=function(ee,ne){var se=ee._gsap||new GSCache(ee);if("x"in se&&!ne&&!se.uncache)return se;var ae=ee.style,ue=se.scaleX<0,de="px",oe="deg",me=getComputedStyle(ee),ve=_getComputedProperty(ee,_transformOriginProp)||"0",Ee,Pe,ye,Te,Ae,Ce,De,Ie,ze,Re,Oe,qe,Ze,Ue,Ye,ct,at,ft,pt,Mt,At,_t,Qe,it,Ge,je,Ke,lt,Bt,Xt,Gt,lr;return Ee=Pe=ye=Ce=De=Ie=ze=Re=Oe=0,Te=Ae=1,se.svg=!!(ee.getCTM&&_isSVG(ee)),me.translate&&((me.translate!=="none"||me.scale!=="none"||me.rotate!=="none")&&(ae[_transformProp$1]=(me.translate!=="none"?"translate3d("+(me.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(me.rotate!=="none"?"rotate("+me.rotate+") ":"")+(me.scale!=="none"?"scale("+me.scale.split(" ").join(",")+") ":"")+(me[_transformProp$1]!=="none"?me[_transformProp$1]:"")),ae.scale=ae.rotate=ae.translate="none"),Ue=_getMatrix(ee,se.svg),se.svg&&(se.uncache?(Ge=ee.getBBox(),ve=se.xOrigin-Ge.x+"px "+(se.yOrigin-Ge.y)+"px",it=""):it=!ne&&ee.getAttribute("data-svg-origin"),_applySVGOrigin(ee,it||ve,!!it||se.originIsAbsolute,se.smooth!==!1,Ue)),qe=se.xOrigin||0,Ze=se.yOrigin||0,Ue!==_identity2DMatrix&&(ft=Ue[0],pt=Ue[1],Mt=Ue[2],At=Ue[3],Ee=_t=Ue[4],Pe=Qe=Ue[5],Ue.length===6?(Te=Math.sqrt(ft*ft+pt*pt),Ae=Math.sqrt(At*At+Mt*Mt),Ce=ft||pt?_atan2(pt,ft)*_RAD2DEG:0,ze=Mt||At?_atan2(Mt,At)*_RAD2DEG+Ce:0,ze&&(Ae*=Math.abs(Math.cos(ze*_DEG2RAD$1))),se.svg&&(Ee-=qe-(qe*ft+Ze*Mt),Pe-=Ze-(qe*pt+Ze*At))):(lr=Ue[6],Xt=Ue[7],Ke=Ue[8],lt=Ue[9],Bt=Ue[10],Gt=Ue[11],Ee=Ue[12],Pe=Ue[13],ye=Ue[14],Ye=_atan2(lr,Bt),De=Ye*_RAD2DEG,Ye&&(ct=Math.cos(-Ye),at=Math.sin(-Ye),it=_t*ct+Ke*at,Ge=Qe*ct+lt*at,je=lr*ct+Bt*at,Ke=_t*-at+Ke*ct,lt=Qe*-at+lt*ct,Bt=lr*-at+Bt*ct,Gt=Xt*-at+Gt*ct,_t=it,Qe=Ge,lr=je),Ye=_atan2(-Mt,Bt),Ie=Ye*_RAD2DEG,Ye&&(ct=Math.cos(-Ye),at=Math.sin(-Ye),it=ft*ct-Ke*at,Ge=pt*ct-lt*at,je=Mt*ct-Bt*at,Gt=At*at+Gt*ct,ft=it,pt=Ge,Mt=je),Ye=_atan2(pt,ft),Ce=Ye*_RAD2DEG,Ye&&(ct=Math.cos(Ye),at=Math.sin(Ye),it=ft*ct+pt*at,Ge=_t*ct+Qe*at,pt=pt*ct-ft*at,Qe=Qe*ct-_t*at,ft=it,_t=Ge),De&&Math.abs(De)+Math.abs(Ce)>359.9&&(De=Ce=0,Ie=180-Ie),Te=_round$3(Math.sqrt(ft*ft+pt*pt+Mt*Mt)),Ae=_round$3(Math.sqrt(Qe*Qe+lr*lr)),Ye=_atan2(_t,Qe),ze=Math.abs(Ye)>2e-4?Ye*_RAD2DEG:0,Oe=Gt?1/(Gt<0?-Gt:Gt):0),se.svg&&(it=ee.getAttribute("transform"),se.forceCSS=ee.setAttribute("transform","")||!_isNullTransform(_getComputedProperty(ee,_transformProp$1)),it&&ee.setAttribute("transform",it))),Math.abs(ze)>90&&Math.abs(ze)<270&&(ue?(Te*=-1,ze+=Ce<=0?180:-180,Ce+=Ce<=0?180:-180):(Ae*=-1,ze+=ze<=0?180:-180)),ne=ne||se.uncache,se.x=Ee-((se.xPercent=Ee&&(!ne&&se.xPercent||(Math.round(ee.offsetWidth/2)===Math.round(-Ee)?-50:0)))?ee.offsetWidth*se.xPercent/100:0)+de,se.y=Pe-((se.yPercent=Pe&&(!ne&&se.yPercent||(Math.round(ee.offsetHeight/2)===Math.round(-Pe)?-50:0)))?ee.offsetHeight*se.yPercent/100:0)+de,se.z=ye+de,se.scaleX=_round$3(Te),se.scaleY=_round$3(Ae),se.rotation=_round$3(Ce)+oe,se.rotationX=_round$3(De)+oe,se.rotationY=_round$3(Ie)+oe,se.skewX=ze+oe,se.skewY=Re+oe,se.transformPerspective=Oe+de,(se.zOrigin=parseFloat(ve.split(" ")[2])||!ne&&se.zOrigin||0)&&(ae[_transformOriginProp]=_firstTwoOnly(ve)),se.xOffset=se.yOffset=0,se.force3D=_config.force3D,se.renderTransform=se.svg?_renderSVGTransforms:_supports3D?_renderCSSTransforms:_renderNon3DTransforms,se.uncache=0,se},_firstTwoOnly=function(ee){return(ee=ee.split(" "))[0]+" "+ee[1]},_addPxTranslate=function(ee,ne,se){var ae=getUnit(ne);return _round$3(parseFloat(ne)+parseFloat(_convertToUnit(ee,"x",se+"px",ae)))+ae},_renderNon3DTransforms=function(ee,ne){ne.z="0px",ne.rotationY=ne.rotationX="0deg",ne.force3D=0,_renderCSSTransforms(ee,ne)},_zeroDeg="0deg",_zeroPx="0px",_endParenthesis=") ",_renderCSSTransforms=function(ee,ne){var se=ne||this,ae=se.xPercent,ue=se.yPercent,de=se.x,oe=se.y,me=se.z,ve=se.rotation,Ee=se.rotationY,Pe=se.rotationX,ye=se.skewX,Te=se.skewY,Ae=se.scaleX,Ce=se.scaleY,De=se.transformPerspective,Ie=se.force3D,ze=se.target,Re=se.zOrigin,Oe="",qe=Ie==="auto"&&ee&&ee!==1||Ie===!0;if(Re&&(Pe!==_zeroDeg||Ee!==_zeroDeg)){var Ze=parseFloat(Ee)*_DEG2RAD$1,Ue=Math.sin(Ze),Ye=Math.cos(Ze),ct;Ze=parseFloat(Pe)*_DEG2RAD$1,ct=Math.cos(Ze),de=_addPxTranslate(ze,de,Ue*ct*-Re),oe=_addPxTranslate(ze,oe,-Math.sin(Ze)*-Re),me=_addPxTranslate(ze,me,Ye*ct*-Re+Re)}De!==_zeroPx&&(Oe+="perspective("+De+_endParenthesis),(ae||ue)&&(Oe+="translate("+ae+"%, "+ue+"%) "),(qe||de!==_zeroPx||oe!==_zeroPx||me!==_zeroPx)&&(Oe+=me!==_zeroPx||qe?"translate3d("+de+", "+oe+", "+me+") ":"translate("+de+", "+oe+_endParenthesis),ve!==_zeroDeg&&(Oe+="rotate("+ve+_endParenthesis),Ee!==_zeroDeg&&(Oe+="rotateY("+Ee+_endParenthesis),Pe!==_zeroDeg&&(Oe+="rotateX("+Pe+_endParenthesis),(ye!==_zeroDeg||Te!==_zeroDeg)&&(Oe+="skew("+ye+", "+Te+_endParenthesis),(Ae!==1||Ce!==1)&&(Oe+="scale("+Ae+", "+Ce+_endParenthesis),ze.style[_transformProp$1]=Oe||"translate(0, 0)"},_renderSVGTransforms=function(ee,ne){var se=ne||this,ae=se.xPercent,ue=se.yPercent,de=se.x,oe=se.y,me=se.rotation,ve=se.skewX,Ee=se.skewY,Pe=se.scaleX,ye=se.scaleY,Te=se.target,Ae=se.xOrigin,Ce=se.yOrigin,De=se.xOffset,Ie=se.yOffset,ze=se.forceCSS,Re=parseFloat(de),Oe=parseFloat(oe),qe,Ze,Ue,Ye,ct;me=parseFloat(me),ve=parseFloat(ve),Ee=parseFloat(Ee),Ee&&(Ee=parseFloat(Ee),ve+=Ee,me+=Ee),me||ve?(me*=_DEG2RAD$1,ve*=_DEG2RAD$1,qe=Math.cos(me)*Pe,Ze=Math.sin(me)*Pe,Ue=Math.sin(me-ve)*-ye,Ye=Math.cos(me-ve)*ye,ve&&(Ee*=_DEG2RAD$1,ct=Math.tan(ve-Ee),ct=Math.sqrt(1+ct*ct),Ue*=ct,Ye*=ct,Ee&&(ct=Math.tan(Ee),ct=Math.sqrt(1+ct*ct),qe*=ct,Ze*=ct)),qe=_round$3(qe),Ze=_round$3(Ze),Ue=_round$3(Ue),Ye=_round$3(Ye)):(qe=Pe,Ye=ye,Ze=Ue=0),(Re&&!~(de+"").indexOf("px")||Oe&&!~(oe+"").indexOf("px"))&&(Re=_convertToUnit(Te,"x",de,"px"),Oe=_convertToUnit(Te,"y",oe,"px")),(Ae||Ce||De||Ie)&&(Re=_round$3(Re+Ae-(Ae*qe+Ce*Ue)+De),Oe=_round$3(Oe+Ce-(Ae*Ze+Ce*Ye)+Ie)),(ae||ue)&&(ct=Te.getBBox(),Re=_round$3(Re+ae/100*ct.width),Oe=_round$3(Oe+ue/100*ct.height)),ct="matrix("+qe+","+Ze+","+Ue+","+Ye+","+Re+","+Oe+")",Te.setAttribute("transform",ct),ze&&(Te.style[_transformProp$1]=ct)},_addRotationalPropTween=function(ee,ne,se,ae,ue){var de=360,oe=_isString$1(ue),me=parseFloat(ue)*(oe&&~ue.indexOf("rad")?_RAD2DEG:1),ve=me-ae,Ee=ae+ve+"deg",Pe,ye;return oe&&(Pe=ue.split("_")[1],Pe==="short"&&(ve%=de,ve!==ve%(de/2)&&(ve+=ve<0?de:-de)),Pe==="cw"&&ve<0?ve=(ve+de*_bigNum$1)%de-~~(ve/de)*de:Pe==="ccw"&&ve>0&&(ve=(ve-de*_bigNum$1)%de-~~(ve/de)*de)),ee._pt=ye=new PropTween(ee._pt,ne,se,ae,ve,_renderPropWithEnd),ye.e=Ee,ye.u="deg",ee._props.push(se),ye},_assign=function(ee,ne){for(var se in ne)ee[se]=ne[se];return ee},_addRawTransformPTs=function(ee,ne,se){var ae=_assign({},se._gsap),ue="perspective,force3D,transformOrigin,svgOrigin",de=se.style,oe,me,ve,Ee,Pe,ye,Te,Ae;ae.svg?(ve=se.getAttribute("transform"),se.setAttribute("transform",""),de[_transformProp$1]=ne,oe=_parseTransform(se,1),_removeProperty(se,_transformProp$1),se.setAttribute("transform",ve)):(ve=getComputedStyle(se)[_transformProp$1],de[_transformProp$1]=ne,oe=_parseTransform(se,1),de[_transformProp$1]=ve);for(me in _transformProps)ve=ae[me],Ee=oe[me],ve!==Ee&&ue.indexOf(me)<0&&(Te=getUnit(ve),Ae=getUnit(Ee),Pe=Te!==Ae?_convertToUnit(se,me,ve,Ae):parseFloat(ve),ye=parseFloat(Ee),ee._pt=new PropTween(ee._pt,oe,me,Pe,ye-Pe,_renderCSSProp),ee._pt.u=Ae||0,ee._props.push(me));_assign(oe,ae)};_forEachName("padding,margin,Width,Radius",function(te,ee){var ne="Top",se="Right",ae="Bottom",ue="Left",de=(ee<3?[ne,se,ae,ue]:[ne+ue,ne+se,ae+se,ae+ue]).map(function(oe){return ee<2?te+oe:"border"+oe+te});_specialProps[ee>1?"border"+te:te]=function(oe,me,ve,Ee,Pe){var ye,Te;if(arguments.length<4)return ye=de.map(function(Ae){return _get(oe,Ae,ve)}),Te=ye.join(" "),Te.split(ye[0]).length===5?ye[0]:Te;ye=(Ee+"").split(" "),Te={},de.forEach(function(Ae,Ce){return Te[Ae]=ye[Ce]=ye[Ce]||ye[(Ce-1)/2|0]}),oe.init(me,Te,Pe)}});var CSSPlugin={name:"css",register:_initCore$2,targetTest:function(ee){return ee.style&&ee.nodeType},init:function(ee,ne,se,ae,ue){var de=this._props,oe=ee.style,me=se.vars.startAt,ve,Ee,Pe,ye,Te,Ae,Ce,De,Ie,ze,Re,Oe,qe,Ze,Ue,Ye;_pluginInitted||_initCore$2(),this.styles=this.styles||_getStyleSaver(ee),Ye=this.styles.props,this.tween=se;for(Ce in ne)if(Ce!=="autoRound"&&(Ee=ne[Ce],!(_plugins[Ce]&&_checkPlugin(Ce,ne,se,ae,ee,ue)))){if(Te=typeof Ee,Ae=_specialProps[Ce],Te==="function"&&(Ee=Ee.call(se,ae,ee,ue),Te=typeof Ee),Te==="string"&&~Ee.indexOf("random(")&&(Ee=_replaceRandom(Ee)),Ae)Ae(this,ee,Ce,Ee,se)&&(Ue=1);else if(Ce.substr(0,2)==="--")ve=(getComputedStyle(ee).getPropertyValue(Ce)+"").trim(),Ee+="",_colorExp.lastIndex=0,_colorExp.test(ve)||(De=getUnit(ve),Ie=getUnit(Ee)),Ie?De!==Ie&&(ve=_convertToUnit(ee,Ce,ve,Ie)+Ie):De&&(Ee+=De),this.add(oe,"setProperty",ve,Ee,ae,ue,0,0,Ce),de.push(Ce),Ye.push(Ce,0,oe[Ce]);else if(Te!=="undefined"){if(me&&Ce in me?(ve=typeof me[Ce]=="function"?me[Ce].call(se,ae,ee,ue):me[Ce],_isString$1(ve)&&~ve.indexOf("random(")&&(ve=_replaceRandom(ve)),getUnit(ve+"")||ve==="auto"||(ve+=_config.units[Ce]||getUnit(_get(ee,Ce))||""),(ve+"").charAt(1)==="="&&(ve=_get(ee,Ce))):ve=_get(ee,Ce),ye=parseFloat(ve),ze=Te==="string"&&Ee.charAt(1)==="="&&Ee.substr(0,2),ze&&(Ee=Ee.substr(2)),Pe=parseFloat(Ee),Ce in _propertyAliases&&(Ce==="autoAlpha"&&(ye===1&&_get(ee,"visibility")==="hidden"&&Pe&&(ye=0),Ye.push("visibility",0,oe.visibility),_addNonTweeningPT(this,oe,"visibility",ye?"inherit":"hidden",Pe?"inherit":"hidden",!Pe)),Ce!=="scale"&&Ce!=="transform"&&(Ce=_propertyAliases[Ce],~Ce.indexOf(",")&&(Ce=Ce.split(",")[0]))),Re=Ce in _transformProps,Re){if(this.styles.save(Ce),Te==="string"&&Ee.substring(0,6)==="var(--"&&(Ee=_getComputedProperty(ee,Ee.substring(4,Ee.indexOf(")"))),Pe=parseFloat(Ee)),Oe||(qe=ee._gsap,qe.renderTransform&&!ne.parseTransform||_parseTransform(ee,ne.parseTransform),Ze=ne.smoothOrigin!==!1&&qe.smooth,Oe=this._pt=new PropTween(this._pt,oe,_transformProp$1,0,1,qe.renderTransform,qe,0,-1),Oe.dep=1),Ce==="scale")this._pt=new PropTween(this._pt,qe,"scaleY",qe.scaleY,(ze?_parseRelative(qe.scaleY,ze+Pe):Pe)-qe.scaleY||0,_renderCSSProp),this._pt.u=0,de.push("scaleY",Ce),Ce+="X";else if(Ce==="transformOrigin"){Ye.push(_transformOriginProp,0,oe[_transformOriginProp]),Ee=_convertKeywordsToPercentages(Ee),qe.svg?_applySVGOrigin(ee,Ee,0,Ze,0,this):(Ie=parseFloat(Ee.split(" ")[2])||0,Ie!==qe.zOrigin&&_addNonTweeningPT(this,qe,"zOrigin",qe.zOrigin,Ie),_addNonTweeningPT(this,oe,Ce,_firstTwoOnly(ve),_firstTwoOnly(Ee)));continue}else if(Ce==="svgOrigin"){_applySVGOrigin(ee,Ee,1,Ze,0,this);continue}else if(Ce in _rotationalProperties){_addRotationalPropTween(this,qe,Ce,ye,ze?_parseRelative(ye,ze+Ee):Ee);continue}else if(Ce==="smoothOrigin"){_addNonTweeningPT(this,qe,"smooth",qe.smooth,Ee);continue}else if(Ce==="force3D"){qe[Ce]=Ee;continue}else if(Ce==="transform"){_addRawTransformPTs(this,Ee,ee);continue}}else Ce in oe||(Ce=_checkPropPrefix(Ce)||Ce);if(Re||(Pe||Pe===0)&&(ye||ye===0)&&!_complexExp.test(Ee)&&Ce in oe)De=(ve+"").substr((ye+"").length),Pe||(Pe=0),Ie=getUnit(Ee)||(Ce in _config.units?_config.units[Ce]:De),De!==Ie&&(ye=_convertToUnit(ee,Ce,ve,Ie)),this._pt=new PropTween(this._pt,Re?qe:oe,Ce,ye,(ze?_parseRelative(ye,ze+Pe):Pe)-ye,!Re&&(Ie==="px"||Ce==="zIndex")&&ne.autoRound!==!1?_renderRoundedCSSProp:_renderCSSProp),this._pt.u=Ie||0,De!==Ie&&Ie!=="%"&&(this._pt.b=ve,this._pt.r=_renderCSSPropWithBeginning);else if(Ce in oe)_tweenComplexCSSString.call(this,ee,Ce,ve,ze?ze+Ee:Ee);else if(Ce in ee)this.add(ee,Ce,ve||ee[Ce],ze?ze+Ee:Ee,ae,ue);else if(Ce!=="parseTransform"){_missingPlugin(Ce,Ee);continue}Re||(Ce in oe?Ye.push(Ce,0,oe[Ce]):typeof ee[Ce]=="function"?Ye.push(Ce,2,ee[Ce]()):Ye.push(Ce,1,ve||ee[Ce])),de.push(Ce)}}Ue&&_sortPropTweensByPriority(this)},render:function(ee,ne){if(ne.tween._time||!_reverting())for(var se=ne._pt;se;)se.r(ee,se.d),se=se._next;else ne.styles.revert()},get:_get,aliases:_propertyAliases,getSetter:function(ee,ne,se){var ae=_propertyAliases[ne];return ae&&ae.indexOf(",")<0&&(ne=ae),ne in _transformProps&&ne!==_transformOriginProp&&(ee._gsap.x||_get(ee,"x"))?se&&_recentSetterPlugin===se?ne==="scale"?_setterScale:_setterTransform:(_recentSetterPlugin=se||{})&&(ne==="scale"?_setterScaleWithRender:_setterTransformWithRender):ee.style&&!_isUndefined(ee.style[ne])?_setterCSSStyle:~ne.indexOf("-")?_setterCSSProp:_getSetter(ee,ne)},core:{_removeProperty,_getMatrix}};gsap$3.utils.checkPrefix=_checkPropPrefix,gsap$3.core.getStyleSaver=_getStyleSaver,function(te,ee,ne,se){var ae=_forEachName(te+","+ee+","+ne,function(ue){_transformProps[ue]=1});_forEachName(ee,function(ue){_config.units[ue]="deg",_rotationalProperties[ue]=1}),_propertyAliases[ae[13]]=te+","+ee,_forEachName(se,function(ue){var de=ue.split(":");_propertyAliases[de[1]]=ae[de[0]]})}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY"),_forEachName("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(te){_config.units[te]="px"}),gsap$3.registerPlugin(CSSPlugin);var gsapWithCSS=gsap$3.registerPlugin(CSSPlugin)||gsap$3;gsapWithCSS.core.Tween;function _defineProperties$1(te,ee){for(var ne=0;ne<ee.length;ne++){var se=ee[ne];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(te,se.key,se)}}function _createClass$1(te,ee,ne){return ee&&_defineProperties$1(te.prototype,ee),ne&&_defineProperties$1(te,ne),te}/*!
 * Observer 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var gsap$2,_coreInitted$2,_win$1,_doc$1,_docEl$1,_body$1,_isTouch,_pointerType,ScrollTrigger$1,_root$1,_normalizer$1,_eventTypes,_context$1,_getGSAP$2=function(){return gsap$2||typeof window!="undefined"&&(gsap$2=window.gsap)&&gsap$2.registerPlugin&&gsap$2},_startup$1=1,_observers=[],_scrollers=[],_proxies=[],_getTime$1=Date.now,_bridge=function(ee,ne){return ne},_integrate=function(){var ee=ScrollTrigger$1.core,ne=ee.bridge||{},se=ee._scrollers,ae=ee._proxies;se.push.apply(se,_scrollers),ae.push.apply(ae,_proxies),_scrollers=se,_proxies=ae,_bridge=function(de,oe){return ne[de](oe)}},_getProxyProp=function(ee,ne){return~_proxies.indexOf(ee)&&_proxies[_proxies.indexOf(ee)+1][ne]},_isViewport$1=function(ee){return!!~_root$1.indexOf(ee)},_addListener$1=function(ee,ne,se,ae,ue){return ee.addEventListener(ne,se,{passive:ae!==!1,capture:!!ue})},_removeListener$1=function(ee,ne,se,ae){return ee.removeEventListener(ne,se,!!ae)},_scrollLeft="scrollLeft",_scrollTop="scrollTop",_onScroll$1=function(){return _normalizer$1&&_normalizer$1.isPressed||_scrollers.cache++},_scrollCacheFunc=function(ee,ne){var se=function ae(ue){if(ue||ue===0){_startup$1&&(_win$1.history.scrollRestoration="manual");var de=_normalizer$1&&_normalizer$1.isPressed;ue=ae.v=Math.round(ue)||(_normalizer$1&&_normalizer$1.iOS?1:0),ee(ue),ae.cacheID=_scrollers.cache,de&&_bridge("ss",ue)}else(ne||_scrollers.cache!==ae.cacheID||_bridge("ref"))&&(ae.cacheID=_scrollers.cache,ae.v=ee());return ae.v+ae.offset};return se.offset=0,ee&&se},_horizontal={s:_scrollLeft,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:_scrollCacheFunc(function(te){return arguments.length?_win$1.scrollTo(te,_vertical.sc()):_win$1.pageXOffset||_doc$1[_scrollLeft]||_docEl$1[_scrollLeft]||_body$1[_scrollLeft]||0})},_vertical={s:_scrollTop,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:_horizontal,sc:_scrollCacheFunc(function(te){return arguments.length?_win$1.scrollTo(_horizontal.sc(),te):_win$1.pageYOffset||_doc$1[_scrollTop]||_docEl$1[_scrollTop]||_body$1[_scrollTop]||0})},_getTarget=function(ee,ne){return(ne&&ne._ctx&&ne._ctx.selector||gsap$2.utils.toArray)(ee)[0]||(typeof ee=="string"&&gsap$2.config().nullTargetWarn!==!1?console.warn("Element not found:",ee):null)},_isWithin=function(ee,ne){for(var se=ne.length;se--;)if(ne[se]===ee||ne[se].contains(ee))return!0;return!1},_getScrollFunc=function(ee,ne){var se=ne.s,ae=ne.sc;_isViewport$1(ee)&&(ee=_doc$1.scrollingElement||_docEl$1);var ue=_scrollers.indexOf(ee),de=ae===_vertical.sc?1:2;!~ue&&(ue=_scrollers.push(ee)-1),_scrollers[ue+de]||_addListener$1(ee,"scroll",_onScroll$1);var oe=_scrollers[ue+de],me=oe||(_scrollers[ue+de]=_scrollCacheFunc(_getProxyProp(ee,se),!0)||(_isViewport$1(ee)?ae:_scrollCacheFunc(function(ve){return arguments.length?ee[se]=ve:ee[se]})));return me.target=ee,oe||(me.smooth=gsap$2.getProperty(ee,"scrollBehavior")==="smooth"),me},_getVelocityProp=function(ee,ne,se){var ae=ee,ue=ee,de=_getTime$1(),oe=de,me=ne||50,ve=Math.max(500,me*3),Ee=function(Ae,Ce){var De=_getTime$1();Ce||De-de>me?(ue=ae,ae=Ae,oe=de,de=De):se?ae+=Ae:ae=ue+(Ae-ue)/(De-oe)*(de-oe)},Pe=function(){ue=ae=se?0:ae,oe=de=0},ye=function(Ae){var Ce=oe,De=ue,Ie=_getTime$1();return(Ae||Ae===0)&&Ae!==ae&&Ee(Ae),de===oe||Ie-oe>ve?0:(ae+(se?De:-De))/((se?Ie:de)-Ce)*1e3};return{update:Ee,reset:Pe,getVelocity:ye}},_getEvent=function(ee,ne){return ne&&!ee._gsapAllow&&ee.preventDefault(),ee.changedTouches?ee.changedTouches[0]:ee},_getAbsoluteMax=function(ee){var ne=Math.max.apply(Math,ee),se=Math.min.apply(Math,ee);return Math.abs(ne)>=Math.abs(se)?ne:se},_setScrollTrigger=function(){ScrollTrigger$1=gsap$2.core.globals().ScrollTrigger,ScrollTrigger$1&&ScrollTrigger$1.core&&_integrate()},_initCore$1=function(ee){return gsap$2=ee||_getGSAP$2(),!_coreInitted$2&&gsap$2&&typeof document!="undefined"&&document.body&&(_win$1=window,_doc$1=document,_docEl$1=_doc$1.documentElement,_body$1=_doc$1.body,_root$1=[_win$1,_doc$1,_docEl$1,_body$1],gsap$2.utils.clamp,_context$1=gsap$2.core.context||function(){},_pointerType="onpointerenter"in _body$1?"pointer":"mouse",_isTouch=Observer$1.isTouch=_win$1.matchMedia&&_win$1.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in _win$1||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,_eventTypes=Observer$1.eventTypes=("ontouchstart"in _docEl$1?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in _docEl$1?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return _startup$1=0},500),_setScrollTrigger(),_coreInitted$2=1),_coreInitted$2};_horizontal.op=_vertical,_scrollers.cache=0;var Observer$1=function(){function te(ne){this.init(ne)}var ee=te.prototype;return ee.init=function(se){_coreInitted$2||_initCore$1(gsap$2)||console.warn("Please gsap.registerPlugin(Observer)"),ScrollTrigger$1||_setScrollTrigger();var ae=se.tolerance,ue=se.dragMinimum,de=se.type,oe=se.target,me=se.lineHeight,ve=se.debounce,Ee=se.preventDefault,Pe=se.onStop,ye=se.onStopDelay,Te=se.ignore,Ae=se.wheelSpeed,Ce=se.event,De=se.onDragStart,Ie=se.onDragEnd,ze=se.onDrag,Re=se.onPress,Oe=se.onRelease,qe=se.onRight,Ze=se.onLeft,Ue=se.onUp,Ye=se.onDown,ct=se.onChangeX,at=se.onChangeY,ft=se.onChange,pt=se.onToggleX,Mt=se.onToggleY,At=se.onHover,_t=se.onHoverEnd,Qe=se.onMove,it=se.ignoreCheck,Ge=se.isNormalizer,je=se.onGestureStart,Ke=se.onGestureEnd,lt=se.onWheel,Bt=se.onEnable,Xt=se.onDisable,Gt=se.onClick,lr=se.scrollSpeed,yr=se.capture,Lr=se.allowClicks,Nr=se.lockAxis,$r=se.onLockAxis;this.target=oe=_getTarget(oe)||_docEl$1,this.vars=se,Te&&(Te=gsap$2.utils.toArray(Te)),ae=ae||1e-9,ue=ue||0,Ae=Ae||1,lr=lr||1,de=de||"wheel,touch,pointer",ve=ve!==!1,me||(me=parseFloat(_win$1.getComputedStyle(_body$1).lineHeight)||22);var Gr,Zr,Dr,dr,fr,qr,li,Jt=this,gi=0,ci=0,hi=se.passive||!Ee&&se.passive!==!1,ri=_getScrollFunc(oe,_horizontal),Ci=_getScrollFunc(oe,_vertical),Ei=ri(),Mi=Ci(),wi=~de.indexOf("touch")&&!~de.indexOf("pointer")&&_eventTypes[0]==="pointerdown",Ft=_isViewport$1(oe),er=oe.ownerDocument||_doc$1,sr=[0,0,0],ir=[0,0,0],mt=0,tt=function(){return mt=_getTime$1()},rt=function(gr,Cr){return(Jt.event=gr)&&Te&&_isWithin(gr.target,Te)||Cr&&wi&&gr.pointerType!=="touch"||it&&it(gr,Cr)},dt=function(){Jt._vx.reset(),Jt._vy.reset(),Zr.pause(),Pe&&Pe(Jt)},yt=function(){var gr=Jt.deltaX=_getAbsoluteMax(sr),Cr=Jt.deltaY=_getAbsoluteMax(ir),ur=Math.abs(gr)>=ae,cr=Math.abs(Cr)>=ae;ft&&(ur||cr)&&ft(Jt,gr,Cr,sr,ir),ur&&(qe&&Jt.deltaX>0&&qe(Jt),Ze&&Jt.deltaX<0&&Ze(Jt),ct&&ct(Jt),pt&&Jt.deltaX<0!=gi<0&&pt(Jt),gi=Jt.deltaX,sr[0]=sr[1]=sr[2]=0),cr&&(Ye&&Jt.deltaY>0&&Ye(Jt),Ue&&Jt.deltaY<0&&Ue(Jt),at&&at(Jt),Mt&&Jt.deltaY<0!=ci<0&&Mt(Jt),ci=Jt.deltaY,ir[0]=ir[1]=ir[2]=0),(dr||Dr)&&(Qe&&Qe(Jt),Dr&&(De&&Dr===1&&De(Jt),ze&&ze(Jt),Dr=0),dr=!1),qr&&!(qr=!1)&&$r&&$r(Jt),fr&&(lt(Jt),fr=!1),Gr=0},wt=function(gr,Cr,ur){sr[ur]+=gr,ir[ur]+=Cr,Jt._vx.update(gr),Jt._vy.update(Cr),ve?Gr||(Gr=requestAnimationFrame(yt)):yt()},It=function(gr,Cr){Nr&&!li&&(Jt.axis=li=Math.abs(gr)>Math.abs(Cr)?"x":"y",qr=!0),li!=="y"&&(sr[2]+=gr,Jt._vx.update(gr,!0)),li!=="x"&&(ir[2]+=Cr,Jt._vy.update(Cr,!0)),ve?Gr||(Gr=requestAnimationFrame(yt)):yt()},qt=function(gr){if(!rt(gr,1)){gr=_getEvent(gr,Ee);var Cr=gr.clientX,ur=gr.clientY,cr=Cr-Jt.x,nr=ur-Jt.y,hr=Jt.isDragging;Jt.x=Cr,Jt.y=ur,(hr||(cr||nr)&&(Math.abs(Jt.startX-Cr)>=ue||Math.abs(Jt.startY-ur)>=ue))&&(Dr=hr?2:1,hr||(Jt.isDragging=!0),It(cr,nr))}},Dt=Jt.onPress=function(mr){rt(mr,1)||mr&&mr.button||(Jt.axis=li=null,Zr.pause(),Jt.isPressed=!0,mr=_getEvent(mr),gi=ci=0,Jt.startX=Jt.x=mr.clientX,Jt.startY=Jt.y=mr.clientY,Jt._vx.reset(),Jt._vy.reset(),_addListener$1(Ge?oe:er,_eventTypes[1],qt,hi,!0),Jt.deltaX=Jt.deltaY=0,Re&&Re(Jt))},Vt=Jt.onRelease=function(mr){if(!rt(mr,1)){_removeListener$1(Ge?oe:er,_eventTypes[1],qt,!0);var gr=!isNaN(Jt.y-Jt.startY),Cr=Jt.isDragging,ur=Cr&&(Math.abs(Jt.x-Jt.startX)>3||Math.abs(Jt.y-Jt.startY)>3),cr=_getEvent(mr);!ur&&gr&&(Jt._vx.reset(),Jt._vy.reset(),Ee&&Lr&&gsap$2.delayedCall(.08,function(){if(_getTime$1()-mt>300&&!mr.defaultPrevented){if(mr.target.click)mr.target.click();else if(er.createEvent){var nr=er.createEvent("MouseEvents");nr.initMouseEvent("click",!0,!0,_win$1,1,cr.screenX,cr.screenY,cr.clientX,cr.clientY,!1,!1,!1,!1,0,null),mr.target.dispatchEvent(nr)}}})),Jt.isDragging=Jt.isGesturing=Jt.isPressed=!1,Pe&&Cr&&!Ge&&Zr.restart(!0),Dr&&yt(),Ie&&Cr&&Ie(Jt),Oe&&Oe(Jt,ur)}},tr=function(gr){return gr.touches&&gr.touches.length>1&&(Jt.isGesturing=!0)&&je(gr,Jt.isDragging)},Zt=function(){return(Jt.isGesturing=!1)||Ke(Jt)},Ir=function(gr){if(!rt(gr)){var Cr=ri(),ur=Ci();wt((Cr-Ei)*lr,(ur-Mi)*lr,1),Ei=Cr,Mi=ur,Pe&&Zr.restart(!0)}},Ot=function(gr){if(!rt(gr)){gr=_getEvent(gr,Ee),lt&&(fr=!0);var Cr=(gr.deltaMode===1?me:gr.deltaMode===2?_win$1.innerHeight:1)*Ae;wt(gr.deltaX*Cr,gr.deltaY*Cr,0),Pe&&!Ge&&Zr.restart(!0)}},zr=function(gr){if(!rt(gr)){var Cr=gr.clientX,ur=gr.clientY,cr=Cr-Jt.x,nr=ur-Jt.y;Jt.x=Cr,Jt.y=ur,dr=!0,Pe&&Zr.restart(!0),(cr||nr)&&It(cr,nr)}},Xr=function(gr){Jt.event=gr,At(Jt)},kr=function(gr){Jt.event=gr,_t(Jt)},ar=function(gr){return rt(gr)||_getEvent(gr,Ee)&&Gt(Jt)};Zr=Jt._dc=gsap$2.delayedCall(ye||.25,dt).pause(),Jt.deltaX=Jt.deltaY=0,Jt._vx=_getVelocityProp(0,50,!0),Jt._vy=_getVelocityProp(0,50,!0),Jt.scrollX=ri,Jt.scrollY=Ci,Jt.isDragging=Jt.isGesturing=Jt.isPressed=!1,_context$1(this),Jt.enable=function(mr){return Jt.isEnabled||(_addListener$1(Ft?er:oe,"scroll",_onScroll$1),de.indexOf("scroll")>=0&&_addListener$1(Ft?er:oe,"scroll",Ir,hi,yr),de.indexOf("wheel")>=0&&_addListener$1(oe,"wheel",Ot,hi,yr),(de.indexOf("touch")>=0&&_isTouch||de.indexOf("pointer")>=0)&&(_addListener$1(oe,_eventTypes[0],Dt,hi,yr),_addListener$1(er,_eventTypes[2],Vt),_addListener$1(er,_eventTypes[3],Vt),Lr&&_addListener$1(oe,"click",tt,!0,!0),Gt&&_addListener$1(oe,"click",ar),je&&_addListener$1(er,"gesturestart",tr),Ke&&_addListener$1(er,"gestureend",Zt),At&&_addListener$1(oe,_pointerType+"enter",Xr),_t&&_addListener$1(oe,_pointerType+"leave",kr),Qe&&_addListener$1(oe,_pointerType+"move",zr)),Jt.isEnabled=!0,Jt.isDragging=Jt.isGesturing=Jt.isPressed=dr=Dr=!1,Jt._vx.reset(),Jt._vy.reset(),Ei=ri(),Mi=Ci(),mr&&mr.type&&Dt(mr),Bt&&Bt(Jt)),Jt},Jt.disable=function(){Jt.isEnabled&&(_observers.filter(function(mr){return mr!==Jt&&_isViewport$1(mr.target)}).length||_removeListener$1(Ft?er:oe,"scroll",_onScroll$1),Jt.isPressed&&(Jt._vx.reset(),Jt._vy.reset(),_removeListener$1(Ge?oe:er,_eventTypes[1],qt,!0)),_removeListener$1(Ft?er:oe,"scroll",Ir,yr),_removeListener$1(oe,"wheel",Ot,yr),_removeListener$1(oe,_eventTypes[0],Dt,yr),_removeListener$1(er,_eventTypes[2],Vt),_removeListener$1(er,_eventTypes[3],Vt),_removeListener$1(oe,"click",tt,!0),_removeListener$1(oe,"click",ar),_removeListener$1(er,"gesturestart",tr),_removeListener$1(er,"gestureend",Zt),_removeListener$1(oe,_pointerType+"enter",Xr),_removeListener$1(oe,_pointerType+"leave",kr),_removeListener$1(oe,_pointerType+"move",zr),Jt.isEnabled=Jt.isPressed=Jt.isDragging=!1,Xt&&Xt(Jt))},Jt.kill=Jt.revert=function(){Jt.disable();var mr=_observers.indexOf(Jt);mr>=0&&_observers.splice(mr,1),_normalizer$1===Jt&&(_normalizer$1=0)},_observers.push(Jt),Ge&&_isViewport$1(oe)&&(_normalizer$1=Jt),Jt.enable(Ce)},_createClass$1(te,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),te}();Observer$1.version="3.13.0",Observer$1.create=function(te){return new Observer$1(te)},Observer$1.register=_initCore$1,Observer$1.getAll=function(){return _observers.slice()},Observer$1.getById=function(te){return _observers.filter(function(ee){return ee.vars.id===te})[0]},_getGSAP$2()&&gsap$2.registerPlugin(Observer$1);/*!
 * ScrollTrigger 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var gsap$1,_coreInitted$1,_win,_doc,_docEl,_body,_root,_resizeDelay,_toArray,_clamp,_time2,_syncInterval,_refreshing,_pointerIsDown,_transformProp,_i,_prevWidth,_prevHeight,_autoRefresh,_sort,_suppressOverwrites,_ignoreResize,_normalizer,_ignoreMobileResize,_baseScreenHeight,_baseScreenWidth,_fixIOSBug,_context,_scrollRestoration,_div100vh,_100vh,_isReverted,_clampingMax,_limitCallbacks,_startup=1,_getTime=Date.now,_time1=_getTime(),_lastScrollTime=0,_enabled=0,_parseClamp=function(ee,ne,se){var ae=_isString(ee)&&(ee.substr(0,6)==="clamp("||ee.indexOf("max")>-1);return se["_"+ne+"Clamp"]=ae,ae?ee.substr(6,ee.length-7):ee},_keepClamp=function(ee,ne){return ne&&(!_isString(ee)||ee.substr(0,6)!=="clamp(")?"clamp("+ee+")":ee},_rafBugFix=function te(){return _enabled&&requestAnimationFrame(te)},_pointerDownHandler=function(){return _pointerIsDown=1},_pointerUpHandler=function(){return _pointerIsDown=0},_passThrough=function(ee){return ee},_round$2=function(ee){return Math.round(ee*1e5)/1e5||0},_windowExists=function(){return typeof window!="undefined"},_getGSAP$1=function(){return gsap$1||_windowExists()&&(gsap$1=window.gsap)&&gsap$1.registerPlugin&&gsap$1},_isViewport=function(ee){return!!~_root.indexOf(ee)},_getViewportDimension=function(ee){return(ee==="Height"?_100vh:_win["inner"+ee])||_docEl["client"+ee]||_body["client"+ee]},_getBoundsFunc=function(ee){return _getProxyProp(ee,"getBoundingClientRect")||(_isViewport(ee)?function(){return _winOffsets.width=_win.innerWidth,_winOffsets.height=_100vh,_winOffsets}:function(){return _getBounds(ee)})},_getSizeFunc=function(ee,ne,se){var ae=se.d,ue=se.d2,de=se.a;return(de=_getProxyProp(ee,"getBoundingClientRect"))?function(){return de()[ae]}:function(){return(ne?_getViewportDimension(ue):ee["client"+ue])||0}},_getOffsetsFunc=function(ee,ne){return!ne||~_proxies.indexOf(ee)?_getBoundsFunc(ee):function(){return _winOffsets}},_maxScroll=function(ee,ne){var se=ne.s,ae=ne.d2,ue=ne.d,de=ne.a;return Math.max(0,(se="scroll"+ae)&&(de=_getProxyProp(ee,se))?de()-_getBoundsFunc(ee)()[ue]:_isViewport(ee)?(_docEl[se]||_body[se])-_getViewportDimension(ae):ee[se]-ee["offset"+ae])},_iterateAutoRefresh=function(ee,ne){for(var se=0;se<_autoRefresh.length;se+=3)(!ne||~ne.indexOf(_autoRefresh[se+1]))&&ee(_autoRefresh[se],_autoRefresh[se+1],_autoRefresh[se+2])},_isString=function(ee){return typeof ee=="string"},_isFunction=function(ee){return typeof ee=="function"},_isNumber$1=function(ee){return typeof ee=="number"},_isObject=function(ee){return typeof ee=="object"},_endAnimation=function(ee,ne,se){return ee&&ee.progress(ne?0:1)&&se&&ee.pause()},_callback=function(ee,ne){if(ee.enabled){var se=ee._ctx?ee._ctx.add(function(){return ne(ee)}):ne(ee);se&&se.totalTime&&(ee.callbackAnimation=se)}},_abs$1=Math.abs,_left="left",_top="top",_right="right",_bottom="bottom",_width="width",_height="height",_Right="Right",_Left="Left",_Top="Top",_Bottom="Bottom",_padding="padding",_margin="margin",_Width="Width",_Height="Height",_px="px",_getComputedStyle=function(ee){return _win.getComputedStyle(ee)},_makePositionable=function(ee){var ne=_getComputedStyle(ee).position;ee.style.position=ne==="absolute"||ne==="fixed"?ne:"relative"},_setDefaults=function(ee,ne){for(var se in ne)se in ee||(ee[se]=ne[se]);return ee},_getBounds=function(ee,ne){var se=ne&&_getComputedStyle(ee)[_transformProp]!=="matrix(1, 0, 0, 1, 0, 0)"&&gsap$1.to(ee,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),ae=ee.getBoundingClientRect();return se&&se.progress(0).kill(),ae},_getSize=function(ee,ne){var se=ne.d2;return ee["offset"+se]||ee["client"+se]||0},_getLabelRatioArray=function(ee){var ne=[],se=ee.labels,ae=ee.duration(),ue;for(ue in se)ne.push(se[ue]/ae);return ne},_getClosestLabel=function(ee){return function(ne){return gsap$1.utils.snap(_getLabelRatioArray(ee),ne)}},_snapDirectional=function(ee){var ne=gsap$1.utils.snap(ee),se=Array.isArray(ee)&&ee.slice(0).sort(function(ae,ue){return ae-ue});return se?function(ae,ue,de){de===void 0&&(de=.001);var oe;if(!ue)return ne(ae);if(ue>0){for(ae-=de,oe=0;oe<se.length;oe++)if(se[oe]>=ae)return se[oe];return se[oe-1]}else for(oe=se.length,ae+=de;oe--;)if(se[oe]<=ae)return se[oe];return se[0]}:function(ae,ue,de){de===void 0&&(de=.001);var oe=ne(ae);return!ue||Math.abs(oe-ae)<de||oe-ae<0==ue<0?oe:ne(ue<0?ae-ee:ae+ee)}},_getLabelAtDirection=function(ee){return function(ne,se){return _snapDirectional(_getLabelRatioArray(ee))(ne,se.direction)}},_multiListener=function(ee,ne,se,ae){return se.split(",").forEach(function(ue){return ee(ne,ue,ae)})},_addListener=function(ee,ne,se,ae,ue){return ee.addEventListener(ne,se,{passive:!ae,capture:!!ue})},_removeListener=function(ee,ne,se,ae){return ee.removeEventListener(ne,se,!!ae)},_wheelListener=function(ee,ne,se){se=se&&se.wheelHandler,se&&(ee(ne,"wheel",se),ee(ne,"touchmove",se))},_markerDefaults={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},_defaults$1={toggleActions:"play",anticipatePin:0},_keywords={top:0,left:0,center:.5,bottom:1,right:1},_offsetToPx=function(ee,ne){if(_isString(ee)){var se=ee.indexOf("="),ae=~se?+(ee.charAt(se-1)+1)*parseFloat(ee.substr(se+1)):0;~se&&(ee.indexOf("%")>se&&(ae*=ne/100),ee=ee.substr(0,se-1)),ee=ae+(ee in _keywords?_keywords[ee]*ne:~ee.indexOf("%")?parseFloat(ee)*ne/100:parseFloat(ee)||0)}return ee},_createMarker=function(ee,ne,se,ae,ue,de,oe,me){var ve=ue.startColor,Ee=ue.endColor,Pe=ue.fontSize,ye=ue.indent,Te=ue.fontWeight,Ae=_doc.createElement("div"),Ce=_isViewport(se)||_getProxyProp(se,"pinType")==="fixed",De=ee.indexOf("scroller")!==-1,Ie=Ce?_body:se,ze=ee.indexOf("start")!==-1,Re=ze?ve:Ee,Oe="border-color:"+Re+";font-size:"+Pe+";color:"+Re+";font-weight:"+Te+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return Oe+="position:"+((De||me)&&Ce?"fixed;":"absolute;"),(De||me||!Ce)&&(Oe+=(ae===_vertical?_right:_bottom)+":"+(de+parseFloat(ye))+"px;"),oe&&(Oe+="box-sizing:border-box;text-align:left;width:"+oe.offsetWidth+"px;"),Ae._isStart=ze,Ae.setAttribute("class","gsap-marker-"+ee+(ne?" marker-"+ne:"")),Ae.style.cssText=Oe,Ae.innerText=ne||ne===0?ee+"-"+ne:ee,Ie.children[0]?Ie.insertBefore(Ae,Ie.children[0]):Ie.appendChild(Ae),Ae._offset=Ae["offset"+ae.op.d2],_positionMarker(Ae,0,ae,ze),Ae},_positionMarker=function(ee,ne,se,ae){var ue={display:"block"},de=se[ae?"os2":"p2"],oe=se[ae?"p2":"os2"];ee._isFlipped=ae,ue[se.a+"Percent"]=ae?-100:0,ue[se.a]=ae?"1px":0,ue["border"+de+_Width]=1,ue["border"+oe+_Width]=0,ue[se.p]=ne+"px",gsap$1.set(ee,ue)},_triggers=[],_ids={},_rafID,_sync=function(){return _getTime()-_lastScrollTime>34&&(_rafID||(_rafID=requestAnimationFrame(_updateAll)))},_onScroll=function(){(!_normalizer||!_normalizer.isPressed||_normalizer.startX>_body.clientWidth)&&(_scrollers.cache++,_normalizer?_rafID||(_rafID=requestAnimationFrame(_updateAll)):_updateAll(),_lastScrollTime||_dispatch("scrollStart"),_lastScrollTime=_getTime())},_setBaseDimensions=function(){_baseScreenWidth=_win.innerWidth,_baseScreenHeight=_win.innerHeight},_onResize=function(ee){_scrollers.cache++,(ee===!0||!_refreshing&&!_ignoreResize&&!_doc.fullscreenElement&&!_doc.webkitFullscreenElement&&(!_ignoreMobileResize||_baseScreenWidth!==_win.innerWidth||Math.abs(_win.innerHeight-_baseScreenHeight)>_win.innerHeight*.25))&&_resizeDelay.restart(!0)},_listeners={},_emptyArray=[],_softRefresh=function te(){return _removeListener(ScrollTrigger,"scrollEnd",te)||_refreshAll(!0)},_dispatch=function(ee){return _listeners[ee]&&_listeners[ee].map(function(ne){return ne()})||_emptyArray},_savedStyles=[],_revertRecorded=function(ee){for(var ne=0;ne<_savedStyles.length;ne+=5)(!ee||_savedStyles[ne+4]&&_savedStyles[ne+4].query===ee)&&(_savedStyles[ne].style.cssText=_savedStyles[ne+1],_savedStyles[ne].getBBox&&_savedStyles[ne].setAttribute("transform",_savedStyles[ne+2]||""),_savedStyles[ne+3].uncache=1)},_revertAll=function(ee,ne){var se;for(_i=0;_i<_triggers.length;_i++)se=_triggers[_i],se&&(!ne||se._ctx===ne)&&(ee?se.kill(1):se.revert(!0,!0));_isReverted=!0,ne&&_revertRecorded(ne),ne||_dispatch("revert")},_clearScrollMemory=function(ee,ne){_scrollers.cache++,(ne||!_refreshingAll)&&_scrollers.forEach(function(se){return _isFunction(se)&&se.cacheID++&&(se.rec=0)}),_isString(ee)&&(_win.history.scrollRestoration=_scrollRestoration=ee)},_refreshingAll,_refreshID=0,_queueRefreshID,_queueRefreshAll=function(){if(_queueRefreshID!==_refreshID){var ee=_queueRefreshID=_refreshID;requestAnimationFrame(function(){return ee===_refreshID&&_refreshAll(!0)})}},_refresh100vh=function(){_body.appendChild(_div100vh),_100vh=!_normalizer&&_div100vh.offsetHeight||_win.innerHeight,_body.removeChild(_div100vh)},_hideAllMarkers=function(ee){return _toArray(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(ne){return ne.style.display=ee?"none":"block"})},_refreshAll=function(ee,ne){if(_docEl=_doc.documentElement,_body=_doc.body,_root=[_win,_doc,_docEl,_body],_lastScrollTime&&!ee&&!_isReverted){_addListener(ScrollTrigger,"scrollEnd",_softRefresh);return}_refresh100vh(),_refreshingAll=ScrollTrigger.isRefreshing=!0,_scrollers.forEach(function(ae){return _isFunction(ae)&&++ae.cacheID&&(ae.rec=ae())});var se=_dispatch("refreshInit");_sort&&ScrollTrigger.sort(),ne||_revertAll(),_scrollers.forEach(function(ae){_isFunction(ae)&&(ae.smooth&&(ae.target.style.scrollBehavior="auto"),ae(0))}),_triggers.slice(0).forEach(function(ae){return ae.refresh()}),_isReverted=!1,_triggers.forEach(function(ae){if(ae._subPinOffset&&ae.pin){var ue=ae.vars.horizontal?"offsetWidth":"offsetHeight",de=ae.pin[ue];ae.revert(!0,1),ae.adjustPinSpacing(ae.pin[ue]-de),ae.refresh()}}),_clampingMax=1,_hideAllMarkers(!0),_triggers.forEach(function(ae){var ue=_maxScroll(ae.scroller,ae._dir),de=ae.vars.end==="max"||ae._endClamp&&ae.end>ue,oe=ae._startClamp&&ae.start>=ue;(de||oe)&&ae.setPositions(oe?ue-1:ae.start,de?Math.max(oe?ue:ae.start+1,ue):ae.end,!0)}),_hideAllMarkers(!1),_clampingMax=0,se.forEach(function(ae){return ae&&ae.render&&ae.render(-1)}),_scrollers.forEach(function(ae){_isFunction(ae)&&(ae.smooth&&requestAnimationFrame(function(){return ae.target.style.scrollBehavior="smooth"}),ae.rec&&ae(ae.rec))}),_clearScrollMemory(_scrollRestoration,1),_resizeDelay.pause(),_refreshID++,_refreshingAll=2,_updateAll(2),_triggers.forEach(function(ae){return _isFunction(ae.vars.onRefresh)&&ae.vars.onRefresh(ae)}),_refreshingAll=ScrollTrigger.isRefreshing=!1,_dispatch("refresh")},_lastScroll=0,_direction=1,_primary,_updateAll=function(ee){if(ee===2||!_refreshingAll&&!_isReverted){ScrollTrigger.isUpdating=!0,_primary&&_primary.update(0);var ne=_triggers.length,se=_getTime(),ae=se-_time1>=50,ue=ne&&_triggers[0].scroll();if(_direction=_lastScroll>ue?-1:1,_refreshingAll||(_lastScroll=ue),ae&&(_lastScrollTime&&!_pointerIsDown&&se-_lastScrollTime>200&&(_lastScrollTime=0,_dispatch("scrollEnd")),_time2=_time1,_time1=se),_direction<0){for(_i=ne;_i-- >0;)_triggers[_i]&&_triggers[_i].update(0,ae);_direction=1}else for(_i=0;_i<ne;_i++)_triggers[_i]&&_triggers[_i].update(0,ae);ScrollTrigger.isUpdating=!1}_rafID=0},_propNamesToCopy=[_left,_top,_bottom,_right,_margin+_Bottom,_margin+_Right,_margin+_Top,_margin+_Left,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],_stateProps=_propNamesToCopy.concat([_width,_height,"boxSizing","max"+_Width,"max"+_Height,"position",_margin,_padding,_padding+_Top,_padding+_Right,_padding+_Bottom,_padding+_Left]),_swapPinOut=function(ee,ne,se){_setState(se);var ae=ee._gsap;if(ae.spacerIsNative)_setState(ae.spacerState);else if(ee._gsap.swappedIn){var ue=ne.parentNode;ue&&(ue.insertBefore(ee,ne),ue.removeChild(ne))}ee._gsap.swappedIn=!1},_swapPinIn=function(ee,ne,se,ae){if(!ee._gsap.swappedIn){for(var ue=_propNamesToCopy.length,de=ne.style,oe=ee.style,me;ue--;)me=_propNamesToCopy[ue],de[me]=se[me];de.position=se.position==="absolute"?"absolute":"relative",se.display==="inline"&&(de.display="inline-block"),oe[_bottom]=oe[_right]="auto",de.flexBasis=se.flexBasis||"auto",de.overflow="visible",de.boxSizing="border-box",de[_width]=_getSize(ee,_horizontal)+_px,de[_height]=_getSize(ee,_vertical)+_px,de[_padding]=oe[_margin]=oe[_top]=oe[_left]="0",_setState(ae),oe[_width]=oe["max"+_Width]=se[_width],oe[_height]=oe["max"+_Height]=se[_height],oe[_padding]=se[_padding],ee.parentNode!==ne&&(ee.parentNode.insertBefore(ne,ee),ne.appendChild(ee)),ee._gsap.swappedIn=!0}},_capsExp=/([A-Z])/g,_setState=function(ee){if(ee){var ne=ee.t.style,se=ee.length,ae=0,ue,de;for((ee.t._gsap||gsap$1.core.getCache(ee.t)).uncache=1;ae<se;ae+=2)de=ee[ae+1],ue=ee[ae],de?ne[ue]=de:ne[ue]&&ne.removeProperty(ue.replace(_capsExp,"-$1").toLowerCase())}},_getState=function(ee){for(var ne=_stateProps.length,se=ee.style,ae=[],ue=0;ue<ne;ue++)ae.push(_stateProps[ue],se[_stateProps[ue]]);return ae.t=ee,ae},_copyState=function(ee,ne,se){for(var ae=[],ue=ee.length,de=se?8:0,oe;de<ue;de+=2)oe=ee[de],ae.push(oe,oe in ne?ne[oe]:ee[de+1]);return ae.t=ee.t,ae},_winOffsets={left:0,top:0},_parsePosition=function(ee,ne,se,ae,ue,de,oe,me,ve,Ee,Pe,ye,Te,Ae){_isFunction(ee)&&(ee=ee(me)),_isString(ee)&&ee.substr(0,3)==="max"&&(ee=ye+(ee.charAt(4)==="="?_offsetToPx("0"+ee.substr(3),se):0));var Ce=Te?Te.time():0,De,Ie,ze;if(Te&&Te.seek(0),isNaN(ee)||(ee=+ee),_isNumber$1(ee))Te&&(ee=gsap$1.utils.mapRange(Te.scrollTrigger.start,Te.scrollTrigger.end,0,ye,ee)),oe&&_positionMarker(oe,se,ae,!0);else{_isFunction(ne)&&(ne=ne(me));var Re=(ee||"0").split(" "),Oe,qe,Ze,Ue;ze=_getTarget(ne,me)||_body,Oe=_getBounds(ze)||{},(!Oe||!Oe.left&&!Oe.top)&&_getComputedStyle(ze).display==="none"&&(Ue=ze.style.display,ze.style.display="block",Oe=_getBounds(ze),Ue?ze.style.display=Ue:ze.style.removeProperty("display")),qe=_offsetToPx(Re[0],Oe[ae.d]),Ze=_offsetToPx(Re[1]||"0",se),ee=Oe[ae.p]-ve[ae.p]-Ee+qe+ue-Ze,oe&&_positionMarker(oe,Ze,ae,se-Ze<20||oe._isStart&&Ze>20),se-=se-Ze}if(Ae&&(me[Ae]=ee||-.001,ee<0&&(ee=0)),de){var Ye=ee+se,ct=de._isStart;De="scroll"+ae.d2,_positionMarker(de,Ye,ae,ct&&Ye>20||!ct&&(Pe?Math.max(_body[De],_docEl[De]):de.parentNode[De])<=Ye+1),Pe&&(ve=_getBounds(oe),Pe&&(de.style[ae.op.p]=ve[ae.op.p]-ae.op.m-de._offset+_px))}return Te&&ze&&(De=_getBounds(ze),Te.seek(ye),Ie=_getBounds(ze),Te._caScrollDist=De[ae.p]-Ie[ae.p],ee=ee/Te._caScrollDist*ye),Te&&Te.seek(Ce),Te?ee:Math.round(ee)},_prefixExp=/(webkit|moz|length|cssText|inset)/i,_reparent=function(ee,ne,se,ae){if(ee.parentNode!==ne){var ue=ee.style,de,oe;if(ne===_body){ee._stOrig=ue.cssText,oe=_getComputedStyle(ee);for(de in oe)!+de&&!_prefixExp.test(de)&&oe[de]&&typeof ue[de]=="string"&&de!=="0"&&(ue[de]=oe[de]);ue.top=se,ue.left=ae}else ue.cssText=ee._stOrig;gsap$1.core.getCache(ee).uncache=1,ne.appendChild(ee)}},_interruptionTracker=function(ee,ne,se){var ae=ne,ue=ae;return function(de){var oe=Math.round(ee());return oe!==ae&&oe!==ue&&Math.abs(oe-ae)>3&&Math.abs(oe-ue)>3&&(de=oe,se&&se()),ue=ae,ae=Math.round(de),ae}},_shiftMarker=function(ee,ne,se){var ae={};ae[ne.p]="+="+se,gsap$1.set(ee,ae)},_getTweenCreator=function(ee,ne){var se=_getScrollFunc(ee,ne),ae="_scroll"+ne.p2,ue=function de(oe,me,ve,Ee,Pe){var ye=de.tween,Te=me.onComplete,Ae={};ve=ve||se();var Ce=_interruptionTracker(se,ve,function(){ye.kill(),de.tween=0});return Pe=Ee&&Pe||0,Ee=Ee||oe-ve,ye&&ye.kill(),me[ae]=oe,me.inherit=!1,me.modifiers=Ae,Ae[ae]=function(){return Ce(ve+Ee*ye.ratio+Pe*ye.ratio*ye.ratio)},me.onUpdate=function(){_scrollers.cache++,de.tween&&_updateAll()},me.onComplete=function(){de.tween=0,Te&&Te.call(ye)},ye=de.tween=gsap$1.to(ee,me),ye};return ee[ae]=se,se.wheelHandler=function(){return ue.tween&&ue.tween.kill()&&(ue.tween=0)},_addListener(ee,"wheel",se.wheelHandler),ScrollTrigger.isTouch&&_addListener(ee,"touchmove",se.wheelHandler),ue},ScrollTrigger=function(){function te(ne,se){_coreInitted$1||te.register(gsap$1)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),_context(this),this.init(ne,se)}var ee=te.prototype;return ee.init=function(se,ae){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!_enabled){this.update=this.refresh=this.kill=_passThrough;return}se=_setDefaults(_isString(se)||_isNumber$1(se)||se.nodeType?{trigger:se}:se,_defaults$1);var ue=se,de=ue.onUpdate,oe=ue.toggleClass,me=ue.id,ve=ue.onToggle,Ee=ue.onRefresh,Pe=ue.scrub,ye=ue.trigger,Te=ue.pin,Ae=ue.pinSpacing,Ce=ue.invalidateOnRefresh,De=ue.anticipatePin,Ie=ue.onScrubComplete,ze=ue.onSnapComplete,Re=ue.once,Oe=ue.snap,qe=ue.pinReparent,Ze=ue.pinSpacer,Ue=ue.containerAnimation,Ye=ue.fastScrollEnd,ct=ue.preventOverlaps,at=se.horizontal||se.containerAnimation&&se.horizontal!==!1?_horizontal:_vertical,ft=!Pe&&Pe!==0,pt=_getTarget(se.scroller||_win),Mt=gsap$1.core.getCache(pt),At=_isViewport(pt),_t=("pinType"in se?se.pinType:_getProxyProp(pt,"pinType")||At&&"fixed")==="fixed",Qe=[se.onEnter,se.onLeave,se.onEnterBack,se.onLeaveBack],it=ft&&se.toggleActions.split(" "),Ge="markers"in se?se.markers:_defaults$1.markers,je=At?0:parseFloat(_getComputedStyle(pt)["border"+at.p2+_Width])||0,Ke=this,lt=se.onRefreshInit&&function(){return se.onRefreshInit(Ke)},Bt=_getSizeFunc(pt,At,at),Xt=_getOffsetsFunc(pt,At),Gt=0,lr=0,yr=0,Lr=_getScrollFunc(pt,at),Nr,$r,Gr,Zr,Dr,dr,fr,qr,li,Jt,gi,ci,hi,ri,Ci,Ei,Mi,wi,Ft,er,sr,ir,mt,tt,rt,dt,yt,wt,It,qt,Dt,Vt,tr,Zt,Ir,Ot,zr,Xr,kr;if(Ke._startClamp=Ke._endClamp=!1,Ke._dir=at,De*=45,Ke.scroller=pt,Ke.scroll=Ue?Ue.time.bind(Ue):Lr,Zr=Lr(),Ke.vars=se,ae=ae||se.animation,"refreshPriority"in se&&(_sort=1,se.refreshPriority===-9999&&(_primary=Ke)),Mt.tweenScroll=Mt.tweenScroll||{top:_getTweenCreator(pt,_vertical),left:_getTweenCreator(pt,_horizontal)},Ke.tweenTo=Nr=Mt.tweenScroll[at.p],Ke.scrubDuration=function(ur){tr=_isNumber$1(ur)&&ur,tr?Vt?Vt.duration(ur):Vt=gsap$1.to(ae,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:tr,paused:!0,onComplete:function(){return Ie&&Ie(Ke)}}):(Vt&&Vt.progress(1).kill(),Vt=0)},ae&&(ae.vars.lazy=!1,ae._initted&&!Ke.isReverted||ae.vars.immediateRender!==!1&&se.immediateRender!==!1&&ae.duration()&&ae.render(0,!0,!0),Ke.animation=ae.pause(),ae.scrollTrigger=Ke,Ke.scrubDuration(Pe),qt=0,me||(me=ae.vars.id)),Oe&&((!_isObject(Oe)||Oe.push)&&(Oe={snapTo:Oe}),"scrollBehavior"in _body.style&&gsap$1.set(At?[_body,_docEl]:pt,{scrollBehavior:"auto"}),_scrollers.forEach(function(ur){return _isFunction(ur)&&ur.target===(At?_doc.scrollingElement||_docEl:pt)&&(ur.smooth=!1)}),Gr=_isFunction(Oe.snapTo)?Oe.snapTo:Oe.snapTo==="labels"?_getClosestLabel(ae):Oe.snapTo==="labelsDirectional"?_getLabelAtDirection(ae):Oe.directional!==!1?function(ur,cr){return _snapDirectional(Oe.snapTo)(ur,_getTime()-lr<500?0:cr.direction)}:gsap$1.utils.snap(Oe.snapTo),Zt=Oe.duration||{min:.1,max:2},Zt=_isObject(Zt)?_clamp(Zt.min,Zt.max):_clamp(Zt,Zt),Ir=gsap$1.delayedCall(Oe.delay||tr/2||.1,function(){var ur=Lr(),cr=_getTime()-lr<500,nr=Nr.tween;if((cr||Math.abs(Ke.getVelocity())<10)&&!nr&&!_pointerIsDown&&Gt!==ur){var hr=(ur-dr)/ri,jt=ae&&!ft?ae.totalProgress():hr,Qt=cr?0:(jt-Dt)/(_getTime()-_time2)*1e3||0,Mr=gsap$1.utils.clamp(-hr,1-hr,_abs$1(Qt/2)*Qt/.185),pi=hr+(Oe.inertia===!1?0:Mr),Yr,or,wr=Oe,Wr=wr.onStart,vi=wr.onInterrupt,Ni=wr.onComplete;if(Yr=Gr(pi,Ke),_isNumber$1(Yr)||(Yr=pi),or=Math.max(0,Math.round(dr+Yr*ri)),ur<=fr&&ur>=dr&&or!==ur){if(nr&&!nr._initted&&nr.data<=_abs$1(or-ur))return;Oe.inertia===!1&&(Mr=Yr-hr),Nr(or,{duration:Zt(_abs$1(Math.max(_abs$1(pi-jt),_abs$1(Yr-jt))*.185/Qt/.05||0)),ease:Oe.ease||"power3",data:_abs$1(or-ur),onInterrupt:function(){return Ir.restart(!0)&&vi&&vi(Ke)},onComplete:function(){Ke.update(),Gt=Lr(),ae&&!ft&&(Vt?Vt.resetTo("totalProgress",Yr,ae._tTime/ae._tDur):ae.progress(Yr)),qt=Dt=ae&&!ft?ae.totalProgress():Ke.progress,ze&&ze(Ke),Ni&&Ni(Ke)}},ur,Mr*ri,or-ur-Mr*ri),Wr&&Wr(Ke,Nr.tween)}}else Ke.isActive&&Gt!==ur&&Ir.restart(!0)}).pause()),me&&(_ids[me]=Ke),ye=Ke.trigger=_getTarget(ye||Te!==!0&&Te),kr=ye&&ye._gsap&&ye._gsap.stRevert,kr&&(kr=kr(Ke)),Te=Te===!0?ye:_getTarget(Te),_isString(oe)&&(oe={targets:ye,className:oe}),Te&&(Ae===!1||Ae===_margin||(Ae=!Ae&&Te.parentNode&&Te.parentNode.style&&_getComputedStyle(Te.parentNode).display==="flex"?!1:_padding),Ke.pin=Te,$r=gsap$1.core.getCache(Te),$r.spacer?Ci=$r.pinState:(Ze&&(Ze=_getTarget(Ze),Ze&&!Ze.nodeType&&(Ze=Ze.current||Ze.nativeElement),$r.spacerIsNative=!!Ze,Ze&&($r.spacerState=_getState(Ze))),$r.spacer=wi=Ze||_doc.createElement("div"),wi.classList.add("pin-spacer"),me&&wi.classList.add("pin-spacer-"+me),$r.pinState=Ci=_getState(Te)),se.force3D!==!1&&gsap$1.set(Te,{force3D:!0}),Ke.spacer=wi=$r.spacer,It=_getComputedStyle(Te),tt=It[Ae+at.os2],er=gsap$1.getProperty(Te),sr=gsap$1.quickSetter(Te,at.a,_px),_swapPinIn(Te,wi,It),Mi=_getState(Te)),Ge){ci=_isObject(Ge)?_setDefaults(Ge,_markerDefaults):_markerDefaults,Jt=_createMarker("scroller-start",me,pt,at,ci,0),gi=_createMarker("scroller-end",me,pt,at,ci,0,Jt),Ft=Jt["offset"+at.op.d2];var ar=_getTarget(_getProxyProp(pt,"content")||pt);qr=this.markerStart=_createMarker("start",me,ar,at,ci,Ft,0,Ue),li=this.markerEnd=_createMarker("end",me,ar,at,ci,Ft,0,Ue),Ue&&(Xr=gsap$1.quickSetter([qr,li],at.a,_px)),!_t&&!(_proxies.length&&_getProxyProp(pt,"fixedMarkers")===!0)&&(_makePositionable(At?_body:pt),gsap$1.set([Jt,gi],{force3D:!0}),dt=gsap$1.quickSetter(Jt,at.a,_px),wt=gsap$1.quickSetter(gi,at.a,_px))}if(Ue){var mr=Ue.vars.onUpdate,gr=Ue.vars.onUpdateParams;Ue.eventCallback("onUpdate",function(){Ke.update(0,0,1),mr&&mr.apply(Ue,gr||[])})}if(Ke.previous=function(){return _triggers[_triggers.indexOf(Ke)-1]},Ke.next=function(){return _triggers[_triggers.indexOf(Ke)+1]},Ke.revert=function(ur,cr){if(!cr)return Ke.kill(!0);var nr=ur!==!1||!Ke.enabled,hr=_refreshing;nr!==Ke.isReverted&&(nr&&(Ot=Math.max(Lr(),Ke.scroll.rec||0),yr=Ke.progress,zr=ae&&ae.progress()),qr&&[qr,li,Jt,gi].forEach(function(jt){return jt.style.display=nr?"none":"block"}),nr&&(_refreshing=Ke,Ke.update(nr)),Te&&(!qe||!Ke.isActive)&&(nr?_swapPinOut(Te,wi,Ci):_swapPinIn(Te,wi,_getComputedStyle(Te),rt)),nr||Ke.update(nr),_refreshing=hr,Ke.isReverted=nr)},Ke.refresh=function(ur,cr,nr,hr){if(!((_refreshing||!Ke.enabled)&&!cr)){if(Te&&ur&&_lastScrollTime){_addListener(te,"scrollEnd",_softRefresh);return}!_refreshingAll&&lt&&lt(Ke),_refreshing=Ke,Nr.tween&&!nr&&(Nr.tween.kill(),Nr.tween=0),Vt&&Vt.pause(),Ce&&ae&&(ae.revert({kill:!1}).invalidate(),ae.getChildren&&ae.getChildren(!0,!0,!1).forEach(function(Pi){return Pi.vars.immediateRender&&Pi.render(0,!0,!0)})),Ke.isReverted||Ke.revert(!0,!0),Ke._subPinOffset=!1;var jt=Bt(),Qt=Xt(),Mr=Ue?Ue.duration():_maxScroll(pt,at),pi=ri<=.01||!ri,Yr=0,or=hr||0,wr=_isObject(nr)?nr.end:se.end,Wr=se.endTrigger||ye,vi=_isObject(nr)?nr.start:se.start||(se.start===0||!ye?0:Te?"0 0":"0 100%"),Ni=Ke.pinnedContainer=se.pinnedContainer&&_getTarget(se.pinnedContainer,Ke),$i=ye&&Math.max(0,_triggers.indexOf(Ke))||0,Fr=$i,ki,qi,Ai,Ri,oi,ni,Xi,si,Qr,En,Di,ji,Yi;for(Ge&&_isObject(nr)&&(ji=gsap$1.getProperty(Jt,at.p),Yi=gsap$1.getProperty(gi,at.p));Fr-- >0;)ni=_triggers[Fr],ni.end||ni.refresh(0,1)||(_refreshing=Ke),Xi=ni.pin,Xi&&(Xi===ye||Xi===Te||Xi===Ni)&&!ni.isReverted&&(En||(En=[]),En.unshift(ni),ni.revert(!0,!0)),ni!==_triggers[Fr]&&($i--,Fr--);for(_isFunction(vi)&&(vi=vi(Ke)),vi=_parseClamp(vi,"start",Ke),dr=_parsePosition(vi,ye,jt,at,Lr(),qr,Jt,Ke,Qt,je,_t,Mr,Ue,Ke._startClamp&&"_startClamp")||(Te?-.001:0),_isFunction(wr)&&(wr=wr(Ke)),_isString(wr)&&!wr.indexOf("+=")&&(~wr.indexOf(" ")?wr=(_isString(vi)?vi.split(" ")[0]:"")+wr:(Yr=_offsetToPx(wr.substr(2),jt),wr=_isString(vi)?vi:(Ue?gsap$1.utils.mapRange(0,Ue.duration(),Ue.scrollTrigger.start,Ue.scrollTrigger.end,dr):dr)+Yr,Wr=ye)),wr=_parseClamp(wr,"end",Ke),fr=Math.max(dr,_parsePosition(wr||(Wr?"100% 0":Mr),Wr,jt,at,Lr()+Yr,li,gi,Ke,Qt,je,_t,Mr,Ue,Ke._endClamp&&"_endClamp"))||-.001,Yr=0,Fr=$i;Fr--;)ni=_triggers[Fr],Xi=ni.pin,Xi&&ni.start-ni._pinPush<=dr&&!Ue&&ni.end>0&&(ki=ni.end-(Ke._startClamp?Math.max(0,ni.start):ni.start),(Xi===ye&&ni.start-ni._pinPush<dr||Xi===Ni)&&isNaN(vi)&&(Yr+=ki*(1-ni.progress)),Xi===Te&&(or+=ki));if(dr+=Yr,fr+=Yr,Ke._startClamp&&(Ke._startClamp+=Yr),Ke._endClamp&&!_refreshingAll&&(Ke._endClamp=fr||-.001,fr=Math.min(fr,_maxScroll(pt,at))),ri=fr-dr||(dr-=.01)&&.001,pi&&(yr=gsap$1.utils.clamp(0,1,gsap$1.utils.normalize(dr,fr,Ot))),Ke._pinPush=or,qr&&Yr&&(ki={},ki[at.a]="+="+Yr,Ni&&(ki[at.p]="-="+Lr()),gsap$1.set([qr,li],ki)),Te&&!(_clampingMax&&Ke.end>=_maxScroll(pt,at)))ki=_getComputedStyle(Te),Ri=at===_vertical,Ai=Lr(),ir=parseFloat(er(at.a))+or,!Mr&&fr>1&&(Di=(At?_doc.scrollingElement||_docEl:pt).style,Di={style:Di,value:Di["overflow"+at.a.toUpperCase()]},At&&_getComputedStyle(_body)["overflow"+at.a.toUpperCase()]!=="scroll"&&(Di.style["overflow"+at.a.toUpperCase()]="scroll")),_swapPinIn(Te,wi,ki),Mi=_getState(Te),qi=_getBounds(Te,!0),si=_t&&_getScrollFunc(pt,Ri?_horizontal:_vertical)(),Ae?(rt=[Ae+at.os2,ri+or+_px],rt.t=wi,Fr=Ae===_padding?_getSize(Te,at)+ri+or:0,Fr&&(rt.push(at.d,Fr+_px),wi.style.flexBasis!=="auto"&&(wi.style.flexBasis=Fr+_px)),_setState(rt),Ni&&_triggers.forEach(function(Pi){Pi.pin===Ni&&Pi.vars.pinSpacing!==!1&&(Pi._subPinOffset=!0)}),_t&&Lr(Ot)):(Fr=_getSize(Te,at),Fr&&wi.style.flexBasis!=="auto"&&(wi.style.flexBasis=Fr+_px)),_t&&(oi={top:qi.top+(Ri?Ai-dr:si)+_px,left:qi.left+(Ri?si:Ai-dr)+_px,boxSizing:"border-box",position:"fixed"},oi[_width]=oi["max"+_Width]=Math.ceil(qi.width)+_px,oi[_height]=oi["max"+_Height]=Math.ceil(qi.height)+_px,oi[_margin]=oi[_margin+_Top]=oi[_margin+_Right]=oi[_margin+_Bottom]=oi[_margin+_Left]="0",oi[_padding]=ki[_padding],oi[_padding+_Top]=ki[_padding+_Top],oi[_padding+_Right]=ki[_padding+_Right],oi[_padding+_Bottom]=ki[_padding+_Bottom],oi[_padding+_Left]=ki[_padding+_Left],Ei=_copyState(Ci,oi,qe),_refreshingAll&&Lr(0)),ae?(Qr=ae._initted,_suppressOverwrites(1),ae.render(ae.duration(),!0,!0),mt=er(at.a)-ir+ri+or,yt=Math.abs(ri-mt)>1,_t&&yt&&Ei.splice(Ei.length-2,2),ae.render(0,!0,!0),Qr||ae.invalidate(!0),ae.parent||ae.totalTime(ae.totalTime()),_suppressOverwrites(0)):mt=ri,Di&&(Di.value?Di.style["overflow"+at.a.toUpperCase()]=Di.value:Di.style.removeProperty("overflow-"+at.a));else if(ye&&Lr()&&!Ue)for(qi=ye.parentNode;qi&&qi!==_body;)qi._pinOffset&&(dr-=qi._pinOffset,fr-=qi._pinOffset),qi=qi.parentNode;En&&En.forEach(function(Pi){return Pi.revert(!1,!0)}),Ke.start=dr,Ke.end=fr,Zr=Dr=_refreshingAll?Ot:Lr(),!Ue&&!_refreshingAll&&(Zr<Ot&&Lr(Ot),Ke.scroll.rec=0),Ke.revert(!1,!0),lr=_getTime(),Ir&&(Gt=-1,Ir.restart(!0)),_refreshing=0,ae&&ft&&(ae._initted||zr)&&ae.progress()!==zr&&ae.progress(zr||0,!0).render(ae.time(),!0,!0),(pi||yr!==Ke.progress||Ue||Ce||ae&&!ae._initted)&&(ae&&!ft&&(ae._initted||yr||ae.vars.immediateRender!==!1)&&ae.totalProgress(Ue&&dr<-.001&&!yr?gsap$1.utils.normalize(dr,fr,0):yr,!0),Ke.progress=pi||(Zr-dr)/ri===yr?0:yr),Te&&Ae&&(wi._pinOffset=Math.round(Ke.progress*mt)),Vt&&Vt.invalidate(),isNaN(ji)||(ji-=gsap$1.getProperty(Jt,at.p),Yi-=gsap$1.getProperty(gi,at.p),_shiftMarker(Jt,at,ji),_shiftMarker(qr,at,ji-(hr||0)),_shiftMarker(gi,at,Yi),_shiftMarker(li,at,Yi-(hr||0))),pi&&!_refreshingAll&&Ke.update(),Ee&&!_refreshingAll&&!hi&&(hi=!0,Ee(Ke),hi=!1)}},Ke.getVelocity=function(){return(Lr()-Dr)/(_getTime()-_time2)*1e3||0},Ke.endAnimation=function(){_endAnimation(Ke.callbackAnimation),ae&&(Vt?Vt.progress(1):ae.paused()?ft||_endAnimation(ae,Ke.direction<0,1):_endAnimation(ae,ae.reversed()))},Ke.labelToScroll=function(ur){return ae&&ae.labels&&(dr||Ke.refresh()||dr)+ae.labels[ur]/ae.duration()*ri||0},Ke.getTrailing=function(ur){var cr=_triggers.indexOf(Ke),nr=Ke.direction>0?_triggers.slice(0,cr).reverse():_triggers.slice(cr+1);return(_isString(ur)?nr.filter(function(hr){return hr.vars.preventOverlaps===ur}):nr).filter(function(hr){return Ke.direction>0?hr.end<=dr:hr.start>=fr})},Ke.update=function(ur,cr,nr){if(!(Ue&&!nr&&!ur)){var hr=_refreshingAll===!0?Ot:Ke.scroll(),jt=ur?0:(hr-dr)/ri,Qt=jt<0?0:jt>1?1:jt||0,Mr=Ke.progress,pi,Yr,or,wr,Wr,vi,Ni,$i;if(cr&&(Dr=Zr,Zr=Ue?Lr():hr,Oe&&(Dt=qt,qt=ae&&!ft?ae.totalProgress():Qt)),De&&Te&&!_refreshing&&!_startup&&_lastScrollTime&&(!Qt&&dr<hr+(hr-Dr)/(_getTime()-_time2)*De?Qt=1e-4:Qt===1&&fr>hr+(hr-Dr)/(_getTime()-_time2)*De&&(Qt=.9999)),Qt!==Mr&&Ke.enabled){if(pi=Ke.isActive=!!Qt&&Qt<1,Yr=!!Mr&&Mr<1,vi=pi!==Yr,Wr=vi||!!Qt!=!!Mr,Ke.direction=Qt>Mr?1:-1,Ke.progress=Qt,Wr&&!_refreshing&&(or=Qt&&!Mr?0:Qt===1?1:Mr===1?2:3,ft&&(wr=!vi&&it[or+1]!=="none"&&it[or+1]||it[or],$i=ae&&(wr==="complete"||wr==="reset"||wr in ae))),ct&&(vi||$i)&&($i||Pe||!ae)&&(_isFunction(ct)?ct(Ke):Ke.getTrailing(ct).forEach(function(Ai){return Ai.endAnimation()})),ft||(Vt&&!_refreshing&&!_startup?(Vt._dp._time-Vt._start!==Vt._time&&Vt.render(Vt._dp._time-Vt._start),Vt.resetTo?Vt.resetTo("totalProgress",Qt,ae._tTime/ae._tDur):(Vt.vars.totalProgress=Qt,Vt.invalidate().restart())):ae&&ae.totalProgress(Qt,!!(_refreshing&&(lr||ur)))),Te){if(ur&&Ae&&(wi.style[Ae+at.os2]=tt),!_t)sr(_round$2(ir+mt*Qt));else if(Wr){if(Ni=!ur&&Qt>Mr&&fr+1>hr&&hr+1>=_maxScroll(pt,at),qe)if(!ur&&(pi||Ni)){var Fr=_getBounds(Te,!0),ki=hr-dr;_reparent(Te,_body,Fr.top+(at===_vertical?ki:0)+_px,Fr.left+(at===_vertical?0:ki)+_px)}else _reparent(Te,wi);_setState(pi||Ni?Ei:Mi),yt&&Qt<1&&pi||sr(ir+(Qt===1&&!Ni?mt:0))}}Oe&&!Nr.tween&&!_refreshing&&!_startup&&Ir.restart(!0),oe&&(vi||Re&&Qt&&(Qt<1||!_limitCallbacks))&&_toArray(oe.targets).forEach(function(Ai){return Ai.classList[pi||Re?"add":"remove"](oe.className)}),de&&!ft&&!ur&&de(Ke),Wr&&!_refreshing?(ft&&($i&&(wr==="complete"?ae.pause().totalProgress(1):wr==="reset"?ae.restart(!0).pause():wr==="restart"?ae.restart(!0):ae[wr]()),de&&de(Ke)),(vi||!_limitCallbacks)&&(ve&&vi&&_callback(Ke,ve),Qe[or]&&_callback(Ke,Qe[or]),Re&&(Qt===1?Ke.kill(!1,1):Qe[or]=0),vi||(or=Qt===1?1:3,Qe[or]&&_callback(Ke,Qe[or]))),Ye&&!pi&&Math.abs(Ke.getVelocity())>(_isNumber$1(Ye)?Ye:2500)&&(_endAnimation(Ke.callbackAnimation),Vt?Vt.progress(1):_endAnimation(ae,wr==="reverse"?1:!Qt,1))):ft&&de&&!_refreshing&&de(Ke)}if(wt){var qi=Ue?hr/Ue.duration()*(Ue._caScrollDist||0):hr;dt(qi+(Jt._isFlipped?1:0)),wt(qi)}Xr&&Xr(-hr/Ue.duration()*(Ue._caScrollDist||0))}},Ke.enable=function(ur,cr){Ke.enabled||(Ke.enabled=!0,_addListener(pt,"resize",_onResize),At||_addListener(pt,"scroll",_onScroll),lt&&_addListener(te,"refreshInit",lt),ur!==!1&&(Ke.progress=yr=0,Zr=Dr=Gt=Lr()),cr!==!1&&Ke.refresh())},Ke.getTween=function(ur){return ur&&Nr?Nr.tween:Vt},Ke.setPositions=function(ur,cr,nr,hr){if(Ue){var jt=Ue.scrollTrigger,Qt=Ue.duration(),Mr=jt.end-jt.start;ur=jt.start+Mr*ur/Qt,cr=jt.start+Mr*cr/Qt}Ke.refresh(!1,!1,{start:_keepClamp(ur,nr&&!!Ke._startClamp),end:_keepClamp(cr,nr&&!!Ke._endClamp)},hr),Ke.update()},Ke.adjustPinSpacing=function(ur){if(rt&&ur){var cr=rt.indexOf(at.d)+1;rt[cr]=parseFloat(rt[cr])+ur+_px,rt[1]=parseFloat(rt[1])+ur+_px,_setState(rt)}},Ke.disable=function(ur,cr){if(Ke.enabled&&(ur!==!1&&Ke.revert(!0,!0),Ke.enabled=Ke.isActive=!1,cr||Vt&&Vt.pause(),Ot=0,$r&&($r.uncache=1),lt&&_removeListener(te,"refreshInit",lt),Ir&&(Ir.pause(),Nr.tween&&Nr.tween.kill()&&(Nr.tween=0)),!At)){for(var nr=_triggers.length;nr--;)if(_triggers[nr].scroller===pt&&_triggers[nr]!==Ke)return;_removeListener(pt,"resize",_onResize),At||_removeListener(pt,"scroll",_onScroll)}},Ke.kill=function(ur,cr){Ke.disable(ur,cr),Vt&&!cr&&Vt.kill(),me&&delete _ids[me];var nr=_triggers.indexOf(Ke);nr>=0&&_triggers.splice(nr,1),nr===_i&&_direction>0&&_i--,nr=0,_triggers.forEach(function(hr){return hr.scroller===Ke.scroller&&(nr=1)}),nr||_refreshingAll||(Ke.scroll.rec=0),ae&&(ae.scrollTrigger=null,ur&&ae.revert({kill:!1}),cr||ae.kill()),qr&&[qr,li,Jt,gi].forEach(function(hr){return hr.parentNode&&hr.parentNode.removeChild(hr)}),_primary===Ke&&(_primary=0),Te&&($r&&($r.uncache=1),nr=0,_triggers.forEach(function(hr){return hr.pin===Te&&nr++}),nr||($r.spacer=0)),se.onKill&&se.onKill(Ke)},_triggers.push(Ke),Ke.enable(!1,!1),kr&&kr(Ke),ae&&ae.add&&!ri){var Cr=Ke.update;Ke.update=function(){Ke.update=Cr,_scrollers.cache++,dr||fr||Ke.refresh()},gsap$1.delayedCall(.01,Ke.update),ri=.01,dr=fr=0}else Ke.refresh();Te&&_queueRefreshAll()},te.register=function(se){return _coreInitted$1||(gsap$1=se||_getGSAP$1(),_windowExists()&&window.document&&te.enable(),_coreInitted$1=_enabled),_coreInitted$1},te.defaults=function(se){if(se)for(var ae in se)_defaults$1[ae]=se[ae];return _defaults$1},te.disable=function(se,ae){_enabled=0,_triggers.forEach(function(de){return de[ae?"kill":"disable"](se)}),_removeListener(_win,"wheel",_onScroll),_removeListener(_doc,"scroll",_onScroll),clearInterval(_syncInterval),_removeListener(_doc,"touchcancel",_passThrough),_removeListener(_body,"touchstart",_passThrough),_multiListener(_removeListener,_doc,"pointerdown,touchstart,mousedown",_pointerDownHandler),_multiListener(_removeListener,_doc,"pointerup,touchend,mouseup",_pointerUpHandler),_resizeDelay.kill(),_iterateAutoRefresh(_removeListener);for(var ue=0;ue<_scrollers.length;ue+=3)_wheelListener(_removeListener,_scrollers[ue],_scrollers[ue+1]),_wheelListener(_removeListener,_scrollers[ue],_scrollers[ue+2])},te.enable=function(){if(_win=window,_doc=document,_docEl=_doc.documentElement,_body=_doc.body,gsap$1&&(_toArray=gsap$1.utils.toArray,_clamp=gsap$1.utils.clamp,_context=gsap$1.core.context||_passThrough,_suppressOverwrites=gsap$1.core.suppressOverwrites||_passThrough,_scrollRestoration=_win.history.scrollRestoration||"auto",_lastScroll=_win.pageYOffset||0,gsap$1.core.globals("ScrollTrigger",te),_body)){_enabled=1,_div100vh=document.createElement("div"),_div100vh.style.height="100vh",_div100vh.style.position="absolute",_refresh100vh(),_rafBugFix(),Observer$1.register(gsap$1),te.isTouch=Observer$1.isTouch,_fixIOSBug=Observer$1.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),_ignoreMobileResize=Observer$1.isTouch===1,_addListener(_win,"wheel",_onScroll),_root=[_win,_doc,_docEl,_body],gsap$1.matchMedia?(te.matchMedia=function(ve){var Ee=gsap$1.matchMedia(),Pe;for(Pe in ve)Ee.add(Pe,ve[Pe]);return Ee},gsap$1.addEventListener("matchMediaInit",function(){return _revertAll()}),gsap$1.addEventListener("matchMediaRevert",function(){return _revertRecorded()}),gsap$1.addEventListener("matchMedia",function(){_refreshAll(0,1),_dispatch("matchMedia")}),gsap$1.matchMedia().add("(orientation: portrait)",function(){return _setBaseDimensions(),_setBaseDimensions})):console.warn("Requires GSAP 3.11.0 or later"),_setBaseDimensions(),_addListener(_doc,"scroll",_onScroll);var se=_body.hasAttribute("style"),ae=_body.style,ue=ae.borderTopStyle,de=gsap$1.core.Animation.prototype,oe,me;for(de.revert||Object.defineProperty(de,"revert",{value:function(){return this.time(-.01,!0)}}),ae.borderTopStyle="solid",oe=_getBounds(_body),_vertical.m=Math.round(oe.top+_vertical.sc())||0,_horizontal.m=Math.round(oe.left+_horizontal.sc())||0,ue?ae.borderTopStyle=ue:ae.removeProperty("border-top-style"),se||(_body.setAttribute("style",""),_body.removeAttribute("style")),_syncInterval=setInterval(_sync,250),gsap$1.delayedCall(.5,function(){return _startup=0}),_addListener(_doc,"touchcancel",_passThrough),_addListener(_body,"touchstart",_passThrough),_multiListener(_addListener,_doc,"pointerdown,touchstart,mousedown",_pointerDownHandler),_multiListener(_addListener,_doc,"pointerup,touchend,mouseup",_pointerUpHandler),_transformProp=gsap$1.utils.checkPrefix("transform"),_stateProps.push(_transformProp),_coreInitted$1=_getTime(),_resizeDelay=gsap$1.delayedCall(.2,_refreshAll).pause(),_autoRefresh=[_doc,"visibilitychange",function(){var ve=_win.innerWidth,Ee=_win.innerHeight;_doc.hidden?(_prevWidth=ve,_prevHeight=Ee):(_prevWidth!==ve||_prevHeight!==Ee)&&_onResize()},_doc,"DOMContentLoaded",_refreshAll,_win,"load",_refreshAll,_win,"resize",_onResize],_iterateAutoRefresh(_addListener),_triggers.forEach(function(ve){return ve.enable(0,1)}),me=0;me<_scrollers.length;me+=3)_wheelListener(_removeListener,_scrollers[me],_scrollers[me+1]),_wheelListener(_removeListener,_scrollers[me],_scrollers[me+2])}},te.config=function(se){"limitCallbacks"in se&&(_limitCallbacks=!!se.limitCallbacks);var ae=se.syncInterval;ae&&clearInterval(_syncInterval)||(_syncInterval=ae)&&setInterval(_sync,ae),"ignoreMobileResize"in se&&(_ignoreMobileResize=te.isTouch===1&&se.ignoreMobileResize),"autoRefreshEvents"in se&&(_iterateAutoRefresh(_removeListener)||_iterateAutoRefresh(_addListener,se.autoRefreshEvents||"none"),_ignoreResize=(se.autoRefreshEvents+"").indexOf("resize")===-1)},te.scrollerProxy=function(se,ae){var ue=_getTarget(se),de=_scrollers.indexOf(ue),oe=_isViewport(ue);~de&&_scrollers.splice(de,oe?6:2),ae&&(oe?_proxies.unshift(_win,ae,_body,ae,_docEl,ae):_proxies.unshift(ue,ae))},te.clearMatchMedia=function(se){_triggers.forEach(function(ae){return ae._ctx&&ae._ctx.query===se&&ae._ctx.kill(!0,!0)})},te.isInViewport=function(se,ae,ue){var de=(_isString(se)?_getTarget(se):se).getBoundingClientRect(),oe=de[ue?_width:_height]*ae||0;return ue?de.right-oe>0&&de.left+oe<_win.innerWidth:de.bottom-oe>0&&de.top+oe<_win.innerHeight},te.positionInViewport=function(se,ae,ue){_isString(se)&&(se=_getTarget(se));var de=se.getBoundingClientRect(),oe=de[ue?_width:_height],me=ae==null?oe/2:ae in _keywords?_keywords[ae]*oe:~ae.indexOf("%")?parseFloat(ae)*oe/100:parseFloat(ae)||0;return ue?(de.left+me)/_win.innerWidth:(de.top+me)/_win.innerHeight},te.killAll=function(se){if(_triggers.slice(0).forEach(function(ue){return ue.vars.id!=="ScrollSmoother"&&ue.kill()}),se!==!0){var ae=_listeners.killAll||[];_listeners={},ae.forEach(function(ue){return ue()})}},te}();ScrollTrigger.version="3.13.0",ScrollTrigger.saveStyles=function(te){return te?_toArray(te).forEach(function(ee){if(ee&&ee.style){var ne=_savedStyles.indexOf(ee);ne>=0&&_savedStyles.splice(ne,5),_savedStyles.push(ee,ee.style.cssText,ee.getBBox&&ee.getAttribute("transform"),gsap$1.core.getCache(ee),_context())}}):_savedStyles},ScrollTrigger.revert=function(te,ee){return _revertAll(!te,ee)},ScrollTrigger.create=function(te,ee){return new ScrollTrigger(te,ee)},ScrollTrigger.refresh=function(te){return te?_onResize(!0):(_coreInitted$1||ScrollTrigger.register())&&_refreshAll(!0)},ScrollTrigger.update=function(te){return++_scrollers.cache&&_updateAll(te===!0?2:0)},ScrollTrigger.clearScrollMemory=_clearScrollMemory,ScrollTrigger.maxScroll=function(te,ee){return _maxScroll(te,ee?_horizontal:_vertical)},ScrollTrigger.getScrollFunc=function(te,ee){return _getScrollFunc(_getTarget(te),ee?_horizontal:_vertical)},ScrollTrigger.getById=function(te){return _ids[te]},ScrollTrigger.getAll=function(){return _triggers.filter(function(te){return te.vars.id!=="ScrollSmoother"})},ScrollTrigger.isScrolling=function(){return!!_lastScrollTime},ScrollTrigger.snapDirectional=_snapDirectional,ScrollTrigger.addEventListener=function(te,ee){var ne=_listeners[te]||(_listeners[te]=[]);~ne.indexOf(ee)||ne.push(ee)},ScrollTrigger.removeEventListener=function(te,ee){var ne=_listeners[te],se=ne&&ne.indexOf(ee);se>=0&&ne.splice(se,1)},ScrollTrigger.batch=function(te,ee){var ne=[],se={},ae=ee.interval||.016,ue=ee.batchMax||1e9,de=function(ve,Ee){var Pe=[],ye=[],Te=gsap$1.delayedCall(ae,function(){Ee(Pe,ye),Pe=[],ye=[]}).pause();return function(Ae){Pe.length||Te.restart(!0),Pe.push(Ae.trigger),ye.push(Ae),ue<=Pe.length&&Te.progress(1)}},oe;for(oe in ee)se[oe]=oe.substr(0,2)==="on"&&_isFunction(ee[oe])&&oe!=="onRefreshInit"?de(oe,ee[oe]):ee[oe];return _isFunction(ue)&&(ue=ue(),_addListener(ScrollTrigger,"refresh",function(){return ue=ee.batchMax()})),_toArray(te).forEach(function(me){var ve={};for(oe in se)ve[oe]=se[oe];ve.trigger=me,ne.push(ScrollTrigger.create(ve))}),ne};var _clampScrollAndGetDurationMultiplier=function(ee,ne,se,ae){return ne>ae?ee(ae):ne<0&&ee(0),se>ae?(ae-ne)/(se-ne):se<0?ne/(ne-se):1},_allowNativePanning=function te(ee,ne){ne===!0?ee.style.removeProperty("touch-action"):ee.style.touchAction=ne===!0?"auto":ne?"pan-"+ne+(Observer$1.isTouch?" pinch-zoom":""):"none",ee===_docEl&&te(_body,ne)},_overflow={auto:1,scroll:1},_nestedScroll=function(ee){var ne=ee.event,se=ee.target,ae=ee.axis,ue=(ne.changedTouches?ne.changedTouches[0]:ne).target,de=ue._gsap||gsap$1.core.getCache(ue),oe=_getTime(),me;if(!de._isScrollT||oe-de._isScrollT>2e3){for(;ue&&ue!==_body&&(ue.scrollHeight<=ue.clientHeight&&ue.scrollWidth<=ue.clientWidth||!(_overflow[(me=_getComputedStyle(ue)).overflowY]||_overflow[me.overflowX]));)ue=ue.parentNode;de._isScroll=ue&&ue!==se&&!_isViewport(ue)&&(_overflow[(me=_getComputedStyle(ue)).overflowY]||_overflow[me.overflowX]),de._isScrollT=oe}(de._isScroll||ae==="x")&&(ne.stopPropagation(),ne._gsapAllow=!0)},_inputObserver=function(ee,ne,se,ae){return Observer$1.create({target:ee,capture:!0,debounce:!1,lockAxis:!0,type:ne,onWheel:ae=ae&&_nestedScroll,onPress:ae,onDrag:ae,onScroll:ae,onEnable:function(){return se&&_addListener(_doc,Observer$1.eventTypes[0],_captureInputs,!1,!0)},onDisable:function(){return _removeListener(_doc,Observer$1.eventTypes[0],_captureInputs,!0)}})},_inputExp=/(input|label|select|textarea)/i,_inputIsFocused,_captureInputs=function(ee){var ne=_inputExp.test(ee.target.tagName);(ne||_inputIsFocused)&&(ee._gsapAllow=!0,_inputIsFocused=ne)},_getScrollNormalizer=function(ee){_isObject(ee)||(ee={}),ee.preventDefault=ee.isNormalizer=ee.allowClicks=!0,ee.type||(ee.type="wheel,touch"),ee.debounce=!!ee.debounce,ee.id=ee.id||"normalizer";var ne=ee,se=ne.normalizeScrollX,ae=ne.momentum,ue=ne.allowNestedScroll,de=ne.onRelease,oe,me,ve=_getTarget(ee.target)||_docEl,Ee=gsap$1.core.globals().ScrollSmoother,Pe=Ee&&Ee.get(),ye=_fixIOSBug&&(ee.content&&_getTarget(ee.content)||Pe&&ee.content!==!1&&!Pe.smooth()&&Pe.content()),Te=_getScrollFunc(ve,_vertical),Ae=_getScrollFunc(ve,_horizontal),Ce=1,De=(Observer$1.isTouch&&_win.visualViewport?_win.visualViewport.scale*_win.visualViewport.width:_win.outerWidth)/_win.innerWidth,Ie=0,ze=_isFunction(ae)?function(){return ae(oe)}:function(){return ae||2.8},Re,Oe,qe=_inputObserver(ve,ee.type,!0,ue),Ze=function(){return Oe=!1},Ue=_passThrough,Ye=_passThrough,ct=function(){me=_maxScroll(ve,_vertical),Ye=_clamp(_fixIOSBug?1:0,me),se&&(Ue=_clamp(0,_maxScroll(ve,_horizontal))),Re=_refreshID},at=function(){ye._gsap.y=_round$2(parseFloat(ye._gsap.y)+Te.offset)+"px",ye.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(ye._gsap.y)+", 0, 1)",Te.offset=Te.cacheID=0},ft=function(){if(Oe){requestAnimationFrame(Ze);var Ge=_round$2(oe.deltaY/2),je=Ye(Te.v-Ge);if(ye&&je!==Te.v+Te.offset){Te.offset=je-Te.v;var Ke=_round$2((parseFloat(ye&&ye._gsap.y)||0)-Te.offset);ye.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+Ke+", 0, 1)",ye._gsap.y=Ke+"px",Te.cacheID=_scrollers.cache,_updateAll()}return!0}Te.offset&&at(),Oe=!0},pt,Mt,At,_t,Qe=function(){ct(),pt.isActive()&&pt.vars.scrollY>me&&(Te()>me?pt.progress(1)&&Te(me):pt.resetTo("scrollY",me))};return ye&&gsap$1.set(ye,{y:"+=0"}),ee.ignoreCheck=function(it){return _fixIOSBug&&it.type==="touchmove"&&ft()||Ce>1.05&&it.type!=="touchstart"||oe.isGesturing||it.touches&&it.touches.length>1},ee.onPress=function(){Oe=!1;var it=Ce;Ce=_round$2((_win.visualViewport&&_win.visualViewport.scale||1)/De),pt.pause(),it!==Ce&&_allowNativePanning(ve,Ce>1.01?!0:se?!1:"x"),Mt=Ae(),At=Te(),ct(),Re=_refreshID},ee.onRelease=ee.onGestureStart=function(it,Ge){if(Te.offset&&at(),!Ge)_t.restart(!0);else{_scrollers.cache++;var je=ze(),Ke,lt;se&&(Ke=Ae(),lt=Ke+je*.05*-it.velocityX/.227,je*=_clampScrollAndGetDurationMultiplier(Ae,Ke,lt,_maxScroll(ve,_horizontal)),pt.vars.scrollX=Ue(lt)),Ke=Te(),lt=Ke+je*.05*-it.velocityY/.227,je*=_clampScrollAndGetDurationMultiplier(Te,Ke,lt,_maxScroll(ve,_vertical)),pt.vars.scrollY=Ye(lt),pt.invalidate().duration(je).play(.01),(_fixIOSBug&&pt.vars.scrollY>=me||Ke>=me-1)&&gsap$1.to({},{onUpdate:Qe,duration:je})}de&&de(it)},ee.onWheel=function(){pt._ts&&pt.pause(),_getTime()-Ie>1e3&&(Re=0,Ie=_getTime())},ee.onChange=function(it,Ge,je,Ke,lt){if(_refreshID!==Re&&ct(),Ge&&se&&Ae(Ue(Ke[2]===Ge?Mt+(it.startX-it.x):Ae()+Ge-Ke[1])),je){Te.offset&&at();var Bt=lt[2]===je,Xt=Bt?At+it.startY-it.y:Te()+je-lt[1],Gt=Ye(Xt);Bt&&Xt!==Gt&&(At+=Gt-Xt),Te(Gt)}(je||Ge)&&_updateAll()},ee.onEnable=function(){_allowNativePanning(ve,se?!1:"x"),ScrollTrigger.addEventListener("refresh",Qe),_addListener(_win,"resize",Qe),Te.smooth&&(Te.target.style.scrollBehavior="auto",Te.smooth=Ae.smooth=!1),qe.enable()},ee.onDisable=function(){_allowNativePanning(ve,!0),_removeListener(_win,"resize",Qe),ScrollTrigger.removeEventListener("refresh",Qe),qe.kill()},ee.lockAxis=ee.lockAxis!==!1,oe=new Observer$1(ee),oe.iOS=_fixIOSBug,_fixIOSBug&&!Te()&&Te(1),_fixIOSBug&&gsap$1.ticker.add(_passThrough),_t=oe._dc,pt=gsap$1.to(oe,{ease:"power4",paused:!0,inherit:!1,scrollX:se?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:_interruptionTracker(Te,Te(),function(){return pt.pause()})},onUpdate:_updateAll,onComplete:_t.vars.onComplete}),oe};ScrollTrigger.sort=function(te){if(_isFunction(te))return _triggers.sort(te);var ee=_win.pageYOffset||0;return ScrollTrigger.getAll().forEach(function(ne){return ne._sortY=ne.trigger?ee+ne.trigger.getBoundingClientRect().top:ne.start+_win.innerHeight}),_triggers.sort(te||function(ne,se){return(ne.vars.refreshPriority||0)*-1e6+(ne.vars.containerAnimation?1e6:ne._sortY)-((se.vars.containerAnimation?1e6:se._sortY)+(se.vars.refreshPriority||0)*-1e6)})},ScrollTrigger.observe=function(te){return new Observer$1(te)},ScrollTrigger.normalizeScroll=function(te){if(typeof te=="undefined")return _normalizer;if(te===!0&&_normalizer)return _normalizer.enable();if(te===!1){_normalizer&&_normalizer.kill(),_normalizer=te;return}var ee=te instanceof Observer$1?te:_getScrollNormalizer(te);return _normalizer&&_normalizer.target===ee.target&&_normalizer.kill(),_isViewport(ee.target)&&(_normalizer=ee),ee},ScrollTrigger.core={_getVelocityProp,_inputObserver,_scrollers,_proxies,bridge:{ss:function(){_lastScrollTime||_dispatch("scrollStart"),_lastScrollTime=_getTime()},ref:function(){return _refreshing}}},_getGSAP$1()&&gsap$1.registerPlugin(ScrollTrigger),function(){function te(){for(var se=arguments.length,ae=0;ae<se;ae++){var ue=ae<0||arguments.length<=ae?void 0:arguments[ae];ue.nodeType===1||ue.nodeType===11?this.appendChild(ue):this.appendChild(document.createTextNode(String(ue)))}}function ee(){for(;this.lastChild;)this.removeChild(this.lastChild);arguments.length&&this.append.apply(this,arguments)}function ne(){for(var se=this.parentNode,ae=arguments.length,ue=new Array(ae),de=0;de<ae;de++)ue[de]=arguments[de];var oe=ue.length;if(!!se)for(oe||se.removeChild(this);oe--;){var me=ue[oe];typeof me!="object"?me=this.ownerDocument.createTextNode(me):me.parentNode&&me.parentNode.removeChild(me),oe?se.insertBefore(this.previousSibling,me):se.replaceChild(me,this)}}typeof Element!="undefined"&&(Element.prototype.append||(Element.prototype.append=te,DocumentFragment.prototype.append=te),Element.prototype.replaceChildren||(Element.prototype.replaceChildren=ee,DocumentFragment.prototype.replaceChildren=ee),Element.prototype.replaceWith||(Element.prototype.replaceWith=ne,DocumentFragment.prototype.replaceWith=ne))}();function _classCallCheck(te,ee){if(!(te instanceof ee))throw new TypeError("Cannot call a class as a function")}function _defineProperties(te,ee){for(var ne=0;ne<ee.length;ne++){var se=ee[ne];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(te,se.key,se)}}function _createClass(te,ee,ne){return ee&&_defineProperties(te.prototype,ee),ne&&_defineProperties(te,ne),te}function _defineProperty(te,ee,ne){return ee in te?Object.defineProperty(te,ee,{value:ne,enumerable:!0,configurable:!0,writable:!0}):te[ee]=ne,te}function ownKeys(te,ee){var ne=Object.keys(te);if(Object.getOwnPropertySymbols){var se=Object.getOwnPropertySymbols(te);ee&&(se=se.filter(function(ae){return Object.getOwnPropertyDescriptor(te,ae).enumerable})),ne.push.apply(ne,se)}return ne}function _objectSpread2(te){for(var ee=1;ee<arguments.length;ee++){var ne=arguments[ee]!=null?arguments[ee]:{};ee%2?ownKeys(Object(ne),!0).forEach(function(se){_defineProperty(te,se,ne[se])}):Object.getOwnPropertyDescriptors?Object.defineProperties(te,Object.getOwnPropertyDescriptors(ne)):ownKeys(Object(ne)).forEach(function(se){Object.defineProperty(te,se,Object.getOwnPropertyDescriptor(ne,se))})}return te}function _slicedToArray(te,ee){return _arrayWithHoles(te)||_iterableToArrayLimit(te,ee)||_unsupportedIterableToArray(te,ee)||_nonIterableRest()}function _toConsumableArray(te){return _arrayWithoutHoles(te)||_iterableToArray(te)||_unsupportedIterableToArray(te)||_nonIterableSpread()}function _arrayWithoutHoles(te){if(Array.isArray(te))return _arrayLikeToArray(te)}function _arrayWithHoles(te){if(Array.isArray(te))return te}function _iterableToArray(te){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(te))return Array.from(te)}function _iterableToArrayLimit(te,ee){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(te)))){var ne=[],se=!0,ae=!1,ue=void 0;try{for(var de=te[Symbol.iterator](),oe;!(se=(oe=de.next()).done)&&(ne.push(oe.value),!(ee&&ne.length===ee));se=!0);}catch(me){ae=!0,ue=me}finally{try{!se&&de.return!=null&&de.return()}finally{if(ae)throw ue}}return ne}}function _unsupportedIterableToArray(te,ee){if(!!te){if(typeof te=="string")return _arrayLikeToArray(te,ee);var ne=Object.prototype.toString.call(te).slice(8,-1);if(ne==="Object"&&te.constructor&&(ne=te.constructor.name),ne==="Map"||ne==="Set")return Array.from(te);if(ne==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ne))return _arrayLikeToArray(te,ee)}}function _arrayLikeToArray(te,ee){(ee==null||ee>te.length)&&(ee=te.length);for(var ne=0,se=new Array(ee);ne<ee;ne++)se[ne]=te[ne];return se}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function extend$2(te,ee){return Object.getOwnPropertyNames(Object(te)).reduce(function(ne,se){var ae=Object.getOwnPropertyDescriptor(Object(te),se),ue=Object.getOwnPropertyDescriptor(Object(ee),se);return Object.defineProperty(ne,se,ue||ae)},{})}function isString(te){return typeof te=="string"}function isArray(te){return Array.isArray(te)}function parseSettings(){var te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ee=extend$2(te),ne;return ee.types!==void 0?ne=ee.types:ee.split!==void 0&&(ne=ee.split),ne!==void 0&&(ee.types=(isString(ne)||isArray(ne)?String(ne):"").split(",").map(function(se){return String(se).trim()}).filter(function(se){return/((line)|(word)|(char))/i.test(se)})),(ee.absolute||ee.position)&&(ee.absolute=ee.absolute||/absolute/.test(te.position)),ee}function parseTypes(te){var ee=isString(te)||isArray(te)?String(te):"";return{none:!ee,lines:/line/i.test(ee),words:/word/i.test(ee),chars:/char/i.test(ee)}}function isObject$2(te){return te!==null&&typeof te=="object"}function isNode$1(te){return isObject$2(te)&&/^(1|3|11)$/.test(te.nodeType)}function isLength(te){return typeof te=="number"&&te>-1&&te%1===0}function isArrayLike(te){return isObject$2(te)&&isLength(te.length)}function toArray(te){return isArray(te)?te:te==null?[]:isArrayLike(te)?Array.prototype.slice.call(te):[te]}function getTargetElements(te){var ee=te;return isString(te)&&(/^(#[a-z]\w+)$/.test(te.trim())?ee=document.getElementById(te.trim().slice(1)):ee=document.querySelectorAll(te)),toArray(ee).reduce(function(ne,se){return[].concat(_toConsumableArray(ne),_toConsumableArray(toArray(se).filter(isNode$1)))},[])}var entries=Object.entries,expando="_splittype",cache={},uid=0;function set(te,ee,ne){if(!isObject$2(te))return console.warn("[data.set] owner is not an object"),null;var se=te[expando]||(te[expando]=++uid),ae=cache[se]||(cache[se]={});return ne===void 0?!!ee&&Object.getPrototypeOf(ee)===Object.prototype&&(cache[se]=_objectSpread2(_objectSpread2({},ae),ee)):ee!==void 0&&(ae[ee]=ne),ne}function get(te,ee){var ne=isObject$2(te)?te[expando]:null,se=ne&&cache[ne]||{};return ee===void 0?se:se[ee]}function remove(te){var ee=te&&te[expando];ee&&(delete te[ee],delete cache[ee])}function clear(){Object.keys(cache).forEach(function(te){delete cache[te]})}function cleanup(){entries(cache).forEach(function(te){var ee=_slicedToArray(te,2),ne=ee[0],se=ee[1],ae=se.isRoot,ue=se.isSplit;(!ae||!ue)&&(cache[ne]=null,delete cache[ne])})}function toWords(te){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:" ",ne=te?String(te):"";return ne.trim().replace(/\s+/g," ").split(ee)}var rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f\\ufe20-\\ufe23",rsComboSymbolsRange="\\u20d0-\\u20f0",rsVarRange="\\ufe0e\\ufe0f",rsAstral="[".concat(rsAstralRange,"]"),rsCombo="[".concat(rsComboMarksRange).concat(rsComboSymbolsRange,"]"),rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:".concat(rsCombo,"|").concat(rsFitz,")"),rsNonAstral="[^".concat(rsAstralRange,"]"),rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ="\\u200d",reOptMod="".concat(rsModifier,"?"),rsOptVar="[".concat(rsVarRange,"]?"),rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsSymbol="(?:".concat(["".concat(rsNonAstral).concat(rsCombo,"?"),rsCombo,rsRegional,rsSurrPair,rsAstral].join("|"),`
)`),reUnicode=RegExp("".concat(rsFitz,"(?=").concat(rsFitz,")|").concat(rsSymbol).concat(rsSeq),"g"),unicodeRange=[rsZWJ,rsAstralRange,rsComboMarksRange,rsComboSymbolsRange,rsVarRange],reHasUnicode=RegExp("[".concat(unicodeRange.join(""),"]"));function asciiToArray(te){return te.split("")}function hasUnicode(te){return reHasUnicode.test(te)}function unicodeToArray(te){return te.match(reUnicode)||[]}function stringToArray(te){return hasUnicode(te)?unicodeToArray(te):asciiToArray(te)}function toString(te){return te==null?"":String(te)}function toChars(te){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return te=toString(te),te&&isString(te)&&!ee&&hasUnicode(te)?stringToArray(te):te.split(ee)}function createElement$1(te,ee){var ne=document.createElement(te);return ee&&Object.keys(ee).forEach(function(se){var ae=ee[se],ue=isString(ae)?ae.trim():ae;ue===null||ue===""||(se==="children"?ne.append.apply(ne,_toConsumableArray(toArray(ue))):ne.setAttribute(se,ue))}),ne}var defaults$1={splitClass:"",lineClass:"line",wordClass:"word",charClass:"char",types:["lines","words","chars"],absolute:!1,tagName:"div"};function splitWordsAndChars(te,ee){ee=extend$2(defaults$1,ee);var ne=parseTypes(ee.types),se=ee.tagName,ae=te.nodeValue,ue=document.createDocumentFragment(),de=[],oe=[];return/^\s/.test(ae)&&ue.append(" "),de=toWords(ae).reduce(function(me,ve,Ee,Pe){var ye,Te;return ne.chars&&(Te=toChars(ve).map(function(Ae){var Ce=createElement$1(se,{class:"".concat(ee.splitClass," ").concat(ee.charClass),style:"display: inline-block;",children:Ae});return set(Ce,"isChar",!0),oe=[].concat(_toConsumableArray(oe),[Ce]),Ce})),ne.words||ne.lines?(ye=createElement$1(se,{class:"".concat(ee.wordClass," ").concat(ee.splitClass),style:"display: inline-block; ".concat(ne.words&&ee.absolute?"position: relative;":""),children:ne.chars?Te:ve}),set(ye,{isWord:!0,isWordStart:!0,isWordEnd:!0}),ue.appendChild(ye)):Te.forEach(function(Ae){ue.appendChild(Ae)}),Ee<Pe.length-1&&ue.append(" "),ne.words?me.concat(ye):me},[]),/\s$/.test(ae)&&ue.append(" "),te.replaceWith(ue),{words:de,chars:oe}}function split(te,ee){var ne=te.nodeType,se={words:[],chars:[]};if(!/(1|3|11)/.test(ne))return se;if(ne===3&&/\S/.test(te.nodeValue))return splitWordsAndChars(te,ee);var ae=toArray(te.childNodes);if(ae.length&&(set(te,"isSplit",!0),!get(te).isRoot)){te.style.display="inline-block",te.style.position="relative";var ue=te.nextSibling,de=te.previousSibling,oe=te.textContent||"",me=ue?ue.textContent:" ",ve=de?de.textContent:" ";set(te,{isWordEnd:/\s$/.test(oe)||/^\s/.test(me),isWordStart:/^\s/.test(oe)||/\s$/.test(ve)})}return ae.reduce(function(Ee,Pe){var ye=split(Pe,ee),Te=ye.words,Ae=ye.chars;return{words:[].concat(_toConsumableArray(Ee.words),_toConsumableArray(Te)),chars:[].concat(_toConsumableArray(Ee.chars),_toConsumableArray(Ae))}},se)}function getPosition(te,ee,ne,se){if(!ne.absolute)return{top:ee?te.offsetTop:null};var ae=te.offsetParent,ue=_slicedToArray(se,2),de=ue[0],oe=ue[1],me=0,ve=0;if(ae&&ae!==document.body){var Ee=ae.getBoundingClientRect();me=Ee.x+de,ve=Ee.y+oe}var Pe=te.getBoundingClientRect(),ye=Pe.width,Te=Pe.height,Ae=Pe.x,Ce=Pe.y,De=Ce+oe-ve,Ie=Ae+de-me;return{width:ye,height:Te,top:De,left:Ie}}function unSplitWords(te){get(te).isWord?(remove(te),te.replaceWith.apply(te,_toConsumableArray(te.childNodes))):toArray(te.children).forEach(function(ee){return unSplitWords(ee)})}var createFragment=function(){return document.createDocumentFragment()};function repositionAfterSplit(te,ee,ne){var se=parseTypes(ee.types),ae=ee.tagName,ue=te.getElementsByTagName("*"),de=[],oe=[],me=null,ve,Ee,Pe,ye=[],Te=te.parentElement,Ae=te.nextElementSibling,Ce=createFragment(),De=window.getComputedStyle(te),Ie=De.textAlign,ze=parseFloat(De.fontSize),Re=ze*.2;return ee.absolute&&(Pe={left:te.offsetLeft,top:te.offsetTop,width:te.offsetWidth},Ee=te.offsetWidth,ve=te.offsetHeight,set(te,{cssWidth:te.style.width,cssHeight:te.style.height})),toArray(ue).forEach(function(Oe){var qe=Oe.parentElement===te,Ze=getPosition(Oe,qe,ee,ne),Ue=Ze.width,Ye=Ze.height,ct=Ze.top,at=Ze.left;/^br$/i.test(Oe.nodeName)||(se.lines&&qe&&((me===null||ct-me>=Re)&&(me=ct,de.push(oe=[])),oe.push(Oe)),ee.absolute&&set(Oe,{top:ct,left:at,width:Ue,height:Ye}))}),Te&&Te.removeChild(te),se.lines&&(ye=de.map(function(Oe){var qe=createElement$1(ae,{class:"".concat(ee.splitClass," ").concat(ee.lineClass),style:"display: block; text-align: ".concat(Ie,"; width: 100%;")});set(qe,"isLine",!0);var Ze={height:0,top:1e4};return Ce.appendChild(qe),Oe.forEach(function(Ue,Ye,ct){var at=get(Ue),ft=at.isWordEnd,pt=at.top,Mt=at.height,At=ct[Ye+1];Ze.height=Math.max(Ze.height,Mt),Ze.top=Math.min(Ze.top,pt),qe.appendChild(Ue),ft&&get(At).isWordStart&&qe.append(" ")}),ee.absolute&&set(qe,{height:Ze.height,top:Ze.top}),qe}),se.words||unSplitWords(Ce),te.replaceChildren(Ce)),ee.absolute&&(te.style.width="".concat(te.style.width||Ee,"px"),te.style.height="".concat(ve,"px"),toArray(ue).forEach(function(Oe){var qe=get(Oe),Ze=qe.isLine,Ue=qe.top,Ye=qe.left,ct=qe.width,at=qe.height,ft=get(Oe.parentElement),pt=!Ze&&ft.isLine;Oe.style.top="".concat(pt?Ue-ft.top:Ue,"px"),Oe.style.left=Ze?"".concat(Pe.left,"px"):"".concat(Ye-(pt?Pe.left:0),"px"),Oe.style.height="".concat(at,"px"),Oe.style.width=Ze?"".concat(Pe.width,"px"):"".concat(ct,"px"),Oe.style.position="absolute"})),Te&&(Ae?Te.insertBefore(te,Ae):Te.appendChild(te)),ye}var _defaults=extend$2(defaults$1,{}),SplitType=function(){_createClass(te,null,[{key:"clearData",value:function(){clear()}},{key:"setDefaults",value:function(ne){return _defaults=extend$2(_defaults,parseSettings(ne)),defaults$1}},{key:"revert",value:function(ne){getTargetElements(ne).forEach(function(se){var ae=get(se),ue=ae.isSplit,de=ae.html,oe=ae.cssWidth,me=ae.cssHeight;ue&&(se.innerHTML=de,se.style.width=oe||"",se.style.height=me||"",remove(se))})}},{key:"create",value:function(ne,se){return new te(ne,se)}},{key:"data",get:function(){return cache}},{key:"defaults",get:function(){return _defaults},set:function(ne){_defaults=extend$2(_defaults,parseSettings(ne))}}]);function te(ee,ne){_classCallCheck(this,te),this.isSplit=!1,this.settings=extend$2(_defaults,parseSettings(ne)),this.elements=getTargetElements(ee),this.split()}return _createClass(te,[{key:"split",value:function(ne){var se=this;this.revert(),this.elements.forEach(function(de){set(de,"html",de.innerHTML)}),this.lines=[],this.words=[],this.chars=[];var ae=[window.pageXOffset,window.pageYOffset];ne!==void 0&&(this.settings=extend$2(this.settings,parseSettings(ne)));var ue=parseTypes(this.settings.types);ue.none||(this.elements.forEach(function(de){set(de,"isRoot",!0);var oe=split(de,se.settings),me=oe.words,ve=oe.chars;se.words=[].concat(_toConsumableArray(se.words),_toConsumableArray(me)),se.chars=[].concat(_toConsumableArray(se.chars),_toConsumableArray(ve))}),this.elements.forEach(function(de){if(ue.lines||se.settings.absolute){var oe=repositionAfterSplit(de,se.settings,ae);se.lines=[].concat(_toConsumableArray(se.lines),_toConsumableArray(oe))}}),this.isSplit=!0,window.scrollTo(ae[0],ae[1]),cleanup())}},{key:"revert",value:function(){this.isSplit&&(this.lines=null,this.words=null,this.chars=null,this.isSplit=!1),te.revert(this.elements)}}]),te}();gsapWithCSS.registerPlugin(ScrollTrigger);function initAboutValuesScroll(te=document){const ee=te||document;let ne=null;try{ee&&ee.getAttribute&&ee.getAttribute("data-barba-namespace")==="About us"&&ee.getAttribute("data-barba")==="container"?ne=ee:ee&&ee.querySelector&&(ne=ee.querySelector('[data-barba-namespace="About us"][data-barba="container"]'))}catch{}if(!ne)return;const se=Array.from(ne.querySelectorAll(".section_values"));!se.length||se.forEach(ae=>{const ue=Array.from(ae.querySelectorAll(".content_column > .scroll-indicator"));if(ue.length){const de=new WeakMap;let oe=!1;const me=(()=>{let ye;return()=>{clearTimeout(ye),ye=setTimeout(()=>{oe||(oe=!0,requestAnimationFrame(()=>{buildAllIndicators$2(ue,ae,de)&&ScrollTrigger.refresh(),oe=!1}))},120)}})();buildAllIndicators$2(ue,ae,de),window.addEventListener("resize",me),window.addEventListener("orientationchange",me),window.addEventListener("load",me,{once:!0});const ve=ae.querySelector(".scroll-list");window.ResizeObserver&&ve&&new ResizeObserver(()=>me()).observe(ve),ScrollTrigger.create({trigger:ae,start:"top 120%",end:"bottom 120%",onEnter:me,onEnterBack:me});const Ee=setupTickHighlighting$2(ae,ue),Pe=()=>{me(),requestAnimationFrame(()=>{Ee&&Ee.recalc&&Ee.recalc(),Ee&&Ee.update&&Ee.update()})};window.addEventListener("resize",Pe),window.addEventListener("orientationchange",Pe)}})}function buildAllIndicators$2(te,ee,ne){let se=!1;return te.forEach(ae=>{buildIndicator$2(ae,ee,ne)&&(se=!0)}),se}function buildIndicator$2(te,ee,ne){const se=getComputedStyle(te),ae=parseFloat(se.rowGap||se.getPropertyValue("row-gap")||se.gridRowGap||0);let ue=te.querySelector(".scroll-tick");ue||(ue=document.createElement("div"),ue.className="scroll-tick",te.appendChild(ue));const de=ue.getBoundingClientRect(),oe=de&&de.height?de.height:0;let me=te.clientHeight;if(!me||me<=0){const Te=te.getBoundingClientRect();me=Te&&Te.height||0}if(ee){const Te=ee.querySelector(".scroll-list");if(Te){const Ae=Te.getBoundingClientRect(),Ce=Math.max(Ae&&Ae.height||0,Te.clientHeight||0,Te.scrollHeight||0);Ce&&Ce>0&&(me=Ce)}}if(!me||me<=oe*2){let Te=0;if(ee){const ze=Math.max(ee.clientHeight||0,ee.scrollHeight||0),Re=ee.getBoundingClientRect();Te=Math.max(ze,Re&&Re.height||0)}let Ae=window.innerHeight||0;Ae||(Ae=document.documentElement?document.documentElement.clientHeight:0);const Ce=me||0,De=Ce>Te?Ce:Te,Ie=De>Ae?De:Ae;me=Ie>oe?Ie:oe}const ve=te.closest(".content_column");if(ve){const Te=ve.getBoundingClientRect(),Ae=Te&&Te.height||0,Ce=Math.max(ve.clientHeight||0,ve.scrollHeight||0),De=Ae>Ce?Ae:Ce;(!De||Math.abs(De-me)>2)&&(ve.style.height=me+"px")}const Ee=oe+ae;let Pe=Ee>0?Math.max(1,Math.floor((me+ae)/Ee)):1;const ye=ne?ne.get(te):void 0;if(!ye||ye.count!==Pe){te.innerHTML="";const Te=document.createDocumentFragment();for(let Ae=0;Ae<Pe;Ae++){const Ce=document.createElement("div");Ce.className="scroll-tick",Te.appendChild(Ce)}return te.appendChild(Te),ne&&ne.set(te,{count:Pe}),!0}return!1}function setupTickHighlighting$2(te,ee){const ne=document.querySelector(".page-wrap")||te.closest(".page-wrap")||window,se=typeof window!="undefined"&&window.matchMedia?window.matchMedia("(max-width: 991px)").matches:!1;let ae=0;const ue=()=>{try{const Te=document.createElement("div");Te.style.position="fixed",Te.style.top="0",Te.style.left="0",Te.style.height="100svh",Te.style.width="0",Te.style.pointerEvents="none",Te.style.opacity="0",Te.style.visibility="hidden",document.documentElement.appendChild(Te);const Ae=Te.getBoundingClientRect().height||Te.offsetHeight||0;return Te.remove(),Ae}catch{return 0}},de=()=>{ae=ue()};if(se){de();const Te=()=>{clearTimeout(Te._t),Te._t=setTimeout(de,100)};window.addEventListener("resize",Te),window.addEventListener("orientationchange",Te)}const oe=new Map;let me=!1,ve=null,Ee=!1;try{const Te=Array.from(te.querySelectorAll(".scroll-list .scroll-item-h"));Te.forEach(Ce=>{const De=Ce.querySelector(".body-s");De&&(De.style.opacity="0")});const Ae=Te[0];if(Ae){Ae.classList.add("is-active");const Ce=Ae.querySelector(".body-s");if(Ce)try{Ce.style.opacity="1",Ce.__split||(Ce.__split=new SplitType(Ce,{types:"lines",tagName:"span"}));let De=Ce.__split&&Ce.__split.lines||[];De.length||(De=[Ce]);const Ie=[];De.forEach(ze=>{if(ze.style.display="block",ze.style.overflow="hidden",!ze.__inner){const Re=document.createElement("span");for(Re.className="line-inner";ze.firstChild;)Re.appendChild(ze.firstChild);ze.appendChild(Re),ze.__inner=Re}Ie.push(ze.__inner)}),Ie.length&&gsapWithCSS.set(Ie,{yPercent:0})}catch{}}}catch{}const Pe=()=>{let Te;const Ae=se&&ae>0?ae:window.innerHeight;if(ne===window)Te={top:0,height:Ae};else{const Ie=ne.getBoundingClientRect();se?Te={top:0,height:Ae}:Te={top:Ie.top,height:Ie.height}}const Ce=Te.top+Te.height/2;ee.forEach(Ie=>{const ze=Array.from(Ie.querySelectorAll(".scroll-tick"));if(!ze.length)return;let Re=ze.length-1,Oe=1/0;for(let Ye=0;Ye<ze.length;Ye++){const ct=ze[Ye].getBoundingClientRect(),at=ct.top+ct.height/2,ft=Math.abs(at-Ce);ft<Oe&&(Oe=ft,Re=Ye)}const qe=typeof ve=="number"?ve:Re;if(oe.get(Ie)===qe)return;oe.set(Ie,qe),ze.forEach(Ye=>{Ye.classList.remove("is-xxl","is-xl","is-l","is-m")});const Ue=(Ye,ct)=>{Ye>=0&&Ye<ze.length&&ze[Ye].classList.add(ct)};Ue(qe,"is-xxl"),Ue(qe-1,"is-xl"),Ue(qe+1,"is-xl"),Ue(qe-2,"is-l"),Ue(qe+2,"is-l"),Ue(qe-3,"is-m"),Ue(qe+3,"is-m")});const De=Array.from(te.querySelectorAll(".scroll-list .scroll-item-h"));if(De.length){let Ie={index:0,dist:1/0};De.forEach((Re,Oe)=>{const qe=Re.getBoundingClientRect(),Ze=qe.top+qe.height/2,Ue=Math.abs(Ze-Ce);Ue<Ie.dist&&(Ie={index:Oe,dist:Ue})});const ze=typeof ve=="number"?ve:Ie.index;De.forEach((Re,Oe)=>{const qe=Oe===ze,Ze=Re.classList.contains("is-active");if(qe){if(!Ze){Re.classList.add("is-active");const Ue=Re.querySelector(".body-s");if(Ue)try{gsapWithCSS.set(Ue,{opacity:1}),Ue.__split||(Ue.__split=new SplitType(Ue,{types:"lines",tagName:"span"}));let Ye=Ue.__split&&Ue.__split.lines||[];const ct=[];Ye.length||(Ye=[Ue]),Ye.forEach(at=>{if(at.style.display="block",at.style.overflow="hidden",!at.__inner){const ft=document.createElement("span");for(ft.className="line-inner";at.firstChild;)ft.appendChild(at.firstChild);at.appendChild(ft),at.__inner=ft}ct.push(at.__inner)}),Ee?gsapWithCSS.set(ct,{display:"block",yPercent:0}):(gsapWithCSS.set(ct,{display:"block",yPercent:100,willChange:"transform"}),gsapWithCSS.to(ct,{yPercent:0,duration:.35,ease:"power2.out",stagger:.06,clearProps:"willChange"}))}catch{}}}else if(Ze){Re.classList.remove("is-active");const Ue=Re.querySelector(".body-s");if(Ue){Ue.style.opacity="0";try{const ct=(Ue.__split&&Ue.__split.lines||[]).map(at=>at.__inner).filter(Boolean);ct.length&&gsapWithCSS.set(ct,{yPercent:100})}catch{}}}})}},ye=()=>{me||(me=!0,requestAnimationFrame(()=>{me=!1,Pe()}))};return ScrollTrigger.create({trigger:te,start:"top bottom",end:"bottom -50%",onUpdate:ye,onEnter:()=>{ve=0,Ee=!0,ye(),ve=null,Ee=!1},onEnterBack:()=>{ve=1/0,Ee=!0,ye(),ve=null,Ee=!1}}),ye(),{recalc:ye,update:ye}}/*!
 * paths 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var _svgPathExp=/[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/ig,_scientific=/[\+\-]?\d*\.?\d+e[\+\-]?\d+/ig,_DEG2RAD=Math.PI/180,_sin=Math.sin,_cos=Math.cos,_abs=Math.abs,_sqrt=Math.sqrt,_isNumber=function(ee){return typeof ee=="number"},_roundingNum=1e5,_round$1=function(ee){return Math.round(ee*_roundingNum)/_roundingNum||0};function transformRawPath(te,ee,ne,se,ae,ue,de){for(var oe=te.length,me,ve,Ee,Pe,ye;--oe>-1;)for(me=te[oe],ve=me.length,Ee=0;Ee<ve;Ee+=2)Pe=me[Ee],ye=me[Ee+1],me[Ee]=Pe*ee+ye*se+ue,me[Ee+1]=Pe*ne+ye*ae+de;return te._dirty=1,te}function arcToSegment(te,ee,ne,se,ae,ue,de,oe,me){if(!(te===oe&&ee===me)){ne=_abs(ne),se=_abs(se);var ve=ae%360*_DEG2RAD,Ee=_cos(ve),Pe=_sin(ve),ye=Math.PI,Te=ye*2,Ae=(te-oe)/2,Ce=(ee-me)/2,De=Ee*Ae+Pe*Ce,Ie=-Pe*Ae+Ee*Ce,ze=De*De,Re=Ie*Ie,Oe=ze/(ne*ne)+Re/(se*se);Oe>1&&(ne=_sqrt(Oe)*ne,se=_sqrt(Oe)*se);var qe=ne*ne,Ze=se*se,Ue=(qe*Ze-qe*Re-Ze*ze)/(qe*Re+Ze*ze);Ue<0&&(Ue=0);var Ye=(ue===de?-1:1)*_sqrt(Ue),ct=Ye*(ne*Ie/se),at=Ye*-(se*De/ne),ft=(te+oe)/2,pt=(ee+me)/2,Mt=ft+(Ee*ct-Pe*at),At=pt+(Pe*ct+Ee*at),_t=(De-ct)/ne,Qe=(Ie-at)/se,it=(-De-ct)/ne,Ge=(-Ie-at)/se,je=_t*_t+Qe*Qe,Ke=(Qe<0?-1:1)*Math.acos(_t/_sqrt(je)),lt=(_t*Ge-Qe*it<0?-1:1)*Math.acos((_t*it+Qe*Ge)/_sqrt(je*(it*it+Ge*Ge)));isNaN(lt)&&(lt=ye),!de&&lt>0?lt-=Te:de&&lt<0&&(lt+=Te),Ke%=Te,lt%=Te;var Bt=Math.ceil(_abs(lt)/(Te/4)),Xt=[],Gt=lt/Bt,lr=4/3*_sin(Gt/2)/(1+_cos(Gt/2)),yr=Ee*ne,Lr=Pe*ne,Nr=Pe*-se,$r=Ee*se,Gr;for(Gr=0;Gr<Bt;Gr++)ae=Ke+Gr*Gt,De=_cos(ae),Ie=_sin(ae),_t=_cos(ae+=Gt),Qe=_sin(ae),Xt.push(De-lr*Ie,Ie+lr*De,_t+lr*Qe,Qe-lr*_t,_t,Qe);for(Gr=0;Gr<Xt.length;Gr+=2)De=Xt[Gr],Ie=Xt[Gr+1],Xt[Gr]=De*yr+Ie*Nr+Mt,Xt[Gr+1]=De*Lr+Ie*$r+At;return Xt[Gr-2]=oe,Xt[Gr-1]=me,Xt}}function stringToRawPath(te){var ee=(te+"").replace(_scientific,function(ct){var at=+ct;return at<1e-4&&at>-1e-4?0:at}).match(_svgPathExp)||[],ne=[],se=0,ae=0,ue=2/3,de=ee.length,oe=0,me="ERROR: malformed path: "+te,ve,Ee,Pe,ye,Te,Ae,Ce,De,Ie,ze,Re,Oe,qe,Ze,Ue,Ye=function(at,ft,pt,Mt){ze=(pt-at)/3,Re=(Mt-ft)/3,Ce.push(at+ze,ft+Re,pt-ze,Mt-Re,pt,Mt)};if(!te||!isNaN(ee[0])||isNaN(ee[1]))return console.log(me),ne;for(ve=0;ve<de;ve++)if(qe=Te,isNaN(ee[ve])?(Te=ee[ve].toUpperCase(),Ae=Te!==ee[ve]):ve--,Pe=+ee[ve+1],ye=+ee[ve+2],Ae&&(Pe+=se,ye+=ae),ve||(De=Pe,Ie=ye),Te==="M")Ce&&(Ce.length<8?ne.length-=1:oe+=Ce.length),se=De=Pe,ae=Ie=ye,Ce=[Pe,ye],ne.push(Ce),ve+=2,Te="L";else if(Te==="C")Ce||(Ce=[0,0]),Ae||(se=ae=0),Ce.push(Pe,ye,se+ee[ve+3]*1,ae+ee[ve+4]*1,se+=ee[ve+5]*1,ae+=ee[ve+6]*1),ve+=6;else if(Te==="S")ze=se,Re=ae,(qe==="C"||qe==="S")&&(ze+=se-Ce[Ce.length-4],Re+=ae-Ce[Ce.length-3]),Ae||(se=ae=0),Ce.push(ze,Re,Pe,ye,se+=ee[ve+3]*1,ae+=ee[ve+4]*1),ve+=4;else if(Te==="Q")ze=se+(Pe-se)*ue,Re=ae+(ye-ae)*ue,Ae||(se=ae=0),se+=ee[ve+3]*1,ae+=ee[ve+4]*1,Ce.push(ze,Re,se+(Pe-se)*ue,ae+(ye-ae)*ue,se,ae),ve+=4;else if(Te==="T")ze=se-Ce[Ce.length-4],Re=ae-Ce[Ce.length-3],Ce.push(se+ze,ae+Re,Pe+(se+ze*1.5-Pe)*ue,ye+(ae+Re*1.5-ye)*ue,se=Pe,ae=ye),ve+=2;else if(Te==="H")Ye(se,ae,se=Pe,ae),ve+=1;else if(Te==="V")Ye(se,ae,se,ae=Pe+(Ae?ae-se:0)),ve+=1;else if(Te==="L"||Te==="Z")Te==="Z"&&(Pe=De,ye=Ie,Ce.closed=!0),(Te==="L"||_abs(se-Pe)>.5||_abs(ae-ye)>.5)&&(Ye(se,ae,Pe,ye),Te==="L"&&(ve+=2)),se=Pe,ae=ye;else if(Te==="A"){if(Ze=ee[ve+4],Ue=ee[ve+5],ze=ee[ve+6],Re=ee[ve+7],Ee=7,Ze.length>1&&(Ze.length<3?(Re=ze,ze=Ue,Ee--):(Re=Ue,ze=Ze.substr(2),Ee-=2),Ue=Ze.charAt(1),Ze=Ze.charAt(0)),Oe=arcToSegment(se,ae,+ee[ve+1],+ee[ve+2],+ee[ve+3],+Ze,+Ue,(Ae?se:0)+ze*1,(Ae?ae:0)+Re*1),ve+=Ee,Oe)for(Ee=0;Ee<Oe.length;Ee++)Ce.push(Oe[Ee]);se=Ce[Ce.length-2],ae=Ce[Ce.length-1]}else console.log(me);return ve=Ce.length,ve<6?(ne.pop(),ve=0):Ce[0]===Ce[ve-2]&&Ce[1]===Ce[ve-1]&&(Ce.closed=!0),ne.totalPoints=oe+ve,ne}function rawPathToString(te){_isNumber(te[0])&&(te=[te]);var ee="",ne=te.length,se,ae,ue,de;for(ae=0;ae<ne;ae++){for(de=te[ae],ee+="M"+_round$1(de[0])+","+_round$1(de[1])+" C",se=de.length,ue=2;ue<se;ue++)ee+=_round$1(de[ue++])+","+_round$1(de[ue++])+" "+_round$1(de[ue++])+","+_round$1(de[ue++])+" "+_round$1(de[ue++])+","+_round$1(de[ue])+" ";de.closed&&(ee+="z")}return ee}/*!
 * CustomEase 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var gsap,_coreInitted,_getGSAP=function(){return gsap||typeof window!="undefined"&&(gsap=window.gsap)&&gsap.registerPlugin&&gsap},_initCore=function(){gsap=_getGSAP(),gsap?(gsap.registerEase("_CE",CustomEase.create),_coreInitted=1):console.warn("Please gsap.registerPlugin(CustomEase)")},_bigNum=1e20,_round=function(ee){return~~(ee*1e3+(ee<0?-.5:.5))/1e3},_numExp=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/gi,_needsParsingExp=/[cLlsSaAhHvVtTqQ]/g,_findMinimum=function(ee){var ne=ee.length,se=_bigNum,ae;for(ae=1;ae<ne;ae+=6)+ee[ae]<se&&(se=+ee[ae]);return se},_normalize=function(ee,ne,se){!se&&se!==0&&(se=Math.max(+ee[ee.length-1],+ee[1]));var ae=+ee[0]*-1,ue=-se,de=ee.length,oe=1/(+ee[de-2]+ae),me=-ne||(Math.abs(+ee[de-1]-+ee[1])<.01*(+ee[de-2]-+ee[0])?_findMinimum(ee)+ue:+ee[de-1]+ue),ve;for(me?me=1/me:me=-oe,ve=0;ve<de;ve+=2)ee[ve]=(+ee[ve]+ae)*oe,ee[ve+1]=(+ee[ve+1]+ue)*me},_bezierToPoints=function te(ee,ne,se,ae,ue,de,oe,me,ve,Ee,Pe){var ye=(ee+se)/2,Te=(ne+ae)/2,Ae=(se+ue)/2,Ce=(ae+de)/2,De=(ue+oe)/2,Ie=(de+me)/2,ze=(ye+Ae)/2,Re=(Te+Ce)/2,Oe=(Ae+De)/2,qe=(Ce+Ie)/2,Ze=(ze+Oe)/2,Ue=(Re+qe)/2,Ye=oe-ee,ct=me-ne,at=Math.abs((se-oe)*ct-(ae-me)*Ye),ft=Math.abs((ue-oe)*ct-(de-me)*Ye),pt;return Ee||(Ee=[{x:ee,y:ne},{x:oe,y:me}],Pe=1),Ee.splice(Pe||Ee.length-1,0,{x:Ze,y:Ue}),(at+ft)*(at+ft)>ve*(Ye*Ye+ct*ct)&&(pt=Ee.length,te(ee,ne,ye,Te,ze,Re,Ze,Ue,ve,Ee,Pe),te(Ze,Ue,Oe,qe,De,Ie,oe,me,ve,Ee,Pe+1+(Ee.length-pt))),Ee},CustomEase=function(){function te(ne,se,ae){_coreInitted||_initCore(),this.id=ne,this.setData(se,ae)}var ee=te.prototype;return ee.setData=function(se,ae){ae=ae||{},se=se||"0,0,1,1";var ue=se.match(_numExp),de=1,oe=[],me=[],ve=ae.precision||1,Ee=ve<=1,Pe,ye,Te,Ae,Ce,De,Ie,ze,Re;if(this.data=se,(_needsParsingExp.test(se)||~se.indexOf("M")&&se.indexOf("C")<0)&&(ue=stringToRawPath(se)[0]),Pe=ue.length,Pe===4)ue.unshift(0,0),ue.push(1,1),Pe=8;else if((Pe-2)%6)throw"Invalid CustomEase";for((+ue[0]!=0||+ue[Pe-2]!=1)&&_normalize(ue,ae.height,ae.originY),this.segment=ue,Ae=2;Ae<Pe;Ae+=6)ye={x:+ue[Ae-2],y:+ue[Ae-1]},Te={x:+ue[Ae+4],y:+ue[Ae+5]},oe.push(ye,Te),_bezierToPoints(ye.x,ye.y,+ue[Ae],+ue[Ae+1],+ue[Ae+2],+ue[Ae+3],Te.x,Te.y,1/(ve*2e5),oe,oe.length-1);for(Pe=oe.length,Ae=0;Ae<Pe;Ae++)Ie=oe[Ae],ze=oe[Ae-1]||Ie,(Ie.x>ze.x||ze.y!==Ie.y&&ze.x===Ie.x||Ie===ze)&&Ie.x<=1?(ze.cx=Ie.x-ze.x,ze.cy=Ie.y-ze.y,ze.n=Ie,ze.nx=Ie.x,Ee&&Ae>1&&Math.abs(ze.cy/ze.cx-oe[Ae-2].cy/oe[Ae-2].cx)>2&&(Ee=0),ze.cx<de&&(ze.cx?de=ze.cx:(ze.cx=.001,Ae===Pe-1&&(ze.x-=.001,de=Math.min(de,.001),Ee=0)))):(oe.splice(Ae--,1),Pe--);if(Pe=1/de+1|0,Ce=1/Pe,De=0,Ie=oe[0],Ee){for(Ae=0;Ae<Pe;Ae++)Re=Ae*Ce,Ie.nx<Re&&(Ie=oe[++De]),ye=Ie.y+(Re-Ie.x)/Ie.cx*Ie.cy,me[Ae]={x:Re,cx:Ce,y:ye,cy:0,nx:9},Ae&&(me[Ae-1].cy=ye-me[Ae-1].y);De=oe[oe.length-1],me[Pe-1].cy=De.y-ye,me[Pe-1].cx=De.x-me[me.length-1].x}else{for(Ae=0;Ae<Pe;Ae++)Ie.nx<Ae*Ce&&(Ie=oe[++De]),me[Ae]=Ie;De<oe.length-1&&(me[Ae-1]=oe[oe.length-2])}return this.ease=function(Oe){var qe=me[Oe*Pe|0]||me[Pe-1];return qe.nx<Oe&&(qe=qe.n),qe.y+(Oe-qe.x)/qe.cx*qe.cy},this.ease.custom=this,this.id&&gsap&&gsap.registerEase(this.id,this.ease),this},ee.getSVGData=function(se){return te.getSVGData(this,se)},te.create=function(se,ae,ue){return new te(se,ae,ue).ease},te.register=function(se){gsap=se,_initCore()},te.get=function(se){return gsap.parseEase(se)},te.getSVGData=function(se,ae){ae=ae||{};var ue=ae.width||100,de=ae.height||100,oe=ae.x||0,me=(ae.y||0)+de,ve=gsap.utils.toArray(ae.path)[0],Ee,Pe,ye,Te,Ae,Ce,De,Ie,ze,Re;if(ae.invert&&(de=-de,me=0),typeof se=="string"&&(se=gsap.parseEase(se)),se.custom&&(se=se.custom),se instanceof te)Ee=rawPathToString(transformRawPath([se.segment],ue,0,0,-de,oe,me));else{for(Ee=[oe,me],De=Math.max(5,(ae.precision||1)*200),Te=1/De,De+=2,Ie=5/De,ze=_round(oe+Te*ue),Re=_round(me+se(Te)*-de),Pe=(Re-me)/(ze-oe),ye=2;ye<De;ye++)Ae=_round(oe+ye*Te*ue),Ce=_round(me+se(ye*Te)*-de),(Math.abs((Ce-Re)/(Ae-ze)-Pe)>Ie||ye===De-1)&&(Ee.push(ze,Re),Pe=(Ce-Re)/(Ae-ze)),ze=Ae,Re=Ce;Ee="M"+Ee.join(",")}return ve&&ve.setAttribute("d",Ee),Ee},te}();CustomEase.version="3.13.0",CustomEase.headless=!0,_getGSAP()&&gsap.registerPlugin(CustomEase);function pxFromEm$1(te=2){try{const ee=document.body||document.documentElement,ne=parseFloat(getComputedStyle(ee).fontSize);if(!Number.isNaN(ne)&&ne>0)return te*ne;const se=document.documentElement,ae=parseFloat(getComputedStyle(se).fontSize);if(!Number.isNaN(ae)&&ae>0)return te*ae}catch{}return te*16}function getContentTopOffsetPx$1(){try{const te=window.__lenisWrapper||document.querySelector(".page-wrap")||null;if(!te)return 0;const ee=getComputedStyle(te).top;if(!ee||ee==="auto")return 0;const ne=parseFloat(ee);return Number.isFinite(ne)?ne:0}catch{return 0}}function getNodeScaleY$1(te){try{const ee=getComputedStyle(te).transform;if(!ee||ee==="none")return 1;if(ee.startsWith("matrix3d")){const ne=ee.slice(9,-1).split(",").map(se=>parseFloat(se.trim()));if(ne.length===16){const se=ne[4],ae=ne[5],ue=ne[6];return Math.sqrt(se*se+ae*ae+ue*ue)||1}return 1}if(ee.startsWith("matrix(")){const ne=ee.slice(7,-1).split(",").map(se=>parseFloat(se.trim()));if(ne.length>=4){const se=ne[1],ae=ne[3];return Math.sqrt(se*se+ae*ae)||1}return 1}return 1}catch{return 1}}function getEffectiveScaleY$1(te){let ee=1;try{let ne=te;for(;ne&&ne!==document&&ne!==document.documentElement;)ee*=getNodeScaleY$1(ne),ne=ne.parentElement||ne.parentNode}catch{}return ee||1}function prepareSplitLines(te){try{if(!te||te.__splitPrepared)return;try{te.__origHTML||(te.__origHTML=te.innerHTML)}catch{}const ee=document.createTreeWalker(te,NodeFilter.SHOW_TEXT,null),ne=[];let se;for(;se=ee.nextNode();)se.nodeValue&&se.nodeValue.trim()!==""&&ne.push(se);ne.forEach(me=>{const ve=me.parentNode,Ee=me.nodeValue.split(/(\s+)/),Pe=document.createDocumentFragment();Ee.forEach(ye=>{if(ye!=="")if(/^\s+$/.test(ye)){const Te=document.createElement("span");Te.className="ws-space",Te.style.display="inline-block",Te.style.whiteSpace="pre",Te.textContent=ye,Pe.appendChild(Te)}else{const Te=document.createElement("span");Te.className="ws-word",Te.style.display="inline-block",Te.style.whiteSpace="pre",Te.textContent=ye,Pe.appendChild(Te)}}),ve.replaceChild(Pe,me)});const ae=Array.from(te.querySelectorAll(".ws-word, .ws-space"));if(!ae.length){te.__splitPrepared=!0;return}const ue=new Map;ae.forEach(me=>{const ve=Math.round(me.offsetTop);ue.has(ve)||ue.set(ve,[]),ue.get(ve).push(me)});const de=Array.from(ue.keys()).sort((me,ve)=>me-ve),oe=document.createDocumentFragment();de.forEach(me=>{const ve=document.createElement("span");ve.className="ws-line",ve.style.display="block",ve.style.overflow="hidden";const Ee=document.createElement("span");Ee.className="ws-line-inner",Ee.style.display="inline-block",ue.get(me).forEach(ye=>{Ee.appendChild(ye)}),ve.appendChild(Ee),oe.appendChild(ve)}),te.innerHTML="",te.appendChild(oe),te.__splitPrepared=!0}catch{}}function computeTranslateToTarget(te,ee,ne,se){try{const ae=te.getBoundingClientRect(),ue=Number.isFinite(ee)?ee*(se||1):0,de=ae.top-ue,me=(ne-de)/(se||1),ve=window.devicePixelRatio||1;return Math.round(me*ve)/ve}catch{return 0}}function ensureState$1(){return window.__workshopsSticky||(window.__workshopsSticky={rafId:null,items:new Set,running:!1,offsetPx:pxFromEm$1(2),resizeHandler:null,scope:null,titles:[],descs:[],currentTextIndex:-1,tabletStickyStartY:null,tabletActiveIndex:0,tabletZIndexed:!1,debug:!1,tabletLoggedElements:!1,tabletStickyStarted:!1,tabletSectionStartTop:null,lastVHStep:-1,lastIsHandheld:null}),window.__workshopsSticky}function resetTextsAndImagesToZero(te=document){try{ensureState$1();const ee=te&&te.querySelector?te:document;let ne=!1;try{ne=(window.innerWidth||document.documentElement.clientWidth||0)<=991}catch{ne=!1}const se=ensureState$1(),ae=Array.isArray(se.titles)?se.titles:[],ue=Array.isArray(se.descs)?se.descs:[],de=me=>{try{if(!me)return;if(me.querySelector(".ws-line")||me.querySelector(".ws-word"))if(me.__origHTML)me.innerHTML=me.__origHTML;else{const ve=me.textContent||"";me.textContent=ve}try{me.__splitPrepared=!1}catch{}}catch{}};(me=>{ae.forEach((ve,Ee)=>{const Pe=Ee===me;!ve||!ve.style||(de(ve),ve.style.display=Pe?"":"none",ve.style.opacity=Pe?"1":"0",ve.style.visibility=Pe?"visible":"hidden",ve.style.pointerEvents=Pe?"auto":"none")}),ue.forEach((ve,Ee)=>{const Pe=Ee===me;!ve||!ve.style||(de(ve),ve.style.display=Pe?"":"none",ve.style.opacity=Pe?"1":"0",ve.style.visibility=Pe?"visible":"hidden",ve.style.pointerEvents=Pe?"auto":"none")})})(0);try{ae[0]&&prepareSplitLines(ae[0])}catch{}try{ue[0]&&prepareSplitLines(ue[0])}catch{}if(ne){try{const me=ee.querySelector(".workshops_left-sm");me?(me.querySelectorAll(".worskshops_img-wrap").forEach((Ee,Pe)=>{Ee.style.opacity=Pe<0?"0":"1"}),updateGreenToggle(0,me)):updateGreenToggle(0,ee)}catch{}se.tabletActiveIndex=0}else{try{(ee.querySelector(".workshops_right")||ee).querySelectorAll(".worskshops_img-wrap").forEach((Ee,Pe)=>{Ee.style.opacity=Pe<0?"0":"1"})}catch{}updateGreenToggle(0,ee)}se.currentTextIndex=0}catch{}}function updateGreenToggle(te,ee){try{const se=(ee&&ee.querySelector?ee:document).querySelector(".toggle.is-green");if(ensureState$1(),!se)return;const ae=se.querySelectorAll(".toggle-option"),ue=se.querySelectorAll(".toggle-id"),de=Math.max(0,Math.min(te,ae&&ae.length?ae.length-1:0));gsapWithCSS.parseEase("wsEase")||CustomEase.create("wsEase","M0,0 C0.6,0 0,1 1,1"),ue.forEach((me,ve)=>{const Ee=ve===de,Pe=getComputedStyle(me).color;Ee?me.classList.add("is-active"):me.classList.remove("is-active");const ye=getComputedStyle(me).color;try{me.style.color=Pe,gsapWithCSS.to(me,{color:ye,duration:.5,ease:"wsEase",onComplete:()=>{try{me.style.color=""}catch{}}})}catch{me.style.color=ye}});const oe=se.querySelector(".toggle-indicator");if(oe&&ae&&ae.length){const me=ae[0]?ae[0].offsetLeft:0,ve=ae[de]?ae[de].offsetLeft:0,Ee=Math.max(0,ve-me);gsapWithCSS.parseEase("wsEase")||CustomEase.create("wsEase","M0,0 C0.6,0 0,1 1,1");try{gsapWithCSS.to(oe,{x:Ee,duration:.5,ease:"wsEase"})}catch{oe.style.transform=`translate3d(${Ee}px, 0, 0)`}}}catch{}}function startLoop$1(){const te=ensureState$1();if(te.running)return;te.running=!0;const ee=()=>{try{const ne=pxFromEm$1(2),se=getContentTopOffsetPx$1();if(te.offsetPx=ne+se,(()=>{try{return(window.innerWidth||document.documentElement.clientWidth||0)<=991}catch{return!1}})()){const Pe=(te.scope||document).querySelector(".workshops_left-sm");if(!Pe){te.tabletStickyStartY=null,te.tabletActiveIndex=0,te.currentTextIndex=-1,te.rafId=requestAnimationFrame(ee);return}if(!te.tabletZIndexed){try{const qe=Pe.querySelectorAll(".worskshops_img-wrap");qe&&qe.length&&qe.forEach((Ze,Ue)=>{const Ye=Math.max(0,2-Ue);Ze.style.position="absolute",Ze.style.zIndex=String(Ye)})}catch{}te.tabletZIndexed=!0}te.tabletLoggedElements||(te.tabletLoggedElements=!0);let ye=!1;try{ye=Pe.getBoundingClientRect().top<=te.offsetPx,te.tabletStickyStarted=te.tabletStickyStarted||ye}catch{ye=!1}if(!ye){if(te.tabletStickyStartY!==null&&(te.tabletStickyStartY=null),te.tabletActiveIndex!==0){const qe=te.titles||[],Ze=te.descs||[];qe.forEach((Ue,Ye)=>{Ye===0?(Ue.style.display="",Ue.style.opacity="1",Ue.style.visibility="visible",Ue.style.pointerEvents="auto"):(Ue.style.opacity="0",Ue.style.visibility="hidden",Ue.style.pointerEvents="none",Ue.style.display="none")}),Ze.forEach((Ue,Ye)=>{Ye===0?(Ue.style.display="",Ue.style.opacity="1",Ue.style.visibility="visible",Ue.style.pointerEvents="auto"):(Ue.style.opacity="0",Ue.style.visibility="hidden",Ue.style.pointerEvents="none",Ue.style.display="none")});try{Pe.querySelectorAll(".worskshops_img-wrap").forEach(Ye=>{Ye.style.opacity="1"})}catch{}te.currentTextIndex=0,te.tabletActiveIndex=0,updateGreenToggle(0,Pe)}te.rafId=requestAnimationFrame(ee);return}if(te.tabletSectionStartTop===null)try{const qe=Pe.closest&&Pe.closest(".workshops")||(te.scope||document).querySelector(".workshops"),Ze=qe?qe.getBoundingClientRect():null,Ue=Pe.getBoundingClientRect(),Ye=Math.max(0,te.offsetPx-Ue.top);te.tabletSectionStartTop=Ze?Ze.top+Ye:0}catch{te.tabletSectionStartTop=0}const Te=window&&window.innerHeight||document.documentElement.clientHeight||0;let Ae=0;try{const qe=Pe.closest&&Pe.closest(".workshops")||(te.scope||document).querySelector(".workshops"),Ze=qe?qe.getBoundingClientRect():null,Ue=Ze?Ze.top:0;Ae=Math.max(0,(te.tabletSectionStartTop||0)-Ue)}catch{Ae=0}const Ce=Math.max(1,Te*.5);let De=Math.floor(Ae/Ce);try{const qe=Te?Ae*100/Te:0,Ze=Math.floor(qe);if(te.lastVHStep<0)te.lastVHStep=Ze;else if(Ze>te.lastVHStep)for(;te.lastVHStep<Ze;)te.lastVHStep+=1,console.log("1vh scroll\xE9");else Ze<te.lastVHStep&&(te.lastVHStep=Ze)}catch{}const Ie=te.titles||[],ze=te.descs||[],Re=Pe.querySelectorAll(".worskshops_img-wrap"),Oe=Math.max(0,Math.min(Ie.length||0,ze.length||0,Re&&Re.length?Re.length:0)-1);if((!Number.isFinite(De)||De<0)&&(De=0),Oe>=0?De=Math.min(De,Oe):De=0,De!==te.tabletActiveIndex){if(updateGreenToggle(De,Pe),te.currentTextIndex>=0){const Ue=Ie[te.currentTextIndex],Ye=ze[te.currentTextIndex];Ue&&(Ue.classList.remove("is-active"),Ue.style.opacity="0",Ue.style.visibility="hidden",Ue.style.pointerEvents="none",Ue.style.display="none"),Ye&&(Ye.classList.remove("is-active"),Ye.style.opacity="0",Ye.style.visibility="hidden",Ye.style.pointerEvents="none",Ye.style.display="none")}const qe=Ie[De],Ze=ze[De];qe&&(qe.style.display="",qe.style.opacity="0",qe.style.visibility="visible",qe.style.pointerEvents="auto",qe.classList.add("is-active"),prepareSplitLines(qe)),Ze&&(Ze.style.display="",Ze.style.opacity="0",Ze.style.visibility="visible",Ze.style.pointerEvents="auto",Ze.classList.add("is-active"),prepareSplitLines(Ze));try{gsapWithCSS.parseEase("wsEase")||CustomEase.create("wsEase","M0,0 C0.6,0 0,1 1,1");const Ue=gsapWithCSS.timeline({defaults:{duration:.5,ease:"wsEase"}});Re.forEach((ct,at)=>{const ft=at<De?0:1;Ue.to(ct,{opacity:ft},0)});const Ye=ct=>{if(!!ct)try{const at=ct.querySelectorAll(".ws-line-inner");gsapWithCSS.set(ct,{opacity:1}),at&&at.length&&(gsapWithCSS.set(at,{y:"1em",opacity:0}),Ue.to(at,{y:0,opacity:1,stagger:.06},0))}catch{}};Ye(qe),Ye(Ze)}catch{try{Re.forEach((Ye,ct)=>{Ye.style.opacity=ct<De?"0":"1"})}catch{}}te.currentTextIndex=De,te.tabletActiveIndex=De}te.rafId=requestAnimationFrame(ee);return}let ue=1/0;te.items.forEach(Pe=>{try{const ye=Pe.el;if(!ye||!ye.isConnected)return;const Te=Pe.scaleY||1,Ae=ye.getBoundingClientRect(),Ce=Number.isFinite(Pe.lastY)?Pe.lastY*(Te||1):0,De=Ae.top-Ce;De<ue&&(ue=De)}catch{}});let de=1/0;try{const ye=((te.scope||document).querySelector(".workshops_right")||document).querySelectorAll(".worskshops_img-wrap");ye&&ye.length&&(de=ye[ye.length-1].getBoundingClientRect().top)}catch{}let oe=0,me=0;try{const Pe=document.querySelector(".workshops_right");if(Pe){const ye=Pe.getBoundingClientRect();oe=ye.top,me=ye.bottom}}catch{}const ve=ue<=te.offsetPx&&de>te.offsetPx,Ee=de<=te.offsetPx;try{const ye=((te.scope||document).querySelector(".workshops_right")||document).querySelectorAll(".worskshops_img-wrap");if(ye&&ye.length){if(!ve&&!Ee&&te.currentTextIndex!==0){const De=te.titles||[],Ie=te.descs||[];De.forEach((ze,Re)=>{const Oe=Re===0;ze.style.display=Oe?"":"none",ze.style.opacity=Oe?"1":"0",ze.style.visibility=Oe?"visible":"hidden",ze.style.pointerEvents=Oe?"auto":"none"}),Ie.forEach((ze,Re)=>{const Oe=Re===0;ze.style.display=Oe?"":"none",ze.style.opacity=Oe?"1":"0",ze.style.visibility=Oe?"visible":"hidden",ze.style.pointerEvents=Oe?"auto":"none"}),ye.forEach(ze=>{ze.style.opacity="1"}),updateGreenToggle(0),te.currentTextIndex=0}let Te=-1;const Ce=(window&&window.innerHeight||document.documentElement.clientHeight||0)*.5;for(let De=0;De<ye.length&&ye[De].getBoundingClientRect().top<=Ce;De+=1)Te=De;if(Te!==-1&&Te!==te.currentTextIndex&&te.titles&&te.descs){if(updateGreenToggle(Te),te.currentTextIndex>=0){const Re=te.titles[te.currentTextIndex],Oe=te.descs[te.currentTextIndex];Re&&(Re.style.opacity="0",Re.style.visibility="hidden",Re.style.pointerEvents="none",Re.style.display="none"),Oe&&(Oe.style.opacity="0",Oe.style.visibility="hidden",Oe.style.pointerEvents="none",Oe.style.display="none")}const De=te.titles[Te],Ie=te.descs[Te];De&&(De.style.display="",De.style.opacity="1",De.style.visibility="visible",De.style.pointerEvents="auto"),Ie&&(Ie.style.display="",Ie.style.opacity="1",Ie.style.visibility="visible",Ie.style.pointerEvents="auto"),prepareSplitLines(De),prepareSplitLines(Ie);const ze=Re=>{try{const Oe=Re.querySelectorAll(".ws-line-inner");let qe=0;const Ze=.06;gsapWithCSS.parseEase("wsEase")||CustomEase.create("wsEase","M0,0 C0.6,0 0,1 1,1"),Oe.forEach(Ue=>{gsapWithCSS.fromTo(Ue,{y:"1em",opacity:0},{y:0,opacity:1,duration:.5,ease:"wsEase",delay:qe}),qe+=Ze})}catch{}};ze(De),ze(Ie),te.currentTextIndex=Te}}}catch{}te.items.forEach(Pe=>{const{el:ye}=Pe;if(!ye||!ye.isConnected)return;const Te=Pe.scaleY||1;if(!ve&&!Ee){const Ae=oe,Ce=computeTranslateToTarget(ye,Pe.lastY,Ae,Te);(!Number.isFinite(Pe.lastY)||Ce!==Pe.lastY)&&(ye.style.transform=`translate3d(0, ${Ce}px, 0)`,Pe.lastY=Ce);try{const De=ye.getBoundingClientRect(),Ie=ye.closest?ye.closest(".worskshops_img-wrap"):null,ze=Ie?Ie.getBoundingClientRect():De,Re=window&&window.innerHeight||document.documentElement.clientHeight||0,Oe=Math.max(1,Re+ze.height),qe=Re-ze.top,Ue=-Math.max(0,Math.min(1,qe/Oe))*.1*(De.height||0),Ye=Pe.img||ye.querySelector&&(ye.querySelector(".workshops_img")||ye.querySelector("img"));Ye&&(Pe.img||(Pe.img=Ye),(!Number.isFinite(Pe.lastImgY)||Ue!==Pe.lastImgY)&&(Ye.style.transform=`translate3d(0, ${Ue}px, 0)`,Pe.lastImgY=Ue))}catch{}return}if(Ee){const Ae=ye.getBoundingClientRect(),Ce=me-Ae.height,De=computeTranslateToTarget(ye,Pe.lastY,Ce,Te);(!Number.isFinite(Pe.lastY)||De!==Pe.lastY)&&(ye.style.transform=`translate3d(0, ${De}px, 0)`,Pe.lastY=De);try{const Ie=ye.getBoundingClientRect(),ze=ye.closest?ye.closest(".worskshops_img-wrap"):null,Re=ze?ze.getBoundingClientRect():Ie,Oe=window&&window.innerHeight||document.documentElement.clientHeight||0,qe=Math.max(1,Oe+Re.height),Ze=Oe-Re.top,Ye=-Math.max(0,Math.min(1,Ze/qe))*.1*(Ie.height||0),ct=Pe.img||ye.querySelector&&(ye.querySelector(".workshops_img")||ye.querySelector("img"));ct&&(Pe.img||(Pe.img=ct),(!Number.isFinite(Pe.lastImgY)||Ye!==Pe.lastImgY)&&(ct.style.transform=`translate3d(0, ${Ye}px, 0)`,Pe.lastImgY=Ye))}catch{}return}{const Ae=ye.getBoundingClientRect();let Ce=te.offsetPx;try{const Ie=ye.closest?ye.closest(".section_workshops"):null;if(Ie){const Re=Ie.getBoundingClientRect().bottom-Ae.height;Ce>Re&&(Ce=Re)}}catch{}const De=computeTranslateToTarget(ye,Pe.lastY,Ce,Te);(!Number.isFinite(Pe.lastY)||De!==Pe.lastY)&&(ye.style.transform=`translate3d(0, ${De}px, 0)`,Pe.lastY=De);try{const Ie=ye.getBoundingClientRect(),ze=ye.closest?ye.closest(".worskshops_img-wrap"):null,Re=ze?ze.getBoundingClientRect():Ie,Oe=window&&window.innerHeight||document.documentElement.clientHeight||0,qe=Math.max(1,Oe+Re.height),Ze=Oe-Re.top,Ye=-Math.max(0,Math.min(1,Ze/qe))*.1*(Ie.height||0),ct=Pe.img||ye.querySelector&&(ye.querySelector(".workshops_img")||ye.querySelector("img"));ct&&(Pe.img||(Pe.img=ct),(!Number.isFinite(Pe.lastImgY)||Ye!==Pe.lastImgY)&&(ct.style.transform=`translate3d(0, ${Ye}px, 0)`,Pe.lastImgY=Ye))}catch{}}})}catch{}te.rafId=requestAnimationFrame(ee)};te.rafId=requestAnimationFrame(ee)}function stopLoopIfIdle$1(){const te=ensureState$1();if(!te.items.size&&te.running){try{cancelAnimationFrame(te.rafId)}catch{}te.rafId=null,te.running=!1}}function initWorkshopsStickyImages(te=document){const ee=ensureState$1(),ne=te&&te.querySelector?te:document;ee.scope=ne;const se=(()=>{try{return(window.innerWidth||document.documentElement.clientWidth||0)<=991}catch{return!1}})();ee.lastIsHandheld=se;const ae=se?[]:ne.querySelectorAll(".workshops_img-view"),ue=[];ae.forEach(de=>{let oe=!1;if(ee.items.forEach(ve=>{ve.el===de&&(oe=!0)}),oe)return;const me=getEffectiveScaleY$1(de);try{de.style.willChange="transform"}catch{}ee.items.add({el:de,lastY:NaN,scaleY:me}),ue.push(de)}),(se||ee.items.size)&&startLoop$1();try{ee.resizeHandler&&window.removeEventListener("resize",ee.resizeHandler)}catch{}ee.resizeHandler=(()=>{let de;const oe=Ee=>{try{const Pe=ensureState$1();Pe.currentTextIndex=-1,Ee&&(Pe.tabletSectionStartTop=null,Pe.tabletLoggedElements=!1,Pe.tabletStickyStarted=!1,Pe.tabletStickyStartY=null,Pe.tabletActiveIndex=0)}catch{}},me=()=>{try{if(window.__lenisWrapper&&window.__lenisWrapper.scrollTop!==void 0)return{type:"element",el:window.__lenisWrapper}}catch{}try{const Ee=document.scrollingElement||document.documentElement||document.body;return{type:"element",el:Ee}}catch{return{type:"window",el:null}}},ve=()=>{try{const Pe=(ee.scope||document).querySelector(".section_workshops")||null;if(!Pe)return;let ye=0;const Te=()=>{try{const Ae=me(),Ce=Ae.type==="element"?Ae.el.scrollTop||0:window.pageYOffset||0,De=Pe.getBoundingClientRect(),Ie=Ce+De.top;Math.abs(De.top)>1&&(Ae.type==="element"?Ae.el.scrollTop=Ie:window.scrollTo(0,Ie))}catch{}ye+=1,ye<3&&requestAnimationFrame(Te)};requestAnimationFrame(Te),ee.tabletStickyStarted=!1,ee.lastVHStep=-1,ee.tabletSectionStartTop=0}catch{}};return()=>{clearTimeout(de),de=setTimeout(()=>{let Ee=!1;try{Ee=(window.innerWidth||document.documentElement.clientWidth||0)<=991}catch{Ee=!1}if(ee.lastIsHandheld!==Ee){try{destroyWorkshopsStickyImages()}catch{}ee.lastIsHandheld=Ee;try{initWorkshopsStickyImages(ee.scope||document),requestAnimationFrame(()=>{resetTextsAndImagesToZero(ee.scope||document),Ee&&(ve(),ee.tabletStickyStarted=!1,ee.lastVHStep=-1)})}catch{}return}ee.items.forEach(Pe=>{try{Pe.scaleY=getEffectiveScaleY$1(Pe.el)}catch{Pe.scaleY=1}}),oe(Ee),resetTextsAndImagesToZero(ee.scope||document),Ee&&ve()},100)}})(),window.addEventListener("resize",ee.resizeHandler),!se&&!ue.length&&stopLoopIfIdle$1();try{const de=se;ee.tabletZIndexed=!1,ee.tabletStickyStartY=null,ee.tabletActiveIndex=0,ee.tabletLoggedElements=!1,ee.tabletStickyStarted=!1,ee.tabletSectionStartTop=null;const oe=Array.from((ne||document).querySelectorAll(".workshops_left-sm .workshops_left_middle .body-xl.is-black")),me=Array.from((ne||document).querySelectorAll(".workshops_left-sm .workshops_left_bottom .body-s")),ve=Array.from((ne||document).querySelectorAll(".workshops_left .workshops_left_middle .body-xl.is-black")),Ee=Array.from((ne||document).querySelectorAll(".workshops_left .workshops_left_bottom .body-s"));de?(ee.titles=oe.length?oe:ve,ee.descs=me.length?me:Ee):(ee.titles=ve.length?ve:oe,ee.descs=Ee.length?Ee:me),(Te=>{ee.titles.forEach((Ae,Ce)=>{Ce===Te?(Ae.style.display="",Ae.style.opacity="1",Ae.style.visibility="visible",Ae.style.pointerEvents="auto"):(Ae.style.opacity="0",Ae.style.visibility="hidden",Ae.style.pointerEvents="none",Ae.style.display="none")}),ee.descs.forEach((Ae,Ce)=>{Ce===Te?(Ae.style.display="",Ae.style.opacity="1",Ae.style.visibility="visible",Ae.style.pointerEvents="auto"):(Ae.style.opacity="0",Ae.style.visibility="hidden",Ae.style.pointerEvents="none",Ae.style.display="none")}),ee.currentTextIndex=Te})(0)}catch{}return ue}function destroyWorkshopsStickyImages(){const te=ensureState$1();try{te.items.forEach(ee=>{ee&&ee.el&&(ee.el.style.transform="",ee.el.style.willChange="")})}catch{}te.items.clear();try{te.resizeHandler&&(window.removeEventListener("resize",te.resizeHandler),te.resizeHandler=null)}catch{}stopLoopIfIdle$1()}function initAbout(te=document){try{const ue=te&&te.nodeType===1?te:document,oe=ue&&ue.getAttribute&&ue.getAttribute("data-barba-namespace")==="About us"?ue:ue.querySelector('[data-barba-namespace="About us"]');if(!oe)return;te=oe}catch{return}const ee=ue=>{if(!!ue)try{(window.getComputedStyle(ue).display==="none"||ue.style.display==="none")&&(ue.style.display="block"),ue.style.willChange="opacity",(!ue.style.transition||!ue.style.transition.includes("opacity"))&&(ue.style.transition="opacity 0.5s ease"),ue.style.opacity||(ue.style.opacity="1")}catch{}},ne=ue=>{if(!!ue)try{ue.style.opacity="0"}catch{}},se=ue=>{if(!!ue)try{ue.style.opacity="1"}catch{}},ae=()=>{const ue=te.querySelector(".story_content"),de=te.querySelector(".story_intro_inner"),oe=te.querySelector(".story_videos.is-1"),me=te.querySelector(".story_videos.is-2"),ve=te.querySelector(".story_videos.is-3"),Ee=te.querySelector(".story_videos.is-4"),Pe=[oe,me,ve,Ee],ye=Array.from(te.querySelectorAll(".intro.is-story"));Pe.forEach(ee);try{Array.from(te.querySelectorAll(".scroll-item")).forEach(ee)}catch{}const Te=Qe=>{try{if(!Qe)return null;const it=Qe.querySelector(".story_video")||Qe;return it?it.querySelector("video"):null}catch{return null}},Ae=()=>{},Ce=Pe.map(Qe=>Te(Qe)),De=new Array(Pe.length).fill(!1),Ie=new Map;Pe.forEach((Qe,it)=>Qe&&Ie.set(Qe,it));const ze=Qe=>{if(!!Qe)try{Qe.muted=!0,Qe.playsInline=!0}catch{}},Re=Qe=>{for(let it=0;it<Ce.length;it+=1){const Ge=Ce[it];if(!(!Ge||it===Qe))try{Ge.pause()}catch{}}},Oe=Qe=>{try{const it=Ce[Qe];if(!it)return;ze(it),!De[Qe]&&typeof it.currentTime=="number"&&(it.currentTime=0);const Ge=it.play();Ge&&typeof Ge.then=="function"&&Ge.then(void 0,Ae),De[Qe]=!0,Re(Qe)}catch{}};if(!ue)return null;let qe=-1;const Ze=Qe=>{typeof Qe!="number"||Qe<0||Qe>=Pe.length||qe!==Qe&&(qe=Qe,Pe.forEach((it,Ge)=>{!it||(Ge===Qe?se(it):ne(it))}),Oe(Qe))},Ue=()=>{try{if(!de)return 0;const Qe=de.getBoundingClientRect(),it=Qe.top+Qe.height;return it<=0?-it:0}catch{return 0}},Ye=Array.from(te.querySelectorAll(".intro.is-story > .eyebrows, .intro.is-story .eyebrows"));Ye.forEach(Qe=>{try{Qe.style.transition="color 0.5s ease, background-color 0.5s ease, border-color 0.5s ease"}catch{}try{Qe.querySelectorAll(".is-eyebrow").forEach(Ge=>{try{Ge.style.transition="color 0.5s ease, background-color 0.5s ease, border-color 0.5s ease"}catch{}})}catch{}});let ct=null;const at=()=>{const Qe=Ue();try{ye.forEach(Ge=>{!Ge||!Ge.style||(Qe>0?Ge.style.height="100svh":Ge.style.height="")})}catch{}const it=Qe>0;ct!==it&&(Ye.forEach(Ge=>{try{it?Ge.classList.add("is-white"):Ge.classList.remove("is-white")}catch{}try{const je=Ge.querySelectorAll(".is-eyebrow"),Ke=je&&je.length?je[je.length-1]:null;Ke&&(it?Ke.classList.remove("is-black"):Ke.classList.add("is-black"))}catch{}}),ct=it);try{const Ge=ue.getBoundingClientRect(),je=typeof window!="undefined"&&window.innerHeight||document.documentElement&&document.documentElement.clientHeight||0;if(je>0&&Qe>0){const Ke=Ge&&Ge.height?Ge.height:0,lt=Math.max(1,Ke-je),Bt=Math.max(-Ge.top,0),Xt=Math.min(Bt,lt),Gt=lt/Pe.length,lr=Math.min(Pe.length-1,Math.floor(Xt/Gt));Ze(lr)}}catch{}};at();const ft=()=>at(),pt=()=>at();window.addEventListener("scroll",ft,{passive:!0}),window.addEventListener("resize",pt);const Mt=typeof window!="undefined"&&window.__lenisWrapper||null;Mt&&Mt.addEventListener&&Mt.addEventListener("scroll",ft,{passive:!0});let At=null;const _t=()=>{at(),At=requestAnimationFrame(_t)};return At=requestAnimationFrame(_t),()=>{window.removeEventListener("scroll",ft),window.removeEventListener("resize",pt),Mt&&Mt.removeEventListener&&Mt.removeEventListener("scroll",ft),At!=null&&cancelAnimationFrame(At)}};try{ae();try{initWorkshopsStickyImages(te)}catch{}}catch{}}gsapWithCSS.registerPlugin(ScrollTrigger);function initParallax(te=document){try{Array.isArray(window.__parallaxTweens)&&window.__parallaxTweens.length&&window.__parallaxTweens.forEach(ve=>{try{ve&&ve.scrollTrigger&&ve.scrollTrigger.kill(),ve&&ve.kill()}catch{}}),window.__parallaxResizeHandler&&window.removeEventListener("resize",window.__parallaxResizeHandler)}catch{}const ne=(te&&te.querySelector?te:document).querySelectorAll(".image-p");if(!ne.length)return window.__parallaxTweens=[],[];const se=window.__lenisWrapper||void 0,ae=[],ue=ve=>{try{const Ee=ve.closest(".image-wrapper, .machine-card_bg")||ve.parentElement;if(!Ee)return null;window.getComputedStyle(Ee).position==="static"&&(Ee.style.position="relative"),Ee.style.overflow="hidden";const ye=!!(ve.closest&&ve.closest(".section_img.is-big-safety")),Te=!!(ve.classList&&ve.classList.contains("is-safety")),Ae=()=>{if(ye)return;const Re=Ee.clientWidth||ve.clientWidth;let Oe=0;ve.naturalWidth&&ve.naturalHeight?Oe=ve.naturalHeight/ve.naturalWidth:ve.clientWidth&&ve.clientHeight?Oe=ve.clientHeight/ve.clientWidth:Oe=9/16,Re&&(Ee.style.height=`${Math.round(Re*Oe)}px`)};if(ve.closest("figure.w-richtext-figure-type-image.w-richtext-align-fullwidth")){if(requestAnimationFrame(()=>{requestAnimationFrame(()=>{Ae();try{ScrollTrigger.refresh()}catch{}})}),!Ee.__rteFwResizeObserver)try{const Re=new ResizeObserver(()=>{Ae();try{ScrollTrigger.refresh()}catch{}});Re.observe(Ee),Ee.__rteFwResizeObserver=Re}catch{setTimeout(()=>{Ae();try{ScrollTrigger.refresh()}catch{}},60)}}else Ae();const De=10,Ie=1+2*De/100,ze=-(De/100*Ie*100);return ve.style.position="absolute",ve.style.left="0",ve.style.right="0",ve.style.top=`${ze}%`,Te&&ye||(Ee.classList&&Ee.classList.contains("machine-card_bg")?ve.style.width="100%":ve.style.width="120%"),ve.style.height=`${Ie*100}%`,ve.style.objectFit="cover",ve.style.willChange="transform",Ee}catch{return null}},de=ve=>{if(ve.complete&&ve.naturalWidth)return ue(ve);let Ee=null;const Pe=()=>{Ee=ue(ve),ve.removeEventListener("load",Pe),ScrollTrigger.refresh()};return ve.addEventListener("load",Pe),Ee};ne.forEach(ve=>{try{gsapWithCSS.set(ve,{willChange:"transform"});const Ee=de(ve)||ve,Pe=gsapWithCSS.fromTo(ve,{yPercent:-10},{yPercent:10,ease:"none",scrollTrigger:{trigger:Ee,start:"top bottom",end:"bottom top",scrub:!0,scroller:se}});ae.push(Pe)}catch{}});const oe=()=>{ne.forEach(ve=>ue(ve)),ScrollTrigger.refresh()};let me;return window.__parallaxResizeHandler=()=>{clearTimeout(me),me=setTimeout(oe,100)},window.addEventListener("resize",window.__parallaxResizeHandler),window.__parallaxTweens=ae,ScrollTrigger.refresh(),ae}function initHeroBackgroundParallax(te=document){try{if(window.__heroBgParallax){try{window.__heroBgParallax.scrollTrigger&&window.__heroBgParallax.scrollTrigger.kill()}catch{}try{window.__heroBgParallax.kill()}catch{}window.__heroBgParallax=null}}catch{}const ee=te&&te.querySelector?te:document,ne=ee.querySelector&&ee.querySelector(".hero-background .background-inner")||document.querySelector(".hero-background .background-inner");if(!ne)return null;const se=window.__lenisWrapper||void 0,ae=40;try{gsapWithCSS.set(ne,{willChange:"transform"})}catch{}const ue=ne.parentElement||ne,de=gsapWithCSS.fromTo(ne,{y:0},{y:ae,ease:"none",immediateRender:!1,scrollTrigger:{trigger:ue,start:"top top",end:"bottom top",scrub:!0,scroller:se,invalidateOnRefresh:!0,onRefresh:()=>{gsapWithCSS.set(ne,{y:0})}}});try{window.__heroBgParallax=de}catch{}return de}function initHeroBlogImageParallax(te=document){try{if(window.__heroBlogParallax){try{window.__heroBlogParallax.scrollTrigger&&window.__heroBlogParallax.scrollTrigger.kill()}catch{}try{window.__heroBlogParallax.kill()}catch{}window.__heroBlogParallax=null}}catch{}const ee=te&&te.querySelector?te:document,ne=ee.querySelector&&ee.querySelector(".hero_blog-img")||document.querySelector(".hero_blog-img");if(!ne)return null;const se=ne.querySelector("img");if(!se)return null;const ae=window.__lenisWrapper||void 0,ue=40;try{gsapWithCSS.set(se,{willChange:"transform"})}catch{}let de=376;try{const ve=document.documentElement,Ee=document.body,Pe=ne.closest(".section_hero-blog")||ne.parentElement||Ee,ye=getComputedStyle(Pe).fontSize,Te=getComputedStyle(Ee).fontSize,Ae=getComputedStyle(ve).fontSize,Ce=parseFloat(ye),De=parseFloat(Te),Ie=parseFloat(Ae),Re=[Ce,De,Ie,16].find(Oe=>Number.isFinite(Oe)&&Oe>0)||16;de=Math.round(Re*23.5)}catch{}const oe="top top+="+de,me=gsapWithCSS.to(se,{y:ue,ease:"none",immediateRender:!1,scrollTrigger:{trigger:ne,start:oe,end:"bottom top",scrub:!0,scroller:ae}});try{window.__heroBlogParallax=me}catch{}try{ScrollTrigger.refresh()}catch{}return me}function initNextBackgroundParallax(te=document){try{if(Array.isArray(window.__nextBgParallaxTweens)&&window.__nextBgParallaxTweens.length&&window.__nextBgParallaxTweens.forEach(Ee=>{try{Ee&&Ee.scrollTrigger&&Ee.scrollTrigger.kill(),Ee&&Ee.kill()}catch{}}),window.__nextBgParallaxResizeHandler&&window.removeEventListener("resize",window.__nextBgParallaxResizeHandler),window.__nextBgParallaxRafId){try{cancelAnimationFrame(window.__nextBgParallaxRafId)}catch{}window.__nextBgParallaxRafId=null}window.__nextBgParallaxCallbacks=[]}catch{}const ne=(te&&te.querySelector?te:document).querySelectorAll(".section_next .next_background");if(!ne.length)return window.__nextBgParallaxTweens=[],[];const se=window.__lenisWrapper||void 0;if(!se)return window.__deferNextBgOnce||(window.__deferNextBgOnce=!0,requestAnimationFrame(()=>{try{window.__deferNextBgOnce=!1,initNextBackgroundParallax(te)}catch{}})),[];const ae=[],ue=[],de=Ee=>{try{const Pe=Ee.closest(".section_next")||Ee.parentElement;return window.getComputedStyle(Ee).position==="static"&&(Ee.style.position="absolute"),Ee.style.inset="0%",Ee.style.overflow="hidden",gsapWithCSS.set(Ee,{transformOrigin:"50% 50%",willChange:"transform",scale:1.2}),Pe||Ee}catch{return Ee}},oe=Ee=>de(Ee);ne.forEach(Ee=>{try{const Pe=oe(Ee)||Ee,ye=40,Te=gsapWithCSS.quickSetter(Ee,"y","px"),Ae=()=>{try{const De=Ee.getBoundingClientRect(),Ie=De.top+De.height/2,ze=window.innerHeight/2,Re=Math.max(1,De.height/2+window.innerHeight/2),Oe=(Ie-ze)/Re,qe=Math.max(-1,Math.min(1,Oe));Te(qe*ye)}catch{}},Ce=ScrollTrigger.create({trigger:Pe,start:"top bottom",end:"bottom top",scrub:!0,scroller:se,invalidateOnRefresh:!0,onInit:Ae,onRefresh:Ae,onUpdate:Ae});ae.push(Ce),ue.push(Ae)}catch{}});const me=()=>{ne.forEach(Ee=>de(Ee)),ScrollTrigger.refresh()};let ve;window.__nextBgParallaxResizeHandler=()=>{clearTimeout(ve),ve=setTimeout(me,100)},window.addEventListener("resize",window.__nextBgParallaxResizeHandler),window.__nextBgParallaxTweens=ae;try{if(ue.length){const Ee=()=>{try{ue.forEach(Pe=>{try{Pe&&Pe()}catch{}})}catch{}window.__nextBgParallaxRafId=requestAnimationFrame(Ee)};window.__nextBgParallaxCallbacks=ue,window.__nextBgParallaxRafId=requestAnimationFrame(Ee)}}catch{}return ScrollTrigger.refresh(),ae}function blogArticleInit(te=document){try{const se=te&&te.nodeType===1?te:document,ue=se&&se.getAttribute&&se.getAttribute("data-barba-namespace")==="article"?se:se.querySelector('[data-barba-namespace="article"]');if(!ue)return;te=ue}catch{return}const ee=se=>{try{const ae=se&&se.querySelector&&se.querySelector(".section_blog-inner")||se||document;Array.from((ae||document).querySelectorAll(".blog-date .eyebrow-m")).forEach(de=>{try{if(de.dataset.abbrevApplied==="1")return;const me=(de.textContent||"").replace(/\s+/g," ").trim();if(!me)return;const ve=me.match(/^(\s*)(\S+)([\s\S]*)$/);if(!ve)return;const Ee=ve[1]||"",Pe=ve[2]||"",ye=ve[3]||"",Te=Pe.slice(0,3);let Ae=Ee+Te+ye;Ae=Ae.replace(/,\s*/,",<br> "),de.innerHTML=Ae,de.dataset.abbrevApplied="1"}catch{}})}catch{}},ne=se=>{try{const ae=se&&se.nodeType===1?se:document,ue=ae.querySelector(".section_blog-inner")||ae;Array.from(ue.querySelectorAll(".blog-name > h2.body-l")).forEach(oe=>{try{if(oe.dataset.linesSplit)return;const ve=(oe.textContent||"").split(/\s+/);oe.textContent="",ve.forEach((Ee,Pe)=>{const ye=document.createElement("span");ye.className="blogline-word",ye.textContent=Ee,oe.appendChild(ye),Pe<ve.length-1&&oe.appendChild(document.createTextNode(" "))}),requestAnimationFrame(()=>{try{const Ee=Array.from(oe.querySelectorAll(".blogline-word"));if(!Ee.length)return;let Pe=null,ye=null;Ee.forEach(Te=>{const Ae=Te.offsetTop;(Pe===null||Math.abs(Ae-Pe)>1)&&(Pe=Ae,ye=document.createElement("span"),ye.className="blogline-line",oe.insertBefore(ye,Te)),ye.appendChild(Te);const Ce=ye.nextSibling;Te.nextSibling&&Te.nextSibling.nodeType===Node.TEXT_NODE?ye.appendChild(Te.nextSibling):Ce&&Ce.nodeType===Node.TEXT_NODE&&ye.appendChild(Ce)}),oe.dataset.linesSplit="true"}catch{}})}catch{}})}catch{}};try{ee(te),ne(te);try{(te&&te.nodeType===1?te:document).querySelectorAll(".w-richtext figure > div > img, .w-richtext figure.w-richtext-align-fullwidth > div > img").forEach(ue=>{try{ue.classList.contains("image-p")||ue.classList.add("image-p");const de=ue.parentElement;de&&de.classList&&!de.classList.contains("image-wrapper")&&de.classList.add("image-wrapper")}catch{}});try{initParallax(te),initHeroBlogImageParallax(te)}catch{}}catch{}try{const se=te&&te.nodeType===1?te:document,ae=se.querySelector(".section_blog-inner")||se;let ue=Array.from(ae.querySelectorAll(".blog-main_item"));const de=document.querySelector(".cursor-pointer");if(de){de.style.display="none";try{de.style.pointerEvents="none"}catch{}try{const oe=de.querySelector(".cursor-pointer_inner")||de.firstElementChild;if(oe){const me=getComputedStyle(oe).transition||"";/transform/.test(me)||(oe.style.transition=(me?me+", ":"")+"transform 300ms cubic-bezier(0.6, 0, 0, 1)"),oe.style.transform="translateY(100%)";const ve=de.style.visibility,Ee=de.style.display,Pe=getComputedStyle(de).display==="none";Pe&&(de.style.visibility="hidden",de.style.display="flex");const ye=oe.getBoundingClientRect();de.dataset.__cursorInnerW=String(Math.ceil(ye.width)),de.dataset.__cursorInnerH=String(Math.ceil(ye.height)),Pe&&(de.style.display=Ee||"none",de.style.visibility=ve||"")}}catch{}}if(ue.length&&de){let oe=8,me=null;const ve=()=>{try{const Ae=parseFloat(getComputedStyle(de).fontSize)||16;oe=1*Ae}catch{oe=8}};ve();const Ee=()=>{const Ae=de.querySelector(".cursor-pointer_inner")||de.firstElementChild;try{const Ce=de.dataset.__cursorInnerW,De=de.dataset.__cursorInnerH;Ce&&(de.style.width=Ce+"px"),De&&(de.style.height=De+"px")}catch{}if(de.style.display="flex",Ae){if(me){try{Ae.removeEventListener("transitionend",me)}catch{}me=null}Ae.style.transform="translateY(100%)",Ae.getBoundingClientRect(),Ae.style.transform="translateY(0)"}},Pe=()=>{const Ae=de.querySelector(".cursor-pointer_inner")||de.firstElementChild;Ae?(me=()=>{de.style.display="none";try{Ae.removeEventListener("transitionend",me)}catch{}me=null,Ae.style.transform="translateY(100%)"},Ae.addEventListener("transitionend",me,{once:!0}),Ae.style.transform="translateY(100%)"):de.style.display="none"},ye=Ae=>{de.style.left=Ae.pageX+oe+"px",de.style.top=Ae.pageY+oe+"px"},Te=Ae=>{!Ae||Ae.dataset.cursorBound==="1"||(Ae.addEventListener("mouseenter",Ee),Ae.addEventListener("mouseleave",Pe),Ae.addEventListener("mousemove",ye),Ae.dataset.cursorBound="1")};ue.forEach(Ae=>Te(Ae));try{new MutationObserver(Ce=>{Ce.forEach(De=>{De.addedNodes.forEach(Ie=>{if(!(Ie&&Ie.nodeType===1))return;Ie.classList&&Ie.classList.contains("blog-main_item")&&Te(Ie),(Ie.querySelectorAll?Ie.querySelectorAll(".blog-main_item"):[]).forEach(Re=>Te(Re))})})}).observe(ae,{childList:!0,subtree:!0})}catch{}window.addEventListener("resize",ve)}}catch{}try{requestAnimationFrame(()=>{try{ee(te),ne(te);try{initParallax(te),initHeroBlogImageParallax(te)}catch{}}catch{}})}catch{}}catch{}}function initBlog(te=document){try{const ee=te&&te.nodeType===1?te:document,se=ee&&ee.getAttribute&&ee.getAttribute("data-barba-namespace")==="Blog"?ee:ee.querySelector('[data-barba-namespace="Blog"]');if(!se)return;te=se}catch{return}try{if(!document.querySelector('script[src="https://cdn.jsdelivr.net/npm/@finsweet/attributes@2/attributes.js"][fs-list]')){const ne=document.createElement("script");ne.setAttribute("async",""),ne.setAttribute("type","module"),ne.setAttribute("src","https://cdn.jsdelivr.net/npm/@finsweet/attributes@2/attributes.js"),ne.setAttribute("fs-list",""),(document.head||document.documentElement).appendChild(ne)}}catch{}try{const ee=document.getElementById("all");if(ee){const ne=te&&te.nodeType===1?te:document,se=ne.querySelector(".blog-inner_categories")||ne,ae=ne.querySelector(".blog-categories-list")||se,ue=()=>{try{const de=!!ne.querySelector(".blog-category.is-list-active");ee.classList.toggle("is-o-30",de),ee.classList.toggle("is-list-active",!de)}catch{}};ue(),se.addEventListener("change",de=>{try{de.target&&de.target.matches&&de.target.matches('input[name="Blog-category"]')&&setTimeout(ue,0)}catch{}},!0);try{const de=document.getElementById("all");de&&de.addEventListener("click",()=>setTimeout(ue,0),!0)}catch{}se.addEventListener("click",de=>{try{(de.target&&de.target.closest?de.target.closest(".blog-category"):null)&&setTimeout(ue,0)}catch{}},!0);try{new MutationObserver(()=>ue()).observe(ae,{attributes:!0,subtree:!0,attributeFilter:["class"]})}catch{}}}catch{}try{const ee=te&&te.nodeType===1?te:document;Array.from(ee.querySelectorAll(".blog-name > .body-l")).forEach(se=>{try{if(se.dataset.linesSplit)return;const ue=(se.textContent||"").split(/\s+/);se.textContent="",ue.forEach((de,oe)=>{const me=document.createElement("span");me.className="blogline-word",me.textContent=de,se.appendChild(me),oe<ue.length-1&&se.appendChild(document.createTextNode(" "))}),requestAnimationFrame(()=>{try{const de=Array.from(se.querySelectorAll(".blogline-word"));if(!de.length)return;let oe=null,me=null;de.forEach(ve=>{const Ee=ve.offsetTop;(oe===null||Math.abs(Ee-oe)>1)&&(oe=Ee,me=document.createElement("span"),me.className="blogline-line",se.insertBefore(me,ve)),me.appendChild(ve);const Pe=me.nextSibling;ve.nextSibling&&ve.nextSibling.nodeType===Node.TEXT_NODE?me.appendChild(ve.nextSibling):Pe&&Pe.nodeType===Node.TEXT_NODE&&me.appendChild(Pe)}),se.dataset.linesSplit="true"}catch{}})}catch{}})}catch{}try{const ee=te&&te.nodeType===1?te:document,ne=Array.from(ee.querySelectorAll(".blog-date .eyebrow-m, .blog-main_link .eyebrow-m"));ne.length&&ne.forEach(se=>{try{if(se.dataset.abbrevApplied==="1")return;const ae=se.textContent||"";if(!ae.trim())return;const ue=ae.match(/^(\s*)(\S+)([\s\S]*)$/);if(!ue)return;const de=ue[1]||"",oe=ue[2]||"",me=ue[3]||"",ve=oe.slice(0,3);let Ee=de+ve+me;Ee=Ee.replace(/,\s*/,",<br> "),se.innerHTML=Ee,se.dataset.abbrevApplied="1"}catch{}})}catch{}try{const ee=te&&te.nodeType===1?te:document;let ne=Array.from(ee.querySelectorAll(".blog-main_item"));try{ne=ne.filter(ae=>!ae.closest(".section_blog-main"))}catch{}const se=document.querySelector(".cursor-pointer");if(se){se.style.display="none";try{se.style.pointerEvents="none"}catch{}try{const ae=se.querySelector(".cursor-pointer_inner")||se.firstElementChild;if(ae){const ue=getComputedStyle(ae).transition||"";/transform/.test(ue)||(ae.style.transition=(ue?ue+", ":"")+"transform 300ms cubic-bezier(0.6, 0, 0, 1)"),ae.style.transform="translateY(100%)";const de=se.style.visibility,oe=se.style.display,me=getComputedStyle(se).display==="none";me&&(se.style.visibility="hidden",se.style.display="flex");const ve=ae.getBoundingClientRect();se.dataset.__cursorInnerW=String(Math.ceil(ve.width)),se.dataset.__cursorInnerH=String(Math.ceil(ve.height)),me&&(se.style.display=oe||"none",se.style.visibility=de||"")}}catch{}}if(ne.length&&se){let ae=8,ue=null;const de=()=>{try{const Pe=parseFloat(getComputedStyle(se).fontSize)||16;ae=1*Pe}catch{ae=8}};de();const oe=()=>{const Pe=se.querySelector(".cursor-pointer_inner")||se.firstElementChild;try{const ye=se.dataset.__cursorInnerW,Te=se.dataset.__cursorInnerH;ye&&(se.style.width=ye+"px"),Te&&(se.style.height=Te+"px")}catch{}if(se.style.display="flex",Pe){if(ue){try{Pe.removeEventListener("transitionend",ue)}catch{}ue=null}Pe.style.transform="translateY(100%)",Pe.getBoundingClientRect(),Pe.style.transform="translateY(0)"}},me=()=>{const Pe=se.querySelector(".cursor-pointer_inner")||se.firstElementChild;Pe?(ue=()=>{se.style.display="none";try{Pe.removeEventListener("transitionend",ue)}catch{}ue=null,Pe.style.transform="translateY(100%)"},Pe.addEventListener("transitionend",ue,{once:!0}),Pe.style.transform="translateY(100%)"):se.style.display="none"},ve=Pe=>{se.style.left=Pe.pageX+ae+"px",se.style.top=Pe.pageY+ae+"px"},Ee=Pe=>{!Pe||Pe.dataset.cursorBound==="1"||(Pe.addEventListener("mouseenter",oe),Pe.addEventListener("mouseleave",me),Pe.addEventListener("mousemove",ve),Pe.dataset.cursorBound="1")};ne.forEach(Pe=>Ee(Pe));try{const Pe=ee.querySelector(".section_blog-inner")||ee;new MutationObserver(Te=>{Te.forEach(Ae=>{Ae.addedNodes.forEach(Ce=>{if(!(Ce&&Ce.nodeType===1))return;Ce.classList&&Ce.classList.contains("blog-main_item")&&!Ce.closest(".section_blog-main")&&Ee(Ce),(Ce.querySelectorAll?Ce.querySelectorAll(".blog-main_item"):[]).forEach(Ie=>{Ie.closest(".section_blog-main")||Ee(Ie)})})})}).observe(Pe,{childList:!0,subtree:!0})}catch{}window.addEventListener("resize",de)}}catch{}}var commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function getDefaultExportFromCjs(te){return te&&te.__esModule&&Object.prototype.hasOwnProperty.call(te,"default")?te.default:te}var maplibreGl={exports:{}};/**
* MapLibre GL JS
* @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.10.0/LICENSE.txt
*/(function(te,ee){(function(ne,se){te.exports=se()})(commonjsGlobal,function(){var ne={},se={};function ae(de,oe,me){if(se[de]=me,de==="index"){var ve="var sharedModule = {}; ("+se.shared+")(sharedModule); ("+se.worker+")(sharedModule);",Ee={};return se.shared(Ee),se.index(ne,Ee),typeof window!="undefined"&&ne.setWorkerUrl(window.URL.createObjectURL(new Blob([ve],{type:"text/javascript"}))),ne}}ae("shared",["exports"],function(de){function oe(ce,ie,le,pe){return new(le||(le=Promise))(function(ge,xe){function Se(Ve){try{Le(pe.next(Ve))}catch(Ne){xe(Ne)}}function ke(Ve){try{Le(pe.throw(Ve))}catch(Ne){xe(Ne)}}function Le(Ve){var Ne;Ve.done?ge(Ve.value):(Ne=Ve.value,Ne instanceof le?Ne:new le(function(He){He(Ne)})).then(Se,ke)}Le((pe=pe.apply(ce,ie||[])).next())})}function me(ce,ie){this.x=ce,this.y=ie}function ve(ce){return ce&&ce.__esModule&&Object.prototype.hasOwnProperty.call(ce,"default")?ce.default:ce}var Ee,Pe;typeof SuppressedError=="function"&&SuppressedError,me.prototype={clone(){return new me(this.x,this.y)},add(ce){return this.clone()._add(ce)},sub(ce){return this.clone()._sub(ce)},multByPoint(ce){return this.clone()._multByPoint(ce)},divByPoint(ce){return this.clone()._divByPoint(ce)},mult(ce){return this.clone()._mult(ce)},div(ce){return this.clone()._div(ce)},rotate(ce){return this.clone()._rotate(ce)},rotateAround(ce,ie){return this.clone()._rotateAround(ce,ie)},matMult(ce){return this.clone()._matMult(ce)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(ce){return this.x===ce.x&&this.y===ce.y},dist(ce){return Math.sqrt(this.distSqr(ce))},distSqr(ce){const ie=ce.x-this.x,le=ce.y-this.y;return ie*ie+le*le},angle(){return Math.atan2(this.y,this.x)},angleTo(ce){return Math.atan2(this.y-ce.y,this.x-ce.x)},angleWith(ce){return this.angleWithSep(ce.x,ce.y)},angleWithSep(ce,ie){return Math.atan2(this.x*ie-this.y*ce,this.x*ce+this.y*ie)},_matMult(ce){const ie=ce[2]*this.x+ce[3]*this.y;return this.x=ce[0]*this.x+ce[1]*this.y,this.y=ie,this},_add(ce){return this.x+=ce.x,this.y+=ce.y,this},_sub(ce){return this.x-=ce.x,this.y-=ce.y,this},_mult(ce){return this.x*=ce,this.y*=ce,this},_div(ce){return this.x/=ce,this.y/=ce,this},_multByPoint(ce){return this.x*=ce.x,this.y*=ce.y,this},_divByPoint(ce){return this.x/=ce.x,this.y/=ce.y,this},_unit(){return this._div(this.mag()),this},_perp(){const ce=this.y;return this.y=this.x,this.x=-ce,this},_rotate(ce){const ie=Math.cos(ce),le=Math.sin(ce),pe=le*this.x+ie*this.y;return this.x=ie*this.x-le*this.y,this.y=pe,this},_rotateAround(ce,ie){const le=Math.cos(ce),pe=Math.sin(ce),ge=ie.y+pe*(this.x-ie.x)+le*(this.y-ie.y);return this.x=ie.x+le*(this.x-ie.x)-pe*(this.y-ie.y),this.y=ge,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:me},me.convert=function(ce){if(ce instanceof me)return ce;if(Array.isArray(ce))return new me(+ce[0],+ce[1]);if(ce.x!==void 0&&ce.y!==void 0)return new me(+ce.x,+ce.y);throw new Error("Expected [x, y] or {x, y} point format")};var ye=function(){if(Pe)return Ee;function ce(ie,le,pe,ge){this.cx=3*ie,this.bx=3*(pe-ie)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*le,this.by=3*(ge-le)-this.cy,this.ay=1-this.cy-this.by,this.p1x=ie,this.p1y=le,this.p2x=pe,this.p2y=ge}return Pe=1,Ee=ce,ce.prototype={sampleCurveX:function(ie){return((this.ax*ie+this.bx)*ie+this.cx)*ie},sampleCurveY:function(ie){return((this.ay*ie+this.by)*ie+this.cy)*ie},sampleCurveDerivativeX:function(ie){return(3*this.ax*ie+2*this.bx)*ie+this.cx},solveCurveX:function(ie,le){if(le===void 0&&(le=1e-6),ie<0)return 0;if(ie>1)return 1;for(var pe=ie,ge=0;ge<8;ge++){var xe=this.sampleCurveX(pe)-ie;if(Math.abs(xe)<le)return pe;var Se=this.sampleCurveDerivativeX(pe);if(Math.abs(Se)<1e-6)break;pe-=xe/Se}var ke=0,Le=1;for(pe=ie,ge=0;ge<20&&(xe=this.sampleCurveX(pe),!(Math.abs(xe-ie)<le));ge++)ie>xe?ke=pe:Le=pe,pe=.5*(Le-ke)+ke;return pe},solve:function(ie,le){return this.sampleCurveY(this.solveCurveX(ie,le))}},Ee}(),Te=ve(ye);let Ae,Ce;function De(){return Ae==null&&(Ae=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Ae}function Ie(){if(Ce==null&&(Ce=!1,De())){const ie=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(ie){for(let pe=0;pe<5*5;pe++){const ge=4*pe;ie.fillStyle=`rgb(${ge},${ge+1},${ge+2})`,ie.fillRect(pe%5,Math.floor(pe/5),1,1)}const le=ie.getImageData(0,0,5,5).data;for(let pe=0;pe<5*5*4;pe++)if(pe%4!=3&&le[pe]!==pe){Ce=!0;break}}}return Ce||!1}var ze=1e-6,Re=typeof Float32Array!="undefined"?Float32Array:Array;function Oe(){var ce=new Re(9);return Re!=Float32Array&&(ce[1]=0,ce[2]=0,ce[3]=0,ce[5]=0,ce[6]=0,ce[7]=0),ce[0]=1,ce[4]=1,ce[8]=1,ce}function qe(ce){return ce[0]=1,ce[1]=0,ce[2]=0,ce[3]=0,ce[4]=0,ce[5]=1,ce[6]=0,ce[7]=0,ce[8]=0,ce[9]=0,ce[10]=1,ce[11]=0,ce[12]=0,ce[13]=0,ce[14]=0,ce[15]=1,ce}function Ze(){var ce=new Re(3);return Re!=Float32Array&&(ce[0]=0,ce[1]=0,ce[2]=0),ce}function Ue(ce){var ie=ce[0],le=ce[1],pe=ce[2];return Math.sqrt(ie*ie+le*le+pe*pe)}function Ye(ce,ie,le){var pe=new Re(3);return pe[0]=ce,pe[1]=ie,pe[2]=le,pe}function ct(ce,ie,le){return ce[0]=ie[0]+le[0],ce[1]=ie[1]+le[1],ce[2]=ie[2]+le[2],ce}function at(ce,ie,le){return ce[0]=ie[0]*le,ce[1]=ie[1]*le,ce[2]=ie[2]*le,ce}function ft(ce,ie,le){var pe=ie[0],ge=ie[1],xe=ie[2],Se=le[0],ke=le[1],Le=le[2];return ce[0]=ge*Le-xe*ke,ce[1]=xe*Se-pe*Le,ce[2]=pe*ke-ge*Se,ce}var pt,Mt=Ue;function At(ce,ie,le){var pe=ie[0],ge=ie[1],xe=ie[2],Se=ie[3];return ce[0]=le[0]*pe+le[4]*ge+le[8]*xe+le[12]*Se,ce[1]=le[1]*pe+le[5]*ge+le[9]*xe+le[13]*Se,ce[2]=le[2]*pe+le[6]*ge+le[10]*xe+le[14]*Se,ce[3]=le[3]*pe+le[7]*ge+le[11]*xe+le[15]*Se,ce}function _t(){var ce=new Re(4);return Re!=Float32Array&&(ce[0]=0,ce[1]=0,ce[2]=0),ce[3]=1,ce}function Qe(ce,ie,le,pe){var ge=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",xe=Math.PI/360;ie*=xe,pe*=xe,le*=xe;var Se=Math.sin(ie),ke=Math.cos(ie),Le=Math.sin(le),Ve=Math.cos(le),Ne=Math.sin(pe),He=Math.cos(pe);switch(ge){case"xyz":ce[0]=Se*Ve*He+ke*Le*Ne,ce[1]=ke*Le*He-Se*Ve*Ne,ce[2]=ke*Ve*Ne+Se*Le*He,ce[3]=ke*Ve*He-Se*Le*Ne;break;case"xzy":ce[0]=Se*Ve*He-ke*Le*Ne,ce[1]=ke*Le*He-Se*Ve*Ne,ce[2]=ke*Ve*Ne+Se*Le*He,ce[3]=ke*Ve*He+Se*Le*Ne;break;case"yxz":ce[0]=Se*Ve*He+ke*Le*Ne,ce[1]=ke*Le*He-Se*Ve*Ne,ce[2]=ke*Ve*Ne-Se*Le*He,ce[3]=ke*Ve*He+Se*Le*Ne;break;case"yzx":ce[0]=Se*Ve*He+ke*Le*Ne,ce[1]=ke*Le*He+Se*Ve*Ne,ce[2]=ke*Ve*Ne-Se*Le*He,ce[3]=ke*Ve*He-Se*Le*Ne;break;case"zxy":ce[0]=Se*Ve*He-ke*Le*Ne,ce[1]=ke*Le*He+Se*Ve*Ne,ce[2]=ke*Ve*Ne+Se*Le*He,ce[3]=ke*Ve*He-Se*Le*Ne;break;case"zyx":ce[0]=Se*Ve*He-ke*Le*Ne,ce[1]=ke*Le*He+Se*Ve*Ne,ce[2]=ke*Ve*Ne-Se*Le*He,ce[3]=ke*Ve*He+Se*Le*Ne;break;default:throw new Error("Unknown angle order "+ge)}return ce}function it(){var ce=new Re(2);return Re!=Float32Array&&(ce[0]=0,ce[1]=0),ce}function Ge(ce,ie){var le=new Re(2);return le[0]=ce,le[1]=ie,le}Ze(),pt=new Re(4),Re!=Float32Array&&(pt[0]=0,pt[1]=0,pt[2]=0,pt[3]=0),Ze(),Ye(1,0,0),Ye(0,1,0),_t(),_t(),Oe(),it();const je=8192;function Ke(ce,ie,le){return ie*(je/(ce.tileSize*Math.pow(2,le-ce.tileID.overscaledZ)))}function lt(ce,ie){return(ce%ie+ie)%ie}function Bt(ce,ie,le){return ce*(1-le)+ie*le}function Xt(ce){if(ce<=0)return 0;if(ce>=1)return 1;const ie=ce*ce,le=ie*ce;return 4*(ce<.5?le:3*(ce-ie)+le-.75)}function Gt(ce,ie,le,pe){const ge=new Te(ce,ie,le,pe);return xe=>ge.solve(xe)}const lr=Gt(.25,.1,.25,1);function yr(ce,ie,le){return Math.min(le,Math.max(ie,ce))}function Lr(ce,ie,le){const pe=le-ie,ge=((ce-ie)%pe+pe)%pe+ie;return ge===ie?le:ge}function Nr(ce,...ie){for(const le of ie)for(const pe in le)ce[pe]=le[pe];return ce}let $r=1;function Gr(ce,ie,le){const pe={};for(const ge in ce)pe[ge]=ie.call(this,ce[ge],ge,ce);return pe}function Zr(ce,ie,le){const pe={};for(const ge in ce)ie.call(this,ce[ge],ge,ce)&&(pe[ge]=ce[ge]);return pe}function Dr(ce){return Array.isArray(ce)?ce.map(Dr):typeof ce=="object"&&ce?Gr(ce,Dr):ce}const dr={};function fr(ce){dr[ce]||(typeof console!="undefined"&&console.warn(ce),dr[ce]=!0)}function qr(ce,ie,le){return(le.y-ce.y)*(ie.x-ce.x)>(ie.y-ce.y)*(le.x-ce.x)}function li(ce){return typeof WorkerGlobalScope!="undefined"&&ce!==void 0&&ce instanceof WorkerGlobalScope}let Jt=null;function gi(ce){if(Jt==null){const ie=ce.navigator?ce.navigator.userAgent:null;Jt=!!ce.safari||!(!ie||!(/\b(iPad|iPhone|iPod)\b/.test(ie)||ie.match("Safari")&&!ie.match("Chrome")))}return Jt}function ci(ce){return typeof ImageBitmap!="undefined"&&ce instanceof ImageBitmap}const hi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function ri(ce,ie,le,pe,ge){return oe(this,void 0,void 0,function*(){if(typeof VideoFrame=="undefined")throw new Error("VideoFrame not supported");const xe=new VideoFrame(ce,{timestamp:0});try{const Se=xe==null?void 0:xe.format;if(!Se||!Se.startsWith("BGR")&&!Se.startsWith("RGB"))throw new Error(`Unrecognized format ${Se}`);const ke=Se.startsWith("BGR"),Le=new Uint8ClampedArray(pe*ge*4);if(yield xe.copyTo(Le,function(Ve,Ne,He,et,nt){const ot=4*Math.max(-Ne,0),ut=(Math.max(0,He)-He)*et*4+ot,gt=4*et,St=Math.max(0,Ne),$t=Math.max(0,He);return{rect:{x:St,y:$t,width:Math.min(Ve.width,Ne+et)-St,height:Math.min(Ve.height,He+nt)-$t},layout:[{offset:ut,stride:gt}]}}(ce,ie,le,pe,ge)),ke)for(let Ve=0;Ve<Le.length;Ve+=4){const Ne=Le[Ve];Le[Ve]=Le[Ve+2],Le[Ve+2]=Ne}return Le}finally{xe.close()}})}let Ci,Ei;function Mi(ce,ie,le,pe){return ce.addEventListener(ie,le,pe),{unsubscribe:()=>{ce.removeEventListener(ie,le,pe)}}}function wi(ce){return ce*Math.PI/180}function Ft(ce){return ce/Math.PI*180}const er={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},sr={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},ir="AbortError";function mt(){return new Error(ir)}const tt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function rt(ce){return tt.REGISTERED_PROTOCOLS[ce.substring(0,ce.indexOf("://"))]}const dt="global-dispatcher";class yt extends Error{constructor(ie,le,pe,ge){super(`AJAXError: ${le} (${ie}): ${pe}`),this.status=ie,this.statusText=le,this.url=pe,this.body=ge}}const wt=()=>li(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,It=function(ce,ie){if(/:\/\//.test(ce.url)&&!/^https?:|^file:/.test(ce.url)){const pe=rt(ce.url);if(pe)return pe(ce,ie);if(li(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:ce,targetMapId:dt},ie)}if(!(/^file:/.test(le=ce.url)||/^file:/.test(wt())&&!/^\w+:/.test(le))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(pe,ge){return oe(this,void 0,void 0,function*(){const xe=new Request(pe.url,{method:pe.method||"GET",body:pe.body,credentials:pe.credentials,headers:pe.headers,cache:pe.cache,referrer:wt(),signal:ge.signal});let Se,ke;pe.type!=="json"||xe.headers.has("Accept")||xe.headers.set("Accept","application/json");try{Se=yield fetch(xe)}catch(Ve){throw new yt(0,Ve.message,pe.url,new Blob)}if(!Se.ok){const Ve=yield Se.blob();throw new yt(Se.status,Se.statusText,pe.url,Ve)}ke=pe.type==="arrayBuffer"||pe.type==="image"?Se.arrayBuffer():pe.type==="json"?Se.json():Se.text();const Le=yield ke;if(ge.signal.aborted)throw mt();return{data:Le,cacheControl:Se.headers.get("Cache-Control"),expires:Se.headers.get("Expires")}})}(ce,ie);if(li(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:ce,mustQueue:!0,targetMapId:dt},ie)}var le;return function(pe,ge){return new Promise((xe,Se)=>{var ke;const Le=new XMLHttpRequest;Le.open(pe.method||"GET",pe.url,!0),pe.type!=="arrayBuffer"&&pe.type!=="image"||(Le.responseType="arraybuffer");for(const Ve in pe.headers)Le.setRequestHeader(Ve,pe.headers[Ve]);pe.type==="json"&&(Le.responseType="text",!((ke=pe.headers)===null||ke===void 0)&&ke.Accept||Le.setRequestHeader("Accept","application/json")),Le.withCredentials=pe.credentials==="include",Le.onerror=()=>{Se(new Error(Le.statusText))},Le.onload=()=>{if(!ge.signal.aborted)if((Le.status>=200&&Le.status<300||Le.status===0)&&Le.response!==null){let Ve=Le.response;if(pe.type==="json")try{Ve=JSON.parse(Le.response)}catch(Ne){return void Se(Ne)}xe({data:Ve,cacheControl:Le.getResponseHeader("Cache-Control"),expires:Le.getResponseHeader("Expires")})}else{const Ve=new Blob([Le.response],{type:Le.getResponseHeader("Content-Type")});Se(new yt(Le.status,Le.statusText,pe.url,Ve))}},ge.signal.addEventListener("abort",()=>{Le.abort(),Se(mt())}),Le.send(pe.body)})}(ce,ie)};function qt(ce){if(!ce||ce.indexOf("://")<=0||ce.indexOf("data:image/")===0||ce.indexOf("blob:")===0)return!0;const ie=new URL(ce),le=window.location;return ie.protocol===le.protocol&&ie.host===le.host}function Dt(ce,ie,le){le[ce]&&le[ce].indexOf(ie)!==-1||(le[ce]=le[ce]||[],le[ce].push(ie))}function Vt(ce,ie,le){if(le&&le[ce]){const pe=le[ce].indexOf(ie);pe!==-1&&le[ce].splice(pe,1)}}class tr{constructor(ie,le={}){Nr(this,le),this.type=ie}}class Zt extends tr{constructor(ie,le={}){super("error",Nr({error:ie},le))}}class Ir{on(ie,le){return this._listeners=this._listeners||{},Dt(ie,le,this._listeners),{unsubscribe:()=>{this.off(ie,le)}}}off(ie,le){return Vt(ie,le,this._listeners),Vt(ie,le,this._oneTimeListeners),this}once(ie,le){return le?(this._oneTimeListeners=this._oneTimeListeners||{},Dt(ie,le,this._oneTimeListeners),this):new Promise(pe=>this.once(ie,pe))}fire(ie,le){typeof ie=="string"&&(ie=new tr(ie,le||{}));const pe=ie.type;if(this.listens(pe)){ie.target=this;const ge=this._listeners&&this._listeners[pe]?this._listeners[pe].slice():[];for(const ke of ge)ke.call(this,ie);const xe=this._oneTimeListeners&&this._oneTimeListeners[pe]?this._oneTimeListeners[pe].slice():[];for(const ke of xe)Vt(pe,ke,this._oneTimeListeners),ke.call(this,ie);const Se=this._eventedParent;Se&&(Nr(ie,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),Se.fire(ie))}else ie instanceof Zt&&console.error(ie.error);return this}listens(ie){return this._listeners&&this._listeners[ie]&&this._listeners[ie].length>0||this._oneTimeListeners&&this._oneTimeListeners[ie]&&this._oneTimeListeners[ie].length>0||this._eventedParent&&this._eventedParent.listens(ie)}setEventedParent(ie,le){return this._eventedParent=ie,this._eventedParentData=le,this}}var Ot={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"array",value:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const zr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Xr(ce,ie){const le={};for(const pe in ce)pe!=="ref"&&(le[pe]=ce[pe]);return zr.forEach(pe=>{pe in ie&&(le[pe]=ie[pe])}),le}function kr(ce,ie){if(Array.isArray(ce)){if(!Array.isArray(ie)||ce.length!==ie.length)return!1;for(let le=0;le<ce.length;le++)if(!kr(ce[le],ie[le]))return!1;return!0}if(typeof ce=="object"&&ce!==null&&ie!==null){if(typeof ie!="object"||Object.keys(ce).length!==Object.keys(ie).length)return!1;for(const le in ce)if(!kr(ce[le],ie[le]))return!1;return!0}return ce===ie}function ar(ce,ie){ce.push(ie)}function mr(ce,ie,le){ar(le,{command:"addSource",args:[ce,ie[ce]]})}function gr(ce,ie,le){ar(ie,{command:"removeSource",args:[ce]}),le[ce]=!0}function Cr(ce,ie,le,pe){gr(ce,le,pe),mr(ce,ie,le)}function ur(ce,ie,le){let pe;for(pe in ce[le])if(Object.prototype.hasOwnProperty.call(ce[le],pe)&&pe!=="data"&&!kr(ce[le][pe],ie[le][pe]))return!1;for(pe in ie[le])if(Object.prototype.hasOwnProperty.call(ie[le],pe)&&pe!=="data"&&!kr(ce[le][pe],ie[le][pe]))return!1;return!0}function cr(ce,ie,le,pe,ge,xe){ce=ce||{},ie=ie||{};for(const Se in ce)Object.prototype.hasOwnProperty.call(ce,Se)&&(kr(ce[Se],ie[Se])||le.push({command:xe,args:[pe,Se,ie[Se],ge]}));for(const Se in ie)Object.prototype.hasOwnProperty.call(ie,Se)&&!Object.prototype.hasOwnProperty.call(ce,Se)&&(kr(ce[Se],ie[Se])||le.push({command:xe,args:[pe,Se,ie[Se],ge]}))}function nr(ce){return ce.id}function hr(ce,ie){return ce[ie.id]=ie,ce}class jt{constructor(ie,le,pe,ge){this.message=(ie?`${ie}: `:"")+pe,ge&&(this.identifier=ge),le!=null&&le.__line__&&(this.line=le.__line__)}}function Qt(ce,...ie){for(const le of ie)for(const pe in le)ce[pe]=le[pe];return ce}class Mr extends Error{constructor(ie,le){super(le),this.message=le,this.key=ie}}class pi{constructor(ie,le=[]){this.parent=ie,this.bindings={};for(const[pe,ge]of le)this.bindings[pe]=ge}concat(ie){return new pi(this,ie)}get(ie){if(this.bindings[ie])return this.bindings[ie];if(this.parent)return this.parent.get(ie);throw new Error(`${ie} not found in scope.`)}has(ie){return!!this.bindings[ie]||!!this.parent&&this.parent.has(ie)}}const Yr={kind:"null"},or={kind:"number"},wr={kind:"string"},Wr={kind:"boolean"},vi={kind:"color"},Ni={kind:"projectionDefinition"},$i={kind:"object"},Fr={kind:"value"},ki={kind:"collator"},qi={kind:"formatted"},Ai={kind:"padding"},Ri={kind:"colorArray"},oi={kind:"numberArray"},ni={kind:"resolvedImage"},Xi={kind:"variableAnchorOffsetCollection"};function si(ce,ie){return{kind:"array",itemType:ce,N:ie}}function Qr(ce){if(ce.kind==="array"){const ie=Qr(ce.itemType);return typeof ce.N=="number"?`array<${ie}, ${ce.N}>`:ce.itemType.kind==="value"?"array":`array<${ie}>`}return ce.kind}const En=[Yr,or,wr,Wr,vi,Ni,qi,$i,si(Fr),Ai,oi,Ri,ni,Xi];function Di(ce,ie){if(ie.kind==="error")return null;if(ce.kind==="array"){if(ie.kind==="array"&&(ie.N===0&&ie.itemType.kind==="value"||!Di(ce.itemType,ie.itemType))&&(typeof ce.N!="number"||ce.N===ie.N))return null}else{if(ce.kind===ie.kind)return null;if(ce.kind==="value"){for(const le of En)if(!Di(le,ie))return null}}return`Expected ${Qr(ce)} but found ${Qr(ie)} instead.`}function ji(ce,ie){return ie.some(le=>le.kind===ce.kind)}function Yi(ce,ie){return ie.some(le=>le==="null"?ce===null:le==="array"?Array.isArray(ce):le==="object"?ce&&!Array.isArray(ce)&&typeof ce=="object":le===typeof ce)}function Pi(ce,ie){return ce.kind==="array"&&ie.kind==="array"?ce.itemType.kind===ie.itemType.kind&&typeof ce.N=="number":ce.kind===ie.kind}const qn=.96422,Lo=.82521,eo=4/29,Ds=6/29,yc=3*Ds*Ds,jh=Ds*Ds*Ds,Wh=Math.PI/180,Gh=180/Math.PI;function vc(ce){return(ce%=360)<0&&(ce+=360),ce}function bc([ce,ie,le,pe]){let ge,xe;const Se=oa((.2225045*(ce=pl(ce))+.7168786*(ie=pl(ie))+.0606169*(le=pl(le)))/1);ce===ie&&ie===le?ge=xe=Se:(ge=oa((.4360747*ce+.3850649*ie+.1430804*le)/qn),xe=oa((.0139322*ce+.0971045*ie+.7141733*le)/Lo));const ke=116*Se-16;return[ke<0?0:ke,500*(ge-Se),200*(Se-xe),pe]}function pl(ce){return ce<=.04045?ce/12.92:Math.pow((ce+.055)/1.055,2.4)}function oa(ce){return ce>jh?Math.pow(ce,1/3):ce/yc+eo}function to([ce,ie,le,pe]){let ge=(ce+16)/116,xe=isNaN(ie)?ge:ge+ie/500,Se=isNaN(le)?ge:ge-le/200;return ge=1*ml(ge),xe=qn*ml(xe),Se=Lo*ml(Se),[fl(3.1338561*xe-1.6168667*ge-.4906146*Se),fl(-.9787684*xe+1.9161415*ge+.033454*Se),fl(.0719453*xe-.2289914*ge+1.4052427*Se),pe]}function fl(ce){return(ce=ce<=.00304?12.92*ce:1.055*Math.pow(ce,1/2.4)-.055)<0?0:ce>1?1:ce}function ml(ce){return ce>Ds?ce*ce*ce:yc*(ce-eo)}const zo=Object.hasOwn||function(ce,ie){return Object.prototype.hasOwnProperty.call(ce,ie)};function Ro(ce,ie){return zo(ce,ie)?ce[ie]:void 0}function aa(ce){return parseInt(ce.padEnd(2,ce),16)/255}function xc(ce,ie){return Bs(ie?ce/100:ce,0,1)}function Bs(ce,ie,le){return Math.min(Math.max(ie,ce),le)}function gl(ce){return!ce.some(Number.isNaN)}const os={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function ui(ce,ie,le){return ce+le*(ie-ce)}function Yn(ce,ie,le){return ce.map((pe,ge)=>ui(pe,ie[ge],le))}class ai{constructor(ie,le,pe,ge=1,xe=!0){this.r=ie,this.g=le,this.b=pe,this.a=ge,xe||(this.r*=ge,this.g*=ge,this.b*=ge,ge||this.overwriteGetter("rgb",[ie,le,pe,ge]))}static parse(ie){if(ie instanceof ai)return ie;if(typeof ie!="string")return;const le=function(pe){if((pe=pe.toLowerCase().trim())==="transparent")return[0,0,0,0];const ge=Ro(os,pe);if(ge){const[Se,ke,Le]=ge;return[Se/255,ke/255,Le/255,1]}if(pe.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(pe)){const Se=pe.length<6?1:2;let ke=1;return[aa(pe.slice(ke,ke+=Se)),aa(pe.slice(ke,ke+=Se)),aa(pe.slice(ke,ke+=Se)),aa(pe.slice(ke,ke+Se)||"ff")]}if(pe.startsWith("rgb")){const Se=pe.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(Se){const[ke,Le,Ve,Ne,He,et,nt,ot,ut,gt,St,$t]=Se,Et=[Ne||" ",nt||" ",gt].join("");if(Et==="  "||Et==="  /"||Et===",,"||Et===",,,"){const zt=[Ve,et,ut].join(""),Ht=zt==="%%%"?100:zt===""?255:0;if(Ht){const rr=[Bs(+Le/Ht,0,1),Bs(+He/Ht,0,1),Bs(+ot/Ht,0,1),St?xc(+St,$t):1];if(gl(rr))return rr}}return}}const xe=pe.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(xe){const[Se,ke,Le,Ve,Ne,He,et,nt,ot]=xe,ut=[Le||" ",Ne||" ",et].join("");if(ut==="  "||ut==="  /"||ut===",,"||ut===",,,"){const gt=[+ke,Bs(+Ve,0,100),Bs(+He,0,100),nt?xc(+nt,ot):1];if(gl(gt))return function([St,$t,Et,zt]){function Ht(rr){const vr=(rr+St/30)%12,Ar=$t*Math.min(Et,1-Et);return Et-Ar*Math.max(-1,Math.min(vr-3,9-vr,1))}return St=vc(St),$t/=100,Et/=100,[Ht(0),Ht(8),Ht(4),zt]}(gt)}}}(ie);return le?new ai(...le,!1):void 0}get rgb(){const{r:ie,g:le,b:pe,a:ge}=this,xe=ge||1/0;return this.overwriteGetter("rgb",[ie/xe,le/xe,pe/xe,ge])}get hcl(){return this.overwriteGetter("hcl",function(ie){const[le,pe,ge,xe]=bc(ie),Se=Math.sqrt(pe*pe+ge*ge);return[Math.round(1e4*Se)?vc(Math.atan2(ge,pe)*Gh):NaN,Se,le,xe]}(this.rgb))}get lab(){return this.overwriteGetter("lab",bc(this.rgb))}overwriteGetter(ie,le){return Object.defineProperty(this,ie,{value:le}),le}toString(){const[ie,le,pe,ge]=this.rgb;return`rgba(${[ie,le,pe].map(xe=>Math.round(255*xe)).join(",")},${ge})`}static interpolate(ie,le,pe,ge="rgb"){switch(ge){case"rgb":{const[xe,Se,ke,Le]=Yn(ie.rgb,le.rgb,pe);return new ai(xe,Se,ke,Le,!1)}case"hcl":{const[xe,Se,ke,Le]=ie.hcl,[Ve,Ne,He,et]=le.hcl;let nt,ot;if(isNaN(xe)||isNaN(Ve))isNaN(xe)?isNaN(Ve)?nt=NaN:(nt=Ve,ke!==1&&ke!==0||(ot=Ne)):(nt=xe,He!==1&&He!==0||(ot=Se));else{let Et=Ve-xe;Ve>xe&&Et>180?Et-=360:Ve<xe&&xe-Ve>180&&(Et+=360),nt=xe+pe*Et}const[ut,gt,St,$t]=function([Et,zt,Ht,rr]){return Et=isNaN(Et)?0:Et*Wh,to([Ht,Math.cos(Et)*zt,Math.sin(Et)*zt,rr])}([nt,ot!=null?ot:ui(Se,Ne,pe),ui(ke,He,pe),ui(Le,et,pe)]);return new ai(ut,gt,St,$t,!1)}case"lab":{const[xe,Se,ke,Le]=to(Yn(ie.lab,le.lab,pe));return new ai(xe,Se,ke,Le,!1)}}}}ai.black=new ai(0,0,0,1),ai.white=new ai(1,1,1,1),ai.transparent=new ai(0,0,0,0),ai.red=new ai(1,0,0,1);class la{constructor(ie,le,pe){this.sensitivity=ie?le?"variant":"case":le?"accent":"base",this.locale=pe,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(ie,le){return this.collator.compare(ie,le)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const wc=["bottom","center","top"];class Fo{constructor(ie,le,pe,ge,xe,Se){this.text=ie,this.image=le,this.scale=pe,this.fontStack=ge,this.textColor=xe,this.verticalAlign=Se}}class xn{constructor(ie){this.sections=ie}static fromString(ie){return new xn([new Fo(ie,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(ie=>ie.text.length!==0||ie.image&&ie.image.name.length!==0)}static factory(ie){return ie instanceof xn?ie:xn.fromString(ie)}toString(){return this.sections.length===0?"":this.sections.map(ie=>ie.text).join("")}}class dn{constructor(ie){this.values=ie.slice()}static parse(ie){if(ie instanceof dn)return ie;if(typeof ie=="number")return new dn([ie,ie,ie,ie]);if(Array.isArray(ie)&&!(ie.length<1||ie.length>4)){for(const le of ie)if(typeof le!="number")return;switch(ie.length){case 1:ie=[ie[0],ie[0],ie[0],ie[0]];break;case 2:ie=[ie[0],ie[1],ie[0],ie[1]];break;case 3:ie=[ie[0],ie[1],ie[2],ie[1]]}return new dn(ie)}}toString(){return JSON.stringify(this.values)}static interpolate(ie,le,pe){return new dn(Yn(ie.values,le.values,pe))}}class Mn{constructor(ie){this.values=ie.slice()}static parse(ie){if(ie instanceof Mn)return ie;if(typeof ie=="number")return new Mn([ie]);if(Array.isArray(ie)){for(const le of ie)if(typeof le!="number")return;return new Mn(ie)}}toString(){return JSON.stringify(this.values)}static interpolate(ie,le,pe){return new Mn(Yn(ie.values,le.values,pe))}}class on{constructor(ie){this.values=ie.slice()}static parse(ie){if(ie instanceof on)return ie;if(typeof ie=="string"){const pe=ai.parse(ie);return pe?new on([pe]):void 0}if(!Array.isArray(ie))return;const le=[];for(const pe of ie){if(typeof pe!="string")return;const ge=ai.parse(pe);if(!ge)return;le.push(ge)}return new on(le)}toString(){return JSON.stringify(this.values)}static interpolate(ie,le,pe,ge="rgb"){const xe=[];if(ie.values.length!=le.values.length)throw new Error(`colorArray: Arrays have mismatched length (${ie.values.length} vs. ${le.values.length}), cannot interpolate.`);for(let Se=0;Se<ie.values.length;Se++)xe.push(ai.interpolate(ie.values[Se],le.values[Se],pe,ge));return new on(xe)}}class Bi extends Error{constructor(ie){super(ie),this.name="RuntimeError"}toJSON(){return this.message}}const Hh=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class wn{constructor(ie){this.values=ie.slice()}static parse(ie){if(ie instanceof wn)return ie;if(Array.isArray(ie)&&!(ie.length<1)&&ie.length%2==0){for(let le=0;le<ie.length;le+=2){const pe=ie[le],ge=ie[le+1];if(typeof pe!="string"||!Hh.has(pe)||!Array.isArray(ge)||ge.length!==2||typeof ge[0]!="number"||typeof ge[1]!="number")return}return new wn(ie)}}toString(){return JSON.stringify(this.values)}static interpolate(ie,le,pe){const ge=ie.values,xe=le.values;if(ge.length!==xe.length)throw new Bi(`Cannot interpolate values of different length. from: ${ie.toString()}, to: ${le.toString()}`);const Se=[];for(let ke=0;ke<ge.length;ke+=2){if(ge[ke]!==xe[ke])throw new Bi(`Cannot interpolate values containing mismatched anchors. from[${ke}]: ${ge[ke]}, to[${ke}]: ${xe[ke]}`);Se.push(ge[ke]);const[Le,Ve]=ge[ke+1],[Ne,He]=xe[ke+1];Se.push([ui(Le,Ne,pe),ui(Ve,He,pe)])}return new wn(Se)}}class Sn{constructor(ie){this.name=ie.name,this.available=ie.available}toString(){return this.name}static fromString(ie){return ie?new Sn({name:ie,available:!1}):null}}class On{constructor(ie,le,pe){this.from=ie,this.to=le,this.transition=pe}static interpolate(ie,le,pe){return new On(ie,le,pe)}static parse(ie){return ie instanceof On?ie:Array.isArray(ie)&&ie.length===3&&typeof ie[0]=="string"&&typeof ie[1]=="string"&&typeof ie[2]=="number"?new On(ie[0],ie[1],ie[2]):typeof ie=="object"&&typeof ie.from=="string"&&typeof ie.to=="string"&&typeof ie.transition=="number"?new On(ie.from,ie.to,ie.transition):typeof ie=="string"?new On(ie,ie,1):void 0}}function _l(ce,ie,le,pe){return typeof ce=="number"&&ce>=0&&ce<=255&&typeof ie=="number"&&ie>=0&&ie<=255&&typeof le=="number"&&le>=0&&le<=255?pe===void 0||typeof pe=="number"&&pe>=0&&pe<=1?null:`Invalid rgba value [${[ce,ie,le,pe].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof pe=="number"?[ce,ie,le,pe]:[ce,ie,le]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ro(ce){if(ce===null||typeof ce=="string"||typeof ce=="boolean"||typeof ce=="number"||ce instanceof On||ce instanceof ai||ce instanceof la||ce instanceof xn||ce instanceof dn||ce instanceof Mn||ce instanceof on||ce instanceof wn||ce instanceof Sn)return!0;if(Array.isArray(ce)){for(const ie of ce)if(!ro(ie))return!1;return!0}if(typeof ce=="object"){for(const ie in ce)if(!ro(ce[ie]))return!1;return!0}return!1}function Gi(ce){if(ce===null)return Yr;if(typeof ce=="string")return wr;if(typeof ce=="boolean")return Wr;if(typeof ce=="number")return or;if(ce instanceof ai)return vi;if(ce instanceof On)return Ni;if(ce instanceof la)return ki;if(ce instanceof xn)return qi;if(ce instanceof dn)return Ai;if(ce instanceof Mn)return oi;if(ce instanceof on)return Ri;if(ce instanceof wn)return Xi;if(ce instanceof Sn)return ni;if(Array.isArray(ce)){const ie=ce.length;let le;for(const pe of ce){const ge=Gi(pe);if(le){if(le===ge)continue;le=Fr;break}le=ge}return si(le||Fr,ie)}return $i}function Ii(ce){const ie=typeof ce;return ce===null?"":ie==="string"||ie==="number"||ie==="boolean"?String(ce):ce instanceof ai||ce instanceof On||ce instanceof xn||ce instanceof dn||ce instanceof Mn||ce instanceof on||ce instanceof wn||ce instanceof Sn?ce.toString():JSON.stringify(ce)}class fs{constructor(ie,le){this.type=ie,this.value=le}static parse(ie,le){if(ie.length!==2)return le.error(`'literal' expression requires exactly one argument, but found ${ie.length-1} instead.`);if(!ro(ie[1]))return le.error("invalid value");const pe=ie[1];let ge=Gi(pe);const xe=le.expectedType;return ge.kind!=="array"||ge.N!==0||!xe||xe.kind!=="array"||typeof xe.N=="number"&&xe.N!==0||(ge=xe),new fs(ge,pe)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const xi={string:wr,number:or,boolean:Wr,object:$i};class ei{constructor(ie,le){this.type=ie,this.args=le}static parse(ie,le){if(ie.length<2)return le.error("Expected at least one argument.");let pe,ge=1;const xe=ie[0];if(xe==="array"){let ke,Le;if(ie.length>2){const Ve=ie[1];if(typeof Ve!="string"||!(Ve in xi)||Ve==="object")return le.error('The item type argument of "array" must be one of string, number, boolean',1);ke=xi[Ve],ge++}else ke=Fr;if(ie.length>3){if(ie[2]!==null&&(typeof ie[2]!="number"||ie[2]<0||ie[2]!==Math.floor(ie[2])))return le.error('The length argument to "array" must be a positive integer literal',2);Le=ie[2],ge++}pe=si(ke,Le)}else{if(!xi[xe])throw new Error(`Types doesn't contain name = ${xe}`);pe=xi[xe]}const Se=[];for(;ge<ie.length;ge++){const ke=le.parse(ie[ge],ge,Fr);if(!ke)return null;Se.push(ke)}return new ei(pe,Se)}evaluate(ie){for(let le=0;le<this.args.length;le++){const pe=this.args[le].evaluate(ie);if(!Di(this.type,Gi(pe)))return pe;if(le===this.args.length-1)throw new Bi(`Expected value to be of type ${Qr(this.type)}, but found ${Qr(Gi(pe))} instead.`)}throw new Error}eachChild(ie){this.args.forEach(ie)}outputDefined(){return this.args.every(ie=>ie.outputDefined())}}const ca={"to-boolean":Wr,"to-color":vi,"to-number":or,"to-string":wr};class fi{constructor(ie,le){this.type=ie,this.args=le}static parse(ie,le){if(ie.length<2)return le.error("Expected at least one argument.");const pe=ie[0];if(!ca[pe])throw new Error(`Can't parse ${pe} as it is not part of the known types`);if((pe==="to-boolean"||pe==="to-string")&&ie.length!==2)return le.error("Expected one argument.");const ge=ca[pe],xe=[];for(let Se=1;Se<ie.length;Se++){const ke=le.parse(ie[Se],Se,Fr);if(!ke)return null;xe.push(ke)}return new fi(ge,xe)}evaluate(ie){switch(this.type.kind){case"boolean":return Boolean(this.args[0].evaluate(ie));case"color":{let le,pe;for(const ge of this.args){if(le=ge.evaluate(ie),pe=null,le instanceof ai)return le;if(typeof le=="string"){const xe=ie.parseColor(le);if(xe)return xe}else if(Array.isArray(le)&&(pe=le.length<3||le.length>4?`Invalid rgba value ${JSON.stringify(le)}: expected an array containing either three or four numeric values.`:_l(le[0],le[1],le[2],le[3]),!pe))return new ai(le[0]/255,le[1]/255,le[2]/255,le[3])}throw new Bi(pe||`Could not parse color from value '${typeof le=="string"?le:JSON.stringify(le)}'`)}case"padding":{let le;for(const pe of this.args){le=pe.evaluate(ie);const ge=dn.parse(le);if(ge)return ge}throw new Bi(`Could not parse padding from value '${typeof le=="string"?le:JSON.stringify(le)}'`)}case"numberArray":{let le;for(const pe of this.args){le=pe.evaluate(ie);const ge=Mn.parse(le);if(ge)return ge}throw new Bi(`Could not parse numberArray from value '${typeof le=="string"?le:JSON.stringify(le)}'`)}case"colorArray":{let le;for(const pe of this.args){le=pe.evaluate(ie);const ge=on.parse(le);if(ge)return ge}throw new Bi(`Could not parse colorArray from value '${typeof le=="string"?le:JSON.stringify(le)}'`)}case"variableAnchorOffsetCollection":{let le;for(const pe of this.args){le=pe.evaluate(ie);const ge=wn.parse(le);if(ge)return ge}throw new Bi(`Could not parse variableAnchorOffsetCollection from value '${typeof le=="string"?le:JSON.stringify(le)}'`)}case"number":{let le=null;for(const pe of this.args){if(le=pe.evaluate(ie),le===null)return 0;const ge=Number(le);if(!isNaN(ge))return ge}throw new Bi(`Could not convert ${JSON.stringify(le)} to number.`)}case"formatted":return xn.fromString(Ii(this.args[0].evaluate(ie)));case"resolvedImage":return Sn.fromString(Ii(this.args[0].evaluate(ie)));case"projectionDefinition":return this.args[0].evaluate(ie);default:return Ii(this.args[0].evaluate(ie))}}eachChild(ie){this.args.forEach(ie)}outputDefined(){return this.args.every(ie=>ie.outputDefined())}}const yl=["Unknown","Point","LineString","Polygon"];class as{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?yl[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(ie){let le=this._parseColorCache.get(ie);return le||(le=ai.parse(ie),this._parseColorCache.set(ie,le)),le}}class io{constructor(ie,le,pe=[],ge,xe=new pi,Se=[]){this.registry=ie,this.path=pe,this.key=pe.map(ke=>`[${ke}]`).join(""),this.scope=xe,this.errors=Se,this.expectedType=ge,this._isConstant=le}parse(ie,le,pe,ge,xe={}){return le?this.concat(le,pe,ge)._parse(ie,xe):this._parse(ie,xe)}_parse(ie,le){function pe(ge,xe,Se){return Se==="assert"?new ei(xe,[ge]):Se==="coerce"?new fi(xe,[ge]):ge}if(ie!==null&&typeof ie!="string"&&typeof ie!="boolean"&&typeof ie!="number"||(ie=["literal",ie]),Array.isArray(ie)){if(ie.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const ge=ie[0];if(typeof ge!="string")return this.error(`Expression name must be a string, but found ${typeof ge} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const xe=this.registry[ge];if(xe){let Se=xe.parse(ie,this);if(!Se)return null;if(this.expectedType){const ke=this.expectedType,Le=Se.type;if(ke.kind!=="string"&&ke.kind!=="number"&&ke.kind!=="boolean"&&ke.kind!=="object"&&ke.kind!=="array"||Le.kind!=="value"){if(ke.kind==="projectionDefinition"&&["string","array"].includes(Le.kind)||["color","formatted","resolvedImage"].includes(ke.kind)&&["value","string"].includes(Le.kind)||["padding","numberArray"].includes(ke.kind)&&["value","number","array"].includes(Le.kind)||ke.kind==="colorArray"&&["value","string","array"].includes(Le.kind)||ke.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(Le.kind))Se=pe(Se,ke,le.typeAnnotation||"coerce");else if(this.checkSubtype(ke,Le))return null}else Se=pe(Se,ke,le.typeAnnotation||"assert")}if(!(Se instanceof fs)&&Se.type.kind!=="resolvedImage"&&this._isConstant(Se)){const ke=new as;try{Se=new fs(Se.type,Se.evaluate(ke))}catch(Le){return this.error(Le.message),null}}return Se}return this.error(`Unknown expression "${ge}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(ie===void 0?"'undefined' value invalid. Use null instead.":typeof ie=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof ie} instead.`)}concat(ie,le,pe){const ge=typeof ie=="number"?this.path.concat(ie):this.path,xe=pe?this.scope.concat(pe):this.scope;return new io(this.registry,this._isConstant,ge,le||null,xe,this.errors)}error(ie,...le){const pe=`${this.key}${le.map(ge=>`[${ge}]`).join("")}`;this.errors.push(new Mr(pe,ie))}checkSubtype(ie,le){const pe=Di(ie,le);return pe&&this.error(pe),pe}}class Os{constructor(ie,le){this.type=le.type,this.bindings=[].concat(ie),this.result=le}evaluate(ie){return this.result.evaluate(ie)}eachChild(ie){for(const le of this.bindings)ie(le[1]);ie(this.result)}static parse(ie,le){if(ie.length<4)return le.error(`Expected at least 3 arguments, but found ${ie.length-1} instead.`);const pe=[];for(let xe=1;xe<ie.length-1;xe+=2){const Se=ie[xe];if(typeof Se!="string")return le.error(`Expected string, but found ${typeof Se} instead.`,xe);if(/[^a-zA-Z0-9_]/.test(Se))return le.error("Variable names must contain only alphanumeric characters or '_'.",xe);const ke=le.parse(ie[xe+1],xe+1);if(!ke)return null;pe.push([Se,ke])}const ge=le.parse(ie[ie.length-1],ie.length-1,le.expectedType,pe);return ge?new Os(pe,ge):null}outputDefined(){return this.result.outputDefined()}}class Do{constructor(ie,le){this.type=le.type,this.name=ie,this.boundExpression=le}static parse(ie,le){if(ie.length!==2||typeof ie[1]!="string")return le.error("'var' expression requires exactly one string literal argument.");const pe=ie[1];return le.scope.has(pe)?new Do(pe,le.scope.get(pe)):le.error(`Unknown variable "${pe}". Make sure "${pe}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(ie){return this.boundExpression.evaluate(ie)}eachChild(){}outputDefined(){return!1}}class Bo{constructor(ie,le,pe){this.type=ie,this.index=le,this.input=pe}static parse(ie,le){if(ie.length!==3)return le.error(`Expected 2 arguments, but found ${ie.length-1} instead.`);const pe=le.parse(ie[1],1,or),ge=le.parse(ie[2],2,si(le.expectedType||Fr));return pe&&ge?new Bo(ge.type.itemType,pe,ge):null}evaluate(ie){const le=this.index.evaluate(ie),pe=this.input.evaluate(ie);if(le<0)throw new Bi(`Array index out of bounds: ${le} < 0.`);if(le>=pe.length)throw new Bi(`Array index out of bounds: ${le} > ${pe.length-1}.`);if(le!==Math.floor(le))throw new Bi(`Array index must be an integer, but found ${le} instead.`);return pe[le]}eachChild(ie){ie(this.index),ie(this.input)}outputDefined(){return!1}}class ha{constructor(ie,le){this.type=Wr,this.needle=ie,this.haystack=le}static parse(ie,le){if(ie.length!==3)return le.error(`Expected 2 arguments, but found ${ie.length-1} instead.`);const pe=le.parse(ie[1],1,Fr),ge=le.parse(ie[2],2,Fr);return pe&&ge?ji(pe.type,[Wr,wr,or,Yr,Fr])?new ha(pe,ge):le.error(`Expected first argument to be of type boolean, string, number or null, but found ${Qr(pe.type)} instead`):null}evaluate(ie){const le=this.needle.evaluate(ie),pe=this.haystack.evaluate(ie);if(!pe)return!1;if(!Yi(le,["boolean","string","number","null"]))throw new Bi(`Expected first argument to be of type boolean, string, number or null, but found ${Qr(Gi(le))} instead.`);if(!Yi(pe,["string","array"]))throw new Bi(`Expected second argument to be of type array or string, but found ${Qr(Gi(pe))} instead.`);return pe.indexOf(le)>=0}eachChild(ie){ie(this.needle),ie(this.haystack)}outputDefined(){return!0}}class ua{constructor(ie,le,pe){this.type=or,this.needle=ie,this.haystack=le,this.fromIndex=pe}static parse(ie,le){if(ie.length<=2||ie.length>=5)return le.error(`Expected 2 or 3 arguments, but found ${ie.length-1} instead.`);const pe=le.parse(ie[1],1,Fr),ge=le.parse(ie[2],2,Fr);if(!pe||!ge)return null;if(!ji(pe.type,[Wr,wr,or,Yr,Fr]))return le.error(`Expected first argument to be of type boolean, string, number or null, but found ${Qr(pe.type)} instead`);if(ie.length===4){const xe=le.parse(ie[3],3,or);return xe?new ua(pe,ge,xe):null}return new ua(pe,ge)}evaluate(ie){const le=this.needle.evaluate(ie),pe=this.haystack.evaluate(ie);if(!Yi(le,["boolean","string","number","null"]))throw new Bi(`Expected first argument to be of type boolean, string, number or null, but found ${Qr(Gi(le))} instead.`);let ge;if(this.fromIndex&&(ge=this.fromIndex.evaluate(ie)),Yi(pe,["string"])){const xe=pe.indexOf(le,ge);return xe===-1?-1:[...pe.slice(0,xe)].length}if(Yi(pe,["array"]))return pe.indexOf(le,ge);throw new Bi(`Expected second argument to be of type array or string, but found ${Qr(Gi(pe))} instead.`)}eachChild(ie){ie(this.needle),ie(this.haystack),this.fromIndex&&ie(this.fromIndex)}outputDefined(){return!1}}class da{constructor(ie,le,pe,ge,xe,Se){this.inputType=ie,this.type=le,this.input=pe,this.cases=ge,this.outputs=xe,this.otherwise=Se}static parse(ie,le){if(ie.length<5)return le.error(`Expected at least 4 arguments, but found only ${ie.length-1}.`);if(ie.length%2!=1)return le.error("Expected an even number of arguments.");let pe,ge;le.expectedType&&le.expectedType.kind!=="value"&&(ge=le.expectedType);const xe={},Se=[];for(let Ve=2;Ve<ie.length-1;Ve+=2){let Ne=ie[Ve];const He=ie[Ve+1];Array.isArray(Ne)||(Ne=[Ne]);const et=le.concat(Ve);if(Ne.length===0)return et.error("Expected at least one branch label.");for(const ot of Ne){if(typeof ot!="number"&&typeof ot!="string")return et.error("Branch labels must be numbers or strings.");if(typeof ot=="number"&&Math.abs(ot)>Number.MAX_SAFE_INTEGER)return et.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ot=="number"&&Math.floor(ot)!==ot)return et.error("Numeric branch labels must be integer values.");if(pe){if(et.checkSubtype(pe,Gi(ot)))return null}else pe=Gi(ot);if(xe[String(ot)]!==void 0)return et.error("Branch labels must be unique.");xe[String(ot)]=Se.length}const nt=le.parse(He,Ve,ge);if(!nt)return null;ge=ge||nt.type,Se.push(nt)}const ke=le.parse(ie[1],1,Fr);if(!ke)return null;const Le=le.parse(ie[ie.length-1],ie.length-1,ge);return Le?ke.type.kind!=="value"&&le.concat(1).checkSubtype(pe,ke.type)?null:new da(pe,ge,ke,xe,Se,Le):null}evaluate(ie){const le=this.input.evaluate(ie);return(Gi(le)===this.inputType&&this.outputs[this.cases[le]]||this.otherwise).evaluate(ie)}eachChild(ie){ie(this.input),this.outputs.forEach(ie),ie(this.otherwise)}outputDefined(){return this.outputs.every(ie=>ie.outputDefined())&&this.otherwise.outputDefined()}}class pa{constructor(ie,le,pe){this.type=ie,this.branches=le,this.otherwise=pe}static parse(ie,le){if(ie.length<4)return le.error(`Expected at least 3 arguments, but found only ${ie.length-1}.`);if(ie.length%2!=0)return le.error("Expected an odd number of arguments.");let pe;le.expectedType&&le.expectedType.kind!=="value"&&(pe=le.expectedType);const ge=[];for(let Se=1;Se<ie.length-1;Se+=2){const ke=le.parse(ie[Se],Se,Wr);if(!ke)return null;const Le=le.parse(ie[Se+1],Se+1,pe);if(!Le)return null;ge.push([ke,Le]),pe=pe||Le.type}const xe=le.parse(ie[ie.length-1],ie.length-1,pe);if(!xe)return null;if(!pe)throw new Error("Can't infer output type");return new pa(pe,ge,xe)}evaluate(ie){for(const[le,pe]of this.branches)if(le.evaluate(ie))return pe.evaluate(ie);return this.otherwise.evaluate(ie)}eachChild(ie){for(const[le,pe]of this.branches)ie(le),ie(pe);ie(this.otherwise)}outputDefined(){return this.branches.every(([ie,le])=>le.outputDefined())&&this.otherwise.outputDefined()}}class Kn{constructor(ie,le,pe,ge){this.type=ie,this.input=le,this.beginIndex=pe,this.endIndex=ge}static parse(ie,le){if(ie.length<=2||ie.length>=5)return le.error(`Expected 2 or 3 arguments, but found ${ie.length-1} instead.`);const pe=le.parse(ie[1],1,Fr),ge=le.parse(ie[2],2,or);if(!pe||!ge)return null;if(!ji(pe.type,[si(Fr),wr,Fr]))return le.error(`Expected first argument to be of type array or string, but found ${Qr(pe.type)} instead`);if(ie.length===4){const xe=le.parse(ie[3],3,or);return xe?new Kn(pe.type,pe,ge,xe):null}return new Kn(pe.type,pe,ge)}evaluate(ie){const le=this.input.evaluate(ie),pe=this.beginIndex.evaluate(ie);let ge;if(this.endIndex&&(ge=this.endIndex.evaluate(ie)),Yi(le,["string"]))return[...le].slice(pe,ge).join("");if(Yi(le,["array"]))return le.slice(pe,ge);throw new Bi(`Expected first argument to be of type array or string, but found ${Qr(Gi(le))} instead.`)}eachChild(ie){ie(this.input),ie(this.beginIndex),this.endIndex&&ie(this.endIndex)}outputDefined(){return!1}}function an(ce,ie){const le=ce.length-1;let pe,ge,xe=0,Se=le,ke=0;for(;xe<=Se;)if(ke=Math.floor((xe+Se)/2),pe=ce[ke],ge=ce[ke+1],pe<=ie){if(ke===le||ie<ge)return ke;xe=ke+1}else{if(!(pe>ie))throw new Bi("Input is not a number.");Se=ke-1}return 0}class Ts{constructor(ie,le,pe){this.type=ie,this.input=le,this.labels=[],this.outputs=[];for(const[ge,xe]of pe)this.labels.push(ge),this.outputs.push(xe)}static parse(ie,le){if(ie.length-1<4)return le.error(`Expected at least 4 arguments, but found only ${ie.length-1}.`);if((ie.length-1)%2!=0)return le.error("Expected an even number of arguments.");const pe=le.parse(ie[1],1,or);if(!pe)return null;const ge=[];let xe=null;le.expectedType&&le.expectedType.kind!=="value"&&(xe=le.expectedType);for(let Se=1;Se<ie.length;Se+=2){const ke=Se===1?-1/0:ie[Se],Le=ie[Se+1],Ve=Se,Ne=Se+1;if(typeof ke!="number")return le.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Ve);if(ge.length&&ge[ge.length-1][0]>=ke)return le.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Ve);const He=le.parse(Le,Ne,xe);if(!He)return null;xe=xe||He.type,ge.push([ke,He])}return new Ts(xe,pe,ge)}evaluate(ie){const le=this.labels,pe=this.outputs;if(le.length===1)return pe[0].evaluate(ie);const ge=this.input.evaluate(ie);if(ge<=le[0])return pe[0].evaluate(ie);const xe=le.length;return ge>=le[xe-1]?pe[xe-1].evaluate(ie):pe[an(le,ge)].evaluate(ie)}eachChild(ie){ie(this.input);for(const le of this.outputs)ie(le)}outputDefined(){return this.outputs.every(ie=>ie.outputDefined())}}function Sc(ce){return ce&&ce.__esModule&&Object.prototype.hasOwnProperty.call(ce,"default")?ce.default:ce}var no,ln,Tc=function(){if(ln)return no;function ce(ie,le,pe,ge){this.cx=3*ie,this.bx=3*(pe-ie)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*le,this.by=3*(ge-le)-this.cy,this.ay=1-this.cy-this.by,this.p1x=ie,this.p1y=le,this.p2x=pe,this.p2y=ge}return ln=1,no=ce,ce.prototype={sampleCurveX:function(ie){return((this.ax*ie+this.bx)*ie+this.cx)*ie},sampleCurveY:function(ie){return((this.ay*ie+this.by)*ie+this.cy)*ie},sampleCurveDerivativeX:function(ie){return(3*this.ax*ie+2*this.bx)*ie+this.cx},solveCurveX:function(ie,le){if(le===void 0&&(le=1e-6),ie<0)return 0;if(ie>1)return 1;for(var pe=ie,ge=0;ge<8;ge++){var xe=this.sampleCurveX(pe)-ie;if(Math.abs(xe)<le)return pe;var Se=this.sampleCurveDerivativeX(pe);if(Math.abs(Se)<1e-6)break;pe-=xe/Se}var ke=0,Le=1;for(pe=ie,ge=0;ge<20&&(xe=this.sampleCurveX(pe),!(Math.abs(xe-ie)<le));ge++)ie>xe?ke=pe:Le=pe,pe=.5*(Le-ke)+ke;return pe},solve:function(ie,le){return this.sampleCurveY(this.solveCurveX(ie,le))}},no}(),vl=Sc(Tc);class zn{constructor(ie,le,pe,ge,xe){this.type=ie,this.operator=le,this.interpolation=pe,this.input=ge,this.labels=[],this.outputs=[];for(const[Se,ke]of xe)this.labels.push(Se),this.outputs.push(ke)}static interpolationFactor(ie,le,pe,ge){let xe=0;if(ie.name==="exponential")xe=bl(le,ie.base,pe,ge);else if(ie.name==="linear")xe=bl(le,1,pe,ge);else if(ie.name==="cubic-bezier"){const Se=ie.controlPoints;xe=new vl(Se[0],Se[1],Se[2],Se[3]).solve(bl(le,1,pe,ge))}return xe}static parse(ie,le){let[pe,ge,xe,...Se]=ie;if(!Array.isArray(ge)||ge.length===0)return le.error("Expected an interpolation type expression.",1);if(ge[0]==="linear")ge={name:"linear"};else if(ge[0]==="exponential"){const Ve=ge[1];if(typeof Ve!="number")return le.error("Exponential interpolation requires a numeric base.",1,1);ge={name:"exponential",base:Ve}}else{if(ge[0]!=="cubic-bezier")return le.error(`Unknown interpolation type ${String(ge[0])}`,1,0);{const Ve=ge.slice(1);if(Ve.length!==4||Ve.some(Ne=>typeof Ne!="number"||Ne<0||Ne>1))return le.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);ge={name:"cubic-bezier",controlPoints:Ve}}}if(ie.length-1<4)return le.error(`Expected at least 4 arguments, but found only ${ie.length-1}.`);if((ie.length-1)%2!=0)return le.error("Expected an even number of arguments.");if(xe=le.parse(xe,2,or),!xe)return null;const ke=[];let Le=null;pe!=="interpolate-hcl"&&pe!=="interpolate-lab"||le.expectedType==Ri?le.expectedType&&le.expectedType.kind!=="value"&&(Le=le.expectedType):Le=vi;for(let Ve=0;Ve<Se.length;Ve+=2){const Ne=Se[Ve],He=Se[Ve+1],et=Ve+3,nt=Ve+4;if(typeof Ne!="number")return le.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',et);if(ke.length&&ke[ke.length-1][0]>=Ne)return le.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',et);const ot=le.parse(He,nt,Le);if(!ot)return null;Le=Le||ot.type,ke.push([Ne,ot])}return Pi(Le,or)||Pi(Le,Ni)||Pi(Le,vi)||Pi(Le,Ai)||Pi(Le,oi)||Pi(Le,Ri)||Pi(Le,Xi)||Pi(Le,si(or))?new zn(Le,pe,ge,xe,ke):le.error(`Type ${Qr(Le)} is not interpolatable.`)}evaluate(ie){const le=this.labels,pe=this.outputs;if(le.length===1)return pe[0].evaluate(ie);const ge=this.input.evaluate(ie);if(ge<=le[0])return pe[0].evaluate(ie);const xe=le.length;if(ge>=le[xe-1])return pe[xe-1].evaluate(ie);const Se=an(le,ge),ke=zn.interpolationFactor(this.interpolation,ge,le[Se],le[Se+1]),Le=pe[Se].evaluate(ie),Ve=pe[Se+1].evaluate(ie);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return ui(Le,Ve,ke);case"color":return ai.interpolate(Le,Ve,ke);case"padding":return dn.interpolate(Le,Ve,ke);case"colorArray":return on.interpolate(Le,Ve,ke);case"numberArray":return Mn.interpolate(Le,Ve,ke);case"variableAnchorOffsetCollection":return wn.interpolate(Le,Ve,ke);case"array":return Yn(Le,Ve,ke);case"projectionDefinition":return On.interpolate(Le,Ve,ke)}case"interpolate-hcl":switch(this.type.kind){case"color":return ai.interpolate(Le,Ve,ke,"hcl");case"colorArray":return on.interpolate(Le,Ve,ke,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return ai.interpolate(Le,Ve,ke,"lab");case"colorArray":return on.interpolate(Le,Ve,ke,"lab")}}}eachChild(ie){ie(this.input);for(const le of this.outputs)ie(le)}outputDefined(){return this.outputs.every(ie=>ie.outputDefined())}}function bl(ce,ie,le,pe){const ge=pe-le,xe=ce-le;return ge===0?0:ie===1?xe/ge:(Math.pow(ie,xe)-1)/(Math.pow(ie,ge)-1)}const Rn={color:ai.interpolate,number:ui,padding:dn.interpolate,numberArray:Mn.interpolate,colorArray:on.interpolate,variableAnchorOffsetCollection:wn.interpolate,array:Yn};class Vs{constructor(ie,le){this.type=ie,this.args=le}static parse(ie,le){if(ie.length<2)return le.error("Expected at least one argument.");let pe=null;const ge=le.expectedType;ge&&ge.kind!=="value"&&(pe=ge);const xe=[];for(const ke of ie.slice(1)){const Le=le.parse(ke,1+xe.length,pe,void 0,{typeAnnotation:"omit"});if(!Le)return null;pe=pe||Le.type,xe.push(Le)}if(!pe)throw new Error("No output type");const Se=ge&&xe.some(ke=>Di(ge,ke.type));return new Vs(Se?Fr:pe,xe)}evaluate(ie){let le,pe=null,ge=0;for(const xe of this.args)if(ge++,pe=xe.evaluate(ie),pe&&pe instanceof Sn&&!pe.available&&(le||(le=pe.name),pe=null,ge===this.args.length&&(pe=le)),pe!==null)break;return pe}eachChild(ie){this.args.forEach(ie)}outputDefined(){return this.args.every(ie=>ie.outputDefined())}}function fa(ce,ie){return ce==="=="||ce==="!="?ie.kind==="boolean"||ie.kind==="string"||ie.kind==="number"||ie.kind==="null"||ie.kind==="value":ie.kind==="string"||ie.kind==="number"||ie.kind==="value"}function Cc(ce,ie,le,pe){return pe.compare(ie,le)===0}function Ns(ce,ie,le){const pe=ce!=="=="&&ce!=="!=";return class kp{constructor(xe,Se,ke){this.type=Wr,this.lhs=xe,this.rhs=Se,this.collator=ke,this.hasUntypedArgument=xe.type.kind==="value"||Se.type.kind==="value"}static parse(xe,Se){if(xe.length!==3&&xe.length!==4)return Se.error("Expected two or three arguments.");const ke=xe[0];let Le=Se.parse(xe[1],1,Fr);if(!Le)return null;if(!fa(ke,Le.type))return Se.concat(1).error(`"${ke}" comparisons are not supported for type '${Qr(Le.type)}'.`);let Ve=Se.parse(xe[2],2,Fr);if(!Ve)return null;if(!fa(ke,Ve.type))return Se.concat(2).error(`"${ke}" comparisons are not supported for type '${Qr(Ve.type)}'.`);if(Le.type.kind!==Ve.type.kind&&Le.type.kind!=="value"&&Ve.type.kind!=="value")return Se.error(`Cannot compare types '${Qr(Le.type)}' and '${Qr(Ve.type)}'.`);pe&&(Le.type.kind==="value"&&Ve.type.kind!=="value"?Le=new ei(Ve.type,[Le]):Le.type.kind!=="value"&&Ve.type.kind==="value"&&(Ve=new ei(Le.type,[Ve])));let Ne=null;if(xe.length===4){if(Le.type.kind!=="string"&&Ve.type.kind!=="string"&&Le.type.kind!=="value"&&Ve.type.kind!=="value")return Se.error("Cannot use collator to compare non-string types.");if(Ne=Se.parse(xe[3],3,ki),!Ne)return null}return new kp(Le,Ve,Ne)}evaluate(xe){const Se=this.lhs.evaluate(xe),ke=this.rhs.evaluate(xe);if(pe&&this.hasUntypedArgument){const Le=Gi(Se),Ve=Gi(ke);if(Le.kind!==Ve.kind||Le.kind!=="string"&&Le.kind!=="number")throw new Bi(`Expected arguments for "${ce}" to be (string, string) or (number, number), but found (${Le.kind}, ${Ve.kind}) instead.`)}if(this.collator&&!pe&&this.hasUntypedArgument){const Le=Gi(Se),Ve=Gi(ke);if(Le.kind!=="string"||Ve.kind!=="string")return ie(xe,Se,ke)}return this.collator?le(xe,Se,ke,this.collator.evaluate(xe)):ie(xe,Se,ke)}eachChild(xe){xe(this.lhs),xe(this.rhs),this.collator&&xe(this.collator)}outputDefined(){return!0}}}const ma=Ns("==",function(ce,ie,le){return ie===le},Cc),ga=Ns("!=",function(ce,ie,le){return ie!==le},function(ce,ie,le,pe){return!Cc(0,ie,le,pe)}),Jn=Ns("<",function(ce,ie,le){return ie<le},function(ce,ie,le,pe){return pe.compare(ie,le)<0}),Pc=Ns(">",function(ce,ie,le){return ie>le},function(ce,ie,le,pe){return pe.compare(ie,le)>0}),_a=Ns("<=",function(ce,ie,le){return ie<=le},function(ce,ie,le,pe){return pe.compare(ie,le)<=0}),Uh=Ns(">=",function(ce,ie,le){return ie>=le},function(ce,ie,le,pe){return pe.compare(ie,le)>=0});class so{constructor(ie,le,pe){this.type=ki,this.locale=pe,this.caseSensitive=ie,this.diacriticSensitive=le}static parse(ie,le){if(ie.length!==2)return le.error("Expected one argument.");const pe=ie[1];if(typeof pe!="object"||Array.isArray(pe))return le.error("Collator options argument must be an object.");const ge=le.parse(pe["case-sensitive"]!==void 0&&pe["case-sensitive"],1,Wr);if(!ge)return null;const xe=le.parse(pe["diacritic-sensitive"]!==void 0&&pe["diacritic-sensitive"],1,Wr);if(!xe)return null;let Se=null;return pe.locale&&(Se=le.parse(pe.locale,1,wr),!Se)?null:new so(ge,xe,Se)}evaluate(ie){return new la(this.caseSensitive.evaluate(ie),this.diacriticSensitive.evaluate(ie),this.locale?this.locale.evaluate(ie):null)}eachChild(ie){ie(this.caseSensitive),ie(this.diacriticSensitive),this.locale&&ie(this.locale)}outputDefined(){return!1}}class xl{constructor(ie,le,pe,ge,xe){this.type=wr,this.number=ie,this.locale=le,this.currency=pe,this.minFractionDigits=ge,this.maxFractionDigits=xe}static parse(ie,le){if(ie.length!==3)return le.error("Expected two arguments.");const pe=le.parse(ie[1],1,or);if(!pe)return null;const ge=ie[2];if(typeof ge!="object"||Array.isArray(ge))return le.error("NumberFormat options argument must be an object.");let xe=null;if(ge.locale&&(xe=le.parse(ge.locale,1,wr),!xe))return null;let Se=null;if(ge.currency&&(Se=le.parse(ge.currency,1,wr),!Se))return null;let ke=null;if(ge["min-fraction-digits"]&&(ke=le.parse(ge["min-fraction-digits"],1,or),!ke))return null;let Le=null;return ge["max-fraction-digits"]&&(Le=le.parse(ge["max-fraction-digits"],1,or),!Le)?null:new xl(pe,xe,Se,ke,Le)}evaluate(ie){return new Intl.NumberFormat(this.locale?this.locale.evaluate(ie):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(ie):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(ie):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(ie):void 0}).format(this.number.evaluate(ie))}eachChild(ie){ie(this.number),this.locale&&ie(this.locale),this.currency&&ie(this.currency),this.minFractionDigits&&ie(this.minFractionDigits),this.maxFractionDigits&&ie(this.maxFractionDigits)}outputDefined(){return!1}}class ya{constructor(ie){this.type=qi,this.sections=ie}static parse(ie,le){if(ie.length<2)return le.error("Expected at least one argument.");const pe=ie[1];if(!Array.isArray(pe)&&typeof pe=="object")return le.error("First argument must be an image or text section.");const ge=[];let xe=!1;for(let Se=1;Se<=ie.length-1;++Se){const ke=ie[Se];if(xe&&typeof ke=="object"&&!Array.isArray(ke)){xe=!1;let Le=null;if(ke["font-scale"]&&(Le=le.parse(ke["font-scale"],1,or),!Le))return null;let Ve=null;if(ke["text-font"]&&(Ve=le.parse(ke["text-font"],1,si(wr)),!Ve))return null;let Ne=null;if(ke["text-color"]&&(Ne=le.parse(ke["text-color"],1,vi),!Ne))return null;let He=null;if(ke["vertical-align"]){if(typeof ke["vertical-align"]=="string"&&!wc.includes(ke["vertical-align"]))return le.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${ke["vertical-align"]}' instead.`);if(He=le.parse(ke["vertical-align"],1,wr),!He)return null}const et=ge[ge.length-1];et.scale=Le,et.font=Ve,et.textColor=Ne,et.verticalAlign=He}else{const Le=le.parse(ie[Se],1,Fr);if(!Le)return null;const Ve=Le.type.kind;if(Ve!=="string"&&Ve!=="value"&&Ve!=="null"&&Ve!=="resolvedImage")return le.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");xe=!0,ge.push({content:Le,scale:null,font:null,textColor:null,verticalAlign:null})}}return new ya(ge)}evaluate(ie){return new xn(this.sections.map(le=>{const pe=le.content.evaluate(ie);return Gi(pe)===ni?new Fo("",pe,null,null,null,le.verticalAlign?le.verticalAlign.evaluate(ie):null):new Fo(Ii(pe),null,le.scale?le.scale.evaluate(ie):null,le.font?le.font.evaluate(ie).join(","):null,le.textColor?le.textColor.evaluate(ie):null,le.verticalAlign?le.verticalAlign.evaluate(ie):null)}))}eachChild(ie){for(const le of this.sections)ie(le.content),le.scale&&ie(le.scale),le.font&&ie(le.font),le.textColor&&ie(le.textColor),le.verticalAlign&&ie(le.verticalAlign)}outputDefined(){return!1}}class wl{constructor(ie){this.type=ni,this.input=ie}static parse(ie,le){if(ie.length!==2)return le.error("Expected two arguments.");const pe=le.parse(ie[1],1,wr);return pe?new wl(pe):le.error("No image name provided.")}evaluate(ie){const le=this.input.evaluate(ie),pe=Sn.fromString(le);return pe&&ie.availableImages&&(pe.available=ie.availableImages.indexOf(le)>-1),pe}eachChild(ie){ie(this.input)}outputDefined(){return!1}}class Sl{constructor(ie){this.type=or,this.input=ie}static parse(ie,le){if(ie.length!==2)return le.error(`Expected 1 argument, but found ${ie.length-1} instead.`);const pe=le.parse(ie[1],1);return pe?pe.type.kind!=="array"&&pe.type.kind!=="string"&&pe.type.kind!=="value"?le.error(`Expected argument of type string or array, but found ${Qr(pe.type)} instead.`):new Sl(pe):null}evaluate(ie){const le=this.input.evaluate(ie);if(typeof le=="string")return[...le].length;if(Array.isArray(le))return le.length;throw new Bi(`Expected value to be of type string or array, but found ${Qr(Gi(le))} instead.`)}eachChild(ie){ie(this.input)}outputDefined(){return!1}}const jn=8192;function Zh(ce,ie){const le=(180+ce[0])/360,pe=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+ce[1]*Math.PI/360)))/360,ge=Math.pow(2,ie.z);return[Math.round(le*ge*jn),Math.round(pe*ge*jn)]}function va(ce,ie){const le=Math.pow(2,ie.z);return[(ge=(ce[0]/jn+ie.x)/le,360*ge-180),(pe=(ce[1]/jn+ie.y)/le,360/Math.PI*Math.atan(Math.exp((180-360*pe)*Math.PI/180))-90)];var pe,ge}function oo(ce,ie){ce[0]=Math.min(ce[0],ie[0]),ce[1]=Math.min(ce[1],ie[1]),ce[2]=Math.max(ce[2],ie[0]),ce[3]=Math.max(ce[3],ie[1])}function Oo(ce,ie){return!(ce[0]<=ie[0]||ce[2]>=ie[2]||ce[1]<=ie[1]||ce[3]>=ie[3])}function Ec(ce,ie,le){const pe=ce[0]-ie[0],ge=ce[1]-ie[1],xe=ce[0]-le[0],Se=ce[1]-le[1];return pe*Se-xe*ge==0&&pe*xe<=0&&ge*Se<=0}function ba(ce,ie,le,pe){return(ge=[pe[0]-le[0],pe[1]-le[1]])[0]*(xe=[ie[0]-ce[0],ie[1]-ce[1]])[1]-ge[1]*xe[0]!=0&&!(!Tl(ce,ie,le,pe)||!Tl(le,pe,ce,ie));var ge,xe}function Xh(ce,ie,le){for(const pe of le)for(let ge=0;ge<pe.length-1;++ge)if(ba(ce,ie,pe[ge],pe[ge+1]))return!0;return!1}function ao(ce,ie,le=!1){let pe=!1;for(const ke of ie)for(let Le=0;Le<ke.length-1;Le++){if(Ec(ce,ke[Le],ke[Le+1]))return le;(xe=ke[Le])[1]>(ge=ce)[1]!=(Se=ke[Le+1])[1]>ge[1]&&ge[0]<(Se[0]-xe[0])*(ge[1]-xe[1])/(Se[1]-xe[1])+xe[0]&&(pe=!pe)}var ge,xe,Se;return pe}function Yh(ce,ie){for(const le of ie)if(ao(ce,le))return!0;return!1}function Mc(ce,ie){for(const le of ce)if(!ao(le,ie))return!1;for(let le=0;le<ce.length-1;++le)if(Xh(ce[le],ce[le+1],ie))return!1;return!0}function Ac(ce,ie){for(const le of ie)if(Mc(ce,le))return!0;return!1}function Tl(ce,ie,le,pe){const ge=pe[0]-le[0],xe=pe[1]-le[1],Se=(ce[0]-le[0])*xe-ge*(ce[1]-le[1]),ke=(ie[0]-le[0])*xe-ge*(ie[1]-le[1]);return Se>0&&ke<0||Se<0&&ke>0}function xa(ce,ie,le){const pe=[];for(let ge=0;ge<ce.length;ge++){const xe=[];for(let Se=0;Se<ce[ge].length;Se++){const ke=Zh(ce[ge][Se],le);oo(ie,ke),xe.push(ke)}pe.push(xe)}return pe}function kc(ce,ie,le){const pe=[];for(let ge=0;ge<ce.length;ge++){const xe=xa(ce[ge],ie,le);pe.push(xe)}return pe}function Ic(ce,ie,le,pe){if(ce[0]<le[0]||ce[0]>le[2]){const ge=.5*pe;let xe=ce[0]-le[0]>ge?-pe:le[0]-ce[0]>ge?pe:0;xe===0&&(xe=ce[0]-le[2]>ge?-pe:le[2]-ce[0]>ge?pe:0),ce[0]+=xe}oo(ie,ce)}function Lc(ce,ie,le,pe){const ge=Math.pow(2,pe.z)*jn,xe=[pe.x*jn,pe.y*jn],Se=[];for(const ke of ce)for(const Le of ke){const Ve=[Le.x+xe[0],Le.y+xe[1]];Ic(Ve,ie,le,ge),Se.push(Ve)}return Se}function zc(ce,ie,le,pe){const ge=Math.pow(2,pe.z)*jn,xe=[pe.x*jn,pe.y*jn],Se=[];for(const Le of ce){const Ve=[];for(const Ne of Le){const He=[Ne.x+xe[0],Ne.y+xe[1]];oo(ie,He),Ve.push(He)}Se.push(Ve)}if(ie[2]-ie[0]<=ge/2){(ke=ie)[0]=ke[1]=1/0,ke[2]=ke[3]=-1/0;for(const Le of Se)for(const Ve of Le)Ic(Ve,ie,le,ge)}var ke;return Se}class ls{constructor(ie,le){this.type=Wr,this.geojson=ie,this.geometries=le}static parse(ie,le){if(ie.length!==2)return le.error(`'within' expression requires exactly one argument, but found ${ie.length-1} instead.`);if(ro(ie[1])){const pe=ie[1];if(pe.type==="FeatureCollection"){const ge=[];for(const xe of pe.features){const{type:Se,coordinates:ke}=xe.geometry;Se==="Polygon"&&ge.push(ke),Se==="MultiPolygon"&&ge.push(...ke)}if(ge.length)return new ls(pe,{type:"MultiPolygon",coordinates:ge})}else if(pe.type==="Feature"){const ge=pe.geometry.type;if(ge==="Polygon"||ge==="MultiPolygon")return new ls(pe,pe.geometry)}else if(pe.type==="Polygon"||pe.type==="MultiPolygon")return new ls(pe,pe)}return le.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(ie){if(ie.geometry()!=null&&ie.canonicalID()!=null){if(ie.geometryType()==="Point")return function(le,pe){const ge=[1/0,1/0,-1/0,-1/0],xe=[1/0,1/0,-1/0,-1/0],Se=le.canonicalID();if(pe.type==="Polygon"){const ke=xa(pe.coordinates,xe,Se),Le=Lc(le.geometry(),ge,xe,Se);if(!Oo(ge,xe))return!1;for(const Ve of Le)if(!ao(Ve,ke))return!1}if(pe.type==="MultiPolygon"){const ke=kc(pe.coordinates,xe,Se),Le=Lc(le.geometry(),ge,xe,Se);if(!Oo(ge,xe))return!1;for(const Ve of Le)if(!Yh(Ve,ke))return!1}return!0}(ie,this.geometries);if(ie.geometryType()==="LineString")return function(le,pe){const ge=[1/0,1/0,-1/0,-1/0],xe=[1/0,1/0,-1/0,-1/0],Se=le.canonicalID();if(pe.type==="Polygon"){const ke=xa(pe.coordinates,xe,Se),Le=zc(le.geometry(),ge,xe,Se);if(!Oo(ge,xe))return!1;for(const Ve of Le)if(!Mc(Ve,ke))return!1}if(pe.type==="MultiPolygon"){const ke=kc(pe.coordinates,xe,Se),Le=zc(le.geometry(),ge,xe,Se);if(!Oo(ge,xe))return!1;for(const Ve of Le)if(!Ac(Ve,ke))return!1}return!0}(ie,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Rc=class{constructor(ce=[],ie=(le,pe)=>le<pe?-1:le>pe?1:0){if(this.data=ce,this.length=this.data.length,this.compare=ie,this.length>0)for(let le=(this.length>>1)-1;le>=0;le--)this._down(le)}push(ce){this.data.push(ce),this._up(this.length++)}pop(){if(this.length===0)return;const ce=this.data[0],ie=this.data.pop();return--this.length>0&&(this.data[0]=ie,this._down(0)),ce}peek(){return this.data[0]}_up(ce){const{data:ie,compare:le}=this,pe=ie[ce];for(;ce>0;){const ge=ce-1>>1,xe=ie[ge];if(le(pe,xe)>=0)break;ie[ce]=xe,ce=ge}ie[ce]=pe}_down(ce){const{data:ie,compare:le}=this,pe=this.length>>1,ge=ie[ce];for(;ce<pe;){let xe=1+(ce<<1);const Se=xe+1;if(Se<this.length&&le(ie[Se],ie[xe])<0&&(xe=Se),le(ie[xe],ge)>=0)break;ie[ce]=ie[xe],ce=xe}ie[ce]=ge}};function Fc(ce,ie,le=0,pe=ce.length-1,ge=Kh){for(;pe>le;){if(pe-le>600){const Le=pe-le+1,Ve=ie-le+1,Ne=Math.log(Le),He=.5*Math.exp(2*Ne/3),et=.5*Math.sqrt(Ne*He*(Le-He)/Le)*(Ve-Le/2<0?-1:1);Fc(ce,ie,Math.max(le,Math.floor(ie-Ve*He/Le+et)),Math.min(pe,Math.floor(ie+(Le-Ve)*He/Le+et)),ge)}const xe=ce[ie];let Se=le,ke=pe;for(Vo(ce,le,ie),ge(ce[pe],xe)>0&&Vo(ce,le,pe);Se<ke;){for(Vo(ce,Se,ke),Se++,ke--;ge(ce[Se],xe)<0;)Se++;for(;ge(ce[ke],xe)>0;)ke--}ge(ce[le],xe)===0?Vo(ce,le,ke):(ke++,Vo(ce,ke,pe)),ke<=ie&&(le=ke+1),ie<=ke&&(pe=ke-1)}}function Vo(ce,ie,le){const pe=ce[ie];ce[ie]=ce[le],ce[le]=pe}function Kh(ce,ie){return ce<ie?-1:ce>ie?1:0}function lo(ce,ie){if(ce.length<=1)return[ce];const le=[];let pe,ge;for(const xe of ce){const Se=Jh(xe);Se!==0&&(xe.area=Math.abs(Se),ge===void 0&&(ge=Se<0),ge===Se<0?(pe&&le.push(pe),pe=[xe]):pe.push(xe))}if(pe&&le.push(pe),ie>1)for(let xe=0;xe<le.length;xe++)le[xe].length<=ie||(Fc(le[xe],ie,1,le[xe].length-1,Dc),le[xe]=le[xe].slice(0,ie));return le}function Dc(ce,ie){return ie.area-ce.area}function Jh(ce){let ie=0;for(let le,pe,ge=0,xe=ce.length,Se=xe-1;ge<xe;Se=ge++)le=ce[ge],pe=ce[Se],ie+=(pe.x-le.x)*(le.y+pe.y);return ie}const Bc=1/298.257223563,Cl=Bc*(2-Bc),Pl=Math.PI/180;class El{constructor(ie){const le=6378.137*Pl*1e3,pe=Math.cos(ie*Pl),ge=1/(1-Cl*(1-pe*pe)),xe=Math.sqrt(ge);this.kx=le*xe*pe,this.ky=le*xe*ge*(1-Cl)}distance(ie,le){const pe=this.wrap(ie[0]-le[0])*this.kx,ge=(ie[1]-le[1])*this.ky;return Math.sqrt(pe*pe+ge*ge)}pointOnLine(ie,le){let pe,ge,xe,Se,ke=1/0;for(let Le=0;Le<ie.length-1;Le++){let Ve=ie[Le][0],Ne=ie[Le][1],He=this.wrap(ie[Le+1][0]-Ve)*this.kx,et=(ie[Le+1][1]-Ne)*this.ky,nt=0;He===0&&et===0||(nt=(this.wrap(le[0]-Ve)*this.kx*He+(le[1]-Ne)*this.ky*et)/(He*He+et*et),nt>1?(Ve=ie[Le+1][0],Ne=ie[Le+1][1]):nt>0&&(Ve+=He/this.kx*nt,Ne+=et/this.ky*nt)),He=this.wrap(le[0]-Ve)*this.kx,et=(le[1]-Ne)*this.ky;const ot=He*He+et*et;ot<ke&&(ke=ot,pe=Ve,ge=Ne,xe=Le,Se=nt)}return{point:[pe,ge],index:xe,t:Math.max(0,Math.min(1,Se))}}wrap(ie){for(;ie<-180;)ie+=360;for(;ie>180;)ie-=360;return ie}}function Oc(ce,ie){return ie[0]-ce[0]}function wa(ce){return ce[1]-ce[0]+1}function cs(ce,ie){return ce[1]>=ce[0]&&ce[1]<ie}function Ml(ce,ie){if(ce[0]>ce[1])return[null,null];const le=wa(ce);if(ie){if(le===2)return[ce,null];const ge=Math.floor(le/2);return[[ce[0],ce[0]+ge],[ce[0]+ge,ce[1]]]}if(le===1)return[ce,null];const pe=Math.floor(le/2)-1;return[[ce[0],ce[0]+pe],[ce[0]+pe+1,ce[1]]]}function Al(ce,ie){if(!cs(ie,ce.length))return[1/0,1/0,-1/0,-1/0];const le=[1/0,1/0,-1/0,-1/0];for(let pe=ie[0];pe<=ie[1];++pe)oo(le,ce[pe]);return le}function kl(ce){const ie=[1/0,1/0,-1/0,-1/0];for(const le of ce)for(const pe of le)oo(ie,pe);return ie}function Vc(ce){return ce[0]!==-1/0&&ce[1]!==-1/0&&ce[2]!==1/0&&ce[3]!==1/0}function Si(ce,ie,le){if(!Vc(ce)||!Vc(ie))return NaN;let pe=0,ge=0;return ce[2]<ie[0]&&(pe=ie[0]-ce[2]),ce[0]>ie[2]&&(pe=ce[0]-ie[2]),ce[1]>ie[3]&&(ge=ce[1]-ie[3]),ce[3]<ie[1]&&(ge=ie[1]-ce[3]),le.distance([0,0],[pe,ge])}function $s(ce,ie,le){const pe=le.pointOnLine(ie,ce);return le.distance(ce,pe.point)}function Il(ce,ie,le,pe,ge){const xe=Math.min($s(ce,[le,pe],ge),$s(ie,[le,pe],ge)),Se=Math.min($s(le,[ce,ie],ge),$s(pe,[ce,ie],ge));return Math.min(xe,Se)}function Qh(ce,ie,le,pe,ge){if(!cs(ie,ce.length)||!cs(pe,le.length))return 1/0;let xe=1/0;for(let Se=ie[0];Se<ie[1];++Se){const ke=ce[Se],Le=ce[Se+1];for(let Ve=pe[0];Ve<pe[1];++Ve){const Ne=le[Ve],He=le[Ve+1];if(ba(ke,Le,Ne,He))return 0;xe=Math.min(xe,Il(ke,Le,Ne,He,ge))}}return xe}function eu(ce,ie,le,pe,ge){if(!cs(ie,ce.length)||!cs(pe,le.length))return NaN;let xe=1/0;for(let Se=ie[0];Se<=ie[1];++Se)for(let ke=pe[0];ke<=pe[1];++ke)if(xe=Math.min(xe,ge.distance(ce[Se],le[ke])),xe===0)return xe;return xe}function tu(ce,ie,le){if(ao(ce,ie,!0))return 0;let pe=1/0;for(const ge of ie){const xe=ge[0],Se=ge[ge.length-1];if(xe!==Se&&(pe=Math.min(pe,$s(ce,[Se,xe],le)),pe===0))return pe;const ke=le.pointOnLine(ge,ce);if(pe=Math.min(pe,le.distance(ce,ke.point)),pe===0)return pe}return pe}function ru(ce,ie,le,pe){if(!cs(ie,ce.length))return NaN;for(let xe=ie[0];xe<=ie[1];++xe)if(ao(ce[xe],le,!0))return 0;let ge=1/0;for(let xe=ie[0];xe<ie[1];++xe){const Se=ce[xe],ke=ce[xe+1];for(const Le of le)for(let Ve=0,Ne=Le.length,He=Ne-1;Ve<Ne;He=Ve++){const et=Le[He],nt=Le[Ve];if(ba(Se,ke,et,nt))return 0;ge=Math.min(ge,Il(Se,ke,et,nt,pe))}}return ge}function Nc(ce,ie){for(const le of ce)for(const pe of le)if(ao(pe,ie,!0))return!0;return!1}function iu(ce,ie,le,pe=1/0){const ge=kl(ce),xe=kl(ie);if(pe!==1/0&&Si(ge,xe,le)>=pe)return pe;if(Oo(ge,xe)){if(Nc(ce,ie))return 0}else if(Nc(ie,ce))return 0;let Se=1/0;for(const ke of ce)for(let Le=0,Ve=ke.length,Ne=Ve-1;Le<Ve;Ne=Le++){const He=ke[Ne],et=ke[Le];for(const nt of ie)for(let ot=0,ut=nt.length,gt=ut-1;ot<ut;gt=ot++){const St=nt[gt],$t=nt[ot];if(ba(He,et,St,$t))return 0;Se=Math.min(Se,Il(He,et,St,$t,le))}}return Se}function $c(ce,ie,le,pe,ge,xe){if(!xe)return;const Se=Si(Al(pe,xe),ge,le);Se<ie&&ce.push([Se,xe,[0,0]])}function Sa(ce,ie,le,pe,ge,xe,Se){if(!xe||!Se)return;const ke=Si(Al(pe,xe),Al(ge,Se),le);ke<ie&&ce.push([ke,xe,Se])}function Ta(ce,ie,le,pe,ge=1/0){let xe=Math.min(pe.distance(ce[0],le[0][0]),ge);if(xe===0)return xe;const Se=new Rc([[0,[0,ce.length-1],[0,0]]],Oc),ke=kl(le);for(;Se.length>0;){const Le=Se.pop();if(Le[0]>=xe)continue;const Ve=Le[1],Ne=ie?50:100;if(wa(Ve)<=Ne){if(!cs(Ve,ce.length))return NaN;if(ie){const He=ru(ce,Ve,le,pe);if(isNaN(He)||He===0)return He;xe=Math.min(xe,He)}else for(let He=Ve[0];He<=Ve[1];++He){const et=tu(ce[He],le,pe);if(xe=Math.min(xe,et),xe===0)return 0}}else{const He=Ml(Ve,ie);$c(Se,xe,pe,ce,ke,He[0]),$c(Se,xe,pe,ce,ke,He[1])}}return xe}function Ca(ce,ie,le,pe,ge,xe=1/0){let Se=Math.min(xe,ge.distance(ce[0],le[0]));if(Se===0)return Se;const ke=new Rc([[0,[0,ce.length-1],[0,le.length-1]]],Oc);for(;ke.length>0;){const Le=ke.pop();if(Le[0]>=Se)continue;const Ve=Le[1],Ne=Le[2],He=ie?50:100,et=pe?50:100;if(wa(Ve)<=He&&wa(Ne)<=et){if(!cs(Ve,ce.length)&&cs(Ne,le.length))return NaN;let nt;if(ie&&pe)nt=Qh(ce,Ve,le,Ne,ge),Se=Math.min(Se,nt);else if(ie&&!pe){const ot=ce.slice(Ve[0],Ve[1]+1);for(let ut=Ne[0];ut<=Ne[1];++ut)if(nt=$s(le[ut],ot,ge),Se=Math.min(Se,nt),Se===0)return Se}else if(!ie&&pe){const ot=le.slice(Ne[0],Ne[1]+1);for(let ut=Ve[0];ut<=Ve[1];++ut)if(nt=$s(ce[ut],ot,ge),Se=Math.min(Se,nt),Se===0)return Se}else nt=eu(ce,Ve,le,Ne,ge),Se=Math.min(Se,nt)}else{const nt=Ml(Ve,ie),ot=Ml(Ne,pe);Sa(ke,Se,ge,ce,le,nt[0],ot[0]),Sa(ke,Se,ge,ce,le,nt[0],ot[1]),Sa(ke,Se,ge,ce,le,nt[1],ot[0]),Sa(ke,Se,ge,ce,le,nt[1],ot[1])}}return Se}function Ll(ce){return ce.type==="MultiPolygon"?ce.coordinates.map(ie=>({type:"Polygon",coordinates:ie})):ce.type==="MultiLineString"?ce.coordinates.map(ie=>({type:"LineString",coordinates:ie})):ce.type==="MultiPoint"?ce.coordinates.map(ie=>({type:"Point",coordinates:ie})):[ce]}class qs{constructor(ie,le){this.type=or,this.geojson=ie,this.geometries=le}static parse(ie,le){if(ie.length!==2)return le.error(`'distance' expression requires exactly one argument, but found ${ie.length-1} instead.`);if(ro(ie[1])){const pe=ie[1];if(pe.type==="FeatureCollection")return new qs(pe,pe.features.map(ge=>Ll(ge.geometry)).flat());if(pe.type==="Feature")return new qs(pe,Ll(pe.geometry));if("type"in pe&&"coordinates"in pe)return new qs(pe,Ll(pe))}return le.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(ie){if(ie.geometry()!=null&&ie.canonicalID()!=null){if(ie.geometryType()==="Point")return function(le,pe){const ge=le.geometry(),xe=ge.flat().map(Le=>va([Le.x,Le.y],le.canonical));if(ge.length===0)return NaN;const Se=new El(xe[0][1]);let ke=1/0;for(const Le of pe){switch(Le.type){case"Point":ke=Math.min(ke,Ca(xe,!1,[Le.coordinates],!1,Se,ke));break;case"LineString":ke=Math.min(ke,Ca(xe,!1,Le.coordinates,!0,Se,ke));break;case"Polygon":ke=Math.min(ke,Ta(xe,!1,Le.coordinates,Se,ke))}if(ke===0)return ke}return ke}(ie,this.geometries);if(ie.geometryType()==="LineString")return function(le,pe){const ge=le.geometry(),xe=ge.flat().map(Le=>va([Le.x,Le.y],le.canonical));if(ge.length===0)return NaN;const Se=new El(xe[0][1]);let ke=1/0;for(const Le of pe){switch(Le.type){case"Point":ke=Math.min(ke,Ca(xe,!0,[Le.coordinates],!1,Se,ke));break;case"LineString":ke=Math.min(ke,Ca(xe,!0,Le.coordinates,!0,Se,ke));break;case"Polygon":ke=Math.min(ke,Ta(xe,!0,Le.coordinates,Se,ke))}if(ke===0)return ke}return ke}(ie,this.geometries);if(ie.geometryType()==="Polygon")return function(le,pe){const ge=le.geometry();if(ge.length===0||ge[0].length===0)return NaN;const xe=lo(ge,0).map(Le=>Le.map(Ve=>Ve.map(Ne=>va([Ne.x,Ne.y],le.canonical)))),Se=new El(xe[0][0][0][1]);let ke=1/0;for(const Le of pe)for(const Ve of xe){switch(Le.type){case"Point":ke=Math.min(ke,Ta([Le.coordinates],!1,Ve,Se,ke));break;case"LineString":ke=Math.min(ke,Ta(Le.coordinates,!0,Ve,Se,ke));break;case"Polygon":ke=Math.min(ke,iu(Ve,Le.coordinates,Se,ke))}if(ke===0)return ke}return ke}(ie,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class No{constructor(ie){this.type=Fr,this.key=ie}static parse(ie,le){if(ie.length!==2)return le.error(`Expected 1 argument, but found ${ie.length-1} instead.`);const pe=ie[1];return pe==null?le.error("Global state property must be defined."):typeof pe!="string"?le.error(`Global state property must be string, but found ${typeof ie[1]} instead.`):new No(pe)}evaluate(ie){var le;const pe=(le=ie.globals)===null||le===void 0?void 0:le.globalState;return pe&&Object.keys(pe).length!==0?Ro(pe,this.key):null}eachChild(){}outputDefined(){return!1}}const co={"==":ma,"!=":ga,">":Pc,"<":Jn,">=":Uh,"<=":_a,array:ei,at:Bo,boolean:ei,case:pa,coalesce:Vs,collator:so,format:ya,image:wl,in:ha,"index-of":ua,interpolate:zn,"interpolate-hcl":zn,"interpolate-lab":zn,length:Sl,let:Os,literal:fs,match:da,number:ei,"number-format":xl,object:ei,slice:Kn,step:Ts,string:ei,"to-boolean":fi,"to-color":fi,"to-number":fi,"to-string":fi,var:Do,within:ls,distance:qs,"global-state":No};class Un{constructor(ie,le,pe,ge){this.name=ie,this.type=le,this._evaluate=pe,this.args=ge}evaluate(ie){return this._evaluate(ie,this.args)}eachChild(ie){this.args.forEach(ie)}outputDefined(){return!1}static parse(ie,le){const pe=ie[0],ge=Un.definitions[pe];if(!ge)return le.error(`Unknown expression "${pe}". If you wanted a literal array, use ["literal", [...]].`,0);const xe=Array.isArray(ge)?ge[0]:ge.type,Se=Array.isArray(ge)?[[ge[1],ge[2]]]:ge.overloads,ke=Se.filter(([Ve])=>!Array.isArray(Ve)||Ve.length===ie.length-1);let Le=null;for(const[Ve,Ne]of ke){Le=new io(le.registry,Pa,le.path,null,le.scope);const He=[];let et=!1;for(let nt=1;nt<ie.length;nt++){const ot=ie[nt],ut=Array.isArray(Ve)?Ve[nt-1]:Ve.type,gt=Le.parse(ot,1+He.length,ut);if(!gt){et=!0;break}He.push(gt)}if(!et)if(Array.isArray(Ve)&&Ve.length!==He.length)Le.error(`Expected ${Ve.length} arguments, but found ${He.length} instead.`);else{for(let nt=0;nt<He.length;nt++){const ot=Array.isArray(Ve)?Ve[nt]:Ve.type,ut=He[nt];Le.concat(nt+1).checkSubtype(ot,ut.type)}if(Le.errors.length===0)return new Un(pe,xe,Ne,He)}}if(ke.length===1)le.errors.push(...Le.errors);else{const Ve=(ke.length?ke:Se).map(([He])=>{return et=He,Array.isArray(et)?`(${et.map(Qr).join(", ")})`:`(${Qr(et.type)}...)`;var et}).join(" | "),Ne=[];for(let He=1;He<ie.length;He++){const et=le.parse(ie[He],1+Ne.length);if(!et)return null;Ne.push(Qr(et.type))}le.error(`Expected arguments of type ${Ve}, but found (${Ne.join(", ")}) instead.`)}return null}static register(ie,le){Un.definitions=le;for(const pe in le)ie[pe]=Un}}function qc(ce,[ie,le,pe,ge]){ie=ie.evaluate(ce),le=le.evaluate(ce),pe=pe.evaluate(ce);const xe=ge?ge.evaluate(ce):1,Se=_l(ie,le,pe,xe);if(Se)throw new Bi(Se);return new ai(ie/255,le/255,pe/255,xe,!1)}function jc(ce,ie){return ce in ie}function zl(ce,ie){const le=ie[ce];return le===void 0?null:le}function js(ce){return{type:ce}}function Pa(ce){if(ce instanceof Do)return Pa(ce.boundExpression);if(ce instanceof Un&&ce.name==="error"||ce instanceof so||ce instanceof ls||ce instanceof qs||ce instanceof No)return!1;const ie=ce instanceof fi||ce instanceof ei;let le=!0;return ce.eachChild(pe=>{le=ie?le&&Pa(pe):le&&pe instanceof fs}),!!le&&Ea(ce)&&Ma(ce,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function Ea(ce){if(ce instanceof Un&&(ce.name==="get"&&ce.args.length===1||ce.name==="feature-state"||ce.name==="has"&&ce.args.length===1||ce.name==="properties"||ce.name==="geometry-type"||ce.name==="id"||/^filter-/.test(ce.name))||ce instanceof ls||ce instanceof qs)return!1;let ie=!0;return ce.eachChild(le=>{ie&&!Ea(le)&&(ie=!1)}),ie}function $o(ce){if(ce instanceof Un&&ce.name==="feature-state")return!1;let ie=!0;return ce.eachChild(le=>{ie&&!$o(le)&&(ie=!1)}),ie}function Ma(ce,ie){if(ce instanceof Un&&ie.indexOf(ce.name)>=0)return!1;let le=!0;return ce.eachChild(pe=>{le&&!Ma(pe,ie)&&(le=!1)}),le}function Wc(ce){return{result:"success",value:ce}}function ho(ce){return{result:"error",value:ce}}function uo(ce){return ce["property-type"]==="data-driven"||ce["property-type"]==="cross-faded-data-driven"}function Gc(ce){return!!ce.expression&&ce.expression.parameters.indexOf("zoom")>-1}function Rl(ce){return!!ce.expression&&ce.expression.interpolated}function yi(ce){return ce instanceof Number?"number":ce instanceof String?"string":ce instanceof Boolean?"boolean":Array.isArray(ce)?"array":ce===null?"null":typeof ce}function po(ce){return typeof ce=="object"&&ce!==null&&!Array.isArray(ce)&&Gi(ce)===$i}function nu(ce){return ce}function Hc(ce,ie){const le=ce.stops&&typeof ce.stops[0][0]=="object",pe=le||!(le||ce.property!==void 0),ge=ce.type||(Rl(ie)?"exponential":"interval"),xe=function(Ne){switch(Ne.type){case"color":return ai.parse;case"padding":return dn.parse;case"numberArray":return Mn.parse;case"colorArray":return on.parse;default:return null}}(ie);if(xe&&((ce=Qt({},ce)).stops&&(ce.stops=ce.stops.map(Ne=>[Ne[0],xe(Ne[1])])),ce.default=xe(ce.default?ce.default:ie.default)),ce.colorSpace&&(Se=ce.colorSpace)!=="rgb"&&Se!=="hcl"&&Se!=="lab")throw new Error(`Unknown color space: "${ce.colorSpace}"`);var Se;const ke=function(Ne){switch(Ne){case"exponential":return Zc;case"interval":return su;case"categorical":return Uc;case"identity":return Aa;default:throw new Error(`Unknown function type "${Ne}"`)}}(ge);let Le,Ve;if(ge==="categorical"){Le=Object.create(null);for(const Ne of ce.stops)Le[Ne[0]]=Ne[1];Ve=typeof ce.stops[0][0]}if(le){const Ne={},He=[];for(let ot=0;ot<ce.stops.length;ot++){const ut=ce.stops[ot],gt=ut[0].zoom;Ne[gt]===void 0&&(Ne[gt]={zoom:gt,type:ce.type,property:ce.property,default:ce.default,stops:[]},He.push(gt)),Ne[gt].stops.push([ut[0].value,ut[1]])}const et=[];for(const ot of He)et.push([Ne[ot].zoom,Hc(Ne[ot],ie)]);const nt={name:"linear"};return{kind:"composite",interpolationType:nt,interpolationFactor:zn.interpolationFactor.bind(void 0,nt),zoomStops:et.map(ot=>ot[0]),evaluate:({zoom:ot},ut)=>Zc({stops:et,base:ce.base},ie,ot).evaluate(ot,ut)}}if(pe){const Ne=ge==="exponential"?{name:"exponential",base:ce.base!==void 0?ce.base:1}:null;return{kind:"camera",interpolationType:Ne,interpolationFactor:zn.interpolationFactor.bind(void 0,Ne),zoomStops:ce.stops.map(He=>He[0]),evaluate:({zoom:He})=>ke(ce,ie,He,Le,Ve)}}return{kind:"source",evaluate(Ne,He){const et=He&&He.properties?He.properties[ce.property]:void 0;return et===void 0?qo(ce.default,ie.default):ke(ce,ie,et,Le,Ve)}}}function qo(ce,ie,le){return ce!==void 0?ce:ie!==void 0?ie:le!==void 0?le:void 0}function Uc(ce,ie,le,pe,ge){return qo(typeof le===ge?pe[le]:void 0,ce.default,ie.default)}function su(ce,ie,le){if(yi(le)!=="number")return qo(ce.default,ie.default);const pe=ce.stops.length;if(pe===1||le<=ce.stops[0][0])return ce.stops[0][1];if(le>=ce.stops[pe-1][0])return ce.stops[pe-1][1];const ge=an(ce.stops.map(xe=>xe[0]),le);return ce.stops[ge][1]}function Zc(ce,ie,le){const pe=ce.base!==void 0?ce.base:1;if(yi(le)!=="number")return qo(ce.default,ie.default);const ge=ce.stops.length;if(ge===1||le<=ce.stops[0][0])return ce.stops[0][1];if(le>=ce.stops[ge-1][0])return ce.stops[ge-1][1];const xe=an(ce.stops.map(Ne=>Ne[0]),le),Se=function(Ne,He,et,nt){const ot=nt-et,ut=Ne-et;return ot===0?0:He===1?ut/ot:(Math.pow(He,ut)-1)/(Math.pow(He,ot)-1)}(le,pe,ce.stops[xe][0],ce.stops[xe+1][0]),ke=ce.stops[xe][1],Le=ce.stops[xe+1][1],Ve=Rn[ie.type]||nu;return typeof ke.evaluate=="function"?{evaluate(...Ne){const He=ke.evaluate.apply(void 0,Ne),et=Le.evaluate.apply(void 0,Ne);if(He!==void 0&&et!==void 0)return Ve(He,et,Se,ce.colorSpace)}}:Ve(ke,Le,Se,ce.colorSpace)}function Aa(ce,ie,le){switch(ie.type){case"color":le=ai.parse(le);break;case"formatted":le=xn.fromString(le.toString());break;case"resolvedImage":le=Sn.fromString(le.toString());break;case"padding":le=dn.parse(le);break;case"colorArray":le=on.parse(le);break;case"numberArray":le=Mn.parse(le);break;default:yi(le)===ie.type||ie.type==="enum"&&ie.values[le]||(le=void 0)}return qo(le,ce.default,ie.default)}Un.register(co,{error:[{kind:"error"},[wr],(ce,[ie])=>{throw new Bi(ie.evaluate(ce))}],typeof:[wr,[Fr],(ce,[ie])=>Qr(Gi(ie.evaluate(ce)))],"to-rgba":[si(or,4),[vi],(ce,[ie])=>{const[le,pe,ge,xe]=ie.evaluate(ce).rgb;return[255*le,255*pe,255*ge,xe]}],rgb:[vi,[or,or,or],qc],rgba:[vi,[or,or,or,or],qc],has:{type:Wr,overloads:[[[wr],(ce,[ie])=>jc(ie.evaluate(ce),ce.properties())],[[wr,$i],(ce,[ie,le])=>jc(ie.evaluate(ce),le.evaluate(ce))]]},get:{type:Fr,overloads:[[[wr],(ce,[ie])=>zl(ie.evaluate(ce),ce.properties())],[[wr,$i],(ce,[ie,le])=>zl(ie.evaluate(ce),le.evaluate(ce))]]},"feature-state":[Fr,[wr],(ce,[ie])=>zl(ie.evaluate(ce),ce.featureState||{})],properties:[$i,[],ce=>ce.properties()],"geometry-type":[wr,[],ce=>ce.geometryType()],id:[Fr,[],ce=>ce.id()],zoom:[or,[],ce=>ce.globals.zoom],"heatmap-density":[or,[],ce=>ce.globals.heatmapDensity||0],elevation:[or,[],ce=>ce.globals.elevation||0],"line-progress":[or,[],ce=>ce.globals.lineProgress||0],accumulated:[Fr,[],ce=>ce.globals.accumulated===void 0?null:ce.globals.accumulated],"+":[or,js(or),(ce,ie)=>{let le=0;for(const pe of ie)le+=pe.evaluate(ce);return le}],"*":[or,js(or),(ce,ie)=>{let le=1;for(const pe of ie)le*=pe.evaluate(ce);return le}],"-":{type:or,overloads:[[[or,or],(ce,[ie,le])=>ie.evaluate(ce)-le.evaluate(ce)],[[or],(ce,[ie])=>-ie.evaluate(ce)]]},"/":[or,[or,or],(ce,[ie,le])=>ie.evaluate(ce)/le.evaluate(ce)],"%":[or,[or,or],(ce,[ie,le])=>ie.evaluate(ce)%le.evaluate(ce)],ln2:[or,[],()=>Math.LN2],pi:[or,[],()=>Math.PI],e:[or,[],()=>Math.E],"^":[or,[or,or],(ce,[ie,le])=>Math.pow(ie.evaluate(ce),le.evaluate(ce))],sqrt:[or,[or],(ce,[ie])=>Math.sqrt(ie.evaluate(ce))],log10:[or,[or],(ce,[ie])=>Math.log(ie.evaluate(ce))/Math.LN10],ln:[or,[or],(ce,[ie])=>Math.log(ie.evaluate(ce))],log2:[or,[or],(ce,[ie])=>Math.log(ie.evaluate(ce))/Math.LN2],sin:[or,[or],(ce,[ie])=>Math.sin(ie.evaluate(ce))],cos:[or,[or],(ce,[ie])=>Math.cos(ie.evaluate(ce))],tan:[or,[or],(ce,[ie])=>Math.tan(ie.evaluate(ce))],asin:[or,[or],(ce,[ie])=>Math.asin(ie.evaluate(ce))],acos:[or,[or],(ce,[ie])=>Math.acos(ie.evaluate(ce))],atan:[or,[or],(ce,[ie])=>Math.atan(ie.evaluate(ce))],min:[or,js(or),(ce,ie)=>Math.min(...ie.map(le=>le.evaluate(ce)))],max:[or,js(or),(ce,ie)=>Math.max(...ie.map(le=>le.evaluate(ce)))],abs:[or,[or],(ce,[ie])=>Math.abs(ie.evaluate(ce))],round:[or,[or],(ce,[ie])=>{const le=ie.evaluate(ce);return le<0?-Math.round(-le):Math.round(le)}],floor:[or,[or],(ce,[ie])=>Math.floor(ie.evaluate(ce))],ceil:[or,[or],(ce,[ie])=>Math.ceil(ie.evaluate(ce))],"filter-==":[Wr,[wr,Fr],(ce,[ie,le])=>ce.properties()[ie.value]===le.value],"filter-id-==":[Wr,[Fr],(ce,[ie])=>ce.id()===ie.value],"filter-type-==":[Wr,[wr],(ce,[ie])=>ce.geometryType()===ie.value],"filter-<":[Wr,[wr,Fr],(ce,[ie,le])=>{const pe=ce.properties()[ie.value],ge=le.value;return typeof pe==typeof ge&&pe<ge}],"filter-id-<":[Wr,[Fr],(ce,[ie])=>{const le=ce.id(),pe=ie.value;return typeof le==typeof pe&&le<pe}],"filter->":[Wr,[wr,Fr],(ce,[ie,le])=>{const pe=ce.properties()[ie.value],ge=le.value;return typeof pe==typeof ge&&pe>ge}],"filter-id->":[Wr,[Fr],(ce,[ie])=>{const le=ce.id(),pe=ie.value;return typeof le==typeof pe&&le>pe}],"filter-<=":[Wr,[wr,Fr],(ce,[ie,le])=>{const pe=ce.properties()[ie.value],ge=le.value;return typeof pe==typeof ge&&pe<=ge}],"filter-id-<=":[Wr,[Fr],(ce,[ie])=>{const le=ce.id(),pe=ie.value;return typeof le==typeof pe&&le<=pe}],"filter->=":[Wr,[wr,Fr],(ce,[ie,le])=>{const pe=ce.properties()[ie.value],ge=le.value;return typeof pe==typeof ge&&pe>=ge}],"filter-id->=":[Wr,[Fr],(ce,[ie])=>{const le=ce.id(),pe=ie.value;return typeof le==typeof pe&&le>=pe}],"filter-has":[Wr,[Fr],(ce,[ie])=>ie.value in ce.properties()],"filter-has-id":[Wr,[],ce=>ce.id()!==null&&ce.id()!==void 0],"filter-type-in":[Wr,[si(wr)],(ce,[ie])=>ie.value.indexOf(ce.geometryType())>=0],"filter-id-in":[Wr,[si(Fr)],(ce,[ie])=>ie.value.indexOf(ce.id())>=0],"filter-in-small":[Wr,[wr,si(Fr)],(ce,[ie,le])=>le.value.indexOf(ce.properties()[ie.value])>=0],"filter-in-large":[Wr,[wr,si(Fr)],(ce,[ie,le])=>function(pe,ge,xe,Se){for(;xe<=Se;){const ke=xe+Se>>1;if(ge[ke]===pe)return!0;ge[ke]>pe?Se=ke-1:xe=ke+1}return!1}(ce.properties()[ie.value],le.value,0,le.value.length-1)],all:{type:Wr,overloads:[[[Wr,Wr],(ce,[ie,le])=>ie.evaluate(ce)&&le.evaluate(ce)],[js(Wr),(ce,ie)=>{for(const le of ie)if(!le.evaluate(ce))return!1;return!0}]]},any:{type:Wr,overloads:[[[Wr,Wr],(ce,[ie,le])=>ie.evaluate(ce)||le.evaluate(ce)],[js(Wr),(ce,ie)=>{for(const le of ie)if(le.evaluate(ce))return!0;return!1}]]},"!":[Wr,[Wr],(ce,[ie])=>!ie.evaluate(ce)],"is-supported-script":[Wr,[wr],(ce,[ie])=>{const le=ce.globals&&ce.globals.isSupportedScript;return!le||le(ie.evaluate(ce))}],upcase:[wr,[wr],(ce,[ie])=>ie.evaluate(ce).toUpperCase()],downcase:[wr,[wr],(ce,[ie])=>ie.evaluate(ce).toLowerCase()],concat:[wr,js(Fr),(ce,ie)=>ie.map(le=>Ii(le.evaluate(ce))).join("")],"resolved-locale":[wr,[ki],(ce,[ie])=>ie.evaluate(ce).resolvedLocale()]});class ka{constructor(ie,le,pe){this.expression=ie,this._warningHistory={},this._evaluator=new as,this._defaultValue=le?function(ge){if(ge.type==="color"&&po(ge.default))return new ai(0,0,0,0);switch(ge.type){case"color":return ai.parse(ge.default)||null;case"padding":return dn.parse(ge.default)||null;case"numberArray":return Mn.parse(ge.default)||null;case"colorArray":return on.parse(ge.default)||null;case"variableAnchorOffsetCollection":return wn.parse(ge.default)||null;case"projectionDefinition":return On.parse(ge.default)||null;default:return ge.default===void 0?null:ge.default}}(le):null,this._enumValues=le&&le.type==="enum"?le.values:null,this._globalState=pe}evaluateWithoutErrorHandling(ie,le,pe,ge,xe,Se){return this._globalState&&(ie=fo(ie,this._globalState)),this._evaluator.globals=ie,this._evaluator.feature=le,this._evaluator.featureState=pe,this._evaluator.canonical=ge,this._evaluator.availableImages=xe||null,this._evaluator.formattedSection=Se,this.expression.evaluate(this._evaluator)}evaluate(ie,le,pe,ge,xe,Se){this._globalState&&(ie=fo(ie,this._globalState)),this._evaluator.globals=ie,this._evaluator.feature=le||null,this._evaluator.featureState=pe||null,this._evaluator.canonical=ge,this._evaluator.availableImages=xe||null,this._evaluator.formattedSection=Se||null;try{const ke=this.expression.evaluate(this._evaluator);if(ke==null||typeof ke=="number"&&ke!=ke)return this._defaultValue;if(this._enumValues&&!(ke in this._enumValues))throw new Bi(`Expected value to be one of ${Object.keys(this._enumValues).map(Le=>JSON.stringify(Le)).join(", ")}, but found ${JSON.stringify(ke)} instead.`);return ke}catch(ke){return this._warningHistory[ke.message]||(this._warningHistory[ke.message]=!0,typeof console!="undefined"&&console.warn(ke.message)),this._defaultValue}}}function Ia(ce){return Array.isArray(ce)&&ce.length>0&&typeof ce[0]=="string"&&ce[0]in co}function La(ce,ie,le){const pe=new io(co,Pa,[],ie?function(xe){const Se={color:vi,string:wr,number:or,enum:wr,boolean:Wr,formatted:qi,padding:Ai,numberArray:oi,colorArray:Ri,projectionDefinition:Ni,resolvedImage:ni,variableAnchorOffsetCollection:Xi};return xe.type==="array"?si(Se[xe.value]||Fr,xe.length):Se[xe.type]}(ie):void 0),ge=pe.parse(ce,void 0,void 0,void 0,ie&&ie.type==="string"?{typeAnnotation:"coerce"}:void 0);return ge?Wc(new ka(ge,ie,le)):ho(pe.errors)}class za{constructor(ie,le,pe){this.kind=ie,this._styleExpression=le,this.isStateDependent=ie!=="constant"&&!$o(le.expression),this.globalStateRefs=Ra(le.expression),this._globalState=pe}evaluateWithoutErrorHandling(ie,le,pe,ge,xe,Se){return this._globalState&&(ie=fo(ie,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(ie,le,pe,ge,xe,Se)}evaluate(ie,le,pe,ge,xe,Se){return this._globalState&&(ie=fo(ie,this._globalState)),this._styleExpression.evaluate(ie,le,pe,ge,xe,Se)}}class Fl{constructor(ie,le,pe,ge,xe){this.kind=ie,this.zoomStops=pe,this._styleExpression=le,this.isStateDependent=ie!=="camera"&&!$o(le.expression),this.globalStateRefs=Ra(le.expression),this.interpolationType=ge,this._globalState=xe}evaluateWithoutErrorHandling(ie,le,pe,ge,xe,Se){return this._globalState&&(ie=fo(ie,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(ie,le,pe,ge,xe,Se)}evaluate(ie,le,pe,ge,xe,Se){return this._globalState&&(ie=fo(ie,this._globalState)),this._styleExpression.evaluate(ie,le,pe,ge,xe,Se)}interpolationFactor(ie,le,pe){return this.interpolationType?zn.interpolationFactor(this.interpolationType,ie,le,pe):0}}function Xc(ce,ie,le){const pe=La(ce,ie,le);if(pe.result==="error")return pe;const ge=pe.value.expression,xe=Ea(ge);if(!xe&&!uo(ie))return ho([new Mr("","data expressions not supported")]);const Se=Ma(ge,["zoom"]);if(!Se&&!Gc(ie))return ho([new Mr("","zoom expressions not supported")]);const ke=Wo(ge);return ke||Se?ke instanceof Mr?ho([ke]):ke instanceof zn&&!Rl(ie)?ho([new Mr("",'"interpolate" expressions cannot be used with this property')]):Wc(ke?new Fl(xe?"camera":"composite",pe.value,ke.labels,ke instanceof zn?ke.interpolation:void 0,le):new za(xe?"constant":"source",pe.value,le)):ho([new Mr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class jo{constructor(ie,le){this._parameters=ie,this._specification=le,Qt(this,Hc(this._parameters,this._specification))}static deserialize(ie){return new jo(ie._parameters,ie._specification)}static serialize(ie){return{_parameters:ie._parameters,_specification:ie._specification}}}function Wo(ce){let ie=null;if(ce instanceof Os)ie=Wo(ce.result);else if(ce instanceof Vs){for(const le of ce.args)if(ie=Wo(le),ie)break}else(ce instanceof Ts||ce instanceof zn)&&ce.input instanceof Un&&ce.input.name==="zoom"&&(ie=ce);return ie instanceof Mr||ce.eachChild(le=>{const pe=Wo(le);pe instanceof Mr?ie=pe:!ie&&pe?ie=new Mr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):ie&&pe&&ie!==pe&&(ie=new Mr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),ie}function Ra(ce,ie=new Set){return ce instanceof No&&ie.add(ce.key),ce.eachChild(le=>{Ra(le,ie)}),ie}function fo(ce,ie){const{zoom:le,heatmapDensity:pe,elevation:ge,lineProgress:xe,isSupportedScript:Se,accumulated:ke}=ce!=null?ce:{};return{zoom:le,heatmapDensity:pe,elevation:ge,lineProgress:xe,isSupportedScript:Se,accumulated:ke,globalState:ie}}function Fa(ce){if(ce===!0||ce===!1)return!0;if(!Array.isArray(ce)||ce.length===0)return!1;switch(ce[0]){case"has":return ce.length>=2&&ce[1]!=="$id"&&ce[1]!=="$type";case"in":return ce.length>=3&&(typeof ce[1]!="string"||Array.isArray(ce[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return ce.length!==3||Array.isArray(ce[1])||Array.isArray(ce[2]);case"any":case"all":for(const ie of ce.slice(1))if(!Fa(ie)&&typeof ie!="boolean")return!1;return!0;default:return!0}}const Yc={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function mo(ce,ie){if(ce==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};Fa(ce)||(ce=Da(ce));const le=La(ce,Yc,ie);if(le.result==="error")throw new Error(le.value.map(pe=>`${pe.key}: ${pe.message}`).join(", "));return{filter:(pe,ge,xe)=>le.value.evaluate(pe,ge,{},xe),needGeometry:Kc(ce),getGlobalStateRefs:()=>Ra(le.value.expression)}}function ou(ce,ie){return ce<ie?-1:ce>ie?1:0}function Kc(ce){if(!Array.isArray(ce))return!1;if(ce[0]==="within"||ce[0]==="distance")return!0;for(let ie=1;ie<ce.length;ie++)if(Kc(ce[ie]))return!0;return!1}function Da(ce){if(!ce)return!0;const ie=ce[0];return ce.length<=1?ie!=="any":ie==="=="?Dl(ce[1],ce[2],"=="):ie==="!="?go(Dl(ce[1],ce[2],"==")):ie==="<"||ie===">"||ie==="<="||ie===">="?Dl(ce[1],ce[2],ie):ie==="any"?(le=ce.slice(1),["any"].concat(le.map(Da))):ie==="all"?["all"].concat(ce.slice(1).map(Da)):ie==="none"?["all"].concat(ce.slice(1).map(Da).map(go)):ie==="in"?Bl(ce[1],ce.slice(2)):ie==="!in"?go(Bl(ce[1],ce.slice(2))):ie==="has"?Ol(ce[1]):ie!=="!has"||go(Ol(ce[1]));var le}function Dl(ce,ie,le){switch(ce){case"$type":return[`filter-type-${le}`,ie];case"$id":return[`filter-id-${le}`,ie];default:return[`filter-${le}`,ce,ie]}}function Bl(ce,ie){if(ie.length===0)return!1;switch(ce){case"$type":return["filter-type-in",["literal",ie]];case"$id":return["filter-id-in",["literal",ie]];default:return ie.length>200&&!ie.some(le=>typeof le!=typeof ie[0])?["filter-in-large",ce,["literal",ie.sort(ou)]]:["filter-in-small",ce,["literal",ie]]}}function Ol(ce){switch(ce){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",ce]}}function go(ce){return["!",ce]}function Go(ce){const ie=typeof ce;if(ie==="number"||ie==="boolean"||ie==="string"||ce==null)return JSON.stringify(ce);if(Array.isArray(ce)){let ge="[";for(const xe of ce)ge+=`${Go(xe)},`;return`${ge}]`}const le=Object.keys(ce).sort();let pe="{";for(let ge=0;ge<le.length;ge++)pe+=`${JSON.stringify(le[ge])}:${Go(ce[le[ge]])},`;return`${pe}}`}function Vl(ce){let ie="";for(const le of zr)ie+=`/${Go(ce[le])}`;return ie}function Ba(ce){const ie=ce.value;return ie?[new jt(ce.key,ie,"constants have been deprecated as of v8")]:[]}function Wi(ce){return ce instanceof Number||ce instanceof String||ce instanceof Boolean?ce.valueOf():ce}function Ws(ce){if(Array.isArray(ce))return ce.map(Ws);if(ce instanceof Object&&!(ce instanceof Number||ce instanceof String||ce instanceof Boolean)){const ie={};for(const le in ce)ie[le]=Ws(ce[le]);return ie}return Wi(ce)}function Zn(ce){const ie=ce.key,le=ce.value,pe=ce.valueSpec||{},ge=ce.objectElementValidators||{},xe=ce.style,Se=ce.styleSpec,ke=ce.validateSpec;let Le=[];const Ve=yi(le);if(Ve!=="object")return[new jt(ie,le,`object expected, ${Ve} found`)];for(const Ne in le){const He=Ne.split(".")[0],et=Ro(pe,He)||pe["*"];let nt;if(Ro(ge,He))nt=ge[He];else if(Ro(pe,He))nt=ke;else if(ge["*"])nt=ge["*"];else{if(!pe["*"]){Le.push(new jt(ie,le[Ne],`unknown property "${Ne}"`));continue}nt=ke}Le=Le.concat(nt({key:(ie&&`${ie}.`)+Ne,value:le[Ne],valueSpec:et,style:xe,styleSpec:Se,object:le,objectKey:Ne,validateSpec:ke},le))}for(const Ne in pe)ge[Ne]||pe[Ne].required&&pe[Ne].default===void 0&&le[Ne]===void 0&&Le.push(new jt(ie,le,`missing required property "${Ne}"`));return Le}function Nl(ce){const ie=ce.value,le=ce.valueSpec,pe=ce.style,ge=ce.styleSpec,xe=ce.key,Se=ce.arrayElementValidator||ce.validateSpec;if(yi(ie)!=="array")return[new jt(xe,ie,`array expected, ${yi(ie)} found`)];if(le.length&&ie.length!==le.length)return[new jt(xe,ie,`array length ${le.length} expected, length ${ie.length} found`)];if(le["min-length"]&&ie.length<le["min-length"])return[new jt(xe,ie,`array length at least ${le["min-length"]} expected, length ${ie.length} found`)];let ke={type:le.value,values:le.values};ge.$version<7&&(ke.function=le.function),yi(le.value)==="object"&&(ke=le.value);let Le=[];for(let Ve=0;Ve<ie.length;Ve++)Le=Le.concat(Se({array:ie,arrayIndex:Ve,value:ie[Ve],valueSpec:ke,validateSpec:ce.validateSpec,style:pe,styleSpec:ge,key:`${xe}[${Ve}]`}));return Le}function Oa(ce){const ie=ce.key,le=ce.value,pe=ce.valueSpec;let ge=yi(le);return ge==="number"&&le!=le&&(ge="NaN"),ge!=="number"?[new jt(ie,le,`number expected, ${ge} found`)]:"minimum"in pe&&le<pe.minimum?[new jt(ie,le,`${le} is less than the minimum value ${pe.minimum}`)]:"maximum"in pe&&le>pe.maximum?[new jt(ie,le,`${le} is greater than the maximum value ${pe.maximum}`)]:[]}function Jc(ce){const ie=ce.valueSpec,le=Wi(ce.value.type);let pe,ge,xe,Se={};const ke=le!=="categorical"&&ce.value.property===void 0,Le=!ke,Ve=yi(ce.value.stops)==="array"&&yi(ce.value.stops[0])==="array"&&yi(ce.value.stops[0][0])==="object",Ne=Zn({key:ce.key,value:ce.value,valueSpec:ce.styleSpec.function,validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec,objectElementValidators:{stops:function(nt){if(le==="identity")return[new jt(nt.key,nt.value,'identity function may not have a "stops" property')];let ot=[];const ut=nt.value;return ot=ot.concat(Nl({key:nt.key,value:ut,valueSpec:nt.valueSpec,validateSpec:nt.validateSpec,style:nt.style,styleSpec:nt.styleSpec,arrayElementValidator:He})),yi(ut)==="array"&&ut.length===0&&ot.push(new jt(nt.key,ut,"array must have at least one stop")),ot},default:function(nt){return nt.validateSpec({key:nt.key,value:nt.value,valueSpec:ie,validateSpec:nt.validateSpec,style:nt.style,styleSpec:nt.styleSpec})}}});return le==="identity"&&ke&&Ne.push(new jt(ce.key,ce.value,'missing required property "property"')),le==="identity"||ce.value.stops||Ne.push(new jt(ce.key,ce.value,'missing required property "stops"')),le==="exponential"&&ce.valueSpec.expression&&!Rl(ce.valueSpec)&&Ne.push(new jt(ce.key,ce.value,"exponential functions not supported")),ce.styleSpec.$version>=8&&(Le&&!uo(ce.valueSpec)?Ne.push(new jt(ce.key,ce.value,"property functions not supported")):ke&&!Gc(ce.valueSpec)&&Ne.push(new jt(ce.key,ce.value,"zoom functions not supported"))),le!=="categorical"&&!Ve||ce.value.property!==void 0||Ne.push(new jt(ce.key,ce.value,'"property" property is required')),Ne;function He(nt){let ot=[];const ut=nt.value,gt=nt.key;if(yi(ut)!=="array")return[new jt(gt,ut,`array expected, ${yi(ut)} found`)];if(ut.length!==2)return[new jt(gt,ut,`array length 2 expected, length ${ut.length} found`)];if(Ve){if(yi(ut[0])!=="object")return[new jt(gt,ut,`object expected, ${yi(ut[0])} found`)];if(ut[0].zoom===void 0)return[new jt(gt,ut,"object stop key must have zoom")];if(ut[0].value===void 0)return[new jt(gt,ut,"object stop key must have value")];if(xe&&xe>Wi(ut[0].zoom))return[new jt(gt,ut[0].zoom,"stop zoom values must appear in ascending order")];Wi(ut[0].zoom)!==xe&&(xe=Wi(ut[0].zoom),ge=void 0,Se={}),ot=ot.concat(Zn({key:`${gt}[0]`,value:ut[0],valueSpec:{zoom:{}},validateSpec:nt.validateSpec,style:nt.style,styleSpec:nt.styleSpec,objectElementValidators:{zoom:Oa,value:et}}))}else ot=ot.concat(et({key:`${gt}[0]`,value:ut[0],validateSpec:nt.validateSpec,style:nt.style,styleSpec:nt.styleSpec},ut));return Ia(Ws(ut[1]))?ot.concat([new jt(`${gt}[1]`,ut[1],"expressions are not allowed in function stops.")]):ot.concat(nt.validateSpec({key:`${gt}[1]`,value:ut[1],valueSpec:ie,validateSpec:nt.validateSpec,style:nt.style,styleSpec:nt.styleSpec}))}function et(nt,ot){const ut=yi(nt.value),gt=Wi(nt.value),St=nt.value!==null?nt.value:ot;if(pe){if(ut!==pe)return[new jt(nt.key,St,`${ut} stop domain type must match previous stop domain type ${pe}`)]}else pe=ut;if(ut!=="number"&&ut!=="string"&&ut!=="boolean")return[new jt(nt.key,St,"stop domain value must be a number, string, or boolean")];if(ut!=="number"&&le!=="categorical"){let $t=`number expected, ${ut} found`;return uo(ie)&&le===void 0&&($t+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new jt(nt.key,St,$t)]}return le!=="categorical"||ut!=="number"||isFinite(gt)&&Math.floor(gt)===gt?le!=="categorical"&&ut==="number"&&ge!==void 0&&gt<ge?[new jt(nt.key,St,"stop domain values must appear in ascending order")]:(ge=gt,le==="categorical"&&gt in Se?[new jt(nt.key,St,"stop domain values must be unique")]:(Se[gt]=!0,[])):[new jt(nt.key,St,`integer expected, found ${gt}`)]}}function _o(ce){const ie=(ce.expressionContext==="property"?Xc:La)(Ws(ce.value),ce.valueSpec);if(ie.result==="error")return ie.value.map(pe=>new jt(`${ce.key}${pe.key}`,ce.value,pe.message));const le=ie.value.expression||ie.value._styleExpression.expression;if(ce.expressionContext==="property"&&ce.propertyKey==="text-font"&&!le.outputDefined())return[new jt(ce.key,ce.value,`Invalid data expression for "${ce.propertyKey}". Output values must be contained as literals within the expression.`)];if(ce.expressionContext==="property"&&ce.propertyType==="layout"&&!$o(le))return[new jt(ce.key,ce.value,'"feature-state" data expressions are not supported with layout properties.')];if(ce.expressionContext==="filter"&&!$o(le))return[new jt(ce.key,ce.value,'"feature-state" data expressions are not supported with filters.')];if(ce.expressionContext&&ce.expressionContext.indexOf("cluster")===0){if(!Ma(le,["zoom","feature-state"]))return[new jt(ce.key,ce.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(ce.expressionContext==="cluster-initial"&&!Ea(le))return[new jt(ce.key,ce.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Va(ce){const ie=ce.key,le=ce.value,pe=yi(le);return pe!=="string"?[new jt(ie,le,`color expected, ${pe} found`)]:ai.parse(String(le))?[]:[new jt(ie,le,`color expected, "${le}" found`)]}function yo(ce){const ie=ce.key,le=ce.value,pe=ce.valueSpec,ge=[];return Array.isArray(pe.values)?pe.values.indexOf(Wi(le))===-1&&ge.push(new jt(ie,le,`expected one of [${pe.values.join(", ")}], ${JSON.stringify(le)} found`)):Object.keys(pe.values).indexOf(Wi(le))===-1&&ge.push(new jt(ie,le,`expected one of [${Object.keys(pe.values).join(", ")}], ${JSON.stringify(le)} found`)),ge}function vo(ce){return Fa(Ws(ce.value))?_o(Qt({},ce,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Qc(ce)}function Qc(ce){const ie=ce.value,le=ce.key;if(yi(ie)!=="array")return[new jt(le,ie,`array expected, ${yi(ie)} found`)];const pe=ce.styleSpec;let ge,xe=[];if(ie.length<1)return[new jt(le,ie,"filter array must have at least 1 element")];switch(xe=xe.concat(yo({key:`${le}[0]`,value:ie[0],valueSpec:pe.filter_operator,style:ce.style,styleSpec:ce.styleSpec})),Wi(ie[0])){case"<":case"<=":case">":case">=":ie.length>=2&&Wi(ie[1])==="$type"&&xe.push(new jt(le,ie,`"$type" cannot be use with operator "${ie[0]}"`));case"==":case"!=":ie.length!==3&&xe.push(new jt(le,ie,`filter array for operator "${ie[0]}" must have 3 elements`));case"in":case"!in":ie.length>=2&&(ge=yi(ie[1]),ge!=="string"&&xe.push(new jt(`${le}[1]`,ie[1],`string expected, ${ge} found`)));for(let Se=2;Se<ie.length;Se++)ge=yi(ie[Se]),Wi(ie[1])==="$type"?xe=xe.concat(yo({key:`${le}[${Se}]`,value:ie[Se],valueSpec:pe.geometry_type,style:ce.style,styleSpec:ce.styleSpec})):ge!=="string"&&ge!=="number"&&ge!=="boolean"&&xe.push(new jt(`${le}[${Se}]`,ie[Se],`string, number, or boolean expected, ${ge} found`));break;case"any":case"all":case"none":for(let Se=1;Se<ie.length;Se++)xe=xe.concat(Qc({key:`${le}[${Se}]`,value:ie[Se],style:ce.style,styleSpec:ce.styleSpec}));break;case"has":case"!has":ge=yi(ie[1]),ie.length!==2?xe.push(new jt(le,ie,`filter array for "${ie[0]}" operator must have 2 elements`)):ge!=="string"&&xe.push(new jt(`${le}[1]`,ie[1],`string expected, ${ge} found`))}return xe}function $l(ce,ie){const le=ce.key,pe=ce.validateSpec,ge=ce.style,xe=ce.styleSpec,Se=ce.value,ke=ce.objectKey,Le=xe[`${ie}_${ce.layerType}`];if(!Le)return[];const Ve=ke.match(/^(.*)-transition$/);if(ie==="paint"&&Ve&&Le[Ve[1]]&&Le[Ve[1]].transition)return pe({key:le,value:Se,valueSpec:xe.transition,style:ge,styleSpec:xe});const Ne=ce.valueSpec||Le[ke];if(!Ne)return[new jt(le,Se,`unknown property "${ke}"`)];let He;if(yi(Se)==="string"&&uo(Ne)&&!Ne.tokens&&(He=/^{([^}]+)}$/.exec(Se)))return[new jt(le,Se,`"${ke}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(He[1])} }\`.`)];const et=[];return ce.layerType==="symbol"&&(ke==="text-field"&&ge&&!ge.glyphs&&et.push(new jt(le,Se,'use of "text-field" requires a style "glyphs" property')),ke==="text-font"&&po(Ws(Se))&&Wi(Se.type)==="identity"&&et.push(new jt(le,Se,'"text-font" does not support identity functions'))),et.concat(pe({key:ce.key,value:Se,valueSpec:Ne,style:ge,styleSpec:xe,expressionContext:"property",propertyType:ie,propertyKey:ke}))}function ql(ce){return $l(ce,"paint")}function eh(ce){return $l(ce,"layout")}function jl(ce){let ie=[];const le=ce.value,pe=ce.key,ge=ce.style,xe=ce.styleSpec;if(yi(le)!=="object")return[new jt(pe,le,`object expected, ${yi(le)} found`)];le.type||le.ref||ie.push(new jt(pe,le,'either "type" or "ref" is required'));let Se=Wi(le.type);const ke=Wi(le.ref);if(le.id){const Le=Wi(le.id);for(let Ve=0;Ve<ce.arrayIndex;Ve++){const Ne=ge.layers[Ve];Wi(Ne.id)===Le&&ie.push(new jt(pe,le.id,`duplicate layer id "${le.id}", previously used at line ${Ne.id.__line__}`))}}if("ref"in le){let Le;["type","source","source-layer","filter","layout"].forEach(Ve=>{Ve in le&&ie.push(new jt(pe,le[Ve],`"${Ve}" is prohibited for ref layers`))}),ge.layers.forEach(Ve=>{Wi(Ve.id)===ke&&(Le=Ve)}),Le?Le.ref?ie.push(new jt(pe,le.ref,"ref cannot reference another ref layer")):Se=Wi(Le.type):ie.push(new jt(pe,le.ref,`ref layer "${ke}" not found`))}else if(Se!=="background")if(le.source){const Le=ge.sources&&ge.sources[le.source],Ve=Le&&Wi(Le.type);Le?Ve==="vector"&&Se==="raster"?ie.push(new jt(pe,le.source,`layer "${le.id}" requires a raster source`)):Ve!=="raster-dem"&&Se==="hillshade"||Ve!=="raster-dem"&&Se==="color-relief"?ie.push(new jt(pe,le.source,`layer "${le.id}" requires a raster-dem source`)):Ve==="raster"&&Se!=="raster"?ie.push(new jt(pe,le.source,`layer "${le.id}" requires a vector source`)):Ve!=="vector"||le["source-layer"]?Ve==="raster-dem"&&Se!=="hillshade"&&Se!=="color-relief"?ie.push(new jt(pe,le.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):Se!=="line"||!le.paint||!le.paint["line-gradient"]||Ve==="geojson"&&Le.lineMetrics||ie.push(new jt(pe,le,`layer "${le.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):ie.push(new jt(pe,le,`layer "${le.id}" must specify a "source-layer"`)):ie.push(new jt(pe,le.source,`source "${le.source}" not found`))}else ie.push(new jt(pe,le,'missing required property "source"'));return ie=ie.concat(Zn({key:pe,value:le,valueSpec:xe.layer,style:ce.style,styleSpec:ce.styleSpec,validateSpec:ce.validateSpec,objectElementValidators:{"*":()=>[],type:()=>ce.validateSpec({key:`${pe}.type`,value:le.type,valueSpec:xe.layer.type,style:ce.style,styleSpec:ce.styleSpec,validateSpec:ce.validateSpec,object:le,objectKey:"type"}),filter:vo,layout:Le=>Zn({layer:le,key:Le.key,value:Le.value,style:Le.style,styleSpec:Le.styleSpec,validateSpec:Le.validateSpec,objectElementValidators:{"*":Ve=>eh(Qt({layerType:Se},Ve))}}),paint:Le=>Zn({layer:le,key:Le.key,value:Le.value,style:Le.style,styleSpec:Le.styleSpec,validateSpec:Le.validateSpec,objectElementValidators:{"*":Ve=>ql(Qt({layerType:Se},Ve))}})}})),ie}function Cs(ce){const ie=ce.value,le=ce.key,pe=yi(ie);return pe!=="string"?[new jt(le,ie,`string expected, ${pe} found`)]:[]}const bo={promoteId:function({key:ce,value:ie}){if(yi(ie)==="string")return Cs({key:ce,value:ie});{const le=[];for(const pe in ie)le.push(...Cs({key:`${ce}.${pe}`,value:ie[pe]}));return le}}};function th(ce){const ie=ce.value,le=ce.key,pe=ce.styleSpec,ge=ce.style,xe=ce.validateSpec;if(!ie.type)return[new jt(le,ie,'"type" is required')];const Se=Wi(ie.type);let ke;switch(Se){case"vector":case"raster":return ke=Zn({key:le,value:ie,valueSpec:pe[`source_${Se.replace("-","_")}`],style:ce.style,styleSpec:pe,objectElementValidators:bo,validateSpec:xe}),ke;case"raster-dem":return ke=function(Le){var Ve;const Ne=(Ve=Le.sourceName)!==null&&Ve!==void 0?Ve:"",He=Le.value,et=Le.styleSpec,nt=et.source_raster_dem,ot=Le.style;let ut=[];const gt=yi(He);if(He===void 0)return ut;if(gt!=="object")return ut.push(new jt("source_raster_dem",He,`object expected, ${gt} found`)),ut;const St=Wi(He.encoding)==="custom",$t=["redFactor","greenFactor","blueFactor","baseShift"],Et=Le.value.encoding?`"${Le.value.encoding}"`:"Default";for(const zt in He)!St&&$t.includes(zt)?ut.push(new jt(zt,He[zt],`In "${Ne}": "${zt}" is only valid when "encoding" is set to "custom". ${Et} encoding found`)):nt[zt]?ut=ut.concat(Le.validateSpec({key:zt,value:He[zt],valueSpec:nt[zt],validateSpec:Le.validateSpec,style:ot,styleSpec:et})):ut.push(new jt(zt,He[zt],`unknown property "${zt}"`));return ut}({sourceName:le,value:ie,style:ce.style,styleSpec:pe,validateSpec:xe}),ke;case"geojson":if(ke=Zn({key:le,value:ie,valueSpec:pe.source_geojson,style:ge,styleSpec:pe,validateSpec:xe,objectElementValidators:bo}),ie.cluster)for(const Le in ie.clusterProperties){const[Ve,Ne]=ie.clusterProperties[Le],He=typeof Ve=="string"?[Ve,["accumulated"],["get",Le]]:Ve;ke.push(..._o({key:`${le}.${Le}.map`,value:Ne,expressionContext:"cluster-map"})),ke.push(..._o({key:`${le}.${Le}.reduce`,value:He,expressionContext:"cluster-reduce"}))}return ke;case"video":return Zn({key:le,value:ie,valueSpec:pe.source_video,style:ge,validateSpec:xe,styleSpec:pe});case"image":return Zn({key:le,value:ie,valueSpec:pe.source_image,style:ge,validateSpec:xe,styleSpec:pe});case"canvas":return[new jt(le,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return yo({key:`${le}.type`,value:ie.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function rh(ce){const ie=ce.value,le=ce.styleSpec,pe=le.light,ge=ce.style;let xe=[];const Se=yi(ie);if(ie===void 0)return xe;if(Se!=="object")return xe=xe.concat([new jt("light",ie,`object expected, ${Se} found`)]),xe;for(const ke in ie){const Le=ke.match(/^(.*)-transition$/);xe=xe.concat(Le&&pe[Le[1]]&&pe[Le[1]].transition?ce.validateSpec({key:ke,value:ie[ke],valueSpec:le.transition,validateSpec:ce.validateSpec,style:ge,styleSpec:le}):pe[ke]?ce.validateSpec({key:ke,value:ie[ke],valueSpec:pe[ke],validateSpec:ce.validateSpec,style:ge,styleSpec:le}):[new jt(ke,ie[ke],`unknown property "${ke}"`)])}return xe}function ih(ce){const ie=ce.value,le=ce.styleSpec,pe=le.sky,ge=ce.style,xe=yi(ie);if(ie===void 0)return[];if(xe!=="object")return[new jt("sky",ie,`object expected, ${xe} found`)];let Se=[];for(const ke in ie)Se=Se.concat(pe[ke]?ce.validateSpec({key:ke,value:ie[ke],valueSpec:pe[ke],style:ge,styleSpec:le}):[new jt(ke,ie[ke],`unknown property "${ke}"`)]);return Se}function nh(ce){const ie=ce.value,le=ce.styleSpec,pe=le.terrain,ge=ce.style;let xe=[];const Se=yi(ie);if(ie===void 0)return xe;if(Se!=="object")return xe=xe.concat([new jt("terrain",ie,`object expected, ${Se} found`)]),xe;for(const ke in ie)xe=xe.concat(pe[ke]?ce.validateSpec({key:ke,value:ie[ke],valueSpec:pe[ke],validateSpec:ce.validateSpec,style:ge,styleSpec:le}):[new jt(ke,ie[ke],`unknown property "${ke}"`)]);return xe}function sh(ce){let ie=[];const le=ce.value,pe=ce.key;if(Array.isArray(le)){const ge=[],xe=[];for(const Se in le)le[Se].id&&ge.includes(le[Se].id)&&ie.push(new jt(pe,le,`all the sprites' ids must be unique, but ${le[Se].id} is duplicated`)),ge.push(le[Se].id),le[Se].url&&xe.includes(le[Se].url)&&ie.push(new jt(pe,le,`all the sprites' URLs must be unique, but ${le[Se].url} is duplicated`)),xe.push(le[Se].url),ie=ie.concat(Zn({key:`${pe}[${Se}]`,value:le[Se],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:ce.validateSpec}));return ie}return Cs({key:pe,value:le})}function oh(ce){return ie=ce.value,Boolean(ie)&&ie.constructor===Object?[]:[new jt(ce.key,ce.value,`object expected, ${yi(ce.value)} found`)];var ie}const xo={"*":()=>[],array:Nl,boolean:function(ce){const ie=ce.value,le=ce.key,pe=yi(ie);return pe!=="boolean"?[new jt(le,ie,`boolean expected, ${pe} found`)]:[]},number:Oa,color:Va,constants:Ba,enum:yo,filter:vo,function:Jc,layer:jl,object:Zn,source:th,light:rh,sky:ih,terrain:nh,projection:function(ce){const ie=ce.value,le=ce.styleSpec,pe=le.projection,ge=ce.style,xe=yi(ie);if(ie===void 0)return[];if(xe!=="object")return[new jt("projection",ie,`object expected, ${xe} found`)];let Se=[];for(const ke in ie)Se=Se.concat(pe[ke]?ce.validateSpec({key:ke,value:ie[ke],valueSpec:pe[ke],style:ge,styleSpec:le}):[new jt(ke,ie[ke],`unknown property "${ke}"`)]);return Se},projectionDefinition:function(ce){const ie=ce.key;let le=ce.value;le=le instanceof String?le.valueOf():le;const pe=yi(le);return pe!=="array"||function(ge){return Array.isArray(ge)&&ge.length===3&&typeof ge[0]=="string"&&typeof ge[1]=="string"&&typeof ge[2]=="number"}(le)||function(ge){return!!["interpolate","step","literal"].includes(ge[0])}(le)?["array","string"].includes(pe)?[]:[new jt(ie,le,`projection expected, invalid type "${pe}" found`)]:[new jt(ie,le,`projection expected, invalid array ${JSON.stringify(le)} found`)]},string:Cs,formatted:function(ce){return Cs(ce).length===0?[]:_o(ce)},resolvedImage:function(ce){return Cs(ce).length===0?[]:_o(ce)},padding:function(ce){const ie=ce.key,le=ce.value;if(yi(le)==="array"){if(le.length<1||le.length>4)return[new jt(ie,le,`padding requires 1 to 4 values; ${le.length} values found`)];const pe={type:"number"};let ge=[];for(let xe=0;xe<le.length;xe++)ge=ge.concat(ce.validateSpec({key:`${ie}[${xe}]`,value:le[xe],validateSpec:ce.validateSpec,valueSpec:pe}));return ge}return Oa({key:ie,value:le,valueSpec:{}})},numberArray:function(ce){const ie=ce.key,le=ce.value;if(yi(le)==="array"){const pe={type:"number"};if(le.length<1)return[new jt(ie,le,"array length at least 1 expected, length 0 found")];let ge=[];for(let xe=0;xe<le.length;xe++)ge=ge.concat(ce.validateSpec({key:`${ie}[${xe}]`,value:le[xe],validateSpec:ce.validateSpec,valueSpec:pe}));return ge}return Oa({key:ie,value:le,valueSpec:{}})},colorArray:function(ce){const ie=ce.key,le=ce.value;if(yi(le)==="array"){if(le.length<1)return[new jt(ie,le,"array length at least 1 expected, length 0 found")];let pe=[];for(let ge=0;ge<le.length;ge++)pe=pe.concat(Va({key:`${ie}[${ge}]`,value:le[ge]}));return pe}return Va({key:ie,value:le})},variableAnchorOffsetCollection:function(ce){const ie=ce.key,le=ce.value,pe=yi(le),ge=ce.styleSpec;if(pe!=="array"||le.length<1||le.length%2!=0)return[new jt(ie,le,"variableAnchorOffsetCollection requires a non-empty array of even length")];let xe=[];for(let Se=0;Se<le.length;Se+=2)xe=xe.concat(yo({key:`${ie}[${Se}]`,value:le[Se],valueSpec:ge.layout_symbol["text-anchor"]})),xe=xe.concat(Nl({key:`${ie}[${Se+1}]`,value:le[Se+1],valueSpec:{length:2,value:"number"},validateSpec:ce.validateSpec,style:ce.style,styleSpec:ge}));return xe},sprite:sh,state:oh};function Ps(ce){const ie=ce.value,le=ce.valueSpec,pe=ce.styleSpec;return ce.validateSpec=Ps,le.expression&&po(Wi(ie))?Jc(ce):le.expression&&Ia(Ws(ie))?_o(ce):le.type&&xo[le.type]?xo[le.type](ce):Zn(Qt({},ce,{valueSpec:le.type?pe[le.type]:le}))}function Vn(ce){const ie=ce.value,le=ce.key,pe=Cs(ce);return pe.length||(ie.indexOf("{fontstack}")===-1&&pe.push(new jt(le,ie,'"glyphs" url must include a "{fontstack}" token')),ie.indexOf("{range}")===-1&&pe.push(new jt(le,ie,'"glyphs" url must include a "{range}" token'))),pe}function An(ce,ie=Ot){let le=[];return le=le.concat(Ps({key:"",value:ce,valueSpec:ie.$root,styleSpec:ie,style:ce,validateSpec:Ps,objectElementValidators:{glyphs:Vn,"*":()=>[]}})),ce.constants&&(le=le.concat(Ba({key:"constants",value:ce.constants}))),ah(le)}function Xn(ce){return function(ie){return ce(Object.assign({},ie,{validateSpec:Ps}))}}function ah(ce){return[].concat(ce).sort((ie,le)=>ie.line-le.line)}function Qn(ce){return function(...ie){return ah(ce.apply(this,ie))}}An.source=Qn(Xn(th)),An.sprite=Qn(Xn(sh)),An.glyphs=Qn(Xn(Vn)),An.light=Qn(Xn(rh)),An.sky=Qn(Xn(ih)),An.terrain=Qn(Xn(nh)),An.state=Qn(Xn(oh)),An.layer=Qn(Xn(jl)),An.filter=Qn(Xn(vo)),An.paintProperty=Qn(Xn(ql)),An.layoutProperty=Qn(Xn(eh));const hs=An,lh=hs.light,Wl=hs.sky,au=hs.paintProperty,Gl=hs.layoutProperty;function ch(ce,ie){let le=!1;if(ie&&ie.length)for(const pe of ie)ce.fire(new Zt(new Error(pe.message))),le=!0;return le}class ms{constructor(ie,le,pe){const ge=this.cells=[];if(ie instanceof ArrayBuffer){this.arrayBuffer=ie;const Se=new Int32Array(this.arrayBuffer);ie=Se[0],this.d=(le=Se[1])+2*(pe=Se[2]);for(let Le=0;Le<this.d*this.d;Le++){const Ve=Se[3+Le],Ne=Se[3+Le+1];ge.push(Ve===Ne?null:Se.subarray(Ve,Ne))}const ke=Se[3+ge.length+1];this.keys=Se.subarray(Se[3+ge.length],ke),this.bboxes=Se.subarray(ke),this.insert=this._insertReadonly}else{this.d=le+2*pe;for(let Se=0;Se<this.d*this.d;Se++)ge.push([]);this.keys=[],this.bboxes=[]}this.n=le,this.extent=ie,this.padding=pe,this.scale=le/ie,this.uid=0;const xe=pe/le*ie;this.min=-xe,this.max=ie+xe}insert(ie,le,pe,ge,xe){this._forEachCell(le,pe,ge,xe,this._insertCell,this.uid++,void 0,void 0),this.keys.push(ie),this.bboxes.push(le),this.bboxes.push(pe),this.bboxes.push(ge),this.bboxes.push(xe)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(ie,le,pe,ge,xe,Se){this.cells[xe].push(Se)}query(ie,le,pe,ge,xe){const Se=this.min,ke=this.max;if(ie<=Se&&le<=Se&&ke<=pe&&ke<=ge&&!xe)return Array.prototype.slice.call(this.keys);{const Le=[];return this._forEachCell(ie,le,pe,ge,this._queryCell,Le,{},xe),Le}}_queryCell(ie,le,pe,ge,xe,Se,ke,Le){const Ve=this.cells[xe];if(Ve!==null){const Ne=this.keys,He=this.bboxes;for(let et=0;et<Ve.length;et++){const nt=Ve[et];if(ke[nt]===void 0){const ot=4*nt;(Le?Le(He[ot+0],He[ot+1],He[ot+2],He[ot+3]):ie<=He[ot+2]&&le<=He[ot+3]&&pe>=He[ot+0]&&ge>=He[ot+1])?(ke[nt]=!0,Se.push(Ne[nt])):ke[nt]=!1}}}}_forEachCell(ie,le,pe,ge,xe,Se,ke,Le){const Ve=this._convertToCellCoord(ie),Ne=this._convertToCellCoord(le),He=this._convertToCellCoord(pe),et=this._convertToCellCoord(ge);for(let nt=Ve;nt<=He;nt++)for(let ot=Ne;ot<=et;ot++){const ut=this.d*ot+nt;if((!Le||Le(this._convertFromCellCoord(nt),this._convertFromCellCoord(ot),this._convertFromCellCoord(nt+1),this._convertFromCellCoord(ot+1)))&&xe.call(this,ie,le,pe,ge,ut,Se,ke,Le))return}}_convertFromCellCoord(ie){return(ie-this.padding)/this.scale}_convertToCellCoord(ie){return Math.max(0,Math.min(this.d-1,Math.floor(ie*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const ie=this.cells,le=3+this.cells.length+1+1;let pe=0;for(let Se=0;Se<this.cells.length;Se++)pe+=this.cells[Se].length;const ge=new Int32Array(le+pe+this.keys.length+this.bboxes.length);ge[0]=this.extent,ge[1]=this.n,ge[2]=this.padding;let xe=le;for(let Se=0;Se<ie.length;Se++){const ke=ie[Se];ge[3+Se]=xe,ge.set(ke,xe),xe+=ke.length}return ge[3+ie.length]=xe,ge.set(this.keys,xe),xe+=this.keys.length,ge[3+ie.length+1]=xe,ge.set(this.bboxes,xe),xe+=this.bboxes.length,ge.buffer}static serialize(ie,le){const pe=ie.toArrayBuffer();return le&&le.push(pe),{buffer:pe}}static deserialize(ie){return new ms(ie.buffer)}}const gs={};function Rr(ce,ie,le={}){if(gs[ce])throw new Error(`${ce} is already registered.`);Object.defineProperty(ie,"_classRegistryKey",{value:ce,writeable:!1}),gs[ce]={klass:ie,omit:le.omit||[],shallow:le.shallow||[]}}Rr("Object",Object),Rr("Set",Set),Rr("TransferableGridIndex",ms),Rr("Color",ai),Rr("Error",Error),Rr("AJAXError",yt),Rr("ResolvedImage",Sn),Rr("StylePropertyFunction",jo),Rr("StyleExpression",ka,{omit:["_evaluator"]}),Rr("ZoomDependentExpression",Fl),Rr("ZoomConstantExpression",za),Rr("CompoundExpression",Un,{omit:["_evaluate"]});for(const ce in co)co[ce]._classRegistryKey||Rr(`Expression_${ce}`,co[ce]);function hh(ce){return ce&&typeof ArrayBuffer!="undefined"&&(ce instanceof ArrayBuffer||ce.constructor&&ce.constructor.name==="ArrayBuffer")}function Gs(ce){return ce.$name||ce.constructor._classRegistryKey}function uh(ce){return!function(ie){if(ie===null||typeof ie!="object")return!1;const le=Gs(ie);return!(!le||le==="Object")}(ce)&&(ce==null||typeof ce=="boolean"||typeof ce=="number"||typeof ce=="string"||ce instanceof Boolean||ce instanceof Number||ce instanceof String||ce instanceof Date||ce instanceof RegExp||ce instanceof Blob||ce instanceof Error||hh(ce)||ci(ce)||ArrayBuffer.isView(ce)||ce instanceof ImageData)}function Ho(ce,ie){if(uh(ce))return(hh(ce)||ci(ce))&&ie&&ie.push(ce),ArrayBuffer.isView(ce)&&ie&&ie.push(ce.buffer),ce instanceof ImageData&&ie&&ie.push(ce.data.buffer),ce;if(Array.isArray(ce)){const xe=[];for(const Se of ce)xe.push(Ho(Se,ie));return xe}if(typeof ce!="object")throw new Error("can't serialize object of type "+typeof ce);const le=Gs(ce);if(!le)throw new Error(`can't serialize object of unregistered class ${ce.constructor.name}`);if(!gs[le])throw new Error(`${le} is not registered.`);const{klass:pe}=gs[le],ge=pe.serialize?pe.serialize(ce,ie):{};if(pe.serialize){if(ie&&ge===ie[ie.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const xe in ce){if(!ce.hasOwnProperty(xe)||gs[le].omit.indexOf(xe)>=0)continue;const Se=ce[xe];ge[xe]=gs[le].shallow.indexOf(xe)>=0?Se:Ho(Se,ie)}ce instanceof Error&&(ge.message=ce.message)}if(ge.$name)throw new Error("$name property is reserved for worker serialization logic.");return le!=="Object"&&(ge.$name=le),ge}function Es(ce){if(uh(ce))return ce;if(Array.isArray(ce))return ce.map(Es);if(typeof ce!="object")throw new Error("can't deserialize object of type "+typeof ce);const ie=Gs(ce)||"Object";if(!gs[ie])throw new Error(`can't deserialize unregistered class ${ie}`);const{klass:le}=gs[ie];if(!le)throw new Error(`can't deserialize unregistered class ${ie}`);if(le.deserialize)return le.deserialize(ce);const pe=Object.create(le.prototype);for(const ge of Object.keys(ce)){if(ge==="$name")continue;const xe=ce[ge];pe[ge]=gs[ie].shallow.indexOf(ge)>=0?xe:Es(xe)}return pe}class Hl{constructor(){this.first=!0}update(ie,le){const pe=Math.floor(ie);return this.first?(this.first=!1,this.lastIntegerZoom=pe,this.lastIntegerZoomTime=0,this.lastZoom=ie,this.lastFloorZoom=pe,!0):(this.lastFloorZoom>pe?(this.lastIntegerZoom=pe+1,this.lastIntegerZoomTime=le):this.lastFloorZoom<pe&&(this.lastIntegerZoom=pe,this.lastIntegerZoomTime=le),ie!==this.lastZoom&&(this.lastZoom=ie,this.lastFloorZoom=pe,!0))}}const mi={"Latin-1 Supplement":ce=>ce>=128&&ce<=255,"Hangul Jamo":ce=>ce>=4352&&ce<=4607,Khmer:ce=>ce>=6016&&ce<=6143,"General Punctuation":ce=>ce>=8192&&ce<=8303,"Letterlike Symbols":ce=>ce>=8448&&ce<=8527,"Number Forms":ce=>ce>=8528&&ce<=8591,"Miscellaneous Technical":ce=>ce>=8960&&ce<=9215,"Control Pictures":ce=>ce>=9216&&ce<=9279,"Optical Character Recognition":ce=>ce>=9280&&ce<=9311,"Enclosed Alphanumerics":ce=>ce>=9312&&ce<=9471,"Geometric Shapes":ce=>ce>=9632&&ce<=9727,"Miscellaneous Symbols":ce=>ce>=9728&&ce<=9983,"Miscellaneous Symbols and Arrows":ce=>ce>=11008&&ce<=11263,"Ideographic Description Characters":ce=>ce>=12272&&ce<=12287,"CJK Symbols and Punctuation":ce=>ce>=12288&&ce<=12351,Hiragana:ce=>ce>=12352&&ce<=12447,Katakana:ce=>ce>=12448&&ce<=12543,Kanbun:ce=>ce>=12688&&ce<=12703,"CJK Strokes":ce=>ce>=12736&&ce<=12783,"Enclosed CJK Letters and Months":ce=>ce>=12800&&ce<=13055,"CJK Compatibility":ce=>ce>=13056&&ce<=13311,"Yijing Hexagram Symbols":ce=>ce>=19904&&ce<=19967,"CJK Unified Ideographs":ce=>ce>=19968&&ce<=40959,"Hangul Syllables":ce=>ce>=44032&&ce<=55215,"Private Use Area":ce=>ce>=57344&&ce<=63743,"Vertical Forms":ce=>ce>=65040&&ce<=65055,"CJK Compatibility Forms":ce=>ce>=65072&&ce<=65103,"Small Form Variants":ce=>ce>=65104&&ce<=65135,"Halfwidth and Fullwidth Forms":ce=>ce>=65280&&ce<=65519};function wo(ce){for(const ie of ce)if(qa(ie.charCodeAt(0)))return!0;return!1}function dh(ce){for(const ie of ce)if(!fh(ie.charCodeAt(0)))return!1;return!0}function Na(ce){const ie=ce.map(le=>{try{return new RegExp(`\\p{sc=${le}}`,"u").source}catch{return null}}).filter(le=>le);return new RegExp(ie.join("|"),"u")}const ph=Na(["Arab","Dupl","Mong","Ougr","Syrc"]);function fh(ce){return!ph.test(String.fromCodePoint(ce))}const $a=Na(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function qa(ce){return!(ce!==746&&ce!==747&&(ce<4352||!(mi["CJK Compatibility Forms"](ce)&&!(ce>=65097&&ce<=65103)||mi["CJK Compatibility"](ce)||mi["CJK Strokes"](ce)||!(!mi["CJK Symbols and Punctuation"](ce)||ce>=12296&&ce<=12305||ce>=12308&&ce<=12319||ce===12336)||mi["Enclosed CJK Letters and Months"](ce)||mi["Ideographic Description Characters"](ce)||mi.Kanbun(ce)||mi.Katakana(ce)&&ce!==12540||!(!mi["Halfwidth and Fullwidth Forms"](ce)||ce===65288||ce===65289||ce===65293||ce>=65306&&ce<=65310||ce===65339||ce===65341||ce===65343||ce>=65371&&ce<=65503||ce===65507||ce>=65512&&ce<=65519)||!(!mi["Small Form Variants"](ce)||ce>=65112&&ce<=65118||ce>=65123&&ce<=65126)||mi["Vertical Forms"](ce)||mi["Yijing Hexagram Symbols"](ce)||/\p{sc=Cans}/u.test(String.fromCodePoint(ce))||/\p{sc=Hang}/u.test(String.fromCodePoint(ce))||$a.test(String.fromCodePoint(ce)))))}function mh(ce){return!(qa(ce)||function(ie){return!!(mi["Latin-1 Supplement"](ie)&&(ie===167||ie===169||ie===174||ie===177||ie===188||ie===189||ie===190||ie===215||ie===247)||mi["General Punctuation"](ie)&&(ie===8214||ie===8224||ie===8225||ie===8240||ie===8241||ie===8251||ie===8252||ie===8258||ie===8263||ie===8264||ie===8265||ie===8273)||mi["Letterlike Symbols"](ie)||mi["Number Forms"](ie)||mi["Miscellaneous Technical"](ie)&&(ie>=8960&&ie<=8967||ie>=8972&&ie<=8991||ie>=8996&&ie<=9e3||ie===9003||ie>=9085&&ie<=9114||ie>=9150&&ie<=9165||ie===9167||ie>=9169&&ie<=9179||ie>=9186&&ie<=9215)||mi["Control Pictures"](ie)&&ie!==9251||mi["Optical Character Recognition"](ie)||mi["Enclosed Alphanumerics"](ie)||mi["Geometric Shapes"](ie)||mi["Miscellaneous Symbols"](ie)&&!(ie>=9754&&ie<=9759)||mi["Miscellaneous Symbols and Arrows"](ie)&&(ie>=11026&&ie<=11055||ie>=11088&&ie<=11097||ie>=11192&&ie<=11243)||mi["CJK Symbols and Punctuation"](ie)||mi.Katakana(ie)||mi["Private Use Area"](ie)||mi["CJK Compatibility Forms"](ie)||mi["Small Form Variants"](ie)||mi["Halfwidth and Fullwidth Forms"](ie)||ie===8734||ie===8756||ie===8757||ie>=9984&&ie<=10087||ie>=10102&&ie<=10131||ie===65532||ie===65533)}(ce))}const gh=Na(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function _h(ce){return gh.test(String.fromCodePoint(ce))}function yh(ce,ie){return!(!ie&&_h(ce)||ce>=2304&&ce<=3583||ce>=3840&&ce<=4255||mi.Khmer(ce))}function lu(ce){for(const ie of ce)if(_h(ie.charCodeAt(0)))return!0;return!1}const _s=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(ce){this.pluginStatus=ce.pluginStatus,this.pluginURL=ce.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(ce){if(_s.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=ce.applyArabicShaping,this.processBidirectionalText=ce.processBidirectionalText,this.processStyledBidirectionalText=ce.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(ce,ie){return oe(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(ce.pluginStatus!=="loading")return this.setState(ce),ce;const le=ce.pluginURL,pe=new Promise(xe=>{this.loadScriptResolve=xe});ie(le);const ge=new Promise(xe=>setTimeout(()=>xe(),this.TIMEOUT));if(yield Promise.race([pe,ge]),this.isParsed()){const xe={pluginStatus:"loaded",pluginURL:le};return this.setState(xe),xe}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${le}`)})}};class Li{constructor(ie,le){this.isSupportedScript=cu,this.zoom=ie,le?(this.now=le.now||0,this.fadeDuration=le.fadeDuration||0,this.zoomHistory=le.zoomHistory||new Hl,this.transition=le.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Hl,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const ie=this.zoom,le=ie-Math.floor(ie),pe=this.crossFadingFactor();return ie>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:le+(1-le)*pe}:{fromScale:.5,toScale:1,t:1-(1-pe)*le}}}function cu(ce){return function(ie,le){for(const pe of ie)if(!yh(pe.charCodeAt(0),le))return!1;return!0}(ce,_s.getRTLTextPluginStatus()==="loaded")}class ja{constructor(ie,le,pe){this.property=ie,this.value=le,this.expression=function(ge,xe,Se){if(po(ge))return new jo(ge,xe);if(Ia(ge)){const ke=Xc(ge,xe,Se);if(ke.result==="error")throw new Error(ke.value.map(Le=>`${Le.key}: ${Le.message}`).join(", "));return ke.value}{let ke=ge;return xe.type==="color"&&typeof ge=="string"?ke=ai.parse(ge):xe.type!=="padding"||typeof ge!="number"&&!Array.isArray(ge)?xe.type!=="numberArray"||typeof ge!="number"&&!Array.isArray(ge)?xe.type!=="colorArray"||typeof ge!="string"&&!Array.isArray(ge)?xe.type==="variableAnchorOffsetCollection"&&Array.isArray(ge)?ke=wn.parse(ge):xe.type==="projectionDefinition"&&typeof ge=="string"&&(ke=On.parse(ge)):ke=on.parse(ge):ke=Mn.parse(ge):ke=dn.parse(ge),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>ke}}}(le===void 0?ie.specification.default:le,ie.specification,pe)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(ie,le,pe){return this.property.possiblyEvaluate(this,ie,le,pe)}}class Wa{constructor(ie,le){this.property=ie,this.value=new ja(ie,void 0,le)}transitioned(ie,le){return new Zl(this.property,this.value,le,Nr({},ie.transition,this.transition),ie.now)}untransitioned(){return new Zl(this.property,this.value,null,{},0)}}class Ul{constructor(ie,le){this._properties=ie,this._values=Object.create(ie.defaultTransitionablePropertyValues),this._globalState=le}getValue(ie){return Dr(this._values[ie].value.value)}setValue(ie,le){Object.prototype.hasOwnProperty.call(this._values,ie)||(this._values[ie]=new Wa(this._values[ie].property,this._globalState)),this._values[ie].value=new ja(this._values[ie].property,le===null?void 0:Dr(le),this._globalState)}getTransition(ie){return Dr(this._values[ie].transition)}setTransition(ie,le){Object.prototype.hasOwnProperty.call(this._values,ie)||(this._values[ie]=new Wa(this._values[ie].property,this._globalState)),this._values[ie].transition=Dr(le)||void 0}serialize(){const ie={};for(const le of Object.keys(this._values)){const pe=this.getValue(le);pe!==void 0&&(ie[le]=pe);const ge=this.getTransition(le);ge!==void 0&&(ie[`${le}-transition`]=ge)}return ie}transitioned(ie,le){const pe=new Xl(this._properties);for(const ge of Object.keys(this._values))pe._values[ge]=this._values[ge].transitioned(ie,le._values[ge]);return pe}untransitioned(){const ie=new Xl(this._properties);for(const le of Object.keys(this._values))ie._values[le]=this._values[le].untransitioned();return ie}}class Zl{constructor(ie,le,pe,ge,xe){this.property=ie,this.value=le,this.begin=xe+ge.delay||0,this.end=this.begin+ge.duration||0,ie.specification.transition&&(ge.delay||ge.duration)&&(this.prior=pe)}possiblyEvaluate(ie,le,pe){const ge=ie.now||0,xe=this.value.possiblyEvaluate(ie,le,pe),Se=this.prior;if(Se){if(ge>this.end)return this.prior=null,xe;if(this.value.isDataDriven())return this.prior=null,xe;if(ge<this.begin)return Se.possiblyEvaluate(ie,le,pe);{const ke=(ge-this.begin)/(this.end-this.begin);return this.property.interpolate(Se.possiblyEvaluate(ie,le,pe),xe,Xt(ke))}}return xe}}class Xl{constructor(ie){this._properties=ie,this._values=Object.create(ie.defaultTransitioningPropertyValues)}possiblyEvaluate(ie,le,pe){const ge=new So(this._properties);for(const xe of Object.keys(this._values))ge._values[xe]=this._values[xe].possiblyEvaluate(ie,le,pe);return ge}hasTransition(){for(const ie of Object.keys(this._values))if(this._values[ie].prior)return!0;return!1}}class Ga{constructor(ie,le){this._properties=ie,this._values=Object.create(ie.defaultPropertyValues),this._globalState=le}hasValue(ie){return this._values[ie].value!==void 0}getValue(ie){return Dr(this._values[ie].value)}setValue(ie,le){this._values[ie]=new ja(this._values[ie].property,le===null?void 0:Dr(le),this._globalState)}serialize(){const ie={};for(const le of Object.keys(this._values)){const pe=this.getValue(le);pe!==void 0&&(ie[le]=pe)}return ie}possiblyEvaluate(ie,le,pe){const ge=new So(this._properties);for(const xe of Object.keys(this._values))ge._values[xe]=this._values[xe].possiblyEvaluate(ie,le,pe);return ge}}class us{constructor(ie,le,pe){this.property=ie,this.value=le,this.parameters=pe}isConstant(){return this.value.kind==="constant"}constantOr(ie){return this.value.kind==="constant"?this.value.value:ie}evaluate(ie,le,pe,ge){return this.property.evaluate(this.value,this.parameters,ie,le,pe,ge)}}class So{constructor(ie){this._properties=ie,this._values=Object.create(ie.defaultPossiblyEvaluatedValues)}get(ie){return this._values[ie]}}class Vr{constructor(ie){this.specification=ie}possiblyEvaluate(ie,le){if(ie.isDataDriven())throw new Error("Value should not be data driven");return ie.expression.evaluate(le)}interpolate(ie,le,pe){const ge=Rn[this.specification.type];return ge?ge(ie,le,pe):ie}}class Ur{constructor(ie,le){this.specification=ie,this.overrides=le}possiblyEvaluate(ie,le,pe,ge){return new us(this,ie.expression.kind==="constant"||ie.expression.kind==="camera"?{kind:"constant",value:ie.expression.evaluate(le,null,{},pe,ge)}:ie.expression,le)}interpolate(ie,le,pe){if(ie.value.kind!=="constant"||le.value.kind!=="constant")return ie;if(ie.value.value===void 0||le.value.value===void 0)return new us(this,{kind:"constant",value:void 0},ie.parameters);const ge=Rn[this.specification.type];if(ge){const xe=ge(ie.value.value,le.value.value,pe);return new us(this,{kind:"constant",value:xe},ie.parameters)}return ie}evaluate(ie,le,pe,ge,xe,Se){return ie.kind==="constant"?ie.value:ie.evaluate(le,pe,ge,xe,Se)}}class To extends Ur{possiblyEvaluate(ie,le,pe,ge){if(ie.value===void 0)return new us(this,{kind:"constant",value:void 0},le);if(ie.expression.kind==="constant"){const xe=ie.expression.evaluate(le,null,{},pe,ge),Se=ie.property.specification.type==="resolvedImage"&&typeof xe!="string"?xe.name:xe,ke=this._calculate(Se,Se,Se,le);return new us(this,{kind:"constant",value:ke},le)}if(ie.expression.kind==="camera"){const xe=this._calculate(ie.expression.evaluate({zoom:le.zoom-1}),ie.expression.evaluate({zoom:le.zoom}),ie.expression.evaluate({zoom:le.zoom+1}),le);return new us(this,{kind:"constant",value:xe},le)}return new us(this,ie.expression,le)}evaluate(ie,le,pe,ge,xe,Se){if(ie.kind==="source"){const ke=ie.evaluate(le,pe,ge,xe,Se);return this._calculate(ke,ke,ke,le)}return ie.kind==="composite"?this._calculate(ie.evaluate({zoom:Math.floor(le.zoom)-1},pe,ge),ie.evaluate({zoom:Math.floor(le.zoom)},pe,ge),ie.evaluate({zoom:Math.floor(le.zoom)+1},pe,ge),le):ie.value}_calculate(ie,le,pe,ge){return ge.zoom>ge.zoomHistory.lastIntegerZoom?{from:ie,to:le}:{from:pe,to:le}}interpolate(ie){return ie}}class Yl{constructor(ie){this.specification=ie}possiblyEvaluate(ie,le,pe,ge){if(ie.value!==void 0){if(ie.expression.kind==="constant"){const xe=ie.expression.evaluate(le,null,{},pe,ge);return this._calculate(xe,xe,xe,le)}return this._calculate(ie.expression.evaluate(new Li(Math.floor(le.zoom-1),le)),ie.expression.evaluate(new Li(Math.floor(le.zoom),le)),ie.expression.evaluate(new Li(Math.floor(le.zoom+1),le)),le)}}_calculate(ie,le,pe,ge){return ge.zoom>ge.zoomHistory.lastIntegerZoom?{from:ie,to:le}:{from:pe,to:le}}interpolate(ie){return ie}}class Uo{constructor(ie){this.specification=ie}possiblyEvaluate(ie,le,pe,ge){return!!ie.expression.evaluate(le,null,{},pe,ge)}interpolate(){return!1}}class Fn{constructor(ie){this.properties=ie,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const le in ie){const pe=ie[le];pe.specification.overridable&&this.overridableProperties.push(le);const ge=this.defaultPropertyValues[le]=new ja(pe,void 0,void 0),xe=this.defaultTransitionablePropertyValues[le]=new Wa(pe,void 0);this.defaultTransitioningPropertyValues[le]=xe.untransitioned(),this.defaultPossiblyEvaluatedValues[le]=ge.possiblyEvaluate({})}}}Rr("DataDrivenProperty",Ur),Rr("DataConstantProperty",Vr),Rr("CrossFadedDataDrivenProperty",To),Rr("CrossFadedProperty",Yl),Rr("ColorRampProperty",Uo);const vh="-transition";class es extends Ir{constructor(ie,le,pe){if(super(),this.id=ie.id,this.type=ie.type,this._globalState=pe,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},ie.type!=="custom"&&(this.metadata=ie.metadata,this.minzoom=ie.minzoom,this.maxzoom=ie.maxzoom,ie.type!=="background"&&(this.source=ie.source,this.sourceLayer=ie["source-layer"],this.filter=ie.filter,this._featureFilter=mo(ie.filter,pe)),le.layout&&(this._unevaluatedLayout=new Ga(le.layout,pe)),le.paint)){this._transitionablePaint=new Ul(le.paint,pe);for(const ge in ie.paint)this.setPaintProperty(ge,ie.paint[ge],{validate:!1});for(const ge in ie.layout)this.setLayoutProperty(ge,ie.layout[ge],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new So(le.paint)}}setFilter(ie){this.filter=ie,this._featureFilter=mo(ie,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(ie){return ie==="visibility"?this.visibility:this._unevaluatedLayout.getValue(ie)}getLayoutAffectingGlobalStateRefs(){const ie=new Set;if(this._unevaluatedLayout)for(const le in this._unevaluatedLayout._values){const pe=this._unevaluatedLayout._values[le];for(const ge of pe.getGlobalStateRefs())ie.add(ge)}for(const le of this._featureFilter.getGlobalStateRefs())ie.add(le);return ie}getPaintAffectingGlobalStateRefs(){var ie;const le=new globalThis.Map;if(this._transitionablePaint)for(const pe in this._transitionablePaint._values){const ge=this._transitionablePaint._values[pe].value;for(const xe of ge.getGlobalStateRefs()){const Se=(ie=le.get(xe))!==null&&ie!==void 0?ie:[];Se.push({name:pe,value:ge.value}),le.set(xe,Se)}}return le}setLayoutProperty(ie,le,pe={}){le!=null&&this._validate(Gl,`layers.${this.id}.layout.${ie}`,ie,le,pe)||(ie!=="visibility"?this._unevaluatedLayout.setValue(ie,le):this.visibility=le)}getPaintProperty(ie){return ie.endsWith(vh)?this._transitionablePaint.getTransition(ie.slice(0,-11)):this._transitionablePaint.getValue(ie)}setPaintProperty(ie,le,pe={}){if(le!=null&&this._validate(au,`layers.${this.id}.paint.${ie}`,ie,le,pe))return!1;if(ie.endsWith(vh))return this._transitionablePaint.setTransition(ie.slice(0,-11),le||void 0),!1;{const ge=this._transitionablePaint._values[ie],xe=ge.property.specification["property-type"]==="cross-faded-data-driven",Se=ge.value.isDataDriven(),ke=ge.value;this._transitionablePaint.setValue(ie,le),this._handleSpecialPaintPropertyUpdate(ie);const Le=this._transitionablePaint._values[ie].value;return Le.isDataDriven()||Se||xe||this._handleOverridablePaintPropertyUpdate(ie,ke,Le)}}_handleSpecialPaintPropertyUpdate(ie){}_handleOverridablePaintPropertyUpdate(ie,le,pe){return!1}isHidden(ie,le=!1){return!!(this.minzoom&&ie<(le?Math.floor(this.minzoom):this.minzoom))||!!(this.maxzoom&&ie>=this.maxzoom)||this.visibility==="none"}updateTransitions(ie){this._transitioningPaint=this._transitionablePaint.transitioned(ie,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(ie,le){ie.getCrossfadeParameters&&(this._crossfadeParameters=ie.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(ie,void 0,le)),this.paint=this._transitioningPaint.possiblyEvaluate(ie,void 0,le)}serialize(){const ie={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(ie.layout=ie.layout||{},ie.layout.visibility=this.visibility),Zr(ie,(le,pe)=>!(le===void 0||pe==="layout"&&!Object.keys(le).length||pe==="paint"&&!Object.keys(le).length))}_validate(ie,le,pe,ge,xe={}){return(!xe||xe.validate!==!1)&&ch(this,ie.call(hs,{key:le,layerType:this.type,objectKey:pe,value:ge,styleSpec:Ot,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const ie in this.paint._values){const le=this.paint.get(ie);if(le instanceof us&&uo(le.property.specification)&&(le.value.kind==="source"||le.value.kind==="composite")&&le.value.isStateDependent)return!0}return!1}}let bh;var hu={get paint(){return bh=bh||new Fn({"raster-opacity":new Vr(Ot.paint_raster["raster-opacity"]),"raster-hue-rotate":new Vr(Ot.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Vr(Ot.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Vr(Ot.paint_raster["raster-brightness-max"]),"raster-saturation":new Vr(Ot.paint_raster["raster-saturation"]),"raster-contrast":new Vr(Ot.paint_raster["raster-contrast"]),"raster-resampling":new Vr(Ot.paint_raster["raster-resampling"]),"raster-fade-duration":new Vr(Ot.paint_raster["raster-fade-duration"])})}};class Co extends es{constructor(ie,le){super(ie,hu,le)}}const uu={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Zo{constructor(ie,le){this._structArray=ie,this._pos1=le*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Hi{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(ie,le){return ie._trim(),le&&(ie.isTransferred=!0,le.push(ie.arrayBuffer)),{length:ie.length,arrayBuffer:ie.arrayBuffer}}static deserialize(ie){const le=Object.create(this.prototype);return le.arrayBuffer=ie.arrayBuffer,le.length=ie.length,le.capacity=ie.arrayBuffer.byteLength/le.bytesPerElement,le._refreshViews(),le}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(ie){this.reserve(ie),this.length=ie}reserve(ie){if(ie>this.capacity){this.capacity=Math.max(ie,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const le=this.uint8;this._refreshViews(),le&&this.uint8.set(le)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Ki(ce,ie=1){let le=0,pe=0;return{members:ce.map(ge=>{const xe=uu[ge.type].BYTES_PER_ELEMENT,Se=le=xh(le,Math.max(ie,xe)),ke=ge.components||1;return pe=Math.max(pe,xe),le+=xe*ke,{name:ge.name,type:ge.type,components:ke,offset:Se}}),size:xh(le,Math.max(pe,ie)),alignment:ie}}function xh(ce,ie){return Math.ceil(ce/ie)*ie}class Xo extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(ie,le){const pe=this.length;return this.resize(pe+1),this.emplace(pe,ie,le)}emplace(ie,le,pe){const ge=2*ie;return this.int16[ge+0]=le,this.int16[ge+1]=pe,ie}}Xo.prototype.bytesPerElement=4,Rr("StructArrayLayout2i4",Xo);class ds extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(ie,le,pe){const ge=this.length;return this.resize(ge+1),this.emplace(ge,ie,le,pe)}emplace(ie,le,pe,ge){const xe=3*ie;return this.int16[xe+0]=le,this.int16[xe+1]=pe,this.int16[xe+2]=ge,ie}}ds.prototype.bytesPerElement=6,Rr("StructArrayLayout3i6",ds);class Ha extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(ie,le,pe,ge){const xe=this.length;return this.resize(xe+1),this.emplace(xe,ie,le,pe,ge)}emplace(ie,le,pe,ge,xe){const Se=4*ie;return this.int16[Se+0]=le,this.int16[Se+1]=pe,this.int16[Se+2]=ge,this.int16[Se+3]=xe,ie}}Ha.prototype.bytesPerElement=8,Rr("StructArrayLayout4i8",Ha);class Yo extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(ie,le,pe,ge,xe,Se){const ke=this.length;return this.resize(ke+1),this.emplace(ke,ie,le,pe,ge,xe,Se)}emplace(ie,le,pe,ge,xe,Se,ke){const Le=6*ie;return this.int16[Le+0]=le,this.int16[Le+1]=pe,this.int16[Le+2]=ge,this.int16[Le+3]=xe,this.int16[Le+4]=Se,this.int16[Le+5]=ke,ie}}Yo.prototype.bytesPerElement=12,Rr("StructArrayLayout2i4i12",Yo);class Ua extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(ie,le,pe,ge,xe,Se){const ke=this.length;return this.resize(ke+1),this.emplace(ke,ie,le,pe,ge,xe,Se)}emplace(ie,le,pe,ge,xe,Se,ke){const Le=4*ie,Ve=8*ie;return this.int16[Le+0]=le,this.int16[Le+1]=pe,this.uint8[Ve+4]=ge,this.uint8[Ve+5]=xe,this.uint8[Ve+6]=Se,this.uint8[Ve+7]=ke,ie}}Ua.prototype.bytesPerElement=8,Rr("StructArrayLayout2i4ub8",Ua);class Hs extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(ie,le){const pe=this.length;return this.resize(pe+1),this.emplace(pe,ie,le)}emplace(ie,le,pe){const ge=2*ie;return this.float32[ge+0]=le,this.float32[ge+1]=pe,ie}}Hs.prototype.bytesPerElement=8,Rr("StructArrayLayout2f8",Hs);class Kl extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(ie,le,pe,ge,xe,Se,ke,Le,Ve,Ne){const He=this.length;return this.resize(He+1),this.emplace(He,ie,le,pe,ge,xe,Se,ke,Le,Ve,Ne)}emplace(ie,le,pe,ge,xe,Se,ke,Le,Ve,Ne,He){const et=10*ie;return this.uint16[et+0]=le,this.uint16[et+1]=pe,this.uint16[et+2]=ge,this.uint16[et+3]=xe,this.uint16[et+4]=Se,this.uint16[et+5]=ke,this.uint16[et+6]=Le,this.uint16[et+7]=Ve,this.uint16[et+8]=Ne,this.uint16[et+9]=He,ie}}Kl.prototype.bytesPerElement=20,Rr("StructArrayLayout10ui20",Kl);class Po extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(ie,le,pe,ge,xe,Se,ke,Le){const Ve=this.length;return this.resize(Ve+1),this.emplace(Ve,ie,le,pe,ge,xe,Se,ke,Le)}emplace(ie,le,pe,ge,xe,Se,ke,Le,Ve){const Ne=8*ie;return this.uint16[Ne+0]=le,this.uint16[Ne+1]=pe,this.uint16[Ne+2]=ge,this.uint16[Ne+3]=xe,this.uint16[Ne+4]=Se,this.uint16[Ne+5]=ke,this.uint16[Ne+6]=Le,this.uint16[Ne+7]=Ve,ie}}Po.prototype.bytesPerElement=16,Rr("StructArrayLayout8ui16",Po);class Us extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(ie,le,pe,ge,xe,Se,ke,Le,Ve,Ne,He,et){const nt=this.length;return this.resize(nt+1),this.emplace(nt,ie,le,pe,ge,xe,Se,ke,Le,Ve,Ne,He,et)}emplace(ie,le,pe,ge,xe,Se,ke,Le,Ve,Ne,He,et,nt){const ot=12*ie;return this.int16[ot+0]=le,this.int16[ot+1]=pe,this.int16[ot+2]=ge,this.int16[ot+3]=xe,this.uint16[ot+4]=Se,this.uint16[ot+5]=ke,this.uint16[ot+6]=Le,this.uint16[ot+7]=Ve,this.int16[ot+8]=Ne,this.int16[ot+9]=He,this.int16[ot+10]=et,this.int16[ot+11]=nt,ie}}Us.prototype.bytesPerElement=24,Rr("StructArrayLayout4i4ui4i24",Us);class Jl extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(ie,le,pe){const ge=this.length;return this.resize(ge+1),this.emplace(ge,ie,le,pe)}emplace(ie,le,pe,ge){const xe=3*ie;return this.float32[xe+0]=le,this.float32[xe+1]=pe,this.float32[xe+2]=ge,ie}}Jl.prototype.bytesPerElement=12,Rr("StructArrayLayout3f12",Jl);class Za extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(ie){const le=this.length;return this.resize(le+1),this.emplace(le,ie)}emplace(ie,le){return this.uint32[1*ie+0]=le,ie}}Za.prototype.bytesPerElement=4,Rr("StructArrayLayout1ul4",Za);class Zs extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(ie,le,pe,ge,xe,Se,ke,Le,Ve){const Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,ie,le,pe,ge,xe,Se,ke,Le,Ve)}emplace(ie,le,pe,ge,xe,Se,ke,Le,Ve,Ne){const He=10*ie,et=5*ie;return this.int16[He+0]=le,this.int16[He+1]=pe,this.int16[He+2]=ge,this.int16[He+3]=xe,this.int16[He+4]=Se,this.int16[He+5]=ke,this.uint32[et+3]=Le,this.uint16[He+8]=Ve,this.uint16[He+9]=Ne,ie}}Zs.prototype.bytesPerElement=20,Rr("StructArrayLayout6i1ul2ui20",Zs);class Ql extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(ie,le,pe,ge,xe,Se){const ke=this.length;return this.resize(ke+1),this.emplace(ke,ie,le,pe,ge,xe,Se)}emplace(ie,le,pe,ge,xe,Se,ke){const Le=6*ie;return this.int16[Le+0]=le,this.int16[Le+1]=pe,this.int16[Le+2]=ge,this.int16[Le+3]=xe,this.int16[Le+4]=Se,this.int16[Le+5]=ke,ie}}Ql.prototype.bytesPerElement=12,Rr("StructArrayLayout2i2i2i12",Ql);class ec extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(ie,le,pe,ge,xe){const Se=this.length;return this.resize(Se+1),this.emplace(Se,ie,le,pe,ge,xe)}emplace(ie,le,pe,ge,xe,Se){const ke=4*ie,Le=8*ie;return this.float32[ke+0]=le,this.float32[ke+1]=pe,this.float32[ke+2]=ge,this.int16[Le+6]=xe,this.int16[Le+7]=Se,ie}}ec.prototype.bytesPerElement=16,Rr("StructArrayLayout2f1f2i16",ec);class Xa extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(ie,le,pe,ge,xe,Se){const ke=this.length;return this.resize(ke+1),this.emplace(ke,ie,le,pe,ge,xe,Se)}emplace(ie,le,pe,ge,xe,Se,ke){const Le=16*ie,Ve=4*ie,Ne=8*ie;return this.uint8[Le+0]=le,this.uint8[Le+1]=pe,this.float32[Ve+1]=ge,this.float32[Ve+2]=xe,this.int16[Ne+6]=Se,this.int16[Ne+7]=ke,ie}}Xa.prototype.bytesPerElement=16,Rr("StructArrayLayout2ub2f2i16",Xa);class Ya extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(ie,le,pe){const ge=this.length;return this.resize(ge+1),this.emplace(ge,ie,le,pe)}emplace(ie,le,pe,ge){const xe=3*ie;return this.uint16[xe+0]=le,this.uint16[xe+1]=pe,this.uint16[xe+2]=ge,ie}}Ya.prototype.bytesPerElement=6,Rr("StructArrayLayout3ui6",Ya);class be extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(ie,le,pe,ge,xe,Se,ke,Le,Ve,Ne,He,et,nt,ot,ut,gt,St){const $t=this.length;return this.resize($t+1),this.emplace($t,ie,le,pe,ge,xe,Se,ke,Le,Ve,Ne,He,et,nt,ot,ut,gt,St)}emplace(ie,le,pe,ge,xe,Se,ke,Le,Ve,Ne,He,et,nt,ot,ut,gt,St,$t){const Et=24*ie,zt=12*ie,Ht=48*ie;return this.int16[Et+0]=le,this.int16[Et+1]=pe,this.uint16[Et+2]=ge,this.uint16[Et+3]=xe,this.uint32[zt+2]=Se,this.uint32[zt+3]=ke,this.uint32[zt+4]=Le,this.uint16[Et+10]=Ve,this.uint16[Et+11]=Ne,this.uint16[Et+12]=He,this.float32[zt+7]=et,this.float32[zt+8]=nt,this.uint8[Ht+36]=ot,this.uint8[Ht+37]=ut,this.uint8[Ht+38]=gt,this.uint32[zt+10]=St,this.int16[Et+22]=$t,ie}}be.prototype.bytesPerElement=48,Rr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",be);class re extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(ie,le,pe,ge,xe,Se,ke,Le,Ve,Ne,He,et,nt,ot,ut,gt,St,$t,Et,zt,Ht,rr,vr,Ar,Sr,Pr,jr,Tr){const Er=this.length;return this.resize(Er+1),this.emplace(Er,ie,le,pe,ge,xe,Se,ke,Le,Ve,Ne,He,et,nt,ot,ut,gt,St,$t,Et,zt,Ht,rr,vr,Ar,Sr,Pr,jr,Tr)}emplace(ie,le,pe,ge,xe,Se,ke,Le,Ve,Ne,He,et,nt,ot,ut,gt,St,$t,Et,zt,Ht,rr,vr,Ar,Sr,Pr,jr,Tr,Er){const pr=32*ie,Kr=16*ie;return this.int16[pr+0]=le,this.int16[pr+1]=pe,this.int16[pr+2]=ge,this.int16[pr+3]=xe,this.int16[pr+4]=Se,this.int16[pr+5]=ke,this.int16[pr+6]=Le,this.int16[pr+7]=Ve,this.uint16[pr+8]=Ne,this.uint16[pr+9]=He,this.uint16[pr+10]=et,this.uint16[pr+11]=nt,this.uint16[pr+12]=ot,this.uint16[pr+13]=ut,this.uint16[pr+14]=gt,this.uint16[pr+15]=St,this.uint16[pr+16]=$t,this.uint16[pr+17]=Et,this.uint16[pr+18]=zt,this.uint16[pr+19]=Ht,this.uint16[pr+20]=rr,this.uint16[pr+21]=vr,this.uint16[pr+22]=Ar,this.uint32[Kr+12]=Sr,this.float32[Kr+13]=Pr,this.float32[Kr+14]=jr,this.uint16[pr+30]=Tr,this.uint16[pr+31]=Er,ie}}re.prototype.bytesPerElement=64,Rr("StructArrayLayout8i15ui1ul2f2ui64",re);class he extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(ie){const le=this.length;return this.resize(le+1),this.emplace(le,ie)}emplace(ie,le){return this.float32[1*ie+0]=le,ie}}he.prototype.bytesPerElement=4,Rr("StructArrayLayout1f4",he);class fe extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(ie,le,pe){const ge=this.length;return this.resize(ge+1),this.emplace(ge,ie,le,pe)}emplace(ie,le,pe,ge){const xe=3*ie;return this.uint16[6*ie+0]=le,this.float32[xe+1]=pe,this.float32[xe+2]=ge,ie}}fe.prototype.bytesPerElement=12,Rr("StructArrayLayout1ui2f12",fe);class _e extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(ie,le,pe){const ge=this.length;return this.resize(ge+1),this.emplace(ge,ie,le,pe)}emplace(ie,le,pe,ge){const xe=4*ie;return this.uint32[2*ie+0]=le,this.uint16[xe+2]=pe,this.uint16[xe+3]=ge,ie}}_e.prototype.bytesPerElement=8,Rr("StructArrayLayout1ul2ui8",_e);class we extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(ie,le){const pe=this.length;return this.resize(pe+1),this.emplace(pe,ie,le)}emplace(ie,le,pe){const ge=2*ie;return this.uint16[ge+0]=le,this.uint16[ge+1]=pe,ie}}we.prototype.bytesPerElement=4,Rr("StructArrayLayout2ui4",we);class Me extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(ie){const le=this.length;return this.resize(le+1),this.emplace(le,ie)}emplace(ie,le){return this.uint16[1*ie+0]=le,ie}}Me.prototype.bytesPerElement=2,Rr("StructArrayLayout1ui2",Me);class Fe extends Hi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(ie,le,pe,ge){const xe=this.length;return this.resize(xe+1),this.emplace(xe,ie,le,pe,ge)}emplace(ie,le,pe,ge,xe){const Se=4*ie;return this.float32[Se+0]=le,this.float32[Se+1]=pe,this.float32[Se+2]=ge,this.float32[Se+3]=xe,ie}}Fe.prototype.bytesPerElement=16,Rr("StructArrayLayout4f16",Fe);class Be extends Zo{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new me(this.anchorPointX,this.anchorPointY)}}Be.prototype.size=20;class $e extends Zs{get(ie){return new Be(this,ie)}}Rr("CollisionBoxArray",$e);class We extends Zo{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(ie){this._structArray.uint8[this._pos1+37]=ie}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(ie){this._structArray.uint8[this._pos1+38]=ie}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(ie){this._structArray.uint32[this._pos4+10]=ie}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}We.prototype.size=48;class Je extends be{get(ie){return new We(this,ie)}}Rr("PlacedSymbolArray",Je);class Xe extends Zo{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(ie){this._structArray.uint32[this._pos4+12]=ie}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Xe.prototype.size=64;class st extends re{get(ie){return new Xe(this,ie)}}Rr("SymbolInstanceArray",st);class ht extends he{getoffsetX(ie){return this.float32[1*ie+0]}}Rr("GlyphOffsetArray",ht);class vt extends ds{getx(ie){return this.int16[3*ie+0]}gety(ie){return this.int16[3*ie+1]}gettileUnitDistanceFromAnchor(ie){return this.int16[3*ie+2]}}Rr("SymbolLineVertexArray",vt);class bt extends Zo{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}bt.prototype.size=12;class xt extends fe{get(ie){return new bt(this,ie)}}Rr("TextAnchorOffsetArray",xt);class Ct extends Zo{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ct.prototype.size=8;class kt extends _e{get(ie){return new Ct(this,ie)}}Rr("FeatureIndexArray",kt);class Tt extends Xo{}class Lt extends Xo{}class Rt extends Xo{}class Pt extends Yo{}class Nt extends Ua{}class Yt extends Hs{}class Wt extends Kl{}class Ut extends Po{}class Kt extends Us{}class br extends Jl{}class xr extends Za{}class _r extends Ql{}class Br extends Xa{}class ti extends Ya{}class Ti extends we{}const Oi=Ki([{name:"a_pos",components:2,type:"Int16"}],4),{members:Fi}=Oi;class di{constructor(ie=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=ie}prepareSegment(ie,le,pe,ge){const xe=this.segments[this.segments.length-1];return ie>di.MAX_VERTEX_ARRAY_LENGTH&&fr(`Max vertices per segment is ${di.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${ie}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${di.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!xe||xe.vertexLength+ie>di.MAX_VERTEX_ARRAY_LENGTH||xe.sortKey!==ge?this.createNewSegment(le,pe,ge):xe}createNewSegment(ie,le,pe){const ge={vertexOffset:ie.length,primitiveOffset:le.length,vertexLength:0,primitiveLength:0,vaos:{}};return pe!==void 0&&(ge.sortKey=pe),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(ge),ge}getOrCreateLatestSegment(ie,le,pe){return this.prepareSegment(0,ie,le,pe)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const ie of this.segments)for(const le in ie.vaos)ie.vaos[le].destroy()}static simpleSegment(ie,le,pe,ge){return new di([{vertexOffset:ie,primitiveOffset:le,vertexLength:pe,primitiveLength:ge,vaos:{},sortKey:0}])}}function zi(ce,ie){return 256*(ce=yr(Math.floor(ce),0,255))+yr(Math.floor(ie),0,255)}di.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Rr("SegmentVector",di);const cn=Ki([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Ui=Ki([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var pn,Qi,tn,fn={exports:{}},Ms={exports:{}},As={exports:{}},Xs=function(){if(tn)return fn.exports;tn=1;var ce=(pn||(pn=1,Ms.exports=function(le,pe){var ge,xe,Se,ke,Le,Ve,Ne,He;for(xe=le.length-(ge=3&le.length),Se=pe,Le=3432918353,Ve=461845907,He=0;He<xe;)Ne=255&le.charCodeAt(He)|(255&le.charCodeAt(++He))<<8|(255&le.charCodeAt(++He))<<16|(255&le.charCodeAt(++He))<<24,++He,Se=27492+(65535&(ke=5*(65535&(Se=(Se^=Ne=(65535&(Ne=(Ne=(65535&Ne)*Le+(((Ne>>>16)*Le&65535)<<16)&4294967295)<<15|Ne>>>17))*Ve+(((Ne>>>16)*Ve&65535)<<16)&4294967295)<<13|Se>>>19))+((5*(Se>>>16)&65535)<<16)&4294967295))+((58964+(ke>>>16)&65535)<<16);switch(Ne=0,ge){case 3:Ne^=(255&le.charCodeAt(He+2))<<16;case 2:Ne^=(255&le.charCodeAt(He+1))<<8;case 1:Se^=Ne=(65535&(Ne=(Ne=(65535&(Ne^=255&le.charCodeAt(He)))*Le+(((Ne>>>16)*Le&65535)<<16)&4294967295)<<15|Ne>>>17))*Ve+(((Ne>>>16)*Ve&65535)<<16)&4294967295}return Se^=le.length,Se=2246822507*(65535&(Se^=Se>>>16))+((2246822507*(Se>>>16)&65535)<<16)&4294967295,Se=3266489909*(65535&(Se^=Se>>>13))+((3266489909*(Se>>>16)&65535)<<16)&4294967295,(Se^=Se>>>16)>>>0}),Ms.exports),ie=(Qi||(Qi=1,As.exports=function(le,pe){for(var ge,xe=le.length,Se=pe^xe,ke=0;xe>=4;)ge=1540483477*(65535&(ge=255&le.charCodeAt(ke)|(255&le.charCodeAt(++ke))<<8|(255&le.charCodeAt(++ke))<<16|(255&le.charCodeAt(++ke))<<24))+((1540483477*(ge>>>16)&65535)<<16),Se=1540483477*(65535&Se)+((1540483477*(Se>>>16)&65535)<<16)^(ge=1540483477*(65535&(ge^=ge>>>24))+((1540483477*(ge>>>16)&65535)<<16)),xe-=4,++ke;switch(xe){case 3:Se^=(255&le.charCodeAt(ke+2))<<16;case 2:Se^=(255&le.charCodeAt(ke+1))<<8;case 1:Se=1540483477*(65535&(Se^=255&le.charCodeAt(ke)))+((1540483477*(Se>>>16)&65535)<<16)}return Se=1540483477*(65535&(Se^=Se>>>13))+((1540483477*(Se>>>16)&65535)<<16),(Se^=Se>>>15)>>>0}),As.exports);return fn.exports=ce,fn.exports.murmur3=ce,fn.exports.murmur2=ie,fn.exports}(),ks=ve(Xs);class Ys{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(ie,le,pe,ge){this.ids.push(Ko(ie)),this.positions.push(le,pe,ge)}getPositions(ie){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const le=Ko(ie);let pe=0,ge=this.ids.length-1;for(;pe<ge;){const Se=pe+ge>>1;this.ids[Se]>=le?ge=Se:pe=Se+1}const xe=[];for(;this.ids[pe]===le;)xe.push({index:this.positions[3*pe],start:this.positions[3*pe+1],end:this.positions[3*pe+2]}),pe++;return xe}static serialize(ie,le){const pe=new Float64Array(ie.ids),ge=new Uint32Array(ie.positions);return Is(pe,ge,0,pe.length-1),le&&le.push(pe.buffer,ge.buffer),{ids:pe,positions:ge}}static deserialize(ie){const le=new Ys;return le.ids=ie.ids,le.positions=ie.positions,le.indexed=!0,le}}function Ko(ce){const ie=+ce;return!isNaN(ie)&&ie<=Number.MAX_SAFE_INTEGER?ie:ks(String(ce))}function Is(ce,ie,le,pe){for(;le<pe;){const ge=ce[le+pe>>1];let xe=le-1,Se=pe+1;for(;;){do xe++;while(ce[xe]<ge);do Se--;while(ce[Se]>ge);if(xe>=Se)break;Dn(ce,xe,Se),Dn(ie,3*xe,3*Se),Dn(ie,3*xe+1,3*Se+1),Dn(ie,3*xe+2,3*Se+2)}Se-le<pe-Se?(Is(ce,ie,le,Se),le=Se+1):(Is(ce,ie,Se+1,pe),pe=Se)}}function Dn(ce,ie,le){const pe=ce[ie];ce[ie]=ce[le],ce[le]=pe}Rr("FeaturePositionMap",Ys);class kn{constructor(ie,le){this.gl=ie.gl,this.location=le}}class ps extends kn{constructor(ie,le){super(ie,le),this.current=0}set(ie){this.current!==ie&&(this.current=ie,this.gl.uniform1f(this.location,ie))}}class Eo extends kn{constructor(ie,le){super(ie,le),this.current=[0,0,0,0]}set(ie){ie[0]===this.current[0]&&ie[1]===this.current[1]&&ie[2]===this.current[2]&&ie[3]===this.current[3]||(this.current=ie,this.gl.uniform4f(this.location,ie[0],ie[1],ie[2],ie[3]))}}class nn extends kn{constructor(ie,le){super(ie,le),this.current=ai.transparent}set(ie){ie.r===this.current.r&&ie.g===this.current.g&&ie.b===this.current.b&&ie.a===this.current.a||(this.current=ie,this.gl.uniform4f(this.location,ie.r,ie.g,ie.b,ie.a))}}const mn=new Float32Array(16);function Nn(ce){return[zi(255*ce.r,255*ce.g),zi(255*ce.b,255*ce.a)]}class en{constructor(ie,le,pe){this.value=ie,this.uniformNames=le.map(ge=>`u_${ge}`),this.type=pe}setUniform(ie,le,pe){ie.set(pe.constantOr(this.value))}getBinding(ie,le,pe){return this.type==="color"?new nn(ie,le):new ps(ie,le)}}class Ks{constructor(ie,le){this.uniformNames=le.map(pe=>`u_${pe}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(ie,le){this.pixelRatioFrom=le.pixelRatio,this.pixelRatioTo=ie.pixelRatio,this.patternFrom=le.tlbr,this.patternTo=ie.tlbr}setConstantDashPositions(ie,le){this.dashTo=[0,ie.y,ie.height,ie.width],this.dashFrom=[0,le.y,le.height,le.width]}setUniform(ie,le,pe,ge){let xe=null;ge==="u_pattern_to"?xe=this.patternTo:ge==="u_pattern_from"?xe=this.patternFrom:ge==="u_dasharray_to"?xe=this.dashTo:ge==="u_dasharray_from"?xe=this.dashFrom:ge==="u_pixel_ratio_to"?xe=this.pixelRatioTo:ge==="u_pixel_ratio_from"&&(xe=this.pixelRatioFrom),xe!==null&&ie.set(xe)}getBinding(ie,le,pe){return pe.substr(0,9)==="u_pattern"||pe.substr(0,12)==="u_dasharray_"?new Eo(ie,le):new ps(ie,le)}}class ys{constructor(ie,le,pe,ge){this.expression=ie,this.type=pe,this.maxValue=0,this.paintVertexAttributes=le.map(xe=>({name:`a_${xe}`,type:"Float32",components:pe==="color"?2:1,offset:0})),this.paintVertexArray=new ge}populatePaintArray(ie,le,pe){const ge=this.paintVertexArray.length,xe=this.expression.evaluate(new Li(0,pe),le,{},pe.canonical,[],pe.formattedSection);this.paintVertexArray.resize(ie),this._setPaintValue(ge,ie,xe)}updatePaintArray(ie,le,pe,ge,xe){const Se=this.expression.evaluate(new Li(0,xe),pe,ge);this._setPaintValue(ie,le,Se)}_setPaintValue(ie,le,pe){if(this.type==="color"){const ge=Nn(pe);for(let xe=ie;xe<le;xe++)this.paintVertexArray.emplace(xe,ge[0],ge[1])}else{for(let ge=ie;ge<le;ge++)this.paintVertexArray.emplace(ge,pe);this.maxValue=Math.max(this.maxValue,Math.abs(pe))}}upload(ie){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=ie.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ts{constructor(ie,le,pe,ge,xe,Se){this.expression=ie,this.uniformNames=le.map(ke=>`u_${ke}_t`),this.type=pe,this.useIntegerZoom=ge,this.zoom=xe,this.maxValue=0,this.paintVertexAttributes=le.map(ke=>({name:`a_${ke}`,type:"Float32",components:pe==="color"?4:2,offset:0})),this.paintVertexArray=new Se}populatePaintArray(ie,le,pe){const ge=this.expression.evaluate(new Li(this.zoom,pe),le,{},pe.canonical,[],pe.formattedSection),xe=this.expression.evaluate(new Li(this.zoom+1,pe),le,{},pe.canonical,[],pe.formattedSection),Se=this.paintVertexArray.length;this.paintVertexArray.resize(ie),this._setPaintValue(Se,ie,ge,xe)}updatePaintArray(ie,le,pe,ge,xe){const Se=this.expression.evaluate(new Li(this.zoom,xe),pe,ge),ke=this.expression.evaluate(new Li(this.zoom+1,xe),pe,ge);this._setPaintValue(ie,le,Se,ke)}_setPaintValue(ie,le,pe,ge){if(this.type==="color"){const xe=Nn(pe),Se=Nn(ge);for(let ke=ie;ke<le;ke++)this.paintVertexArray.emplace(ke,xe[0],xe[1],Se[0],Se[1])}else{for(let xe=ie;xe<le;xe++)this.paintVertexArray.emplace(xe,pe,ge);this.maxValue=Math.max(this.maxValue,Math.abs(pe),Math.abs(ge))}}upload(ie){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=ie.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(ie,le){const pe=this.useIntegerZoom?Math.floor(le.zoom):le.zoom,ge=yr(this.expression.interpolationFactor(pe,this.zoom,this.zoom+1),0,1);ie.set(ge)}getBinding(ie,le,pe){return new ps(ie,le)}}class Ls{constructor(ie,le,pe,ge,xe,Se){this.expression=ie,this.type=le,this.useIntegerZoom=pe,this.zoom=ge,this.layerId=Se,this.zoomInPaintVertexArray=new xe,this.zoomOutPaintVertexArray=new xe}populatePaintArray(ie,le,pe){const ge=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(ie),this.zoomOutPaintVertexArray.resize(ie),this._setPaintValues(ge,ie,this.getPositionIds(le),pe)}updatePaintArray(ie,le,pe,ge,xe){this._setPaintValues(ie,le,this.getPositionIds(pe),xe)}_setPaintValues(ie,le,pe,ge){const xe=this.getPositions(ge);if(!xe||!pe)return;const Se=xe[pe.min],ke=xe[pe.mid],Le=xe[pe.max];if(Se&&ke&&Le)for(let Ve=ie;Ve<le;Ve++)this.emplace(this.zoomInPaintVertexArray,Ve,ke,Se),this.emplace(this.zoomOutPaintVertexArray,Ve,ke,Le)}upload(ie){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const le=this.getVertexAttributes();this.zoomInPaintVertexBuffer=ie.createVertexBuffer(this.zoomInPaintVertexArray,le,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=ie.createVertexBuffer(this.zoomOutPaintVertexArray,le,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class wh extends Ls{getPositions(ie){return ie.imagePositions}getPositionIds(ie){return ie.patterns&&ie.patterns[this.layerId]}getVertexAttributes(){return cn.members}emplace(ie,le,pe,ge){ie.emplace(le,pe.tlbr[0],pe.tlbr[1],pe.tlbr[2],pe.tlbr[3],ge.tlbr[0],ge.tlbr[1],ge.tlbr[2],ge.tlbr[3],pe.pixelRatio,ge.pixelRatio)}}class Sh extends Ls{getPositions(ie){return ie.dashPositions}getPositionIds(ie){return ie.dashes&&ie.dashes[this.layerId]}getVertexAttributes(){return Ui.members}emplace(ie,le,pe,ge){ie.emplace(le,0,pe.y,pe.height,pe.width,0,ge.y,ge.height,ge.width)}}class zs{constructor(ie,le,pe){this.binders={},this._buffers=[];const ge=[];for(const xe in ie.paint._values){if(!pe(xe))continue;const Se=ie.paint.get(xe);if(!(Se instanceof us&&uo(Se.property.specification)))continue;const ke=Th(xe,ie.type),Le=Se.value,Ve=Se.property.specification.type,Ne=Se.property.useIntegerZoom,He=Se.property.specification["property-type"],et=He==="cross-faded"||He==="cross-faded-data-driven";if(Le.kind==="constant")this.binders[xe]=et?new Ks(Le.value,ke):new en(Le.value,ke,Ve),ge.push(`/u_${xe}`);else if(Le.kind==="source"||et){const nt=tc(xe,Ve,"source");this.binders[xe]=et?xe==="line-dasharray"?new Sh(Le,Ve,Ne,le,nt,ie.id):new wh(Le,Ve,Ne,le,nt,ie.id):new ys(Le,ke,Ve,nt),ge.push(`/a_${xe}`)}else{const nt=tc(xe,Ve,"composite");this.binders[xe]=new ts(Le,ke,Ve,Ne,le,nt),ge.push(`/z_${xe}`)}}this.cacheKey=ge.sort().join("")}getMaxValue(ie){const le=this.binders[ie];return le instanceof ys||le instanceof ts?le.maxValue:0}populatePaintArrays(ie,le,pe){for(const ge in this.binders){const xe=this.binders[ge];(xe instanceof ys||xe instanceof ts||xe instanceof Ls)&&xe.populatePaintArray(ie,le,pe)}}setConstantPatternPositions(ie,le){for(const pe in this.binders){const ge=this.binders[pe];ge instanceof Ks&&ge.setConstantPatternPositions(ie,le)}}setConstantDashPositions(ie,le){for(const pe in this.binders){const ge=this.binders[pe];ge instanceof Ks&&ge.setConstantDashPositions(ie,le)}}updatePaintArrays(ie,le,pe,ge,xe){let Se=!1;for(const ke in ie){const Le=le.getPositions(ke);for(const Ve of Le){const Ne=pe.feature(Ve.index);for(const He in this.binders){const et=this.binders[He];if((et instanceof ys||et instanceof ts||et instanceof Ls)&&et.expression.isStateDependent===!0){const nt=ge.paint.get(He);et.expression=nt.value,et.updatePaintArray(Ve.start,Ve.end,Ne,ie[ke],xe),Se=!0}}}}return Se}defines(){const ie=[];for(const le in this.binders){const pe=this.binders[le];(pe instanceof en||pe instanceof Ks)&&ie.push(...pe.uniformNames.map(ge=>`#define HAS_UNIFORM_${ge}`))}return ie}getBinderAttributes(){const ie=[];for(const le in this.binders){const pe=this.binders[le];if(pe instanceof ys||pe instanceof ts)for(let ge=0;ge<pe.paintVertexAttributes.length;ge++)ie.push(pe.paintVertexAttributes[ge].name);else if(pe instanceof Ls){const ge=pe.getVertexAttributes();for(const xe of ge)ie.push(xe.name)}}return ie}getBinderUniforms(){const ie=[];for(const le in this.binders){const pe=this.binders[le];if(pe instanceof en||pe instanceof Ks||pe instanceof ts)for(const ge of pe.uniformNames)ie.push(ge)}return ie}getPaintVertexBuffers(){return this._buffers}getUniforms(ie,le){const pe=[];for(const ge in this.binders){const xe=this.binders[ge];if(xe instanceof en||xe instanceof Ks||xe instanceof ts){for(const Se of xe.uniformNames)if(le[Se]){const ke=xe.getBinding(ie,le[Se],Se);pe.push({name:Se,property:ge,binding:ke})}}}return pe}setUniforms(ie,le,pe,ge){for(const{name:xe,property:Se,binding:ke}of le)this.binders[Se].setUniform(ke,ge,pe.get(Se),xe)}updatePaintBuffers(ie){this._buffers=[];for(const le in this.binders){const pe=this.binders[le];if(ie&&pe instanceof Ls){const ge=ie.fromScale===2?pe.zoomInPaintVertexBuffer:pe.zoomOutPaintVertexBuffer;ge&&this._buffers.push(ge)}else(pe instanceof ys||pe instanceof ts)&&pe.paintVertexBuffer&&this._buffers.push(pe.paintVertexBuffer)}}upload(ie){for(const le in this.binders){const pe=this.binders[le];(pe instanceof ys||pe instanceof ts||pe instanceof Ls)&&pe.upload(ie)}this.updatePaintBuffers()}destroy(){for(const ie in this.binders){const le=this.binders[ie];(le instanceof ys||le instanceof ts||le instanceof Ls)&&le.destroy()}}}class Rs{constructor(ie,le,pe=()=>!0){this.programConfigurations={};for(const ge of ie)this.programConfigurations[ge.id]=new zs(ge,le,pe);this.needsUpload=!1,this._featureMap=new Ys,this._bufferOffset=0}populatePaintArrays(ie,le,pe,ge){for(const xe in this.programConfigurations)this.programConfigurations[xe].populatePaintArrays(ie,le,ge);le.id!==void 0&&this._featureMap.add(le.id,pe,this._bufferOffset,ie),this._bufferOffset=ie,this.needsUpload=!0}updatePaintArrays(ie,le,pe,ge){for(const xe of pe)this.needsUpload=this.programConfigurations[xe.id].updatePaintArrays(ie,this._featureMap,le,xe,ge)||this.needsUpload}get(ie){return this.programConfigurations[ie]}upload(ie){if(this.needsUpload){for(const le in this.programConfigurations)this.programConfigurations[le].upload(ie);this.needsUpload=!1}}destroy(){for(const ie in this.programConfigurations)this.programConfigurations[ie].destroy()}}function Th(ce,ie){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[ce]||[ce.replace(`${ie}-`,"").replace(/-/g,"_")]}function tc(ce,ie,le){const pe={color:{source:Hs,composite:Fe},number:{source:he,composite:Hs}},ge=function(xe){return{"line-pattern":{source:Wt,composite:Wt},"fill-pattern":{source:Wt,composite:Wt},"fill-extrusion-pattern":{source:Wt,composite:Wt},"line-dasharray":{source:Ut,composite:Ut}}[xe]}(ce);return ge&&ge[le]||pe[ie][le]}Rr("ConstantBinder",en),Rr("CrossFadedConstantBinder",Ks),Rr("SourceExpressionBinder",ys),Rr("CrossFadedPatternBinder",wh),Rr("CrossFadedDasharrayBinder",Sh),Rr("CompositeExpressionBinder",ts),Rr("ProgramConfiguration",zs,{omit:["_buffers"]}),Rr("ProgramConfigurationSet",Rs);const Jo=Math.pow(2,14)-1,rc=-Jo-1;function vs(ce){const ie=je/ce.extent,le=ce.loadGeometry();for(let pe=0;pe<le.length;pe++){const ge=le[pe];for(let xe=0;xe<ge.length;xe++){const Se=ge[xe],ke=Math.round(Se.x*ie),Le=Math.round(Se.y*ie);Se.x=yr(ke,rc,Jo),Se.y=yr(Le,rc,Jo),(ke<Se.x||ke>Se.x+1||Le<Se.y||Le>Se.y+1)&&fr("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return le}function Qo(ce,ie){return{type:ce.type,id:ce.id,properties:ce.properties,geometry:ie?vs(ce):[]}}const Ku=-32768;function Ip(ce,ie,le,pe,ge){ce.emplaceBack(Ku+8*ie+pe,Ku+8*le+ge)}class du{constructor(ie){this.zoom=ie.zoom,this.overscaling=ie.overscaling,this.layers=ie.layers,this.layerIds=this.layers.map(le=>le.id),this.index=ie.index,this.hasDependencies=!1,this.layoutVertexArray=new Lt,this.indexArray=new ti,this.segments=new di,this.programConfigurations=new Rs(ie.layers,ie.zoom),this.stateDependentLayerIds=this.layers.filter(le=>le.isStateDependent()).map(le=>le.id)}populate(ie,le,pe){const ge=this.layers[0],xe=[];let Se=null,ke=!1,Le=ge.type==="heatmap";if(ge.type==="circle"){const Ne=ge;Se=Ne.layout.get("circle-sort-key"),ke=!Se.isConstant(),Le=Le||Ne.paint.get("circle-pitch-alignment")==="map"}const Ve=Le?le.subdivisionGranularity.circle:1;for(const{feature:Ne,id:He,index:et,sourceLayerIndex:nt}of ie){const ot=this.layers[0]._featureFilter.needGeometry,ut=Qo(Ne,ot);if(!this.layers[0]._featureFilter.filter(new Li(this.zoom),ut,pe))continue;const gt=ke?Se.evaluate(ut,{},pe):void 0,St={id:He,properties:Ne.properties,type:Ne.type,sourceLayerIndex:nt,index:et,geometry:ot?ut.geometry:vs(Ne),patterns:{},sortKey:gt};xe.push(St)}ke&&xe.sort((Ne,He)=>Ne.sortKey-He.sortKey);for(const Ne of xe){const{geometry:He,index:et,sourceLayerIndex:nt}=Ne,ot=ie[et].feature;this.addFeature(Ne,He,et,pe,Ve),le.featureIndex.insert(ot,He,et,nt,this.index)}}update(ie,le,pe){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(ie,le,this.stateDependentLayers,{imagePositions:pe})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(ie){this.uploaded||(this.layoutVertexBuffer=ie.createVertexBuffer(this.layoutVertexArray,Fi),this.indexBuffer=ie.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(ie),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(ie,le,pe,ge,xe=1){let Se;switch(xe){case 1:Se=[0,7];break;case 3:Se=[0,2,5,7];break;case 5:Se=[0,1,3,4,6,7];break;case 7:Se=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${xe}; valid values are 1, 3, 5, 7.`)}const ke=Se.length;for(const Le of le)for(const Ve of Le){const Ne=Ve.x,He=Ve.y;if(Ne<0||Ne>=je||He<0||He>=je)continue;const et=this.segments.prepareSegment(ke*ke,this.layoutVertexArray,this.indexArray,ie.sortKey),nt=et.vertexLength;for(let ot=0;ot<ke;ot++)for(let ut=0;ut<ke;ut++)Ip(this.layoutVertexArray,Ne,He,Se[ut],Se[ot]);for(let ot=0;ot<ke-1;ot++)for(let ut=0;ut<ke-1;ut++){const gt=nt+ot*ke+ut,St=nt+(ot+1)*ke+ut;this.indexArray.emplaceBack(gt,St+1,gt+1),this.indexArray.emplaceBack(gt,St,St+1)}et.vertexLength+=ke*ke,et.primitiveLength+=(ke-1)*(ke-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,ie,pe,{imagePositions:{},canonical:ge})}}function Ju(ce,ie){for(let le=0;le<ce.length;le++)if(Ka(ie,ce[le]))return!0;for(let le=0;le<ie.length;le++)if(Ka(ce,ie[le]))return!0;return!!pu(ce,ie)}function Ch(ce,ie,le){return!!Ka(ce,ie)||!!fu(ie,ce,le)}function Qu(ce,ie){if(ce.length===1)return td(ie,ce[0]);for(let le=0;le<ie.length;le++){const pe=ie[le];for(let ge=0;ge<pe.length;ge++)if(Ka(ce,pe[ge]))return!0}for(let le=0;le<ce.length;le++)if(td(ie,ce[le]))return!0;for(let le=0;le<ie.length;le++)if(pu(ce,ie[le]))return!0;return!1}function Lp(ce,ie,le){if(ce.length>1){if(pu(ce,ie))return!0;for(let pe=0;pe<ie.length;pe++)if(fu(ie[pe],ce,le))return!0}for(let pe=0;pe<ce.length;pe++)if(fu(ce[pe],ie,le))return!0;return!1}function pu(ce,ie){if(ce.length===0||ie.length===0)return!1;for(let le=0;le<ce.length-1;le++){const pe=ce[le],ge=ce[le+1];for(let xe=0;xe<ie.length-1;xe++)if(zp(pe,ge,ie[xe],ie[xe+1]))return!0}return!1}function zp(ce,ie,le,pe){return qr(ce,le,pe)!==qr(ie,le,pe)&&qr(ce,ie,le)!==qr(ce,ie,pe)}function fu(ce,ie,le){const pe=le*le;if(ie.length===1)return ce.distSqr(ie[0])<pe;for(let ge=1;ge<ie.length;ge++)if(ed(ce,ie[ge-1],ie[ge])<pe)return!0;return!1}function ed(ce,ie,le){const pe=ie.distSqr(le);if(pe===0)return ce.distSqr(ie);const ge=((ce.x-ie.x)*(le.x-ie.x)+(ce.y-ie.y)*(le.y-ie.y))/pe;return ce.distSqr(ge<0?ie:ge>1?le:le.sub(ie)._mult(ge)._add(ie))}function td(ce,ie){let le,pe,ge,xe=!1;for(let Se=0;Se<ce.length;Se++){le=ce[Se];for(let ke=0,Le=le.length-1;ke<le.length;Le=ke++)pe=le[ke],ge=le[Le],pe.y>ie.y!=ge.y>ie.y&&ie.x<(ge.x-pe.x)*(ie.y-pe.y)/(ge.y-pe.y)+pe.x&&(xe=!xe)}return xe}function Ka(ce,ie){let le=!1;for(let pe=0,ge=ce.length-1;pe<ce.length;ge=pe++){const xe=ce[pe],Se=ce[ge];xe.y>ie.y!=Se.y>ie.y&&ie.x<(Se.x-xe.x)*(ie.y-xe.y)/(Se.y-xe.y)+xe.x&&(le=!le)}return le}function Rp(ce,ie,le){const pe=le[0],ge=le[2];if(ce.x<pe.x&&ie.x<pe.x||ce.x>ge.x&&ie.x>ge.x||ce.y<pe.y&&ie.y<pe.y||ce.y>ge.y&&ie.y>ge.y)return!1;const xe=qr(ce,ie,le[0]);return xe!==qr(ce,ie,le[1])||xe!==qr(ce,ie,le[2])||xe!==qr(ce,ie,le[3])}function Ja(ce,ie,le){const pe=ie.paint.get(ce).value;return pe.kind==="constant"?pe.value:le.programConfigurations.get(ie.id).getMaxValue(ce)}function Ph(ce){return Math.sqrt(ce[0]*ce[0]+ce[1]*ce[1])}function Eh(ce,ie,le,pe,ge){if(!ie[0]&&!ie[1])return ce;const xe=me.convert(ie)._mult(ge);le==="viewport"&&xe._rotate(-pe);const Se=[];for(let ke=0;ke<ce.length;ke++)Se.push(ce[ke].sub(xe));return Se}function Fp({queryGeometry:ce,size:ie},le){return Ch(ce,le,ie)}function Dp({queryGeometry:ce,size:ie,transform:le,unwrappedTileID:pe,getElevation:ge},xe){return Ch(ce,xe,ie*(le.projectTileCoordinates(xe.x,xe.y,pe,ge).signedDistanceFromCamera/le.cameraToCenterDistance))}function Bp({queryGeometry:ce,size:ie,transform:le,unwrappedTileID:pe,getElevation:ge},xe){const Se=le.projectTileCoordinates(xe.x,xe.y,pe,ge).signedDistanceFromCamera,ke=ie*(le.cameraToCenterDistance/Se);return Ch(ce,mu(xe,le,pe,ge),ke)}function Op({queryGeometry:ce,size:ie,transform:le,unwrappedTileID:pe,getElevation:ge},xe){return Ch(ce,mu(xe,le,pe,ge),ie)}function rd({queryGeometry:ce,size:ie,transform:le,unwrappedTileID:pe,getElevation:ge,pitchAlignment:xe="map",pitchScale:Se="map"},ke){const Le=xe==="map"?Se==="map"?Fp:Dp:Se==="map"?Bp:Op,Ve={queryGeometry:ce,size:ie,transform:le,unwrappedTileID:pe,getElevation:ge};for(const Ne of ke)for(const He of Ne)if(Le(Ve,He))return!0;return!1}function mu(ce,ie,le,pe){const ge=ie.projectTileCoordinates(ce.x,ce.y,le,pe).point;return new me((.5*ge.x+.5)*ie.width,(.5*-ge.y+.5)*ie.height)}let id,nd;Rr("CircleBucket",du,{omit:["layers"]});var Vp={get paint(){return nd=nd||new Fn({"circle-radius":new Ur(Ot.paint_circle["circle-radius"]),"circle-color":new Ur(Ot.paint_circle["circle-color"]),"circle-blur":new Ur(Ot.paint_circle["circle-blur"]),"circle-opacity":new Ur(Ot.paint_circle["circle-opacity"]),"circle-translate":new Vr(Ot.paint_circle["circle-translate"]),"circle-translate-anchor":new Vr(Ot.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Vr(Ot.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Vr(Ot.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ur(Ot.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ur(Ot.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ur(Ot.paint_circle["circle-stroke-opacity"])})},get layout(){return id=id||new Fn({"circle-sort-key":new Ur(Ot.layout_circle["circle-sort-key"])})}};class Np extends es{constructor(ie,le){super(ie,Vp,le)}createBucket(ie){return new du(ie)}queryRadius(ie){const le=ie;return Ja("circle-radius",this,le)+Ja("circle-stroke-width",this,le)+Ph(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:ie,feature:le,featureState:pe,geometry:ge,transform:xe,pixelsToTileUnits:Se,unwrappedTileID:ke,getElevation:Le}){const Ve=Eh(ie,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-xe.bearingInRadians,Se),Ne=this.paint.get("circle-radius").evaluate(le,pe)+this.paint.get("circle-stroke-width").evaluate(le,pe),He=this.paint.get("circle-pitch-scale"),et=this.paint.get("circle-pitch-alignment");let nt,ot;return et==="map"?(nt=Ve,ot=Ne*Se):(nt=function(ut,gt,St,$t){return ut.map(Et=>mu(Et,gt,St,$t))}(Ve,xe,ke,Le),ot=Ne),rd({queryGeometry:nt,size:ot,transform:xe,unwrappedTileID:ke,getElevation:Le,pitchAlignment:et,pitchScale:He},ge)}}class sd extends du{}let od;Rr("HeatmapBucket",sd,{omit:["layers"]});var $p={get paint(){return od=od||new Fn({"heatmap-radius":new Ur(Ot.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ur(Ot.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Vr(Ot.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Uo(Ot.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Vr(Ot.paint_heatmap["heatmap-opacity"])})}};function gu(ce,{width:ie,height:le},pe,ge){if(ge){if(ge instanceof Uint8ClampedArray)ge=new Uint8Array(ge.buffer);else if(ge.length!==ie*le*pe)throw new RangeError(`mismatched image size. expected: ${ge.length} but got: ${ie*le*pe}`)}else ge=new Uint8Array(ie*le*pe);return ce.width=ie,ce.height=le,ce.data=ge,ce}function ad(ce,{width:ie,height:le},pe){if(ie===ce.width&&le===ce.height)return;const ge=gu({},{width:ie,height:le},pe);_u(ce,ge,{x:0,y:0},{x:0,y:0},{width:Math.min(ce.width,ie),height:Math.min(ce.height,le)},pe),ce.width=ie,ce.height=le,ce.data=ge.data}function _u(ce,ie,le,pe,ge,xe){if(ge.width===0||ge.height===0)return ie;if(ge.width>ce.width||ge.height>ce.height||le.x>ce.width-ge.width||le.y>ce.height-ge.height)throw new RangeError("out of range source coordinates for image copy");if(ge.width>ie.width||ge.height>ie.height||pe.x>ie.width-ge.width||pe.y>ie.height-ge.height)throw new RangeError("out of range destination coordinates for image copy");const Se=ce.data,ke=ie.data;if(Se===ke)throw new Error("srcData equals dstData, so image is already copied");for(let Le=0;Le<ge.height;Le++){const Ve=((le.y+Le)*ce.width+le.x)*xe,Ne=((pe.y+Le)*ie.width+pe.x)*xe;for(let He=0;He<ge.width*xe;He++)ke[Ne+He]=Se[Ve+He]}return ie}class ic{constructor(ie,le){gu(this,ie,1,le)}resize(ie){ad(this,ie,1)}clone(){return new ic({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(ie,le,pe,ge,xe){_u(ie,le,pe,ge,xe,1)}}class Wn{constructor(ie,le){gu(this,ie,4,le)}resize(ie){ad(this,ie,4)}replace(ie,le){le?this.data.set(ie):this.data=ie instanceof Uint8ClampedArray?new Uint8Array(ie.buffer):ie}clone(){return new Wn({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(ie,le,pe,ge,xe){_u(ie,le,pe,ge,xe,4)}setPixel(ie,le,pe){const ge=4*(ie*this.width+le);this.data[ge+0]=Math.round(255*pe.r/pe.a),this.data[ge+1]=Math.round(255*pe.g/pe.a),this.data[ge+2]=Math.round(255*pe.b/pe.a),this.data[ge+3]=Math.round(255*pe.a)}}function ld(ce){const ie={},le=ce.resolution||256,pe=ce.clips?ce.clips.length:1,ge=ce.image||new Wn({width:le,height:pe});if(Math.log(le)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${le}`);const xe=(Se,ke,Le)=>{ie[ce.evaluationKey]=Le;const Ve=ce.expression.evaluate(ie);ge.setPixel(Se/4/le,ke/4,Ve)};if(ce.clips)for(let Se=0,ke=0;Se<pe;++Se,ke+=4*le)for(let Le=0,Ve=0;Le<le;Le++,Ve+=4){const Ne=Le/(le-1),{start:He,end:et}=ce.clips[Se];xe(ke,Ve,He*(1-Ne)+et*Ne)}else for(let Se=0,ke=0;Se<le;Se++,ke+=4)xe(0,ke,Se/(le-1));return ge}Rr("AlphaImage",ic),Rr("RGBAImage",Wn);const yu="big-fb";class qp extends es{createBucket(ie){return new sd(ie)}constructor(ie,le){super(ie,$p,le),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(ie){ie==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=ld({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(yu)&&this.heatmapFbos.delete(yu)}queryRadius(ie){return Ja("heatmap-radius",this,ie)}queryIntersectsFeature({queryGeometry:ie,feature:le,featureState:pe,geometry:ge,transform:xe,pixelsToTileUnits:Se,unwrappedTileID:ke,getElevation:Le}){return rd({queryGeometry:ie,size:this.paint.get("heatmap-radius").evaluate(le,pe)*Se,transform:xe,unwrappedTileID:ke,getElevation:Le},ge)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let cd;var jp={get paint(){return cd=cd||new Fn({"hillshade-illumination-direction":new Vr(Ot.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new Vr(Ot.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new Vr(Ot.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Vr(Ot.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Vr(Ot.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Vr(Ot.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Vr(Ot.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new Vr(Ot.paint_hillshade["hillshade-method"])})}};class Wp extends es{constructor(ie,le){super(ie,jp,le),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let ie=this.paint.get("hillshade-illumination-direction").values,le=this.paint.get("hillshade-illumination-altitude").values,pe=this.paint.get("hillshade-highlight-color").values,ge=this.paint.get("hillshade-shadow-color").values;const xe=Math.max(ie.length,le.length,pe.length,ge.length);ie=ie.concat(Array(xe-ie.length).fill(ie.at(-1))),le=le.concat(Array(xe-le.length).fill(le.at(-1))),pe=pe.concat(Array(xe-pe.length).fill(pe.at(-1))),ge=ge.concat(Array(xe-ge.length).fill(ge.at(-1)));const Se=le.map(wi);return{directionRadians:ie.map(wi),altitudeRadians:Se,shadowColor:ge,highlightColor:pe}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let hd;var Gp={get paint(){return hd=hd||new Fn({"color-relief-opacity":new Vr(Ot["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new Uo(Ot["paint_color-relief"]["color-relief-color"])})}};class vu{constructor(ie,le,pe,ge){this.context=ie,this.format=pe,this.texture=ie.gl.createTexture(),this.update(le,ge)}update(ie,le,pe){const{width:ge,height:xe}=ie,Se=!(this.size&&this.size[0]===ge&&this.size[1]===xe||pe),{context:ke}=this,{gl:Le}=ke;if(this.useMipmap=Boolean(le&&le.useMipmap),Le.bindTexture(Le.TEXTURE_2D,this.texture),ke.pixelStoreUnpackFlipY.set(!1),ke.pixelStoreUnpack.set(1),ke.pixelStoreUnpackPremultiplyAlpha.set(this.format===Le.RGBA&&(!le||le.premultiply!==!1)),Se)this.size=[ge,xe],ie instanceof HTMLImageElement||ie instanceof HTMLCanvasElement||ie instanceof HTMLVideoElement||ie instanceof ImageData||ci(ie)?Le.texImage2D(Le.TEXTURE_2D,0,this.format,this.format,Le.UNSIGNED_BYTE,ie):Le.texImage2D(Le.TEXTURE_2D,0,this.format,ge,xe,0,this.format,Le.UNSIGNED_BYTE,ie.data);else{const{x:Ve,y:Ne}=pe||{x:0,y:0};ie instanceof HTMLImageElement||ie instanceof HTMLCanvasElement||ie instanceof HTMLVideoElement||ie instanceof ImageData||ci(ie)?Le.texSubImage2D(Le.TEXTURE_2D,0,Ve,Ne,Le.RGBA,Le.UNSIGNED_BYTE,ie):Le.texSubImage2D(Le.TEXTURE_2D,0,Ve,Ne,ge,xe,Le.RGBA,Le.UNSIGNED_BYTE,ie.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Le.generateMipmap(Le.TEXTURE_2D),ke.pixelStoreUnpackFlipY.setDefault(),ke.pixelStoreUnpack.setDefault(),ke.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(ie,le,pe){const{context:ge}=this,{gl:xe}=ge;xe.bindTexture(xe.TEXTURE_2D,this.texture),pe!==xe.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(pe=xe.LINEAR),ie!==this.filter&&(xe.texParameteri(xe.TEXTURE_2D,xe.TEXTURE_MAG_FILTER,ie),xe.texParameteri(xe.TEXTURE_2D,xe.TEXTURE_MIN_FILTER,pe||ie),this.filter=ie),le!==this.wrap&&(xe.texParameteri(xe.TEXTURE_2D,xe.TEXTURE_WRAP_S,le),xe.texParameteri(xe.TEXTURE_2D,xe.TEXTURE_WRAP_T,le),this.wrap=le)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:ie}=this.context;ie.deleteTexture(this.texture),this.texture=null}}class ud{constructor(ie,le,pe,ge=1,xe=1,Se=1,ke=0){if(this.uid=ie,le.height!==le.width)throw new RangeError("DEM tiles must be square");if(pe&&!["mapbox","terrarium","custom"].includes(pe))return void fr(`"${pe}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=le.height;const Le=this.dim=le.height-2;switch(this.data=new Uint32Array(le.data.buffer),pe){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=ge,this.greenFactor=xe,this.blueFactor=Se,this.baseShift=ke;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let Ve=0;Ve<Le;Ve++)this.data[this._idx(-1,Ve)]=this.data[this._idx(0,Ve)],this.data[this._idx(Le,Ve)]=this.data[this._idx(Le-1,Ve)],this.data[this._idx(Ve,-1)]=this.data[this._idx(Ve,0)],this.data[this._idx(Ve,Le)]=this.data[this._idx(Ve,Le-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(Le,-1)]=this.data[this._idx(Le-1,0)],this.data[this._idx(-1,Le)]=this.data[this._idx(0,Le-1)],this.data[this._idx(Le,Le)]=this.data[this._idx(Le-1,Le-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let Ve=0;Ve<Le;Ve++)for(let Ne=0;Ne<Le;Ne++){const He=this.get(Ve,Ne);He>this.max&&(this.max=He),He<this.min&&(this.min=He)}}get(ie,le){const pe=new Uint8Array(this.data.buffer),ge=4*this._idx(ie,le);return this.unpack(pe[ge],pe[ge+1],pe[ge+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(ie,le){if(ie<-1||ie>=this.dim+1||le<-1||le>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(le+1)*this.stride+(ie+1)}unpack(ie,le,pe){return ie*this.redFactor+le*this.greenFactor+pe*this.blueFactor-this.baseShift}pack(ie){return dd(ie,this.getUnpackVector())}getPixels(){return new Wn({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(ie,le,pe){if(this.dim!==ie.dim)throw new Error("dem dimension mismatch");let ge=le*this.dim,xe=le*this.dim+this.dim,Se=pe*this.dim,ke=pe*this.dim+this.dim;switch(le){case-1:ge=xe-1;break;case 1:xe=ge+1}switch(pe){case-1:Se=ke-1;break;case 1:ke=Se+1}const Le=-le*this.dim,Ve=-pe*this.dim;for(let Ne=Se;Ne<ke;Ne++)for(let He=ge;He<xe;He++)this.data[this._idx(He,Ne)]=ie.data[this._idx(He+Le,Ne+Ve)]}}function dd(ce,ie){const le=ie[0],pe=ie[1],ge=ie[2],xe=ie[3],Se=Math.min(le,pe,ge),ke=Math.round((ce+xe)/Se);return{r:Math.floor(ke*Se/le)%256,g:Math.floor(ke*Se/pe)%256,b:Math.floor(ke*Se/ge)%256}}Rr("DEMData",ud);class Hp extends es{constructor(ie,le){super(ie,Gp,le)}_createColorRamp(ie){const le={elevationStops:[],colorStops:[]},pe=this._transitionablePaint._values["color-relief-color"].value.expression;if(pe instanceof za&&pe._styleExpression.expression instanceof zn){this.colorRampExpression=pe;const Se=pe._styleExpression.expression;le.elevationStops=Se.labels,le.colorStops=[];for(const ke of le.elevationStops)le.colorStops.push(Se.evaluate({globals:{elevation:ke}}))}if(le.elevationStops.length<1&&(le.elevationStops=[0],le.colorStops=[ai.transparent]),le.elevationStops.length<2&&(le.elevationStops.push(le.elevationStops[0]+1),le.colorStops.push(le.colorStops[0])),le.elevationStops.length<=ie)return le;const ge={elevationStops:[],colorStops:[]},xe=(le.elevationStops.length-1)/(ie-1);for(let Se=0;Se<le.elevationStops.length-.5;Se+=xe)ge.elevationStops.push(le.elevationStops[Math.round(Se)]),ge.colorStops.push(le.colorStops[Math.round(Se)]);return fr(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),ge}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(ie,le,pe){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const ge=this._createColorRamp(le),xe=new Wn({width:ge.colorStops.length,height:1}),Se=new Wn({width:ge.colorStops.length,height:1});for(let ke=0;ke<ge.elevationStops.length;ke++){const Le=dd(ge.elevationStops[ke],pe);Se.setPixel(0,ke,new ai(Le.r/255,Le.g/255,Le.b/255,1)),xe.setPixel(0,ke,ge.colorStops[ke])}return this.colorRampTextures={elevationTexture:new vu(ie,Se,ie.gl.RGBA),colorTexture:new vu(ie,xe,ie.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const Up=Ki([{name:"a_pos",components:2,type:"Int16"}],4),{members:Zp}=Up;function Mh(ce,ie,le){const pe=le.patternDependencies;let ge=!1;for(const xe of ie){const Se=xe.paint.get(`${ce}-pattern`);Se.isConstant()||(ge=!0);const ke=Se.constantOr(null);ke&&(ge=!0,pe[ke.to]=!0,pe[ke.from]=!0)}return ge}function bu(ce,ie,le,pe,ge){const{zoom:xe}=pe,Se=ge.patternDependencies;for(const ke of ie){const Le=ke.paint.get(`${ce}-pattern`).value;if(Le.kind!=="constant"){let Ve=Le.evaluate({zoom:xe-1},le,{},ge.availableImages),Ne=Le.evaluate({zoom:xe},le,{},ge.availableImages),He=Le.evaluate({zoom:xe+1},le,{},ge.availableImages);Ve=Ve&&Ve.name?Ve.name:Ve,Ne=Ne&&Ne.name?Ne.name:Ne,He=He&&He.name?He.name:He,Se[Ve]=!0,Se[Ne]=!0,Se[He]=!0,le.patterns[ke.id]={min:Ve,mid:Ne,max:He}}}return le}function pd(ce,ie,le,pe,ge){let xe;if(ge===function(Se,ke,Le,Ve){let Ne=0;for(let He=ke,et=Le-Ve;He<Le;He+=Ve)Ne+=(Se[et]-Se[He])*(Se[He+1]+Se[et+1]),et=He;return Ne}(ce,ie,le,pe)>0)for(let Se=ie;Se<le;Se+=pe)xe=_d(Se/pe|0,ce[Se],ce[Se+1],xe);else for(let Se=le-pe;Se>=ie;Se-=pe)xe=_d(Se/pe|0,ce[Se],ce[Se+1],xe);return xe&&Qa(xe,xe.next)&&(ac(xe),xe=xe.next),xe}function ea(ce,ie){if(!ce)return ce;ie||(ie=ce);let le,pe=ce;do if(le=!1,pe.steiner||!Qa(pe,pe.next)&&rn(pe.prev,pe,pe.next)!==0)pe=pe.next;else{if(ac(pe),pe=ie=pe.prev,pe===pe.next)break;le=!0}while(le||pe!==ie);return ie}function nc(ce,ie,le,pe,ge,xe,Se){if(!ce)return;!Se&&xe&&function(Le,Ve,Ne,He){let et=Le;do et.z===0&&(et.z=xu(et.x,et.y,Ve,Ne,He)),et.prevZ=et.prev,et.nextZ=et.next,et=et.next;while(et!==Le);et.prevZ.nextZ=null,et.prevZ=null,function(nt){let ot,ut=1;do{let gt,St=nt;nt=null;let $t=null;for(ot=0;St;){ot++;let Et=St,zt=0;for(let rr=0;rr<ut&&(zt++,Et=Et.nextZ,Et);rr++);let Ht=ut;for(;zt>0||Ht>0&&Et;)zt!==0&&(Ht===0||!Et||St.z<=Et.z)?(gt=St,St=St.nextZ,zt--):(gt=Et,Et=Et.nextZ,Ht--),$t?$t.nextZ=gt:nt=gt,gt.prevZ=$t,$t=gt;St=Et}$t.nextZ=null,ut*=2}while(ot>1)}(et)}(ce,pe,ge,xe);let ke=ce;for(;ce.prev!==ce.next;){const Le=ce.prev,Ve=ce.next;if(xe?Yp(ce,pe,ge,xe):Xp(ce))ie.push(Le.i,ce.i,Ve.i),ac(ce),ce=Ve.next,ke=Ve.next;else if((ce=Ve)===ke){Se?Se===1?nc(ce=Kp(ea(ce),ie),ie,le,pe,ge,xe,2):Se===2&&Jp(ce,ie,le,pe,ge,xe):nc(ea(ce),ie,le,pe,ge,xe,1);break}}}function Xp(ce){const ie=ce.prev,le=ce,pe=ce.next;if(rn(ie,le,pe)>=0)return!1;const ge=ie.x,xe=le.x,Se=pe.x,ke=ie.y,Le=le.y,Ve=pe.y,Ne=Math.min(ge,xe,Se),He=Math.min(ke,Le,Ve),et=Math.max(ge,xe,Se),nt=Math.max(ke,Le,Ve);let ot=pe.next;for(;ot!==ie;){if(ot.x>=Ne&&ot.x<=et&&ot.y>=He&&ot.y<=nt&&sc(ge,ke,xe,Le,Se,Ve,ot.x,ot.y)&&rn(ot.prev,ot,ot.next)>=0)return!1;ot=ot.next}return!0}function Yp(ce,ie,le,pe){const ge=ce.prev,xe=ce,Se=ce.next;if(rn(ge,xe,Se)>=0)return!1;const ke=ge.x,Le=xe.x,Ve=Se.x,Ne=ge.y,He=xe.y,et=Se.y,nt=Math.min(ke,Le,Ve),ot=Math.min(Ne,He,et),ut=Math.max(ke,Le,Ve),gt=Math.max(Ne,He,et),St=xu(nt,ot,ie,le,pe),$t=xu(ut,gt,ie,le,pe);let Et=ce.prevZ,zt=ce.nextZ;for(;Et&&Et.z>=St&&zt&&zt.z<=$t;){if(Et.x>=nt&&Et.x<=ut&&Et.y>=ot&&Et.y<=gt&&Et!==ge&&Et!==Se&&sc(ke,Ne,Le,He,Ve,et,Et.x,Et.y)&&rn(Et.prev,Et,Et.next)>=0||(Et=Et.prevZ,zt.x>=nt&&zt.x<=ut&&zt.y>=ot&&zt.y<=gt&&zt!==ge&&zt!==Se&&sc(ke,Ne,Le,He,Ve,et,zt.x,zt.y)&&rn(zt.prev,zt,zt.next)>=0))return!1;zt=zt.nextZ}for(;Et&&Et.z>=St;){if(Et.x>=nt&&Et.x<=ut&&Et.y>=ot&&Et.y<=gt&&Et!==ge&&Et!==Se&&sc(ke,Ne,Le,He,Ve,et,Et.x,Et.y)&&rn(Et.prev,Et,Et.next)>=0)return!1;Et=Et.prevZ}for(;zt&&zt.z<=$t;){if(zt.x>=nt&&zt.x<=ut&&zt.y>=ot&&zt.y<=gt&&zt!==ge&&zt!==Se&&sc(ke,Ne,Le,He,Ve,et,zt.x,zt.y)&&rn(zt.prev,zt,zt.next)>=0)return!1;zt=zt.nextZ}return!0}function Kp(ce,ie){let le=ce;do{const pe=le.prev,ge=le.next.next;!Qa(pe,ge)&&md(pe,le,le.next,ge)&&oc(pe,ge)&&oc(ge,pe)&&(ie.push(pe.i,le.i,ge.i),ac(le),ac(le.next),le=ce=ge),le=le.next}while(le!==ce);return ea(le)}function Jp(ce,ie,le,pe,ge,xe){let Se=ce;do{let ke=Se.next.next;for(;ke!==Se.prev;){if(Se.i!==ke.i&&nf(Se,ke)){let Le=gd(Se,ke);return Se=ea(Se,Se.next),Le=ea(Le,Le.next),nc(Se,ie,le,pe,ge,xe,0),void nc(Le,ie,le,pe,ge,xe,0)}ke=ke.next}Se=Se.next}while(Se!==ce)}function Qp(ce,ie){let le=ce.x-ie.x;return le===0&&(le=ce.y-ie.y,le===0)&&(le=(ce.next.y-ce.y)/(ce.next.x-ce.x)-(ie.next.y-ie.y)/(ie.next.x-ie.x)),le}function ef(ce,ie){const le=function(ge,xe){let Se=xe;const ke=ge.x,Le=ge.y;let Ve,Ne=-1/0;if(Qa(ge,Se))return Se;do{if(Qa(ge,Se.next))return Se.next;if(Le<=Se.y&&Le>=Se.next.y&&Se.next.y!==Se.y){const ut=Se.x+(Le-Se.y)*(Se.next.x-Se.x)/(Se.next.y-Se.y);if(ut<=ke&&ut>Ne&&(Ne=ut,Ve=Se.x<Se.next.x?Se:Se.next,ut===ke))return Ve}Se=Se.next}while(Se!==xe);if(!Ve)return null;const He=Ve,et=Ve.x,nt=Ve.y;let ot=1/0;Se=Ve;do{if(ke>=Se.x&&Se.x>=et&&ke!==Se.x&&fd(Le<nt?ke:Ne,Le,et,nt,Le<nt?Ne:ke,Le,Se.x,Se.y)){const ut=Math.abs(Le-Se.y)/(ke-Se.x);oc(Se,ge)&&(ut<ot||ut===ot&&(Se.x>Ve.x||Se.x===Ve.x&&tf(Ve,Se)))&&(Ve=Se,ot=ut)}Se=Se.next}while(Se!==He);return Ve}(ce,ie);if(!le)return ie;const pe=gd(le,ce);return ea(pe,pe.next),ea(le,le.next)}function tf(ce,ie){return rn(ce.prev,ce,ie.prev)<0&&rn(ie.next,ce,ce.next)<0}function xu(ce,ie,le,pe,ge){return(ce=1431655765&((ce=858993459&((ce=252645135&((ce=16711935&((ce=(ce-le)*ge|0)|ce<<8))|ce<<4))|ce<<2))|ce<<1))|(ie=1431655765&((ie=858993459&((ie=252645135&((ie=16711935&((ie=(ie-pe)*ge|0)|ie<<8))|ie<<4))|ie<<2))|ie<<1))<<1}function rf(ce){let ie=ce,le=ce;do(ie.x<le.x||ie.x===le.x&&ie.y<le.y)&&(le=ie),ie=ie.next;while(ie!==ce);return le}function fd(ce,ie,le,pe,ge,xe,Se,ke){return(ge-Se)*(ie-ke)>=(ce-Se)*(xe-ke)&&(ce-Se)*(pe-ke)>=(le-Se)*(ie-ke)&&(le-Se)*(xe-ke)>=(ge-Se)*(pe-ke)}function sc(ce,ie,le,pe,ge,xe,Se,ke){return!(ce===Se&&ie===ke)&&fd(ce,ie,le,pe,ge,xe,Se,ke)}function nf(ce,ie){return ce.next.i!==ie.i&&ce.prev.i!==ie.i&&!function(le,pe){let ge=le;do{if(ge.i!==le.i&&ge.next.i!==le.i&&ge.i!==pe.i&&ge.next.i!==pe.i&&md(ge,ge.next,le,pe))return!0;ge=ge.next}while(ge!==le);return!1}(ce,ie)&&(oc(ce,ie)&&oc(ie,ce)&&function(le,pe){let ge=le,xe=!1;const Se=(le.x+pe.x)/2,ke=(le.y+pe.y)/2;do ge.y>ke!=ge.next.y>ke&&ge.next.y!==ge.y&&Se<(ge.next.x-ge.x)*(ke-ge.y)/(ge.next.y-ge.y)+ge.x&&(xe=!xe),ge=ge.next;while(ge!==le);return xe}(ce,ie)&&(rn(ce.prev,ce,ie.prev)||rn(ce,ie.prev,ie))||Qa(ce,ie)&&rn(ce.prev,ce,ce.next)>0&&rn(ie.prev,ie,ie.next)>0)}function rn(ce,ie,le){return(ie.y-ce.y)*(le.x-ie.x)-(ie.x-ce.x)*(le.y-ie.y)}function Qa(ce,ie){return ce.x===ie.x&&ce.y===ie.y}function md(ce,ie,le,pe){const ge=kh(rn(ce,ie,le)),xe=kh(rn(ce,ie,pe)),Se=kh(rn(le,pe,ce)),ke=kh(rn(le,pe,ie));return ge!==xe&&Se!==ke||!(ge!==0||!Ah(ce,le,ie))||!(xe!==0||!Ah(ce,pe,ie))||!(Se!==0||!Ah(le,ce,pe))||!(ke!==0||!Ah(le,ie,pe))}function Ah(ce,ie,le){return ie.x<=Math.max(ce.x,le.x)&&ie.x>=Math.min(ce.x,le.x)&&ie.y<=Math.max(ce.y,le.y)&&ie.y>=Math.min(ce.y,le.y)}function kh(ce){return ce>0?1:ce<0?-1:0}function oc(ce,ie){return rn(ce.prev,ce,ce.next)<0?rn(ce,ie,ce.next)>=0&&rn(ce,ce.prev,ie)>=0:rn(ce,ie,ce.prev)<0||rn(ce,ce.next,ie)<0}function gd(ce,ie){const le=wu(ce.i,ce.x,ce.y),pe=wu(ie.i,ie.x,ie.y),ge=ce.next,xe=ie.prev;return ce.next=ie,ie.prev=ce,le.next=ge,ge.prev=le,pe.next=le,le.prev=pe,xe.next=pe,pe.prev=xe,pe}function _d(ce,ie,le,pe){const ge=wu(ce,ie,le);return pe?(ge.next=pe.next,ge.prev=pe,pe.next.prev=ge,pe.next=ge):(ge.prev=ge,ge.next=ge),ge}function ac(ce){ce.next.prev=ce.prev,ce.prev.next=ce.next,ce.prevZ&&(ce.prevZ.nextZ=ce.nextZ),ce.nextZ&&(ce.nextZ.prevZ=ce.prevZ)}function wu(ce,ie,le){return{i:ce,x:ie,y:le,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class el{constructor(ie,le){if(le>ie)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=ie,this._minGranularity=le}getGranularityForZoomLevel(ie){return Math.max(Math.floor(this._baseZoomGranularity/(1<<ie)),this._minGranularity,1)}}class Ih{constructor(ie){this.fill=ie.fill,this.line=ie.line,this.tile=ie.tile,this.stencil=ie.stencil,this.circle=ie.circle}}Ih.noSubdivision=new Ih({fill:new el(0,0),line:new el(0,0),tile:new el(0,0),stencil:new el(0,0),circle:1}),Rr("SubdivisionGranularityExpression",el),Rr("SubdivisionGranularitySetting",Ih);const tl=-32768,lc=32767;class sf{constructor(ie,le){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=ie,this._granularityCellSize=je/ie,this._canonical=le}_getKey(ie,le){return(ie+=32768)<<16|le+32768}_vertexToIndex(ie,le){if(ie<-32768||le<-32768||ie>32767||le>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const pe=0|Math.round(ie),ge=0|Math.round(le),xe=this._getKey(pe,ge);if(this._vertexDictionary.has(xe))return this._vertexDictionary.get(xe);const Se=this._vertexBuffer.length/2;return this._vertexDictionary.set(xe,Se),this._vertexBuffer.push(pe,ge),Se}_subdivideTrianglesScanline(ie){if(this._granularity<2)return function(ge,xe){const Se=[];for(let ke=0;ke<xe.length;ke+=3){const Le=xe[ke],Ve=xe[ke+1],Ne=xe[ke+2],He=ge[2*Le],et=ge[2*Le+1];(ge[2*Ve]-He)*(ge[2*Ne+1]-et)-(ge[2*Ve+1]-et)*(ge[2*Ne]-He)>0?(Se.push(Le),Se.push(Ne),Se.push(Ve)):(Se.push(Le),Se.push(Ve),Se.push(Ne))}return Se}(this._vertexBuffer,ie);const le=[],pe=ie.length;for(let ge=0;ge<pe;ge+=3){const xe=[ie[ge+0],ie[ge+1],ie[ge+2]],Se=[this._vertexBuffer[2*ie[ge+0]+0],this._vertexBuffer[2*ie[ge+0]+1],this._vertexBuffer[2*ie[ge+1]+0],this._vertexBuffer[2*ie[ge+1]+1],this._vertexBuffer[2*ie[ge+2]+0],this._vertexBuffer[2*ie[ge+2]+1]];let ke=1/0,Le=1/0,Ve=-1/0,Ne=-1/0;for(let ut=0;ut<3;ut++){const gt=Se[2*ut],St=Se[2*ut+1];ke=Math.min(ke,gt),Ve=Math.max(Ve,gt),Le=Math.min(Le,St),Ne=Math.max(Ne,St)}if(ke===Ve||Le===Ne)continue;const He=Math.floor(ke/this._granularityCellSize),et=Math.ceil(Ve/this._granularityCellSize),nt=Math.floor(Le/this._granularityCellSize),ot=Math.ceil(Ne/this._granularityCellSize);if(He!==et||nt!==ot)for(let ut=nt;ut<ot;ut++){const gt=this._scanlineGenerateVertexRingForCellRow(ut,Se,xe);of(this._vertexBuffer,gt,le)}else le.push(...xe)}return le}_scanlineGenerateVertexRingForCellRow(ie,le,pe){const ge=ie*this._granularityCellSize,xe=ge+this._granularityCellSize,Se=[];for(let ke=0;ke<3;ke++){const Le=le[2*ke],Ve=le[2*ke+1],Ne=le[2*(ke+1)%6],He=le[(2*(ke+1)+1)%6],et=le[2*(ke+2)%6],nt=le[(2*(ke+2)+1)%6],ot=Ne-Le,ut=He-Ve,gt=ot===0,St=ut===0,$t=(ge-Ve)/ut,Et=(xe-Ve)/ut,zt=Math.min($t,Et),Ht=Math.max($t,Et);if(!St&&(zt>=1||Ht<=0)||St&&(Ve<ge||Ve>xe)){He>=ge&&He<=xe&&Se.push(pe[(ke+1)%3]);continue}!St&&zt>0&&Se.push(this._vertexToIndex(Le+ot*zt,Ve+ut*zt));const rr=Le+ot*Math.max(zt,0),vr=Le+ot*Math.min(Ht,1);gt||this._generateIntraEdgeVertices(Se,Le,Ve,Ne,He,rr,vr),!St&&Ht<1&&Se.push(this._vertexToIndex(Le+ot*Ht,Ve+ut*Ht)),(St||He>=ge&&He<=xe)&&Se.push(pe[(ke+1)%3]),!St&&(He<=ge||He>=xe)&&this._generateInterEdgeVertices(Se,Le,Ve,Ne,He,et,nt,vr,ge,xe)}return Se}_generateIntraEdgeVertices(ie,le,pe,ge,xe,Se,ke){const Le=ge-le,Ve=xe-pe,Ne=Ve===0,He=Ne?Math.min(le,ge):Math.min(Se,ke),et=Ne?Math.max(le,ge):Math.max(Se,ke),nt=Math.floor(He/this._granularityCellSize)+1,ot=Math.ceil(et/this._granularityCellSize)-1;if(Ne?le<ge:Se<ke)for(let ut=nt;ut<=ot;ut++){const gt=ut*this._granularityCellSize;ie.push(this._vertexToIndex(gt,pe+Ve*(gt-le)/Le))}else for(let ut=ot;ut>=nt;ut--){const gt=ut*this._granularityCellSize;ie.push(this._vertexToIndex(gt,pe+Ve*(gt-le)/Le))}}_generateInterEdgeVertices(ie,le,pe,ge,xe,Se,ke,Le,Ve,Ne){const He=xe-pe,et=Se-ge,nt=ke-xe,ot=(Ve-xe)/nt,ut=(Ne-xe)/nt,gt=Math.min(ot,ut),St=Math.max(ot,ut),$t=ge+et*gt;let Et=Math.floor(Math.min($t,Le)/this._granularityCellSize)+1,zt=Math.ceil(Math.max($t,Le)/this._granularityCellSize)-1,Ht=Le<$t;const rr=nt===0;if(rr&&(ke===Ve||ke===Ne))return;if(rr||gt>=1||St<=0){const Ar=pe-ke,Sr=Se+(le-Se)*Math.min((Ve-ke)/Ar,(Ne-ke)/Ar);Et=Math.floor(Math.min(Sr,Le)/this._granularityCellSize)+1,zt=Math.ceil(Math.max(Sr,Le)/this._granularityCellSize)-1,Ht=Le<Sr}const vr=He>0?Ne:Ve;if(Ht)for(let Ar=Et;Ar<=zt;Ar++)ie.push(this._vertexToIndex(Ar*this._granularityCellSize,vr));else for(let Ar=zt;Ar>=Et;Ar--)ie.push(this._vertexToIndex(Ar*this._granularityCellSize,vr))}_generateOutline(ie){const le=[];for(const pe of ie){const ge=ta(pe,this._granularity,!0),xe=this._pointArrayToIndices(ge),Se=[];for(let ke=1;ke<xe.length;ke++)Se.push(xe[ke-1]),Se.push(xe[ke]);le.push(Se)}return le}_handlePoles(ie){let le=!1,pe=!1;this._canonical&&(this._canonical.y===0&&(le=!0),this._canonical.y===(1<<this._canonical.z)-1&&(pe=!0)),(le||pe)&&this._fillPoles(ie,le,pe)}_ensureNoPoleVertices(){const ie=this._vertexBuffer;for(let le=0;le<ie.length;le+=2){const pe=ie[le+1];pe===tl&&(ie[le+1]=-32767),pe===lc&&(ie[le+1]=32766)}}_generatePoleQuad(ie,le,pe,ge,xe,Se){ge>xe!=(Se===tl)?(ie.push(le),ie.push(pe),ie.push(this._vertexToIndex(ge,Se)),ie.push(pe),ie.push(this._vertexToIndex(xe,Se)),ie.push(this._vertexToIndex(ge,Se))):(ie.push(pe),ie.push(le),ie.push(this._vertexToIndex(ge,Se)),ie.push(this._vertexToIndex(xe,Se)),ie.push(pe),ie.push(this._vertexToIndex(ge,Se)))}_fillPoles(ie,le,pe){const ge=this._vertexBuffer,xe=je,Se=ie.length;for(let ke=2;ke<Se;ke+=3){const Le=ie[ke-2],Ve=ie[ke-1],Ne=ie[ke],He=ge[2*Le],et=ge[2*Le+1],nt=ge[2*Ve],ot=ge[2*Ve+1],ut=ge[2*Ne],gt=ge[2*Ne+1];le&&(et===0&&ot===0&&this._generatePoleQuad(ie,Le,Ve,He,nt,tl),ot===0&&gt===0&&this._generatePoleQuad(ie,Ve,Ne,nt,ut,tl),gt===0&&et===0&&this._generatePoleQuad(ie,Ne,Le,ut,He,tl)),pe&&(et===xe&&ot===xe&&this._generatePoleQuad(ie,Le,Ve,He,nt,lc),ot===xe&&gt===xe&&this._generatePoleQuad(ie,Ve,Ne,nt,ut,lc),gt===xe&&et===xe&&this._generatePoleQuad(ie,Ne,Le,ut,He,lc))}}_initializeVertices(ie){for(let le=0;le<ie.length;le+=2)this._vertexToIndex(ie[le],ie[le+1])}subdividePolygonInternal(ie,le){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:pe,holeIndices:ge}=function(ke){const Le=[],Ve=[];for(const Ne of ke)if(Ne.length!==0){Ne!==ke[0]&&Le.push(Ve.length/2);for(let He=0;He<Ne.length;He++)Ve.push(Ne[He].x),Ve.push(Ne[He].y)}return{flattened:Ve,holeIndices:Le}}(ie);let xe;this._initializeVertices(pe);try{const ke=function(Ve,Ne,He=2){const et=Ne&&Ne.length,nt=et?Ne[0]*He:Ve.length;let ot=pd(Ve,0,nt,He,!0);const ut=[];if(!ot||ot.next===ot.prev)return ut;let gt,St,$t;if(et&&(ot=function(Et,zt,Ht,rr){const vr=[];for(let Ar=0,Sr=zt.length;Ar<Sr;Ar++){const Pr=pd(Et,zt[Ar]*rr,Ar<Sr-1?zt[Ar+1]*rr:Et.length,rr,!1);Pr===Pr.next&&(Pr.steiner=!0),vr.push(rf(Pr))}vr.sort(Qp);for(let Ar=0;Ar<vr.length;Ar++)Ht=ef(vr[Ar],Ht);return Ht}(Ve,Ne,ot,He)),Ve.length>80*He){gt=Ve[0],St=Ve[1];let Et=gt,zt=St;for(let Ht=He;Ht<nt;Ht+=He){const rr=Ve[Ht],vr=Ve[Ht+1];rr<gt&&(gt=rr),vr<St&&(St=vr),rr>Et&&(Et=rr),vr>zt&&(zt=vr)}$t=Math.max(Et-gt,zt-St),$t=$t!==0?32767/$t:0}return nc(ot,ut,He,gt,St,$t,0),ut}(pe,ge),Le=this._convertIndices(pe,ke);xe=this._subdivideTrianglesScanline(Le)}catch(ke){console.error(ke)}let Se=[];return le&&(Se=this._generateOutline(ie)),this._ensureNoPoleVertices(),this._handlePoles(xe),{verticesFlattened:this._vertexBuffer,indicesTriangles:xe,indicesLineList:Se}}_convertIndices(ie,le){const pe=[];for(let ge=0;ge<le.length;ge++)pe.push(this._vertexToIndex(ie[2*le[ge]],ie[2*le[ge]+1]));return pe}_pointArrayToIndices(ie){const le=[];for(let pe=0;pe<ie.length;pe++){const ge=ie[pe];le.push(this._vertexToIndex(ge.x,ge.y))}return le}}function yd(ce,ie,le,pe=!0){return new sf(le,ie).subdividePolygonInternal(ce,pe)}function ta(ce,ie,le=!1){if(!ce||ce.length<1)return[];if(ce.length<2)return[];const pe=ce[0],ge=ce[ce.length-1],xe=le&&(pe.x!==ge.x||pe.y!==ge.y);if(ie<2)return xe?[...ce,ce[0]]:[...ce];const Se=Math.floor(je/ie),ke=[];ke.push(new me(ce[0].x,ce[0].y));const Le=ce.length,Ve=xe?Le:Le-1;for(let Ne=0;Ne<Ve;Ne++){const He=ce[Ne],et=Ne<Le-1?ce[Ne+1]:ce[0],nt=He.x,ot=He.y,ut=et.x,gt=et.y,St=nt!==ut,$t=ot!==gt;if(!St&&!$t)continue;const Et=ut-nt,zt=gt-ot,Ht=Math.abs(Et),rr=Math.abs(zt);let vr=nt,Ar=ot;for(;;){const Pr=Et>0?(Math.floor(vr/Se)+1)*Se:(Math.ceil(vr/Se)-1)*Se,jr=zt>0?(Math.floor(Ar/Se)+1)*Se:(Math.ceil(Ar/Se)-1)*Se,Tr=Math.abs(vr-Pr),Er=Math.abs(Ar-jr),pr=Math.abs(vr-ut),Kr=Math.abs(Ar-gt),ii=St?Tr/Ht:Number.POSITIVE_INFINITY,Hr=$t?Er/rr:Number.POSITIVE_INFINITY;if((pr<=Tr||!St)&&(Kr<=Er||!$t))break;if(ii<Hr&&St||!$t){vr=Pr,Ar+=zt*ii;const Or=new me(vr,Math.round(Ar));ke[ke.length-1].x===Or.x&&ke[ke.length-1].y===Or.y||ke.push(Or)}else{vr+=Et*Hr,Ar=jr;const Or=new me(Math.round(vr),Ar);ke[ke.length-1].x===Or.x&&ke[ke.length-1].y===Or.y||ke.push(Or)}}const Sr=new me(ut,gt);ke[ke.length-1].x===Sr.x&&ke[ke.length-1].y===Sr.y||ke.push(Sr)}return ke}function of(ce,ie,le){if(ie.length===0)throw new Error("Subdivision vertex ring is empty.");let pe=0,ge=ce[2*ie[0]];for(let Le=1;Le<ie.length;Le++){const Ve=ce[2*ie[Le]];Ve<ge&&(ge=Ve,pe=Le)}const xe=ie.length;let Se=pe,ke=(Se+1)%xe;for(;;){const Le=Se-1>=0?Se-1:xe-1,Ve=(ke+1)%xe,Ne=ce[2*ie[Le]],He=ce[2*ie[Ve]],et=ce[2*ie[Se]],nt=ce[2*ie[Se]+1],ot=ce[2*ie[ke]+1];let ut=!1;if(Ne<He)ut=!0;else if(Ne>He)ut=!1;else{const gt=ot-nt,St=-(ce[2*ie[ke]]-et),$t=nt<ot?1:-1;((Ne-et)*gt+(ce[2*ie[Le]+1]-nt)*St)*$t>((He-et)*gt+(ce[2*ie[Ve]+1]-nt)*St)*$t&&(ut=!0)}if(ut){const gt=ie[Le],St=ie[Se],$t=ie[ke];gt!==St&&gt!==$t&&St!==$t&&le.push($t,St,gt),Se--,Se<0&&(Se=xe-1)}else{const gt=ie[Ve],St=ie[Se],$t=ie[ke];gt!==St&&gt!==$t&&St!==$t&&le.push($t,St,gt),ke++,ke>=xe&&(ke=0)}if(Le===Ve)break}}function vd(ce,ie,le,pe,ge,xe,Se,ke,Le){const Ve=ge.length/2,Ne=Se&&ke&&Le;if(Ve<di.MAX_VERTEX_ARRAY_LENGTH){const He=ie.prepareSegment(Ve,le,pe),et=He.vertexLength;for(let ut=0;ut<xe.length;ut+=3)pe.emplaceBack(et+xe[ut],et+xe[ut+1],et+xe[ut+2]);let nt,ot;He.vertexLength+=Ve,He.primitiveLength+=xe.length/3,Ne&&(ot=Se.prepareSegment(Ve,le,ke),nt=ot.vertexLength,ot.vertexLength+=Ve);for(let ut=0;ut<ge.length;ut+=2)ce(ge[ut],ge[ut+1]);if(Ne)for(let ut=0;ut<Le.length;ut++){const gt=Le[ut];for(let St=1;St<gt.length;St+=2)ke.emplaceBack(nt+gt[St-1],nt+gt[St]);ot.primitiveLength+=gt.length/2}}else(function(He,et,nt,ot,ut,gt){const St=[];for(let rr=0;rr<ot.length/2;rr++)St.push(-1);const $t={count:0};let Et=0,zt=He.getOrCreateLatestSegment(et,nt),Ht=zt.vertexLength;for(let rr=2;rr<ut.length;rr+=3){const vr=ut[rr-2],Ar=ut[rr-1],Sr=ut[rr];let Pr=St[vr]<Et,jr=St[Ar]<Et,Tr=St[Sr]<Et;zt.vertexLength+((Pr?1:0)+(jr?1:0)+(Tr?1:0))>di.MAX_VERTEX_ARRAY_LENGTH&&(zt=He.createNewSegment(et,nt),Et=$t.count,Pr=!0,jr=!0,Tr=!0,Ht=0);const Er=cc(St,ot,gt,$t,vr,Pr,zt),pr=cc(St,ot,gt,$t,Ar,jr,zt),Kr=cc(St,ot,gt,$t,Sr,Tr,zt);nt.emplaceBack(Ht+Er-Et,Ht+pr-Et,Ht+Kr-Et),zt.primitiveLength++}})(ie,le,pe,ge,xe,ce),Ne&&function(He,et,nt,ot,ut,gt){const St=[];for(let rr=0;rr<ot.length/2;rr++)St.push(-1);const $t={count:0};let Et=0,zt=He.getOrCreateLatestSegment(et,nt),Ht=zt.vertexLength;for(let rr=0;rr<ut.length;rr++){const vr=ut[rr];for(let Ar=1;Ar<ut[rr].length;Ar+=2){const Sr=vr[Ar-1],Pr=vr[Ar];let jr=St[Sr]<Et,Tr=St[Pr]<Et;zt.vertexLength+((jr?1:0)+(Tr?1:0))>di.MAX_VERTEX_ARRAY_LENGTH&&(zt=He.createNewSegment(et,nt),Et=$t.count,jr=!0,Tr=!0,Ht=0);const Er=cc(St,ot,gt,$t,Sr,jr,zt),pr=cc(St,ot,gt,$t,Pr,Tr,zt);nt.emplaceBack(Ht+Er-Et,Ht+pr-Et),zt.primitiveLength++}}}(Se,le,ke,ge,Le,ce),ie.forceNewSegmentOnNextPrepare(),Se==null||Se.forceNewSegmentOnNextPrepare()}function cc(ce,ie,le,pe,ge,xe,Se){if(xe){const ke=pe.count;return le(ie[2*ge],ie[2*ge+1]),ce[ge]=pe.count,pe.count++,Se.vertexLength++,ke}return ce[ge]}class Su{constructor(ie){this.zoom=ie.zoom,this.overscaling=ie.overscaling,this.layers=ie.layers,this.layerIds=this.layers.map(le=>le.id),this.index=ie.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new Rt,this.indexArray=new ti,this.indexArray2=new Ti,this.programConfigurations=new Rs(ie.layers,ie.zoom),this.segments=new di,this.segments2=new di,this.stateDependentLayerIds=this.layers.filter(le=>le.isStateDependent()).map(le=>le.id)}populate(ie,le,pe){this.hasDependencies=Mh("fill",this.layers,le);const ge=this.layers[0].layout.get("fill-sort-key"),xe=!ge.isConstant(),Se=[];for(const{feature:ke,id:Le,index:Ve,sourceLayerIndex:Ne}of ie){const He=this.layers[0]._featureFilter.needGeometry,et=Qo(ke,He);if(!this.layers[0]._featureFilter.filter(new Li(this.zoom),et,pe))continue;const nt=xe?ge.evaluate(et,{},pe,le.availableImages):void 0,ot={id:Le,properties:ke.properties,type:ke.type,sourceLayerIndex:Ne,index:Ve,geometry:He?et.geometry:vs(ke),patterns:{},sortKey:nt};Se.push(ot)}xe&&Se.sort((ke,Le)=>ke.sortKey-Le.sortKey);for(const ke of Se){const{geometry:Le,index:Ve,sourceLayerIndex:Ne}=ke;if(this.hasDependencies){const He=bu("fill",this.layers,ke,{zoom:this.zoom},le);this.patternFeatures.push(He)}else this.addFeature(ke,Le,Ve,pe,{},le.subdivisionGranularity);le.featureIndex.insert(ie[Ve].feature,Le,Ve,Ne,this.index)}}update(ie,le,pe){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(ie,le,this.stateDependentLayers,{imagePositions:pe})}addFeatures(ie,le,pe){for(const ge of this.patternFeatures)this.addFeature(ge,ge.geometry,ge.index,le,pe,ie.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(ie){this.uploaded||(this.layoutVertexBuffer=ie.createVertexBuffer(this.layoutVertexArray,Zp),this.indexBuffer=ie.createIndexBuffer(this.indexArray),this.indexBuffer2=ie.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(ie),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(ie,le,pe,ge,xe,Se){for(const ke of lo(le,500)){const Le=yd(ke,ge,Se.fill.getGranularityForZoomLevel(ge.z)),Ve=this.layoutVertexArray;vd((Ne,He)=>{Ve.emplaceBack(Ne,He)},this.segments,this.layoutVertexArray,this.indexArray,Le.verticesFlattened,Le.indicesTriangles,this.segments2,this.indexArray2,Le.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,ie,pe,{imagePositions:xe,canonical:ge})}}let bd,xd;Rr("FillBucket",Su,{omit:["layers","patternFeatures"]});var af={get paint(){return xd=xd||new Fn({"fill-antialias":new Vr(Ot.paint_fill["fill-antialias"]),"fill-opacity":new Ur(Ot.paint_fill["fill-opacity"]),"fill-color":new Ur(Ot.paint_fill["fill-color"]),"fill-outline-color":new Ur(Ot.paint_fill["fill-outline-color"]),"fill-translate":new Vr(Ot.paint_fill["fill-translate"]),"fill-translate-anchor":new Vr(Ot.paint_fill["fill-translate-anchor"]),"fill-pattern":new To(Ot.paint_fill["fill-pattern"])})},get layout(){return bd=bd||new Fn({"fill-sort-key":new Ur(Ot.layout_fill["fill-sort-key"])})}};class lf extends es{constructor(ie,le){super(ie,af,le)}recalculate(ie,le){super.recalculate(ie,le);const pe=this.paint._values["fill-outline-color"];pe.value.kind==="constant"&&pe.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(ie){return new Su(ie)}queryRadius(){return Ph(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:ie,geometry:le,transform:pe,pixelsToTileUnits:ge}){return Qu(Eh(ie,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-pe.bearingInRadians,ge),le)}isTileClipped(){return!0}}const cf=Ki([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),hf=Ki([{name:"a_centroid",components:2,type:"Int16"}],4),{members:uf}=cf;class rl{constructor(ie,le,pe,ge,xe){this.properties={},this.extent=pe,this.type=0,this.id=void 0,this._pbf=ie,this._geometry=-1,this._keys=ge,this._values=xe,ie.readFields(df,this,le)}loadGeometry(){const ie=this._pbf;ie.pos=this._geometry;const le=ie.readVarint()+ie.pos,pe=[];let ge,xe=1,Se=0,ke=0,Le=0;for(;ie.pos<le;){if(Se<=0){const Ve=ie.readVarint();xe=7&Ve,Se=Ve>>3}if(Se--,xe===1||xe===2)ke+=ie.readSVarint(),Le+=ie.readSVarint(),xe===1&&(ge&&pe.push(ge),ge=[]),ge&&ge.push(new me(ke,Le));else{if(xe!==7)throw new Error(`unknown command ${xe}`);ge&&ge.push(ge[0].clone())}}return ge&&pe.push(ge),pe}bbox(){const ie=this._pbf;ie.pos=this._geometry;const le=ie.readVarint()+ie.pos;let pe=1,ge=0,xe=0,Se=0,ke=1/0,Le=-1/0,Ve=1/0,Ne=-1/0;for(;ie.pos<le;){if(ge<=0){const He=ie.readVarint();pe=7&He,ge=He>>3}if(ge--,pe===1||pe===2)xe+=ie.readSVarint(),Se+=ie.readSVarint(),xe<ke&&(ke=xe),xe>Le&&(Le=xe),Se<Ve&&(Ve=Se),Se>Ne&&(Ne=Se);else if(pe!==7)throw new Error(`unknown command ${pe}`)}return[ke,Ve,Le,Ne]}toGeoJSON(ie,le,pe){const ge=this.extent*Math.pow(2,pe),xe=this.extent*ie,Se=this.extent*le,ke=this.loadGeometry();function Le(et){return[360*(et.x+xe)/ge-180,360/Math.PI*Math.atan(Math.exp((1-2*(et.y+Se)/ge)*Math.PI))-90]}function Ve(et){return et.map(Le)}let Ne;if(this.type===1){const et=[];for(const ot of ke)et.push(ot[0]);const nt=Ve(et);Ne=et.length===1?{type:"Point",coordinates:nt[0]}:{type:"MultiPoint",coordinates:nt}}else if(this.type===2){const et=ke.map(Ve);Ne=et.length===1?{type:"LineString",coordinates:et[0]}:{type:"MultiLineString",coordinates:et}}else{if(this.type!==3)throw new Error("unknown feature type");{const et=function(ot){const ut=ot.length;if(ut<=1)return[ot];const gt=[];let St,$t;for(let Et=0;Et<ut;Et++){const zt=pf(ot[Et]);zt!==0&&($t===void 0&&($t=zt<0),$t===zt<0?(St&&gt.push(St),St=[ot[Et]]):St&&St.push(ot[Et]))}return St&&gt.push(St),gt}(ke),nt=[];for(const ot of et)nt.push(ot.map(Ve));Ne=nt.length===1?{type:"Polygon",coordinates:nt[0]}:{type:"MultiPolygon",coordinates:nt}}}const He={type:"Feature",geometry:Ne,properties:this.properties};return this.id!=null&&(He.id=this.id),He}}function df(ce,ie,le){ce===1?ie.id=le.readVarint():ce===2?function(pe,ge){const xe=pe.readVarint()+pe.pos;for(;pe.pos<xe;){const Se=ge._keys[pe.readVarint()],ke=ge._values[pe.readVarint()];ge.properties[Se]=ke}}(le,ie):ce===3?ie.type=le.readVarint():ce===4&&(ie._geometry=le.pos)}function pf(ce){let ie=0;for(let le,pe,ge=0,xe=ce.length,Se=xe-1;ge<xe;Se=ge++)le=ce[ge],pe=ce[Se],ie+=(pe.x-le.x)*(le.y+pe.y);return ie}rl.types=["Unknown","Point","LineString","Polygon"];class wd{constructor(ie,le){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=ie,this._keys=[],this._values=[],this._features=[],ie.readFields(ff,this,le),this.length=this._features.length}feature(ie){if(ie<0||ie>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[ie];const le=this._pbf.readVarint()+this._pbf.pos;return new rl(this._pbf,le,this.extent,this._keys,this._values)}}function ff(ce,ie,le){ce===15?ie.version=le.readVarint():ce===1?ie.name=le.readString():ce===5?ie.extent=le.readVarint():ce===2?ie._features.push(le.pos):ce===3?ie._keys.push(le.readString()):ce===4&&ie._values.push(function(pe){let ge=null;const xe=pe.readVarint()+pe.pos;for(;pe.pos<xe;){const Se=pe.readVarint()>>3;ge=Se===1?pe.readString():Se===2?pe.readFloat():Se===3?pe.readDouble():Se===4?pe.readVarint64():Se===5?pe.readVarint():Se===6?pe.readSVarint():Se===7?pe.readBoolean():null}if(ge==null)throw new Error("unknown feature value");return ge}(le))}class Sd{constructor(ie,le){this.layers=ie.readFields(mf,{},le)}}function mf(ce,ie,le){if(ce===3){const pe=new wd(le,le.readVarint()+le.pos);pe.length&&(ie[pe.name]=pe)}}const Tu=Math.pow(2,13);function hc(ce,ie,le,pe,ge,xe,Se,ke){ce.emplaceBack(ie,le,2*Math.floor(pe*Tu)+Se,ge*Tu*2,xe*Tu*2,Math.round(ke))}class Cu{constructor(ie){this.zoom=ie.zoom,this.overscaling=ie.overscaling,this.layers=ie.layers,this.layerIds=this.layers.map(le=>le.id),this.index=ie.index,this.hasDependencies=!1,this.layoutVertexArray=new Pt,this.centroidVertexArray=new Tt,this.indexArray=new ti,this.programConfigurations=new Rs(ie.layers,ie.zoom),this.segments=new di,this.stateDependentLayerIds=this.layers.filter(le=>le.isStateDependent()).map(le=>le.id)}populate(ie,le,pe){this.features=[],this.hasDependencies=Mh("fill-extrusion",this.layers,le);for(const{feature:ge,id:xe,index:Se,sourceLayerIndex:ke}of ie){const Le=this.layers[0]._featureFilter.needGeometry,Ve=Qo(ge,Le);if(!this.layers[0]._featureFilter.filter(new Li(this.zoom),Ve,pe))continue;const Ne={id:xe,sourceLayerIndex:ke,index:Se,geometry:Le?Ve.geometry:vs(ge),properties:ge.properties,type:ge.type,patterns:{}};this.hasDependencies?this.features.push(bu("fill-extrusion",this.layers,Ne,{zoom:this.zoom},le)):this.addFeature(Ne,Ne.geometry,Se,pe,{},le.subdivisionGranularity),le.featureIndex.insert(ge,Ne.geometry,Se,ke,this.index,!0)}}addFeatures(ie,le,pe){for(const ge of this.features){const{geometry:xe}=ge;this.addFeature(ge,xe,ge.index,le,pe,ie.subdivisionGranularity)}}update(ie,le,pe){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(ie,le,this.stateDependentLayers,{imagePositions:pe})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(ie){this.uploaded||(this.layoutVertexBuffer=ie.createVertexBuffer(this.layoutVertexArray,uf),this.centroidVertexBuffer=ie.createVertexBuffer(this.centroidVertexArray,hf.members,!0),this.indexBuffer=ie.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(ie),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(ie,le,pe,ge,xe,Se){for(const ke of lo(le,500)){const Le={x:0,y:0,sampleCount:0},Ve=this.layoutVertexArray.length;this.processPolygon(Le,ge,ie,ke,Se);const Ne=this.layoutVertexArray.length-Ve,He=Math.floor(Le.x/Le.sampleCount),et=Math.floor(Le.y/Le.sampleCount);for(let nt=0;nt<Ne;nt++)this.centroidVertexArray.emplaceBack(He,et)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,ie,pe,{imagePositions:xe,canonical:ge})}processPolygon(ie,le,pe,ge,xe){if(ge.length<1||Td(ge[0]))return;for(const He of ge)He.length!==0&&gf(ie,He);const Se={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},ke=xe.fill.getGranularityForZoomLevel(le.z),Le=rl.types[pe.type]==="Polygon";for(const He of ge){if(He.length===0||Td(He))continue;const et=ta(He,ke,Le);this._generateSideFaces(et,Se)}if(!Le)return;const Ve=yd(ge,le,ke,!1),Ne=this.layoutVertexArray;vd((He,et)=>{hc(Ne,He,et,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,Ve.verticesFlattened,Ve.indicesTriangles)}_generateSideFaces(ie,le){let pe=0;for(let ge=1;ge<ie.length;ge++){const xe=ie[ge],Se=ie[ge-1];if(_f(xe,Se))continue;le.segment.vertexLength+4>di.MAX_VERTEX_ARRAY_LENGTH&&(le.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const ke=xe.sub(Se)._perp()._unit(),Le=Se.dist(xe);pe+Le>32768&&(pe=0),hc(this.layoutVertexArray,xe.x,xe.y,ke.x,ke.y,0,0,pe),hc(this.layoutVertexArray,xe.x,xe.y,ke.x,ke.y,0,1,pe),pe+=Le,hc(this.layoutVertexArray,Se.x,Se.y,ke.x,ke.y,0,0,pe),hc(this.layoutVertexArray,Se.x,Se.y,ke.x,ke.y,0,1,pe);const Ve=le.segment.vertexLength;this.indexArray.emplaceBack(Ve,Ve+2,Ve+1),this.indexArray.emplaceBack(Ve+1,Ve+2,Ve+3),le.segment.vertexLength+=4,le.segment.primitiveLength+=2}}}function gf(ce,ie){for(let le=0;le<ie.length;le++){const pe=ie[le];le===ie.length-1&&ie[0].x===pe.x&&ie[0].y===pe.y||(ce.x+=pe.x,ce.y+=pe.y,ce.sampleCount++)}}function _f(ce,ie){return ce.x===ie.x&&(ce.x<0||ce.x>je)||ce.y===ie.y&&(ce.y<0||ce.y>je)}function Td(ce){return ce.every(ie=>ie.x<0)||ce.every(ie=>ie.x>je)||ce.every(ie=>ie.y<0)||ce.every(ie=>ie.y>je)}let Cd;Rr("FillExtrusionBucket",Cu,{omit:["layers","features"]});var yf={get paint(){return Cd=Cd||new Fn({"fill-extrusion-opacity":new Vr(Ot["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ur(Ot["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Vr(Ot["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Vr(Ot["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new To(Ot["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ur(Ot["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ur(Ot["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Vr(Ot["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class vf extends es{constructor(ie,le){super(ie,yf,le)}createBucket(ie){return new Cu(ie)}queryRadius(){return Ph(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:ie,feature:le,featureState:pe,geometry:ge,transform:xe,pixelsToTileUnits:Se,pixelPosMatrix:ke}){const Le=Eh(ie,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-xe.bearingInRadians,Se),Ve=this.paint.get("fill-extrusion-height").evaluate(le,pe),Ne=this.paint.get("fill-extrusion-base").evaluate(le,pe),He=function(nt,ot){const ut=[];for(const gt of nt){const St=[gt.x,gt.y,0,1];At(St,St,ot),ut.push(new me(St[0]/St[3],St[1]/St[3]))}return ut}(Le,ke),et=function(nt,ot,ut,gt){const St=[],$t=[],Et=gt[8]*ot,zt=gt[9]*ot,Ht=gt[10]*ot,rr=gt[11]*ot,vr=gt[8]*ut,Ar=gt[9]*ut,Sr=gt[10]*ut,Pr=gt[11]*ut;for(const jr of nt){const Tr=[],Er=[];for(const pr of jr){const Kr=pr.x,ii=pr.y,Hr=gt[0]*Kr+gt[4]*ii+gt[12],Or=gt[1]*Kr+gt[5]*ii+gt[13],bi=gt[2]*Kr+gt[6]*ii+gt[14],Ji=gt[3]*Kr+gt[7]*ii+gt[15],hn=bi+Ht,Ln=Ji+rr,is=Hr+vr,Gn=Or+Ar,Tn=bi+Sr,Zi=Ji+Pr,_n=new me((Hr+Et)/Ln,(Or+zt)/Ln);_n.z=hn/Ln,Tr.push(_n);const Cn=new me(is/Zi,Gn/Zi);Cn.z=Tn/Zi,Er.push(Cn)}St.push(Tr),$t.push(Er)}return[St,$t]}(ge,Ne,Ve,ke);return function(nt,ot,ut){let gt=1/0;Qu(ut,ot)&&(gt=Pd(ut,ot[0]));for(let St=0;St<ot.length;St++){const $t=ot[St],Et=nt[St];for(let zt=0;zt<$t.length-1;zt++){const Ht=$t[zt],rr=[Ht,$t[zt+1],Et[zt+1],Et[zt],Ht];Ju(ut,rr)&&(gt=Math.min(gt,Pd(ut,rr)))}}return gt!==1/0&&gt}(et[0],et[1],He)}}function uc(ce,ie){return ce.x*ie.x+ce.y*ie.y}function Pd(ce,ie){if(ce.length===1){let le=0;const pe=ie[le++];let ge;for(;!ge||pe.equals(ge);)if(ge=ie[le++],!ge)return 1/0;for(;le<ie.length;le++){const xe=ie[le],Se=ce[0],ke=ge.sub(pe),Le=xe.sub(pe),Ve=Se.sub(pe),Ne=uc(ke,ke),He=uc(ke,Le),et=uc(Le,Le),nt=uc(Ve,ke),ot=uc(Ve,Le),ut=Ne*et-He*He,gt=(et*nt-He*ot)/ut,St=(Ne*ot-He*nt)/ut,$t=pe.z*(1-gt-St)+ge.z*gt+xe.z*St;if(isFinite($t))return $t}return 1/0}{let le=1/0;for(const pe of ie)le=Math.min(le,pe.z);return le}}const bf=Ki([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:xf}=bf,wf=Ki([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Sf}=wf,Tf=Math.cos(Math.PI/180*37.5),Ed=Math.pow(2,14)/.5;class Pu{constructor(ie){this.zoom=ie.zoom,this.overscaling=ie.overscaling,this.layers=ie.layers,this.layerIds=this.layers.map(le=>le.id),this.index=ie.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(le=>{this.gradients[le.id]={}}),this.layoutVertexArray=new Nt,this.layoutVertexArray2=new Yt,this.indexArray=new ti,this.programConfigurations=new Rs(ie.layers,ie.zoom),this.segments=new di,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(le=>le.isStateDependent()).map(le=>le.id)}populate(ie,le,pe){this.hasDependencies=Mh("line",this.layers,le)||this.hasLineDasharray(this.layers);const ge=this.layers[0].layout.get("line-sort-key"),xe=!ge.isConstant(),Se=[];for(const{feature:ke,id:Le,index:Ve,sourceLayerIndex:Ne}of ie){const He=this.layers[0]._featureFilter.needGeometry,et=Qo(ke,He);if(!this.layers[0]._featureFilter.filter(new Li(this.zoom),et,pe))continue;const nt=xe?ge.evaluate(et,{},pe):void 0,ot={id:Le,properties:ke.properties,type:ke.type,sourceLayerIndex:Ne,index:Ve,geometry:He?et.geometry:vs(ke),patterns:{},dashes:{},sortKey:nt};Se.push(ot)}xe&&Se.sort((ke,Le)=>ke.sortKey-Le.sortKey);for(const ke of Se){const{geometry:Le,index:Ve,sourceLayerIndex:Ne}=ke;this.hasDependencies?(Mh("line",this.layers,le)?bu("line",this.layers,ke,{zoom:this.zoom},le):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,ke,this.zoom,le),this.patternFeatures.push(ke)):this.addFeature(ke,Le,Ve,pe,{},{},le.subdivisionGranularity),le.featureIndex.insert(ie[Ve].feature,Le,Ve,Ne,this.index)}}update(ie,le,pe,ge){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(ie,le,this.stateDependentLayers,{imagePositions:pe,dashPositions:ge})}addFeatures(ie,le,pe,ge){for(const xe of this.patternFeatures)this.addFeature(xe,xe.geometry,xe.index,le,pe,ge,ie.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(ie){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=ie.createVertexBuffer(this.layoutVertexArray2,Sf)),this.layoutVertexBuffer=ie.createVertexBuffer(this.layoutVertexArray,xf),this.indexBuffer=ie.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(ie),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(ie){if(ie.properties&&Object.prototype.hasOwnProperty.call(ie.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(ie.properties,"mapbox_clip_end"))return{start:+ie.properties.mapbox_clip_start,end:+ie.properties.mapbox_clip_end}}addFeature(ie,le,pe,ge,xe,Se,ke){const Le=this.layers[0].layout,Ve=Le.get("line-join").evaluate(ie,{}),Ne=Le.get("line-cap"),He=Le.get("line-miter-limit"),et=Le.get("line-round-limit");this.lineClips=this.lineFeatureClips(ie);for(const nt of le)this.addLine(nt,ie,Ve,Ne,He,et,ge,ke);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,ie,pe,{imagePositions:xe,dashPositions:Se,canonical:ge})}addLine(ie,le,pe,ge,xe,Se,ke,Le){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,ie=ta(ie,ke?Le.line.getGranularityForZoomLevel(ke.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Et=0;Et<ie.length-1;Et++)this.totalDistance+=ie[Et].dist(ie[Et+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const Ve=rl.types[le.type]==="Polygon";let Ne=ie.length;for(;Ne>=2&&ie[Ne-1].equals(ie[Ne-2]);)Ne--;let He=0;for(;He<Ne-1&&ie[He].equals(ie[He+1]);)He++;if(Ne<(Ve?3:2))return;pe==="bevel"&&(xe=1.05);const et=this.overscaling<=16?122880/(512*this.overscaling):0,nt=this.segments.prepareSegment(10*Ne,this.layoutVertexArray,this.indexArray);let ot,ut,gt,St,$t;this.e1=this.e2=-1,Ve&&(ot=ie[Ne-2],$t=ie[He].sub(ot)._unit()._perp());for(let Et=He;Et<Ne;Et++){if(gt=Et===Ne-1?Ve?ie[He+1]:void 0:ie[Et+1],gt&&ie[Et].equals(gt))continue;$t&&(St=$t),ot&&(ut=ot),ot=ie[Et],$t=gt?gt.sub(ot)._unit()._perp():St,St=St||$t;let zt=St.add($t);zt.x===0&&zt.y===0||zt._unit();const Ht=St.x*$t.x+St.y*$t.y,rr=zt.x*$t.x+zt.y*$t.y,vr=rr!==0?1/rr:1/0,Ar=2*Math.sqrt(2-2*rr),Sr=rr<Tf&&ut&&gt,Pr=St.x*$t.y-St.y*$t.x>0;if(Sr&&Et>He){const Er=ot.dist(ut);if(Er>2*et){const pr=ot.sub(ot.sub(ut)._mult(et/Er)._round());this.updateDistance(ut,pr),this.addCurrentVertex(pr,St,0,0,nt),ut=pr}}const jr=ut&&gt;let Tr=jr?pe:Ve?"butt":ge;if(jr&&Tr==="round"&&(vr<Se?Tr="miter":vr<=2&&(Tr="fakeround")),Tr==="miter"&&vr>xe&&(Tr="bevel"),Tr==="bevel"&&(vr>2&&(Tr="flipbevel"),vr<xe&&(Tr="miter")),ut&&this.updateDistance(ut,ot),Tr==="miter")zt._mult(vr),this.addCurrentVertex(ot,zt,0,0,nt);else if(Tr==="flipbevel"){if(vr>100)zt=$t.mult(-1);else{const Er=vr*St.add($t).mag()/St.sub($t).mag();zt._perp()._mult(Er*(Pr?-1:1))}this.addCurrentVertex(ot,zt,0,0,nt),this.addCurrentVertex(ot,zt.mult(-1),0,0,nt)}else if(Tr==="bevel"||Tr==="fakeround"){const Er=-Math.sqrt(vr*vr-1),pr=Pr?Er:0,Kr=Pr?0:Er;if(ut&&this.addCurrentVertex(ot,St,pr,Kr,nt),Tr==="fakeround"){const ii=Math.round(180*Ar/Math.PI/20);for(let Hr=1;Hr<ii;Hr++){let Or=Hr/ii;if(Or!==.5){const Ji=Or-.5;Or+=Or*Ji*(Or-1)*((1.0904+Ht*(Ht*(3.55645-1.43519*Ht)-3.2452))*Ji*Ji+(.848013+Ht*(.215638*Ht-1.06021)))}const bi=$t.sub(St)._mult(Or)._add(St)._unit()._mult(Pr?-1:1);this.addHalfVertex(ot,bi.x,bi.y,!1,Pr,0,nt)}}gt&&this.addCurrentVertex(ot,$t,-pr,-Kr,nt)}else if(Tr==="butt")this.addCurrentVertex(ot,zt,0,0,nt);else if(Tr==="square"){const Er=ut?1:-1;this.addCurrentVertex(ot,zt,Er,Er,nt)}else Tr==="round"&&(ut&&(this.addCurrentVertex(ot,St,0,0,nt),this.addCurrentVertex(ot,St,1,1,nt,!0)),gt&&(this.addCurrentVertex(ot,$t,-1,-1,nt,!0),this.addCurrentVertex(ot,$t,0,0,nt)));if(Sr&&Et<Ne-1){const Er=ot.dist(gt);if(Er>2*et){const pr=ot.add(gt.sub(ot)._mult(et/Er)._round());this.updateDistance(ot,pr),this.addCurrentVertex(pr,$t,0,0,nt),ot=pr}}}}addCurrentVertex(ie,le,pe,ge,xe,Se=!1){const ke=le.y*ge-le.x,Le=-le.y-le.x*ge;this.addHalfVertex(ie,le.x+le.y*pe,le.y-le.x*pe,Se,!1,pe,xe),this.addHalfVertex(ie,ke,Le,Se,!0,-ge,xe),this.distance>Ed/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(ie,le,pe,ge,xe,Se))}addHalfVertex({x:ie,y:le},pe,ge,xe,Se,ke,Le){const Ve=.5*(this.lineClips?this.scaledDistance*(Ed-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((ie<<1)+(xe?1:0),(le<<1)+(Se?1:0),Math.round(63*pe)+128,Math.round(63*ge)+128,1+(ke===0?0:ke<0?-1:1)|(63&Ve)<<2,Ve>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Ne=Le.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,Ne,this.e2),Le.primitiveLength++),Se?this.e2=Ne:this.e1=Ne}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(ie,le){this.distance+=ie.dist(le),this.updateScaledDistance()}hasLineDasharray(ie){for(const le of ie){const pe=le.paint.get("line-dasharray");if(pe&&!pe.isConstant())return!0}return!1}addLineDashDependencies(ie,le,pe,ge){for(const xe of ie){const Se=xe.paint.get("line-dasharray");if(!Se||Se.value.kind==="constant")continue;const ke=xe.layout.get("line-cap")==="round",Le={dasharray:Se.value.evaluate({zoom:pe-1},le,{}),round:ke},Ve={dasharray:Se.value.evaluate({zoom:pe},le,{}),round:ke},Ne={dasharray:Se.value.evaluate({zoom:pe+1},le,{}),round:ke},He=`${Le.dasharray.join(",")},${Le.round}`,et=`${Ve.dasharray.join(",")},${Ve.round}`,nt=`${Ne.dasharray.join(",")},${Ne.round}`;ge.dashDependencies[He]=Le,ge.dashDependencies[et]=Ve,ge.dashDependencies[nt]=Ne,le.dashes[xe.id]={min:He,mid:et,max:nt}}}}let Md,Ad;Rr("LineBucket",Pu,{omit:["layers","patternFeatures"]});var kd={get paint(){return Ad=Ad||new Fn({"line-opacity":new Ur(Ot.paint_line["line-opacity"]),"line-color":new Ur(Ot.paint_line["line-color"]),"line-translate":new Vr(Ot.paint_line["line-translate"]),"line-translate-anchor":new Vr(Ot.paint_line["line-translate-anchor"]),"line-width":new Ur(Ot.paint_line["line-width"]),"line-gap-width":new Ur(Ot.paint_line["line-gap-width"]),"line-offset":new Ur(Ot.paint_line["line-offset"]),"line-blur":new Ur(Ot.paint_line["line-blur"]),"line-dasharray":new To(Ot.paint_line["line-dasharray"]),"line-pattern":new To(Ot.paint_line["line-pattern"]),"line-gradient":new Uo(Ot.paint_line["line-gradient"])})},get layout(){return Md=Md||new Fn({"line-cap":new Vr(Ot.layout_line["line-cap"]),"line-join":new Ur(Ot.layout_line["line-join"]),"line-miter-limit":new Vr(Ot.layout_line["line-miter-limit"]),"line-round-limit":new Vr(Ot.layout_line["line-round-limit"]),"line-sort-key":new Ur(Ot.layout_line["line-sort-key"])})}};class Cf extends Ur{possiblyEvaluate(ie,le){return le=new Li(Math.floor(le.zoom),{now:le.now,fadeDuration:le.fadeDuration,zoomHistory:le.zoomHistory,transition:le.transition}),super.possiblyEvaluate(ie,le)}evaluate(ie,le,pe,ge){return le=Nr({},le,{zoom:Math.floor(le.zoom)}),super.evaluate(ie,le,pe,ge)}}let Lh;class Pf extends es{constructor(ie,le){super(ie,kd,le),this.gradientVersion=0,Lh||(Lh=new Cf(kd.paint.properties["line-width"].specification),Lh.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(ie){if(ie==="line-gradient"){const le=this.gradientExpression();this.stepInterpolant=!!function(pe){return pe._styleExpression!==void 0}(le)&&le._styleExpression.expression instanceof Ts,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(ie,le){super.recalculate(ie,le),this.paint._values["line-floorwidth"]=Lh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,ie)}createBucket(ie){return new Pu(ie)}queryRadius(ie){const le=ie,pe=Id(Ja("line-width",this,le),Ja("line-gap-width",this,le)),ge=Ja("line-offset",this,le);return pe/2+Math.abs(ge)+Ph(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:ie,feature:le,featureState:pe,geometry:ge,transform:xe,pixelsToTileUnits:Se}){const ke=Eh(ie,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-xe.bearingInRadians,Se),Le=Se/2*Id(this.paint.get("line-width").evaluate(le,pe),this.paint.get("line-gap-width").evaluate(le,pe)),Ve=this.paint.get("line-offset").evaluate(le,pe);return Ve&&(ge=function(Ne,He){const et=[];for(let nt=0;nt<Ne.length;nt++){const ot=Ne[nt],ut=[];for(let gt=0;gt<ot.length;gt++){const St=ot[gt-1],$t=ot[gt],Et=ot[gt+1],zt=gt===0?new me(0,0):$t.sub(St)._unit()._perp(),Ht=gt===ot.length-1?new me(0,0):Et.sub($t)._unit()._perp(),rr=zt._add(Ht)._unit(),vr=rr.x*Ht.x+rr.y*Ht.y;vr!==0&&rr._mult(1/vr),ut.push(rr._mult(He)._add($t))}et.push(ut)}return et}(ge,Ve*Se)),function(Ne,He,et){for(let nt=0;nt<He.length;nt++){const ot=He[nt];if(Ne.length>=3){for(let ut=0;ut<ot.length;ut++)if(Ka(Ne,ot[ut]))return!0}if(Lp(Ne,ot,et))return!0}return!1}(ke,ge,Le)}isTileClipped(){return!0}}function Id(ce,ie){return ie>0?ie+2*ce:ce}const Ef=Ki([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Mf=Ki([{name:"a_projected_pos",components:3,type:"Float32"}],4);Ki([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Af=Ki([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Ki([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Ld=Ki([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),kf=Ki([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function If(ce,ie,le){return ce.sections.forEach(pe=>{pe.text=function(ge,xe,Se){const ke=xe.layout.get("text-transform").evaluate(Se,{});return ke==="uppercase"?ge=ge.toLocaleUpperCase():ke==="lowercase"&&(ge=ge.toLocaleLowerCase()),_s.applyArabicShaping&&(ge=_s.applyArabicShaping(ge)),ge}(pe.text,ie,le)}),ce}Ki([{name:"triangle",components:3,type:"Uint16"}]),Ki([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ki([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Ki([{type:"Float32",name:"offsetX"}]),Ki([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Ki([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const dc={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var gn=24;const Eu=4294967296,zd=1/Eu,Rd=typeof TextDecoder=="undefined"?null:new TextDecoder("utf-8");class Mu{constructor(ie=new Uint8Array(16)){this.buf=ArrayBuffer.isView(ie)?ie:new Uint8Array(ie),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(ie,le,pe=this.length){for(;this.pos<pe;){const ge=this.readVarint(),xe=ge>>3,Se=this.pos;this.type=7&ge,ie(xe,le,this),this.pos===Se&&this.skip(ge)}return le}readMessage(ie,le){return this.readFields(ie,le,this.readVarint()+this.pos)}readFixed32(){const ie=this.dataView.getUint32(this.pos,!0);return this.pos+=4,ie}readSFixed32(){const ie=this.dataView.getInt32(this.pos,!0);return this.pos+=4,ie}readFixed64(){const ie=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*Eu;return this.pos+=8,ie}readSFixed64(){const ie=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*Eu;return this.pos+=8,ie}readFloat(){const ie=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,ie}readDouble(){const ie=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,ie}readVarint(ie){const le=this.buf;let pe,ge;return ge=le[this.pos++],pe=127&ge,ge<128?pe:(ge=le[this.pos++],pe|=(127&ge)<<7,ge<128?pe:(ge=le[this.pos++],pe|=(127&ge)<<14,ge<128?pe:(ge=le[this.pos++],pe|=(127&ge)<<21,ge<128?pe:(ge=le[this.pos],pe|=(15&ge)<<28,function(xe,Se,ke){const Le=ke.buf;let Ve,Ne;if(Ne=Le[ke.pos++],Ve=(112&Ne)>>4,Ne<128||(Ne=Le[ke.pos++],Ve|=(127&Ne)<<3,Ne<128)||(Ne=Le[ke.pos++],Ve|=(127&Ne)<<10,Ne<128)||(Ne=Le[ke.pos++],Ve|=(127&Ne)<<17,Ne<128)||(Ne=Le[ke.pos++],Ve|=(127&Ne)<<24,Ne<128)||(Ne=Le[ke.pos++],Ve|=(1&Ne)<<31,Ne<128))return il(xe,Ve,Se);throw new Error("Expected varint not more than 10 bytes")}(pe,ie,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const ie=this.readVarint();return ie%2==1?(ie+1)/-2:ie/2}readBoolean(){return Boolean(this.readVarint())}readString(){const ie=this.readVarint()+this.pos,le=this.pos;return this.pos=ie,ie-le>=12&&Rd?Rd.decode(this.buf.subarray(le,ie)):function(pe,ge,xe){let Se="",ke=ge;for(;ke<xe;){const Le=pe[ke];let Ve,Ne,He,et=null,nt=Le>239?4:Le>223?3:Le>191?2:1;if(ke+nt>xe)break;nt===1?Le<128&&(et=Le):nt===2?(Ve=pe[ke+1],(192&Ve)==128&&(et=(31&Le)<<6|63&Ve,et<=127&&(et=null))):nt===3?(Ve=pe[ke+1],Ne=pe[ke+2],(192&Ve)==128&&(192&Ne)==128&&(et=(15&Le)<<12|(63&Ve)<<6|63&Ne,(et<=2047||et>=55296&&et<=57343)&&(et=null))):nt===4&&(Ve=pe[ke+1],Ne=pe[ke+2],He=pe[ke+3],(192&Ve)==128&&(192&Ne)==128&&(192&He)==128&&(et=(15&Le)<<18|(63&Ve)<<12|(63&Ne)<<6|63&He,(et<=65535||et>=1114112)&&(et=null))),et===null?(et=65533,nt=1):et>65535&&(et-=65536,Se+=String.fromCharCode(et>>>10&1023|55296),et=56320|1023&et),Se+=String.fromCharCode(et),ke+=nt}return Se}(this.buf,le,ie)}readBytes(){const ie=this.readVarint()+this.pos,le=this.buf.subarray(this.pos,ie);return this.pos=ie,le}readPackedVarint(ie=[],le){const pe=this.readPackedEnd();for(;this.pos<pe;)ie.push(this.readVarint(le));return ie}readPackedSVarint(ie=[]){const le=this.readPackedEnd();for(;this.pos<le;)ie.push(this.readSVarint());return ie}readPackedBoolean(ie=[]){const le=this.readPackedEnd();for(;this.pos<le;)ie.push(this.readBoolean());return ie}readPackedFloat(ie=[]){const le=this.readPackedEnd();for(;this.pos<le;)ie.push(this.readFloat());return ie}readPackedDouble(ie=[]){const le=this.readPackedEnd();for(;this.pos<le;)ie.push(this.readDouble());return ie}readPackedFixed32(ie=[]){const le=this.readPackedEnd();for(;this.pos<le;)ie.push(this.readFixed32());return ie}readPackedSFixed32(ie=[]){const le=this.readPackedEnd();for(;this.pos<le;)ie.push(this.readSFixed32());return ie}readPackedFixed64(ie=[]){const le=this.readPackedEnd();for(;this.pos<le;)ie.push(this.readFixed64());return ie}readPackedSFixed64(ie=[]){const le=this.readPackedEnd();for(;this.pos<le;)ie.push(this.readSFixed64());return ie}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(ie){const le=7&ie;if(le===0)for(;this.buf[this.pos++]>127;);else if(le===2)this.pos=this.readVarint()+this.pos;else if(le===5)this.pos+=4;else{if(le!==1)throw new Error(`Unimplemented type: ${le}`);this.pos+=8}}writeTag(ie,le){this.writeVarint(ie<<3|le)}realloc(ie){let le=this.length||16;for(;le<this.pos+ie;)le*=2;if(le!==this.length){const pe=new Uint8Array(le);pe.set(this.buf),this.buf=pe,this.dataView=new DataView(pe.buffer),this.length=le}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(ie){this.realloc(4),this.dataView.setInt32(this.pos,ie,!0),this.pos+=4}writeSFixed32(ie){this.realloc(4),this.dataView.setInt32(this.pos,ie,!0),this.pos+=4}writeFixed64(ie){this.realloc(8),this.dataView.setInt32(this.pos,-1&ie,!0),this.dataView.setInt32(this.pos+4,Math.floor(ie*zd),!0),this.pos+=8}writeSFixed64(ie){this.realloc(8),this.dataView.setInt32(this.pos,-1&ie,!0),this.dataView.setInt32(this.pos+4,Math.floor(ie*zd),!0),this.pos+=8}writeVarint(ie){(ie=+ie||0)>268435455||ie<0?function(le,pe){let ge,xe;if(le>=0?(ge=le%4294967296|0,xe=le/4294967296|0):(ge=~(-le%4294967296),xe=~(-le/4294967296),4294967295^ge?ge=ge+1|0:(ge=0,xe=xe+1|0)),le>=18446744073709552e3||le<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");pe.realloc(10),function(Se,ke,Le){Le.buf[Le.pos++]=127&Se|128,Se>>>=7,Le.buf[Le.pos++]=127&Se|128,Se>>>=7,Le.buf[Le.pos++]=127&Se|128,Se>>>=7,Le.buf[Le.pos++]=127&Se|128,Le.buf[Le.pos]=127&(Se>>>=7)}(ge,0,pe),function(Se,ke){const Le=(7&Se)<<4;ke.buf[ke.pos++]|=Le|((Se>>>=3)?128:0),Se&&(ke.buf[ke.pos++]=127&Se|((Se>>>=7)?128:0),Se&&(ke.buf[ke.pos++]=127&Se|((Se>>>=7)?128:0),Se&&(ke.buf[ke.pos++]=127&Se|((Se>>>=7)?128:0),Se&&(ke.buf[ke.pos++]=127&Se|((Se>>>=7)?128:0),Se&&(ke.buf[ke.pos++]=127&Se)))))}(xe,pe)}(ie,this):(this.realloc(4),this.buf[this.pos++]=127&ie|(ie>127?128:0),ie<=127||(this.buf[this.pos++]=127&(ie>>>=7)|(ie>127?128:0),ie<=127||(this.buf[this.pos++]=127&(ie>>>=7)|(ie>127?128:0),ie<=127||(this.buf[this.pos++]=ie>>>7&127))))}writeSVarint(ie){this.writeVarint(ie<0?2*-ie-1:2*ie)}writeBoolean(ie){this.writeVarint(+ie)}writeString(ie){ie=String(ie),this.realloc(4*ie.length),this.pos++;const le=this.pos;this.pos=function(ge,xe,Se){for(let ke,Le,Ve=0;Ve<xe.length;Ve++){if(ke=xe.charCodeAt(Ve),ke>55295&&ke<57344){if(!Le){ke>56319||Ve+1===xe.length?(ge[Se++]=239,ge[Se++]=191,ge[Se++]=189):Le=ke;continue}if(ke<56320){ge[Se++]=239,ge[Se++]=191,ge[Se++]=189,Le=ke;continue}ke=Le-55296<<10|ke-56320|65536,Le=null}else Le&&(ge[Se++]=239,ge[Se++]=191,ge[Se++]=189,Le=null);ke<128?ge[Se++]=ke:(ke<2048?ge[Se++]=ke>>6|192:(ke<65536?ge[Se++]=ke>>12|224:(ge[Se++]=ke>>18|240,ge[Se++]=ke>>12&63|128),ge[Se++]=ke>>6&63|128),ge[Se++]=63&ke|128)}return Se}(this.buf,ie,this.pos);const pe=this.pos-le;pe>=128&&Fd(le,pe,this),this.pos=le-1,this.writeVarint(pe),this.pos+=pe}writeFloat(ie){this.realloc(4),this.dataView.setFloat32(this.pos,ie,!0),this.pos+=4}writeDouble(ie){this.realloc(8),this.dataView.setFloat64(this.pos,ie,!0),this.pos+=8}writeBytes(ie){const le=ie.length;this.writeVarint(le),this.realloc(le);for(let pe=0;pe<le;pe++)this.buf[this.pos++]=ie[pe]}writeRawMessage(ie,le){this.pos++;const pe=this.pos;ie(le,this);const ge=this.pos-pe;ge>=128&&Fd(pe,ge,this),this.pos=pe-1,this.writeVarint(ge),this.pos+=ge}writeMessage(ie,le,pe){this.writeTag(ie,2),this.writeRawMessage(le,pe)}writePackedVarint(ie,le){le.length&&this.writeMessage(ie,Lf,le)}writePackedSVarint(ie,le){le.length&&this.writeMessage(ie,zf,le)}writePackedBoolean(ie,le){le.length&&this.writeMessage(ie,Df,le)}writePackedFloat(ie,le){le.length&&this.writeMessage(ie,Rf,le)}writePackedDouble(ie,le){le.length&&this.writeMessage(ie,Ff,le)}writePackedFixed32(ie,le){le.length&&this.writeMessage(ie,Bf,le)}writePackedSFixed32(ie,le){le.length&&this.writeMessage(ie,Of,le)}writePackedFixed64(ie,le){le.length&&this.writeMessage(ie,Vf,le)}writePackedSFixed64(ie,le){le.length&&this.writeMessage(ie,Nf,le)}writeBytesField(ie,le){this.writeTag(ie,2),this.writeBytes(le)}writeFixed32Field(ie,le){this.writeTag(ie,5),this.writeFixed32(le)}writeSFixed32Field(ie,le){this.writeTag(ie,5),this.writeSFixed32(le)}writeFixed64Field(ie,le){this.writeTag(ie,1),this.writeFixed64(le)}writeSFixed64Field(ie,le){this.writeTag(ie,1),this.writeSFixed64(le)}writeVarintField(ie,le){this.writeTag(ie,0),this.writeVarint(le)}writeSVarintField(ie,le){this.writeTag(ie,0),this.writeSVarint(le)}writeStringField(ie,le){this.writeTag(ie,2),this.writeString(le)}writeFloatField(ie,le){this.writeTag(ie,5),this.writeFloat(le)}writeDoubleField(ie,le){this.writeTag(ie,1),this.writeDouble(le)}writeBooleanField(ie,le){this.writeVarintField(ie,+le)}}function il(ce,ie,le){return le?4294967296*ie+(ce>>>0):4294967296*(ie>>>0)+(ce>>>0)}function Fd(ce,ie,le){const pe=ie<=16383?1:ie<=2097151?2:ie<=268435455?3:Math.floor(Math.log(ie)/(7*Math.LN2));le.realloc(pe);for(let ge=le.pos-1;ge>=ce;ge--)le.buf[ge+pe]=le.buf[ge]}function Lf(ce,ie){for(let le=0;le<ce.length;le++)ie.writeVarint(ce[le])}function zf(ce,ie){for(let le=0;le<ce.length;le++)ie.writeSVarint(ce[le])}function Rf(ce,ie){for(let le=0;le<ce.length;le++)ie.writeFloat(ce[le])}function Ff(ce,ie){for(let le=0;le<ce.length;le++)ie.writeDouble(ce[le])}function Df(ce,ie){for(let le=0;le<ce.length;le++)ie.writeBoolean(ce[le])}function Bf(ce,ie){for(let le=0;le<ce.length;le++)ie.writeFixed32(ce[le])}function Of(ce,ie){for(let le=0;le<ce.length;le++)ie.writeSFixed32(ce[le])}function Vf(ce,ie){for(let le=0;le<ce.length;le++)ie.writeFixed64(ce[le])}function Nf(ce,ie){for(let le=0;le<ce.length;le++)ie.writeSFixed64(ce[le])}function $f(ce,ie,le){ce===1&&le.readMessage(qf,ie)}function qf(ce,ie,le){if(ce===3){const{id:pe,bitmap:ge,width:xe,height:Se,left:ke,top:Le,advance:Ve}=le.readMessage(jf,{});ie.push({id:pe,bitmap:new ic({width:xe+6,height:Se+6},ge),metrics:{width:xe,height:Se,left:ke,top:Le,advance:Ve}})}}function jf(ce,ie,le){ce===1?ie.id=le.readVarint():ce===2?ie.bitmap=le.readBytes():ce===3?ie.width=le.readVarint():ce===4?ie.height=le.readVarint():ce===5?ie.left=le.readSVarint():ce===6?ie.top=le.readSVarint():ce===7&&(ie.advance=le.readVarint())}function Dd(ce){let ie=0,le=0;for(const Se of ce)ie+=Se.w*Se.h,le=Math.max(le,Se.w);ce.sort((Se,ke)=>ke.h-Se.h);const pe=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(ie/.95)),le),h:1/0}];let ge=0,xe=0;for(const Se of ce)for(let ke=pe.length-1;ke>=0;ke--){const Le=pe[ke];if(!(Se.w>Le.w||Se.h>Le.h)){if(Se.x=Le.x,Se.y=Le.y,xe=Math.max(xe,Se.y+Se.h),ge=Math.max(ge,Se.x+Se.w),Se.w===Le.w&&Se.h===Le.h){const Ve=pe.pop();Ve&&ke<pe.length&&(pe[ke]=Ve)}else Se.h===Le.h?(Le.x+=Se.w,Le.w-=Se.w):Se.w===Le.w?(Le.y+=Se.h,Le.h-=Se.h):(pe.push({x:Le.x+Se.w,y:Le.y,w:Le.w-Se.w,h:Se.h}),Le.y+=Se.h,Le.h-=Se.h);break}}return{w:ge,h:xe,fill:ie/(ge*xe)||0}}class Au{constructor(ie,{pixelRatio:le,version:pe,stretchX:ge,stretchY:xe,content:Se,textFitWidth:ke,textFitHeight:Le}){this.paddedRect=ie,this.pixelRatio=le,this.stretchX=ge,this.stretchY=xe,this.content=Se,this.version=pe,this.textFitWidth=ke,this.textFitHeight=Le}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Bd{constructor(ie,le){const pe={},ge={};this.haveRenderCallbacks=[];const xe=[];this.addImages(ie,pe,xe),this.addImages(le,ge,xe);const{w:Se,h:ke}=Dd(xe),Le=new Wn({width:Se||1,height:ke||1});for(const Ve in ie){const Ne=ie[Ve],He=pe[Ve].paddedRect;Wn.copy(Ne.data,Le,{x:0,y:0},{x:He.x+1,y:He.y+1},Ne.data)}for(const Ve in le){const Ne=le[Ve],He=ge[Ve].paddedRect,et=He.x+1,nt=He.y+1,ot=Ne.data.width,ut=Ne.data.height;Wn.copy(Ne.data,Le,{x:0,y:0},{x:et,y:nt},Ne.data),Wn.copy(Ne.data,Le,{x:0,y:ut-1},{x:et,y:nt-1},{width:ot,height:1}),Wn.copy(Ne.data,Le,{x:0,y:0},{x:et,y:nt+ut},{width:ot,height:1}),Wn.copy(Ne.data,Le,{x:ot-1,y:0},{x:et-1,y:nt},{width:1,height:ut}),Wn.copy(Ne.data,Le,{x:0,y:0},{x:et+ot,y:nt},{width:1,height:ut})}this.image=Le,this.iconPositions=pe,this.patternPositions=ge}addImages(ie,le,pe){for(const ge in ie){const xe=ie[ge],Se={x:0,y:0,w:xe.data.width+2,h:xe.data.height+2};pe.push(Se),le[ge]=new Au(Se,xe),xe.hasRenderCallback&&this.haveRenderCallbacks.push(ge)}}patchUpdatedImages(ie,le){ie.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const pe in ie.updatedImages)this.patchUpdatedImage(this.iconPositions[pe],ie.getImage(pe),le),this.patchUpdatedImage(this.patternPositions[pe],ie.getImage(pe),le)}patchUpdatedImage(ie,le,pe){if(!ie||!le||ie.version===le.version)return;ie.version=le.version;const[ge,xe]=ie.tl;pe.update(le.data,void 0,{x:ge,y:xe})}}var Mo;Rr("ImagePosition",Au),Rr("ImageAtlas",Bd),de.ao=void 0,(Mo=de.ao||(de.ao={}))[Mo.none=0]="none",Mo[Mo.horizontal=1]="horizontal",Mo[Mo.vertical=2]="vertical",Mo[Mo.horizontalOnly=3]="horizontalOnly";class pc{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(ie,le,pe){const ge=new pc;return ge.scale=ie||1,ge.fontStack=le,ge.verticalAlign=pe||"bottom",ge}static forImage(ie,le){const pe=new pc;return pe.imageName=ie,pe.verticalAlign=le||"bottom",pe}}class nl{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(ie,le){const pe=new nl;for(let ge=0;ge<ie.sections.length;ge++){const xe=ie.sections[ge];xe.image?pe.addImageSection(xe):pe.addTextSection(xe,le)}return pe}length(){return this.text.length}getSection(ie){return this.sections[this.sectionIndex[ie]]}getSectionIndex(ie){return this.sectionIndex[ie]}getCharCode(ie){return this.text.charCodeAt(ie)}verticalizePunctuation(){this.text=function(ie){let le="";for(let pe=0;pe<ie.length;pe++){const ge=ie.charCodeAt(pe+1)||null,xe=ie.charCodeAt(pe-1)||null;le+=ge&&mh(ge)&&!dc[ie[pe+1]]||xe&&mh(xe)&&!dc[ie[pe-1]]||!dc[ie[pe]]?ie[pe]:dc[ie[pe]]}return le}(this.text)}trim(){let ie=0;for(let pe=0;pe<this.text.length&&Rh[this.text.charCodeAt(pe)];pe++)ie++;let le=this.text.length;for(let pe=this.text.length-1;pe>=0&&pe>=ie&&Rh[this.text.charCodeAt(pe)];pe--)le--;this.text=this.text.substring(ie,le),this.sectionIndex=this.sectionIndex.slice(ie,le)}substring(ie,le){const pe=new nl;return pe.text=this.text.substring(ie,le),pe.sectionIndex=this.sectionIndex.slice(ie,le),pe.sections=this.sections,pe}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((ie,le)=>Math.max(ie,this.sections[le].scale),0)}getMaxImageSize(ie){let le=0,pe=0;for(let ge=0;ge<this.length();ge++){const xe=this.getSection(ge);if(xe.imageName){const Se=ie[xe.imageName];if(!Se)continue;const ke=Se.displaySize;le=Math.max(le,ke[0]),pe=Math.max(pe,ke[1])}}return{maxImageWidth:le,maxImageHeight:pe}}addTextSection(ie,le){this.text+=ie.text,this.sections.push(pc.forText(ie.scale,ie.fontStack||le,ie.verticalAlign));const pe=this.sections.length-1;for(let ge=0;ge<ie.text.length;++ge)this.sectionIndex.push(pe)}addImageSection(ie){const le=ie.image?ie.image.name:"";if(le.length===0)return void fr("Can't add FormattedSection with an empty image.");const pe=this.getNextImageSectionCharCode();pe?(this.text+=String.fromCharCode(pe),this.sections.push(pc.forImage(le,ie.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):fr("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function zh(ce,ie,le,pe,ge,xe,Se,ke,Le,Ve,Ne,He,et,nt,ot){const ut=nl.fromFeature(ce,ge);let gt;He===de.ao.vertical&&ut.verticalizePunctuation();const{processBidirectionalText:St,processStyledBidirectionalText:$t}=_s;if(St&&ut.sections.length===1){gt=[];const Ht=St(ut.toString(),ku(ut,Ve,xe,ie,pe,nt));for(const rr of Ht){const vr=new nl;vr.text=rr,vr.sections=ut.sections;for(let Ar=0;Ar<rr.length;Ar++)vr.sectionIndex.push(0);gt.push(vr)}}else if($t){gt=[];const Ht=$t(ut.text,ut.sectionIndex,ku(ut,Ve,xe,ie,pe,nt));for(const rr of Ht){const vr=new nl;vr.text=rr[0],vr.sectionIndex=rr[1],vr.sections=ut.sections,gt.push(vr)}}else gt=function(Ht,rr){const vr=[],Ar=Ht.text;let Sr=0;for(const Pr of rr)vr.push(Ht.substring(Sr,Pr)),Sr=Pr;return Sr<Ar.length&&vr.push(Ht.substring(Sr,Ar.length)),vr}(ut,ku(ut,Ve,xe,ie,pe,nt));const Et=[],zt={positionedLines:Et,text:ut.toString(),top:Ne[1],bottom:Ne[1],left:Ne[0],right:Ne[0],writingMode:He,iconsInText:!1,verticalizable:!1};return function(Ht,rr,vr,Ar,Sr,Pr,jr,Tr,Er,pr,Kr,ii){let Hr=0,Or=0,bi=0,Ji=0;const hn=Tr==="right"?1:Tr==="left"?0:.5,Ln=gn/ii;let is=0;for(const Zi of Sr){Zi.trim();const _n=Zi.getMaxScale(),Cn={positionedGlyphs:[],lineOffset:0};Ht.positionedLines[is]=Cn;const Pn=Cn.positionedGlyphs;let $n=0;if(!Zi.length()){Or+=Pr,++is;continue}const ns=Uf(Ar,Zi,Ln);for(let Hn=0;Hn<Zi.length();Hn++){const un=Zi.getSection(Hn),vn=Zi.getSectionIndex(Hn),bn=Zi.getCharCode(Hn),sn=Zf(Er,Kr,bn);let Vi;if(un.imageName){if(Ht.iconsInText=!0,un.scale=un.scale*Ln,Vi=Yf(un,sn,_n,ns,Ar),!Vi)continue;$n=Math.max($n,Vi.imageOffset)}else if(Vi=Xf(un,bn,sn,ns,rr,vr),!Vi)continue;const{rect:bs,metrics:ll,baselineOffset:xs}=Vi;Pn.push({glyph:bn,imageName:un.imageName,x:Hr,y:Or+xs+-17,vertical:sn,scale:un.scale,fontStack:un.fontStack,sectionIndex:vn,metrics:ll,rect:bs}),sn?(Ht.verticalizable=!0,Hr+=(un.imageName?ll.advance:gn)*un.scale+pr):Hr+=ll.advance*un.scale+pr}Pn.length!==0&&(bi=Math.max(Hr-pr,bi),Kf(Pn,0,Pn.length-1,hn)),Hr=0,Cn.lineOffset=Math.max($n,(_n-1)*gn);const yn=Pr*_n+$n;Or+=yn,Ji=Math.max(yn,Ji),++is}const{horizontalAlign:Gn,verticalAlign:Tn}=Iu(jr);(function(Zi,_n,Cn,Pn,$n,ns,yn,Hn,un){const vn=(_n-Cn)*$n;let bn=0;bn=ns!==yn?-Hn*Pn- -17:-Pn*un*yn+.5*yn;for(const sn of Zi)for(const Vi of sn.positionedGlyphs)Vi.x+=vn,Vi.y+=bn})(Ht.positionedLines,hn,Gn,Tn,bi,Ji,Pr,Or,Sr.length),Ht.top+=-Tn*Or,Ht.bottom=Ht.top+Or,Ht.left+=-Gn*bi,Ht.right=Ht.left+bi}(zt,ie,le,pe,gt,Se,ke,Le,He,Ve,et,ot),!function(Ht){for(const rr of Ht)if(rr.positionedGlyphs.length!==0)return!1;return!0}(Et)&&zt}const Rh={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Wf={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Gf={40:!0};function Od(ce,ie,le,pe,ge,xe){if(ie.imageName){const Se=pe[ie.imageName];return Se?Se.displaySize[0]*ie.scale*gn/xe+ge:0}{const Se=le[ie.fontStack],ke=Se&&Se[ce];return ke?ke.metrics.advance*ie.scale+ge:0}}function Vd(ce,ie,le,pe){const ge=Math.pow(ce-ie,2);return pe?ce<ie?ge/2:2*ge:ge+Math.abs(le)*le}function Hf(ce,ie,le){let pe=0;return ce===10&&(pe-=1e4),le&&(pe+=150),ce!==40&&ce!==65288||(pe+=50),ie!==41&&ie!==65289||(pe+=50),pe}function Nd(ce,ie,le,pe,ge,xe){let Se=null,ke=Vd(ie,le,ge,xe);for(const Le of pe){const Ve=Vd(ie-Le.x,le,ge,xe)+Le.badness;Ve<=ke&&(Se=Le,ke=Ve)}return{index:ce,x:ie,priorBreak:Se,badness:ke}}function $d(ce){return ce?$d(ce.priorBreak).concat(ce.index):[]}function ku(ce,ie,le,pe,ge,xe){if(!ce)return[];const Se=[],ke=function(He,et,nt,ot,ut,gt){let St=0;for(let $t=0;$t<He.length();$t++){const Et=He.getSection($t);St+=Od(He.getCharCode($t),Et,ot,ut,et,gt)}return St/Math.max(1,Math.ceil(St/nt))}(ce,ie,le,pe,ge,xe),Le=ce.text.indexOf("\u200B")>=0;let Ve=0;for(let He=0;He<ce.length();He++){const et=ce.getSection(He),nt=ce.getCharCode(He);if(Rh[nt]||(Ve+=Od(nt,et,pe,ge,ie,xe)),He<ce.length()-1){const ot=!((Ne=nt)<11904)&&(!!mi["CJK Compatibility Forms"](Ne)||!!mi["CJK Compatibility"](Ne)||!!mi["CJK Strokes"](Ne)||!!mi["CJK Symbols and Punctuation"](Ne)||!!mi["Enclosed CJK Letters and Months"](Ne)||!!mi["Halfwidth and Fullwidth Forms"](Ne)||!!mi["Ideographic Description Characters"](Ne)||!!mi["Vertical Forms"](Ne)||$a.test(String.fromCodePoint(Ne)));(Wf[nt]||ot||et.imageName||He!==ce.length()-2&&Gf[ce.getCharCode(He+1)])&&Se.push(Nd(He+1,Ve,ke,Se,Hf(nt,ce.getCharCode(He+1),ot&&Le),!1))}}var Ne;return $d(Nd(ce.length(),Ve,ke,Se,0,!0))}function Iu(ce){let ie=.5,le=.5;switch(ce){case"right":case"top-right":case"bottom-right":ie=1;break;case"left":case"top-left":case"bottom-left":ie=0}switch(ce){case"bottom":case"bottom-right":case"bottom-left":le=1;break;case"top":case"top-right":case"top-left":le=0}return{horizontalAlign:ie,verticalAlign:le}}function Uf(ce,ie,le){const pe=ie.getMaxScale()*gn,{maxImageWidth:ge,maxImageHeight:xe}=ie.getMaxImageSize(ce),Se=Math.max(pe,xe*le);return{verticalLineContentWidth:Math.max(pe,ge*le),horizontalLineContentHeight:Se}}function qd(ce){switch(ce){case"top":return 0;case"center":return .5;default:return 1}}function Zf(ce,ie,le){return!(ce===de.ao.horizontal||!ie&&!qa(le)||ie&&(Rh[le]||(pe=le,/\p{sc=Arab}/u.test(String.fromCodePoint(pe)))));var pe}function Xf(ce,ie,le,pe,ge,xe){const Se=xe[ce.fontStack],ke=function(Ve,Ne,He,et){if(Ve&&Ve.rect)return Ve;const nt=Ne[He.fontStack],ot=nt&&nt[et];return ot?{rect:null,metrics:ot.metrics}:null}(Se&&Se[ie],ge,ce,ie);if(ke===null)return null;let Le;if(le)Le=pe.verticalLineContentWidth-ce.scale*gn;else{const Ve=qd(ce.verticalAlign);Le=(pe.horizontalLineContentHeight-ce.scale*gn)*Ve}return{rect:ke.rect,metrics:ke.metrics,baselineOffset:Le}}function Yf(ce,ie,le,pe,ge){const xe=ge[ce.imageName];if(!xe)return null;const Se=xe.paddedRect,ke=xe.displaySize,Le={width:ke[0],height:ke[1],left:1,top:-3,advance:ie?ke[1]:ke[0]};let Ve;if(ie)Ve=pe.verticalLineContentWidth-ke[1]*ce.scale;else{const Ne=qd(ce.verticalAlign);Ve=(pe.horizontalLineContentHeight-ke[1]*ce.scale)*Ne}return{rect:Se,metrics:Le,baselineOffset:Ve,imageOffset:(ie?ke[0]:ke[1])*ce.scale-gn*le}}function Kf(ce,ie,le,pe){if(pe===0)return;const ge=ce[le],xe=(ce[le].x+ge.metrics.advance*ge.scale)*pe;for(let Se=ie;Se<=le;Se++)ce[Se].x-=xe}function Jf(ce,ie,le){const{horizontalAlign:pe,verticalAlign:ge}=Iu(le),xe=ie[0]-ce.displaySize[0]*pe,Se=ie[1]-ce.displaySize[1]*ge;return{image:ce,top:Se,bottom:Se+ce.displaySize[1],left:xe,right:xe+ce.displaySize[0]}}function jd(ce){var ie,le;let pe=ce.left,ge=ce.top,xe=ce.right-pe,Se=ce.bottom-ge;const ke=(ie=ce.image.textFitWidth)!==null&&ie!==void 0?ie:"stretchOrShrink",Le=(le=ce.image.textFitHeight)!==null&&le!==void 0?le:"stretchOrShrink",Ve=(ce.image.content[2]-ce.image.content[0])/(ce.image.content[3]-ce.image.content[1]);if(Le==="proportional"){if(ke==="stretchOnly"&&xe/Se<Ve||ke==="proportional"){const Ne=Math.ceil(Se*Ve);pe*=Ne/xe,xe=Ne}}else if(ke==="proportional"&&Le==="stretchOnly"&&Ve!==0&&xe/Se>Ve){const Ne=Math.ceil(xe/Ve);ge*=Ne/Se,Se=Ne}return{x1:pe,y1:ge,x2:pe+xe,y2:ge+Se}}function Wd(ce,ie,le,pe,ge,xe){const Se=ce.image;let ke;if(Se.content){const gt=Se.content,St=Se.pixelRatio||1;ke=[gt[0]/St,gt[1]/St,Se.displaySize[0]-gt[2]/St,Se.displaySize[1]-gt[3]/St]}const Le=ie.left*xe,Ve=ie.right*xe;let Ne,He,et,nt;le==="width"||le==="both"?(nt=ge[0]+Le-pe[3],He=ge[0]+Ve+pe[1]):(nt=ge[0]+(Le+Ve-Se.displaySize[0])/2,He=nt+Se.displaySize[0]);const ot=ie.top*xe,ut=ie.bottom*xe;return le==="height"||le==="both"?(Ne=ge[1]+ot-pe[0],et=ge[1]+ut+pe[2]):(Ne=ge[1]+(ot+ut-Se.displaySize[1])/2,et=Ne+Se.displaySize[1]),{image:Se,top:Ne,right:He,bottom:et,left:nt,collisionPadding:ke}}const Js=128,Ao=32640;function Gd(ce,ie){const{expression:le}=ie;if(le.kind==="constant")return{kind:"constant",layoutSize:le.evaluate(new Li(ce+1))};if(le.kind==="source")return{kind:"source"};{const{zoomStops:pe,interpolationType:ge}=le;let xe=0;for(;xe<pe.length&&pe[xe]<=ce;)xe++;xe=Math.max(0,xe-1);let Se=xe;for(;Se<pe.length&&pe[Se]<ce+1;)Se++;Se=Math.min(pe.length-1,Se);const ke=pe[xe],Le=pe[Se];return le.kind==="composite"?{kind:"composite",minZoom:ke,maxZoom:Le,interpolationType:ge}:{kind:"camera",minZoom:ke,maxZoom:Le,minSize:le.evaluate(new Li(ke)),maxSize:le.evaluate(new Li(Le)),interpolationType:ge}}}function Lu(ce,ie,le){let pe="never";const ge=ce.get(ie);return ge?pe=ge:ce.get(le)&&(pe="always"),pe}const Qf=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Fh(ce,ie,le,pe,ge,xe,Se,ke,Le,Ve,Ne,He,et){const nt=ke?Math.min(Ao,Math.round(ke[0])):0,ot=ke?Math.min(Ao,Math.round(ke[1])):0;ce.emplaceBack(ie,le,Math.round(32*pe),Math.round(32*ge),xe,Se,(nt<<1)+(Le?1:0),ot,16*Ve,16*Ne,256*He,256*et)}function zu(ce,ie,le){ce.emplaceBack(ie.x,ie.y,le),ce.emplaceBack(ie.x,ie.y,le),ce.emplaceBack(ie.x,ie.y,le),ce.emplaceBack(ie.x,ie.y,le)}function em(ce){for(const ie of ce.sections)if(lu(ie.text))return!0;return!1}class Ru{constructor(ie){this.layoutVertexArray=new Kt,this.indexArray=new ti,this.programConfigurations=ie,this.segments=new di,this.dynamicLayoutVertexArray=new br,this.opacityVertexArray=new xr,this.hasVisibleVertices=!1,this.placedSymbolArray=new Je}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(ie,le,pe,ge){this.isEmpty()||(pe&&(this.layoutVertexBuffer=ie.createVertexBuffer(this.layoutVertexArray,Ef.members),this.indexBuffer=ie.createIndexBuffer(this.indexArray,le),this.dynamicLayoutVertexBuffer=ie.createVertexBuffer(this.dynamicLayoutVertexArray,Mf.members,!0),this.opacityVertexBuffer=ie.createVertexBuffer(this.opacityVertexArray,Qf,!0),this.opacityVertexBuffer.itemSize=1),(pe||ge)&&this.programConfigurations.upload(ie))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Rr("SymbolBuffers",Ru);class Fu{constructor(ie,le,pe){this.layoutVertexArray=new ie,this.layoutAttributes=le,this.indexArray=new pe,this.segments=new di,this.collisionVertexArray=new Br}upload(ie){this.layoutVertexBuffer=ie.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=ie.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=ie.createVertexBuffer(this.collisionVertexArray,Af.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Rr("CollisionBuffers",Fu);class sl{constructor(ie){this.collisionBoxArray=ie.collisionBoxArray,this.zoom=ie.zoom,this.overscaling=gi(globalThis)?Math.min(ie.overscaling,128):ie.overscaling,this.layers=ie.layers,this.layerIds=this.layers.map(Se=>Se.id),this.index=ie.index,this.pixelRatio=ie.pixelRatio,this.sourceLayerIndex=ie.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const le=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Gd(this.zoom,le["text-size"]),this.iconSizeData=Gd(this.zoom,le["icon-size"]);const pe=this.layers[0].layout,ge=pe.get("symbol-sort-key"),xe=pe.get("symbol-z-order");this.canOverlap=Lu(pe,"text-overlap","text-allow-overlap")!=="never"||Lu(pe,"icon-overlap","icon-allow-overlap")!=="never"||pe.get("text-ignore-placement")||pe.get("icon-ignore-placement"),this.sortFeaturesByKey=xe!=="viewport-y"&&!ge.isConstant(),this.sortFeaturesByY=(xe==="viewport-y"||xe==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,pe.get("symbol-placement")==="point"&&(this.writingModes=pe.get("text-writing-mode").map(Se=>de.ao[Se])),this.stateDependentLayerIds=this.layers.filter(Se=>Se.isStateDependent()).map(Se=>Se.id),this.sourceID=ie.sourceID}createArrays(){this.text=new Ru(new Rs(this.layers,this.zoom,ie=>/^text/.test(ie))),this.icon=new Ru(new Rs(this.layers,this.zoom,ie=>/^icon/.test(ie))),this.glyphOffsetArray=new ht,this.lineVertexArray=new vt,this.symbolInstances=new st,this.textAnchorOffsets=new xt}calculateGlyphDependencies(ie,le,pe,ge,xe){for(let Se=0;Se<ie.length;Se++)if(le[ie.charCodeAt(Se)]=!0,(pe||ge)&&xe){const ke=dc[ie.charAt(Se)];ke&&(le[ke.charCodeAt(0)]=!0)}}populate(ie,le,pe){const ge=this.layers[0],xe=ge.layout,Se=xe.get("text-font"),ke=xe.get("text-field"),Le=xe.get("icon-image"),Ve=(ke.value.kind!=="constant"||ke.value.value instanceof xn&&!ke.value.value.isEmpty()||ke.value.value.toString().length>0)&&(Se.value.kind!=="constant"||Se.value.value.length>0),Ne=Le.value.kind!=="constant"||!!Le.value.value||Object.keys(Le.parameters).length>0,He=xe.get("symbol-sort-key");if(this.features=[],!Ve&&!Ne)return;const et=le.iconDependencies,nt=le.glyphDependencies,ot=le.availableImages,ut=new Li(this.zoom);for(const{feature:gt,id:St,index:$t,sourceLayerIndex:Et}of ie){const zt=ge._featureFilter.needGeometry,Ht=Qo(gt,zt);if(!ge._featureFilter.filter(ut,Ht,pe))continue;let rr,vr;if(zt||(Ht.geometry=vs(gt)),Ve){const Sr=ge.getValueAndResolveTokens("text-field",Ht,pe,ot),Pr=xn.factory(Sr),jr=this.hasRTLText=this.hasRTLText||em(Pr);(!jr||_s.getRTLTextPluginStatus()==="unavailable"||jr&&_s.isParsed())&&(rr=If(Pr,ge,Ht))}if(Ne){const Sr=ge.getValueAndResolveTokens("icon-image",Ht,pe,ot);vr=Sr instanceof Sn?Sr:Sn.fromString(Sr)}if(!rr&&!vr)continue;const Ar=this.sortFeaturesByKey?He.evaluate(Ht,{},pe):void 0;if(this.features.push({id:St,text:rr,icon:vr,index:$t,sourceLayerIndex:Et,geometry:Ht.geometry,properties:gt.properties,type:rl.types[gt.type],sortKey:Ar}),vr&&(et[vr.name]=!0),rr){const Sr=Se.evaluate(Ht,{},pe).join(","),Pr=xe.get("text-rotation-alignment")!=="viewport"&&xe.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(de.ao.vertical)>=0;for(const jr of rr.sections)if(jr.image)et[jr.image.name]=!0;else{const Tr=wo(rr.toString()),Er=jr.fontStack||Sr,pr=nt[Er]=nt[Er]||{};this.calculateGlyphDependencies(jr.text,pr,Pr,this.allowVerticalPlacement,Tr)}}}xe.get("symbol-placement")==="line"&&(this.features=function(gt){const St={},$t={},Et=[];let zt=0;function Ht(Sr){Et.push(gt[Sr]),zt++}function rr(Sr,Pr,jr){const Tr=$t[Sr];return delete $t[Sr],$t[Pr]=Tr,Et[Tr].geometry[0].pop(),Et[Tr].geometry[0]=Et[Tr].geometry[0].concat(jr[0]),Tr}function vr(Sr,Pr,jr){const Tr=St[Pr];return delete St[Pr],St[Sr]=Tr,Et[Tr].geometry[0].shift(),Et[Tr].geometry[0]=jr[0].concat(Et[Tr].geometry[0]),Tr}function Ar(Sr,Pr,jr){const Tr=jr?Pr[0][Pr[0].length-1]:Pr[0][0];return`${Sr}:${Tr.x}:${Tr.y}`}for(let Sr=0;Sr<gt.length;Sr++){const Pr=gt[Sr],jr=Pr.geometry,Tr=Pr.text?Pr.text.toString():null;if(!Tr){Ht(Sr);continue}const Er=Ar(Tr,jr),pr=Ar(Tr,jr,!0);if(Er in $t&&pr in St&&$t[Er]!==St[pr]){const Kr=vr(Er,pr,jr),ii=rr(Er,pr,Et[Kr].geometry);delete St[Er],delete $t[pr],$t[Ar(Tr,Et[ii].geometry,!0)]=ii,Et[Kr].geometry=null}else Er in $t?rr(Er,pr,jr):pr in St?vr(Er,pr,jr):(Ht(Sr),St[Er]=zt-1,$t[pr]=zt-1)}return Et.filter(Sr=>Sr.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((gt,St)=>gt.sortKey-St.sortKey)}update(ie,le,pe){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(ie,le,this.layers,{imagePositions:pe}),this.icon.programConfigurations.updatePaintArrays(ie,le,this.layers,{imagePositions:pe}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(ie){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(ie),this.iconCollisionBox.upload(ie)),this.text.upload(ie,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(ie,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(ie,le){const pe=this.lineVertexArray.length;if(ie.segment!==void 0){let ge=ie.dist(le[ie.segment+1]),xe=ie.dist(le[ie.segment]);const Se={};for(let ke=ie.segment+1;ke<le.length;ke++)Se[ke]={x:le[ke].x,y:le[ke].y,tileUnitDistanceFromAnchor:ge},ke<le.length-1&&(ge+=le[ke+1].dist(le[ke]));for(let ke=ie.segment||0;ke>=0;ke--)Se[ke]={x:le[ke].x,y:le[ke].y,tileUnitDistanceFromAnchor:xe},ke>0&&(xe+=le[ke-1].dist(le[ke]));for(let ke=0;ke<le.length;ke++){const Le=Se[ke];this.lineVertexArray.emplaceBack(Le.x,Le.y,Le.tileUnitDistanceFromAnchor)}}return{lineStartIndex:pe,lineLength:this.lineVertexArray.length-pe}}addSymbols(ie,le,pe,ge,xe,Se,ke,Le,Ve,Ne,He,et){const nt=ie.indexArray,ot=ie.layoutVertexArray,ut=ie.segments.prepareSegment(4*le.length,ot,nt,this.canOverlap?Se.sortKey:void 0),gt=this.glyphOffsetArray.length,St=ut.vertexLength,$t=this.allowVerticalPlacement&&ke===de.ao.vertical?Math.PI/2:0,Et=Se.text&&Se.text.sections;for(let zt=0;zt<le.length;zt++){const{tl:Ht,tr:rr,bl:vr,br:Ar,tex:Sr,pixelOffsetTL:Pr,pixelOffsetBR:jr,minFontScaleX:Tr,minFontScaleY:Er,glyphOffset:pr,isSDF:Kr,sectionIndex:ii}=le[zt],Hr=ut.vertexLength,Or=pr[1];Fh(ot,Le.x,Le.y,Ht.x,Or+Ht.y,Sr.x,Sr.y,pe,Kr,Pr.x,Pr.y,Tr,Er),Fh(ot,Le.x,Le.y,rr.x,Or+rr.y,Sr.x+Sr.w,Sr.y,pe,Kr,jr.x,Pr.y,Tr,Er),Fh(ot,Le.x,Le.y,vr.x,Or+vr.y,Sr.x,Sr.y+Sr.h,pe,Kr,Pr.x,jr.y,Tr,Er),Fh(ot,Le.x,Le.y,Ar.x,Or+Ar.y,Sr.x+Sr.w,Sr.y+Sr.h,pe,Kr,jr.x,jr.y,Tr,Er),zu(ie.dynamicLayoutVertexArray,Le,$t),nt.emplaceBack(Hr,Hr+2,Hr+1),nt.emplaceBack(Hr+1,Hr+2,Hr+3),ut.vertexLength+=4,ut.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(pr[0]),zt!==le.length-1&&ii===le[zt+1].sectionIndex||ie.programConfigurations.populatePaintArrays(ot.length,Se,Se.index,{imagePositions:{},canonical:et,formattedSection:Et&&Et[ii]})}ie.placedSymbolArray.emplaceBack(Le.x,Le.y,gt,this.glyphOffsetArray.length-gt,St,Ve,Ne,Le.segment,pe?pe[0]:0,pe?pe[1]:0,ge[0],ge[1],ke,0,!1,0,He)}_addCollisionDebugVertex(ie,le,pe,ge,xe,Se){return le.emplaceBack(0,0),ie.emplaceBack(pe.x,pe.y,ge,xe,Math.round(Se.x),Math.round(Se.y))}addCollisionDebugVertices(ie,le,pe,ge,xe,Se,ke){const Le=xe.segments.prepareSegment(4,xe.layoutVertexArray,xe.indexArray),Ve=Le.vertexLength,Ne=xe.layoutVertexArray,He=xe.collisionVertexArray,et=ke.anchorX,nt=ke.anchorY;this._addCollisionDebugVertex(Ne,He,Se,et,nt,new me(ie,le)),this._addCollisionDebugVertex(Ne,He,Se,et,nt,new me(pe,le)),this._addCollisionDebugVertex(Ne,He,Se,et,nt,new me(pe,ge)),this._addCollisionDebugVertex(Ne,He,Se,et,nt,new me(ie,ge)),Le.vertexLength+=4;const ot=xe.indexArray;ot.emplaceBack(Ve,Ve+1),ot.emplaceBack(Ve+1,Ve+2),ot.emplaceBack(Ve+2,Ve+3),ot.emplaceBack(Ve+3,Ve),Le.primitiveLength+=4}addDebugCollisionBoxes(ie,le,pe,ge){for(let xe=ie;xe<le;xe++){const Se=this.collisionBoxArray.get(xe);this.addCollisionDebugVertices(Se.x1,Se.y1,Se.x2,Se.y2,ge?this.textCollisionBox:this.iconCollisionBox,Se.anchorPoint,pe)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Fu(_r,Ld.members,Ti),this.iconCollisionBox=new Fu(_r,Ld.members,Ti);for(let ie=0;ie<this.symbolInstances.length;ie++){const le=this.symbolInstances.get(ie);this.addDebugCollisionBoxes(le.textBoxStartIndex,le.textBoxEndIndex,le,!0),this.addDebugCollisionBoxes(le.verticalTextBoxStartIndex,le.verticalTextBoxEndIndex,le,!0),this.addDebugCollisionBoxes(le.iconBoxStartIndex,le.iconBoxEndIndex,le,!1),this.addDebugCollisionBoxes(le.verticalIconBoxStartIndex,le.verticalIconBoxEndIndex,le,!1)}}_deserializeCollisionBoxesForSymbol(ie,le,pe,ge,xe,Se,ke,Le,Ve){const Ne={};for(let He=le;He<pe;He++){const et=ie.get(He);Ne.textBox={x1:et.x1,y1:et.y1,x2:et.x2,y2:et.y2,anchorPointX:et.anchorPointX,anchorPointY:et.anchorPointY},Ne.textFeatureIndex=et.featureIndex;break}for(let He=ge;He<xe;He++){const et=ie.get(He);Ne.verticalTextBox={x1:et.x1,y1:et.y1,x2:et.x2,y2:et.y2,anchorPointX:et.anchorPointX,anchorPointY:et.anchorPointY},Ne.verticalTextFeatureIndex=et.featureIndex;break}for(let He=Se;He<ke;He++){const et=ie.get(He);Ne.iconBox={x1:et.x1,y1:et.y1,x2:et.x2,y2:et.y2,anchorPointX:et.anchorPointX,anchorPointY:et.anchorPointY},Ne.iconFeatureIndex=et.featureIndex;break}for(let He=Le;He<Ve;He++){const et=ie.get(He);Ne.verticalIconBox={x1:et.x1,y1:et.y1,x2:et.x2,y2:et.y2,anchorPointX:et.anchorPointX,anchorPointY:et.anchorPointY},Ne.verticalIconFeatureIndex=et.featureIndex;break}return Ne}deserializeCollisionBoxes(ie){this.collisionArrays=[];for(let le=0;le<this.symbolInstances.length;le++){const pe=this.symbolInstances.get(le);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(ie,pe.textBoxStartIndex,pe.textBoxEndIndex,pe.verticalTextBoxStartIndex,pe.verticalTextBoxEndIndex,pe.iconBoxStartIndex,pe.iconBoxEndIndex,pe.verticalIconBoxStartIndex,pe.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(ie,le){const pe=ie.placedSymbolArray.get(le),ge=pe.vertexStartIndex+4*pe.numGlyphs;for(let xe=pe.vertexStartIndex;xe<ge;xe+=4)ie.indexArray.emplaceBack(xe,xe+2,xe+1),ie.indexArray.emplaceBack(xe+1,xe+2,xe+3)}getSortedSymbolIndexes(ie){if(this.sortedAngle===ie&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const le=Math.sin(ie),pe=Math.cos(ie),ge=[],xe=[],Se=[];for(let ke=0;ke<this.symbolInstances.length;++ke){Se.push(ke);const Le=this.symbolInstances.get(ke);ge.push(0|Math.round(le*Le.anchorX+pe*Le.anchorY)),xe.push(Le.featureIndex)}return Se.sort((ke,Le)=>ge[ke]-ge[Le]||xe[Le]-xe[ke]),Se}addToSortKeyRanges(ie,le){const pe=this.sortKeyRanges[this.sortKeyRanges.length-1];pe&&pe.sortKey===le?pe.symbolInstanceEnd=ie+1:this.sortKeyRanges.push({sortKey:le,symbolInstanceStart:ie,symbolInstanceEnd:ie+1})}sortFeatures(ie){if(this.sortFeaturesByY&&this.sortedAngle!==ie&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(ie),this.sortedAngle=ie,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const le of this.symbolInstanceIndexes){const pe=this.symbolInstances.get(le);this.featureSortOrder.push(pe.featureIndex),[pe.rightJustifiedTextSymbolIndex,pe.centerJustifiedTextSymbolIndex,pe.leftJustifiedTextSymbolIndex].forEach((ge,xe,Se)=>{ge>=0&&Se.indexOf(ge)===xe&&this.addIndicesForPlacedSymbol(this.text,ge)}),pe.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,pe.verticalPlacedTextSymbolIndex),pe.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,pe.placedIconSymbolIndex),pe.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,pe.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Hd,Ud;Rr("SymbolBucket",sl,{omit:["layers","collisionBoxArray","features","compareText"]}),sl.MAX_GLYPHS=65535,sl.addDynamicAttributes=zu;var Du={get paint(){return Ud=Ud||new Fn({"icon-opacity":new Ur(Ot.paint_symbol["icon-opacity"]),"icon-color":new Ur(Ot.paint_symbol["icon-color"]),"icon-halo-color":new Ur(Ot.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ur(Ot.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ur(Ot.paint_symbol["icon-halo-blur"]),"icon-translate":new Vr(Ot.paint_symbol["icon-translate"]),"icon-translate-anchor":new Vr(Ot.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ur(Ot.paint_symbol["text-opacity"]),"text-color":new Ur(Ot.paint_symbol["text-color"],{runtimeType:vi,getOverride:ce=>ce.textColor,hasOverride:ce=>!!ce.textColor}),"text-halo-color":new Ur(Ot.paint_symbol["text-halo-color"]),"text-halo-width":new Ur(Ot.paint_symbol["text-halo-width"]),"text-halo-blur":new Ur(Ot.paint_symbol["text-halo-blur"]),"text-translate":new Vr(Ot.paint_symbol["text-translate"]),"text-translate-anchor":new Vr(Ot.paint_symbol["text-translate-anchor"])})},get layout(){return Hd=Hd||new Fn({"symbol-placement":new Vr(Ot.layout_symbol["symbol-placement"]),"symbol-spacing":new Vr(Ot.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Vr(Ot.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ur(Ot.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Vr(Ot.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Vr(Ot.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Vr(Ot.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Vr(Ot.layout_symbol["icon-ignore-placement"]),"icon-optional":new Vr(Ot.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Vr(Ot.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ur(Ot.layout_symbol["icon-size"]),"icon-text-fit":new Vr(Ot.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Vr(Ot.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ur(Ot.layout_symbol["icon-image"]),"icon-rotate":new Ur(Ot.layout_symbol["icon-rotate"]),"icon-padding":new Ur(Ot.layout_symbol["icon-padding"]),"icon-keep-upright":new Vr(Ot.layout_symbol["icon-keep-upright"]),"icon-offset":new Ur(Ot.layout_symbol["icon-offset"]),"icon-anchor":new Ur(Ot.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Vr(Ot.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Vr(Ot.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Vr(Ot.layout_symbol["text-rotation-alignment"]),"text-field":new Ur(Ot.layout_symbol["text-field"]),"text-font":new Ur(Ot.layout_symbol["text-font"]),"text-size":new Ur(Ot.layout_symbol["text-size"]),"text-max-width":new Ur(Ot.layout_symbol["text-max-width"]),"text-line-height":new Vr(Ot.layout_symbol["text-line-height"]),"text-letter-spacing":new Ur(Ot.layout_symbol["text-letter-spacing"]),"text-justify":new Ur(Ot.layout_symbol["text-justify"]),"text-radial-offset":new Ur(Ot.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Vr(Ot.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Ur(Ot.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Ur(Ot.layout_symbol["text-anchor"]),"text-max-angle":new Vr(Ot.layout_symbol["text-max-angle"]),"text-writing-mode":new Vr(Ot.layout_symbol["text-writing-mode"]),"text-rotate":new Ur(Ot.layout_symbol["text-rotate"]),"text-padding":new Vr(Ot.layout_symbol["text-padding"]),"text-keep-upright":new Vr(Ot.layout_symbol["text-keep-upright"]),"text-transform":new Ur(Ot.layout_symbol["text-transform"]),"text-offset":new Ur(Ot.layout_symbol["text-offset"]),"text-allow-overlap":new Vr(Ot.layout_symbol["text-allow-overlap"]),"text-overlap":new Vr(Ot.layout_symbol["text-overlap"]),"text-ignore-placement":new Vr(Ot.layout_symbol["text-ignore-placement"]),"text-optional":new Vr(Ot.layout_symbol["text-optional"])})}};class Zd{constructor(ie){if(ie.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=ie.property.overrides?ie.property.overrides.runtimeType:Yr,this.defaultValue=ie}evaluate(ie){if(ie.formattedSection){const le=this.defaultValue.property.overrides;if(le&&le.hasOverride(ie.formattedSection))return le.getOverride(ie.formattedSection)}return ie.feature&&ie.featureState?this.defaultValue.evaluate(ie.feature,ie.featureState):this.defaultValue.property.specification.default}eachChild(ie){this.defaultValue.isConstant()||ie(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Rr("FormatSectionOverride",Zd,{omit:["defaultValue"]});class Dh extends es{constructor(ie,le){super(ie,Du,le)}recalculate(ie,le){if(super.recalculate(ie,le),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const pe=this.layout.get("text-writing-mode");if(pe){const ge=[];for(const xe of pe)ge.indexOf(xe)<0&&ge.push(xe);this.layout._values["text-writing-mode"]=ge}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(ie,le,pe,ge){const xe=this.layout.get(ie).evaluate(le,{},pe,ge),Se=this._unevaluatedLayout._values[ie];return Se.isDataDriven()||Ia(Se.value)||!xe?xe:function(ke,Le){return Le.replace(/{([^{}]+)}/g,(Ve,Ne)=>ke&&Ne in ke?String(ke[Ne]):"")}(le.properties,xe)}createBucket(ie){return new sl(ie)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const ie of Du.paint.overridableProperties){if(!Dh.hasPaintOverride(this.layout,ie))continue;const le=this.paint.get(ie),pe=new Zd(le),ge=new ka(pe,le.property.specification);let xe=null;xe=le.value.kind==="constant"||le.value.kind==="source"?new za("source",ge):new Fl("composite",ge,le.value.zoomStops),this.paint._values[ie]=new us(le.property,xe,le.parameters)}}_handleOverridablePaintPropertyUpdate(ie,le,pe){return!(!this.layout||le.isDataDriven()||pe.isDataDriven())&&Dh.hasPaintOverride(this.layout,ie)}static hasPaintOverride(ie,le){const pe=ie.get("text-field"),ge=Du.paint.properties[le];let xe=!1;const Se=ke=>{for(const Le of ke)if(ge.overrides&&ge.overrides.hasOverride(Le))return void(xe=!0)};if(pe.value.kind==="constant"&&pe.value.value instanceof xn)Se(pe.value.value.sections);else if(pe.value.kind==="source"||pe.value.kind==="composite"){const ke=Ve=>{xe||(Ve instanceof fs&&Gi(Ve.value)===qi?Se(Ve.value.sections):Ve instanceof ya?Se(Ve.sections):Ve.eachChild(ke))},Le=pe.value;Le._styleExpression&&ke(Le._styleExpression.expression)}return xe}}let Xd;var tm={get paint(){return Xd=Xd||new Fn({"background-color":new Vr(Ot.paint_background["background-color"]),"background-pattern":new Yl(Ot.paint_background["background-pattern"]),"background-opacity":new Vr(Ot.paint_background["background-opacity"])})}};class rm extends es{constructor(ie,le){super(ie,tm,le)}}class im extends es{constructor(ie,le){super(ie,{},le),this.onAdd=pe=>{this.implementation.onAdd&&this.implementation.onAdd(pe,pe.painter.context.gl)},this.onRemove=pe=>{this.implementation.onRemove&&this.implementation.onRemove(pe,pe.painter.context.gl)},this.implementation=ie}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class nm{constructor(ie){this._methodToThrottle=ie,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const sm={once:!0},Bu=63710088e-1;class ko{constructor(ie,le){if(isNaN(ie)||isNaN(le))throw new Error(`Invalid LngLat object: (${ie}, ${le})`);if(this.lng=+ie,this.lat=+le,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ko(Lr(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(ie){const le=Math.PI/180,pe=this.lat*le,ge=ie.lat*le,xe=Math.sin(pe)*Math.sin(ge)+Math.cos(pe)*Math.cos(ge)*Math.cos((ie.lng-this.lng)*le);return Bu*Math.acos(Math.min(xe,1))}static convert(ie){if(ie instanceof ko)return ie;if(Array.isArray(ie)&&(ie.length===2||ie.length===3))return new ko(Number(ie[0]),Number(ie[1]));if(!Array.isArray(ie)&&typeof ie=="object"&&ie!==null)return new ko(Number("lng"in ie?ie.lng:ie.lon),Number(ie.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Yd=2*Math.PI*Bu;function Kd(ce){return Yd*Math.cos(ce*Math.PI/180)}function Jd(ce){return(180+ce)/360}function Qd(ce){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+ce*Math.PI/360)))/360}function ep(ce,ie){return ce/Kd(ie)}function Ou(ce){return 360/Math.PI*Math.atan(Math.exp((180-360*ce)*Math.PI/180))-90}function tp(ce,ie){return ce*Kd(Ou(ie))}class fc{constructor(ie,le,pe=0){this.x=+ie,this.y=+le,this.z=+pe}static fromLngLat(ie,le=0){const pe=ko.convert(ie);return new fc(Jd(pe.lng),Qd(pe.lat),ep(le,pe.lat))}toLngLat(){return new ko(360*this.x-180,Ou(this.y))}toAltitude(){return tp(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Yd*(ie=Ou(this.y),1/Math.cos(ie*Math.PI/180));var ie}}function rp(ce,ie,le){var pe=2*Math.PI*6378137/256/Math.pow(2,le);return[ce*pe-2*Math.PI*6378137/2,ie*pe-2*Math.PI*6378137/2]}class Vu{constructor(ie,le,pe){if(!function(ge,xe,Se){return!(ge<0||ge>25||Se<0||Se>=Math.pow(2,ge)||xe<0||xe>=Math.pow(2,ge))}(ie,le,pe))throw new Error(`x=${le}, y=${pe}, z=${ie} outside of bounds. 0<=x<${Math.pow(2,ie)}, 0<=y<${Math.pow(2,ie)} 0<=z<=25 `);this.z=ie,this.x=le,this.y=pe,this.key=ol(0,ie,ie,le,pe)}equals(ie){return this.z===ie.z&&this.x===ie.x&&this.y===ie.y}url(ie,le,pe){const ge=(Se=this.y,ke=this.z,Le=rp(256*(xe=this.x),256*(Se=Math.pow(2,ke)-Se-1),ke),Ve=rp(256*(xe+1),256*(Se+1),ke),Le[0]+","+Le[1]+","+Ve[0]+","+Ve[1]);var xe,Se,ke,Le,Ve;const Ne=function(He,et,nt){let ot,ut="";for(let gt=He;gt>0;gt--)ot=1<<gt-1,ut+=(et&ot?1:0)+(nt&ot?2:0);return ut}(this.z,this.x,this.y);return ie[(this.x+this.y)%ie.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(pe==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,le>1?"@2x":"").replace(/{quadkey}/g,Ne).replace(/{bbox-epsg-3857}/g,ge)}isChildOf(ie){const le=this.z-ie.z;return le>0&&ie.x===this.x>>le&&ie.y===this.y>>le}getTilePoint(ie){const le=Math.pow(2,this.z);return new me((ie.x*le-this.x)*je,(ie.y*le-this.y)*je)}toString(){return`${this.z}/${this.x}/${this.y}`}}class ip{constructor(ie,le){this.wrap=ie,this.canonical=le,this.key=ol(ie,le.z,le.z,le.x,le.y)}}class rs{constructor(ie,le,pe,ge,xe){if(this.terrainRttPosMatrix32f=null,ie<pe)throw new Error(`overscaledZ should be >= z; overscaledZ = ${ie}; z = ${pe}`);this.overscaledZ=ie,this.wrap=le,this.canonical=new Vu(pe,+ge,+xe),this.key=ol(le,ie,pe,ge,xe)}clone(){return new rs(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(ie){return this.overscaledZ===ie.overscaledZ&&this.wrap===ie.wrap&&this.canonical.equals(ie.canonical)}scaledTo(ie){if(ie>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${ie}; overscaledZ = ${this.overscaledZ}`);const le=this.canonical.z-ie;return ie>this.canonical.z?new rs(ie,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new rs(ie,this.wrap,ie,this.canonical.x>>le,this.canonical.y>>le)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(ie,le){if(ie>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${ie}; overscaledZ = ${this.overscaledZ}`);const pe=this.canonical.z-ie;return ie>this.canonical.z?ol(this.wrap*+le,ie,this.canonical.z,this.canonical.x,this.canonical.y):ol(this.wrap*+le,ie,ie,this.canonical.x>>pe,this.canonical.y>>pe)}isChildOf(ie){if(ie.wrap!==this.wrap||this.overscaledZ-ie.overscaledZ<=0)return!1;if(ie.overscaledZ===0)return this.overscaledZ>0;const le=this.canonical.z-ie.canonical.z;return!(le<0)&&ie.canonical.x===this.canonical.x>>le&&ie.canonical.y===this.canonical.y>>le}children(ie){if(this.overscaledZ>=ie)return[new rs(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const le=this.canonical.z+1,pe=2*this.canonical.x,ge=2*this.canonical.y;return[new rs(le,this.wrap,le,pe,ge),new rs(le,this.wrap,le,pe+1,ge),new rs(le,this.wrap,le,pe,ge+1),new rs(le,this.wrap,le,pe+1,ge+1)]}isLessThan(ie){return this.wrap<ie.wrap||!(this.wrap>ie.wrap)&&(this.overscaledZ<ie.overscaledZ||!(this.overscaledZ>ie.overscaledZ)&&(this.canonical.x<ie.canonical.x||!(this.canonical.x>ie.canonical.x)&&this.canonical.y<ie.canonical.y))}wrapped(){return new rs(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(ie){return new rs(this.overscaledZ,ie,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new ip(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(ie){return this.canonical.getTilePoint(new fc(ie.x-this.wrap,ie.y))}}function ol(ce,ie,le,pe,ge){(ce*=2)<0&&(ce=-1*ce-1);const xe=1<<le;return(xe*xe*ce+xe*ge+pe).toString(36)+le.toString(36)+ie.toString(36)}function mc(ce,ie){return ie?ce.properties[ie]:ce.id}Rr("CanonicalTileID",Vu),Rr("OverscaledTileID",rs,{omit:["terrainRttPosMatrix32f"]});class ra{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(ie){return this.minX=Math.min(this.minX,ie.x),this.minY=Math.min(this.minY,ie.y),this.maxX=Math.max(this.maxX,ie.x),this.maxY=Math.max(this.maxY,ie.y),this}expandBy(ie){return this.minX-=ie,this.minY-=ie,this.maxX+=ie,this.maxY+=ie,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(ie){return this.expandBy(-ie)}map(ie){const le=new ra;return le.extend(ie(new me(this.minX,this.minY))),le.extend(ie(new me(this.maxX,this.minY))),le.extend(ie(new me(this.minX,this.maxY))),le.extend(ie(new me(this.maxX,this.maxY))),le}static fromPoints(ie){const le=new ra;for(const pe of ie)le.extend(pe);return le}contains(ie){return ie.x>=this.minX&&ie.x<=this.maxX&&ie.y>=this.minY&&ie.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(ie){return!this.empty()&&!ie.empty()&&ie.minX>=this.minX&&ie.maxX<=this.maxX&&ie.minY>=this.minY&&ie.maxY<=this.maxY}intersects(ie){return!this.empty()&&!ie.empty()&&ie.minX<=this.maxX&&ie.maxX>=this.minX&&ie.minY<=this.maxY&&ie.maxY>=this.minY}}class np{constructor(ie){this._stringToNumber={},this._numberToString=[];for(let le=0;le<ie.length;le++){const pe=ie[le];this._stringToNumber[pe]=le,this._numberToString[le]=pe}}encode(ie){return this._stringToNumber[ie]}decode(ie){if(ie>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${ie} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[ie]}}class sp{constructor(ie,le,pe,ge,xe){this.type="Feature",this._vectorTileFeature=ie,ie._z=le,ie._x=pe,ie._y=ge,this.properties=ie.properties,this.id=xe}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(ie){this._geometry=ie}toJSON(){const ie={geometry:this.geometry};for(const le in this)le!=="_geometry"&&le!=="_vectorTileFeature"&&(ie[le]=this[le]);return ie}}class op{constructor(ie,le){this.tileID=ie,this.x=ie.canonical.x,this.y=ie.canonical.y,this.z=ie.canonical.z,this.grid=new ms(je,16,0),this.grid3D=new ms(je,16,0),this.featureIndexArray=new kt,this.promoteId=le}insert(ie,le,pe,ge,xe,Se){const ke=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(pe,ge,xe);const Le=Se?this.grid3D:this.grid;for(let Ve=0;Ve<le.length;Ve++){const Ne=le[Ve],He=[1/0,1/0,-1/0,-1/0];for(let et=0;et<Ne.length;et++){const nt=Ne[et];He[0]=Math.min(He[0],nt.x),He[1]=Math.min(He[1],nt.y),He[2]=Math.max(He[2],nt.x),He[3]=Math.max(He[3],nt.y)}He[0]<je&&He[1]<je&&He[2]>=0&&He[3]>=0&&Le.insert(ke,He[0],He[1],He[2],He[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Sd(new Mu(this.rawTileData)).layers,this.sourceLayerCoder=new np(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(ie,le,pe,ge){this.loadVTLayers();const xe=ie.params,Se=je/ie.tileSize/ie.scale,ke=mo(xe.filter,xe.globalState),Le=ie.queryGeometry,Ve=ie.queryPadding*Se,Ne=ra.fromPoints(Le),He=this.grid.query(Ne.minX-Ve,Ne.minY-Ve,Ne.maxX+Ve,Ne.maxY+Ve),et=ra.fromPoints(ie.cameraQueryGeometry).expandBy(Ve),nt=this.grid3D.query(et.minX,et.minY,et.maxX,et.maxY,(gt,St,$t,Et)=>function(zt,Ht,rr,vr,Ar){for(const Pr of zt)if(Ht<=Pr.x&&rr<=Pr.y&&vr>=Pr.x&&Ar>=Pr.y)return!0;const Sr=[new me(Ht,rr),new me(Ht,Ar),new me(vr,Ar),new me(vr,rr)];if(zt.length>2){for(const Pr of Sr)if(Ka(zt,Pr))return!0}for(let Pr=0;Pr<zt.length-1;Pr++)if(Rp(zt[Pr],zt[Pr+1],Sr))return!0;return!1}(ie.cameraQueryGeometry,gt-Ve,St-Ve,$t+Ve,Et+Ve));for(const gt of nt)He.push(gt);He.sort(om);const ot={};let ut;for(let gt=0;gt<He.length;gt++){const St=He[gt];if(St===ut)continue;ut=St;const $t=this.featureIndexArray.get(St);let Et=null;this.loadMatchingFeature(ot,$t.bucketIndex,$t.sourceLayerIndex,$t.featureIndex,ke,xe.layers,xe.availableImages,le,pe,ge,(zt,Ht,rr)=>(Et||(Et=vs(zt)),Ht.queryIntersectsFeature({queryGeometry:Le,feature:zt,featureState:rr,geometry:Et,zoom:this.z,transform:ie.transform,pixelsToTileUnits:Se,pixelPosMatrix:ie.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:ie.getElevation})))}return ot}loadMatchingFeature(ie,le,pe,ge,xe,Se,ke,Le,Ve,Ne,He){const et=this.bucketLayerIDs[le];if(Se&&!et.some(gt=>Se.has(gt)))return;const nt=this.sourceLayerCoder.decode(pe),ot=this.vtLayers[nt].feature(ge);if(xe.needGeometry){const gt=Qo(ot,!0);if(!xe.filter(new Li(this.tileID.overscaledZ),gt,this.tileID.canonical))return}else if(!xe.filter(new Li(this.tileID.overscaledZ),ot))return;const ut=this.getId(ot,nt);for(let gt=0;gt<et.length;gt++){const St=et[gt];if(Se&&!Se.has(St))continue;const $t=Le[St];if(!$t)continue;let Et={};ut&&Ne&&(Et=Ne.getState($t.sourceLayer||"_geojsonTileLayer",ut));const zt=Nr({},Ve[St]);zt.paint=ap(zt.paint,$t.paint,ot,Et,ke),zt.layout=ap(zt.layout,$t.layout,ot,Et,ke);const Ht=!He||He(ot,$t,Et);if(!Ht)continue;const rr=new sp(ot,this.z,this.x,this.y,ut);rr.layer=zt;let vr=ie[St];vr===void 0&&(vr=ie[St]=[]),vr.push({featureIndex:ge,feature:rr,intersectionZ:Ht})}}lookupSymbolFeatures(ie,le,pe,ge,xe,Se,ke,Le){const Ve={};this.loadVTLayers();const Ne=mo(xe.filterSpec,xe.globalState);for(const He of ie)this.loadMatchingFeature(Ve,pe,ge,He,Ne,Se,ke,Le,le);return Ve}hasLayer(ie){for(const le of this.bucketLayerIDs)for(const pe of le)if(ie===pe)return!0;return!1}getId(ie,le){var pe;let ge=ie.id;return this.promoteId&&(ge=ie.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[le]],typeof ge=="boolean"&&(ge=Number(ge)),ge===void 0&&((pe=ie.properties)===null||pe===void 0?void 0:pe.cluster)&&this.promoteId&&(ge=Number(ie.properties.cluster_id))),ge}}function ap(ce,ie,le,pe,ge){return Gr(ce,(xe,Se)=>{const ke=ie instanceof So?ie.get(Se):null;return ke&&ke.evaluate?ke.evaluate(le,pe,ge):ke})}function om(ce,ie){return ie-ce}function lp(ce,ie,le,pe,ge){const xe=[];for(let Se=0;Se<ce.length;Se++){const ke=ce[Se];let Le;for(let Ve=0;Ve<ke.length-1;Ve++){let Ne=ke[Ve],He=ke[Ve+1];Ne.x<ie&&He.x<ie||(Ne.x<ie?Ne=new me(ie,Ne.y+(ie-Ne.x)/(He.x-Ne.x)*(He.y-Ne.y))._round():He.x<ie&&(He=new me(ie,Ne.y+(ie-Ne.x)/(He.x-Ne.x)*(He.y-Ne.y))._round()),Ne.y<le&&He.y<le||(Ne.y<le?Ne=new me(Ne.x+(le-Ne.y)/(He.y-Ne.y)*(He.x-Ne.x),le)._round():He.y<le&&(He=new me(Ne.x+(le-Ne.y)/(He.y-Ne.y)*(He.x-Ne.x),le)._round()),Ne.x>=pe&&He.x>=pe||(Ne.x>=pe?Ne=new me(pe,Ne.y+(pe-Ne.x)/(He.x-Ne.x)*(He.y-Ne.y))._round():He.x>=pe&&(He=new me(pe,Ne.y+(pe-Ne.x)/(He.x-Ne.x)*(He.y-Ne.y))._round()),Ne.y>=ge&&He.y>=ge||(Ne.y>=ge?Ne=new me(Ne.x+(ge-Ne.y)/(He.y-Ne.y)*(He.x-Ne.x),ge)._round():He.y>=ge&&(He=new me(Ne.x+(ge-Ne.y)/(He.y-Ne.y)*(He.x-Ne.x),ge)._round()),Le&&Ne.equals(Le[Le.length-1])||(Le=[Ne],xe.push(Le)),Le.push(He)))))}}return xe}Rr("FeatureIndex",op,{omit:["rawTileData","sourceLayerCoder"]});class Io extends me{constructor(ie,le,pe,ge){super(ie,le),this.angle=pe,ge!==void 0&&(this.segment=ge)}clone(){return new Io(this.x,this.y,this.angle,this.segment)}}function cp(ce,ie,le,pe,ge){if(ie.segment===void 0||le===0)return!0;let xe=ie,Se=ie.segment+1,ke=0;for(;ke>-le/2;){if(Se--,Se<0)return!1;ke-=ce[Se].dist(xe),xe=ce[Se]}ke+=ce[Se].dist(ce[Se+1]),Se++;const Le=[];let Ve=0;for(;ke<le/2;){const Ne=ce[Se],He=ce[Se+1];if(!He)return!1;let et=ce[Se-1].angleTo(Ne)-Ne.angleTo(He);for(et=Math.abs((et+3*Math.PI)%(2*Math.PI)-Math.PI),Le.push({distance:ke,angleDelta:et}),Ve+=et;ke-Le[0].distance>pe;)Ve-=Le.shift().angleDelta;if(Ve>ge)return!1;Se++,ke+=Ne.dist(He)}return!0}function hp(ce){let ie=0;for(let le=0;le<ce.length-1;le++)ie+=ce[le].dist(ce[le+1]);return ie}function up(ce,ie,le){return ce?.6*ie*le:0}function dp(ce,ie){return Math.max(ce?ce.right-ce.left:0,ie?ie.right-ie.left:0)}function am(ce,ie,le,pe,ge,xe){const Se=up(le,ge,xe),ke=dp(le,pe)*xe;let Le=0;const Ve=hp(ce)/2;for(let Ne=0;Ne<ce.length-1;Ne++){const He=ce[Ne],et=ce[Ne+1],nt=He.dist(et);if(Le+nt>Ve){const ot=(Ve-Le)/nt,ut=Rn.number(He.x,et.x,ot),gt=Rn.number(He.y,et.y,ot),St=new Io(ut,gt,et.angleTo(He),Ne);return St._round(),!Se||cp(ce,St,ke,Se,ie)?St:void 0}Le+=nt}}function lm(ce,ie,le,pe,ge,xe,Se,ke,Le){const Ve=up(pe,xe,Se),Ne=dp(pe,ge),He=Ne*Se,et=ce[0].x===0||ce[0].x===Le||ce[0].y===0||ce[0].y===Le;return ie-He<ie/4&&(ie=He+ie/4),pp(ce,et?ie/2*ke%ie:(Ne/2+2*xe)*Se*ke%ie,ie,Ve,le,He,et,!1,Le)}function pp(ce,ie,le,pe,ge,xe,Se,ke,Le){const Ve=xe/2,Ne=hp(ce);let He=0,et=ie-le,nt=[];for(let ot=0;ot<ce.length-1;ot++){const ut=ce[ot],gt=ce[ot+1],St=ut.dist(gt),$t=gt.angleTo(ut);for(;et+le<He+St;){et+=le;const Et=(et-He)/St,zt=Rn.number(ut.x,gt.x,Et),Ht=Rn.number(ut.y,gt.y,Et);if(zt>=0&&zt<Le&&Ht>=0&&Ht<Le&&et-Ve>=0&&et+Ve<=Ne){const rr=new Io(zt,Ht,$t,ot);rr._round(),pe&&!cp(ce,rr,xe,pe,ge)||nt.push(rr)}}He+=St}return ke||nt.length||Se||(nt=pp(ce,He/2,le,pe,ge,xe,Se,!0,Le)),nt}function fp(ce,ie,le,pe){const ge=[],xe=ce.image,Se=xe.pixelRatio,ke=xe.paddedRect.w-2,Le=xe.paddedRect.h-2;let Ve={x1:ce.left,y1:ce.top,x2:ce.right,y2:ce.bottom};const Ne=xe.stretchX||[[0,ke]],He=xe.stretchY||[[0,Le]],et=(pr,Kr)=>pr+Kr[1]-Kr[0],nt=Ne.reduce(et,0),ot=He.reduce(et,0),ut=ke-nt,gt=Le-ot;let St=0,$t=nt,Et=0,zt=ot,Ht=0,rr=ut,vr=0,Ar=gt;if(xe.content&&pe){const pr=xe.content,Kr=pr[2]-pr[0],ii=pr[3]-pr[1];(xe.textFitWidth||xe.textFitHeight)&&(Ve=jd(ce)),St=Bh(Ne,0,pr[0]),Et=Bh(He,0,pr[1]),$t=Bh(Ne,pr[0],pr[2]),zt=Bh(He,pr[1],pr[3]),Ht=pr[0]-St,vr=pr[1]-Et,rr=Kr-$t,Ar=ii-zt}const Sr=Ve.x1,Pr=Ve.y1,jr=Ve.x2-Sr,Tr=Ve.y2-Pr,Er=(pr,Kr,ii,Hr)=>{const Or=Oh(pr.stretch-St,$t,jr,Sr),bi=Vh(pr.fixed-Ht,rr,pr.stretch,nt),Ji=Oh(Kr.stretch-Et,zt,Tr,Pr),hn=Vh(Kr.fixed-vr,Ar,Kr.stretch,ot),Ln=Oh(ii.stretch-St,$t,jr,Sr),is=Vh(ii.fixed-Ht,rr,ii.stretch,nt),Gn=Oh(Hr.stretch-Et,zt,Tr,Pr),Tn=Vh(Hr.fixed-vr,Ar,Hr.stretch,ot),Zi=new me(Or,Ji),_n=new me(Ln,Ji),Cn=new me(Ln,Gn),Pn=new me(Or,Gn),$n=new me(bi/Se,hn/Se),ns=new me(is/Se,Tn/Se),yn=ie*Math.PI/180;if(yn){const vn=Math.sin(yn),bn=Math.cos(yn),sn=[bn,-vn,vn,bn];Zi._matMult(sn),_n._matMult(sn),Pn._matMult(sn),Cn._matMult(sn)}const Hn=pr.stretch+pr.fixed,un=Kr.stretch+Kr.fixed;return{tl:Zi,tr:_n,bl:Pn,br:Cn,tex:{x:xe.paddedRect.x+1+Hn,y:xe.paddedRect.y+1+un,w:ii.stretch+ii.fixed-Hn,h:Hr.stretch+Hr.fixed-un},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:$n,pixelOffsetBR:ns,minFontScaleX:rr/Se/jr,minFontScaleY:Ar/Se/Tr,isSDF:le}};if(pe&&(xe.stretchX||xe.stretchY)){const pr=mp(Ne,ut,nt),Kr=mp(He,gt,ot);for(let ii=0;ii<pr.length-1;ii++){const Hr=pr[ii],Or=pr[ii+1];for(let bi=0;bi<Kr.length-1;bi++)ge.push(Er(Hr,Kr[bi],Or,Kr[bi+1]))}}else ge.push(Er({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:ke+1},{fixed:0,stretch:Le+1}));return ge}function Bh(ce,ie,le){let pe=0;for(const ge of ce)pe+=Math.max(ie,Math.min(le,ge[1]))-Math.max(ie,Math.min(le,ge[0]));return pe}function mp(ce,ie,le){const pe=[{fixed:-1,stretch:0}];for(const[ge,xe]of ce){const Se=pe[pe.length-1];pe.push({fixed:ge-Se.stretch,stretch:Se.stretch}),pe.push({fixed:ge-Se.stretch,stretch:Se.stretch+(xe-ge)})}return pe.push({fixed:ie+1,stretch:le}),pe}function Oh(ce,ie,le,pe){return ce/ie*le+pe}function Vh(ce,ie,le,pe){return ce-ie*le/pe}Rr("Anchor",Io);class Nh{constructor(ie,le,pe,ge,xe,Se,ke,Le,Ve,Ne){var He;if(this.boxStartIndex=ie.length,Ve){let et=Se.top,nt=Se.bottom;const ot=Se.collisionPadding;ot&&(et-=ot[1],nt+=ot[3]);let ut=nt-et;ut>0&&(ut=Math.max(10,ut),this.circleDiameter=ut)}else{const et=((He=Se.image)===null||He===void 0?void 0:He.content)&&(Se.image.textFitWidth||Se.image.textFitHeight)?jd(Se):{x1:Se.left,y1:Se.top,x2:Se.right,y2:Se.bottom};et.y1=et.y1*ke-Le[0],et.y2=et.y2*ke+Le[2],et.x1=et.x1*ke-Le[3],et.x2=et.x2*ke+Le[1];const nt=Se.collisionPadding;if(nt&&(et.x1-=nt[0]*ke,et.y1-=nt[1]*ke,et.x2+=nt[2]*ke,et.y2+=nt[3]*ke),Ne){const ot=new me(et.x1,et.y1),ut=new me(et.x2,et.y1),gt=new me(et.x1,et.y2),St=new me(et.x2,et.y2),$t=Ne*Math.PI/180;ot._rotate($t),ut._rotate($t),gt._rotate($t),St._rotate($t),et.x1=Math.min(ot.x,ut.x,gt.x,St.x),et.x2=Math.max(ot.x,ut.x,gt.x,St.x),et.y1=Math.min(ot.y,ut.y,gt.y,St.y),et.y2=Math.max(ot.y,ut.y,gt.y,St.y)}ie.emplaceBack(le.x,le.y,et.x1,et.y1,et.x2,et.y2,pe,ge,xe)}this.boxEndIndex=ie.length}}class cm{constructor(ie=[],le=(pe,ge)=>pe<ge?-1:pe>ge?1:0){if(this.data=ie,this.length=this.data.length,this.compare=le,this.length>0)for(let pe=(this.length>>1)-1;pe>=0;pe--)this._down(pe)}push(ie){this.data.push(ie),this._up(this.length++)}pop(){if(this.length===0)return;const ie=this.data[0],le=this.data.pop();return--this.length>0&&(this.data[0]=le,this._down(0)),ie}peek(){return this.data[0]}_up(ie){const{data:le,compare:pe}=this,ge=le[ie];for(;ie>0;){const xe=ie-1>>1,Se=le[xe];if(pe(ge,Se)>=0)break;le[ie]=Se,ie=xe}le[ie]=ge}_down(ie){const{data:le,compare:pe}=this,ge=this.length>>1,xe=le[ie];for(;ie<ge;){let Se=1+(ie<<1);const ke=Se+1;if(ke<this.length&&pe(le[ke],le[Se])<0&&(Se=ke),pe(le[Se],xe)>=0)break;le[ie]=le[Se],ie=Se}le[ie]=xe}}function hm(ce,ie=1,le=!1){const pe=ra.fromPoints(ce[0]),ge=Math.min(pe.width(),pe.height());let xe=ge/2;const Se=new cm([],um),{minX:ke,minY:Le,maxX:Ve,maxY:Ne}=pe;if(ge===0)return new me(ke,Le);for(let nt=ke;nt<Ve;nt+=ge)for(let ot=Le;ot<Ne;ot+=ge)Se.push(new al(nt+xe,ot+xe,xe,ce));let He=function(nt){let ot=0,ut=0,gt=0;const St=nt[0];for(let $t=0,Et=St.length,zt=Et-1;$t<Et;zt=$t++){const Ht=St[$t],rr=St[zt],vr=Ht.x*rr.y-rr.x*Ht.y;ut+=(Ht.x+rr.x)*vr,gt+=(Ht.y+rr.y)*vr,ot+=3*vr}return new al(ut/ot,gt/ot,0,nt)}(ce),et=Se.length;for(;Se.length;){const nt=Se.pop();(nt.d>He.d||!He.d)&&(He=nt,le&&console.log("found best %d after %d probes",Math.round(1e4*nt.d)/1e4,et)),nt.max-He.d<=ie||(xe=nt.h/2,Se.push(new al(nt.p.x-xe,nt.p.y-xe,xe,ce)),Se.push(new al(nt.p.x+xe,nt.p.y-xe,xe,ce)),Se.push(new al(nt.p.x-xe,nt.p.y+xe,xe,ce)),Se.push(new al(nt.p.x+xe,nt.p.y+xe,xe,ce)),et+=4)}return le&&(console.log(`num probes: ${et}`),console.log(`best distance: ${He.d}`)),He.p}function um(ce,ie){return ie.max-ce.max}function al(ce,ie,le,pe){this.p=new me(ce,ie),this.h=le,this.d=function(ge,xe){let Se=!1,ke=1/0;for(let Le=0;Le<xe.length;Le++){const Ve=xe[Le];for(let Ne=0,He=Ve.length,et=He-1;Ne<He;et=Ne++){const nt=Ve[Ne],ot=Ve[et];nt.y>ge.y!=ot.y>ge.y&&ge.x<(ot.x-nt.x)*(ge.y-nt.y)/(ot.y-nt.y)+nt.x&&(Se=!Se),ke=Math.min(ke,ed(ge,nt,ot))}}return(Se?1:-1)*Math.sqrt(ke)}(this.p,pe),this.max=this.d+this.h*Math.SQRT2}var In;de.aE=void 0,(In=de.aE||(de.aE={}))[In.center=1]="center",In[In.left=2]="left",In[In.right=3]="right",In[In.top=4]="top",In[In.bottom=5]="bottom",In[In["top-left"]=6]="top-left",In[In["top-right"]=7]="top-right",In[In["bottom-left"]=8]="bottom-left",In[In["bottom-right"]=9]="bottom-right";const Nu=Number.POSITIVE_INFINITY;function gp(ce,ie){return ie[1]!==Nu?function(le,pe,ge){let xe=0,Se=0;switch(pe=Math.abs(pe),ge=Math.abs(ge),le){case"top-right":case"top-left":case"top":Se=ge-7;break;case"bottom-right":case"bottom-left":case"bottom":Se=7-ge}switch(le){case"top-right":case"bottom-right":case"right":xe=-pe;break;case"top-left":case"bottom-left":case"left":xe=pe}return[xe,Se]}(ce,ie[0],ie[1]):function(le,pe){let ge=0,xe=0;pe<0&&(pe=0);const Se=pe/Math.SQRT2;switch(le){case"top-right":case"top-left":xe=Se-7;break;case"bottom-right":case"bottom-left":xe=7-Se;break;case"bottom":xe=7-pe;break;case"top":xe=pe-7}switch(le){case"top-right":case"bottom-right":ge=-Se;break;case"top-left":case"bottom-left":ge=Se;break;case"left":ge=pe;break;case"right":ge=-pe}return[ge,xe]}(ce,ie[0])}function _p(ce,ie,le){var pe;const ge=ce.layout,xe=(pe=ge.get("text-variable-anchor-offset"))===null||pe===void 0?void 0:pe.evaluate(ie,{},le);if(xe){const ke=xe.values,Le=[];for(let Ve=0;Ve<ke.length;Ve+=2){const Ne=Le[Ve]=ke[Ve],He=ke[Ve+1].map(et=>et*gn);Ne.startsWith("top")?He[1]-=7:Ne.startsWith("bottom")&&(He[1]+=7),Le[Ve+1]=He}return new wn(Le)}const Se=ge.get("text-variable-anchor");if(Se){let ke;ke=ce._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[ge.get("text-radial-offset").evaluate(ie,{},le)*gn,Nu]:ge.get("text-offset").evaluate(ie,{},le).map(Ve=>Ve*gn);const Le=[];for(const Ve of Se)Le.push(Ve,gp(Ve,ke));return new wn(Le)}return null}function $u(ce){switch(ce){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function dm(ce,ie,le,pe,ge,xe,Se,ke,Le,Ve,Ne,He){let et=xe.textMaxSize.evaluate(ie,{});et===void 0&&(et=Se);const nt=ce.layers[0].layout,ot=nt.get("icon-offset").evaluate(ie,{},Ne),ut=vp(le.horizontal),gt=Se/24,St=ce.tilePixelRatio*gt,$t=ce.tilePixelRatio*et/24,Et=ce.tilePixelRatio*ke,zt=ce.tilePixelRatio*nt.get("symbol-spacing"),Ht=nt.get("text-padding")*ce.tilePixelRatio,rr=function(ii,Hr,Or,bi=1){const Ji=ii.get("icon-padding").evaluate(Hr,{},Or),hn=Ji&&Ji.values;return[hn[0]*bi,hn[1]*bi,hn[2]*bi,hn[3]*bi]}(nt,ie,Ne,ce.tilePixelRatio),vr=nt.get("text-max-angle")/180*Math.PI,Ar=nt.get("text-rotation-alignment")!=="viewport"&&nt.get("symbol-placement")!=="point",Sr=nt.get("icon-rotation-alignment")==="map"&&nt.get("symbol-placement")!=="point",Pr=nt.get("symbol-placement"),jr=zt/2,Tr=nt.get("icon-text-fit");let Er;pe&&Tr!=="none"&&(ce.allowVerticalPlacement&&le.vertical&&(Er=Wd(pe,le.vertical,Tr,nt.get("icon-text-fit-padding"),ot,gt)),ut&&(pe=Wd(pe,ut,Tr,nt.get("icon-text-fit-padding"),ot,gt)));const pr=Ne?He.line.getGranularityForZoomLevel(Ne.z):1,Kr=(ii,Hr)=>{Hr.x<0||Hr.x>=je||Hr.y<0||Hr.y>=je||function(Or,bi,Ji,hn,Ln,is,Gn,Tn,Zi,_n,Cn,Pn,$n,ns,yn,Hn,un,vn,bn,sn,Vi,bs,ll,xs,mm){const cl=Or.addToLineVertexArray(bi,Ji);let ia,hl,ul,dl,Sp=0,Tp=0,Cp=0,Pp=0,Xu=-1,Yu=-1;const Qs={};let Ep=ks("");if(Or.allowVerticalPlacement&&hn.vertical){const Bn=Tn.layout.get("text-rotate").evaluate(Vi,{},xs)+90;ul=new Nh(Zi,bi,_n,Cn,Pn,hn.vertical,$n,ns,yn,Bn),Gn&&(dl=new Nh(Zi,bi,_n,Cn,Pn,Gn,un,vn,yn,Bn))}if(Ln){const Bn=Tn.layout.get("icon-rotate").evaluate(Vi,{}),ss=Tn.layout.get("icon-text-fit")!=="none",na=fp(Ln,Bn,ll,ss),Ss=Gn?fp(Gn,Bn,ll,ss):void 0;hl=new Nh(Zi,bi,_n,Cn,Pn,Ln,un,vn,!1,Bn),Sp=4*na.length;const sa=Or.iconSizeData;let Fs=null;sa.kind==="source"?(Fs=[Js*Tn.layout.get("icon-size").evaluate(Vi,{})],Fs[0]>Ao&&fr(`${Or.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):sa.kind==="composite"&&(Fs=[Js*bs.compositeIconSizes[0].evaluate(Vi,{},xs),Js*bs.compositeIconSizes[1].evaluate(Vi,{},xs)],(Fs[0]>Ao||Fs[1]>Ao)&&fr(`${Or.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Or.addSymbols(Or.icon,na,Fs,sn,bn,Vi,de.ao.none,bi,cl.lineStartIndex,cl.lineLength,-1,xs),Xu=Or.icon.placedSymbolArray.length-1,Ss&&(Tp=4*Ss.length,Or.addSymbols(Or.icon,Ss,Fs,sn,bn,Vi,de.ao.vertical,bi,cl.lineStartIndex,cl.lineLength,-1,xs),Yu=Or.icon.placedSymbolArray.length-1)}const Mp=Object.keys(hn.horizontal);for(const Bn of Mp){const ss=hn.horizontal[Bn];if(!ia){Ep=ks(ss.text);const Ss=Tn.layout.get("text-rotate").evaluate(Vi,{},xs);ia=new Nh(Zi,bi,_n,Cn,Pn,ss,$n,ns,yn,Ss)}const na=ss.positionedLines.length===1;if(Cp+=yp(Or,bi,ss,is,Tn,yn,Vi,Hn,cl,hn.vertical?de.ao.horizontal:de.ao.horizontalOnly,na?Mp:[Bn],Qs,Xu,bs,xs),na)break}hn.vertical&&(Pp+=yp(Or,bi,hn.vertical,is,Tn,yn,Vi,Hn,cl,de.ao.vertical,["vertical"],Qs,Yu,bs,xs));const gm=ia?ia.boxStartIndex:Or.collisionBoxArray.length,_m=ia?ia.boxEndIndex:Or.collisionBoxArray.length,ym=ul?ul.boxStartIndex:Or.collisionBoxArray.length,vm=ul?ul.boxEndIndex:Or.collisionBoxArray.length,bm=hl?hl.boxStartIndex:Or.collisionBoxArray.length,xm=hl?hl.boxEndIndex:Or.collisionBoxArray.length,wm=dl?dl.boxStartIndex:Or.collisionBoxArray.length,Sm=dl?dl.boxEndIndex:Or.collisionBoxArray.length;let ws=-1;const qh=(Bn,ss)=>Bn&&Bn.circleDiameter?Math.max(Bn.circleDiameter,ss):ss;ws=qh(ia,ws),ws=qh(ul,ws),ws=qh(hl,ws),ws=qh(dl,ws);const Ap=ws>-1?1:0;Ap&&(ws*=mm/gn),Or.glyphOffsetArray.length>=sl.MAX_GLYPHS&&fr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Vi.sortKey!==void 0&&Or.addToSortKeyRanges(Or.symbolInstances.length,Vi.sortKey);const Tm=_p(Tn,Vi,xs),[Cm,Pm]=function(Bn,ss){const na=Bn.length,Ss=ss==null?void 0:ss.values;if((Ss==null?void 0:Ss.length)>0)for(let sa=0;sa<Ss.length;sa+=2){const Fs=Ss[sa+1];Bn.emplaceBack(de.aE[Ss[sa]],Fs[0],Fs[1])}return[na,Bn.length]}(Or.textAnchorOffsets,Tm);Or.symbolInstances.emplaceBack(bi.x,bi.y,Qs.right>=0?Qs.right:-1,Qs.center>=0?Qs.center:-1,Qs.left>=0?Qs.left:-1,Qs.vertical||-1,Xu,Yu,Ep,gm,_m,ym,vm,bm,xm,wm,Sm,_n,Cp,Pp,Sp,Tp,Ap,0,$n,ws,Cm,Pm)}(ce,Hr,ii,le,pe,ge,Er,ce.layers[0],ce.collisionBoxArray,ie.index,ie.sourceLayerIndex,ce.index,St,[Ht,Ht,Ht,Ht],Ar,Le,Et,rr,Sr,ot,ie,xe,Ve,Ne,Se)};if(Pr==="line")for(const ii of lp(ie.geometry,0,0,je,je)){const Hr=ta(ii,pr),Or=lm(Hr,zt,vr,le.vertical||ut,pe,24,$t,ce.overscaling,je);for(const bi of Or)ut&&pm(ce,ut.text,jr,bi)||Kr(Hr,bi)}else if(Pr==="line-center"){for(const ii of ie.geometry)if(ii.length>1){const Hr=ta(ii,pr),Or=am(Hr,vr,le.vertical||ut,pe,24,$t);Or&&Kr(Hr,Or)}}else if(ie.type==="Polygon")for(const ii of lo(ie.geometry,0)){const Hr=hm(ii,16);Kr(ta(ii[0],pr,!0),new Io(Hr.x,Hr.y,0))}else if(ie.type==="LineString")for(const ii of ie.geometry){const Hr=ta(ii,pr);Kr(Hr,new Io(Hr[0].x,Hr[0].y,0))}else if(ie.type==="Point")for(const ii of ie.geometry)for(const Hr of ii)Kr([Hr],new Io(Hr.x,Hr.y,0))}function yp(ce,ie,le,pe,ge,xe,Se,ke,Le,Ve,Ne,He,et,nt,ot){const ut=function($t,Et,zt,Ht,rr,vr,Ar,Sr){const Pr=Ht.layout.get("text-rotate").evaluate(vr,{})*Math.PI/180,jr=[];for(const Tr of Et.positionedLines)for(const Er of Tr.positionedGlyphs){if(!Er.rect)continue;const pr=Er.rect||{};let Kr=4,ii=!0,Hr=1,Or=0;const bi=(rr||Sr)&&Er.vertical,Ji=Er.metrics.advance*Er.scale/2;if(Sr&&Et.verticalizable&&(Or=Tr.lineOffset/2-(Er.imageName?-(gn-Er.metrics.width*Er.scale)/2:(Er.scale-1)*gn)),Er.imageName){const vn=Ar[Er.imageName];ii=vn.sdf,Hr=vn.pixelRatio,Kr=1/Hr}const hn=rr?[Er.x+Ji,Er.y]:[0,0];let Ln=rr?[0,0]:[Er.x+Ji+zt[0],Er.y+zt[1]-Or],is=[0,0];bi&&(is=Ln,Ln=[0,0]);const Gn=Er.metrics.isDoubleResolution?2:1,Tn=(Er.metrics.left-Kr)*Er.scale-Ji+Ln[0],Zi=(-Er.metrics.top-Kr)*Er.scale+Ln[1],_n=Tn+pr.w/Gn*Er.scale/Hr,Cn=Zi+pr.h/Gn*Er.scale/Hr,Pn=new me(Tn,Zi),$n=new me(_n,Zi),ns=new me(Tn,Cn),yn=new me(_n,Cn);if(bi){const vn=new me(-Ji,Ji- -17),bn=-Math.PI/2,sn=12-Ji,Vi=new me(22-sn,-(Er.imageName?sn:0)),bs=new me(...is);Pn._rotateAround(bn,vn)._add(Vi)._add(bs),$n._rotateAround(bn,vn)._add(Vi)._add(bs),ns._rotateAround(bn,vn)._add(Vi)._add(bs),yn._rotateAround(bn,vn)._add(Vi)._add(bs)}if(Pr){const vn=Math.sin(Pr),bn=Math.cos(Pr),sn=[bn,-vn,vn,bn];Pn._matMult(sn),$n._matMult(sn),ns._matMult(sn),yn._matMult(sn)}const Hn=new me(0,0),un=new me(0,0);jr.push({tl:Pn,tr:$n,bl:ns,br:yn,tex:pr,writingMode:Et.writingMode,glyphOffset:hn,sectionIndex:Er.sectionIndex,isSDF:ii,pixelOffsetTL:Hn,pixelOffsetBR:un,minFontScaleX:0,minFontScaleY:0})}return jr}(0,le,ke,ge,xe,Se,pe,ce.allowVerticalPlacement),gt=ce.textSizeData;let St=null;gt.kind==="source"?(St=[Js*ge.layout.get("text-size").evaluate(Se,{})],St[0]>Ao&&fr(`${ce.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):gt.kind==="composite"&&(St=[Js*nt.compositeTextSizes[0].evaluate(Se,{},ot),Js*nt.compositeTextSizes[1].evaluate(Se,{},ot)],(St[0]>Ao||St[1]>Ao)&&fr(`${ce.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),ce.addSymbols(ce.text,ut,St,ke,xe,Se,Ve,ie,Le.lineStartIndex,Le.lineLength,et,ot);for(const $t of Ne)He[$t]=ce.text.placedSymbolArray.length-1;return 4*ut.length}function vp(ce){for(const ie in ce)return ce[ie];return null}function pm(ce,ie,le,pe){const ge=ce.compareText;if(ie in ge){const xe=ge[ie];for(let Se=xe.length-1;Se>=0;Se--)if(pe.dist(xe[Se])<le)return!0}else ge[ie]=[];return ge[ie].push(pe),!1}const bp=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class qu{static from(ie){if(!(ie instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[le,pe]=new Uint8Array(ie,0,2);if(le!==219)throw new Error("Data does not appear to be in a KDBush format.");const ge=pe>>4;if(ge!==1)throw new Error(`Got v${ge} data when expected v1.`);const xe=bp[15&pe];if(!xe)throw new Error("Unrecognized array type.");const[Se]=new Uint16Array(ie,2,1),[ke]=new Uint32Array(ie,4,1);return new qu(ke,Se,xe,ie)}constructor(ie,le=64,pe=Float64Array,ge){if(isNaN(ie)||ie<0)throw new Error(`Unpexpected numItems value: ${ie}.`);this.numItems=+ie,this.nodeSize=Math.min(Math.max(+le,2),65535),this.ArrayType=pe,this.IndexArrayType=ie<65536?Uint16Array:Uint32Array;const xe=bp.indexOf(this.ArrayType),Se=2*ie*this.ArrayType.BYTES_PER_ELEMENT,ke=ie*this.IndexArrayType.BYTES_PER_ELEMENT,Le=(8-ke%8)%8;if(xe<0)throw new Error(`Unexpected typed array class: ${pe}.`);ge&&ge instanceof ArrayBuffer?(this.data=ge,this.ids=new this.IndexArrayType(this.data,8,ie),this.coords=new this.ArrayType(this.data,8+ke+Le,2*ie),this._pos=2*ie,this._finished=!0):(this.data=new ArrayBuffer(8+Se+ke+Le),this.ids=new this.IndexArrayType(this.data,8,ie),this.coords=new this.ArrayType(this.data,8+ke+Le,2*ie),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+xe]),new Uint16Array(this.data,2,1)[0]=le,new Uint32Array(this.data,4,1)[0]=ie)}add(ie,le){const pe=this._pos>>1;return this.ids[pe]=pe,this.coords[this._pos++]=ie,this.coords[this._pos++]=le,pe}finish(){const ie=this._pos>>1;if(ie!==this.numItems)throw new Error(`Added ${ie} items when expected ${this.numItems}.`);return ju(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(ie,le,pe,ge){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:xe,coords:Se,nodeSize:ke}=this,Le=[0,xe.length-1,0],Ve=[];for(;Le.length;){const Ne=Le.pop()||0,He=Le.pop()||0,et=Le.pop()||0;if(He-et<=ke){for(let gt=et;gt<=He;gt++){const St=Se[2*gt],$t=Se[2*gt+1];St>=ie&&St<=pe&&$t>=le&&$t<=ge&&Ve.push(xe[gt])}continue}const nt=et+He>>1,ot=Se[2*nt],ut=Se[2*nt+1];ot>=ie&&ot<=pe&&ut>=le&&ut<=ge&&Ve.push(xe[nt]),(Ne===0?ie<=ot:le<=ut)&&(Le.push(et),Le.push(nt-1),Le.push(1-Ne)),(Ne===0?pe>=ot:ge>=ut)&&(Le.push(nt+1),Le.push(He),Le.push(1-Ne))}return Ve}within(ie,le,pe){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:ge,coords:xe,nodeSize:Se}=this,ke=[0,ge.length-1,0],Le=[],Ve=pe*pe;for(;ke.length;){const Ne=ke.pop()||0,He=ke.pop()||0,et=ke.pop()||0;if(He-et<=Se){for(let gt=et;gt<=He;gt++)wp(xe[2*gt],xe[2*gt+1],ie,le)<=Ve&&Le.push(ge[gt]);continue}const nt=et+He>>1,ot=xe[2*nt],ut=xe[2*nt+1];wp(ot,ut,ie,le)<=Ve&&Le.push(ge[nt]),(Ne===0?ie-pe<=ot:le-pe<=ut)&&(ke.push(et),ke.push(nt-1),ke.push(1-Ne)),(Ne===0?ie+pe>=ot:le+pe>=ut)&&(ke.push(nt+1),ke.push(He),ke.push(1-Ne))}return Le}}function ju(ce,ie,le,pe,ge,xe){if(ge-pe<=le)return;const Se=pe+ge>>1;xp(ce,ie,Se,pe,ge,xe),ju(ce,ie,le,pe,Se-1,1-xe),ju(ce,ie,le,Se+1,ge,1-xe)}function xp(ce,ie,le,pe,ge,xe){for(;ge>pe;){if(ge-pe>600){const Ve=ge-pe+1,Ne=le-pe+1,He=Math.log(Ve),et=.5*Math.exp(2*He/3),nt=.5*Math.sqrt(He*et*(Ve-et)/Ve)*(Ne-Ve/2<0?-1:1);xp(ce,ie,le,Math.max(pe,Math.floor(le-Ne*et/Ve+nt)),Math.min(ge,Math.floor(le+(Ve-Ne)*et/Ve+nt)),xe)}const Se=ie[2*le+xe];let ke=pe,Le=ge;for(gc(ce,ie,pe,le),ie[2*ge+xe]>Se&&gc(ce,ie,pe,ge);ke<Le;){for(gc(ce,ie,ke,Le),ke++,Le--;ie[2*ke+xe]<Se;)ke++;for(;ie[2*Le+xe]>Se;)Le--}ie[2*pe+xe]===Se?gc(ce,ie,pe,Le):(Le++,gc(ce,ie,Le,ge)),Le<=le&&(pe=Le+1),le<=Le&&(ge=Le-1)}}function gc(ce,ie,le,pe){Wu(ce,le,pe),Wu(ie,2*le,2*pe),Wu(ie,2*le+1,2*pe+1)}function Wu(ce,ie,le){const pe=ce[ie];ce[ie]=ce[le],ce[le]=pe}function wp(ce,ie,le,pe){const ge=ce-le,xe=ie-pe;return ge*ge+xe*xe}var Gu;de.cx=void 0,(Gu=de.cx||(de.cx={})).create="create",Gu.load="load",Gu.fullLoad="fullLoad";let $h=null,_c=[];const Hu=1e3/60,Uu="loadTime",Zu="fullLoadTime",fm={mark(ce){performance.mark(ce)},frame(ce){const ie=ce;$h!=null&&_c.push(ie-$h),$h=ie},clearMetrics(){$h=null,_c=[],performance.clearMeasures(Uu),performance.clearMeasures(Zu);for(const ce in de.cx)performance.clearMarks(de.cx[ce])},getPerformanceMetrics(){performance.measure(Uu,de.cx.create,de.cx.load),performance.measure(Zu,de.cx.create,de.cx.fullLoad);const ce=performance.getEntriesByName(Uu)[0].duration,ie=performance.getEntriesByName(Zu)[0].duration,le=_c.length,pe=1/(_c.reduce((xe,Se)=>xe+Se,0)/le/1e3),ge=_c.filter(xe=>xe>Hu).reduce((xe,Se)=>xe+(Se-Hu)/Hu,0);return{loadTime:ce,fullLoadTime:ie,fps:pe,percentDroppedFrames:ge/(le+ge)*100,totalFrames:le}}};de.$=je,de.A=Re,de.B=function([ce,ie,le]){return ie+=90,ie*=Math.PI/180,le*=Math.PI/180,{x:ce*Math.cos(ie)*Math.sin(le),y:ce*Math.sin(ie)*Math.sin(le),z:ce*Math.cos(le)}},de.C=Rn,de.D=Vr,de.E=Ir,de.F=Li,de.G=Wl,de.H=gi,de.I=Au,de.J=class{constructor(ce,ie){this.target=ce,this.mapId=ie,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new nm(()=>this.process()),this.subscription=Mi(this.target,"message",le=>this.receive(le),!1),this.globalScope=li(self)?ce:window}registerMessageHandler(ce,ie){this.messageHandlers[ce]=ie}sendAsync(ce,ie){return new Promise((le,pe)=>{const ge=Math.round(1e18*Math.random()).toString(36).substring(0,10),xe=ie?Mi(ie.signal,"abort",()=>{xe==null||xe.unsubscribe(),delete this.resolveRejects[ge];const Le={id:ge,type:"<cancel>",origin:location.origin,targetMapId:ce.targetMapId,sourceMapId:this.mapId};this.target.postMessage(Le)},sm):null;this.resolveRejects[ge]={resolve:Le=>{xe==null||xe.unsubscribe(),le(Le)},reject:Le=>{xe==null||xe.unsubscribe(),pe(Le)}};const Se=[],ke=Object.assign(Object.assign({},ce),{id:ge,sourceMapId:this.mapId,origin:location.origin,data:Ho(ce.data,Se)});this.target.postMessage(ke,{transfer:Se})})}receive(ce){const ie=ce.data,le=ie.id;if(!(ie.origin!=="file://"&&location.origin!=="file://"&&ie.origin!=="resource://android"&&location.origin!=="resource://android"&&ie.origin!==location.origin||ie.targetMapId&&this.mapId!==ie.targetMapId)){if(ie.type==="<cancel>"){delete this.tasks[le];const pe=this.abortControllers[le];return delete this.abortControllers[le],void(pe&&pe.abort())}if(li(self)||ie.mustQueue)return this.tasks[le]=ie,this.taskQueue.push(le),void this.invoker.trigger();this.processTask(le,ie)}}process(){if(this.taskQueue.length===0)return;const ce=this.taskQueue.shift(),ie=this.tasks[ce];delete this.tasks[ce],this.taskQueue.length>0&&this.invoker.trigger(),ie&&this.processTask(ce,ie)}processTask(ce,ie){return oe(this,void 0,void 0,function*(){if(ie.type==="<response>"){const ge=this.resolveRejects[ce];return delete this.resolveRejects[ce],ge?void(ie.error?ge.reject(Es(ie.error)):ge.resolve(Es(ie.data))):void 0}if(!this.messageHandlers[ie.type])return void this.completeTask(ce,new Error(`Could not find a registered handler for ${ie.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const le=Es(ie.data),pe=new AbortController;this.abortControllers[ce]=pe;try{const ge=yield this.messageHandlers[ie.type](ie.sourceMapId,le,pe);this.completeTask(ce,null,ge)}catch(ge){this.completeTask(ce,ge)}})}completeTask(ce,ie,le){const pe=[];delete this.abortControllers[ce];const ge={id:ce,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:ie?Ho(ie):null,data:Ho(le,pe)};this.target.postMessage(ge,{transfer:pe})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},de.K=dt,de.L=function(){var ce=new Re(16);return Re!=Float32Array&&(ce[1]=0,ce[2]=0,ce[3]=0,ce[4]=0,ce[6]=0,ce[7]=0,ce[8]=0,ce[9]=0,ce[11]=0,ce[12]=0,ce[13]=0,ce[14]=0),ce[0]=1,ce[5]=1,ce[10]=1,ce[15]=1,ce},de.M=function(ce,ie,le){var pe,ge,xe,Se,ke,Le,Ve,Ne,He,et,nt,ot,ut=le[0],gt=le[1],St=le[2];return ie===ce?(ce[12]=ie[0]*ut+ie[4]*gt+ie[8]*St+ie[12],ce[13]=ie[1]*ut+ie[5]*gt+ie[9]*St+ie[13],ce[14]=ie[2]*ut+ie[6]*gt+ie[10]*St+ie[14],ce[15]=ie[3]*ut+ie[7]*gt+ie[11]*St+ie[15]):(ge=ie[1],xe=ie[2],Se=ie[3],ke=ie[4],Le=ie[5],Ve=ie[6],Ne=ie[7],He=ie[8],et=ie[9],nt=ie[10],ot=ie[11],ce[0]=pe=ie[0],ce[1]=ge,ce[2]=xe,ce[3]=Se,ce[4]=ke,ce[5]=Le,ce[6]=Ve,ce[7]=Ne,ce[8]=He,ce[9]=et,ce[10]=nt,ce[11]=ot,ce[12]=pe*ut+ke*gt+He*St+ie[12],ce[13]=ge*ut+Le*gt+et*St+ie[13],ce[14]=xe*ut+Ve*gt+nt*St+ie[14],ce[15]=Se*ut+Ne*gt+ot*St+ie[15]),ce},de.N=function(ce,ie,le){var pe=le[0],ge=le[1],xe=le[2];return ce[0]=ie[0]*pe,ce[1]=ie[1]*pe,ce[2]=ie[2]*pe,ce[3]=ie[3]*pe,ce[4]=ie[4]*ge,ce[5]=ie[5]*ge,ce[6]=ie[6]*ge,ce[7]=ie[7]*ge,ce[8]=ie[8]*xe,ce[9]=ie[9]*xe,ce[10]=ie[10]*xe,ce[11]=ie[11]*xe,ce[12]=ie[12],ce[13]=ie[13],ce[14]=ie[14],ce[15]=ie[15],ce},de.O=function(ce,ie,le){var pe=ie[0],ge=ie[1],xe=ie[2],Se=ie[3],ke=ie[4],Le=ie[5],Ve=ie[6],Ne=ie[7],He=ie[8],et=ie[9],nt=ie[10],ot=ie[11],ut=ie[12],gt=ie[13],St=ie[14],$t=ie[15],Et=le[0],zt=le[1],Ht=le[2],rr=le[3];return ce[0]=Et*pe+zt*ke+Ht*He+rr*ut,ce[1]=Et*ge+zt*Le+Ht*et+rr*gt,ce[2]=Et*xe+zt*Ve+Ht*nt+rr*St,ce[3]=Et*Se+zt*Ne+Ht*ot+rr*$t,ce[4]=(Et=le[4])*pe+(zt=le[5])*ke+(Ht=le[6])*He+(rr=le[7])*ut,ce[5]=Et*ge+zt*Le+Ht*et+rr*gt,ce[6]=Et*xe+zt*Ve+Ht*nt+rr*St,ce[7]=Et*Se+zt*Ne+Ht*ot+rr*$t,ce[8]=(Et=le[8])*pe+(zt=le[9])*ke+(Ht=le[10])*He+(rr=le[11])*ut,ce[9]=Et*ge+zt*Le+Ht*et+rr*gt,ce[10]=Et*xe+zt*Ve+Ht*nt+rr*St,ce[11]=Et*Se+zt*Ne+Ht*ot+rr*$t,ce[12]=(Et=le[12])*pe+(zt=le[13])*ke+(Ht=le[14])*He+(rr=le[15])*ut,ce[13]=Et*ge+zt*Le+Ht*et+rr*gt,ce[14]=Et*xe+zt*Ve+Ht*nt+rr*St,ce[15]=Et*Se+zt*Ne+Ht*ot+rr*$t,ce},de.P=me,de.Q=function(ce,ie){const le={};for(let pe=0;pe<ie.length;pe++){const ge=ie[pe];ge in ce&&(le[ge]=ce[ge])}return le},de.R=Wn,de.S=ko,de.T=vu,de.U=Qd,de.V=Jd,de.W=De,de.X=Ie,de.Y=ri,de.Z=rs,de._=oe,de.a=tt,de.a$=Mt,de.a0=function(ce,ie){var le,pe,ge,xe,Se;if(!ce)return ie!=null?ie:{};if(!ie)return ce;let ke=Object.assign({},ce);if(ie.removeAll&&(ke={removeAll:!0}),ie.remove){const Le=new Set(ie.remove);ke.add&&(ke.add=ke.add.filter(Ne=>!Le.has(Ne.id))),ke.update&&(ke.update=ke.update.filter(Ne=>!Le.has(Ne.id)));const Ve=new Set(((le=ce.add)!==null&&le!==void 0?le:[]).map(Ne=>Ne.id));ie.remove=ie.remove.filter(Ne=>!Ve.has(Ne))}if(ie.remove){const Le=new Set(ke.remove?ke.remove.concat(ie.remove):ie.remove);ke.remove=Array.from(Le.values())}if(ie.add){const Le=ke.add?ke.add.concat(ie.add):ie.add,Ve=new Map(Le.map(Ne=>[Ne.id,Ne]));ke.add=Array.from(Ve.values())}if(ie.update){const Le=new Map((pe=ke.update)===null||pe===void 0?void 0:pe.map(Ve=>[Ve.id,Ve]));for(const Ve of ie.update){const Ne=(ge=Le.get(Ve.id))!==null&&ge!==void 0?ge:{id:Ve.id};Ve.newGeometry&&(Ne.newGeometry=Ve.newGeometry),Ve.addOrUpdateProperties&&(Ne.addOrUpdateProperties=((xe=Ne.addOrUpdateProperties)!==null&&xe!==void 0?xe:[]).concat(Ve.addOrUpdateProperties)),Ve.removeProperties&&(Ne.removeProperties=((Se=Ne.removeProperties)!==null&&Se!==void 0?Se:[]).concat(Ve.removeProperties)),Ve.removeAllProperties&&(Ne.removeAllProperties=!0),Le.set(Ve.id,Ne)}ke.update=Array.from(Le.values())}return ke.remove&&ke.add&&(ke.remove=ke.remove.filter(Le=>ke.add.findIndex(Ve=>Ve.id===Le)===-1)),ke},de.a1=fc,de.a2=ra,de.a3=25,de.a4=Vu,de.a5=ce=>{const ie=window.document.createElement("video");return ie.muted=!0,new Promise(le=>{ie.onloadstart=()=>{le(ie)};for(const pe of ce){const ge=window.document.createElement("source");qt(pe)||(ie.crossOrigin="Anonymous"),ge.src=pe,ie.appendChild(ge)}})},de.a6=jt,de.a7=function(){return $r++},de.a8=$e,de.a9=sl,de.aA=function(ce){let ie=1/0,le=1/0,pe=-1/0,ge=-1/0;for(const xe of ce)ie=Math.min(ie,xe.x),le=Math.min(le,xe.y),pe=Math.max(pe,xe.x),ge=Math.max(ge,xe.y);return[ie,le,pe,ge]},de.aB=gn,de.aC=Ke,de.aD=function(ce,ie,le,pe,ge=!1){if(!le[0]&&!le[1])return[0,0];const xe=ge?pe==="map"?-ce.bearingInRadians:0:pe==="viewport"?ce.bearingInRadians:0;if(xe){const Se=Math.sin(xe),ke=Math.cos(xe);le=[le[0]*ke-le[1]*Se,le[0]*Se+le[1]*ke]}return[ge?le[0]:Ke(ie,le[0],ce.zoom),ge?le[1]:Ke(ie,le[1],ce.zoom)]},de.aF=Lu,de.aG=$u,de.aH=Iu,de.aI=qu,de.aJ=Ki,de.aK=Ih,de.aL=Tt,de.aM=di,de.aN=ti,de.aO=Lr,de.aP=Ft,de.aQ=tp,de.aR=at,de.aS=ct,de.aT=function(ce){var ie=new Re(3);return ie[0]=ce[0],ie[1]=ce[1],ie[2]=ce[2],ie},de.aU=function(ce,ie,le){return ce[0]=ie[0]-le[0],ce[1]=ie[1]-le[1],ce[2]=ie[2]-le[2],ce},de.aV=function(ce,ie){var le=ie[0],pe=ie[1],ge=ie[2],xe=le*le+pe*pe+ge*ge;return xe>0&&(xe=1/Math.sqrt(xe)),ce[0]=ie[0]*xe,ce[1]=ie[1]*xe,ce[2]=ie[2]*xe,ce},de.aW=ft,de.aX=function(ce,ie){return ce[0]*ie[0]+ce[1]*ie[1]+ce[2]*ie[2]},de.aY=function(ce,ie,le){return ce[0]=ie[0]*le[0],ce[1]=ie[1]*le[1],ce[2]=ie[2]*le[2],ce[3]=ie[3]*le[3],ce},de.aZ=Ue,de.a_=function(ce,ie,le){const pe=ie[0]*le[0]+ie[1]*le[1]+ie[2]*le[2];return pe===0?null:(-(ce[0]*le[0]+ce[1]*le[1]+ce[2]*le[2])-le[3])/pe},de.aa=mo,de.ab=Qo,de.ac=sp,de.ad=function(ce){const ie={};if(ce.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(le,pe,ge,xe)=>{const Se=ge||xe;return ie[pe]=!Se||Se.toLowerCase(),""}),ie["max-age"]){const le=parseInt(ie["max-age"],10);isNaN(le)?delete ie["max-age"]:ie["max-age"]=le}return ie},de.ae=yr,de.af=85.051129,de.ag=wi,de.ah=function(ce){return Math.pow(2,ce)},de.ai=qe,de.aj=ep,de.ak=function(ce){return Math.log(ce)/Math.LN2},de.al=function(ce){var ie=ce[0],le=ce[1];return ie*ie+le*le},de.am=function(ce){if(!ce.length)return new Set;const ie=Math.max(...ce.map(Le=>Le.canonical.z));let le=1/0,pe=-1/0,ge=1/0,xe=-1/0;const Se=[];for(const Le of ce){const{x:Ve,y:Ne,z:He}=Le.canonical,et=Math.pow(2,ie-He),nt=Ve*et,ot=Ne*et;Se.push({id:Le,x:nt,y:ot}),nt<le&&(le=nt),nt>pe&&(pe=nt),ot<ge&&(ge=ot),ot>xe&&(xe=ot)}const ke=new Set;for(const Le of Se)Le.x!==le&&Le.x!==pe&&Le.y!==ge&&Le.y!==xe||ke.add(Le.id);return ke},de.an=function(ce,ie){let le=0,pe=0;if(ce.kind==="constant")pe=ce.layoutSize;else if(ce.kind!=="source"){const{interpolationType:ge,minZoom:xe,maxZoom:Se}=ce,ke=ge?yr(zn.interpolationFactor(ge,ie,xe,Se),0,1):0;ce.kind==="camera"?pe=Rn.number(ce.minSize,ce.maxSize,ke):le=ke}return{uSizeT:le,uSize:pe}},de.ap=function(ce,{uSize:ie,uSizeT:le},{lowerSize:pe,upperSize:ge}){return ce.kind==="source"?pe/Js:ce.kind==="composite"?Rn.number(pe/Js,ge/Js,le):ie},de.aq=function(ce,ie){var le=ie[0],pe=ie[1],ge=ie[2],xe=ie[3],Se=ie[4],ke=ie[5],Le=ie[6],Ve=ie[7],Ne=ie[8],He=ie[9],et=ie[10],nt=ie[11],ot=ie[12],ut=ie[13],gt=ie[14],St=ie[15],$t=le*ke-pe*Se,Et=le*Le-ge*Se,zt=le*Ve-xe*Se,Ht=pe*Le-ge*ke,rr=pe*Ve-xe*ke,vr=ge*Ve-xe*Le,Ar=Ne*ut-He*ot,Sr=Ne*gt-et*ot,Pr=Ne*St-nt*ot,jr=He*gt-et*ut,Tr=He*St-nt*ut,Er=et*St-nt*gt,pr=$t*Er-Et*Tr+zt*jr+Ht*Pr-rr*Sr+vr*Ar;return pr?(ce[0]=(ke*Er-Le*Tr+Ve*jr)*(pr=1/pr),ce[1]=(ge*Tr-pe*Er-xe*jr)*pr,ce[2]=(ut*vr-gt*rr+St*Ht)*pr,ce[3]=(et*rr-He*vr-nt*Ht)*pr,ce[4]=(Le*Pr-Se*Er-Ve*Sr)*pr,ce[5]=(le*Er-ge*Pr+xe*Sr)*pr,ce[6]=(gt*zt-ot*vr-St*Et)*pr,ce[7]=(Ne*vr-et*zt+nt*Et)*pr,ce[8]=(Se*Tr-ke*Pr+Ve*Ar)*pr,ce[9]=(pe*Pr-le*Tr-xe*Ar)*pr,ce[10]=(ot*rr-ut*zt+St*$t)*pr,ce[11]=(He*zt-Ne*rr-nt*$t)*pr,ce[12]=(ke*Sr-Se*jr-Le*Ar)*pr,ce[13]=(le*jr-pe*Sr+ge*Ar)*pr,ce[14]=(ut*Et-ot*Ht-gt*$t)*pr,ce[15]=(Ne*Ht-He*Et+et*$t)*pr,ce):null},de.ar=it,de.as=function(ce){var ie=ce[0],le=ce[1];return Math.sqrt(ie*ie+le*le)},de.at=function(ce){return ce[0]=0,ce[1]=0,ce},de.au=function(ce,ie,le){return ce[0]=ie[0]*le,ce[1]=ie[1]*le,ce},de.av=zu,de.aw=At,de.ax=function(ce,ie,le,pe){const ge=ie.y-ce.y,xe=ie.x-ce.x,Se=pe.y-le.y,ke=pe.x-le.x,Le=Se*xe-ke*ge;if(Le===0)return null;const Ve=(ke*(ce.y-le.y)-Se*(ce.x-le.x))/Le;return new me(ce.x+Ve*xe,ce.y+Ve*ge)},de.ay=lp,de.az=Ju,de.b=ci,de.b$=class extends kn{constructor(ce,ie){super(ce,ie),this.current=new Array}set(ce){if(ce!=this.current){this.current=ce;const ie=new Float32Array(ce);this.gl.uniform1fv(this.location,ie)}}},de.b0=function(ce,ie,le){return ce[0]=ie[0]*le,ce[1]=ie[1]*le,ce[2]=ie[2]*le,ce[3]=ie[3]*le,ce},de.b1=function(ce,ie){return ce[0]*ie[0]+ce[1]*ie[1]+ce[2]*ie[2]+ce[3]},de.b2=ip,de.b3=ol,de.b4=function(ce,ie,le,pe,ge){var xe=1/Math.tan(ie/2);if(ce[0]=xe/le,ce[1]=0,ce[2]=0,ce[3]=0,ce[4]=0,ce[5]=xe,ce[6]=0,ce[7]=0,ce[8]=0,ce[9]=0,ce[11]=-1,ce[12]=0,ce[13]=0,ce[15]=0,ge!=null&&ge!==1/0){var Se=1/(pe-ge);ce[10]=(ge+pe)*Se,ce[14]=2*ge*pe*Se}else ce[10]=-1,ce[14]=-2*pe;return ce},de.b5=function(ce){var ie=new Re(16);return ie[0]=ce[0],ie[1]=ce[1],ie[2]=ce[2],ie[3]=ce[3],ie[4]=ce[4],ie[5]=ce[5],ie[6]=ce[6],ie[7]=ce[7],ie[8]=ce[8],ie[9]=ce[9],ie[10]=ce[10],ie[11]=ce[11],ie[12]=ce[12],ie[13]=ce[13],ie[14]=ce[14],ie[15]=ce[15],ie},de.b6=function(ce,ie,le){var pe=Math.sin(le),ge=Math.cos(le),xe=ie[0],Se=ie[1],ke=ie[2],Le=ie[3],Ve=ie[4],Ne=ie[5],He=ie[6],et=ie[7];return ie!==ce&&(ce[8]=ie[8],ce[9]=ie[9],ce[10]=ie[10],ce[11]=ie[11],ce[12]=ie[12],ce[13]=ie[13],ce[14]=ie[14],ce[15]=ie[15]),ce[0]=xe*ge+Ve*pe,ce[1]=Se*ge+Ne*pe,ce[2]=ke*ge+He*pe,ce[3]=Le*ge+et*pe,ce[4]=Ve*ge-xe*pe,ce[5]=Ne*ge-Se*pe,ce[6]=He*ge-ke*pe,ce[7]=et*ge-Le*pe,ce},de.b7=function(ce,ie,le){var pe=Math.sin(le),ge=Math.cos(le),xe=ie[4],Se=ie[5],ke=ie[6],Le=ie[7],Ve=ie[8],Ne=ie[9],He=ie[10],et=ie[11];return ie!==ce&&(ce[0]=ie[0],ce[1]=ie[1],ce[2]=ie[2],ce[3]=ie[3],ce[12]=ie[12],ce[13]=ie[13],ce[14]=ie[14],ce[15]=ie[15]),ce[4]=xe*ge+Ve*pe,ce[5]=Se*ge+Ne*pe,ce[6]=ke*ge+He*pe,ce[7]=Le*ge+et*pe,ce[8]=Ve*ge-xe*pe,ce[9]=Ne*ge-Se*pe,ce[10]=He*ge-ke*pe,ce[11]=et*ge-Le*pe,ce},de.b8=function(){const ce=new Float32Array(16);return qe(ce),ce},de.b9=function(){const ce=new Float64Array(16);return qe(ce),ce},de.bA=function(ce,ie){const le=lt(ce,360),pe=lt(ie,360),ge=pe-le,xe=pe>le?ge-360:ge+360;return Math.abs(ge)<Math.abs(xe)?ge:xe},de.bB=function(ce){return ce[0]=0,ce[1]=0,ce[2]=0,ce},de.bC=function(ce,ie,le,pe){const ge=Math.sqrt(ce*ce+ie*ie),xe=Math.sqrt(le*le+pe*pe);ce/=ge,ie/=ge,le/=xe,pe/=xe;const Se=Math.acos(ce*le+ie*pe);return-ie*le+ce*pe>0?Se:-Se},de.bD=function(ce,ie){const le=lt(ce,2*Math.PI),pe=lt(ie,2*Math.PI);return Math.min(Math.abs(le-pe),Math.abs(le-pe+2*Math.PI),Math.abs(le-pe-2*Math.PI))},de.bE=function(){const ce={},ie=Ot.$version;for(const le in Ot.$root){const pe=Ot.$root[le];if(pe.required){let ge=null;ge=le==="version"?ie:pe.type==="array"?[]:{},ge!=null&&(ce[le]=ge)}}return ce},de.bF=Hl,de.bG=wt,de.bH=function ce(ie,le){if(Array.isArray(ie)){if(!Array.isArray(le)||ie.length!==le.length)return!1;for(let pe=0;pe<ie.length;pe++)if(!ce(ie[pe],le[pe]))return!1;return!0}if(typeof ie=="object"&&ie!==null&&le!==null){if(typeof le!="object"||Object.keys(ie).length!==Object.keys(le).length)return!1;for(const pe in ie)if(!ce(ie[pe],le[pe]))return!1;return!0}return ie===le},de.bI=function(ce){ce=ce.slice();const ie=Object.create(null);for(let le=0;le<ce.length;le++)ie[ce[le].id]=ce[le];for(let le=0;le<ce.length;le++)"ref"in ce[le]&&(ce[le]=Xr(ce[le],ie[ce[le].ref]));return ce},de.bJ=function(ce,ie){if(ce.type==="custom")return new im(ce,ie);switch(ce.type){case"background":return new rm(ce,ie);case"circle":return new Np(ce,ie);case"color-relief":return new Hp(ce,ie);case"fill":return new lf(ce,ie);case"fill-extrusion":return new vf(ce,ie);case"heatmap":return new qp(ce,ie);case"hillshade":return new Wp(ce,ie);case"line":return new Pf(ce,ie);case"raster":return new Co(ce,ie);case"symbol":return new Dh(ce,ie)}},de.bK=ce=>ce.type==="raster",de.bL=Dr,de.bM=function(ce,ie){if(!ce)return[{command:"setStyle",args:[ie]}];let le=[];try{if(!kr(ce.version,ie.version))return[{command:"setStyle",args:[ie]}];kr(ce.center,ie.center)||le.push({command:"setCenter",args:[ie.center]}),kr(ce.state,ie.state)||le.push({command:"setGlobalState",args:[ie.state]}),kr(ce.centerAltitude,ie.centerAltitude)||le.push({command:"setCenterAltitude",args:[ie.centerAltitude]}),kr(ce.zoom,ie.zoom)||le.push({command:"setZoom",args:[ie.zoom]}),kr(ce.bearing,ie.bearing)||le.push({command:"setBearing",args:[ie.bearing]}),kr(ce.pitch,ie.pitch)||le.push({command:"setPitch",args:[ie.pitch]}),kr(ce.roll,ie.roll)||le.push({command:"setRoll",args:[ie.roll]}),kr(ce.sprite,ie.sprite)||le.push({command:"setSprite",args:[ie.sprite]}),kr(ce.glyphs,ie.glyphs)||le.push({command:"setGlyphs",args:[ie.glyphs]}),kr(ce.transition,ie.transition)||le.push({command:"setTransition",args:[ie.transition]}),kr(ce.light,ie.light)||le.push({command:"setLight",args:[ie.light]}),kr(ce.terrain,ie.terrain)||le.push({command:"setTerrain",args:[ie.terrain]}),kr(ce.sky,ie.sky)||le.push({command:"setSky",args:[ie.sky]}),kr(ce.projection,ie.projection)||le.push({command:"setProjection",args:[ie.projection]});const pe={},ge=[];(function(Se,ke,Le,Ve){let Ne;for(Ne in ke=ke||{},Se=Se||{})Object.prototype.hasOwnProperty.call(Se,Ne)&&(Object.prototype.hasOwnProperty.call(ke,Ne)||gr(Ne,Le,Ve));for(Ne in ke)Object.prototype.hasOwnProperty.call(ke,Ne)&&(Object.prototype.hasOwnProperty.call(Se,Ne)?kr(Se[Ne],ke[Ne])||(Se[Ne].type==="geojson"&&ke[Ne].type==="geojson"&&ur(Se,ke,Ne)?ar(Le,{command:"setGeoJSONSourceData",args:[Ne,ke[Ne].data]}):Cr(Ne,ke,Le,Ve)):mr(Ne,ke,Le))})(ce.sources,ie.sources,ge,pe);const xe=[];ce.layers&&ce.layers.forEach(Se=>{"source"in Se&&pe[Se.source]?le.push({command:"removeLayer",args:[Se.id]}):xe.push(Se)}),le=le.concat(ge),function(Se,ke,Le){ke=ke||[];const Ve=(Se=Se||[]).map(nr),Ne=ke.map(nr),He=Se.reduce(hr,{}),et=ke.reduce(hr,{}),nt=Ve.slice(),ot=Object.create(null);let ut,gt,St,$t,Et;for(let zt=0,Ht=0;zt<Ve.length;zt++)ut=Ve[zt],Object.prototype.hasOwnProperty.call(et,ut)?Ht++:(ar(Le,{command:"removeLayer",args:[ut]}),nt.splice(nt.indexOf(ut,Ht),1));for(let zt=0,Ht=0;zt<Ne.length;zt++)ut=Ne[Ne.length-1-zt],nt[nt.length-1-zt]!==ut&&(Object.prototype.hasOwnProperty.call(He,ut)?(ar(Le,{command:"removeLayer",args:[ut]}),nt.splice(nt.lastIndexOf(ut,nt.length-Ht),1)):Ht++,$t=nt[nt.length-zt],ar(Le,{command:"addLayer",args:[et[ut],$t]}),nt.splice(nt.length-zt,0,ut),ot[ut]=!0);for(let zt=0;zt<Ne.length;zt++)if(ut=Ne[zt],gt=He[ut],St=et[ut],!ot[ut]&&!kr(gt,St))if(kr(gt.source,St.source)&&kr(gt["source-layer"],St["source-layer"])&&kr(gt.type,St.type)){for(Et in cr(gt.layout,St.layout,Le,ut,null,"setLayoutProperty"),cr(gt.paint,St.paint,Le,ut,null,"setPaintProperty"),kr(gt.filter,St.filter)||ar(Le,{command:"setFilter",args:[ut,St.filter]}),kr(gt.minzoom,St.minzoom)&&kr(gt.maxzoom,St.maxzoom)||ar(Le,{command:"setLayerZoomRange",args:[ut,St.minzoom,St.maxzoom]}),gt)Object.prototype.hasOwnProperty.call(gt,Et)&&Et!=="layout"&&Et!=="paint"&&Et!=="filter"&&Et!=="metadata"&&Et!=="minzoom"&&Et!=="maxzoom"&&(Et.indexOf("paint.")===0?cr(gt[Et],St[Et],Le,ut,Et.slice(6),"setPaintProperty"):kr(gt[Et],St[Et])||ar(Le,{command:"setLayerProperty",args:[ut,Et,St[Et]]}));for(Et in St)Object.prototype.hasOwnProperty.call(St,Et)&&!Object.prototype.hasOwnProperty.call(gt,Et)&&Et!=="layout"&&Et!=="paint"&&Et!=="filter"&&Et!=="metadata"&&Et!=="minzoom"&&Et!=="maxzoom"&&(Et.indexOf("paint.")===0?cr(gt[Et],St[Et],Le,ut,Et.slice(6),"setPaintProperty"):kr(gt[Et],St[Et])||ar(Le,{command:"setLayerProperty",args:[ut,Et,St[Et]]}))}else ar(Le,{command:"removeLayer",args:[ut]}),$t=nt[nt.lastIndexOf(ut)+1],ar(Le,{command:"addLayer",args:[St,$t]})}(xe,ie.layers,le)}catch(pe){console.warn("Unable to compute style diff:",pe),le=[{command:"setStyle",args:[ie]}]}return le},de.bN=function(ce){const ie=[],le=ce.id;return le===void 0&&ie.push({message:`layers.${le}: missing required property "id"`}),ce.render===void 0&&ie.push({message:`layers.${le}: missing required method "render"`}),ce.renderingMode&&ce.renderingMode!=="2d"&&ce.renderingMode!=="3d"&&ie.push({message:`layers.${le}: property "renderingMode" must be either "2d" or "3d"`}),ie},de.bO=Gr,de.bP=Zr,de.bQ=class extends kn{constructor(ce,ie){super(ce,ie),this.current=0}set(ce){this.current!==ce&&(this.current=ce,this.gl.uniform1i(this.location,ce))}},de.bR=nn,de.bS=class extends kn{constructor(ce,ie){super(ce,ie),this.current=mn}set(ce){if(ce[12]!==this.current[12]||ce[0]!==this.current[0])return this.current=ce,void this.gl.uniformMatrix4fv(this.location,!1,ce);for(let ie=1;ie<16;ie++)if(ce[ie]!==this.current[ie]){this.current=ce,this.gl.uniformMatrix4fv(this.location,!1,ce);break}}},de.bT=Eo,de.bU=class extends kn{constructor(ce,ie){super(ce,ie),this.current=[0,0,0]}set(ce){ce[0]===this.current[0]&&ce[1]===this.current[1]&&ce[2]===this.current[2]||(this.current=ce,this.gl.uniform3f(this.location,ce[0],ce[1],ce[2]))}},de.bV=class extends kn{constructor(ce,ie){super(ce,ie),this.current=[0,0]}set(ce){ce[0]===this.current[0]&&ce[1]===this.current[1]||(this.current=ce,this.gl.uniform2f(this.location,ce[0],ce[1]))}},de.bW=Oe,de.bX=function(ce,ie){var le=Math.sin(ie),pe=Math.cos(ie);return ce[0]=pe,ce[1]=le,ce[2]=0,ce[3]=-le,ce[4]=pe,ce[5]=0,ce[6]=0,ce[7]=0,ce[8]=1,ce},de.bY=function(ce,ie,le){var pe=ie[0],ge=ie[1],xe=ie[2];return ce[0]=pe*le[0]+ge*le[3]+xe*le[6],ce[1]=pe*le[1]+ge*le[4]+xe*le[7],ce[2]=pe*le[2]+ge*le[5]+xe*le[8],ce},de.bZ=function(ce,ie,le,pe,ge,xe,Se){var ke=1/(ie-le),Le=1/(pe-ge),Ve=1/(xe-Se);return ce[0]=-2*ke,ce[1]=0,ce[2]=0,ce[3]=0,ce[4]=0,ce[5]=-2*Le,ce[6]=0,ce[7]=0,ce[8]=0,ce[9]=0,ce[10]=2*Ve,ce[11]=0,ce[12]=(ie+le)*ke,ce[13]=(ge+pe)*Le,ce[14]=(Se+xe)*Ve,ce[15]=1,ce},de.b_=class extends kn{constructor(ce,ie){super(ce,ie),this.current=new Array}set(ce){if(ce!=this.current){this.current=ce;const ie=new Float32Array(4*ce.length);for(let le=0;le<ce.length;le++)ie[4*le]=ce[le].r,ie[4*le+1]=ce[le].g,ie[4*le+2]=ce[le].b,ie[4*le+3]=ce[le].a;this.gl.uniform4fv(this.location,ie)}}},de.ba=function(){return new Float64Array(16)},de.bb=function(ce,ie,le){const pe=new Float64Array(4);return Qe(pe,ce,ie-90,le),pe},de.bc=function(ce,ie,le,pe){var ge,xe,Se,ke,Le,Ve=ie[0],Ne=ie[1],He=ie[2],et=ie[3],nt=le[0],ot=le[1],ut=le[2],gt=le[3];return(xe=Ve*nt+Ne*ot+He*ut+et*gt)<0&&(xe=-xe,nt=-nt,ot=-ot,ut=-ut,gt=-gt),1-xe>ze?(ge=Math.acos(xe),Se=Math.sin(ge),ke=Math.sin((1-pe)*ge)/Se,Le=Math.sin(pe*ge)/Se):(ke=1-pe,Le=pe),ce[0]=ke*Ve+Le*nt,ce[1]=ke*Ne+Le*ot,ce[2]=ke*He+Le*ut,ce[3]=ke*et+Le*gt,ce},de.bd=function(ce){const ie=new Float64Array(9);var le,pe,ge,xe,Se,ke,Le,Ve,Ne,He,et,nt,ot,ut,gt,St,$t,Et;He=(ge=(pe=ce)[0])*(Le=ge+ge),et=(xe=pe[1])*Le,ot=(Se=pe[2])*Le,ut=Se*(Ve=xe+xe),St=(ke=pe[3])*Le,$t=ke*Ve,Et=ke*(Ne=Se+Se),(le=ie)[0]=1-(nt=xe*Ve)-(gt=Se*Ne),le[3]=et-Et,le[6]=ot+$t,le[1]=et+Et,le[4]=1-He-gt,le[7]=ut-St,le[2]=ot-$t,le[5]=ut+St,le[8]=1-He-nt;const zt=Ft(-Math.asin(yr(ie[2],-1,1)));let Ht,rr;return Math.hypot(ie[5],ie[8])<.001?(Ht=0,rr=-Ft(Math.atan2(ie[3],ie[4]))):(Ht=Ft(ie[5]===0&&ie[8]===0?0:Math.atan2(ie[5],ie[8])),rr=Ft(ie[1]===0&&ie[0]===0?0:Math.atan2(ie[1],ie[0]))),{roll:Ht,pitch:zt+90,bearing:rr}},de.be=function(ce,ie){return ce.roll==ie.roll&&ce.pitch==ie.pitch&&ce.bearing==ie.bearing},de.bf=ai,de.bg=ps,de.bh=tl,de.bi=lc,de.bj=el,de.bk=Bt,de.bl=Xt,de.bm=On,de.bn=function(ce,ie,le,pe,ge){return Bt(pe,ge,yr((ce-ie)/(le-ie),0,1))},de.bo=lt,de.bp=function(){return new Float64Array(3)},de.bq=function(ce,ie,le,pe){return ce[0]=ie[0]+le[0]*pe,ce[1]=ie[1]+le[1]*pe,ce[2]=ie[2]+le[2]*pe,ce},de.br=Qe,de.bs=function(ce,ie,le){var pe=le[0],ge=le[1],xe=le[2],Se=le[3],ke=ie[0],Le=ie[1],Ve=ie[2],Ne=ge*Ve-xe*Le,He=xe*ke-pe*Ve,et=pe*Le-ge*ke;return ce[0]=ke+Se*(Ne+=Ne)+ge*(et+=et)-xe*(He+=He),ce[1]=Le+Se*He+xe*Ne-pe*et,ce[2]=Ve+Se*et+pe*He-ge*Ne,ce},de.bt=function(ce,ie,le){const pe=(ge=[ce[0],ce[1],ce[2],ie[0],ie[1],ie[2],le[0],le[1],le[2]])[0]*((Ne=ge[8])*(Se=ge[4])-(ke=ge[5])*(Ve=ge[7]))+ge[1]*(-Ne*(xe=ge[3])+ke*(Le=ge[6]))+ge[2]*(Ve*xe-Se*Le);var ge,xe,Se,ke,Le,Ve,Ne;if(pe===0)return null;const He=ft([],[ie[0],ie[1],ie[2]],[le[0],le[1],le[2]]),et=ft([],[le[0],le[1],le[2]],[ce[0],ce[1],ce[2]]),nt=ft([],[ce[0],ce[1],ce[2]],[ie[0],ie[1],ie[2]]),ot=at([],He,-ce[3]);return ct(ot,ot,at([],et,-ie[3])),ct(ot,ot,at([],nt,-le[3])),at(ot,ot,1/pe),ot},de.bu=Bu,de.bv=function(){return new Float64Array(4)},de.bw=function(ce,ie,le,pe){var ge=[],xe=[];return ge[0]=ie[0]-le[0],ge[1]=ie[1]-le[1],ge[2]=ie[2]-le[2],xe[0]=ge[0]*Math.cos(pe)-ge[1]*Math.sin(pe),xe[1]=ge[0]*Math.sin(pe)+ge[1]*Math.cos(pe),xe[2]=ge[2],ce[0]=xe[0]+le[0],ce[1]=xe[1]+le[1],ce[2]=xe[2]+le[2],ce},de.bx=function(ce,ie,le,pe){var ge=[],xe=[];return ge[0]=ie[0]-le[0],ge[1]=ie[1]-le[1],ge[2]=ie[2]-le[2],xe[0]=ge[0],xe[1]=ge[1]*Math.cos(pe)-ge[2]*Math.sin(pe),xe[2]=ge[1]*Math.sin(pe)+ge[2]*Math.cos(pe),ce[0]=xe[0]+le[0],ce[1]=xe[1]+le[1],ce[2]=xe[2]+le[2],ce},de.by=function(ce,ie,le,pe){var ge=[],xe=[];return ge[0]=ie[0]-le[0],ge[1]=ie[1]-le[1],ge[2]=ie[2]-le[2],xe[0]=ge[2]*Math.sin(pe)+ge[0]*Math.cos(pe),xe[1]=ge[1],xe[2]=ge[2]*Math.cos(pe)-ge[0]*Math.sin(pe),ce[0]=xe[0]+le[0],ce[1]=xe[1]+le[1],ce[2]=xe[2]+le[2],ce},de.bz=function(ce,ie,le){var pe=Math.sin(le),ge=Math.cos(le),xe=ie[0],Se=ie[1],ke=ie[2],Le=ie[3],Ve=ie[8],Ne=ie[9],He=ie[10],et=ie[11];return ie!==ce&&(ce[4]=ie[4],ce[5]=ie[5],ce[6]=ie[6],ce[7]=ie[7],ce[12]=ie[12],ce[13]=ie[13],ce[14]=ie[14],ce[15]=ie[15]),ce[0]=xe*ge-Ve*pe,ce[1]=Se*ge-Ne*pe,ce[2]=ke*ge-He*pe,ce[3]=Le*ge-et*pe,ce[8]=xe*pe+Ve*ge,ce[9]=Se*pe+Ne*ge,ce[10]=ke*pe+He*ge,ce[11]=Le*pe+et*ge,ce},de.c=mt,de.c0=class extends ec{},de.c1=kf,de.c2=class extends Ya{},de.c3=yu,de.c4=function(ce){return ce<=1?1:Math.pow(2,Math.ceil(Math.log(ce)/Math.LN2))},de.c5=ld,de.c6=function(ce,ie,le){var pe=ie[0],ge=ie[1],xe=ie[2],Se=le[3]*pe+le[7]*ge+le[11]*xe+le[15];return ce[0]=(le[0]*pe+le[4]*ge+le[8]*xe+le[12])/(Se=Se||1),ce[1]=(le[1]*pe+le[5]*ge+le[9]*xe+le[13])/Se,ce[2]=(le[2]*pe+le[6]*ge+le[10]*xe+le[14])/Se,ce},de.c7=class extends Ha{},de.c8=class extends Me{},de.c9=function(ce,ie){return ce[0]===ie[0]&&ce[1]===ie[1]&&ce[2]===ie[2]&&ce[3]===ie[3]&&ce[4]===ie[4]&&ce[5]===ie[5]&&ce[6]===ie[6]&&ce[7]===ie[7]&&ce[8]===ie[8]&&ce[9]===ie[9]&&ce[10]===ie[10]&&ce[11]===ie[11]&&ce[12]===ie[12]&&ce[13]===ie[13]&&ce[14]===ie[14]&&ce[15]===ie[15]},de.cA=function(ce,ie){tt.REGISTERED_PROTOCOLS[ce]=ie},de.cB=function(ce){delete tt.REGISTERED_PROTOCOLS[ce]},de.cC=function(ce,ie){const le={};for(let ge=0;ge<ce.length;ge++){const xe=ie&&ie[ce[ge].id]||Vl(ce[ge]);ie&&(ie[ce[ge].id]=xe);let Se=le[xe];Se||(Se=le[xe]=[]),Se.push(ce[ge])}const pe=[];for(const ge in le)pe.push(le[ge]);return pe},de.cD=Rr,de.cE=np,de.cF=op,de.cG=Bd,de.cH=function(ce){ce.bucket.createArrays(),ce.bucket.tilePixelRatio=je/(512*ce.bucket.overscaling),ce.bucket.compareText={},ce.bucket.iconsNeedLinear=!1;const ie=ce.bucket.layers[0],le=ie.layout,pe=ie._unevaluatedLayout._values,ge={layoutIconSize:pe["icon-size"].possiblyEvaluate(new Li(ce.bucket.zoom+1),ce.canonical),layoutTextSize:pe["text-size"].possiblyEvaluate(new Li(ce.bucket.zoom+1),ce.canonical),textMaxSize:pe["text-size"].possiblyEvaluate(new Li(18))};if(ce.bucket.textSizeData.kind==="composite"){const{minZoom:Ve,maxZoom:Ne}=ce.bucket.textSizeData;ge.compositeTextSizes=[pe["text-size"].possiblyEvaluate(new Li(Ve),ce.canonical),pe["text-size"].possiblyEvaluate(new Li(Ne),ce.canonical)]}if(ce.bucket.iconSizeData.kind==="composite"){const{minZoom:Ve,maxZoom:Ne}=ce.bucket.iconSizeData;ge.compositeIconSizes=[pe["icon-size"].possiblyEvaluate(new Li(Ve),ce.canonical),pe["icon-size"].possiblyEvaluate(new Li(Ne),ce.canonical)]}const xe=le.get("text-line-height")*gn,Se=le.get("text-rotation-alignment")!=="viewport"&&le.get("symbol-placement")!=="point",ke=le.get("text-keep-upright"),Le=le.get("text-size");for(const Ve of ce.bucket.features){const Ne=le.get("text-font").evaluate(Ve,{},ce.canonical).join(","),He=Le.evaluate(Ve,{},ce.canonical),et=ge.layoutTextSize.evaluate(Ve,{},ce.canonical),nt=ge.layoutIconSize.evaluate(Ve,{},ce.canonical),ot={horizontal:{},vertical:void 0},ut=Ve.text;let gt,St=[0,0];if(ut){const zt=ut.toString(),Ht=le.get("text-letter-spacing").evaluate(Ve,{},ce.canonical)*gn,rr=dh(zt)?Ht:0,vr=le.get("text-anchor").evaluate(Ve,{},ce.canonical),Ar=_p(ie,Ve,ce.canonical);if(!Ar){const Tr=le.get("text-radial-offset").evaluate(Ve,{},ce.canonical);St=Tr?gp(vr,[Tr*gn,Nu]):le.get("text-offset").evaluate(Ve,{},ce.canonical).map(Er=>Er*gn)}let Sr=Se?"center":le.get("text-justify").evaluate(Ve,{},ce.canonical);const Pr=le.get("symbol-placement")==="point"?le.get("text-max-width").evaluate(Ve,{},ce.canonical)*gn:1/0,jr=()=>{ce.bucket.allowVerticalPlacement&&wo(zt)&&(ot.vertical=zh(ut,ce.glyphMap,ce.glyphPositions,ce.imagePositions,Ne,Pr,xe,vr,"left",rr,St,de.ao.vertical,!0,et,He))};if(!Se&&Ar){const Tr=new Set;if(Sr==="auto")for(let pr=0;pr<Ar.values.length;pr+=2)Tr.add($u(Ar.values[pr]));else Tr.add(Sr);let Er=!1;for(const pr of Tr)if(!ot.horizontal[pr])if(Er)ot.horizontal[pr]=ot.horizontal[0];else{const Kr=zh(ut,ce.glyphMap,ce.glyphPositions,ce.imagePositions,Ne,Pr,xe,"center",pr,rr,St,de.ao.horizontal,!1,et,He);Kr&&(ot.horizontal[pr]=Kr,Er=Kr.positionedLines.length===1)}jr()}else{Sr==="auto"&&(Sr=$u(vr));const Tr=zh(ut,ce.glyphMap,ce.glyphPositions,ce.imagePositions,Ne,Pr,xe,vr,Sr,rr,St,de.ao.horizontal,!1,et,He);Tr&&(ot.horizontal[Sr]=Tr),jr(),wo(zt)&&Se&&ke&&(ot.vertical=zh(ut,ce.glyphMap,ce.glyphPositions,ce.imagePositions,Ne,Pr,xe,vr,Sr,rr,St,de.ao.vertical,!1,et,He))}}let $t=!1;if(Ve.icon&&Ve.icon.name){const zt=ce.imageMap[Ve.icon.name];zt&&(gt=Jf(ce.imagePositions[Ve.icon.name],le.get("icon-offset").evaluate(Ve,{},ce.canonical),le.get("icon-anchor").evaluate(Ve,{},ce.canonical)),$t=!!zt.sdf,ce.bucket.sdfIcons===void 0?ce.bucket.sdfIcons=$t:ce.bucket.sdfIcons!==$t&&fr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(zt.pixelRatio!==ce.bucket.pixelRatio||le.get("icon-rotate").constantOr(1)!==0)&&(ce.bucket.iconsNeedLinear=!0))}const Et=vp(ot.horizontal)||ot.vertical;ce.bucket.iconsInText=!!Et&&Et.iconsInText,(Et||gt)&&dm(ce.bucket,Ve,ot,gt,ce.imageMap,ge,et,nt,St,$t,ce.canonical,ce.subdivisionGranularity)}ce.showCollisionBoxes&&ce.bucket.generateCollisionDebugBuffers()},de.cI=Su,de.cJ=Cu,de.cK=Pu,de.cL=Sd,de.cM=Mu,de.cN=class{constructor(ce){this._marks={start:[ce.url,"start"].join("#"),end:[ce.url,"end"].join("#"),measure:ce.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let ce=performance.getEntriesByName(this._marks.measure);return ce.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),ce=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),ce}},de.cO=function(ce,ie,le,pe,ge){return oe(this,void 0,void 0,function*(){if(Ie())try{return yield ri(ce,ie,le,pe,ge)}catch{}return function(xe,Se,ke,Le,Ve){const Ne=xe.width,He=xe.height;Ci&&Ei||(Ci=new OffscreenCanvas(Ne,He),Ei=Ci.getContext("2d",{willReadFrequently:!0})),Ci.width=Ne,Ci.height=He,Ei.drawImage(xe,0,0,Ne,He);const et=Ei.getImageData(Se,ke,Le,Ve);return Ei.clearRect(0,0,Ne,He),et.data}(ce,ie,le,pe,ge)})},de.cP=ud,de.cQ=ve,de.cR=wd,de.cS=rl,de.cT=La,de.cU=function(ce,ie){const le=new Map;if(ce!=null)if(ce.type==="Feature")le.set(mc(ce,ie),ce);else for(const pe of ce.features)le.set(mc(pe,ie),pe);return le},de.cV=function(ce,ie){if(ce==null)return!0;if(ce.type==="Feature")return mc(ce,ie)!=null;if(ce.type==="FeatureCollection"){const le=new Set;for(const pe of ce.features){const ge=mc(pe,ie);if(ge==null||le.has(ge))return!1;le.add(ge)}return!0}return!1},de.cW=function(ce,ie,le){var pe,ge,xe,Se;if(ie.removeAll&&ce.clear(),ie.remove)for(const ke of ie.remove)ce.delete(ke);if(ie.add)for(const ke of ie.add){const Le=mc(ke,le);Le!=null&&ce.set(Le,ke)}if(ie.update)for(const ke of ie.update){let Le=ce.get(ke.id);if(Le==null)continue;const Ve=!ke.removeAllProperties&&(((pe=ke.removeProperties)===null||pe===void 0?void 0:pe.length)>0||((ge=ke.addOrUpdateProperties)===null||ge===void 0?void 0:ge.length)>0);if((ke.newGeometry||ke.removeAllProperties||Ve)&&(Le=Object.assign({},Le),ce.set(ke.id,Le),Ve&&(Le.properties=Object.assign({},Le.properties))),ke.newGeometry&&(Le.geometry=ke.newGeometry),ke.removeAllProperties)Le.properties={};else if(((xe=ke.removeProperties)===null||xe===void 0?void 0:xe.length)>0)for(const Ne of ke.removeProperties)Object.prototype.hasOwnProperty.call(Le.properties,Ne)&&delete Le.properties[Ne];if(((Se=ke.addOrUpdateProperties)===null||Se===void 0?void 0:Se.length)>0)for(const{key:Ne,value:He}of ke.addOrUpdateProperties)Le.properties[Ne]=He}},de.cX=_s,de.ca=function(ce,ie){var le=ce[0],pe=ce[1],ge=ce[2],xe=ce[3],Se=ce[4],ke=ce[5],Le=ce[6],Ve=ce[7],Ne=ce[8],He=ce[9],et=ce[10],nt=ce[11],ot=ce[12],ut=ce[13],gt=ce[14],St=ce[15],$t=ie[0],Et=ie[1],zt=ie[2],Ht=ie[3],rr=ie[4],vr=ie[5],Ar=ie[6],Sr=ie[7],Pr=ie[8],jr=ie[9],Tr=ie[10],Er=ie[11],pr=ie[12],Kr=ie[13],ii=ie[14],Hr=ie[15];return Math.abs(le-$t)<=ze*Math.max(1,Math.abs(le),Math.abs($t))&&Math.abs(pe-Et)<=ze*Math.max(1,Math.abs(pe),Math.abs(Et))&&Math.abs(ge-zt)<=ze*Math.max(1,Math.abs(ge),Math.abs(zt))&&Math.abs(xe-Ht)<=ze*Math.max(1,Math.abs(xe),Math.abs(Ht))&&Math.abs(Se-rr)<=ze*Math.max(1,Math.abs(Se),Math.abs(rr))&&Math.abs(ke-vr)<=ze*Math.max(1,Math.abs(ke),Math.abs(vr))&&Math.abs(Le-Ar)<=ze*Math.max(1,Math.abs(Le),Math.abs(Ar))&&Math.abs(Ve-Sr)<=ze*Math.max(1,Math.abs(Ve),Math.abs(Sr))&&Math.abs(Ne-Pr)<=ze*Math.max(1,Math.abs(Ne),Math.abs(Pr))&&Math.abs(He-jr)<=ze*Math.max(1,Math.abs(He),Math.abs(jr))&&Math.abs(et-Tr)<=ze*Math.max(1,Math.abs(et),Math.abs(Tr))&&Math.abs(nt-Er)<=ze*Math.max(1,Math.abs(nt),Math.abs(Er))&&Math.abs(ot-pr)<=ze*Math.max(1,Math.abs(ot),Math.abs(pr))&&Math.abs(ut-Kr)<=ze*Math.max(1,Math.abs(ut),Math.abs(Kr))&&Math.abs(gt-ii)<=ze*Math.max(1,Math.abs(gt),Math.abs(ii))&&Math.abs(St-Hr)<=ze*Math.max(1,Math.abs(St),Math.abs(Hr))},de.cb=function(ce,ie){return ce[0]=ie[0],ce[1]=ie[1],ce[2]=ie[2],ce[3]=ie[3],ce[4]=ie[4],ce[5]=ie[5],ce[6]=ie[6],ce[7]=ie[7],ce[8]=ie[8],ce[9]=ie[9],ce[10]=ie[10],ce[11]=ie[11],ce[12]=ie[12],ce[13]=ie[13],ce[14]=ie[14],ce[15]=ie[15],ce},de.cc=ce=>ce.type==="symbol",de.cd=ce=>ce.type==="circle",de.ce=ce=>ce.type==="heatmap",de.cf=ce=>ce.type==="line",de.cg=ce=>ce.type==="fill",de.ch=ce=>ce.type==="fill-extrusion",de.ci=ce=>ce.type==="hillshade",de.cj=ce=>ce.type==="color-relief",de.ck=ce=>ce.type==="background",de.cl=ce=>ce.type==="custom",de.cm=Gt,de.cn=function(ce,ie,le){const pe=Ge(ie.x-le.x,ie.y-le.y),ge=Ge(ce.x-le.x,ce.y-le.y);var xe,Se;return Ft(Math.atan2(pe[0]*ge[1]-pe[1]*ge[0],(xe=pe)[0]*(Se=ge)[0]+xe[1]*Se[1]))},de.co=lr,de.cp=function(ce,ie){return sr[ie]&&(ce instanceof MouseEvent||ce instanceof WheelEvent)},de.cq=function(ce,ie){return er[ie]&&"touches"in ce},de.cr=function(ce){return er[ce]||sr[ce]},de.cs=function(ce,ie,le){var pe=ie[0],ge=ie[1];return ce[0]=le[0]*pe+le[4]*ge+le[12],ce[1]=le[1]*pe+le[5]*ge+le[13],ce},de.ct=function(ce,ie){const{x:le,y:pe}=fc.fromLngLat(ie);return!(ce<0||ce>25||pe<0||pe>=1||le<0||le>=1)},de.cu=function(ce,ie){return ce[0]=ie[0],ce[1]=0,ce[2]=0,ce[3]=0,ce[4]=0,ce[5]=ie[1],ce[6]=0,ce[7]=0,ce[8]=0,ce[9]=0,ce[10]=ie[2],ce[11]=0,ce[12]=0,ce[13]=0,ce[14]=0,ce[15]=1,ce},de.cv=class extends ds{},de.cw=fm,de.cy=function(ce){return ce.message===ir},de.cz=yt,de.d=qt,de.e=Nr,de.f=ce=>oe(void 0,void 0,void 0,function*(){if(ce.byteLength===0)return createImageBitmap(new ImageData(1,1));const ie=new Blob([new Uint8Array(ce)],{type:"image/png"});try{return createImageBitmap(ie)}catch(le){throw new Error(`Could not load image because of ${le.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),de.g=rt,de.h=ce=>new Promise((ie,le)=>{const pe=new Image;pe.onload=()=>{ie(pe),URL.revokeObjectURL(pe.src),pe.onload=null,window.requestAnimationFrame(()=>{pe.src=hi})},pe.onerror=()=>le(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const ge=new Blob([new Uint8Array(ce)],{type:"image/png"});pe.src=ce.byteLength?URL.createObjectURL(ge):hi}),de.i=li,de.j=(ce,ie)=>It(Nr(ce,{type:"json"}),ie),de.k=Zt,de.l=tr,de.m=It,de.n=(ce,ie)=>It(Nr(ce,{type:"arrayBuffer"}),ie),de.o=function(ce){return new Mu(ce).readFields($f,[])},de.p=Dd,de.q=ic,de.r=Fn,de.s=Mi,de.t=Ul,de.u=mi,de.v=Ot,de.w=fr,de.x=lh,de.y=ch,de.z=hs}),ae("worker",["./shared"],function(de){class oe{constructor(tt,rt){this.keyCache={},tt&&this.replace(tt,rt)}replace(tt,rt){this._layerConfigs={},this._layers={},this.update(tt,[],rt)}update(tt,rt,dt){for(const wt of tt){this._layerConfigs[wt.id]=wt;const It=this._layers[wt.id]=de.bJ(wt,dt);It._featureFilter=de.aa(It.filter,dt),this.keyCache[wt.id]&&delete this.keyCache[wt.id]}for(const wt of rt)delete this.keyCache[wt],delete this._layerConfigs[wt],delete this._layers[wt];this.familiesBySource={};const yt=de.cC(Object.values(this._layerConfigs),this.keyCache);for(const wt of yt){const It=wt.map(Ir=>this._layers[Ir.id]),qt=It[0];if(qt.visibility==="none")continue;const Dt=qt.source||"";let Vt=this.familiesBySource[Dt];Vt||(Vt=this.familiesBySource[Dt]={});const tr=qt.sourceLayer||"_geojsonTileLayer";let Zt=Vt[tr];Zt||(Zt=Vt[tr]=[]),Zt.push(It)}}}class me{constructor(tt){const rt={},dt=[];for(const qt in tt){const Dt=tt[qt],Vt=rt[qt]={};for(const tr in Dt){const Zt=Dt[+tr];if(!Zt||Zt.bitmap.width===0||Zt.bitmap.height===0)continue;const Ir={x:0,y:0,w:Zt.bitmap.width+2,h:Zt.bitmap.height+2};dt.push(Ir),Vt[tr]={rect:Ir,metrics:Zt.metrics}}}const{w:yt,h:wt}=de.p(dt),It=new de.q({width:yt||1,height:wt||1});for(const qt in tt){const Dt=tt[qt];for(const Vt in Dt){const tr=Dt[+Vt];if(!tr||tr.bitmap.width===0||tr.bitmap.height===0)continue;const Zt=rt[qt][Vt].rect;de.q.copy(tr.bitmap,It,{x:0,y:0},{x:Zt.x+1,y:Zt.y+1},tr.bitmap)}}this.image=It,this.positions=rt}}de.cD("GlyphAtlas",me);class ve{constructor(tt){this.tileID=new de.Z(tt.tileID.overscaledZ,tt.tileID.wrap,tt.tileID.canonical.z,tt.tileID.canonical.x,tt.tileID.canonical.y),this.uid=tt.uid,this.zoom=tt.zoom,this.pixelRatio=tt.pixelRatio,this.tileSize=tt.tileSize,this.source=tt.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=tt.showCollisionBoxes,this.collectResourceTiming=!!tt.collectResourceTiming,this.returnDependencies=!!tt.returnDependencies,this.promoteId=tt.promoteId,this.inFlightDependencies=[]}parse(tt,rt,dt,yt,wt){return de._(this,void 0,void 0,function*(){this.status="parsing",this.data=tt,this.collisionBoxArray=new de.a8;const It=new de.cE(Object.keys(tt.layers).sort()),qt=new de.cF(this.tileID,this.promoteId);qt.bucketLayerIDs=[];const Dt={},Vt={featureIndex:qt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:dt,subdivisionGranularity:wt},tr=rt.familiesBySource[this.source];for(const jt in tr){const Qt=tt.layers[jt];if(!Qt)continue;Qt.version===1&&de.w(`Vector tile source "${this.source}" layer "${jt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Mr=It.encode(jt),pi=[];for(let Yr=0;Yr<Qt.length;Yr++){const or=Qt.feature(Yr),wr=qt.getId(or,jt);pi.push({feature:or,id:wr,index:Yr,sourceLayerIndex:Mr})}for(const Yr of tr[jt]){const or=Yr[0];or.source!==this.source&&de.w(`layer.source = ${or.source} does not equal this.source = ${this.source}`),or.isHidden(this.zoom,!0)||(Ee(Yr,this.zoom,dt),(Dt[or.id]=or.createBucket({index:qt.bucketLayerIDs.length,layers:Yr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Mr,sourceID:this.source})).populate(pi,Vt,this.tileID.canonical),qt.bucketLayerIDs.push(Yr.map(wr=>wr.id)))}}const Zt=de.bO(Vt.glyphDependencies,jt=>Object.keys(jt).map(Number));this.inFlightDependencies.forEach(jt=>jt==null?void 0:jt.abort()),this.inFlightDependencies=[];let Ir=Promise.resolve({});if(Object.keys(Zt).length){const jt=new AbortController;this.inFlightDependencies.push(jt),Ir=yt.sendAsync({type:"GG",data:{stacks:Zt,source:this.source,tileID:this.tileID,type:"glyphs"}},jt)}const Ot=Object.keys(Vt.iconDependencies);let zr=Promise.resolve({});if(Ot.length){const jt=new AbortController;this.inFlightDependencies.push(jt),zr=yt.sendAsync({type:"GI",data:{icons:Ot,source:this.source,tileID:this.tileID,type:"icons"}},jt)}const Xr=Object.keys(Vt.patternDependencies);let kr=Promise.resolve({});if(Xr.length){const jt=new AbortController;this.inFlightDependencies.push(jt),kr=yt.sendAsync({type:"GI",data:{icons:Xr,source:this.source,tileID:this.tileID,type:"patterns"}},jt)}const ar=Vt.dashDependencies;let mr=Promise.resolve({});if(Object.keys(ar).length){const jt=new AbortController;this.inFlightDependencies.push(jt),mr=yt.sendAsync({type:"GDA",data:{dashes:ar}},jt)}const[gr,Cr,ur,cr]=yield Promise.all([Ir,zr,kr,mr]),nr=new me(gr),hr=new de.cG(Cr,ur);for(const jt in Dt){const Qt=Dt[jt];Qt instanceof de.a9?(Ee(Qt.layers,this.zoom,dt),de.cH({bucket:Qt,glyphMap:gr,glyphPositions:nr.positions,imageMap:Cr,imagePositions:hr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Vt.subdivisionGranularity})):Qt.hasDependencies&&(Qt instanceof de.cI||Qt instanceof de.cJ||Qt instanceof de.cK)&&(Ee(Qt.layers,this.zoom,dt),Qt.addFeatures(Vt,this.tileID.canonical,hr.patternPositions,cr))}return this.status="done",{buckets:Object.values(Dt).filter(jt=>!jt.isEmpty()),featureIndex:qt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:nr.image,imageAtlas:hr,dashPositions:cr,glyphMap:this.returnDependencies?gr:null,iconMap:this.returnDependencies?Cr:null,glyphPositions:this.returnDependencies?nr.positions:null}})}}function Ee(mt,tt,rt){const dt=new de.F(tt);for(const yt of mt)yt.recalculate(dt,rt)}class Pe{constructor(tt,rt,dt){this.actor=tt,this.layerIndex=rt,this.availableImages=dt,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(tt,rt){return de._(this,void 0,void 0,function*(){const dt=yield de.n(tt.request,rt);try{return{vectorTile:new de.cL(new de.cM(dt.data)),rawData:dt.data,cacheControl:dt.cacheControl,expires:dt.expires}}catch(yt){const wt=new Uint8Array(dt.data);let It=`Unable to parse the tile at ${tt.request.url}, `;throw It+=wt[0]===31&&wt[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${yt.message}`,new Error(It)}})}loadTile(tt){return de._(this,void 0,void 0,function*(){const rt=tt.uid,dt=!!(tt&&tt.request&&tt.request.collectResourceTiming)&&new de.cN(tt.request),yt=new ve(tt);this.loading[rt]=yt;const wt=new AbortController;yt.abort=wt;try{const It=yield this.loadVectorTile(tt,wt);if(delete this.loading[rt],!It)return null;const qt=It.rawData,Dt={};It.expires&&(Dt.expires=It.expires),It.cacheControl&&(Dt.cacheControl=It.cacheControl);const Vt={};if(dt){const Zt=dt.finish();Zt&&(Vt.resourceTiming=JSON.parse(JSON.stringify(Zt)))}yt.vectorTile=It.vectorTile;const tr=yt.parse(It.vectorTile,this.layerIndex,this.availableImages,this.actor,tt.subdivisionGranularity);this.loaded[rt]=yt,this.fetching[rt]={rawTileData:qt,cacheControl:Dt,resourceTiming:Vt};try{const Zt=yield tr;return de.e({rawTileData:qt.slice(0)},Zt,Dt,Vt)}finally{delete this.fetching[rt]}}catch(It){throw delete this.loading[rt],yt.status="done",this.loaded[rt]=yt,It}})}reloadTile(tt){return de._(this,void 0,void 0,function*(){const rt=tt.uid;if(!this.loaded||!this.loaded[rt])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const dt=this.loaded[rt];if(dt.showCollisionBoxes=tt.showCollisionBoxes,dt.status==="parsing"){const yt=yield dt.parse(dt.vectorTile,this.layerIndex,this.availableImages,this.actor,tt.subdivisionGranularity);let wt;if(this.fetching[rt]){const{rawTileData:It,cacheControl:qt,resourceTiming:Dt}=this.fetching[rt];delete this.fetching[rt],wt=de.e({rawTileData:It.slice(0)},yt,qt,Dt)}else wt=yt;return wt}if(dt.status==="done"&&dt.vectorTile)return dt.parse(dt.vectorTile,this.layerIndex,this.availableImages,this.actor,tt.subdivisionGranularity)})}abortTile(tt){return de._(this,void 0,void 0,function*(){const rt=this.loading,dt=tt.uid;rt&&rt[dt]&&rt[dt].abort&&(rt[dt].abort.abort(),delete rt[dt])})}removeTile(tt){return de._(this,void 0,void 0,function*(){this.loaded&&this.loaded[tt.uid]&&delete this.loaded[tt.uid]})}}class ye{constructor(){this.loaded={}}loadTile(tt){return de._(this,void 0,void 0,function*(){const{uid:rt,encoding:dt,rawImageData:yt,redFactor:wt,greenFactor:It,blueFactor:qt,baseShift:Dt}=tt,Vt=yt.width+2,tr=yt.height+2,Zt=de.b(yt)?new de.R({width:Vt,height:tr},yield de.cO(yt,-1,-1,Vt,tr)):yt,Ir=new de.cP(rt,Zt,dt,wt,It,qt,Dt);return this.loaded=this.loaded||{},this.loaded[rt]=Ir,Ir})}removeTile(tt){const rt=this.loaded,dt=tt.uid;rt&&rt[dt]&&delete rt[dt]}}var Te,Ae,Ce=function(){if(Ae)return Te;function mt(rt,dt){if(rt.length!==0){tt(rt[0],dt);for(var yt=1;yt<rt.length;yt++)tt(rt[yt],!dt)}}function tt(rt,dt){for(var yt=0,wt=0,It=0,qt=rt.length,Dt=qt-1;It<qt;Dt=It++){var Vt=(rt[It][0]-rt[Dt][0])*(rt[Dt][1]+rt[It][1]),tr=yt+Vt;wt+=Math.abs(yt)>=Math.abs(Vt)?yt-tr+Vt:Vt-tr+yt,yt=tr}yt+wt>=0!=!!dt&&rt.reverse()}return Ae=1,Te=function rt(dt,yt){var wt,It=dt&&dt.type;if(It==="FeatureCollection")for(wt=0;wt<dt.features.length;wt++)rt(dt.features[wt],yt);else if(It==="GeometryCollection")for(wt=0;wt<dt.geometries.length;wt++)rt(dt.geometries[wt],yt);else if(It==="Feature")rt(dt.geometry,yt);else if(It==="Polygon")mt(dt.coordinates,yt);else if(It==="MultiPolygon")for(wt=0;wt<dt.coordinates.length;wt++)mt(dt.coordinates[wt],yt);return dt}}(),De=de.cQ(Ce);class Ie extends de.cS{constructor(tt,rt){super(new de.cM,0,rt,[],[]),this.feature=tt,this.type=tt.type,this.properties=tt.tags?tt.tags:{},"id"in tt&&(typeof tt.id=="string"?this.id=parseInt(tt.id,10):typeof tt.id!="number"||isNaN(tt.id)||(this.id=tt.id))}loadGeometry(){const tt=[],rt=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const dt of rt){const yt=[];for(const wt of dt)yt.push(new de.P(wt[0],wt[1]));tt.push(yt)}return tt}}class ze extends de.cR{constructor(tt,rt){super(new de.cM),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.version=rt?rt.version:1,this.extent=rt?rt.extent:4096,this.length=tt.length,this.features=tt}feature(tt){return new Ie(this.features[tt],this.extent)}}function Re(mt,tt){tt.writeVarintField(15,mt.version||1),tt.writeStringField(1,mt.name||""),tt.writeVarintField(5,mt.extent||4096);const rt={keys:[],values:[],keycache:{},valuecache:{}};for(let wt=0;wt<mt.length;wt++)rt.feature=mt.feature(wt),tt.writeMessage(2,Oe,rt);const dt=rt.keys;for(const wt of dt)tt.writeStringField(3,wt);const yt=rt.values;for(const wt of yt)tt.writeMessage(4,ct,wt)}function Oe(mt,tt){if(!mt.feature)return;const rt=mt.feature;rt.id!==void 0&&tt.writeVarintField(1,rt.id),tt.writeMessage(2,qe,mt),tt.writeVarintField(3,rt.type),tt.writeMessage(4,Ye,rt)}function qe(mt,tt){var rt;for(const dt in(rt=mt.feature)==null?void 0:rt.properties){let yt=mt.feature.properties[dt],wt=mt.keycache[dt];if(yt===null)continue;wt===void 0&&(mt.keys.push(dt),wt=mt.keys.length-1,mt.keycache[dt]=wt),tt.writeVarint(wt),typeof yt!="string"&&typeof yt!="boolean"&&typeof yt!="number"&&(yt=JSON.stringify(yt));const It=typeof yt+":"+yt;let qt=mt.valuecache[It];qt===void 0&&(mt.values.push(yt),qt=mt.values.length-1,mt.valuecache[It]=qt),tt.writeVarint(qt)}}function Ze(mt,tt){return(tt<<3)+(7&mt)}function Ue(mt){return mt<<1^mt>>31}function Ye(mt,tt){const rt=mt.loadGeometry(),dt=mt.type;let yt=0,wt=0;for(const It of rt){let qt=1;dt===1&&(qt=It.length),tt.writeVarint(Ze(1,qt));const Dt=dt===3?It.length-1:It.length;for(let Vt=0;Vt<Dt;Vt++){Vt===1&&dt!==1&&tt.writeVarint(Ze(2,Dt-1));const tr=It[Vt].x-yt,Zt=It[Vt].y-wt;tt.writeVarint(Ue(tr)),tt.writeVarint(Ue(Zt)),yt+=tr,wt+=Zt}mt.type===3&&tt.writeVarint(Ze(7,1))}}function ct(mt,tt){const rt=typeof mt;rt==="string"?tt.writeStringField(1,mt):rt==="boolean"?tt.writeBooleanField(7,mt):rt==="number"&&(mt%1!=0?tt.writeDoubleField(3,mt):mt<0?tt.writeSVarintField(6,mt):tt.writeVarintField(5,mt))}const at={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:mt=>mt},ft=Math.fround||(pt=new Float32Array(1),mt=>(pt[0]=+mt,pt[0]));var pt;class Mt{constructor(tt){this.options=Object.assign(Object.create(at),tt),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(tt){const{log:rt,minZoom:dt,maxZoom:yt}=this.options;rt&&console.time("total time");const wt=`prepare ${tt.length} points`;rt&&console.time(wt),this.points=tt;const It=[];for(let Dt=0;Dt<tt.length;Dt++){const Vt=tt[Dt];if(!Vt.geometry)continue;const[tr,Zt]=Vt.geometry.coordinates,Ir=ft(Qe(tr)),Ot=ft(it(Zt));It.push(Ir,Ot,1/0,Dt,-1,1),this.options.reduce&&It.push(0)}let qt=this.trees[yt+1]=this._createTree(It);rt&&console.timeEnd(wt);for(let Dt=yt;Dt>=dt;Dt--){const Vt=+Date.now();qt=this.trees[Dt]=this._createTree(this._cluster(qt,Dt)),rt&&console.log("z%d: %d clusters in %dms",Dt,qt.numItems,+Date.now()-Vt)}return rt&&console.timeEnd("total time"),this}getClusters(tt,rt){let dt=((tt[0]+180)%360+360)%360-180;const yt=Math.max(-90,Math.min(90,tt[1]));let wt=tt[2]===180?180:((tt[2]+180)%360+360)%360-180;const It=Math.max(-90,Math.min(90,tt[3]));if(tt[2]-tt[0]>=360)dt=-180,wt=180;else if(dt>wt){const Zt=this.getClusters([dt,yt,180,It],rt),Ir=this.getClusters([-180,yt,wt,It],rt);return Zt.concat(Ir)}const qt=this.trees[this._limitZoom(rt)],Dt=qt.range(Qe(dt),it(It),Qe(wt),it(yt)),Vt=qt.data,tr=[];for(const Zt of Dt){const Ir=this.stride*Zt;tr.push(Vt[Ir+5]>1?At(Vt,Ir,this.clusterProps):this.points[Vt[Ir+3]])}return tr}getChildren(tt){const rt=this._getOriginId(tt),dt=this._getOriginZoom(tt),yt="No cluster with the specified id.",wt=this.trees[dt];if(!wt)throw new Error(yt);const It=wt.data;if(rt*this.stride>=It.length)throw new Error(yt);const qt=this.options.radius/(this.options.extent*Math.pow(2,dt-1)),Dt=wt.within(It[rt*this.stride],It[rt*this.stride+1],qt),Vt=[];for(const tr of Dt){const Zt=tr*this.stride;It[Zt+4]===tt&&Vt.push(It[Zt+5]>1?At(It,Zt,this.clusterProps):this.points[It[Zt+3]])}if(Vt.length===0)throw new Error(yt);return Vt}getLeaves(tt,rt,dt){const yt=[];return this._appendLeaves(yt,tt,rt=rt||10,dt=dt||0,0),yt}getTile(tt,rt,dt){const yt=this.trees[this._limitZoom(tt)],wt=Math.pow(2,tt),{extent:It,radius:qt}=this.options,Dt=qt/It,Vt=(dt-Dt)/wt,tr=(dt+1+Dt)/wt,Zt={features:[]};return this._addTileFeatures(yt.range((rt-Dt)/wt,Vt,(rt+1+Dt)/wt,tr),yt.data,rt,dt,wt,Zt),rt===0&&this._addTileFeatures(yt.range(1-Dt/wt,Vt,1,tr),yt.data,wt,dt,wt,Zt),rt===wt-1&&this._addTileFeatures(yt.range(0,Vt,Dt/wt,tr),yt.data,-1,dt,wt,Zt),Zt.features.length?Zt:null}getClusterExpansionZoom(tt){let rt=this._getOriginZoom(tt)-1;for(;rt<=this.options.maxZoom;){const dt=this.getChildren(tt);if(rt++,dt.length!==1)break;tt=dt[0].properties.cluster_id}return rt}_appendLeaves(tt,rt,dt,yt,wt){const It=this.getChildren(rt);for(const qt of It){const Dt=qt.properties;if(Dt&&Dt.cluster?wt+Dt.point_count<=yt?wt+=Dt.point_count:wt=this._appendLeaves(tt,Dt.cluster_id,dt,yt,wt):wt<yt?wt++:tt.push(qt),tt.length===dt)break}return wt}_createTree(tt){const rt=new de.aI(tt.length/this.stride|0,this.options.nodeSize,Float32Array);for(let dt=0;dt<tt.length;dt+=this.stride)rt.add(tt[dt],tt[dt+1]);return rt.finish(),rt.data=tt,rt}_addTileFeatures(tt,rt,dt,yt,wt,It){for(const qt of tt){const Dt=qt*this.stride,Vt=rt[Dt+5]>1;let tr,Zt,Ir;if(Vt)tr=_t(rt,Dt,this.clusterProps),Zt=rt[Dt],Ir=rt[Dt+1];else{const Xr=this.points[rt[Dt+3]];tr=Xr.properties;const[kr,ar]=Xr.geometry.coordinates;Zt=Qe(kr),Ir=it(ar)}const Ot={type:1,geometry:[[Math.round(this.options.extent*(Zt*wt-dt)),Math.round(this.options.extent*(Ir*wt-yt))]],tags:tr};let zr;zr=Vt||this.options.generateId?rt[Dt+3]:this.points[rt[Dt+3]].id,zr!==void 0&&(Ot.id=zr),It.features.push(Ot)}}_limitZoom(tt){return Math.max(this.options.minZoom,Math.min(Math.floor(+tt),this.options.maxZoom+1))}_cluster(tt,rt){const{radius:dt,extent:yt,reduce:wt,minPoints:It}=this.options,qt=dt/(yt*Math.pow(2,rt)),Dt=tt.data,Vt=[],tr=this.stride;for(let Zt=0;Zt<Dt.length;Zt+=tr){if(Dt[Zt+2]<=rt)continue;Dt[Zt+2]=rt;const Ir=Dt[Zt],Ot=Dt[Zt+1],zr=tt.within(Dt[Zt],Dt[Zt+1],qt),Xr=Dt[Zt+5];let kr=Xr;for(const ar of zr){const mr=ar*tr;Dt[mr+2]>rt&&(kr+=Dt[mr+5])}if(kr>Xr&&kr>=It){let ar,mr=Ir*Xr,gr=Ot*Xr,Cr=-1;const ur=(Zt/tr<<5)+(rt+1)+this.points.length;for(const cr of zr){const nr=cr*tr;if(Dt[nr+2]<=rt)continue;Dt[nr+2]=rt;const hr=Dt[nr+5];mr+=Dt[nr]*hr,gr+=Dt[nr+1]*hr,Dt[nr+4]=ur,wt&&(ar||(ar=this._map(Dt,Zt,!0),Cr=this.clusterProps.length,this.clusterProps.push(ar)),wt(ar,this._map(Dt,nr)))}Dt[Zt+4]=ur,Vt.push(mr/kr,gr/kr,1/0,ur,-1,kr),wt&&Vt.push(Cr)}else{for(let ar=0;ar<tr;ar++)Vt.push(Dt[Zt+ar]);if(kr>1)for(const ar of zr){const mr=ar*tr;if(!(Dt[mr+2]<=rt)){Dt[mr+2]=rt;for(let gr=0;gr<tr;gr++)Vt.push(Dt[mr+gr])}}}}return Vt}_getOriginId(tt){return tt-this.points.length>>5}_getOriginZoom(tt){return(tt-this.points.length)%32}_map(tt,rt,dt){if(tt[rt+5]>1){const It=this.clusterProps[tt[rt+6]];return dt?Object.assign({},It):It}const yt=this.points[tt[rt+3]].properties,wt=this.options.map(yt);return dt&&wt===yt?Object.assign({},wt):wt}}function At(mt,tt,rt){return{type:"Feature",id:mt[tt+3],properties:_t(mt,tt,rt),geometry:{type:"Point",coordinates:[(dt=mt[tt],360*(dt-.5)),Ge(mt[tt+1])]}};var dt}function _t(mt,tt,rt){const dt=mt[tt+5],yt=dt>=1e4?`${Math.round(dt/1e3)}k`:dt>=1e3?Math.round(dt/100)/10+"k":dt,wt=mt[tt+6],It=wt===-1?{}:Object.assign({},rt[wt]);return Object.assign(It,{cluster:!0,cluster_id:mt[tt+3],point_count:dt,point_count_abbreviated:yt})}function Qe(mt){return mt/360+.5}function it(mt){const tt=Math.sin(mt*Math.PI/180),rt=.5-.25*Math.log((1+tt)/(1-tt))/Math.PI;return rt<0?0:rt>1?1:rt}function Ge(mt){const tt=(180-360*mt)*Math.PI/180;return 360*Math.atan(Math.exp(tt))/Math.PI-90}function je(mt,tt,rt,dt){let yt=dt;const wt=tt+(rt-tt>>1);let It,qt=rt-tt;const Dt=mt[tt],Vt=mt[tt+1],tr=mt[rt],Zt=mt[rt+1];for(let Ir=tt+3;Ir<rt;Ir+=3){const Ot=Ke(mt[Ir],mt[Ir+1],Dt,Vt,tr,Zt);if(Ot>yt)It=Ir,yt=Ot;else if(Ot===yt){const zr=Math.abs(Ir-wt);zr<qt&&(It=Ir,qt=zr)}}yt>dt&&(It-tt>3&&je(mt,tt,It,dt),mt[It+2]=yt,rt-It>3&&je(mt,It,rt,dt))}function Ke(mt,tt,rt,dt,yt,wt){let It=yt-rt,qt=wt-dt;if(It!==0||qt!==0){const Dt=((mt-rt)*It+(tt-dt)*qt)/(It*It+qt*qt);Dt>1?(rt=yt,dt=wt):Dt>0&&(rt+=It*Dt,dt+=qt*Dt)}return It=mt-rt,qt=tt-dt,It*It+qt*qt}function lt(mt,tt,rt,dt){const yt={id:mt==null?null:mt,type:tt,geometry:rt,tags:dt,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(tt==="Point"||tt==="MultiPoint"||tt==="LineString")Bt(yt,rt);else if(tt==="Polygon")Bt(yt,rt[0]);else if(tt==="MultiLineString")for(const wt of rt)Bt(yt,wt);else if(tt==="MultiPolygon")for(const wt of rt)Bt(yt,wt[0]);return yt}function Bt(mt,tt){for(let rt=0;rt<tt.length;rt+=3)mt.minX=Math.min(mt.minX,tt[rt]),mt.minY=Math.min(mt.minY,tt[rt+1]),mt.maxX=Math.max(mt.maxX,tt[rt]),mt.maxY=Math.max(mt.maxY,tt[rt+1])}function Xt(mt,tt,rt,dt){if(!tt.geometry)return;const yt=tt.geometry.coordinates;if(yt&&yt.length===0)return;const wt=tt.geometry.type,It=Math.pow(rt.tolerance/((1<<rt.maxZoom)*rt.extent),2);let qt=[],Dt=tt.id;if(rt.promoteId?Dt=tt.properties[rt.promoteId]:rt.generateId&&(Dt=dt||0),wt==="Point")Gt(yt,qt);else if(wt==="MultiPoint")for(const Vt of yt)Gt(Vt,qt);else if(wt==="LineString")lr(yt,qt,It,!1);else if(wt==="MultiLineString"){if(rt.lineMetrics){for(const Vt of yt)qt=[],lr(Vt,qt,It,!1),mt.push(lt(Dt,"LineString",qt,tt.properties));return}yr(yt,qt,It,!1)}else if(wt==="Polygon")yr(yt,qt,It,!0);else{if(wt!=="MultiPolygon"){if(wt==="GeometryCollection"){for(const Vt of tt.geometry.geometries)Xt(mt,{id:Dt,geometry:Vt,properties:tt.properties},rt,dt);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Vt of yt){const tr=[];yr(Vt,tr,It,!0),qt.push(tr)}}mt.push(lt(Dt,wt,qt,tt.properties))}function Gt(mt,tt){tt.push(Lr(mt[0]),Nr(mt[1]),0)}function lr(mt,tt,rt,dt){let yt,wt,It=0;for(let Dt=0;Dt<mt.length;Dt++){const Vt=Lr(mt[Dt][0]),tr=Nr(mt[Dt][1]);tt.push(Vt,tr,0),Dt>0&&(It+=dt?(yt*tr-Vt*wt)/2:Math.sqrt(Math.pow(Vt-yt,2)+Math.pow(tr-wt,2))),yt=Vt,wt=tr}const qt=tt.length-3;tt[2]=1,je(tt,0,qt,rt),tt[qt+2]=1,tt.size=Math.abs(It),tt.start=0,tt.end=tt.size}function yr(mt,tt,rt,dt){for(let yt=0;yt<mt.length;yt++){const wt=[];lr(mt[yt],wt,rt,dt),tt.push(wt)}}function Lr(mt){return mt/360+.5}function Nr(mt){const tt=Math.sin(mt*Math.PI/180),rt=.5-.25*Math.log((1+tt)/(1-tt))/Math.PI;return rt<0?0:rt>1?1:rt}function $r(mt,tt,rt,dt,yt,wt,It,qt){if(dt/=tt,wt>=(rt/=tt)&&It<dt)return mt;if(It<rt||wt>=dt)return null;const Dt=[];for(const Vt of mt){const tr=Vt.geometry;let Zt=Vt.type;const Ir=yt===0?Vt.minX:Vt.minY,Ot=yt===0?Vt.maxX:Vt.maxY;if(Ir>=rt&&Ot<dt){Dt.push(Vt);continue}if(Ot<rt||Ir>=dt)continue;let zr=[];if(Zt==="Point"||Zt==="MultiPoint")Gr(tr,zr,rt,dt,yt);else if(Zt==="LineString")Zr(tr,zr,rt,dt,yt,!1,qt.lineMetrics);else if(Zt==="MultiLineString")dr(tr,zr,rt,dt,yt,!1);else if(Zt==="Polygon")dr(tr,zr,rt,dt,yt,!0);else if(Zt==="MultiPolygon")for(const Xr of tr){const kr=[];dr(Xr,kr,rt,dt,yt,!0),kr.length&&zr.push(kr)}if(zr.length){if(qt.lineMetrics&&Zt==="LineString"){for(const Xr of zr)Dt.push(lt(Vt.id,Zt,Xr,Vt.tags));continue}Zt!=="LineString"&&Zt!=="MultiLineString"||(zr.length===1?(Zt="LineString",zr=zr[0]):Zt="MultiLineString"),Zt!=="Point"&&Zt!=="MultiPoint"||(Zt=zr.length===3?"Point":"MultiPoint"),Dt.push(lt(Vt.id,Zt,zr,Vt.tags))}}return Dt.length?Dt:null}function Gr(mt,tt,rt,dt,yt){for(let wt=0;wt<mt.length;wt+=3){const It=mt[wt+yt];It>=rt&&It<=dt&&fr(tt,mt[wt],mt[wt+1],mt[wt+2])}}function Zr(mt,tt,rt,dt,yt,wt,It){let qt=Dr(mt);const Dt=yt===0?qr:li;let Vt,tr,Zt=mt.start;for(let kr=0;kr<mt.length-3;kr+=3){const ar=mt[kr],mr=mt[kr+1],gr=mt[kr+2],Cr=mt[kr+3],ur=mt[kr+4],cr=yt===0?ar:mr,nr=yt===0?Cr:ur;let hr=!1;It&&(Vt=Math.sqrt(Math.pow(ar-Cr,2)+Math.pow(mr-ur,2))),cr<rt?nr>rt&&(tr=Dt(qt,ar,mr,Cr,ur,rt),It&&(qt.start=Zt+Vt*tr)):cr>dt?nr<dt&&(tr=Dt(qt,ar,mr,Cr,ur,dt),It&&(qt.start=Zt+Vt*tr)):fr(qt,ar,mr,gr),nr<rt&&cr>=rt&&(tr=Dt(qt,ar,mr,Cr,ur,rt),hr=!0),nr>dt&&cr<=dt&&(tr=Dt(qt,ar,mr,Cr,ur,dt),hr=!0),!wt&&hr&&(It&&(qt.end=Zt+Vt*tr),tt.push(qt),qt=Dr(mt)),It&&(Zt+=Vt)}let Ir=mt.length-3;const Ot=mt[Ir],zr=mt[Ir+1],Xr=yt===0?Ot:zr;Xr>=rt&&Xr<=dt&&fr(qt,Ot,zr,mt[Ir+2]),Ir=qt.length-3,wt&&Ir>=3&&(qt[Ir]!==qt[0]||qt[Ir+1]!==qt[1])&&fr(qt,qt[0],qt[1],qt[2]),qt.length&&tt.push(qt)}function Dr(mt){const tt=[];return tt.size=mt.size,tt.start=mt.start,tt.end=mt.end,tt}function dr(mt,tt,rt,dt,yt,wt){for(const It of mt)Zr(It,tt,rt,dt,yt,wt,!1)}function fr(mt,tt,rt,dt){mt.push(tt,rt,dt)}function qr(mt,tt,rt,dt,yt,wt){const It=(wt-tt)/(dt-tt);return fr(mt,wt,rt+(yt-rt)*It,1),It}function li(mt,tt,rt,dt,yt,wt){const It=(wt-rt)/(yt-rt);return fr(mt,tt+(dt-tt)*It,wt,1),It}function Jt(mt,tt){const rt=[];for(let dt=0;dt<mt.length;dt++){const yt=mt[dt],wt=yt.type;let It;if(wt==="Point"||wt==="MultiPoint"||wt==="LineString")It=gi(yt.geometry,tt);else if(wt==="MultiLineString"||wt==="Polygon"){It=[];for(const qt of yt.geometry)It.push(gi(qt,tt))}else if(wt==="MultiPolygon"){It=[];for(const qt of yt.geometry){const Dt=[];for(const Vt of qt)Dt.push(gi(Vt,tt));It.push(Dt)}}rt.push(lt(yt.id,wt,It,yt.tags))}return rt}function gi(mt,tt){const rt=[];rt.size=mt.size,mt.start!==void 0&&(rt.start=mt.start,rt.end=mt.end);for(let dt=0;dt<mt.length;dt+=3)rt.push(mt[dt]+tt,mt[dt+1],mt[dt+2]);return rt}function ci(mt,tt){if(mt.transformed)return mt;const rt=1<<mt.z,dt=mt.x,yt=mt.y;for(const wt of mt.features){const It=wt.geometry,qt=wt.type;if(wt.geometry=[],qt===1)for(let Dt=0;Dt<It.length;Dt+=2)wt.geometry.push(hi(It[Dt],It[Dt+1],tt,rt,dt,yt));else for(let Dt=0;Dt<It.length;Dt++){const Vt=[];for(let tr=0;tr<It[Dt].length;tr+=2)Vt.push(hi(It[Dt][tr],It[Dt][tr+1],tt,rt,dt,yt));wt.geometry.push(Vt)}}return mt.transformed=!0,mt}function hi(mt,tt,rt,dt,yt,wt){return[Math.round(rt*(mt*dt-yt)),Math.round(rt*(tt*dt-wt))]}function ri(mt,tt,rt,dt,yt){const wt=tt===yt.maxZoom?0:yt.tolerance/((1<<tt)*yt.extent),It={features:[],numPoints:0,numSimplified:0,numFeatures:mt.length,source:null,x:rt,y:dt,z:tt,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const qt of mt)Ci(It,qt,wt,yt);return It}function Ci(mt,tt,rt,dt){const yt=tt.geometry,wt=tt.type,It=[];if(mt.minX=Math.min(mt.minX,tt.minX),mt.minY=Math.min(mt.minY,tt.minY),mt.maxX=Math.max(mt.maxX,tt.maxX),mt.maxY=Math.max(mt.maxY,tt.maxY),wt==="Point"||wt==="MultiPoint")for(let qt=0;qt<yt.length;qt+=3)It.push(yt[qt],yt[qt+1]),mt.numPoints++,mt.numSimplified++;else if(wt==="LineString")Ei(It,yt,mt,rt,!1,!1);else if(wt==="MultiLineString"||wt==="Polygon")for(let qt=0;qt<yt.length;qt++)Ei(It,yt[qt],mt,rt,wt==="Polygon",qt===0);else if(wt==="MultiPolygon")for(let qt=0;qt<yt.length;qt++){const Dt=yt[qt];for(let Vt=0;Vt<Dt.length;Vt++)Ei(It,Dt[Vt],mt,rt,!0,Vt===0)}if(It.length){let qt=tt.tags||null;if(wt==="LineString"&&dt.lineMetrics){qt={};for(const Vt in tt.tags)qt[Vt]=tt.tags[Vt];qt.mapbox_clip_start=yt.start/yt.size,qt.mapbox_clip_end=yt.end/yt.size}const Dt={geometry:It,type:wt==="Polygon"||wt==="MultiPolygon"?3:wt==="LineString"||wt==="MultiLineString"?2:1,tags:qt};tt.id!==null&&(Dt.id=tt.id),mt.features.push(Dt)}}function Ei(mt,tt,rt,dt,yt,wt){const It=dt*dt;if(dt>0&&tt.size<(yt?It:dt))return void(rt.numPoints+=tt.length/3);const qt=[];for(let Dt=0;Dt<tt.length;Dt+=3)(dt===0||tt[Dt+2]>It)&&(rt.numSimplified++,qt.push(tt[Dt],tt[Dt+1])),rt.numPoints++;yt&&function(Dt,Vt){let tr=0;for(let Zt=0,Ir=Dt.length,Ot=Ir-2;Zt<Ir;Ot=Zt,Zt+=2)tr+=(Dt[Zt]-Dt[Ot])*(Dt[Zt+1]+Dt[Ot+1]);if(tr>0===Vt)for(let Zt=0,Ir=Dt.length;Zt<Ir/2;Zt+=2){const Ot=Dt[Zt],zr=Dt[Zt+1];Dt[Zt]=Dt[Ir-2-Zt],Dt[Zt+1]=Dt[Ir-1-Zt],Dt[Ir-2-Zt]=Ot,Dt[Ir-1-Zt]=zr}}(qt,wt),mt.push(qt)}const Mi={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class wi{constructor(tt,rt){const dt=(rt=this.options=function(wt,It){for(const qt in It)wt[qt]=It[qt];return wt}(Object.create(Mi),rt)).debug;if(dt&&console.time("preprocess data"),rt.maxZoom<0||rt.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(rt.promoteId&&rt.generateId)throw new Error("promoteId and generateId cannot be used together.");let yt=function(wt,It){const qt=[];if(wt.type==="FeatureCollection")for(let Dt=0;Dt<wt.features.length;Dt++)Xt(qt,wt.features[Dt],It,Dt);else Xt(qt,wt.type==="Feature"?wt:{geometry:wt},It);return qt}(tt,rt);this.tiles={},this.tileCoords=[],dt&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",rt.indexMaxZoom,rt.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),yt=function(wt,It){const qt=It.buffer/It.extent;let Dt=wt;const Vt=$r(wt,1,-1-qt,qt,0,-1,2,It),tr=$r(wt,1,1-qt,2+qt,0,-1,2,It);return(Vt||tr)&&(Dt=$r(wt,1,-qt,1+qt,0,-1,2,It)||[],Vt&&(Dt=Jt(Vt,1).concat(Dt)),tr&&(Dt=Dt.concat(Jt(tr,-1)))),Dt}(yt,rt),yt.length&&this.splitTile(yt,0,0,0),dt&&(yt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(tt,rt,dt,yt,wt,It,qt){const Dt=[tt,rt,dt,yt],Vt=this.options,tr=Vt.debug;for(;Dt.length;){yt=Dt.pop(),dt=Dt.pop(),rt=Dt.pop(),tt=Dt.pop();const Zt=1<<rt,Ir=Ft(rt,dt,yt);let Ot=this.tiles[Ir];if(!Ot&&(tr>1&&console.time("creation"),Ot=this.tiles[Ir]=ri(tt,rt,dt,yt,Vt),this.tileCoords.push({z:rt,x:dt,y:yt}),tr)){tr>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",rt,dt,yt,Ot.numFeatures,Ot.numPoints,Ot.numSimplified),console.timeEnd("creation"));const hr=`z${rt}`;this.stats[hr]=(this.stats[hr]||0)+1,this.total++}if(Ot.source=tt,wt==null){if(rt===Vt.indexMaxZoom||Ot.numPoints<=Vt.indexMaxPoints)continue}else{if(rt===Vt.maxZoom||rt===wt)continue;if(wt!=null){const hr=wt-rt;if(dt!==It>>hr||yt!==qt>>hr)continue}}if(Ot.source=null,tt.length===0)continue;tr>1&&console.time("clipping");const zr=.5*Vt.buffer/Vt.extent,Xr=.5-zr,kr=.5+zr,ar=1+zr;let mr=null,gr=null,Cr=null,ur=null,cr=$r(tt,Zt,dt-zr,dt+kr,0,Ot.minX,Ot.maxX,Vt),nr=$r(tt,Zt,dt+Xr,dt+ar,0,Ot.minX,Ot.maxX,Vt);tt=null,cr&&(mr=$r(cr,Zt,yt-zr,yt+kr,1,Ot.minY,Ot.maxY,Vt),gr=$r(cr,Zt,yt+Xr,yt+ar,1,Ot.minY,Ot.maxY,Vt),cr=null),nr&&(Cr=$r(nr,Zt,yt-zr,yt+kr,1,Ot.minY,Ot.maxY,Vt),ur=$r(nr,Zt,yt+Xr,yt+ar,1,Ot.minY,Ot.maxY,Vt),nr=null),tr>1&&console.timeEnd("clipping"),Dt.push(mr||[],rt+1,2*dt,2*yt),Dt.push(gr||[],rt+1,2*dt,2*yt+1),Dt.push(Cr||[],rt+1,2*dt+1,2*yt),Dt.push(ur||[],rt+1,2*dt+1,2*yt+1)}}getTile(tt,rt,dt){tt=+tt,rt=+rt,dt=+dt;const yt=this.options,{extent:wt,debug:It}=yt;if(tt<0||tt>24)return null;const qt=1<<tt,Dt=Ft(tt,rt=rt+qt&qt-1,dt);if(this.tiles[Dt])return ci(this.tiles[Dt],wt);It>1&&console.log("drilling down to z%d-%d-%d",tt,rt,dt);let Vt,tr=tt,Zt=rt,Ir=dt;for(;!Vt&&tr>0;)tr--,Zt>>=1,Ir>>=1,Vt=this.tiles[Ft(tr,Zt,Ir)];return Vt&&Vt.source?(It>1&&(console.log("found parent tile z%d-%d-%d",tr,Zt,Ir),console.time("drilling down")),this.splitTile(Vt.source,tr,Zt,Ir,tt,rt,dt),It>1&&console.timeEnd("drilling down"),this.tiles[Dt]?ci(this.tiles[Dt],wt):null):null}}function Ft(mt,tt,rt){return 32*((1<<mt)*rt+tt)+mt}class er extends Pe{constructor(tt,rt,dt,yt=sr){super(tt,rt,dt),this._dataUpdateable=new Map,this._createGeoJSONIndex=yt}loadVectorTile(tt,rt){return de._(this,void 0,void 0,function*(){const dt=tt.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const yt=this._geoJSONIndex.getTile(dt.z,dt.x,dt.y);if(!yt)return null;const wt=new ze(yt.features,{version:2,extent:de.$});let It=function(qt){const Dt=new de.cM;return function(Vt,tr){for(const Zt in Vt.layers)tr.writeMessage(3,Re,Vt.layers[Zt])}(qt,Dt),Dt.finish()}(wt);return It.byteOffset===0&&It.byteLength===It.buffer.byteLength||(It=new Uint8Array(It)),{vectorTile:wt,rawData:It.buffer}})}loadData(tt){return de._(this,void 0,void 0,function*(){var rt;(rt=this._pendingRequest)===null||rt===void 0||rt.abort();const dt=!!(tt&&tt.request&&tt.request.collectResourceTiming)&&new de.cN(tt.request);this._pendingRequest=new AbortController;try{(!this._pendingData||tt.request||tt.data||tt.dataDiff)&&(this._pendingData=this.loadAndProcessGeoJSON(tt,this._pendingRequest));const yt=yield this._pendingData;this._geoJSONIndex=this._createGeoJSONIndex(yt,tt),this.loaded={};const wt={data:yt};if(dt){const It=dt.finish();It&&(wt.resourceTiming={},wt.resourceTiming[tt.source]=JSON.parse(JSON.stringify(It)))}return wt}catch(yt){if(delete this._pendingRequest,de.cy(yt))return{abandoned:!0};throw yt}})}getData(){return de._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(tt){const rt=this.loaded;return rt&&rt[tt.uid]?super.reloadTile(tt):this.loadTile(tt)}loadAndProcessGeoJSON(tt,rt){return de._(this,void 0,void 0,function*(){let dt=yield this.loadGeoJSON(tt,rt);if(delete this._pendingRequest,typeof dt!="object")throw new Error(`Input data given to '${tt.source}' is not a valid GeoJSON object.`);if(De(dt,!0),tt.filter){const yt=de.cT(tt.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(yt.result==="error")throw new Error(yt.value.map(It=>`${It.key}: ${It.message}`).join(", "));const wt=dt.features.filter(It=>yt.value.evaluate({zoom:0},It));dt={type:"FeatureCollection",features:wt}}return dt})}loadGeoJSON(tt,rt){return de._(this,void 0,void 0,function*(){const{promoteId:dt}=tt;if(tt.request){const yt=yield de.j(tt.request,rt);return this._dataUpdateable=de.cV(yt.data,dt)?de.cU(yt.data,dt):void 0,yt.data}if(typeof tt.data=="string")try{const yt=JSON.parse(tt.data);return this._dataUpdateable=de.cV(yt,dt)?de.cU(yt,dt):void 0,yt}catch{throw new Error(`Input data given to '${tt.source}' is not a valid GeoJSON object.`)}if(!tt.dataDiff)throw new Error(`Input data given to '${tt.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${tt.source}`);return de.cW(this._dataUpdateable,tt.dataDiff,dt),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(tt){return de._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(tt){return this._geoJSONIndex.getClusterExpansionZoom(tt.clusterId)}getClusterChildren(tt){return this._geoJSONIndex.getChildren(tt.clusterId)}getClusterLeaves(tt){return this._geoJSONIndex.getLeaves(tt.clusterId,tt.limit,tt.offset)}}function sr(mt,tt){return tt.cluster?new Mt(function({superclusterOptions:rt,clusterProperties:dt}){if(!dt||!rt)return rt;const yt={},wt={},It={accumulated:null,zoom:0},qt={properties:null},Dt=Object.keys(dt);for(const Vt of Dt){const[tr,Zt]=dt[Vt],Ir=de.cT(Zt),Ot=de.cT(typeof tr=="string"?[tr,["accumulated"],["get",Vt]]:tr);yt[Vt]=Ir.value,wt[Vt]=Ot.value}return rt.map=Vt=>{qt.properties=Vt;const tr={};for(const Zt of Dt)tr[Zt]=yt[Zt].evaluate(It,qt);return tr},rt.reduce=(Vt,tr)=>{qt.properties=tr;for(const Zt of Dt)It.accumulated=Vt[Zt],Vt[Zt]=wt[Zt].evaluate(It,qt)},rt}(tt)).load(mt.features):function(rt,dt){return new wi(rt,dt)}(mt,tt.geojsonVtOptions)}class ir{constructor(tt){this.self=tt,this.actor=new de.J(tt),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(rt,dt)=>{if(this.externalWorkerSourceTypes[rt])throw new Error(`Worker source with name "${rt}" already registered.`);this.externalWorkerSourceTypes[rt]=dt},this.self.addProtocol=de.cA,this.self.removeProtocol=de.cB,this.self.registerRTLTextPlugin=rt=>{de.cX.setMethods(rt)},this.actor.registerMessageHandler("LDT",(rt,dt)=>this._getDEMWorkerSource(rt,dt.source).loadTile(dt)),this.actor.registerMessageHandler("RDT",(rt,dt)=>de._(this,void 0,void 0,function*(){this._getDEMWorkerSource(rt,dt.source).removeTile(dt)})),this.actor.registerMessageHandler("GCEZ",(rt,dt)=>de._(this,void 0,void 0,function*(){return this._getWorkerSource(rt,dt.type,dt.source).getClusterExpansionZoom(dt)})),this.actor.registerMessageHandler("GCC",(rt,dt)=>de._(this,void 0,void 0,function*(){return this._getWorkerSource(rt,dt.type,dt.source).getClusterChildren(dt)})),this.actor.registerMessageHandler("GCL",(rt,dt)=>de._(this,void 0,void 0,function*(){return this._getWorkerSource(rt,dt.type,dt.source).getClusterLeaves(dt)})),this.actor.registerMessageHandler("LD",(rt,dt)=>this._getWorkerSource(rt,dt.type,dt.source).loadData(dt)),this.actor.registerMessageHandler("GD",(rt,dt)=>this._getWorkerSource(rt,dt.type,dt.source).getData()),this.actor.registerMessageHandler("LT",(rt,dt)=>this._getWorkerSource(rt,dt.type,dt.source).loadTile(dt)),this.actor.registerMessageHandler("RT",(rt,dt)=>this._getWorkerSource(rt,dt.type,dt.source).reloadTile(dt)),this.actor.registerMessageHandler("AT",(rt,dt)=>this._getWorkerSource(rt,dt.type,dt.source).abortTile(dt)),this.actor.registerMessageHandler("RMT",(rt,dt)=>this._getWorkerSource(rt,dt.type,dt.source).removeTile(dt)),this.actor.registerMessageHandler("RS",(rt,dt)=>de._(this,void 0,void 0,function*(){if(!this.workerSources[rt]||!this.workerSources[rt][dt.type]||!this.workerSources[rt][dt.type][dt.source])return;const yt=this.workerSources[rt][dt.type][dt.source];delete this.workerSources[rt][dt.type][dt.source],yt.removeSource!==void 0&&yt.removeSource(dt)})),this.actor.registerMessageHandler("RM",rt=>de._(this,void 0,void 0,function*(){delete this.layerIndexes[rt],delete this.availableImages[rt],delete this.workerSources[rt],delete this.demWorkerSources[rt],this.globalStates.delete(rt)})),this.actor.registerMessageHandler("SR",(rt,dt)=>de._(this,void 0,void 0,function*(){this.referrer=dt})),this.actor.registerMessageHandler("SRPS",(rt,dt)=>this._syncRTLPluginState(rt,dt)),this.actor.registerMessageHandler("IS",(rt,dt)=>de._(this,void 0,void 0,function*(){this.self.importScripts(dt)})),this.actor.registerMessageHandler("SI",(rt,dt)=>this._setImages(rt,dt)),this.actor.registerMessageHandler("UL",(rt,dt)=>de._(this,void 0,void 0,function*(){this._getLayerIndex(rt).update(dt.layers,dt.removedIds,this._getGlobalState(rt))})),this.actor.registerMessageHandler("UGS",(rt,dt)=>de._(this,void 0,void 0,function*(){const yt=this._getGlobalState(rt);for(const wt in dt)yt[wt]=dt[wt]})),this.actor.registerMessageHandler("SL",(rt,dt)=>de._(this,void 0,void 0,function*(){this._getLayerIndex(rt).replace(dt,this._getGlobalState(rt))}))}_getGlobalState(tt){let rt=this.globalStates.get(tt);return rt||(rt={},this.globalStates.set(tt,rt)),rt}_setImages(tt,rt){return de._(this,void 0,void 0,function*(){this.availableImages[tt]=rt;for(const dt in this.workerSources[tt]){const yt=this.workerSources[tt][dt];for(const wt in yt)yt[wt].availableImages=rt}})}_syncRTLPluginState(tt,rt){return de._(this,void 0,void 0,function*(){return yield de.cX.syncState(rt,this.self.importScripts)})}_getAvailableImages(tt){let rt=this.availableImages[tt];return rt||(rt=[]),rt}_getLayerIndex(tt){let rt=this.layerIndexes[tt];return rt||(rt=this.layerIndexes[tt]=new oe),rt}_getWorkerSource(tt,rt,dt){if(this.workerSources[tt]||(this.workerSources[tt]={}),this.workerSources[tt][rt]||(this.workerSources[tt][rt]={}),!this.workerSources[tt][rt][dt]){const yt={sendAsync:(wt,It)=>(wt.targetMapId=tt,this.actor.sendAsync(wt,It))};switch(rt){case"vector":this.workerSources[tt][rt][dt]=new Pe(yt,this._getLayerIndex(tt),this._getAvailableImages(tt));break;case"geojson":this.workerSources[tt][rt][dt]=new er(yt,this._getLayerIndex(tt),this._getAvailableImages(tt));break;default:this.workerSources[tt][rt][dt]=new this.externalWorkerSourceTypes[rt](yt,this._getLayerIndex(tt),this._getAvailableImages(tt))}}return this.workerSources[tt][rt][dt]}_getDEMWorkerSource(tt,rt){return this.demWorkerSources[tt]||(this.demWorkerSources[tt]={}),this.demWorkerSources[tt][rt]||(this.demWorkerSources[tt][rt]=new ye),this.demWorkerSources[tt][rt]}}return de.i(self)&&(self.worker=new ir(self)),ir}),ae("index",["exports","./shared"],function(de,oe){var me="5.10.0";function ve(){var be=new oe.A(4);return oe.A!=Float32Array&&(be[1]=0,be[2]=0),be[0]=1,be[3]=1,be}let Ee,Pe;const ye={frame(be,re,he){const fe=requestAnimationFrame(we=>{_e(),re(we)}),{unsubscribe:_e}=oe.s(be.signal,"abort",()=>{_e(),cancelAnimationFrame(fe),he(oe.c())},!1)},frameAsync(be){return new Promise((re,he)=>{this.frame(be,re,he)})},getImageData(be,re=0){return this.getImageCanvasContext(be).getImageData(-re,-re,be.width+2*re,be.height+2*re)},getImageCanvasContext(be){const re=window.document.createElement("canvas"),he=re.getContext("2d",{willReadFrequently:!0});if(!he)throw new Error("failed to create canvas 2d context");return re.width=be.width,re.height=be.height,he.drawImage(be,0,0,be.width,be.height),he},resolveURL:be=>(Ee||(Ee=document.createElement("a")),Ee.href=be,Ee.href),hardwareConcurrency:typeof navigator!="undefined"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(Pe==null&&(Pe=matchMedia("(prefers-reduced-motion: reduce)")),Pe.matches)}},Te=new class{constructor(){this._realTime=typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),this._frozenAt=null}getCurrentTime(){return this._frozenAt!==null?this._frozenAt:this._realTime()}setNow(be){this._frozenAt=be}restoreNow(){this._frozenAt=null}isFrozen(){return this._frozenAt!==null}};function Ae(){return Te.getCurrentTime()}class Ce{static testProp(re){if(!Ce.docStyle)return re[0];for(let he=0;he<re.length;he++)if(re[he]in Ce.docStyle)return re[he];return re[0]}static create(re,he,fe){const _e=window.document.createElement(re);return he!==void 0&&(_e.className=he),fe&&fe.appendChild(_e),_e}static createNS(re,he){return window.document.createElementNS(re,he)}static disableDrag(){Ce.docStyle&&Ce.selectProp&&(Ce.userSelect=Ce.docStyle[Ce.selectProp],Ce.docStyle[Ce.selectProp]="none")}static enableDrag(){Ce.docStyle&&Ce.selectProp&&(Ce.docStyle[Ce.selectProp]=Ce.userSelect)}static setTransform(re,he){re.style[Ce.transformProp]=he}static addEventListener(re,he,fe,_e={}){re.addEventListener(he,fe,"passive"in _e?_e:_e.capture)}static removeEventListener(re,he,fe,_e={}){re.removeEventListener(he,fe,"passive"in _e?_e:_e.capture)}static suppressClickInternal(re){re.preventDefault(),re.stopPropagation(),window.removeEventListener("click",Ce.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",Ce.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",Ce.suppressClickInternal,!0)},0)}static getScale(re){const he=re.getBoundingClientRect();return{x:he.width/re.offsetWidth||1,y:he.height/re.offsetHeight||1,boundingClientRect:he}}static getPoint(re,he,fe){const _e=he.boundingClientRect;return new oe.P((fe.clientX-_e.left)/he.x-re.clientLeft,(fe.clientY-_e.top)/he.y-re.clientTop)}static mousePos(re,he){const fe=Ce.getScale(re);return Ce.getPoint(re,fe,he)}static touchPos(re,he){const fe=[],_e=Ce.getScale(re);for(let we=0;we<he.length;we++)fe.push(Ce.getPoint(re,_e,he[we]));return fe}static mouseButton(re){return re.button}static remove(re){re.parentNode&&re.parentNode.removeChild(re)}static sanitize(re){const he=new DOMParser().parseFromString(re,"text/html").body||document.createElement("body"),fe=he.querySelectorAll("script");for(const _e of fe)_e.remove();return Ce.clean(he),he.innerHTML}static isPossiblyDangerous(re,he){const fe=he.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(re)||!fe.includes("javascript:")&&!fe.includes("data:"))||!!re.startsWith("on")||void 0}static clean(re){const he=re.children;for(const fe of he)Ce.removeAttributes(fe),Ce.clean(fe)}static removeAttributes(re){for(const{name:he,value:fe}of re.attributes)Ce.isPossiblyDangerous(he,fe)&&re.removeAttribute(he)}}Ce.docStyle=typeof window!="undefined"&&window.document&&window.document.documentElement.style,Ce.selectProp=Ce.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),Ce.transformProp=Ce.testProp(["transform","WebkitTransform"]);const De={supported:!1,testSupport:function(be){!Re&&ze&&(Oe?qe(be):Ie=be)}};let Ie,ze,Re=!1,Oe=!1;function qe(be){const re=be.createTexture();be.bindTexture(be.TEXTURE_2D,re);try{if(be.texImage2D(be.TEXTURE_2D,0,be.RGBA,be.RGBA,be.UNSIGNED_BYTE,ze),be.isContextLost())return;De.supported=!0}catch{}be.deleteTexture(re),Re=!0}var Ze;typeof document!="undefined"&&(ze=document.createElement("img"),ze.onload=()=>{Ie&&qe(Ie),Ie=null,Oe=!0},ze.onerror=()=>{Re=!0,Ie=null},ze.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(be){let re,he,fe,_e;be.resetRequestQueue=()=>{re=[],he=0,fe=0,_e={}},be.addThrottleControl=Be=>{const $e=fe++;return _e[$e]=Be,$e},be.removeThrottleControl=Be=>{delete _e[Be],Me()},be.getImage=(Be,$e,We=!0)=>new Promise((Je,Xe)=>{De.supported&&(Be.headers||(Be.headers={}),Be.headers.accept="image/webp,*/*"),oe.e(Be,{type:"image"}),re.push({abortController:$e,requestParameters:Be,supportImageRefresh:We,state:"queued",onError:st=>{Xe(st)},onSuccess:st=>{Je(st)}}),Me()});const we=Be=>oe._(this,void 0,void 0,function*(){Be.state="running";const{requestParameters:$e,supportImageRefresh:We,onError:Je,onSuccess:Xe,abortController:st}=Be,ht=We===!1&&!oe.i(self)&&!oe.g($e.url)&&(!$e.headers||Object.keys($e.headers).reduce((xt,Ct)=>xt&&Ct==="accept",!0));he++;const vt=ht?Fe($e,st):oe.m($e,st);try{const xt=yield vt;delete Be.abortController,Be.state="completed",xt.data instanceof HTMLImageElement||oe.b(xt.data)?Xe(xt):xt.data&&Xe({data:yield(bt=xt.data,typeof createImageBitmap=="function"?oe.f(bt):oe.h(bt)),cacheControl:xt.cacheControl,expires:xt.expires})}catch(xt){delete Be.abortController,Je(xt)}finally{he--,Me()}var bt}),Me=()=>{const Be=(()=>{for(const $e of Object.keys(_e))if(_e[$e]())return!0;return!1})()?oe.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:oe.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let $e=he;$e<Be&&re.length>0;$e++){const We=re.shift();We.abortController.signal.aborted?$e--:we(We)}},Fe=(Be,$e)=>new Promise((We,Je)=>{const Xe=new Image,st=Be.url,ht=Be.credentials;ht&&ht==="include"?Xe.crossOrigin="use-credentials":(ht&&ht==="same-origin"||!oe.d(st))&&(Xe.crossOrigin="anonymous"),$e.signal.addEventListener("abort",()=>{Xe.src="",Je(oe.c())}),Xe.fetchPriority="high",Xe.onload=()=>{Xe.onerror=Xe.onload=null,We({data:Xe})},Xe.onerror=()=>{Xe.onerror=Xe.onload=null,$e.signal.aborted||Je(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},Xe.src=st})}(Ze||(Ze={})),Ze.resetRequestQueue();class Ue{constructor(re){this._transformRequestFn=re!=null?re:null}transformRequest(re,he){return this._transformRequestFn&&this._transformRequestFn(re,he)||{url:re}}setTransformRequest(re){this._transformRequestFn=re}}function Ye(be){const re=[];if(typeof be=="string")re.push({id:"default",url:be});else if(be&&be.length>0){const he=[];for(const{id:fe,url:_e}of be){const we=`${fe}${_e}`;he.indexOf(we)===-1&&(he.push(we),re.push({id:fe,url:_e}))}}return re}function ct(be,re,he){try{const fe=new URL(be);return fe.pathname+=`${re}${he}`,fe.toString()}catch{throw new Error(`Invalid sprite URL "${be}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function at(be){const{userImage:re}=be;return!!(re&&re.render&&re.render())&&(be.data.replace(new Uint8Array(re.data.buffer)),!0)}class ft extends oe.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new oe.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(re){if(this.loaded!==re&&(this.loaded=re,re)){for(const{ids:he,promiseResolve:fe}of this.requestors)fe(this._getImagesForIds(he));this.requestors=[]}}getImage(re){const he=this.images[re];if(he&&!he.data&&he.spriteData){const fe=he.spriteData;he.data=new oe.R({width:fe.width,height:fe.height},fe.context.getImageData(fe.x,fe.y,fe.width,fe.height).data),he.spriteData=null}return he}addImage(re,he){if(this.images[re])throw new Error(`Image id ${re} already exist, use updateImage instead`);this._validate(re,he)&&(this.images[re]=he)}_validate(re,he){let fe=!0;const _e=he.data||he.spriteData;return this._validateStretch(he.stretchX,_e&&_e.width)||(this.fire(new oe.k(new Error(`Image "${re}" has invalid "stretchX" value`))),fe=!1),this._validateStretch(he.stretchY,_e&&_e.height)||(this.fire(new oe.k(new Error(`Image "${re}" has invalid "stretchY" value`))),fe=!1),this._validateContent(he.content,he)||(this.fire(new oe.k(new Error(`Image "${re}" has invalid "content" value`))),fe=!1),fe}_validateStretch(re,he){if(!re)return!0;let fe=0;for(const _e of re){if(_e[0]<fe||_e[1]<_e[0]||he<_e[1])return!1;fe=_e[1]}return!0}_validateContent(re,he){if(!re)return!0;if(re.length!==4)return!1;const fe=he.spriteData,_e=fe&&fe.width||he.data.width,we=fe&&fe.height||he.data.height;return!(re[0]<0||_e<re[0]||re[1]<0||we<re[1]||re[2]<0||_e<re[2]||re[3]<0||we<re[3]||re[2]<re[0]||re[3]<re[1])}updateImage(re,he,fe=!0){const _e=this.getImage(re);if(fe&&(_e.data.width!==he.data.width||_e.data.height!==he.data.height))throw new Error(`size mismatch between old image (${_e.data.width}x${_e.data.height}) and new image (${he.data.width}x${he.data.height}).`);he.version=_e.version+1,this.images[re]=he,this.updatedImages[re]=!0}removeImage(re){const he=this.images[re];delete this.images[re],delete this.patterns[re],he.userImage&&he.userImage.onRemove&&he.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(re){return new Promise((he,fe)=>{let _e=!0;if(!this.isLoaded())for(const we of re)this.images[we]||(_e=!1);this.isLoaded()||_e?he(this._getImagesForIds(re)):this.requestors.push({ids:re,promiseResolve:he})})}_getImagesForIds(re){const he={};for(const fe of re){let _e=this.getImage(fe);_e||(this.fire(new oe.l("styleimagemissing",{id:fe})),_e=this.getImage(fe)),_e?he[fe]={data:_e.data.clone(),pixelRatio:_e.pixelRatio,sdf:_e.sdf,version:_e.version,stretchX:_e.stretchX,stretchY:_e.stretchY,content:_e.content,textFitWidth:_e.textFitWidth,textFitHeight:_e.textFitHeight,hasRenderCallback:Boolean(_e.userImage&&_e.userImage.render)}:oe.w(`Image "${fe}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return he}getPixelSize(){const{width:re,height:he}=this.atlasImage;return{width:re,height:he}}getPattern(re){const he=this.patterns[re],fe=this.getImage(re);if(!fe)return null;if(he&&he.position.version===fe.version)return he.position;if(he)he.position.version=fe.version;else{const _e={w:fe.data.width+2,h:fe.data.height+2,x:0,y:0},we=new oe.I(_e,fe);this.patterns[re]={bin:_e,position:we}}return this._updatePatternAtlas(),this.patterns[re].position}bind(re){const he=re.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new oe.T(re,this.atlasImage,he.RGBA),this.atlasTexture.bind(he.LINEAR,he.CLAMP_TO_EDGE)}_updatePatternAtlas(){const re=[];for(const we in this.patterns)re.push(this.patterns[we].bin);const{w:he,h:fe}=oe.p(re),_e=this.atlasImage;_e.resize({width:he||1,height:fe||1});for(const we in this.patterns){const{bin:Me}=this.patterns[we],Fe=Me.x+1,Be=Me.y+1,$e=this.getImage(we).data,We=$e.width,Je=$e.height;oe.R.copy($e,_e,{x:0,y:0},{x:Fe,y:Be},{width:We,height:Je}),oe.R.copy($e,_e,{x:0,y:Je-1},{x:Fe,y:Be-1},{width:We,height:1}),oe.R.copy($e,_e,{x:0,y:0},{x:Fe,y:Be+Je},{width:We,height:1}),oe.R.copy($e,_e,{x:We-1,y:0},{x:Fe-1,y:Be},{width:1,height:Je}),oe.R.copy($e,_e,{x:0,y:0},{x:Fe+We,y:Be},{width:1,height:Je})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(re){for(const he of re){if(this.callbackDispatchedThisFrame[he])continue;this.callbackDispatchedThisFrame[he]=!0;const fe=this.getImage(he);fe||oe.w(`Image with ID: "${he}" was not found`),at(fe)&&this.updateImage(he,fe)}}}const pt=1e20;function Mt(be,re,he,fe,_e,we,Me,Fe,Be){for(let $e=re;$e<re+fe;$e++)At(be,he*we+$e,we,_e,Me,Fe,Be);for(let $e=he;$e<he+_e;$e++)At(be,$e*we+re,1,fe,Me,Fe,Be)}function At(be,re,he,fe,_e,we,Me){we[0]=0,Me[0]=-pt,Me[1]=pt,_e[0]=be[re];for(let Fe=1,Be=0,$e=0;Fe<fe;Fe++){_e[Fe]=be[re+Fe*he];const We=Fe*Fe;do{const Je=we[Be];$e=(_e[Fe]-_e[Je]+We-Je*Je)/(Fe-Je)/2}while($e<=Me[Be]&&--Be>-1);Be++,we[Be]=Fe,Me[Be]=$e,Me[Be+1]=pt}for(let Fe=0,Be=0;Fe<fe;Fe++){for(;Me[Be+1]<Fe;)Be++;const $e=we[Be],We=Fe-$e;be[re+Fe*he]=_e[$e]+We*We}}class _t{constructor(re,he,fe){this.requestManager=re,this.localIdeographFontFamily=he,this.entries={},this.lang=fe}setURL(re){this.url=re}getGlyphs(re){return oe._(this,void 0,void 0,function*(){const he=[];for(const we in re)for(const Me of re[we])he.push(this._getAndCacheGlyphsPromise(we,Me));const fe=yield Promise.all(he),_e={};for(const{stack:we,id:Me,glyph:Fe}of fe)_e[we]||(_e[we]={}),_e[we][Me]=Fe&&{id:Fe.id,bitmap:Fe.bitmap.clone(),metrics:Fe.metrics};return _e})}_getAndCacheGlyphsPromise(re,he){return oe._(this,void 0,void 0,function*(){let fe=this.entries[re];fe||(fe=this.entries[re]={glyphs:{},requests:{},ranges:{}});let _e=fe.glyphs[he];if(_e!==void 0)return{stack:re,id:he,glyph:_e};if(_e=this._tinySDF(fe,re,he),_e)return fe.glyphs[he]=_e,{stack:re,id:he,glyph:_e};const we=Math.floor(he/256);if(256*we>65535)throw new Error("glyphs > 65535 not supported");if(fe.ranges[we])return{stack:re,id:he,glyph:_e};if(!this.url)throw new Error("glyphsUrl is not set");if(!fe.requests[we]){const Fe=_t.loadGlyphRange(re,we,this.url,this.requestManager);fe.requests[we]=Fe}const Me=yield fe.requests[we];for(const Fe in Me)this._doesCharSupportLocalGlyph(+Fe)||(fe.glyphs[+Fe]=Me[+Fe]);return fe.ranges[we]=!0,{stack:re,id:he,glyph:Me[he]||null}})}_doesCharSupportLocalGlyph(re){return!!this.localIdeographFontFamily&&(/\p{Ideo}|\p{sc=Hang}|\p{sc=Hira}|\p{sc=Kana}/u.test(String.fromCodePoint(re))||oe.u["CJK Unified Ideographs"](re)||oe.u["Hangul Syllables"](re)||oe.u.Hiragana(re)||oe.u.Katakana(re)||oe.u["CJK Symbols and Punctuation"](re)||oe.u["Halfwidth and Fullwidth Forms"](re))}_tinySDF(re,he,fe){const _e=this.localIdeographFontFamily;if(!_e||!this._doesCharSupportLocalGlyph(fe))return;let we=re.tinySDF;if(!we){let Fe="400";/bold/i.test(he)?Fe="900":/medium/i.test(he)?Fe="500":/light/i.test(he)&&(Fe="200"),we=re.tinySDF=new _t.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,lang:this.lang,fontFamily:_e,fontWeight:Fe})}const Me=we.draw(String.fromCharCode(fe));return{id:fe,bitmap:new oe.q({width:Me.width||60,height:Me.height||60},Me.data),metrics:{width:Me.glyphWidth/2||24,height:Me.glyphHeight/2||24,left:Me.glyphLeft/2+.5||0,top:Me.glyphTop/2-27.5||-8,advance:Me.glyphAdvance/2||24,isDoubleResolution:!0}}}}_t.loadGlyphRange=function(be,re,he,fe){return oe._(this,void 0,void 0,function*(){const _e=256*re,we=_e+255,Me=fe.transformRequest(he.replace("{fontstack}",be).replace("{range}",`${_e}-${we}`),"Glyphs"),Fe=yield oe.n(Me,new AbortController);if(!Fe||!Fe.data)throw new Error(`Could not load glyph range. range: ${re}, ${_e}-${we}`);const Be={};for(const $e of oe.o(Fe.data))Be[$e.id]=$e;return Be})},_t.TinySDF=class{constructor({fontSize:be=24,buffer:re=3,radius:he=8,cutoff:fe=.25,fontFamily:_e="sans-serif",fontWeight:we="normal",fontStyle:Me="normal",lang:Fe=null}={}){this.buffer=re,this.cutoff=fe,this.radius=he,this.lang=Fe;const Be=this.size=be+4*re,$e=this._createCanvas(Be),We=this.ctx=$e.getContext("2d",{willReadFrequently:!0});We.font=`${Me} ${we} ${be}px ${_e}`,We.textBaseline="alphabetic",We.textAlign="left",We.fillStyle="black",this.gridOuter=new Float64Array(Be*Be),this.gridInner=new Float64Array(Be*Be),this.f=new Float64Array(Be),this.z=new Float64Array(Be+1),this.v=new Uint16Array(Be)}_createCanvas(be){const re=document.createElement("canvas");return re.width=re.height=be,re}draw(be){const{width:re,actualBoundingBoxAscent:he,actualBoundingBoxDescent:fe,actualBoundingBoxLeft:_e,actualBoundingBoxRight:we}=this.ctx.measureText(be),Me=Math.ceil(he),Fe=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(we-_e))),Be=Math.min(this.size-this.buffer,Me+Math.ceil(fe)),$e=Fe+2*this.buffer,We=Be+2*this.buffer,Je=Math.max($e*We,0),Xe=new Uint8ClampedArray(Je),st={data:Xe,width:$e,height:We,glyphWidth:Fe,glyphHeight:Be,glyphTop:Me,glyphLeft:0,glyphAdvance:re};if(Fe===0||Be===0)return st;const{ctx:ht,buffer:vt,gridInner:bt,gridOuter:xt}=this;this.lang&&(ht.lang=this.lang),ht.clearRect(vt,vt,Fe,Be),ht.fillText(be,vt,vt+Me);const Ct=ht.getImageData(vt,vt,Fe,Be);xt.fill(pt,0,Je),bt.fill(0,0,Je);for(let kt=0;kt<Be;kt++)for(let Tt=0;Tt<Fe;Tt++){const Lt=Ct.data[4*(kt*Fe+Tt)+3]/255;if(Lt===0)continue;const Rt=(kt+vt)*$e+Tt+vt;if(Lt===1)xt[Rt]=0,bt[Rt]=pt;else{const Pt=.5-Lt;xt[Rt]=Pt>0?Pt*Pt:0,bt[Rt]=Pt<0?Pt*Pt:0}}Mt(xt,0,0,$e,We,$e,this.f,this.v,this.z),Mt(bt,vt,vt,Fe,Be,$e,this.f,this.v,this.z);for(let kt=0;kt<Je;kt++){const Tt=Math.sqrt(xt[kt])-Math.sqrt(bt[kt]);Xe[kt]=Math.round(255-255*(Tt/this.radius+this.cutoff))}return st}};class Qe{constructor(){this.specification=oe.v.light.position}possiblyEvaluate(re,he){return oe.B(re.expression.evaluate(he))}interpolate(re,he,fe){return{x:oe.C.number(re.x,he.x,fe),y:oe.C.number(re.y,he.y,fe),z:oe.C.number(re.z,he.z,fe)}}}let it;class Ge extends oe.E{constructor(re){super(),it=it||new oe.r({anchor:new oe.D(oe.v.light.anchor),position:new Qe,color:new oe.D(oe.v.light.color),intensity:new oe.D(oe.v.light.intensity)}),this._transitionable=new oe.t(it,void 0),this.setLight(re),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(re,he={}){if(!this._validate(oe.x,re,he))for(const fe in re){const _e=re[fe];fe.endsWith("-transition")?this._transitionable.setTransition(fe.slice(0,-11),_e):this._transitionable.setValue(fe,_e)}}updateTransitions(re){this._transitioning=this._transitionable.transitioned(re,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(re){this.properties=this._transitioning.possiblyEvaluate(re)}_validate(re,he,fe){return(!fe||fe.validate!==!1)&&oe.y(this,re.call(oe.z,{value:he,style:{glyphs:!0,sprite:!0},styleSpec:oe.v}))}}const je=new oe.r({"sky-color":new oe.D(oe.v.sky["sky-color"]),"horizon-color":new oe.D(oe.v.sky["horizon-color"]),"fog-color":new oe.D(oe.v.sky["fog-color"]),"fog-ground-blend":new oe.D(oe.v.sky["fog-ground-blend"]),"horizon-fog-blend":new oe.D(oe.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new oe.D(oe.v.sky["sky-horizon-blend"]),"atmosphere-blend":new oe.D(oe.v.sky["atmosphere-blend"])});class Ke extends oe.E{constructor(re){super(),this._transitionable=new oe.t(je,void 0),this.setSky(re),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new oe.F(0))}setSky(re,he={}){if(!this._validate(oe.G,re,he)){re||(re={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const fe in re){const _e=re[fe];fe.endsWith("-transition")?this._transitionable.setTransition(fe.slice(0,-11),_e):this._transitionable.setValue(fe,_e)}}}getSky(){return this._transitionable.serialize()}updateTransitions(re){this._transitioning=this._transitionable.transitioned(re,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(re){this.properties=this._transitioning.possiblyEvaluate(re)}_validate(re,he,fe={}){return(fe==null?void 0:fe.validate)!==!1&&oe.y(this,re.call(oe.z,oe.e({value:he,style:{glyphs:!0,sprite:!0},styleSpec:oe.v})))}calculateFogBlendOpacity(re){return re<60?0:re<70?(re-60)/10:1}}class lt{constructor(re,he){this.width=re,this.height=he,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(re,he){const fe=re.join(",")+String(he);return this.dashEntry[fe]||(this.dashEntry[fe]=this.addDash(re,he)),this.dashEntry[fe]}getDashRanges(re,he,fe){const _e=[];let we=re.length%2==1?-re[re.length-1]*fe:0,Me=re[0]*fe,Fe=!0;_e.push({left:we,right:Me,isDash:Fe,zeroLength:re[0]===0});let Be=re[0];for(let $e=1;$e<re.length;$e++){Fe=!Fe;const We=re[$e];we=Be*fe,Be+=We,Me=Be*fe,_e.push({left:we,right:Me,isDash:Fe,zeroLength:We===0})}return _e}addRoundDash(re,he,fe){const _e=he/2;for(let we=-fe;we<=fe;we++){const Me=this.width*(this.nextRow+fe+we);let Fe=0,Be=re[Fe];for(let $e=0;$e<this.width;$e++){$e/Be.right>1&&(Be=re[++Fe]);const We=Math.abs($e-Be.left),Je=Math.abs($e-Be.right),Xe=Math.min(We,Je);let st;const ht=we/fe*(_e+1);if(Be.isDash){const vt=_e-Math.abs(ht);st=Math.sqrt(Xe*Xe+vt*vt)}else st=_e-Math.sqrt(Xe*Xe+ht*ht);this.data[Me+$e]=Math.max(0,Math.min(255,st+128))}}}addRegularDash(re){for(let Fe=re.length-1;Fe>=0;--Fe){const Be=re[Fe],$e=re[Fe+1];Be.zeroLength?re.splice(Fe,1):$e&&$e.isDash===Be.isDash&&($e.left=Be.left,re.splice(Fe,1))}const he=re[0],fe=re[re.length-1];he.isDash===fe.isDash&&(he.left=fe.left-this.width,fe.right=he.right+this.width);const _e=this.width*this.nextRow;let we=0,Me=re[we];for(let Fe=0;Fe<this.width;Fe++){Fe/Me.right>1&&(Me=re[++we]);const Be=Math.abs(Fe-Me.left),$e=Math.abs(Fe-Me.right),We=Math.min(Be,$e);this.data[_e+Fe]=Math.max(0,Math.min(255,(Me.isDash?We:-We)+128))}}addDash(re,he){const fe=he?7:0,_e=2*fe+1;if(this.nextRow+_e>this.height)return oe.w("LineAtlas out of space"),null;let we=0;for(let Fe=0;Fe<re.length;Fe++)we+=re[Fe];if(we!==0){const Fe=this.width/we,Be=this.getDashRanges(re,this.width,Fe);he?this.addRoundDash(Be,Fe,fe):this.addRegularDash(Be)}const Me={y:this.nextRow+fe,height:2*fe,width:we};return this.nextRow+=_e,this.dirty=!0,Me}bind(re){const he=re.gl;this.texture?(he.bindTexture(he.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,he.texSubImage2D(he.TEXTURE_2D,0,0,0,this.width,this.height,he.ALPHA,he.UNSIGNED_BYTE,this.data))):(this.texture=he.createTexture(),he.bindTexture(he.TEXTURE_2D,this.texture),he.texParameteri(he.TEXTURE_2D,he.TEXTURE_WRAP_S,he.REPEAT),he.texParameteri(he.TEXTURE_2D,he.TEXTURE_WRAP_T,he.REPEAT),he.texParameteri(he.TEXTURE_2D,he.TEXTURE_MIN_FILTER,he.LINEAR),he.texParameteri(he.TEXTURE_2D,he.TEXTURE_MAG_FILTER,he.LINEAR),he.texImage2D(he.TEXTURE_2D,0,he.ALPHA,this.width,this.height,0,he.ALPHA,he.UNSIGNED_BYTE,this.data))}}const Bt="maplibre_preloaded_worker_pool";class Xt{constructor(){this.active={}}acquire(re){if(!this.workers)for(this.workers=[];this.workers.length<Xt.workerCount;)this.workers.push(new Worker(oe.a.WORKER_URL));return this.active[re]=!0,this.workers.slice()}release(re){delete this.active[re],this.numActive()===0&&(this.workers.forEach(he=>{he.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Bt]}numActive(){return Object.keys(this.active).length}}const Gt=Math.floor(ye.hardwareConcurrency/2);let lr,yr;function Lr(){return lr||(lr=new Xt),lr}Xt.workerCount=oe.H(globalThis)?Math.max(Math.min(Gt,3),1):1;class Nr{constructor(re,he){this.workerPool=re,this.actors=[],this.currentActor=0,this.id=he;const fe=this.workerPool.acquire(he);for(let _e=0;_e<fe.length;_e++){const we=new oe.J(fe[_e],he);we.name=`Worker ${_e}`,this.actors.push(we)}if(!this.actors.length)throw new Error("No actors found")}broadcast(re,he){const fe=[];for(const _e of this.actors)fe.push(_e.sendAsync({type:re,data:he}));return Promise.all(fe)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(re=!0){this.actors.forEach(he=>{he.remove()}),this.actors=[],re&&this.workerPool.release(this.id)}registerMessageHandler(re,he){for(const fe of this.actors)fe.registerMessageHandler(re,he)}}function $r(){return yr||(yr=new Nr(Lr(),oe.K),yr.registerMessageHandler("GR",(be,re,he)=>oe.m(re,he))),yr}function Gr(be,re){const he=oe.L();return oe.M(he,he,[1,1,0]),oe.N(he,he,[.5*be.width,.5*be.height,1]),be.calculatePosMatrix?oe.O(he,he,be.calculatePosMatrix(re.toUnwrapped())):he}function Zr(be,re,he,fe,_e,we,Me){var Fe;const Be=function(Xe,st,ht){if(Xe)for(const vt of Xe){const bt=st[vt];if(bt&&bt.source===ht&&bt.type==="fill-extrusion")return!0}else for(const vt in st){const bt=st[vt];if(bt.source===ht&&bt.type==="fill-extrusion")return!0}return!1}((Fe=_e==null?void 0:_e.layers)!==null&&Fe!==void 0?Fe:null,re,be.id),$e=we.maxPitchScaleFactor(),We=be.tilesIn(fe,$e,Be);We.sort(Dr);const Je=[];for(const Xe of We)Je.push({wrappedTileID:Xe.tileID.wrapped().key,queryResults:Xe.tile.queryRenderedFeatures(re,he,be._state,Xe.queryGeometry,Xe.cameraQueryGeometry,Xe.scale,_e,we,$e,Gr(be.transform,Xe.tileID),Me?(st,ht)=>Me(Xe.tileID,st,ht):void 0)});return function(Xe,st){for(const ht in Xe)for(const vt of Xe[ht])dr(vt,st);return Xe}(function(Xe){const st={},ht={};for(const vt of Xe){const bt=vt.queryResults,xt=vt.wrappedTileID,Ct=ht[xt]=ht[xt]||{};for(const kt in bt){const Tt=bt[kt],Lt=Ct[kt]=Ct[kt]||{},Rt=st[kt]=st[kt]||[];for(const Pt of Tt)Lt[Pt.featureIndex]||(Lt[Pt.featureIndex]=!0,Rt.push(Pt))}}return st}(Je),be)}function Dr(be,re){const he=be.tileID,fe=re.tileID;return he.overscaledZ-fe.overscaledZ||he.canonical.y-fe.canonical.y||he.wrap-fe.wrap||he.canonical.x-fe.canonical.x}function dr(be,re){const he=be.feature,fe=re.getFeatureState(he.layer["source-layer"],he.id);he.source=he.layer.source,he.layer["source-layer"]&&(he.sourceLayer=he.layer["source-layer"]),he.state=fe}function fr(be,re,he){return oe._(this,void 0,void 0,function*(){let fe=be;if(be.url?fe=(yield oe.j(re.transformRequest(be.url,"Source"),he)).data:yield ye.frameAsync(he),!fe)return null;const _e=oe.Q(oe.e(fe,be),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in fe&&fe.vector_layers&&(_e.vectorLayerIds=fe.vector_layers.map(we=>we.id)),_e})}class qr{constructor(re,he){re&&(he?this.setSouthWest(re).setNorthEast(he):Array.isArray(re)&&(re.length===4?this.setSouthWest([re[0],re[1]]).setNorthEast([re[2],re[3]]):this.setSouthWest(re[0]).setNorthEast(re[1])))}setNorthEast(re){return this._ne=re instanceof oe.S?new oe.S(re.lng,re.lat):oe.S.convert(re),this}setSouthWest(re){return this._sw=re instanceof oe.S?new oe.S(re.lng,re.lat):oe.S.convert(re),this}extend(re){const he=this._sw,fe=this._ne;let _e,we;if(re instanceof oe.S)_e=re,we=re;else{if(!(re instanceof qr))return Array.isArray(re)?re.length===4||re.every(Array.isArray)?this.extend(qr.convert(re)):this.extend(oe.S.convert(re)):re&&("lng"in re||"lon"in re)&&"lat"in re?this.extend(oe.S.convert(re)):this;if(_e=re._sw,we=re._ne,!_e||!we)return this}return he||fe?(he.lng=Math.min(_e.lng,he.lng),he.lat=Math.min(_e.lat,he.lat),fe.lng=Math.max(we.lng,fe.lng),fe.lat=Math.max(we.lat,fe.lat)):(this._sw=new oe.S(_e.lng,_e.lat),this._ne=new oe.S(we.lng,we.lat)),this}getCenter(){return new oe.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new oe.S(this.getWest(),this.getNorth())}getSouthEast(){return new oe.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(re){const{lng:he,lat:fe}=oe.S.convert(re);let _e=this._sw.lng<=he&&he<=this._ne.lng;return this._sw.lng>this._ne.lng&&(_e=this._sw.lng>=he&&he>=this._ne.lng),this._sw.lat<=fe&&fe<=this._ne.lat&&_e}static convert(re){return re instanceof qr?re:re&&new qr(re)}static fromLngLat(re,he=0){const fe=360*he/40075017,_e=fe/Math.cos(Math.PI/180*re.lat);return new qr(new oe.S(re.lng-_e,re.lat-fe),new oe.S(re.lng+_e,re.lat+fe))}adjustAntiMeridian(){const re=new oe.S(this._sw.lng,this._sw.lat),he=new oe.S(this._ne.lng,this._ne.lat);return new qr(re,re.lng>he.lng?new oe.S(he.lng+360,he.lat):he)}}class li{constructor(re,he,fe){this.bounds=qr.convert(this.validateBounds(re)),this.minzoom=he||0,this.maxzoom=fe||24}validateBounds(re){return Array.isArray(re)&&re.length===4?[Math.max(-180,re[0]),Math.max(-90,re[1]),Math.min(180,re[2]),Math.min(90,re[3])]:[-180,-90,180,90]}contains(re){const he=Math.pow(2,re.z),fe=Math.floor(oe.V(this.bounds.getWest())*he),_e=Math.floor(oe.U(this.bounds.getNorth())*he),we=Math.ceil(oe.V(this.bounds.getEast())*he),Me=Math.ceil(oe.U(this.bounds.getSouth())*he);return re.x>=fe&&re.x<we&&re.y>=_e&&re.y<Me}}class Jt extends oe.E{constructor(re,he,fe,_e){if(super(),this.id=re,this.dispatcher=fe,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,oe.e(this,oe.Q(he,["url","scheme","tileSize","promoteId"])),this._options=oe.e({type:"vector"},he),this._collectResourceTiming=he.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(_e)}load(){return oe._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new oe.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const re=yield fr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),re&&(oe.e(this,re),re.bounds&&(this.tileBounds=new li(re.bounds,this.minzoom,this.maxzoom)),this.fire(new oe.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new oe.l("data",{dataType:"source",sourceDataType:"content"})))}catch(re){this._tileJSONRequest=null,this._loaded=!0,this.fire(new oe.k(re))}})}loaded(){return this._loaded}hasTile(re){return!this.tileBounds||this.tileBounds.contains(re.canonical)}onAdd(re){this.map=re,this.load()}setSourceProperty(re){this._tileJSONRequest&&this._tileJSONRequest.abort(),re(),this.load()}setTiles(re){return this.setSourceProperty(()=>{this._options.tiles=re}),this}setUrl(re){return this.setSourceProperty(()=>{this.url=re,this._options.url=re}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return oe.e({},this._options)}loadTile(re){return oe._(this,void 0,void 0,function*(){const he=re.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),fe={request:this.map._requestManager.transformRequest(he,"Tile"),uid:re.uid,tileID:re.tileID,zoom:re.tileID.overscaledZ,tileSize:this.tileSize*re.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};fe.request.collectResourceTiming=this._collectResourceTiming;let _e="RT";if(re.actor&&re.state!=="expired"){if(re.state==="loading")return new Promise((we,Me)=>{re.reloadPromise={resolve:we,reject:Me}})}else re.actor=this.dispatcher.getActor(),_e="LT";re.abortController=new AbortController;try{const we=yield re.actor.sendAsync({type:_e,data:fe},re.abortController);if(delete re.abortController,re.aborted)return;this._afterTileLoadWorkerResponse(re,we)}catch(we){if(delete re.abortController,re.aborted)return;if(we&&we.status!==404)throw we;this._afterTileLoadWorkerResponse(re,null)}})}_afterTileLoadWorkerResponse(re,he){if(he&&he.resourceTiming&&(re.resourceTiming=he.resourceTiming),he&&this.map._refreshExpiredTiles&&re.setExpiryData(he),re.loadVectorData(he,this.map.painter),re.reloadPromise){const fe=re.reloadPromise;re.reloadPromise=null,this.loadTile(re).then(fe.resolve).catch(fe.reject)}}abortTile(re){return oe._(this,void 0,void 0,function*(){re.abortController&&(re.abortController.abort(),delete re.abortController),re.actor&&(yield re.actor.sendAsync({type:"AT",data:{uid:re.uid,type:this.type,source:this.id}}))})}unloadTile(re){return oe._(this,void 0,void 0,function*(){re.unloadVectorData(),re.actor&&(yield re.actor.sendAsync({type:"RMT",data:{uid:re.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class gi extends oe.E{constructor(re,he,fe,_e){super(),this.id=re,this.dispatcher=fe,this.setEventedParent(_e),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=oe.e({type:"raster"},he),oe.e(this,oe.Q(he,["url","scheme","tileSize"]))}load(){return oe._(this,arguments,void 0,function*(re=!1){this._loaded=!1,this.fire(new oe.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const he=yield fr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,he&&(oe.e(this,he),he.bounds&&(this.tileBounds=new li(he.bounds,this.minzoom,this.maxzoom)),this.fire(new oe.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new oe.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:re})))}catch(he){this._tileJSONRequest=null,this._loaded=!0,this.fire(new oe.k(he))}})}loaded(){return this._loaded}onAdd(re){this.map=re,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(re){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),re(),this.load(!0)}setTiles(re){return this.setSourceProperty(()=>{this._options.tiles=re}),this}setUrl(re){return this.setSourceProperty(()=>{this.url=re,this._options.url=re}),this}serialize(){return oe.e({},this._options)}hasTile(re){return!this.tileBounds||this.tileBounds.contains(re.canonical)}loadTile(re){return oe._(this,void 0,void 0,function*(){const he=re.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);re.abortController=new AbortController;try{const fe=yield Ze.getImage(this.map._requestManager.transformRequest(he,"Tile"),re.abortController,this.map._refreshExpiredTiles);if(delete re.abortController,re.aborted)return void(re.state="unloaded");if(fe&&fe.data){this.map._refreshExpiredTiles&&(fe.cacheControl||fe.expires)&&re.setExpiryData({cacheControl:fe.cacheControl,expires:fe.expires});const _e=this.map.painter.context,we=_e.gl,Me=fe.data;re.texture=this.map.painter.getTileTexture(Me.width),re.texture?re.texture.update(Me,{useMipmap:!0}):(re.texture=new oe.T(_e,Me,we.RGBA,{useMipmap:!0}),re.texture.bind(we.LINEAR,we.CLAMP_TO_EDGE,we.LINEAR_MIPMAP_NEAREST)),re.state="loaded"}}catch(fe){if(delete re.abortController,re.aborted)re.state="unloaded";else if(fe)throw re.state="errored",fe}})}abortTile(re){return oe._(this,void 0,void 0,function*(){re.abortController&&(re.abortController.abort(),delete re.abortController)})}unloadTile(re){return oe._(this,void 0,void 0,function*(){re.texture&&this.map.painter.saveTileTexture(re.texture)})}hasTransition(){return!1}}class ci extends gi{constructor(re,he,fe,_e){super(re,he,fe,_e),this.type="raster-dem",this.maxzoom=22,this._options=oe.e({type:"raster-dem"},he),this.encoding=he.encoding||"mapbox",this.redFactor=he.redFactor,this.greenFactor=he.greenFactor,this.blueFactor=he.blueFactor,this.baseShift=he.baseShift}loadTile(re){return oe._(this,void 0,void 0,function*(){const he=re.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),fe=this.map._requestManager.transformRequest(he,"Tile");re.neighboringTiles=this._getNeighboringTiles(re.tileID),re.abortController=new AbortController;try{const _e=yield Ze.getImage(fe,re.abortController,this.map._refreshExpiredTiles);if(delete re.abortController,re.aborted)return void(re.state="unloaded");if(_e&&_e.data){const we=_e.data;this.map._refreshExpiredTiles&&(_e.cacheControl||_e.expires)&&re.setExpiryData({cacheControl:_e.cacheControl,expires:_e.expires});const Me=oe.b(we)&&oe.W()?we:yield this.readImageNow(we),Fe={type:this.type,uid:re.uid,source:this.id,rawImageData:Me,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!re.actor||re.state==="expired"){re.actor=this.dispatcher.getActor();const Be=yield re.actor.sendAsync({type:"LDT",data:Fe});re.dem=Be,re.needsHillshadePrepare=!0,re.needsTerrainPrepare=!0,re.state="loaded"}}}catch(_e){if(delete re.abortController,re.aborted)re.state="unloaded";else if(_e)throw re.state="errored",_e}})}readImageNow(re){return oe._(this,void 0,void 0,function*(){if(typeof VideoFrame!="undefined"&&oe.X()){const he=re.width+2,fe=re.height+2;try{return new oe.R({width:he,height:fe},yield oe.Y(re,-1,-1,he,fe))}catch{}}return ye.getImageData(re,1)})}_getNeighboringTiles(re){const he=re.canonical,fe=Math.pow(2,he.z),_e=(he.x-1+fe)%fe,we=he.x===0?re.wrap-1:re.wrap,Me=(he.x+1+fe)%fe,Fe=he.x+1===fe?re.wrap+1:re.wrap,Be={};return Be[new oe.Z(re.overscaledZ,we,he.z,_e,he.y).key]={backfilled:!1},Be[new oe.Z(re.overscaledZ,Fe,he.z,Me,he.y).key]={backfilled:!1},he.y>0&&(Be[new oe.Z(re.overscaledZ,we,he.z,_e,he.y-1).key]={backfilled:!1},Be[new oe.Z(re.overscaledZ,re.wrap,he.z,he.x,he.y-1).key]={backfilled:!1},Be[new oe.Z(re.overscaledZ,Fe,he.z,Me,he.y-1).key]={backfilled:!1}),he.y+1<fe&&(Be[new oe.Z(re.overscaledZ,we,he.z,_e,he.y+1).key]={backfilled:!1},Be[new oe.Z(re.overscaledZ,re.wrap,he.z,he.x,he.y+1).key]={backfilled:!1},Be[new oe.Z(re.overscaledZ,Fe,he.z,Me,he.y+1).key]={backfilled:!1}),Be}unloadTile(re){return oe._(this,void 0,void 0,function*(){re.demTexture&&this.map.painter.saveTileTexture(re.demTexture),re.fbo&&(re.fbo.destroy(),delete re.fbo),re.dem&&delete re.dem,delete re.neighboringTiles,re.state="unloaded",re.actor&&(yield re.actor.sendAsync({type:"RDT",data:{type:this.type,uid:re.uid,source:this.id}}))})}}class hi extends oe.E{constructor(re,he,fe,_e){super(),this.id=re,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:he.data},this.actor=fe.getActor(),this.setEventedParent(_e),this._data=he.data,this._options=oe.e({},he),this._collectResourceTiming=he.collectResourceTiming,he.maxzoom!==void 0&&(this.maxzoom=he.maxzoom),he.type&&(this.type=he.type),he.attribution&&(this.attribution=he.attribution),this.promoteId=he.promoteId,he.clusterMaxZoom!==void 0&&this.maxzoom<=he.clusterMaxZoom&&oe.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${he.clusterMaxZoom}".`),this.workerOptions=oe.e({source:this.id,cluster:he.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(he.buffer!==void 0?he.buffer:128),tolerance:this._pixelsToTileUnits(he.tolerance!==void 0?he.tolerance:.375),extent:oe.$,maxZoom:this.maxzoom,lineMetrics:he.lineMetrics||!1,generateId:he.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(he.clusterMaxZoom),minPoints:Math.max(2,he.clusterMinPoints||2),extent:oe.$,radius:this._pixelsToTileUnits(he.clusterRadius||50),log:!1,generateId:he.generateId||!1},clusterProperties:he.clusterProperties,filter:he.filter},he.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_hasPendingWorkerUpdate(){return this._pendingWorkerUpdate.data!==void 0||this._pendingWorkerUpdate.diff!==void 0||this._pendingWorkerUpdate.optionsChanged}_pixelsToTileUnits(re){return re*(oe.$/this.tileSize)}_getClusterMaxZoom(re){const he=re?Math.round(re):this.maxzoom-1;return Number.isInteger(re)||re===void 0||oe.w(`Integer expected for option 'clusterMaxZoom': provided value "${re}" rounded to "${he}"`),he}load(){return oe._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(re){this.map=re,this.load()}setData(re){return this._data=re,this._pendingWorkerUpdate={data:re},this._updateWorkerData(),this}updateData(re){return this._pendingWorkerUpdate.diff=oe.a0(this._pendingWorkerUpdate.diff,re),this._updateWorkerData(),this}getData(){return oe._(this,void 0,void 0,function*(){const re=oe.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:re})})}getCoordinatesFromGeometry(re){return re.type==="GeometryCollection"?re.geometries.map(he=>he.coordinates).flat(1/0):re.coordinates.flat(1/0)}getBounds(){return oe._(this,void 0,void 0,function*(){const re=new qr,he=yield this.getData();let fe;switch(he.type){case"FeatureCollection":fe=he.features.map(_e=>this.getCoordinatesFromGeometry(_e.geometry)).flat(1/0);break;case"Feature":fe=this.getCoordinatesFromGeometry(he.geometry);break;default:fe=this.getCoordinatesFromGeometry(he)}if(fe.length==0)return re;for(let _e=0;_e<fe.length-1;_e+=2)re.extend([fe[_e],fe[_e+1]]);return re})}setClusterOptions(re){return this.workerOptions.cluster=re.cluster,re.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(re.clusterRadius)),re.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(re.clusterMaxZoom)),this._pendingWorkerUpdate.optionsChanged=!0,this._updateWorkerData(),this}getClusterExpansionZoom(re){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:re,source:this.id}})}getClusterChildren(re){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:re,source:this.id}})}getClusterLeaves(re,he,fe){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:re,limit:he,offset:fe}})}_updateWorkerData(){return oe._(this,void 0,void 0,function*(){if(this._isUpdatingWorker)return;if(!this._hasPendingWorkerUpdate())return void oe.w(`No pending worker updates for GeoJSONSource ${this.id}.`);const{data:re,diff:he}=this._pendingWorkerUpdate,fe=oe.e({type:this.type},this.workerOptions);re?(typeof re=="string"?(fe.request=this.map._requestManager.transformRequest(ye.resolveURL(re),"Source"),fe.request.collectResourceTiming=this._collectResourceTiming):fe.data=JSON.stringify(re),this._pendingWorkerUpdate.data=void 0):he&&(fe.dataDiff=he,this._pendingWorkerUpdate.diff=void 0),this._pendingWorkerUpdate.optionsChanged=void 0,this._isUpdatingWorker=!0,this.fire(new oe.l("dataloading",{dataType:"source"}));try{const _e=yield this.actor.sendAsync({type:"LD",data:fe});if(this._isUpdatingWorker=!1,this._removed||_e.abandoned)return void this.fire(new oe.l("dataabort",{dataType:"source"}));this._data=_e.data;let we=null;_e.resourceTiming&&_e.resourceTiming[this.id]&&(we=_e.resourceTiming[this.id].slice(0));const Me={dataType:"source"};this._collectResourceTiming&&we&&we.length>0&&oe.e(Me,{resourceTiming:we}),this.fire(new oe.l("data",Object.assign(Object.assign({},Me),{sourceDataType:"metadata"}))),this.fire(new oe.l("data",Object.assign(Object.assign({},Me),{sourceDataType:"content"})))}catch(_e){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new oe.l("dataabort",{dataType:"source"}));this.fire(new oe.k(_e))}finally{this._hasPendingWorkerUpdate()&&this._updateWorkerData()}})}loaded(){return!this._isUpdatingWorker&&!this._hasPendingWorkerUpdate()}loadTile(re){return oe._(this,void 0,void 0,function*(){const he=re.actor?"RT":"LT";re.actor=this.actor;const fe={type:this.type,uid:re.uid,tileID:re.tileID,zoom:re.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};re.abortController=new AbortController;const _e=yield this.actor.sendAsync({type:he,data:fe},re.abortController);delete re.abortController,re.unloadVectorData(),re.aborted||re.loadVectorData(_e,this.map.painter,he==="RT")})}abortTile(re){return oe._(this,void 0,void 0,function*(){re.abortController&&(re.abortController.abort(),delete re.abortController),re.aborted=!0})}unloadTile(re){return oe._(this,void 0,void 0,function*(){re.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:re.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return oe.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class ri extends oe.E{constructor(re,he,fe,_e){super(),this.flippedWindingOrder=!1,this.id=re,this.dispatcher=fe,this.coordinates=he.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(_e),this.options=he}load(re){return oe._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new oe.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const he=yield Ze.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,he&&he.data&&(this.image=he.data,re&&(this.coordinates=re),this._finishLoading())}catch(he){this._request=null,this._loaded=!0,this.fire(new oe.k(he))}})}loaded(){return this._loaded}updateImage(re){return re.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=re.url,this.load(re.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new oe.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(re){this.map=re,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(re){this.coordinates=re;const he=re.map(oe.a1.fromLngLat);var fe;return this.tileID=function(_e){const we=oe.a2.fromPoints(_e),Me=we.width(),Fe=we.height(),Be=Math.max(Me,Fe),$e=Math.max(0,Math.floor(-Math.log(Be)/Math.LN2)),We=Math.pow(2,$e);return new oe.a4($e,Math.floor((we.minX+we.maxX)/2*We),Math.floor((we.minY+we.maxY)/2*We))}(he),this.terrainTileRanges=this._getOverlappingTileRanges(he),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=he.map(_e=>this.tileID.getTilePoint(_e)._round()),this.flippedWindingOrder=((fe=this.tileCoords)[1].x-fe[0].x)*(fe[2].y-fe[0].y)-(fe[1].y-fe[0].y)*(fe[2].x-fe[0].x)<0,this.fire(new oe.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const re=this.map.painter.context,he=re.gl;this.texture||(this.texture=new oe.T(re,this.image,he.RGBA),this.texture.bind(he.LINEAR,he.CLAMP_TO_EDGE));let fe=!1;for(const _e in this.tiles){const we=this.tiles[_e];we.state!=="loaded"&&(we.state="loaded",we.texture=this.texture,fe=!0)}fe&&this.fire(new oe.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(re){return oe._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(re.tileID.canonical)?(this.tiles[String(re.tileID.wrap)]=re,re.buckets={}):re.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(re){const{minX:he,minY:fe,maxX:_e,maxY:we}=oe.a2.fromPoints(re),Me={};for(let Fe=0;Fe<=oe.a3;Fe++){const Be=Math.pow(2,Fe),$e=Math.floor(he*Be),We=Math.floor(fe*Be),Je=Math.floor(_e*Be),Xe=Math.floor(we*Be);Me[Fe]={minTileX:$e,minTileY:We,maxTileX:Je,maxTileY:Xe}}return Me}}class Ci extends ri{constructor(re,he,fe,_e){super(re,he,fe,_e),this.roundZoom=!0,this.type="video",this.options=he}load(){return oe._(this,void 0,void 0,function*(){this._loaded=!1;const re=this.options;this.urls=[];for(const he of re.urls)this.urls.push(this.map._requestManager.transformRequest(he,"Source").url);try{const he=yield oe.a5(this.urls);if(this._loaded=!0,!he)return;this.video=he,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(he){this.fire(new oe.k(he))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(re){if(this.video){const he=this.video.seekable;re<he.start(0)||re>he.end(0)?this.fire(new oe.k(new oe.a6(`sources.${this.id}`,null,`Playback for this video can be set only between the ${he.start(0)} and ${he.end(0)}-second mark.`))):this.video.currentTime=re}}getVideo(){return this.video}onAdd(re){this.map||(this.map=re,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const re=this.map.painter.context,he=re.gl;this.texture?this.video.paused||(this.texture.bind(he.LINEAR,he.CLAMP_TO_EDGE),he.texSubImage2D(he.TEXTURE_2D,0,0,0,he.RGBA,he.UNSIGNED_BYTE,this.video)):(this.texture=new oe.T(re,this.video,he.RGBA),this.texture.bind(he.LINEAR,he.CLAMP_TO_EDGE));let fe=!1;for(const _e in this.tiles){const we=this.tiles[_e];we.state!=="loaded"&&(we.state="loaded",we.texture=this.texture,fe=!0)}fe&&this.fire(new oe.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Ei extends ri{constructor(re,he,fe,_e){super(re,he,fe,_e),he.coordinates?Array.isArray(he.coordinates)&&he.coordinates.length===4&&!he.coordinates.some(we=>!Array.isArray(we)||we.length!==2||we.some(Me=>typeof Me!="number"))||this.fire(new oe.k(new oe.a6(`sources.${re}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new oe.k(new oe.a6(`sources.${re}`,null,'missing required property "coordinates"'))),he.animate&&typeof he.animate!="boolean"&&this.fire(new oe.k(new oe.a6(`sources.${re}`,null,'optional "animate" property must be a boolean value'))),he.canvas?typeof he.canvas=="string"||he.canvas instanceof HTMLCanvasElement||this.fire(new oe.k(new oe.a6(`sources.${re}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new oe.k(new oe.a6(`sources.${re}`,null,'missing required property "canvas"'))),this.options=he,this.animate=he.animate===void 0||he.animate}load(){return oe._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new oe.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(re){this.map=re,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let re=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,re=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,re=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const he=this.map.painter.context,fe=he.gl;this.texture?(re||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new oe.T(he,this.canvas,fe.RGBA,{premultiply:!0});let _e=!1;for(const we in this.tiles){const Me=this.tiles[we];Me.state!=="loaded"&&(Me.state="loaded",Me.texture=this.texture,_e=!0)}_e&&this.fire(new oe.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const re of[this.canvas.width,this.canvas.height])if(isNaN(re)||re<=0)return!0;return!1}}const Mi={},wi=be=>{switch(be){case"geojson":return hi;case"image":return ri;case"raster":return gi;case"raster-dem":return ci;case"vector":return Jt;case"video":return Ci;case"canvas":return Ei}return Mi[be]},Ft="RTLPluginLoaded";class er extends oe.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=$r()}_syncState(re){return this.status=re,this.dispatcher.broadcast("SRPS",{pluginStatus:re,pluginURL:this.url}).catch(he=>{throw this.status="error",he})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(re){return oe._(this,arguments,void 0,function*(he,fe=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=ye.resolveURL(he),!this.url)throw new Error(`requested url ${he} is invalid`);if(this.status==="unavailable"){if(!fe)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return oe._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new oe.l(Ft))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let sr=null;function ir(){return sr||(sr=new er),sr}var mt,tt;(function(be){be[be.Base=0]="Base",be[be.Parent=1]="Parent"})(mt||(mt={})),function(be){be[be.Departing=0]="Departing",be[be.Incoming=1]="Incoming"}(tt||(tt={}));class rt{constructor(re,he){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=re,this.uid=oe.a7(),this.uses=0,this.tileSize=he,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}isRenderable(re){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(re||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:re,fadingDirection:he,fadingParentID:fe,fadeEndTime:_e}){this.resetFadeLogic(),this.fadingRole=re,this.fadingDirection=he,this.fadingParentID=fe,this.fadeEndTime=_e}setSelfFadeLogic(re){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=re}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=Ae(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(re){this.demTexture&&re.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(re,he,fe){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",re){re.featureIndex&&(this.latestFeatureIndex=re.featureIndex,re.rawTileData?(this.latestRawTileData=re.rawTileData,this.latestFeatureIndex.rawTileData=re.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=re.collisionBoxArray,this.buckets=function(_e,we){const Me={};if(!we)return Me;for(const Fe of _e){const Be=Fe.layerIds.map($e=>we.getLayer($e)).filter(Boolean);if(Be.length!==0){Fe.layers=Be,Fe.stateDependentLayerIds&&(Fe.stateDependentLayers=Fe.stateDependentLayerIds.map($e=>Be.filter(We=>We.id===$e)[0]));for(const $e of Be)Me[$e.id]=Fe}}return Me}(re.buckets,he==null?void 0:he.style),this.hasSymbolBuckets=!1;for(const _e in this.buckets){const we=this.buckets[_e];if(we instanceof oe.a9){if(this.hasSymbolBuckets=!0,!fe)break;we.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const _e in this.buckets){const we=this.buckets[_e];if(we instanceof oe.a9&&we.hasRTLText){this.hasRTLText=!0,ir().lazyLoad();break}}this.queryPadding=0;for(const _e in this.buckets){const we=this.buckets[_e];this.queryPadding=Math.max(this.queryPadding,he.style.getLayer(_e).queryRadius(we))}re.imageAtlas&&(this.imageAtlas=re.imageAtlas),re.glyphAtlasImage&&(this.glyphAtlasImage=re.glyphAtlasImage),this.dashPositions=re.dashPositions}else this.collisionBoxArray=new oe.a8}unloadVectorData(){for(const re in this.buckets)this.buckets[re].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(re){return this.buckets[re.id]}upload(re){for(const fe in this.buckets){const _e=this.buckets[fe];_e.uploadPending()&&_e.upload(re)}const he=re.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new oe.T(re,this.imageAtlas.image,he.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new oe.T(re,this.glyphAtlasImage,he.ALPHA),this.glyphAtlasImage=null)}prepare(re){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(re,this.imageAtlasTexture)}queryRenderedFeatures(re,he,fe,_e,we,Me,Fe,Be,$e,We,Je){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:_e,cameraQueryGeometry:we,scale:Me,tileSize:this.tileSize,pixelPosMatrix:We,transform:Be,params:Fe,queryPadding:this.queryPadding*$e,getElevation:Je},re,he,fe):{}}querySourceFeatures(re,he){const fe=this.latestFeatureIndex;if(!fe||!fe.rawTileData)return;const _e=fe.loadVTLayers(),we=he&&he.sourceLayer?he.sourceLayer:"",Me=_e._geojsonTileLayer||_e[we];if(!Me)return;const Fe=oe.aa(he==null?void 0:he.filter,he==null?void 0:he.globalState),{z:Be,x:$e,y:We}=this.tileID.canonical,Je={z:Be,x:$e,y:We};for(let Xe=0;Xe<Me.length;Xe++){const st=Me.feature(Xe);if(Fe.needGeometry){const bt=oe.ab(st,!0);if(!Fe.filter(new oe.F(this.tileID.overscaledZ),bt,this.tileID.canonical))continue}else if(!Fe.filter(new oe.F(this.tileID.overscaledZ),st))continue;const ht=fe.getId(st,we),vt=new oe.ac(st,Be,$e,We,ht);vt.tile=Je,re.push(vt)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(re){const he=this.expirationTime;if(re.cacheControl){const fe=oe.ad(re.cacheControl);fe["max-age"]&&(this.expirationTime=Date.now()+1e3*fe["max-age"])}else re.expires&&(this.expirationTime=new Date(re.expires).getTime());if(this.expirationTime){const fe=Date.now();let _e=!1;if(this.expirationTime>fe)_e=!1;else if(he)if(this.expirationTime<he)_e=!0;else{const we=this.expirationTime-he;we?this.expirationTime=fe+Math.max(we,3e4):_e=!0}else _e=!0;_e?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(re,he){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(re).length===0)return;const fe=this.latestFeatureIndex.loadVTLayers();for(const _e in this.buckets){if(!he.style.hasLayer(_e))continue;const we=this.buckets[_e],Me=we.layers[0].sourceLayer||"_geojsonTileLayer",Fe=fe[Me],Be=re[Me];if(!Fe||!Be||Object.keys(Be).length===0)continue;we.update(Be,Fe,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const $e=he&&he.style&&he.style.getLayer(_e);$e&&(this.queryPadding=Math.max(this.queryPadding,$e.queryRadius(we)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Ae()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(re){this.symbolFadeHoldUntil=Ae()+re}setDependencies(re,he){const fe={};for(const _e of he)fe[_e]=!0;this.dependencies[re]=fe}hasDependency(re,he){for(const fe of re){const _e=this.dependencies[fe];if(_e){for(const we of he)if(_e[we])return!0}}return!1}}class dt{constructor(re,he){this.max=re,this.onRemove=he,this.reset()}reset(){for(const re in this.data)for(const he of this.data[re])he.timeout&&clearTimeout(he.timeout),this.onRemove(he.value);return this.data={},this.order=[],this}add(re,he,fe){const _e=re.wrapped().key;this.data[_e]===void 0&&(this.data[_e]=[]);const we={value:he,timeout:void 0};if(fe!==void 0&&(we.timeout=setTimeout(()=>{this.remove(re,we)},fe)),this.data[_e].push(we),this.order.push(_e),this.order.length>this.max){const Me=this._getAndRemoveByKey(this.order[0]);Me&&this.onRemove(Me)}return this}has(re){return re.wrapped().key in this.data}getAndRemove(re){return this.has(re)?this._getAndRemoveByKey(re.wrapped().key):null}_getAndRemoveByKey(re){const he=this.data[re].shift();return he.timeout&&clearTimeout(he.timeout),this.data[re].length===0&&delete this.data[re],this.order.splice(this.order.indexOf(re),1),he.value}getByKey(re){const he=this.data[re];return he?he[0].value:null}get(re){return this.has(re)?this.data[re.wrapped().key][0].value:null}remove(re,he){if(!this.has(re))return this;const fe=re.wrapped().key,_e=he===void 0?0:this.data[fe].indexOf(he),we=this.data[fe][_e];return this.data[fe].splice(_e,1),we.timeout&&clearTimeout(we.timeout),this.data[fe].length===0&&delete this.data[fe],this.onRemove(we.value),this.order.splice(this.order.indexOf(fe),1),this}setMaxSize(re){for(this.max=re;this.order.length>this.max;){const he=this._getAndRemoveByKey(this.order[0]);he&&this.onRemove(he)}return this}filter(re){const he=[];for(const fe in this.data)for(const _e of this.data[fe])re(_e.value)||he.push(_e);for(const fe of he)this.remove(fe.value.tileID,fe)}}class yt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(re,he,fe){const _e=String(he);if(this.stateChanges[re]=this.stateChanges[re]||{},this.stateChanges[re][_e]=this.stateChanges[re][_e]||{},oe.e(this.stateChanges[re][_e],fe),this.deletedStates[re]===null){this.deletedStates[re]={};for(const we in this.state[re])we!==_e&&(this.deletedStates[re][we]=null)}else if(this.deletedStates[re]&&this.deletedStates[re][_e]===null){this.deletedStates[re][_e]={};for(const we in this.state[re][_e])fe[we]||(this.deletedStates[re][_e][we]=null)}else for(const we in fe)this.deletedStates[re]&&this.deletedStates[re][_e]&&this.deletedStates[re][_e][we]===null&&delete this.deletedStates[re][_e][we]}removeFeatureState(re,he,fe){if(this.deletedStates[re]===null)return;const _e=String(he);if(this.deletedStates[re]=this.deletedStates[re]||{},fe&&he!==void 0)this.deletedStates[re][_e]!==null&&(this.deletedStates[re][_e]=this.deletedStates[re][_e]||{},this.deletedStates[re][_e][fe]=null);else if(he!==void 0)if(this.stateChanges[re]&&this.stateChanges[re][_e])for(fe in this.deletedStates[re][_e]={},this.stateChanges[re][_e])this.deletedStates[re][_e][fe]=null;else this.deletedStates[re][_e]=null;else this.deletedStates[re]=null}getState(re,he){const fe=String(he),_e=oe.e({},(this.state[re]||{})[fe],(this.stateChanges[re]||{})[fe]);if(this.deletedStates[re]===null)return{};if(this.deletedStates[re]){const we=this.deletedStates[re][he];if(we===null)return{};for(const Me in we)delete _e[Me]}return _e}initializeTileState(re,he){re.setFeatureState(this.state,he)}coalesceChanges(re,he){const fe={};for(const _e in this.stateChanges){this.state[_e]=this.state[_e]||{};const we={};for(const Me in this.stateChanges[_e])this.state[_e][Me]||(this.state[_e][Me]={}),oe.e(this.state[_e][Me],this.stateChanges[_e][Me]),we[Me]=this.state[_e][Me];fe[_e]=we}for(const _e in this.deletedStates){this.state[_e]=this.state[_e]||{};const we={};if(this.deletedStates[_e]===null)for(const Me in this.state[_e])we[Me]={},this.state[_e][Me]={};else for(const Me in this.deletedStates[_e]){if(this.deletedStates[_e][Me]===null)this.state[_e][Me]={};else for(const Fe of Object.keys(this.deletedStates[_e][Me]))delete this.state[_e][Me][Fe];we[Me]=this.state[_e][Me]}fe[_e]=fe[_e]||{},oe.e(fe[_e],we)}if(this.stateChanges={},this.deletedStates={},Object.keys(fe).length!==0)for(const _e in re)re[_e].setFeatureState(fe,he)}}const wt=89.25;function It(be,re){const he=oe.ae(re.lat,-oe.af,oe.af);return new oe.P(oe.V(re.lng)*be,oe.U(he)*be)}function qt(be,re){return new oe.a1(re.x/be,re.y/be).toLngLat()}function Dt(be){return be.cameraToCenterDistance*Math.min(.85*Math.tan(oe.ag(90-be.pitch)),Math.tan(oe.ag(wt-be.pitch)))}function Vt(be,re){const he=be.canonical,fe=re/oe.ah(he.z),_e=he.x+Math.pow(2,he.z)*be.wrap,we=oe.ai(new Float64Array(16));return oe.M(we,we,[_e*fe,he.y*fe,0]),oe.N(we,we,[fe/oe.$,fe/oe.$,1]),we}function tr(be,re,he,fe,_e){const we=oe.a1.fromLngLat(be,re),Me=_e*oe.aj(1,be.lat),Fe=Me*Math.cos(oe.ag(he)),Be=Math.sqrt(Me*Me-Fe*Fe),$e=Be*Math.sin(oe.ag(-fe)),We=Be*Math.cos(oe.ag(-fe));return new oe.a1(we.x+$e,we.y+We,we.z+Fe)}function Zt(be,re,he){const fe=re.intersectsFrustum(be);if(!he||fe===0)return fe;const _e=re.intersectsPlane(he);return _e===0?0:fe===2&&_e===2?2:1}function Ir(be,re,he){let fe=0;const _e=(he-re)/10;for(let we=0;we<10;we++)fe+=_e*Math.pow(Math.cos(re+(we+.5)/10*(he-re)),be);return fe}function Ot(be,re){return function(he,fe,_e,we,Me){const Fe=2*((be-1)/oe.ak(Math.cos(oe.ag(wt-Me))/Math.cos(oe.ag(wt)))-1),Be=Math.acos(_e/we),$e=2*Ir(Fe-1,0,oe.ag(Me/2)),We=Math.min(oe.ag(wt),Be+oe.ag(Me/2)),Je=Ir(Fe-1,Math.min(We,Be-oe.ag(Me/2)),We),Xe=Math.atan(fe/_e),st=Math.hypot(fe,_e);let ht=he;return ht+=oe.ak(we/st/Math.max(.5,Math.cos(oe.ag(Me/2)))),ht+=Fe*oe.ak(Math.cos(Xe))/2,ht-=oe.ak(Math.max(1,Je/$e/re))/2,ht}}const zr=Ot(9.314,3);function Xr(be,re){const he=(re.roundZoom?Math.round:Math.floor)(be.zoom+oe.ak(be.tileSize/re.tileSize));return Math.max(0,he)}function kr(be,re){const he=be.getCameraFrustum(),fe=be.getClippingPlane(),_e=be.screenPointToMercatorCoordinate(be.getCameraPoint()),we=oe.a1.fromLngLat(be.center,be.elevation);_e.z=we.z+Math.cos(be.pitchInRadians)*be.cameraToCenterDistance/be.worldSize;const Me=be.getCoveringTilesDetailsProvider(),Fe=Me.allowVariableZoom(be,re),Be=Xr(be,re),$e=re.minzoom||0,We=re.maxzoom!==void 0?re.maxzoom:be.maxZoom,Je=Math.min(Math.max(0,Be),We),Xe=Math.pow(2,Je),st=[Xe*_e.x,Xe*_e.y,0],ht=[Xe*we.x,Xe*we.y,0],vt=Math.hypot(we.x-_e.x,we.y-_e.y),bt=Math.abs(we.z-_e.z),xt=Math.hypot(vt,bt),Ct=Lt=>({zoom:0,x:0,y:0,wrap:Lt,fullyVisible:!1}),kt=[],Tt=[];if(be.renderWorldCopies&&Me.allowWorldCopies())for(let Lt=1;Lt<=3;Lt++)kt.push(Ct(-Lt)),kt.push(Ct(Lt));for(kt.push(Ct(0));kt.length>0;){const Lt=kt.pop(),Rt=Lt.x,Pt=Lt.y;let Nt=Lt.fullyVisible;const Yt={x:Rt,y:Pt,z:Lt.zoom},Wt=Me.getTileBoundingVolume(Yt,Lt.wrap,be.elevation,re);if(!Nt){const xr=Zt(he,Wt,fe);if(xr===0)continue;Nt=xr===2}const Ut=Me.distanceToTile2d(_e.x,_e.y,Yt,Wt);let Kt=Be;Fe&&(Kt=(re.calculateTileZoom||zr)(be.zoom+oe.ak(be.tileSize/re.tileSize),Ut,bt,xt,be.fov)),Kt=(re.roundZoom?Math.round:Math.floor)(Kt),Kt=Math.max(0,Kt);const br=Math.min(Kt,We);if(Lt.wrap=Me.getWrap(we,Yt,Lt.wrap),Lt.zoom>=br){if(Lt.zoom<$e)continue;const xr=Je-Lt.zoom,_r=st[0]-.5-(Rt<<xr),Br=st[1]-.5-(Pt<<xr),ti=re.reparseOverscaled?Math.max(Lt.zoom,Kt):Lt.zoom;Tt.push({tileID:new oe.Z(Lt.zoom===We?ti:Lt.zoom,Lt.wrap,Lt.zoom,Rt,Pt),distanceSq:oe.al([ht[0]-.5-Rt,ht[1]-.5-Pt]),tileDistanceToCamera:Math.sqrt(_r*_r+Br*Br)})}else for(let xr=0;xr<4;xr++)kt.push({zoom:Lt.zoom+1,x:(Rt<<1)+xr%2,y:(Pt<<1)+(xr>>1),wrap:Lt.wrap,fullyVisible:Nt})}return Tt.sort((Lt,Rt)=>Lt.distanceSq-Rt.distanceSq).map(Lt=>Lt.tileID)}const ar=oe.a2.fromPoints([new oe.P(0,0),new oe.P(oe.$,oe.$)]);class mr extends oe.E{constructor(re,he,fe){super(),this.id=re,this.dispatcher=fe,this.on("data",_e=>this._dataHandler(_e)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((_e,we,Me,Fe)=>{const Be=new(wi(we.type))(_e,we,Me,Fe);if(Be.id!==_e)throw new Error(`Expected Source id to be ${_e} instead of ${Be.id}`);return Be})(re,he,fe,this),this._tiles={},this._cache=new dt(0,_e=>this._unloadTile(_e)),this._timers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new yt,this._didEmitContent=!1,this._updated=!1}onAdd(re){this.map=re,this._maxTileCacheSize=re?re._maxTileCacheSize:null,this._maxTileCacheZoomLevels=re?re._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(re)}onRemove(re){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(re)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const re in this._tiles){const he=this._tiles[re];if(he.state!=="loaded"&&he.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const re=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,re&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(re,he,fe){return oe._(this,void 0,void 0,function*(){try{yield this._source.loadTile(re),this._tileLoaded(re,he,fe)}catch(_e){re.state="errored",_e.status!==404?this._source.fire(new oe.k(_e,{tile:re})):this.update(this.transform,this.terrain)}})}_unloadTile(re){this._source.unloadTile&&this._source.unloadTile(re)}_abortTile(re){this._source.abortTile&&this._source.abortTile(re),this._source.fire(new oe.l("dataabort",{tile:re,coord:re.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(re){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const he in this._tiles){const fe=this._tiles[he];fe.upload(re),fe.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(re=>re.tileID).sort(gr).map(re=>re.key)}getRenderableIds(re){const he=[];for(const fe in this._tiles)this._isIdRenderable(fe,re)&&he.push(this._tiles[fe]);return re?he.sort((fe,_e)=>{const we=fe.tileID,Me=_e.tileID,Fe=new oe.P(we.canonical.x,we.canonical.y)._rotate(-this.transform.bearingInRadians),Be=new oe.P(Me.canonical.x,Me.canonical.y)._rotate(-this.transform.bearingInRadians);return we.overscaledZ-Me.overscaledZ||Be.y-Fe.y||Be.x-Fe.x}).map(fe=>fe.tileID.key):he.map(fe=>fe.tileID).sort(gr).map(fe=>fe.key)}hasRenderableParent(re){const he=re.overscaledZ-1;if(he>=this._source.minzoom){const fe=this._getLoadedTile(re.scaledTo(he));if(fe)return this._isIdRenderable(fe.tileID.key)}return!1}_isIdRenderable(re,he=!1){var fe;return(fe=this._tiles[re])===null||fe===void 0?void 0:fe.isRenderable(he)}reload(re){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const he in this._tiles)re?this._reloadTile(he,"expired"):this._tiles[he].state!=="errored"&&this._reloadTile(he,"reloading")}}_reloadTile(re,he){return oe._(this,void 0,void 0,function*(){const fe=this._tiles[re];fe&&(fe.state!=="loading"&&(fe.state=he),yield this._loadTile(fe,re,he))})}_tileLoaded(re,he,fe){re.timeAdded=Ae(),fe==="expired"&&(re.refreshedUponExpiration=!0),this._setTileReloadTimer(he,re),this.getSource().type==="raster-dem"&&re.dem&&this._backfillDEM(re),this._state.initializeTileState(re,this.map?this.map.painter:null),re.aborted||this._source.fire(new oe.l("data",{dataType:"source",tile:re,coord:re.tileID}))}_backfillDEM(re){const he=this.getRenderableIds();for(let _e=0;_e<he.length;_e++){const we=he[_e];if(re.neighboringTiles&&re.neighboringTiles[we]){const Me=this.getTileByID(we);fe(re,Me),fe(Me,re)}}function fe(_e,we){_e.needsHillshadePrepare=!0,_e.needsTerrainPrepare=!0;let Me=we.tileID.canonical.x-_e.tileID.canonical.x;const Fe=we.tileID.canonical.y-_e.tileID.canonical.y,Be=Math.pow(2,_e.tileID.canonical.z),$e=we.tileID.key;Me===0&&Fe===0||Math.abs(Fe)>1||(Math.abs(Me)>1&&(Math.abs(Me+Be)===1?Me+=Be:Math.abs(Me-Be)===1&&(Me-=Be)),we.dem&&_e.dem&&(_e.dem.backfillBorder(we.dem,Me,Fe),_e.neighboringTiles&&_e.neighboringTiles[$e]&&(_e.neighboringTiles[$e].backfilled=!0)))}}getTile(re){return this.getTileByID(re.key)}getTileByID(re){return this._tiles[re]}_retainLoadedChildren(re,he){const fe=Object.values(re),_e=this._getLoadedDescendents(fe),we={};for(const Me of fe){const Fe=_e[Me.key];if(!(Fe!=null&&Fe.length)){we[Me.key]=Me;continue}const Be=Me.overscaledZ+mr.maxUnderzooming,$e=Fe.filter(Xe=>Xe.tileID.overscaledZ<=Be);if(!$e.length){we[Me.key]=Me;continue}const We=Math.min(...$e.map(Xe=>Xe.tileID.overscaledZ)),Je=$e.filter(Xe=>Xe.tileID.overscaledZ===We).map(Xe=>Xe.tileID);for(const Xe of Je)he[Xe.key]=Xe;this._areDescendentsComplete(Je,We,Me.overscaledZ)||(we[Me.key]=Me)}return we}_getLoadedDescendents(re){var he;const fe={};for(const _e in this._tiles){const we=this._tiles[_e];if(we.hasData())for(const Me of re)we.tileID.isChildOf(Me)&&(fe[he=Me.key]||(fe[he]=[])).push(we)}return fe}_areDescendentsComplete(re,he,fe){return re.length===1&&re[0].isOverscaled()?re[0].overscaledZ===he:Math.pow(4,he-fe)===re.length}_getLoadedTile(re){const he=this._tiles[re.key];return he!=null&&he.hasData()?he:null}updateCacheSize(re){const he=Math.ceil(re.width/this._source.tileSize)+1,fe=Math.ceil(re.height/this._source.tileSize)+1,_e=Math.floor(he*fe*(this._maxTileCacheZoomLevels===null?oe.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),we=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,_e):_e;this._cache.setMaxSize(we)}handleWrapJump(re){const he=Math.round((re-(this._prevLng===void 0?re:this._prevLng))/360);if(this._prevLng=re,he){const fe={};for(const _e in this._tiles){const we=this._tiles[_e];we.tileID=we.tileID.unwrapTo(we.tileID.wrap+he),fe[we.tileID.key]=we}this._tiles=fe,this._resetTileReloadTimers()}}update(re,he){if(!this._sourceLoaded||this._paused)return;let fe;this.transform=re,this.terrain=he,this.updateCacheSize(re),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?fe=re.getVisibleUnwrappedCoordinates(this._source.tileID).map(Be=>new oe.Z(Be.canonical.z,Be.wrap,Be.canonical.z,Be.canonical.x,Be.canonical.y)):(fe=kr(re,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:he,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(fe=fe.filter(Be=>this._source.hasTile(Be)))):fe=[],this.usedForTerrain&&(fe=this._addTerrainIdealTiles(fe));const _e=fe.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,_e&&this.fire(new oe.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const we=Xr(re,this._source),Me=this._updateRetainedTiles(fe,we),Fe=Cr(this._source.type);Fe&&this._rasterFadeDuration>0&&!he&&this._updateFadingTiles(fe,Me),Fe?this._cleanUpRasterTiles(Me):this._cleanUpVectorTiles(Me)}_cleanUpRasterTiles(re){for(const he in this._tiles)re[he]||this._removeTile(he)}_cleanUpVectorTiles(re){for(const he in this._tiles){const fe=this._tiles[he];re[he]?fe.clearSymbolFadeHold():fe.hasSymbolBuckets?fe.holdingForSymbolFade()?fe.symbolFadeFinished()&&this._removeTile(he):fe.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(he)}}_addTerrainIdealTiles(re){const he=[];for(const fe of re)if(fe.canonical.z>this._source.minzoom){const _e=fe.scaledTo(fe.canonical.z-1);he.push(_e);const we=fe.scaledTo(Math.max(this._source.minzoom,Math.min(fe.canonical.z,5)));he.push(we)}return re.concat(he)}releaseSymbolFadeTiles(){for(const re in this._tiles)this._tiles[re].holdingForSymbolFade()&&this._removeTile(re)}_updateRetainedTiles(re,he){var fe;const _e={},we={},Me=Math.max(he-mr.maxOverzooming,this._source.minzoom);let Fe={};for(const Be of re){const $e=this._addTile(Be);_e[Be.key]=Be,$e.hasData()||(Fe[Be.key]=Be)}Fe=this._retainLoadedChildren(Fe,_e);for(const Be in Fe){const $e=Fe[Be];let We=this._tiles[Be],Je=We==null?void 0:We.wasRequested();for(let Xe=$e.overscaledZ-1;Xe>=Me;--Xe){const st=$e.scaledTo(Xe);if(we[st.key])break;if(we[st.key]=!0,We=this.getTile(st),!We&&Je&&(We=this._addTile(st)),We){const ht=We.hasData();if((ht||!(!((fe=this.map)===null||fe===void 0)&&fe.cancelPendingTileRequestsWhileZooming)||Je)&&(_e[st.key]=st),Je=We.wasRequested(),ht)break}}}return _e}_updateFadingTiles(re,he){const fe=Ae(),_e=oe.am(re);for(const we of re){const Me=this._tiles[we.key];Me.fadingDirection!==tt.Departing&&Me.fadeOpacity!==0||Me.resetFadeLogic(),this._updateFadingAncestor(Me,he,fe)||this._updateFadingDescendents(Me,he,fe)||this._updateFadingEdge(Me,_e,fe)||Me.resetFadeLogic()}}_updateFadingAncestor(re,he,fe){if(!re.hasData())return!1;const{tileID:_e,fadingRole:we,fadingDirection:Me,fadingParentID:Fe}=re;if(we===mt.Base&&Me===tt.Incoming&&Fe)return he[Fe.key]=Fe,!0;const Be=Math.max(_e.overscaledZ-this._maxFadingAncestorLevels,this._source.minzoom);for(let $e=_e.overscaledZ-1;$e>=Be;$e--){const We=_e.scaledTo($e),Je=this._getLoadedTile(We);if(Je)return re.setCrossFadeLogic({fadingRole:mt.Base,fadingDirection:tt.Incoming,fadingParentID:Je.tileID,fadeEndTime:fe+this._rasterFadeDuration}),Je.setCrossFadeLogic({fadingRole:mt.Parent,fadingDirection:tt.Departing,fadeEndTime:fe+this._rasterFadeDuration}),he[We.key]=We,!0}return!1}_updateFadingDescendents(re,he,fe){if(!re.hasData())return!1;const _e=re.tileID.children(this._source.maxzoom);let we=this._updateFadingChildren(re,_e,he,fe);if(we)return!0;for(const Me of _e){const Fe=Me.children(this._source.maxzoom);this._updateFadingChildren(re,Fe,he,fe)&&(we=!0)}return we}_updateFadingChildren(re,he,fe,_e){if(he[0].overscaledZ>=this._source.maxzoom)return!1;let we=!1;for(const Me of he){const Fe=this._getLoadedTile(Me);if(!Fe)continue;const{fadingRole:Be,fadingDirection:$e,fadingParentID:We}=Fe;Be===mt.Base&&$e===tt.Departing&&We||(Fe.setCrossFadeLogic({fadingRole:mt.Base,fadingDirection:tt.Departing,fadingParentID:re.tileID,fadeEndTime:_e+this._rasterFadeDuration}),re.setCrossFadeLogic({fadingRole:mt.Parent,fadingDirection:tt.Incoming,fadeEndTime:_e+this._rasterFadeDuration})),fe[Me.key]=Me,we=!0}return we}_updateFadingEdge(re,he,fe){const _e=re.tileID;return!!re.selfFading||!re.hasData()&&!!he.has(_e)&&(re.setSelfFadeLogic(fe+this._rasterFadeDuration),!0)}_addTile(re){let he=this._tiles[re.key];if(he)return he;he=this._cache.getAndRemove(re),he&&(he.resetFadeLogic(),this._setTileReloadTimer(re.key,he),he.tileID=re,this._state.initializeTileState(he,this.map?this.map.painter:null));const fe=he;return he||(he=new rt(re,this._source.tileSize*re.overscaleFactor()),this._loadTile(he,re.key,he.state)),he.uses++,this._tiles[re.key]=he,fe||this._source.fire(new oe.l("dataloading",{tile:he,coord:he.tileID,dataType:"source"})),he}_setTileReloadTimer(re,he){this._clearTileReloadTimer(re);const fe=he.getExpiryTimeout();fe&&(this._timers[re]=setTimeout(()=>{this._reloadTile(re,"expired"),delete this._timers[re]},fe))}_clearTileReloadTimer(re){const he=this._timers[re];he&&(clearTimeout(he),delete this._timers[re])}_resetTileReloadTimers(){for(const re in this._timers)clearTimeout(this._timers[re]),delete this._timers[re];for(const re in this._tiles)this._setTileReloadTimer(re,this._tiles[re])}refreshTiles(re){for(const he in this._tiles)(this._isIdRenderable(he)||this._tiles[he].state=="errored")&&re.some(fe=>fe.equals(this._tiles[he].tileID.canonical))&&this._reloadTile(he,"expired")}_removeTile(re){const he=this._tiles[re];he&&(he.uses--,delete this._tiles[re],this._clearTileReloadTimer(re),he.uses>0||(he.hasData()&&he.state!=="reloading"?this._cache.add(he.tileID,he,he.getExpiryTimeout()):(he.aborted=!0,this._abortTile(he),this._unloadTile(he))))}_dataHandler(re){re.dataType==="source"&&(re.sourceDataType!=="metadata"?re.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(re.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const re in this._tiles)this._removeTile(re);this._cache.reset()}tilesIn(re,he,fe){const _e=[],we=this.transform;if(!we)return _e;const Me=we.getCoveringTilesDetailsProvider().allowWorldCopies(),Fe=fe?we.getCameraQueryGeometry(re):re,Be=st=>we.screenPointToMercatorCoordinate(st,this.terrain),$e=this.transformBbox(re,Be,!Me),We=this.transformBbox(Fe,Be,!Me),Je=this.getIds(),Xe=oe.a2.fromPoints(We);for(let st=0;st<Je.length;st++){const ht=this._tiles[Je[st]];if(ht.holdingForSymbolFade())continue;const vt=Me?[ht.tileID]:[ht.tileID.unwrapTo(-1),ht.tileID.unwrapTo(0)],bt=Math.pow(2,we.zoom-ht.tileID.overscaledZ),xt=he*ht.queryPadding*oe.$/ht.tileSize/bt;for(const Ct of vt){const kt=Xe.map(Tt=>Ct.getTilePoint(new oe.a1(Tt.x,Tt.y)));if(kt.expandBy(xt),kt.intersects(ar)){const Tt=$e.map(Rt=>Ct.getTilePoint(Rt)),Lt=We.map(Rt=>Ct.getTilePoint(Rt));_e.push({tile:ht,tileID:Me?Ct:Ct.unwrapTo(0),queryGeometry:Tt,cameraQueryGeometry:Lt,scale:bt})}}}return _e}transformBbox(re,he,fe){let _e=re.map(he);if(fe){const we=oe.a2.fromPoints(re);we.shrinkBy(.001*Math.min(we.width(),we.height()));const Me=we.map(he);oe.a2.fromPoints(_e).covers(Me)||(_e=_e.map(Fe=>Fe.x>.5?new oe.a1(Fe.x-1,Fe.y,Fe.z):Fe))}return _e}getVisibleCoordinates(re){const he=this.getRenderableIds(re).map(fe=>this._tiles[fe].tileID);return this.transform&&this.transform.populateCache(he),he}hasTransition(){if(this._source.hasTransition())return!0;if(Cr(this._source.type)&&this._rasterFadeDuration>0){const re=Ae();for(const he in this._tiles)if(this._tiles[he].fadeEndTime>=re)return!0}return!1}setRasterFadeDuration(re){this._rasterFadeDuration=re}setFeatureState(re,he,fe){this._state.updateState(re=re||"_geojsonTileLayer",he,fe)}removeFeatureState(re,he,fe){this._state.removeFeatureState(re=re||"_geojsonTileLayer",he,fe)}getFeatureState(re,he){return this._state.getState(re=re||"_geojsonTileLayer",he)}setDependencies(re,he,fe){const _e=this._tiles[re];_e&&_e.setDependencies(he,fe)}reloadTilesForDependencies(re,he){for(const fe in this._tiles)this._tiles[fe].hasDependency(re,he)&&this._reloadTile(fe,"reloading");this._cache.filter(fe=>!fe.hasDependency(re,he))}}function gr(be,re){const he=Math.abs(2*be.wrap)-+(be.wrap<0),fe=Math.abs(2*re.wrap)-+(re.wrap<0);return be.overscaledZ-re.overscaledZ||fe-he||re.canonical.y-be.canonical.y||re.canonical.x-be.canonical.x}function Cr(be){return be==="raster"||be==="image"||be==="video"}mr.maxOverzooming=10,mr.maxUnderzooming=3;class ur{constructor(re,he){this.reset(re,he)}reset(re,he){this.points=re||[],this._distances=[0];for(let fe=1;fe<this.points.length;fe++)this._distances[fe]=this._distances[fe-1]+this.points[fe].dist(this.points[fe-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(he||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(re){if(this.points.length===1)return this.points[0];re=oe.ae(re,0,1);let he=1,fe=this._distances[he];const _e=re*this.paddedLength+this.padding;for(;fe<_e&&he<this._distances.length;)fe=this._distances[++he];const we=he-1,Me=this._distances[we],Fe=fe-Me,Be=Fe>0?(_e-Me)/Fe:0;return this.points[we].mult(1-Be).add(this.points[he].mult(Be))}}function cr(be,re){let he=!0;return be==="always"||be!=="never"&&re!=="never"||(he=!1),he}class nr{constructor(re,he,fe){const _e=this.boxCells=[],we=this.circleCells=[];this.xCellCount=Math.ceil(re/fe),this.yCellCount=Math.ceil(he/fe);for(let Me=0;Me<this.xCellCount*this.yCellCount;Me++)_e.push([]),we.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=re,this.height=he,this.xScale=this.xCellCount/re,this.yScale=this.yCellCount/he,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(re,he,fe,_e,we){this._forEachCell(he,fe,_e,we,this._insertBoxCell,this.boxUid++),this.boxKeys.push(re),this.bboxes.push(he),this.bboxes.push(fe),this.bboxes.push(_e),this.bboxes.push(we)}insertCircle(re,he,fe,_e){this._forEachCell(he-_e,fe-_e,he+_e,fe+_e,this._insertCircleCell,this.circleUid++),this.circleKeys.push(re),this.circles.push(he),this.circles.push(fe),this.circles.push(_e)}_insertBoxCell(re,he,fe,_e,we,Me){this.boxCells[we].push(Me)}_insertCircleCell(re,he,fe,_e,we,Me){this.circleCells[we].push(Me)}_query(re,he,fe,_e,we,Me,Fe){if(fe<0||re>this.width||_e<0||he>this.height)return[];const Be=[];if(re<=0&&he<=0&&this.width<=fe&&this.height<=_e){if(we)return[{key:null,x1:re,y1:he,x2:fe,y2:_e}];for(let $e=0;$e<this.boxKeys.length;$e++)Be.push({key:this.boxKeys[$e],x1:this.bboxes[4*$e],y1:this.bboxes[4*$e+1],x2:this.bboxes[4*$e+2],y2:this.bboxes[4*$e+3]});for(let $e=0;$e<this.circleKeys.length;$e++){const We=this.circles[3*$e],Je=this.circles[3*$e+1],Xe=this.circles[3*$e+2];Be.push({key:this.circleKeys[$e],x1:We-Xe,y1:Je-Xe,x2:We+Xe,y2:Je+Xe})}}else this._forEachCell(re,he,fe,_e,this._queryCell,Be,{hitTest:we,overlapMode:Me,seenUids:{box:{},circle:{}}},Fe);return Be}query(re,he,fe,_e){return this._query(re,he,fe,_e,!1,null)}hitTest(re,he,fe,_e,we,Me){return this._query(re,he,fe,_e,!0,we,Me).length>0}hitTestCircle(re,he,fe,_e,we){const Me=re-fe,Fe=re+fe,Be=he-fe,$e=he+fe;if(Fe<0||Me>this.width||$e<0||Be>this.height)return!1;const We=[];return this._forEachCell(Me,Be,Fe,$e,this._queryCellCircle,We,{hitTest:!0,overlapMode:_e,circle:{x:re,y:he,radius:fe},seenUids:{box:{},circle:{}}},we),We.length>0}_queryCell(re,he,fe,_e,we,Me,Fe,Be){const{seenUids:$e,hitTest:We,overlapMode:Je}=Fe,Xe=this.boxCells[we];if(Xe!==null){const ht=this.bboxes;for(const vt of Xe)if(!$e.box[vt]){$e.box[vt]=!0;const bt=4*vt,xt=this.boxKeys[vt];if(re<=ht[bt+2]&&he<=ht[bt+3]&&fe>=ht[bt+0]&&_e>=ht[bt+1]&&(!Be||Be(xt))&&(!We||!cr(Je,xt.overlapMode))&&(Me.push({key:xt,x1:ht[bt],y1:ht[bt+1],x2:ht[bt+2],y2:ht[bt+3]}),We))return!0}}const st=this.circleCells[we];if(st!==null){const ht=this.circles;for(const vt of st)if(!$e.circle[vt]){$e.circle[vt]=!0;const bt=3*vt,xt=this.circleKeys[vt];if(this._circleAndRectCollide(ht[bt],ht[bt+1],ht[bt+2],re,he,fe,_e)&&(!Be||Be(xt))&&(!We||!cr(Je,xt.overlapMode))){const Ct=ht[bt],kt=ht[bt+1],Tt=ht[bt+2];if(Me.push({key:xt,x1:Ct-Tt,y1:kt-Tt,x2:Ct+Tt,y2:kt+Tt}),We)return!0}}}return!1}_queryCellCircle(re,he,fe,_e,we,Me,Fe,Be){const{circle:$e,seenUids:We,overlapMode:Je}=Fe,Xe=this.boxCells[we];if(Xe!==null){const ht=this.bboxes;for(const vt of Xe)if(!We.box[vt]){We.box[vt]=!0;const bt=4*vt,xt=this.boxKeys[vt];if(this._circleAndRectCollide($e.x,$e.y,$e.radius,ht[bt+0],ht[bt+1],ht[bt+2],ht[bt+3])&&(!Be||Be(xt))&&!cr(Je,xt.overlapMode))return Me.push(!0),!0}}const st=this.circleCells[we];if(st!==null){const ht=this.circles;for(const vt of st)if(!We.circle[vt]){We.circle[vt]=!0;const bt=3*vt,xt=this.circleKeys[vt];if(this._circlesCollide(ht[bt],ht[bt+1],ht[bt+2],$e.x,$e.y,$e.radius)&&(!Be||Be(xt))&&!cr(Je,xt.overlapMode))return Me.push(!0),!0}}}_forEachCell(re,he,fe,_e,we,Me,Fe,Be){const $e=this._convertToXCellCoord(re),We=this._convertToYCellCoord(he),Je=this._convertToXCellCoord(fe),Xe=this._convertToYCellCoord(_e);for(let st=$e;st<=Je;st++)for(let ht=We;ht<=Xe;ht++)if(we.call(this,re,he,fe,_e,this.xCellCount*ht+st,Me,Fe,Be))return}_convertToXCellCoord(re){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(re*this.xScale)))}_convertToYCellCoord(re){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(re*this.yScale)))}_circlesCollide(re,he,fe,_e,we,Me){const Fe=_e-re,Be=we-he,$e=fe+Me;return $e*$e>Fe*Fe+Be*Be}_circleAndRectCollide(re,he,fe,_e,we,Me,Fe){const Be=(Me-_e)/2,$e=Math.abs(re-(_e+Be));if($e>Be+fe)return!1;const We=(Fe-we)/2,Je=Math.abs(he-(we+We));if(Je>We+fe)return!1;if($e<=Be||Je<=We)return!0;const Xe=$e-Be,st=Je-We;return Xe*Xe+st*st<=fe*fe}}function hr(be,re,he){const fe=oe.L();if(!be){const{vecSouth:Je,vecEast:Xe}=Qt(re),st=ve();st[0]=Xe[0],st[1]=Xe[1],st[2]=Je[0],st[3]=Je[1],_e=st,(We=(Me=(we=st)[0])*($e=we[3])-(Be=we[2])*(Fe=we[1]))&&(_e[0]=$e*(We=1/We),_e[1]=-Fe*We,_e[2]=-Be*We,_e[3]=Me*We),fe[0]=st[0],fe[1]=st[1],fe[4]=st[2],fe[5]=st[3]}var _e,we,Me,Fe,Be,$e,We;return oe.N(fe,fe,[1/he,1/he,1]),fe}function jt(be,re,he,fe){if(be){const _e=oe.L();if(!re){const{vecSouth:we,vecEast:Me}=Qt(he);_e[0]=Me[0],_e[1]=Me[1],_e[4]=we[0],_e[5]=we[1]}return oe.N(_e,_e,[fe,fe,1]),_e}return he.pixelsToClipSpaceMatrix}function Qt(be){const re=Math.cos(be.rollInRadians),he=Math.sin(be.rollInRadians),fe=Math.cos(be.pitchInRadians),_e=Math.cos(be.bearingInRadians),we=Math.sin(be.bearingInRadians),Me=oe.ar();Me[0]=-_e*fe*he-we*re,Me[1]=-we*fe*he+_e*re;const Fe=oe.as(Me);Fe<1e-9?oe.at(Me):oe.au(Me,Me,1/Fe);const Be=oe.ar();Be[0]=_e*fe*re-we*he,Be[1]=we*fe*re+_e*he;const $e=oe.as(Be);return $e<1e-9?oe.at(Be):oe.au(Be,Be,1/$e),{vecEast:Be,vecSouth:Me}}function Mr(be,re,he,fe){let _e;fe?(_e=[be,re,fe(be,re),1],oe.aw(_e,_e,he)):(_e=[be,re,0,1],si(_e,_e,he));const we=_e[3];return{point:new oe.P(_e[0]/we,_e[1]/we),signedDistanceFromCamera:we,isOccluded:!1}}function pi(be,re){return .5+be/re*.5}function Yr(be,re){return be.x>=-re[0]&&be.x<=re[0]&&be.y>=-re[1]&&be.y<=re[1]}function or(be,re,he,fe,_e,we,Me,Fe,Be,$e,We,Je,Xe){const st=he?be.textSizeData:be.iconSizeData,ht=oe.an(st,re.transform.zoom),vt=[256/re.width*2+1,256/re.height*2+1],bt=he?be.text.dynamicLayoutVertexArray:be.icon.dynamicLayoutVertexArray;bt.clear();const xt=be.lineVertexArray,Ct=he?be.text.placedSymbolArray:be.icon.placedSymbolArray,kt=re.transform.width/re.transform.height;let Tt=!1;for(let Lt=0;Lt<Ct.length;Lt++){const Rt=Ct.get(Lt);if(Rt.hidden||Rt.writingMode===oe.ao.vertical&&!Tt){Xi(Rt.numGlyphs,bt);continue}Tt=!1;const Pt=new oe.P(Rt.anchorX,Rt.anchorY),Nt={getElevation:Xe,pitchedLabelPlaneMatrix:fe,lineVertexArray:xt,pitchWithMap:we,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:re.transform,tileAnchorPoint:Pt,unwrappedTileID:Be,width:$e,height:We,translation:Je},Yt=qi(Rt.anchorX,Rt.anchorY,Nt);if(!Yr(Yt.point,vt)){Xi(Rt.numGlyphs,bt);continue}const Wt=pi(re.transform.cameraToCenterDistance,Yt.signedDistanceFromCamera),Ut=oe.ap(st,ht,Rt),Kt=we?Ut*re.transform.getPitchedTextCorrection(Rt.anchorX,Rt.anchorY,Be)/Wt:Ut*Wt,br=vi({projectionContext:Nt,pitchedLabelPlaneMatrixInverse:_e,symbol:Rt,fontSize:Kt,flip:!1,keepUpright:Me,glyphOffsetArray:be.glyphOffsetArray,dynamicLayoutVertexArray:bt,aspectRatio:kt,rotateToLine:Fe});Tt=br.useVertical,(br.notEnoughRoom||Tt||br.needsFlipping&&vi({projectionContext:Nt,pitchedLabelPlaneMatrixInverse:_e,symbol:Rt,fontSize:Kt,flip:!0,keepUpright:Me,glyphOffsetArray:be.glyphOffsetArray,dynamicLayoutVertexArray:bt,aspectRatio:kt,rotateToLine:Fe}).notEnoughRoom)&&Xi(Rt.numGlyphs,bt)}he?be.text.dynamicLayoutVertexBuffer.updateData(bt):be.icon.dynamicLayoutVertexBuffer.updateData(bt)}function wr(be,re,he,fe,_e,we,Me,Fe){const Be=we.glyphStartIndex+we.numGlyphs,$e=we.lineStartIndex,We=we.lineStartIndex+we.lineLength,Je=re.getoffsetX(we.glyphStartIndex),Xe=re.getoffsetX(Be-1),st=oi(be*Je,he,fe,_e,we.segment,$e,We,Fe,Me);if(!st)return null;const ht=oi(be*Xe,he,fe,_e,we.segment,$e,We,Fe,Me);return ht?Fe.projectionCache.anyProjectionOccluded?null:{first:st,last:ht}:null}function Wr(be,re,he,fe){return be===oe.ao.horizontal&&Math.abs(he.y-re.y)>Math.abs(he.x-re.x)*fe?{useVertical:!0}:(be===oe.ao.vertical?re.y<he.y:re.x>he.x)?{needsFlipping:!0}:null}function vi(be){const{projectionContext:re,pitchedLabelPlaneMatrixInverse:he,symbol:fe,fontSize:_e,flip:we,keepUpright:Me,glyphOffsetArray:Fe,dynamicLayoutVertexArray:Be,aspectRatio:$e,rotateToLine:We}=be,Je=_e/24,Xe=fe.lineOffsetX*Je,st=fe.lineOffsetY*Je;let ht;if(fe.numGlyphs>1){const vt=fe.glyphStartIndex+fe.numGlyphs,bt=fe.lineStartIndex,xt=fe.lineStartIndex+fe.lineLength,Ct=wr(Je,Fe,Xe,st,we,fe,We,re);if(!Ct)return{notEnoughRoom:!0};const kt=ki(Ct.first.point.x,Ct.first.point.y,re,he),Tt=ki(Ct.last.point.x,Ct.last.point.y,re,he);if(Me&&!we){const Lt=Wr(fe.writingMode,kt,Tt,$e);if(Lt)return Lt}ht=[Ct.first];for(let Lt=fe.glyphStartIndex+1;Lt<vt-1;Lt++){const Rt=oi(Je*Fe.getoffsetX(Lt),Xe,st,we,fe.segment,bt,xt,re,We);if(!Rt)return{notEnoughRoom:!0};ht.push(Rt)}ht.push(Ct.last)}else{if(Me&&!we){const bt=Fr(re.tileAnchorPoint.x,re.tileAnchorPoint.y,re).point,xt=fe.lineStartIndex+fe.segment+1,Ct=new oe.P(re.lineVertexArray.getx(xt),re.lineVertexArray.gety(xt)),kt=Fr(Ct.x,Ct.y,re),Tt=kt.signedDistanceFromCamera>0?kt.point:Ni(re.tileAnchorPoint,Ct,bt,1,re),Lt=ki(bt.x,bt.y,re,he),Rt=ki(Tt.x,Tt.y,re,he),Pt=Wr(fe.writingMode,Lt,Rt,$e);if(Pt)return Pt}const vt=oi(Je*Fe.getoffsetX(fe.glyphStartIndex),Xe,st,we,fe.segment,fe.lineStartIndex,fe.lineStartIndex+fe.lineLength,re,We);if(!vt||re.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};ht=[vt]}for(const vt of ht)oe.av(Be,vt.point,vt.angle);return{}}function Ni(be,re,he,fe,_e){const we=be.add(be.sub(re)._unit()),Me=Fr(we.x,we.y,_e).point,Fe=he.sub(Me);return he.add(Fe._mult(fe/Fe.mag()))}function $i(be,re,he){const fe=re.projectionCache;if(fe.projections[be])return fe.projections[be];const _e=new oe.P(re.lineVertexArray.getx(be),re.lineVertexArray.gety(be)),we=Fr(_e.x,_e.y,re);if(we.signedDistanceFromCamera>0)return fe.projections[be]=we.point,fe.anyProjectionOccluded=fe.anyProjectionOccluded||we.isOccluded,we.point;const Me=be-he.direction;return Ni(he.distanceFromAnchor===0?re.tileAnchorPoint:new oe.P(re.lineVertexArray.getx(Me),re.lineVertexArray.gety(Me)),_e,he.previousVertex,he.absOffsetX-he.distanceFromAnchor+1,re)}function Fr(be,re,he){const fe=be+he.translation[0],_e=re+he.translation[1];let we;return he.pitchWithMap?(we=Mr(fe,_e,he.pitchedLabelPlaneMatrix,he.getElevation),we.isOccluded=!1):(we=he.transform.projectTileCoordinates(fe,_e,he.unwrappedTileID,he.getElevation),we.point.x=(.5*we.point.x+.5)*he.width,we.point.y=(.5*-we.point.y+.5)*he.height),we}function ki(be,re,he,fe){if(he.pitchWithMap){const _e=[be,re,0,1];return oe.aw(_e,_e,fe),he.transform.projectTileCoordinates(_e[0]/_e[3],_e[1]/_e[3],he.unwrappedTileID,he.getElevation).point}return{x:be/he.width*2-1,y:1-re/he.height*2}}function qi(be,re,he){return he.transform.projectTileCoordinates(be,re,he.unwrappedTileID,he.getElevation)}function Ai(be,re,he){return be._unit()._perp()._mult(re*he)}function Ri(be,re,he,fe,_e,we,Me,Fe,Be){if(Fe.projectionCache.offsets[be])return Fe.projectionCache.offsets[be];const $e=he.add(re);if(be+Be.direction<fe||be+Be.direction>=_e)return Fe.projectionCache.offsets[be]=$e,$e;const We=$i(be+Be.direction,Fe,Be),Je=Ai(We.sub(he),Me,Be.direction),Xe=he.add(Je),st=We.add(Je);return Fe.projectionCache.offsets[be]=oe.ax(we,$e,Xe,st)||$e,Fe.projectionCache.offsets[be]}function oi(be,re,he,fe,_e,we,Me,Fe,Be){const $e=fe?be-re:be+re;let We=$e>0?1:-1,Je=0;fe&&(We*=-1,Je=Math.PI),We<0&&(Je+=Math.PI);let Xe,st=We>0?we+_e:we+_e+1;Fe.projectionCache.cachedAnchorPoint?Xe=Fe.projectionCache.cachedAnchorPoint:(Xe=Fr(Fe.tileAnchorPoint.x,Fe.tileAnchorPoint.y,Fe).point,Fe.projectionCache.cachedAnchorPoint=Xe);let ht,vt,bt=Xe,xt=Xe,Ct=0,kt=0;const Tt=Math.abs($e),Lt=[];let Rt;for(;Ct+kt<=Tt;){if(st+=We,st<we||st>=Me)return null;Ct+=kt,xt=bt,vt=ht;const Yt={absOffsetX:Tt,direction:We,distanceFromAnchor:Ct,previousVertex:xt};if(bt=$i(st,Fe,Yt),he===0)Lt.push(xt),Rt=bt.sub(xt);else{let Wt;const Ut=bt.sub(xt);Wt=Ut.mag()===0?Ai($i(st+We,Fe,Yt).sub(bt),he,We):Ai(Ut,he,We),vt||(vt=xt.add(Wt)),ht=Ri(st,Wt,bt,we,Me,vt,he,Fe,Yt),Lt.push(vt),Rt=ht.sub(vt)}kt=Rt.mag()}const Pt=Rt._mult((Tt-Ct)/kt)._add(vt||xt),Nt=Je+Math.atan2(bt.y-xt.y,bt.x-xt.x);return Lt.push(Pt),{point:Pt,angle:Be?Nt:0,path:Lt}}const ni=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Xi(be,re){for(let he=0;he<be;he++){const fe=re.length;re.resize(fe+4),re.float32.set(ni,3*fe)}}function si(be,re,he){const fe=re[0],_e=re[1];return be[0]=he[0]*fe+he[4]*_e+he[12],be[1]=he[1]*fe+he[5]*_e+he[13],be[3]=he[3]*fe+he[7]*_e+he[15],be}const Qr=100;class En{constructor(re,he=new nr(re.width+200,re.height+200,25),fe=new nr(re.width+200,re.height+200,25)){this.transform=re,this.grid=he,this.ignoredGrid=fe,this.pitchFactor=Math.cos(re.pitch*Math.PI/180)*re.cameraToCenterDistance,this.screenRightBoundary=re.width+Qr,this.screenBottomBoundary=re.height+Qr,this.gridRightBoundary=re.width+200,this.gridBottomBoundary=re.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(re,he,fe,_e,we,Me,Fe,Be,$e,We,Je,Xe){const st=this.projectAndGetPerspectiveRatio(re.anchorPointX+Be[0],re.anchorPointY+Be[1],we,We,Xe),ht=fe*st.perspectiveRatio;let vt;if(Me||Fe)vt=this._projectCollisionBox(re,ht,_e,we,Me,Fe,Be,st,We,Je,Xe);else{const Rt=st.x+(Je?Je.x*ht:0),Pt=st.y+(Je?Je.y*ht:0);vt={allPointsOccluded:!1,box:[Rt+re.x1*ht,Pt+re.y1*ht,Rt+re.x2*ht,Pt+re.y2*ht]}}const[bt,xt,Ct,kt]=vt.box,Tt=Me?vt.allPointsOccluded:st.isOccluded;let Lt=Tt;return Lt||(Lt=st.perspectiveRatio<this.perspectiveRatioCutoff),Lt||(Lt=!this.isInsideGrid(bt,xt,Ct,kt)),Lt||he!=="always"&&this.grid.hitTest(bt,xt,Ct,kt,he,$e)?{box:[bt,xt,Ct,kt],placeable:!1,offscreen:!1,occluded:Tt}:{box:[bt,xt,Ct,kt],placeable:!0,offscreen:this.isOffscreen(bt,xt,Ct,kt),occluded:Tt}}placeCollisionCircles(re,he,fe,_e,we,Me,Fe,Be,$e,We,Je,Xe,st,ht){const vt=[],bt=new oe.P(he.anchorX,he.anchorY),xt=this.getPerspectiveRatio(bt.x,bt.y,Me,ht),Ct=($e?we*this.transform.getPitchedTextCorrection(he.anchorX,he.anchorY,Me)/xt:we*xt)/oe.aB,kt={getElevation:ht,pitchedLabelPlaneMatrix:Fe,lineVertexArray:fe,pitchWithMap:$e,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:bt,unwrappedTileID:Me,width:this.transform.width,height:this.transform.height,translation:st},Tt=wr(Ct,_e,he.lineOffsetX*Ct,he.lineOffsetY*Ct,!1,he,!1,kt);let Lt=!1,Rt=!1,Pt=!0;if(Tt){const Nt=.5*Je*xt+Xe,Yt=new oe.P(-100,-100),Wt=new oe.P(this.screenRightBoundary,this.screenBottomBoundary),Ut=new ur,Kt=Tt.first,br=Tt.last;let xr=[];for(let ti=Kt.path.length-1;ti>=1;ti--)xr.push(Kt.path[ti]);for(let ti=1;ti<br.path.length;ti++)xr.push(br.path[ti]);const _r=2.5*Nt;if($e){const ti=this.projectPathToScreenSpace(xr,kt);xr=ti.some(Ti=>Ti.signedDistanceFromCamera<=0)?[]:ti.map(Ti=>Ti.point)}let Br=[];if(xr.length>0){const ti=xr[0].clone(),Ti=xr[0].clone();for(let Oi=1;Oi<xr.length;Oi++)ti.x=Math.min(ti.x,xr[Oi].x),ti.y=Math.min(ti.y,xr[Oi].y),Ti.x=Math.max(Ti.x,xr[Oi].x),Ti.y=Math.max(Ti.y,xr[Oi].y);Br=ti.x>=Yt.x&&Ti.x<=Wt.x&&ti.y>=Yt.y&&Ti.y<=Wt.y?[xr]:Ti.x<Yt.x||ti.x>Wt.x||Ti.y<Yt.y||ti.y>Wt.y?[]:oe.ay([xr],Yt.x,Yt.y,Wt.x,Wt.y)}for(const ti of Br){Ut.reset(ti,.25*Nt);let Ti=0;Ti=Ut.length<=.5*Nt?1:Math.ceil(Ut.paddedLength/_r)+1;for(let Oi=0;Oi<Ti;Oi++){const Fi=Oi/Math.max(Ti-1,1),di=Ut.lerp(Fi),zi=di.x+Qr,cn=di.y+Qr;vt.push(zi,cn,Nt,0);const Ui=zi-Nt,pn=cn-Nt,Qi=zi+Nt,tn=cn+Nt;if(Pt=Pt&&this.isOffscreen(Ui,pn,Qi,tn),Rt=Rt||this.isInsideGrid(Ui,pn,Qi,tn),re!=="always"&&this.grid.hitTestCircle(zi,cn,Nt,re,We)&&(Lt=!0,!Be))return{circles:[],offscreen:!1,collisionDetected:Lt}}}}return{circles:!Be&&Lt||!Rt||xt<this.perspectiveRatioCutoff?[]:vt,offscreen:Pt,collisionDetected:Lt}}projectPathToScreenSpace(re,he){const fe=function(_e,we){const Me=oe.L();return oe.aq(Me,we.pitchedLabelPlaneMatrix),_e.map(Fe=>{const Be=Mr(Fe.x,Fe.y,Me,we.getElevation),$e=we.transform.projectTileCoordinates(Be.point.x,Be.point.y,we.unwrappedTileID,we.getElevation);return $e.point.x=(.5*$e.point.x+.5)*we.width,$e.point.y=(.5*-$e.point.y+.5)*we.height,$e})}(re,he);return function(_e){let we=0,Me=0,Fe=0,Be=0;for(let $e=0;$e<_e.length;$e++)_e[$e].isOccluded?(Fe=$e+1,Be=0):(Be++,Be>Me&&(Me=Be,we=Fe));return _e.slice(we,we+Me)}(fe)}queryRenderedSymbols(re){if(re.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const he=[],fe=new oe.a2;for(const Je of re){const Xe=new oe.P(Je.x+Qr,Je.y+Qr);fe.extend(Xe),he.push(Xe)}const{minX:_e,minY:we,maxX:Me,maxY:Fe}=fe,Be=this.grid.query(_e,we,Me,Fe).concat(this.ignoredGrid.query(_e,we,Me,Fe)),$e={},We={};for(const Je of Be){const Xe=Je.key;if($e[Xe.bucketInstanceId]===void 0&&($e[Xe.bucketInstanceId]={}),$e[Xe.bucketInstanceId][Xe.featureIndex])continue;const st=[new oe.P(Je.x1,Je.y1),new oe.P(Je.x2,Je.y1),new oe.P(Je.x2,Je.y2),new oe.P(Je.x1,Je.y2)];oe.az(he,st)&&($e[Xe.bucketInstanceId][Xe.featureIndex]=!0,We[Xe.bucketInstanceId]===void 0&&(We[Xe.bucketInstanceId]=[]),We[Xe.bucketInstanceId].push(Xe.featureIndex))}return We}insertCollisionBox(re,he,fe,_e,we,Me){(fe?this.ignoredGrid:this.grid).insert({bucketInstanceId:_e,featureIndex:we,collisionGroupID:Me,overlapMode:he},re[0],re[1],re[2],re[3])}insertCollisionCircles(re,he,fe,_e,we,Me){const Fe=fe?this.ignoredGrid:this.grid,Be={bucketInstanceId:_e,featureIndex:we,collisionGroupID:Me,overlapMode:he};for(let $e=0;$e<re.length;$e+=4)Fe.insertCircle(Be,re[$e],re[$e+1],re[$e+2])}projectAndGetPerspectiveRatio(re,he,fe,_e,we){if(we){let Me;_e?(Me=[re,he,_e(re,he),1],oe.aw(Me,Me,we)):(Me=[re,he,0,1],si(Me,Me,we));const Fe=Me[3];return{x:(Me[0]/Fe+1)/2*this.transform.width+Qr,y:(-Me[1]/Fe+1)/2*this.transform.height+Qr,perspectiveRatio:.5+this.transform.cameraToCenterDistance/Fe*.5,isOccluded:!1,signedDistanceFromCamera:Fe}}{const Me=this.transform.projectTileCoordinates(re,he,fe,_e);return{x:(Me.point.x+1)/2*this.transform.width+Qr,y:(1-Me.point.y)/2*this.transform.height+Qr,perspectiveRatio:.5+this.transform.cameraToCenterDistance/Me.signedDistanceFromCamera*.5,isOccluded:Me.isOccluded,signedDistanceFromCamera:Me.signedDistanceFromCamera}}}getPerspectiveRatio(re,he,fe,_e){const we=this.transform.projectTileCoordinates(re,he,fe,_e);return .5+this.transform.cameraToCenterDistance/we.signedDistanceFromCamera*.5}isOffscreen(re,he,fe,_e){return fe<Qr||re>=this.screenRightBoundary||_e<Qr||he>this.screenBottomBoundary}isInsideGrid(re,he,fe,_e){return fe>=0&&re<this.gridRightBoundary&&_e>=0&&he<this.gridBottomBoundary}getViewportMatrix(){const re=oe.ai([]);return oe.M(re,re,[-100,-100,0]),re}_projectCollisionBox(re,he,fe,_e,we,Me,Fe,Be,$e,We,Je){let Xe=1,st=0,ht=0,vt=1;const bt=re.anchorPointX+Fe[0],xt=re.anchorPointY+Fe[1];if(Me&&!we){const xr=this.projectAndGetPerspectiveRatio(bt+1,xt,_e,$e,Je),_r=xr.x-Be.x,Br=Math.atan((xr.y-Be.y)/_r)+(_r<0?Math.PI:0),ti=Math.sin(Br),Ti=Math.cos(Br);Xe=Ti,st=ti,ht=-ti,vt=Ti}else if(!Me&&we){const xr=Qt(this.transform);Xe=xr.vecEast[0],st=xr.vecEast[1],ht=xr.vecSouth[0],vt=xr.vecSouth[1]}let Ct=Be.x,kt=Be.y,Tt=he;we&&(Ct=bt,kt=xt,Tt=Math.pow(2,-(this.transform.zoom-fe.overscaledZ)),Tt*=this.transform.getPitchedTextCorrection(bt,xt,_e),We||(Tt*=oe.ae(.5+Be.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),We&&(Ct+=Xe*We.x*Tt+ht*We.y*Tt,kt+=st*We.x*Tt+vt*We.y*Tt);const Lt=re.x1*Tt,Rt=re.x2*Tt,Pt=(Lt+Rt)/2,Nt=re.y1*Tt,Yt=re.y2*Tt,Wt=(Nt+Yt)/2,Ut=[{offsetX:Lt,offsetY:Nt},{offsetX:Pt,offsetY:Nt},{offsetX:Rt,offsetY:Nt},{offsetX:Rt,offsetY:Wt},{offsetX:Rt,offsetY:Yt},{offsetX:Pt,offsetY:Yt},{offsetX:Lt,offsetY:Yt},{offsetX:Lt,offsetY:Wt}];let Kt=[];for(const{offsetX:xr,offsetY:_r}of Ut)Kt.push(new oe.P(Ct+Xe*xr+ht*_r,kt+st*xr+vt*_r));let br=!1;if(we){const xr=Kt.map(_r=>this.projectAndGetPerspectiveRatio(_r.x,_r.y,_e,$e,Je));br=xr.some(_r=>!_r.isOccluded),Kt=xr.map(_r=>new oe.P(_r.x,_r.y))}else br=!0;return{box:oe.aA(Kt),allPointsOccluded:!br}}}class Di{constructor(re,he,fe,_e){this.opacity=re?Math.max(0,Math.min(1,re.opacity+(re.placed?he:-he))):_e&&fe?1:0,this.placed=fe}isHidden(){return this.opacity===0&&!this.placed}}class ji{constructor(re,he,fe,_e,we){this.text=new Di(re?re.text:null,he,fe,we),this.icon=new Di(re?re.icon:null,he,_e,we)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Yi{constructor(re,he,fe){this.text=re,this.icon=he,this.skipFade=fe}}class Pi{constructor(re,he,fe,_e,we){this.bucketInstanceId=re,this.featureIndex=he,this.sourceLayerIndex=fe,this.bucketIndex=_e,this.tileID=we}}class qn{constructor(re){this.crossSourceCollisions=re,this.maxGroupID=0,this.collisionGroups={}}get(re){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[re]){const he=++this.maxGroupID;this.collisionGroups[re]={ID:he,predicate:fe=>fe.collisionGroupID===he}}return this.collisionGroups[re]}}function Lo(be,re,he,fe,_e){const{horizontalAlign:we,verticalAlign:Me}=oe.aH(be);return new oe.P(-(we-.5)*re+fe[0]*_e,-(Me-.5)*he+fe[1]*_e)}class eo{constructor(re,he,fe,_e,we){this.transform=re.clone(),this.terrain=he,this.collisionIndex=new En(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=fe,this.retainedQueryData={},this.collisionGroups=new qn(_e),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=we,we&&(we.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(re){const he=this.terrain;return he?(fe,_e)=>he.getElevation(re,fe,_e):null}getBucketParts(re,he,fe,_e){const we=fe.getBucket(he),Me=fe.latestFeatureIndex;if(!we||!Me||he.id!==we.layerIds[0])return;const Fe=fe.collisionBoxArray,Be=we.layers[0].layout,$e=we.layers[0].paint,We=Math.pow(2,this.transform.zoom-fe.tileID.overscaledZ),Je=fe.tileSize/oe.$,Xe=fe.tileID.toUnwrapped(),st=Be.get("text-rotation-alignment")==="map",ht=oe.aC(fe,1,this.transform.zoom),vt=oe.aD(this.collisionIndex.transform,fe,$e.get("text-translate"),$e.get("text-translate-anchor")),bt=oe.aD(this.collisionIndex.transform,fe,$e.get("icon-translate"),$e.get("icon-translate-anchor")),xt=hr(st,this.transform,ht);this.retainedQueryData[we.bucketInstanceId]=new Pi(we.bucketInstanceId,Me,we.sourceLayerIndex,we.index,fe.tileID);const Ct={bucket:we,layout:Be,translationText:vt,translationIcon:bt,unwrappedTileID:Xe,pitchedLabelPlaneMatrix:xt,scale:We,textPixelRatio:Je,holdingForFade:fe.holdingForSymbolFade(),collisionBoxArray:Fe,partiallyEvaluatedTextSize:oe.an(we.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(we.sourceID)};if(_e)for(const kt of we.sortKeyRanges){const{sortKey:Tt,symbolInstanceStart:Lt,symbolInstanceEnd:Rt}=kt;re.push({sortKey:Tt,symbolInstanceStart:Lt,symbolInstanceEnd:Rt,parameters:Ct})}else re.push({symbolInstanceStart:0,symbolInstanceEnd:we.symbolInstances.length,parameters:Ct})}attemptAnchorPlacement(re,he,fe,_e,we,Me,Fe,Be,$e,We,Je,Xe,st,ht,vt,bt,xt,Ct,kt,Tt){const Lt=oe.aE[re.textAnchor],Rt=[re.textOffset0,re.textOffset1],Pt=Lo(Lt,fe,_e,Rt,we),Nt=this.collisionIndex.placeCollisionBox(he,Xe,Be,$e,We,Fe,Me,bt,Je.predicate,kt,Pt,Tt);if((!Ct||this.collisionIndex.placeCollisionBox(Ct,Xe,Be,$e,We,Fe,Me,xt,Je.predicate,kt,Pt,Tt).placeable)&&Nt.placeable){let Yt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[st.crossTileID]&&this.prevPlacement.placements[st.crossTileID]&&this.prevPlacement.placements[st.crossTileID].text&&(Yt=this.prevPlacement.variableOffsets[st.crossTileID].anchor),st.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[st.crossTileID]={textOffset:Rt,width:fe,height:_e,anchor:Lt,textBoxScale:we,prevAnchor:Yt},this.markUsedJustification(ht,Lt,st,vt),ht.allowVerticalPlacement&&(this.markUsedOrientation(ht,vt,st),this.placedOrientations[st.crossTileID]=vt),{shift:Pt,placedGlyphBoxes:Nt}}}placeLayerBucketPart(re,he,fe){const{bucket:_e,layout:we,translationText:Me,translationIcon:Fe,unwrappedTileID:Be,pitchedLabelPlaneMatrix:$e,textPixelRatio:We,holdingForFade:Je,collisionBoxArray:Xe,partiallyEvaluatedTextSize:st,collisionGroup:ht}=re.parameters,vt=we.get("text-optional"),bt=we.get("icon-optional"),xt=oe.aF(we,"text-overlap","text-allow-overlap"),Ct=xt==="always",kt=oe.aF(we,"icon-overlap","icon-allow-overlap"),Tt=kt==="always",Lt=we.get("text-rotation-alignment")==="map",Rt=we.get("text-pitch-alignment")==="map",Pt=we.get("icon-text-fit")!=="none",Nt=we.get("symbol-z-order")==="viewport-y",Yt=Ct&&(Tt||!_e.hasIconData()||bt),Wt=Tt&&(Ct||!_e.hasTextData()||vt);!_e.collisionArrays&&Xe&&_e.deserializeCollisionBoxes(Xe);const Ut=this.retainedQueryData[_e.bucketInstanceId].tileID,Kt=this._getTerrainElevationFunc(Ut),br=this.transform.getFastPathSimpleProjectionMatrix(Ut),xr=(_r,Br,ti)=>{var Ti,Oi;if(he[_r.crossTileID])return;if(Je)return void(this.placements[_r.crossTileID]=new Yi(!1,!1,!1));let Fi=!1,di=!1,zi=!0,cn=null,Ui={box:null,placeable:!1,offscreen:null,occluded:!1},pn={placeable:!1},Qi=null,tn=null,fn=null,Ms=0,As=0,Xs=0;Br.textFeatureIndex?Ms=Br.textFeatureIndex:_r.useRuntimeCollisionCircles&&(Ms=_r.featureIndex),Br.verticalTextFeatureIndex&&(As=Br.verticalTextFeatureIndex);const ks=Br.textBox;if(ks){const Dn=nn=>{let mn=oe.ao.horizontal;if(_e.allowVerticalPlacement&&!nn&&this.prevPlacement){const Nn=this.prevPlacement.placedOrientations[_r.crossTileID];Nn&&(this.placedOrientations[_r.crossTileID]=Nn,mn=Nn,this.markUsedOrientation(_e,mn,_r))}return mn},kn=(nn,mn)=>{if(_e.allowVerticalPlacement&&_r.numVerticalGlyphVertices>0&&Br.verticalTextBox){for(const Nn of _e.writingModes)if(Nn===oe.ao.vertical?(Ui=mn(),pn=Ui):Ui=nn(),Ui&&Ui.placeable)break}else Ui=nn()},ps=_r.textAnchorOffsetStartIndex,Eo=_r.textAnchorOffsetEndIndex;if(Eo===ps){const nn=(mn,Nn)=>{const en=this.collisionIndex.placeCollisionBox(mn,xt,We,Ut,Be,Rt,Lt,Me,ht.predicate,Kt,void 0,br);return en&&en.placeable&&(this.markUsedOrientation(_e,Nn,_r),this.placedOrientations[_r.crossTileID]=Nn),en};kn(()=>nn(ks,oe.ao.horizontal),()=>{const mn=Br.verticalTextBox;return _e.allowVerticalPlacement&&_r.numVerticalGlyphVertices>0&&mn?nn(mn,oe.ao.vertical):{box:null,offscreen:null}}),Dn(Ui&&Ui.placeable)}else{let nn=oe.aE[(Oi=(Ti=this.prevPlacement)===null||Ti===void 0?void 0:Ti.variableOffsets[_r.crossTileID])===null||Oi===void 0?void 0:Oi.anchor];const mn=(en,Ks,ys)=>{const ts=en.x2-en.x1,Ls=en.y2-en.y1,wh=_r.textBoxScale,Sh=Pt&&kt==="never"?Ks:null;let zs=null,Rs=xt==="never"?1:2,Th="never";nn&&Rs++;for(let tc=0;tc<Rs;tc++){for(let Jo=ps;Jo<Eo;Jo++){const rc=_e.textAnchorOffsets.get(Jo);if(nn&&rc.textAnchor!==nn)continue;const vs=this.attemptAnchorPlacement(rc,en,ts,Ls,wh,Lt,Rt,We,Ut,Be,ht,Th,_r,_e,ys,Me,Fe,Sh,Kt);if(vs&&(zs=vs.placedGlyphBoxes,zs&&zs.placeable))return Fi=!0,cn=vs.shift,zs}nn?nn=null:Th=xt}return fe&&!zs&&(zs={box:this.collisionIndex.placeCollisionBox(ks,"always",We,Ut,Be,Rt,Lt,Me,ht.predicate,Kt,void 0,br).box,offscreen:!1,placeable:!1,occluded:!1}),zs};kn(()=>mn(ks,Br.iconBox,oe.ao.horizontal),()=>{const en=Br.verticalTextBox;return _e.allowVerticalPlacement&&(!Ui||!Ui.placeable)&&_r.numVerticalGlyphVertices>0&&en?mn(en,Br.verticalIconBox,oe.ao.vertical):{box:null,occluded:!0,offscreen:null}}),Ui&&(Fi=Ui.placeable,zi=Ui.offscreen);const Nn=Dn(Ui&&Ui.placeable);if(!Fi&&this.prevPlacement){const en=this.prevPlacement.variableOffsets[_r.crossTileID];en&&(this.variableOffsets[_r.crossTileID]=en,this.markUsedJustification(_e,en.anchor,_r,Nn))}}}if(Qi=Ui,Fi=Qi&&Qi.placeable,zi=Qi&&Qi.offscreen,_r.useRuntimeCollisionCircles&&_r.centerJustifiedTextSymbolIndex>=0){const Dn=_e.text.placedSymbolArray.get(_r.centerJustifiedTextSymbolIndex),kn=oe.ap(_e.textSizeData,st,Dn),ps=we.get("text-padding");tn=this.collisionIndex.placeCollisionCircles(xt,Dn,_e.lineVertexArray,_e.glyphOffsetArray,kn,Be,$e,fe,Rt,ht.predicate,_r.collisionCircleDiameter,ps,Me,Kt),tn.circles.length&&tn.collisionDetected&&!fe&&oe.w("Collisions detected, but collision boxes are not shown"),Fi=Ct||tn.circles.length>0&&!tn.collisionDetected,zi=zi&&tn.offscreen}if(Br.iconFeatureIndex&&(Xs=Br.iconFeatureIndex),Br.iconBox){const Dn=kn=>this.collisionIndex.placeCollisionBox(kn,kt,We,Ut,Be,Rt,Lt,Fe,ht.predicate,Kt,Pt&&cn?cn:void 0,br);pn&&pn.placeable&&Br.verticalIconBox?(fn=Dn(Br.verticalIconBox),di=fn.placeable):(fn=Dn(Br.iconBox),di=fn.placeable),zi=zi&&fn.offscreen}const Ys=vt||_r.numHorizontalGlyphVertices===0&&_r.numVerticalGlyphVertices===0,Ko=bt||_r.numIconVertices===0;Ys||Ko?Ko?Ys||(di=di&&Fi):Fi=di&&Fi:di=Fi=di&&Fi;const Is=di&&fn.placeable;if(Fi&&Qi.placeable&&this.collisionIndex.insertCollisionBox(Qi.box,xt,we.get("text-ignore-placement"),_e.bucketInstanceId,pn&&pn.placeable&&As?As:Ms,ht.ID),Is&&this.collisionIndex.insertCollisionBox(fn.box,kt,we.get("icon-ignore-placement"),_e.bucketInstanceId,Xs,ht.ID),tn&&Fi&&this.collisionIndex.insertCollisionCircles(tn.circles,xt,we.get("text-ignore-placement"),_e.bucketInstanceId,Ms,ht.ID),fe&&this.storeCollisionData(_e.bucketInstanceId,ti,Br,Qi,fn,tn),_r.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(_e.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[_r.crossTileID]=new Yi((Fi||Yt)&&!(Qi!=null&&Qi.occluded),(di||Wt)&&!(fn!=null&&fn.occluded),zi||_e.justReloaded),he[_r.crossTileID]=!0};if(Nt){if(re.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const _r=_e.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Br=_r.length-1;Br>=0;--Br){const ti=_r[Br];xr(_e.symbolInstances.get(ti),_e.collisionArrays[ti],ti)}}else for(let _r=re.symbolInstanceStart;_r<re.symbolInstanceEnd;_r++)xr(_e.symbolInstances.get(_r),_e.collisionArrays[_r],_r);_e.justReloaded=!1}storeCollisionData(re,he,fe,_e,we,Me){if(fe.textBox||fe.iconBox){let Fe,Be;this.collisionBoxArrays.has(re)?Fe=this.collisionBoxArrays.get(re):(Fe=new Map,this.collisionBoxArrays.set(re,Fe)),Fe.has(he)?Be=Fe.get(he):(Be={text:null,icon:null},Fe.set(he,Be)),fe.textBox&&(Be.text=_e.box),fe.iconBox&&(Be.icon=we.box)}if(Me){let Fe=this.collisionCircleArrays[re];Fe===void 0&&(Fe=this.collisionCircleArrays[re]=[]);for(let Be=0;Be<Me.circles.length;Be+=4)Fe.push(Me.circles[Be+0]-Qr),Fe.push(Me.circles[Be+1]-Qr),Fe.push(Me.circles[Be+2]),Fe.push(Me.collisionDetected?1:0)}}markUsedJustification(re,he,fe,_e){let we;we=_e===oe.ao.vertical?fe.verticalPlacedTextSymbolIndex:{left:fe.leftJustifiedTextSymbolIndex,center:fe.centerJustifiedTextSymbolIndex,right:fe.rightJustifiedTextSymbolIndex}[oe.aG(he)];const Me=[fe.leftJustifiedTextSymbolIndex,fe.centerJustifiedTextSymbolIndex,fe.rightJustifiedTextSymbolIndex,fe.verticalPlacedTextSymbolIndex];for(const Fe of Me)Fe>=0&&(re.text.placedSymbolArray.get(Fe).crossTileID=we>=0&&Fe!==we?0:fe.crossTileID)}markUsedOrientation(re,he,fe){const _e=he===oe.ao.horizontal||he===oe.ao.horizontalOnly?he:0,we=he===oe.ao.vertical?he:0,Me=[fe.leftJustifiedTextSymbolIndex,fe.centerJustifiedTextSymbolIndex,fe.rightJustifiedTextSymbolIndex];for(const Fe of Me)re.text.placedSymbolArray.get(Fe).placedOrientation=_e;fe.verticalPlacedTextSymbolIndex&&(re.text.placedSymbolArray.get(fe.verticalPlacedTextSymbolIndex).placedOrientation=we)}commit(re){this.commitTime=re,this.zoomAtLastRecencyCheck=this.transform.zoom;const he=this.prevPlacement;let fe=!1;this.prevZoomAdjustment=he?he.zoomAdjustment(this.transform.zoom):0;const _e=he?he.symbolFadeChange(re):1,we=he?he.opacities:{},Me=he?he.variableOffsets:{},Fe=he?he.placedOrientations:{};for(const Be in this.placements){const $e=this.placements[Be],We=we[Be];We?(this.opacities[Be]=new ji(We,_e,$e.text,$e.icon),fe=fe||$e.text!==We.text.placed||$e.icon!==We.icon.placed):(this.opacities[Be]=new ji(null,_e,$e.text,$e.icon,$e.skipFade),fe=fe||$e.text||$e.icon)}for(const Be in we){const $e=we[Be];if(!this.opacities[Be]){const We=new ji($e,_e,!1,!1);We.isHidden()||(this.opacities[Be]=We,fe=fe||$e.text.placed||$e.icon.placed)}}for(const Be in Me)this.variableOffsets[Be]||!this.opacities[Be]||this.opacities[Be].isHidden()||(this.variableOffsets[Be]=Me[Be]);for(const Be in Fe)this.placedOrientations[Be]||!this.opacities[Be]||this.opacities[Be].isHidden()||(this.placedOrientations[Be]=Fe[Be]);if(he&&he.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");fe?this.lastPlacementChangeTime=re:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=he?he.lastPlacementChangeTime:re)}updateLayerOpacities(re,he){const fe={};for(const _e of he){const we=_e.getBucket(re);we&&_e.latestFeatureIndex&&re.id===we.layerIds[0]&&this.updateBucketOpacities(we,_e.tileID,fe,_e.collisionBoxArray)}}updateBucketOpacities(re,he,fe,_e){re.hasTextData()&&(re.text.opacityVertexArray.clear(),re.text.hasVisibleVertices=!1),re.hasIconData()&&(re.icon.opacityVertexArray.clear(),re.icon.hasVisibleVertices=!1),re.hasIconCollisionBoxData()&&re.iconCollisionBox.collisionVertexArray.clear(),re.hasTextCollisionBoxData()&&re.textCollisionBox.collisionVertexArray.clear();const we=re.layers[0],Me=we.layout,Fe=new ji(null,0,!1,!1,!0),Be=Me.get("text-allow-overlap"),$e=Me.get("icon-allow-overlap"),We=we._unevaluatedLayout.hasValue("text-variable-anchor")||we._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Je=Me.get("text-rotation-alignment")==="map",Xe=Me.get("text-pitch-alignment")==="map",st=Me.get("icon-text-fit")!=="none",ht=new ji(null,0,Be&&($e||!re.hasIconData()||Me.get("icon-optional")),$e&&(Be||!re.hasTextData()||Me.get("text-optional")),!0);!re.collisionArrays&&_e&&(re.hasIconCollisionBoxData()||re.hasTextCollisionBoxData())&&re.deserializeCollisionBoxes(_e);const vt=(xt,Ct,kt)=>{for(let Tt=0;Tt<Ct/4;Tt++)xt.opacityVertexArray.emplaceBack(kt);xt.hasVisibleVertices=xt.hasVisibleVertices||kt!==to},bt=this.collisionBoxArrays.get(re.bucketInstanceId);for(let xt=0;xt<re.symbolInstances.length;xt++){const Ct=re.symbolInstances.get(xt),{numHorizontalGlyphVertices:kt,numVerticalGlyphVertices:Tt,crossTileID:Lt}=Ct;let Rt=this.opacities[Lt];fe[Lt]?Rt=Fe:Rt||(Rt=ht,this.opacities[Lt]=Rt),fe[Lt]=!0;const Pt=Ct.numIconVertices>0,Nt=this.placedOrientations[Ct.crossTileID],Yt=Nt===oe.ao.vertical,Wt=Nt===oe.ao.horizontal||Nt===oe.ao.horizontalOnly;if(kt>0||Tt>0){const Kt=oa(Rt.text);vt(re.text,kt,Yt?to:Kt),vt(re.text,Tt,Wt?to:Kt);const br=Rt.text.isHidden();[Ct.rightJustifiedTextSymbolIndex,Ct.centerJustifiedTextSymbolIndex,Ct.leftJustifiedTextSymbolIndex].forEach(Br=>{Br>=0&&(re.text.placedSymbolArray.get(Br).hidden=br||Yt?1:0)}),Ct.verticalPlacedTextSymbolIndex>=0&&(re.text.placedSymbolArray.get(Ct.verticalPlacedTextSymbolIndex).hidden=br||Wt?1:0);const xr=this.variableOffsets[Ct.crossTileID];xr&&this.markUsedJustification(re,xr.anchor,Ct,Nt);const _r=this.placedOrientations[Ct.crossTileID];_r&&(this.markUsedJustification(re,"left",Ct,_r),this.markUsedOrientation(re,_r,Ct))}if(Pt){const Kt=oa(Rt.icon),br=!(st&&Ct.verticalPlacedIconSymbolIndex&&Yt);Ct.placedIconSymbolIndex>=0&&(vt(re.icon,Ct.numIconVertices,br?Kt:to),re.icon.placedSymbolArray.get(Ct.placedIconSymbolIndex).hidden=Rt.icon.isHidden()),Ct.verticalPlacedIconSymbolIndex>=0&&(vt(re.icon,Ct.numVerticalIconVertices,br?to:Kt),re.icon.placedSymbolArray.get(Ct.verticalPlacedIconSymbolIndex).hidden=Rt.icon.isHidden())}const Ut=bt&&bt.has(xt)?bt.get(xt):{text:null,icon:null};if(re.hasIconCollisionBoxData()||re.hasTextCollisionBoxData()){const Kt=re.collisionArrays[xt];if(Kt){let br=new oe.P(0,0);if(Kt.textBox||Kt.verticalTextBox){let xr=!0;if(We){const _r=this.variableOffsets[Lt];_r?(br=Lo(_r.anchor,_r.width,_r.height,_r.textOffset,_r.textBoxScale),Je&&br._rotate(Xe?-this.transform.bearingInRadians:this.transform.bearingInRadians)):xr=!1}if(Kt.textBox||Kt.verticalTextBox){let _r;Kt.textBox&&(_r=Yt),Kt.verticalTextBox&&(_r=Wt),Ds(re.textCollisionBox.collisionVertexArray,Rt.text.placed,!xr||_r,Ut.text,br.x,br.y)}}if(Kt.iconBox||Kt.verticalIconBox){const xr=Boolean(!Wt&&Kt.verticalIconBox);let _r;Kt.iconBox&&(_r=xr),Kt.verticalIconBox&&(_r=!xr),Ds(re.iconCollisionBox.collisionVertexArray,Rt.icon.placed,_r,Ut.icon,st?br.x:0,st?br.y:0)}}}}if(re.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[re.bucketInstanceId]&&(this.retainedQueryData[re.bucketInstanceId].featureSortOrder=re.featureSortOrder),re.hasTextData()&&re.text.opacityVertexBuffer&&re.text.opacityVertexBuffer.updateData(re.text.opacityVertexArray),re.hasIconData()&&re.icon.opacityVertexBuffer&&re.icon.opacityVertexBuffer.updateData(re.icon.opacityVertexArray),re.hasIconCollisionBoxData()&&re.iconCollisionBox.collisionVertexBuffer&&re.iconCollisionBox.collisionVertexBuffer.updateData(re.iconCollisionBox.collisionVertexArray),re.hasTextCollisionBoxData()&&re.textCollisionBox.collisionVertexBuffer&&re.textCollisionBox.collisionVertexBuffer.updateData(re.textCollisionBox.collisionVertexArray),re.text.opacityVertexArray.length!==re.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${re.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${re.text.layoutVertexArray.length}) / 4`);if(re.icon.opacityVertexArray.length!==re.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${re.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${re.icon.layoutVertexArray.length}) / 4`);re.bucketInstanceId in this.collisionCircleArrays&&(re.collisionCircleArray=this.collisionCircleArrays[re.bucketInstanceId],delete this.collisionCircleArrays[re.bucketInstanceId])}symbolFadeChange(re){return this.fadeDuration===0?1:(re-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(re){return Math.max(0,(this.transform.zoom-re)/1.5)}hasTransitions(re){return this.stale||re-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(re,he){const fe=this.zoomAtLastRecencyCheck===he?1-this.zoomAdjustment(he):1;return this.zoomAtLastRecencyCheck=he,this.commitTime+this.fadeDuration*fe>re}setStale(){this.stale=!0}}function Ds(be,re,he,fe,_e,we){fe&&fe.length!==0||(fe=[0,0,0,0]);const Me=fe[0]-Qr,Fe=fe[1]-Qr,Be=fe[2]-Qr,$e=fe[3]-Qr;be.emplaceBack(re?1:0,he?1:0,_e||0,we||0,Me,Fe),be.emplaceBack(re?1:0,he?1:0,_e||0,we||0,Be,Fe),be.emplaceBack(re?1:0,he?1:0,_e||0,we||0,Be,$e),be.emplaceBack(re?1:0,he?1:0,_e||0,we||0,Me,$e)}const yc=Math.pow(2,25),jh=Math.pow(2,24),Wh=Math.pow(2,17),Gh=Math.pow(2,16),vc=Math.pow(2,9),bc=Math.pow(2,8),pl=Math.pow(2,1);function oa(be){if(be.opacity===0&&!be.placed)return 0;if(be.opacity===1&&be.placed)return 4294967295;const re=be.placed?1:0,he=Math.floor(127*be.opacity);return he*yc+re*jh+he*Wh+re*Gh+he*vc+re*bc+he*pl+re}const to=0;class fl{constructor(re){this._sortAcrossTiles=re.layout.get("symbol-z-order")!=="viewport-y"&&!re.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(re,he,fe,_e,we){const Me=this._bucketParts;for(;this._currentTileIndex<re.length;)if(he.getBucketParts(Me,_e,re[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,we())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Me.sort((Fe,Be)=>Fe.sortKey-Be.sortKey));this._currentPartIndex<Me.length;)if(he.placeLayerBucketPart(Me[this._currentPartIndex],this._seenCrossTileIDs,fe),this._currentPartIndex++,we())return!0;return!1}}class ml{constructor(re,he,fe,_e,we,Me,Fe,Be){this.placement=new eo(re,he,Me,Fe,Be),this._currentPlacementIndex=fe.length-1,this._forceFullPlacement=_e,this._showCollisionBoxes=we,this._done=!1}isDone(){return this._done}continuePlacement(re,he,fe){const _e=Ae(),we=()=>!this._forceFullPlacement&&Ae()-_e>2;for(;this._currentPlacementIndex>=0;){const Me=he[re[this._currentPlacementIndex]],Fe=this.placement.collisionIndex.transform.zoom;if(Me.type==="symbol"&&(!Me.minzoom||Me.minzoom<=Fe)&&(!Me.maxzoom||Me.maxzoom>Fe)){if(this._inProgressLayer||(this._inProgressLayer=new fl(Me)),this._inProgressLayer.continuePlacement(fe[Me.source],this.placement,this._showCollisionBoxes,Me,we))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(re){return this.placement.commit(re),this.placement}}const zo=512/oe.$/2;class Ro{constructor(re,he,fe){this.tileID=re,this.bucketInstanceId=fe,this._symbolsByKey={};const _e=new Map;for(let we=0;we<he.length;we++){const Me=he.get(we),Fe=Me.key,Be=_e.get(Fe);Be?Be.push(Me):_e.set(Fe,[Me])}for(const[we,Me]of _e){const Fe={positions:Me.map(Be=>({x:Math.floor(Be.anchorX*zo),y:Math.floor(Be.anchorY*zo)})),crossTileIDs:Me.map(Be=>Be.crossTileID)};if(Fe.positions.length>128){const Be=new oe.aI(Fe.positions.length,16,Uint16Array);for(const{x:$e,y:We}of Fe.positions)Be.add($e,We);Be.finish(),delete Fe.positions,Fe.index=Be}this._symbolsByKey[we]=Fe}}getScaledCoordinates(re,he){const{x:fe,y:_e,z:we}=this.tileID.canonical,{x:Me,y:Fe,z:Be}=he.canonical,$e=zo/Math.pow(2,Be-we),We=(Fe*oe.$+re.anchorY)*$e,Je=_e*oe.$*zo;return{x:Math.floor((Me*oe.$+re.anchorX)*$e-fe*oe.$*zo),y:Math.floor(We-Je)}}findMatches(re,he,fe){const _e=this.tileID.canonical.z<he.canonical.z?1:Math.pow(2,this.tileID.canonical.z-he.canonical.z);for(let we=0;we<re.length;we++){const Me=re.get(we);if(Me.crossTileID)continue;const Fe=this._symbolsByKey[Me.key];if(!Fe)continue;const Be=this.getScaledCoordinates(Me,he);if(Fe.index){const $e=Fe.index.range(Be.x-_e,Be.y-_e,Be.x+_e,Be.y+_e).sort();for(const We of $e){const Je=Fe.crossTileIDs[We];if(!fe[Je]){fe[Je]=!0,Me.crossTileID=Je;break}}}else if(Fe.positions)for(let $e=0;$e<Fe.positions.length;$e++){const We=Fe.positions[$e],Je=Fe.crossTileIDs[$e];if(Math.abs(We.x-Be.x)<=_e&&Math.abs(We.y-Be.y)<=_e&&!fe[Je]){fe[Je]=!0,Me.crossTileID=Je;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:re})=>re)}}class aa{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class xc{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(re){const he=Math.round((re-this.lng)/360);if(he!==0)for(const fe in this.indexes){const _e=this.indexes[fe],we={};for(const Me in _e){const Fe=_e[Me];Fe.tileID=Fe.tileID.unwrapTo(Fe.tileID.wrap+he),we[Fe.tileID.key]=Fe}this.indexes[fe]=we}this.lng=re}addBucket(re,he,fe){if(this.indexes[re.overscaledZ]&&this.indexes[re.overscaledZ][re.key]){if(this.indexes[re.overscaledZ][re.key].bucketInstanceId===he.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(re.overscaledZ,this.indexes[re.overscaledZ][re.key])}for(let we=0;we<he.symbolInstances.length;we++)he.symbolInstances.get(we).crossTileID=0;this.usedCrossTileIDs[re.overscaledZ]||(this.usedCrossTileIDs[re.overscaledZ]={});const _e=this.usedCrossTileIDs[re.overscaledZ];for(const we in this.indexes){const Me=this.indexes[we];if(Number(we)>re.overscaledZ)for(const Fe in Me){const Be=Me[Fe];Be.tileID.isChildOf(re)&&Be.findMatches(he.symbolInstances,re,_e)}else{const Fe=Me[re.scaledTo(Number(we)).key];Fe&&Fe.findMatches(he.symbolInstances,re,_e)}}for(let we=0;we<he.symbolInstances.length;we++){const Me=he.symbolInstances.get(we);Me.crossTileID||(Me.crossTileID=fe.generate(),_e[Me.crossTileID]=!0)}return this.indexes[re.overscaledZ]===void 0&&(this.indexes[re.overscaledZ]={}),this.indexes[re.overscaledZ][re.key]=new Ro(re,he.symbolInstances,he.bucketInstanceId),!0}removeBucketCrossTileIDs(re,he){for(const fe of he.getCrossTileIDsLists())for(const _e of fe)delete this.usedCrossTileIDs[re][_e]}removeStaleBuckets(re){let he=!1;for(const fe in this.indexes){const _e=this.indexes[fe];for(const we in _e)re[_e[we].bucketInstanceId]||(this.removeBucketCrossTileIDs(fe,_e[we]),delete _e[we],he=!0)}return he}}class Bs{constructor(){this.layerIndexes={},this.crossTileIDs=new aa,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(re,he,fe){let _e=this.layerIndexes[re.id];_e===void 0&&(_e=this.layerIndexes[re.id]=new xc);let we=!1;const Me={};_e.handleWrapJump(fe);for(const Fe of he){const Be=Fe.getBucket(re);Be&&re.id===Be.layerIds[0]&&(Be.bucketInstanceId||(Be.bucketInstanceId=++this.maxBucketInstanceId),_e.addBucket(Fe.tileID,Be,this.crossTileIDs)&&(we=!0),Me[Be.bucketInstanceId]=!0)}return _e.removeStaleBuckets(Me)&&(we=!0),we}pruneUnusedLayers(re){const he={};re.forEach(fe=>{he[fe]=!0});for(const fe in this.layerIndexes)he[fe]||delete this.layerIndexes[fe]}}var gl="void main() {fragColor=vec4(1.0);}";const os={prelude:ui(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:ui("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:ui("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:ui(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:ui(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:ui(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:ui(gl,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:ui(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:ui(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:ui("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:ui("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:ui(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:ui("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:ui(gl,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:ui(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:ui(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:ui(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:ui(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:ui(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:ui(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:ui(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ui(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:ui(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:ui(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:ui(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:ui(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0/u_device_pixel_ratio)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:ui(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:ui(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:ui(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:ui(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:ui(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:ui("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:ui("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:ui("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:ui("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:ui(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:ui("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function ui(be,re){const he=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,fe=re.match(/in ([\w]+) ([\w]+)/g),_e=be.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),we=re.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),Me=we?we.concat(_e):_e,Fe={};return{fragmentSource:be=be.replace(he,(Be,$e,We,Je,Xe)=>(Fe[Xe]=!0,$e==="define"?`
#ifndef HAS_UNIFORM_u_${Xe}
in ${We} ${Je} ${Xe};
#else
uniform ${We} ${Je} u_${Xe};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Xe}
    ${We} ${Je} ${Xe} = u_${Xe};
#endif
`)),vertexSource:re=re.replace(he,(Be,$e,We,Je,Xe)=>{const st=Je==="float"?"vec2":"vec4",ht=Xe.match(/color/)?"color":st;return Fe[Xe]?$e==="define"?`
#ifndef HAS_UNIFORM_u_${Xe}
uniform lowp float u_${Xe}_t;
in ${We} ${st} a_${Xe};
out ${We} ${Je} ${Xe};
#else
uniform ${We} ${Je} u_${Xe};
#endif
`:ht==="vec4"?`
#ifndef HAS_UNIFORM_u_${Xe}
    ${Xe} = a_${Xe};
#else
    ${We} ${Je} ${Xe} = u_${Xe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Xe}
    ${Xe} = unpack_mix_${ht}(a_${Xe}, u_${Xe}_t);
#else
    ${We} ${Je} ${Xe} = u_${Xe};
#endif
`:$e==="define"?`
#ifndef HAS_UNIFORM_u_${Xe}
uniform lowp float u_${Xe}_t;
in ${We} ${st} a_${Xe};
#else
uniform ${We} ${Je} u_${Xe};
#endif
`:ht==="vec4"?`
#ifndef HAS_UNIFORM_u_${Xe}
    ${We} ${Je} ${Xe} = a_${Xe};
#else
    ${We} ${Je} ${Xe} = u_${Xe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Xe}
    ${We} ${Je} ${Xe} = unpack_mix_${ht}(a_${Xe}, u_${Xe}_t);
#else
    ${We} ${Je} ${Xe} = u_${Xe};
#endif
`}),staticAttributes:fe,staticUniforms:Me}}class Yn{constructor(re,he,fe){this.vertexBuffer=re,this.indexBuffer=he,this.segments=fe}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var ai=oe.aJ([{name:"a_pos",type:"Int16",components:2}]);const la="#define PROJECTION_MERCATOR",wc="mercator";class Fo{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return wc}get shaderDefine(){return la}get shaderPreludeCode(){return os.projectionMercator}get vertexShaderPreludeCode(){return os.projectionMercator.vertexSource}get subdivisionGranularity(){return oe.aK.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(re){}getMeshFromTileID(re,he,fe,_e,we){if(this._cachedMesh)return this._cachedMesh;const Me=new oe.aL;Me.emplaceBack(0,0),Me.emplaceBack(oe.$,0),Me.emplaceBack(0,oe.$),Me.emplaceBack(oe.$,oe.$);const Fe=re.createVertexBuffer(Me,ai.members),Be=oe.aM.simpleSegment(0,0,4,2),$e=new oe.aN;$e.emplaceBack(1,0,2),$e.emplaceBack(1,2,3);const We=re.createIndexBuffer($e);return this._cachedMesh=new Yn(Fe,We,Be),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(re){}}class xn{constructor(re=0,he=0,fe=0,_e=0){if(isNaN(re)||re<0||isNaN(he)||he<0||isNaN(fe)||fe<0||isNaN(_e)||_e<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=re,this.bottom=he,this.left=fe,this.right=_e}interpolate(re,he,fe){return he.top!=null&&re.top!=null&&(this.top=oe.C.number(re.top,he.top,fe)),he.bottom!=null&&re.bottom!=null&&(this.bottom=oe.C.number(re.bottom,he.bottom,fe)),he.left!=null&&re.left!=null&&(this.left=oe.C.number(re.left,he.left,fe)),he.right!=null&&re.right!=null&&(this.right=oe.C.number(re.right,he.right,fe)),this}getCenter(re,he){const fe=oe.ae((this.left+re-this.right)/2,0,re),_e=oe.ae((this.top+he-this.bottom)/2,0,he);return new oe.P(fe,_e)}equals(re){return this.top===re.top&&this.bottom===re.bottom&&this.left===re.left&&this.right===re.right}clone(){return new xn(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function dn(be,re){if(!be.renderWorldCopies||be.lngRange)return;const he=re.lng-be.center.lng;re.lng+=he>180?-360:he<-180?360:0}function Mn(be){return Math.max(0,Math.floor(be))}class on{constructor(re,he){var fe;this._callbacks=re,this._tileSize=512,this._renderWorldCopies=(he==null?void 0:he.renderWorldCopies)===void 0||!!(he!=null&&he.renderWorldCopies),this._minZoom=(he==null?void 0:he.minZoom)||0,this._maxZoom=(he==null?void 0:he.maxZoom)||22,this._minPitch=(he==null?void 0:he.minPitch)==null?0:he==null?void 0:he.minPitch,this._maxPitch=(he==null?void 0:he.maxPitch)==null?60:he==null?void 0:he.maxPitch,this._constrain=(fe=he==null?void 0:he.constrain)!==null&&fe!==void 0?fe:this._callbacks.constrain,this.setMaxBounds(),this._width=0,this._height=0,this._center=new oe.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Mn(this._zoom),this._scale=oe.ah(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new xn,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(re,he,fe){this._latRange=re.latRange,this._lngRange=re.lngRange,this._width=re.width,this._height=re.height,this._center=re.center,this._elevation=re.elevation,this._minElevationForCurrentTile=re.minElevationForCurrentTile,this._zoom=re.zoom,this._tileZoom=Mn(this._zoom),this._scale=oe.ah(this._zoom),this._bearingInRadians=re.bearingInRadians,this._fovInRadians=re.fovInRadians,this._pitchInRadians=re.pitchInRadians,this._rollInRadians=re.rollInRadians,this._unmodified=re.unmodified,this._edgeInsets=new xn(re.padding.top,re.padding.bottom,re.padding.left,re.padding.right),this._minZoom=re.minZoom,this._maxZoom=re.maxZoom,this._minPitch=re.minPitch,this._maxPitch=re.maxPitch,this._renderWorldCopies=re.renderWorldCopies,this._cameraToCenterDistance=re.cameraToCenterDistance,this._nearZ=re.nearZ,this._farZ=re.farZ,this._autoCalculateNearFarZ=!fe&&re.autoCalculateNearFarZ,he&&this.constrainInternal(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(re){this._minElevationForCurrentTile=re}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(re){this._minZoom!==re&&(this._minZoom=re,this.setZoom(this.constrain(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(re){this._maxZoom!==re&&(this._maxZoom=re,this.setZoom(this.constrain(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(re){this._minPitch!==re&&(this._minPitch=re,this.setPitch(Math.max(this.pitch,re)))}get maxPitch(){return this._maxPitch}setMaxPitch(re){this._maxPitch!==re&&(this._maxPitch=re,this.setPitch(Math.min(this.pitch,re)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(re){re===void 0?re=!0:re===null&&(re=!1),this._renderWorldCopies=re}get constrain(){return this._constrain}setConstrain(re){re||(re=this._callbacks.constrain),this._constrain=re,this.constrainInternal(),this._calcMatrices()}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new oe.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(re){const he=oe.aO(re,-180,180)*Math.PI/180;var fe,_e,we,Me,Fe,Be,$e,We,Je;this._bearingInRadians!==he&&(this._unmodified=!1,this._bearingInRadians=he,this._calcMatrices(),this._rotationMatrix=ve(),fe=this._rotationMatrix,we=-this._bearingInRadians,Me=(_e=this._rotationMatrix)[0],Fe=_e[1],Be=_e[2],$e=_e[3],We=Math.sin(we),Je=Math.cos(we),fe[0]=Me*Je+Be*We,fe[1]=Fe*Je+$e*We,fe[2]=Me*-We+Be*Je,fe[3]=Fe*-We+$e*Je)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(re){const he=oe.ae(re,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==he&&(this._unmodified=!1,this._pitchInRadians=he,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(re){const he=re/180*Math.PI;this._rollInRadians!==he&&(this._unmodified=!1,this._rollInRadians=he,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return oe.aP(this._fovInRadians)}setFov(re){re=oe.ae(re,.1,150),this.fov!==re&&(this._unmodified=!1,this._fovInRadians=oe.ag(re),this._calcMatrices())}get zoom(){return this._zoom}setZoom(re){const he=this.constrain(this._center,re).zoom;this._zoom!==he&&(this._unmodified=!1,this._zoom=he,this._tileZoom=Math.max(0,Math.floor(he)),this._scale=oe.ah(he),this.constrainInternal(),this._calcMatrices())}get center(){return this._center}setCenter(re){re.lat===this._center.lat&&re.lng===this._center.lng||(this._unmodified=!1,this._center=re,this.constrainInternal(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(re){re!==this._elevation&&(this._elevation=re,this.constrainInternal(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(re){this._edgeInsets.equals(re)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,re,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(re,he){this._autoCalculateNearFarZ=!1,this._nearZ=re,this._farZ=he,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(re){return this._edgeInsets.equals(re)}interpolatePadding(re,he,fe){this._unmodified=!1,this._edgeInsets.interpolate(re,he,fe),this.constrainInternal(),this._calcMatrices()}resize(re,he,fe=!0){this._width=re,this._height=he,fe&&this.constrainInternal(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new qr([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(re){re?(this._lngRange=[re.getWest(),re.getEast()],this._latRange=[re.getSouth(),re.getNorth()],this.constrainInternal()):(this._lngRange=null,this._latRange=[-oe.af,oe.af])}getCameraQueryGeometry(re,he){if(he.length===1)return[he[0],re];{const{minX:fe,minY:_e,maxX:we,maxY:Me}=oe.a2.fromPoints(he).extend(re);return[new oe.P(fe,_e),new oe.P(we,_e),new oe.P(we,Me),new oe.P(fe,Me),new oe.P(fe,_e)]}}constrainInternal(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const re=this._unmodified,{center:he,zoom:fe}=this.constrain(this.center,this.zoom);this.setCenter(he),this.setZoom(fe),this._unmodified=re,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let re=oe.ai(new Float64Array(16));oe.N(re,re,[this._width/2,-this._height/2,1]),oe.M(re,re,[1,-1,0]),this._clipSpaceToPixelsMatrix=re,re=oe.ai(new Float64Array(16)),oe.N(re,re,[1,-1,1]),oe.M(re,re,[-1,-1,0]),oe.N(re,re,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=re,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(re,he,fe,_e){const we=fe!==void 0?fe:this.bearing,Me=_e=_e!==void 0?_e:this.pitch,Fe=oe.a1.fromLngLat(re,he),Be=-Math.cos(oe.ag(Me)),$e=Math.sin(oe.ag(Me)),We=$e*Math.sin(oe.ag(we)),Je=-$e*Math.cos(oe.ag(we));let Xe=this.elevation;const st=he-Xe;let ht;Be*st>=0||Math.abs(Be)<.1?(ht=1e4,Xe=he+ht*Be):ht=-st/Be;let vt,bt,xt=oe.aQ(1,Fe.y),Ct=0;do{if(Ct+=1,Ct>10)break;bt=ht/xt,vt=new oe.a1(Fe.x+We*bt,Fe.y+Je*bt),xt=1/vt.meterInMercatorCoordinateUnits()}while(Math.abs(ht-bt*xt)>1e-12);return{center:vt.toLngLat(),elevation:Xe,zoom:oe.ak(this.height/2/Math.tan(this.fovInRadians/2)/bt/this.tileSize)}}recalculateZoomAndCenter(re){if(this.elevation-re==0)return;const he=oe.aj(1,this.center.lat)*this.worldSize,fe=this.cameraToCenterDistance/he,_e=oe.a1.fromLngLat(this.center,this.elevation),we=tr(this.center,this.elevation,this.pitch,this.bearing,fe);this._elevation=re;const Me=this.calculateCenterFromCameraLngLatAlt(we.toLngLat(),oe.aQ(we.z,_e.y),this.bearing,this.pitch);this._elevation=Me.elevation,this._center=Me.center,this.setZoom(Me.zoom)}getCameraPoint(){const re=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new oe.P(re*Math.sin(this.rollInRadians),re*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const re=oe.aj(1,this.center.lat)*this.worldSize;return tr(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/re).toLngLat()}getMercatorTileCoordinates(re){if(!re)return[0,0,1,1];const he=re.canonical.z>=0?1<<re.canonical.z:Math.pow(2,re.canonical.z);return[re.canonical.x/he,re.canonical.y/he,1/he/oe.$,1/he/oe.$]}}class Bi{constructor(re,he){this.min=re,this.max=he,this.center=oe.aR([],oe.aS([],this.min,this.max),.5)}quadrant(re){const he=[re%2==0,re<2],fe=oe.aT(this.min),_e=oe.aT(this.max);for(let we=0;we<he.length;we++)fe[we]=he[we]?this.min[we]:this.center[we],_e[we]=he[we]?this.center[we]:this.max[we];return _e[2]=this.max[2],new Bi(fe,_e)}distanceX(re){return Math.max(Math.min(this.max[0],re[0]),this.min[0])-re[0]}distanceY(re){return Math.max(Math.min(this.max[1],re[1]),this.min[1])-re[1]}intersectsFrustum(re){let he=!0;for(let fe=0;fe<re.planes.length;fe++){const _e=this.intersectsPlane(re.planes[fe]);if(_e===0)return 0;_e===1&&(he=!1)}return he?2:re.aabb.min[0]>this.max[0]||re.aabb.min[1]>this.max[1]||re.aabb.min[2]>this.max[2]||re.aabb.max[0]<this.min[0]||re.aabb.max[1]<this.min[1]||re.aabb.max[2]<this.min[2]?0:1}intersectsPlane(re){let he=re[3],fe=re[3];for(let _e=0;_e<3;_e++)re[_e]>0?(he+=re[_e]*this.min[_e],fe+=re[_e]*this.max[_e]):(fe+=re[_e]*this.min[_e],he+=re[_e]*this.max[_e]);return he>=0?2:fe<0?0:1}}class Hh{distanceToTile2d(re,he,fe,_e){const we=_e.distanceX([re,he]),Me=_e.distanceY([re,he]);return Math.hypot(we,Me)}getWrap(re,he,fe){return fe}getTileBoundingVolume(re,he,fe,_e){var we,Me;let Fe=0,Be=0;if(_e!=null&&_e.terrain){const We=new oe.Z(re.z,he,re.z,re.x,re.y),Je=_e.terrain.getMinMaxElevation(We);Fe=(we=Je.minElevation)!==null&&we!==void 0?we:Math.min(0,fe),Be=(Me=Je.maxElevation)!==null&&Me!==void 0?Me:Math.max(0,fe)}const $e=1<<re.z;return new Bi([he+re.x/$e,re.y/$e,Fe],[he+(re.x+1)/$e,(re.y+1)/$e,Be])}allowVariableZoom(re,he){const fe=re.fov*(Math.abs(Math.cos(re.rollInRadians))*re.height+Math.abs(Math.sin(re.rollInRadians))*re.width)/re.height,_e=oe.ae(78.5-fe/2,0,60);return!!he.terrain||re.pitch>_e}allowWorldCopies(){return!0}prepareNextFrame(){}}class wn{constructor(re,he,fe){this.points=re,this.planes=he,this.aabb=fe}static fromInvProjectionMatrix(re,he=1,fe=0,_e,we){const Me=we?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],Fe=Math.pow(2,fe),Be=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(Xe=>function(st,ht,vt,bt){const xt=oe.aw([],st,ht),Ct=1/xt[3]/vt*bt;return oe.aY(xt,xt,[Ct,Ct,1/xt[3],Ct])}(Xe,re,he,Fe));_e&&function(Xe,st,ht,vt){const bt=vt?4:0,xt=vt?0:4;let Ct=0;const kt=[],Tt=[];for(let Pt=0;Pt<4;Pt++){const Nt=oe.aU([],Xe[Pt+xt],Xe[Pt+bt]),Yt=oe.aZ(Nt);oe.aR(Nt,Nt,1/Yt),kt.push(Yt),Tt.push(Nt)}for(let Pt=0;Pt<4;Pt++){const Nt=oe.a_(Xe[Pt+bt],Tt[Pt],ht);Ct=Nt!==null&&Nt>=0?Math.max(Ct,Nt):Math.max(Ct,kt[Pt])}const Lt=function(Pt,Nt){const Yt=oe.aU([],Pt[Nt[0]],Pt[Nt[1]]),Wt=oe.aU([],Pt[Nt[2]],Pt[Nt[1]]),Ut=[0,0,0,0];return oe.aV(Ut,oe.aW([],Yt,Wt)),Ut[3]=-oe.aX(Ut,Pt[Nt[0]]),Ut}(Xe,st),Rt=function(Pt,Nt){const Yt=oe.a$(Pt),Wt=oe.b0([],Pt,1/Yt),Ut=oe.aU([],Nt,oe.aR([],Wt,oe.aX(Nt,Wt))),Kt=oe.a$(Ut);if(Kt>0){const br=Math.sqrt(1-Wt[3]*Wt[3]),xr=oe.aR([],Wt,-Wt[3]),_r=oe.aS([],xr,oe.aR([],Ut,br/Kt));return oe.b1(Nt,_r)}return null}(ht,Lt);if(Rt!==null){const Pt=Rt/oe.aX(Tt[0],Lt);Ct=Math.min(Ct,Pt)}for(let Pt=0;Pt<4;Pt++){const Nt=Math.min(Ct,kt[Pt]);Xe[Pt+xt]=[Xe[Pt+bt][0]+Tt[Pt][0]*Nt,Xe[Pt+bt][1]+Tt[Pt][1]*Nt,Xe[Pt+bt][2]+Tt[Pt][2]*Nt,1]}}(Be,Me[0],_e,we);const $e=Me.map(Xe=>{const st=oe.aU([],Be[Xe[0]],Be[Xe[1]]),ht=oe.aU([],Be[Xe[2]],Be[Xe[1]]),vt=oe.aV([],oe.aW([],st,ht)),bt=-oe.aX(vt,Be[Xe[1]]);return vt.concat(bt)}),We=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],Je=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const Xe of Be)for(let st=0;st<3;st++)We[st]=Math.min(We[st],Xe[st]),Je[st]=Math.max(Je[st],Xe[st]);return new wn(Be,$e,new Bi(We,Je))}}class Sn{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(re){this._helper.setMinZoom(re)}setMaxZoom(re){this._helper.setMaxZoom(re)}setMinPitch(re){this._helper.setMinPitch(re)}setMaxPitch(re){this._helper.setMaxPitch(re)}setRenderWorldCopies(re){this._helper.setRenderWorldCopies(re)}setBearing(re){this._helper.setBearing(re)}setPitch(re){this._helper.setPitch(re)}setRoll(re){this._helper.setRoll(re)}setFov(re){this._helper.setFov(re)}setZoom(re){this._helper.setZoom(re)}setCenter(re){this._helper.setCenter(re)}setElevation(re){this._helper.setElevation(re)}setMinElevationForCurrentTile(re){this._helper.setMinElevationForCurrentTile(re)}setPadding(re){this._helper.setPadding(re)}interpolatePadding(re,he,fe){return this._helper.interpolatePadding(re,he,fe)}isPaddingEqual(re){return this._helper.isPaddingEqual(re)}resize(re,he,fe=!0){this._helper.resize(re,he,fe)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(re){this._helper.setMaxBounds(re)}setConstrain(re){this._helper.setConstrain(re)}overrideNearFarZ(re,he){this._helper.overrideNearFarZ(re,he)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(re){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),re)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrain(){return this._helper.constrain}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(re,he){}constructor(re){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this.defaultConstrain=(he,fe)=>{fe=oe.ae(+fe,this.minZoom,this.maxZoom);const _e={center:new oe.S(he.lng,he.lat),zoom:fe};let we=this._helper._lngRange;if(!this._helper._renderWorldCopies&&we===null){const Tt=179.9999999999;we=[-Tt,Tt]}const Me=this.tileSize*oe.ah(_e.zoom);let Fe=0,Be=Me,$e=0,We=Me,Je=0,Xe=0;const{x:st,y:ht}=this.size;if(this._helper._latRange){const Tt=this._helper._latRange;Fe=oe.U(Tt[1])*Me,Be=oe.U(Tt[0])*Me,Be-Fe<ht&&(Je=ht/(Be-Fe))}we&&($e=oe.aO(oe.V(we[0])*Me,0,Me),We=oe.aO(oe.V(we[1])*Me,0,Me),We<$e&&(We+=Me),We-$e<st&&(Xe=st/(We-$e)));const{x:vt,y:bt}=It(Me,he);let xt,Ct;const kt=Math.max(Xe||0,Je||0);if(kt){const Tt=new oe.P(Xe?(We+$e)/2:vt,Je?(Be+Fe)/2:bt);return _e.center=qt(Me,Tt).wrap(),_e.zoom+=oe.ak(kt),_e}if(this._helper._latRange){const Tt=ht/2;bt-Tt<Fe&&(Ct=Fe+Tt),bt+Tt>Be&&(Ct=Be-Tt)}if(we){const Tt=($e+We)/2;let Lt=vt;this._helper._renderWorldCopies&&(Lt=oe.aO(vt,Tt-Me/2,Tt+Me/2));const Rt=st/2;Lt-Rt<$e&&(xt=$e+Rt),Lt+Rt>We&&(xt=We-Rt)}if(xt!==void 0||Ct!==void 0){const Tt=new oe.P(xt!=null?xt:vt,Ct!=null?Ct:bt);_e.center=qt(Me,Tt).wrap()}return _e},this._helper=new on({calcMatrices:()=>{this._calcMatrices()},constrain:(he,fe)=>this.defaultConstrain(he,fe)},re),this._coveringTilesDetailsProvider=new Hh}clone(){const re=new Sn;return re.apply(this),re}apply(re,he,fe){this._helper.apply(re,he,fe)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(re){const he=[new oe.b2(0,re)];if(this._helper._renderWorldCopies){const fe=this.screenPointToMercatorCoordinate(new oe.P(0,0)),_e=this.screenPointToMercatorCoordinate(new oe.P(this._helper._width,0)),we=this.screenPointToMercatorCoordinate(new oe.P(this._helper._width,this._helper._height)),Me=this.screenPointToMercatorCoordinate(new oe.P(0,this._helper._height)),Fe=Math.floor(Math.min(fe.x,_e.x,we.x,Me.x)),Be=Math.floor(Math.max(fe.x,_e.x,we.x,Me.x)),$e=1;for(let We=Fe-$e;We<=Be+$e;We++)We!==0&&he.push(new oe.b2(We,re))}return he}getCameraFrustum(){return wn.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(re){const he=this.screenPointToLocation(this.centerPoint,re),fe=re?re.getElevationForLngLatZoom(he,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(fe)}setLocationAtPoint(re,he){const fe=oe.aj(this.elevation,this.center.lat),_e=this.screenPointToMercatorCoordinateAtZ(he,fe),we=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,fe),Me=oe.a1.fromLngLat(re),Fe=new oe.a1(Me.x-(_e.x-we.x),Me.y-(_e.y-we.y));this.setCenter(Fe==null?void 0:Fe.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(re,he){return he?this.coordinatePoint(oe.a1.fromLngLat(re),he.getElevationForLngLatZoom(re,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(oe.a1.fromLngLat(re))}screenPointToLocation(re,he){var fe;return(fe=this.screenPointToMercatorCoordinate(re,he))===null||fe===void 0?void 0:fe.toLngLat()}screenPointToMercatorCoordinate(re,he){if(he){const fe=he.pointCoordinate(re);if(fe!=null)return fe}return this.screenPointToMercatorCoordinateAtZ(re)}screenPointToMercatorCoordinateAtZ(re,he){const fe=he||0,_e=[re.x,re.y,0,1],we=[re.x,re.y,1,1];oe.aw(_e,_e,this._pixelMatrixInverse),oe.aw(we,we,this._pixelMatrixInverse);const Me=_e[3],Fe=we[3],Be=_e[1]/Me,$e=we[1]/Fe,We=_e[2]/Me,Je=we[2]/Fe,Xe=We===Je?0:(fe-We)/(Je-We);return new oe.a1(oe.C.number(_e[0]/Me,we[0]/Fe,Xe)/this.worldSize,oe.C.number(Be,$e,Xe)/this.worldSize,fe)}coordinatePoint(re,he=0,fe=this._pixelMatrix){const _e=[re.x*this.worldSize,re.y*this.worldSize,he,1];return oe.aw(_e,_e,fe),new oe.P(_e[0]/_e[3],_e[1]/_e[3])}getBounds(){const re=Math.max(0,this._helper._height/2-Dt(this));return new qr().extend(this.screenPointToLocation(new oe.P(0,re))).extend(this.screenPointToLocation(new oe.P(this._helper._width,re))).extend(this.screenPointToLocation(new oe.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new oe.P(0,this._helper._height)))}isPointOnMapSurface(re,he){return he?he.pointCoordinate(re)!=null:re.y>this.height/2-Dt(this)}calculatePosMatrix(re,he=!1,fe){var _e;const we=(_e=re.key)!==null&&_e!==void 0?_e:oe.b3(re.wrap,re.canonical.z,re.canonical.z,re.canonical.x,re.canonical.y),Me=he?this._alignedPosMatrixCache:this._posMatrixCache;if(Me.has(we)){const $e=Me.get(we);return fe?$e.f32:$e.f64}const Fe=Vt(re,this.worldSize);oe.O(Fe,he?this._alignedProjMatrix:this._viewProjMatrix,Fe);const Be={f64:Fe,f32:new Float32Array(Fe)};return Me.set(we,Be),fe?Be.f32:Be.f64}calculateFogMatrix(re){const he=re.key,fe=this._fogMatrixCacheF32;if(fe.has(he))return fe.get(he);const _e=Vt(re,this.worldSize);return oe.O(_e,this._fogMatrix,_e),fe.set(he,new Float32Array(_e)),fe.get(he)}calculateCenterFromCameraLngLatAlt(re,he,fe,_e){return this._helper.calculateCenterFromCameraLngLatAlt(re,he,fe,_e)}_calculateNearFarZIfNeeded(re,he,fe){if(!this._helper.autoCalculateNearFarZ)return;const _e=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),we=re-_e*this._helper._pixelPerMeter/Math.cos(he),Me=_e<0?we:re,Fe=Math.PI/2+this.pitchInRadians,Be=oe.ag(this.fov)*(Math.abs(Math.cos(oe.ag(this.roll)))*this.height+Math.abs(Math.sin(oe.ag(this.roll)))*this.width)/this.height*(.5+fe.y/this.height),$e=Math.sin(Be)*Me/Math.sin(oe.ae(Math.PI-Fe-Be,.01,Math.PI-.01)),We=Dt(this),Je=Math.atan(We/this._helper.cameraToCenterDistance),Xe=oe.ag(.75),st=Je>Xe?2*Je*(.5+fe.y/(2*We)):Xe,ht=Math.sin(st)*Me/Math.sin(oe.ae(Math.PI-Fe-st,.01,Math.PI-.01)),vt=Math.min($e,ht);this._helper._farZ=1.01*(Math.cos(Math.PI/2-he)*vt+Me),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const re=this.centerOffset,he=It(this.worldSize,this.center),fe=he.x,_e=he.y;this._helper._pixelPerMeter=oe.aj(1,this.center.lat)*this.worldSize;const we=oe.ag(Math.min(this.pitch,wt)),Me=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(we));let Fe;this._calculateNearFarZIfNeeded(Me,we,re),Fe=new Float64Array(16),oe.b4(Fe,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),oe.aq(this._invProjMatrix,Fe),Fe[8]=2*-re.x/this._helper._width,Fe[9]=2*re.y/this._helper._height,this._projectionMatrix=oe.b5(Fe),oe.N(Fe,Fe,[1,-1,1]),oe.M(Fe,Fe,[0,0,-this._helper.cameraToCenterDistance]),oe.b6(Fe,Fe,-this.rollInRadians),oe.b7(Fe,Fe,this.pitchInRadians),oe.b6(Fe,Fe,-this.bearingInRadians),oe.M(Fe,Fe,[-fe,-_e,0]),this._mercatorMatrix=oe.N([],Fe,[this.worldSize,this.worldSize,this.worldSize]),oe.N(Fe,Fe,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=oe.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,Fe),oe.M(Fe,Fe,[0,0,-this.elevation]),this._viewProjMatrix=Fe,this._invViewProjMatrix=oe.aq([],Fe);const Be=[0,0,-1,1];oe.aw(Be,Be,this._invViewProjMatrix),this._cameraPosition=[Be[0]/Be[3],Be[1]/Be[3],Be[2]/Be[3]],this._fogMatrix=new Float64Array(16),oe.b4(this._fogMatrix,this.fovInRadians,this.width/this.height,Me,this._helper._farZ),this._fogMatrix[8]=2*-re.x/this.width,this._fogMatrix[9]=2*re.y/this.height,oe.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),oe.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),oe.b6(this._fogMatrix,this._fogMatrix,-this.rollInRadians),oe.b7(this._fogMatrix,this._fogMatrix,this.pitchInRadians),oe.b6(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),oe.M(this._fogMatrix,this._fogMatrix,[-fe,-_e,0]),oe.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),oe.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=oe.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,Fe);const $e=this._helper._width%2/2,We=this._helper._height%2/2,Je=Math.cos(this.bearingInRadians),Xe=Math.sin(-this.bearingInRadians),st=fe-Math.round(fe)+Je*$e+Xe*We,ht=_e-Math.round(_e)+Je*We+Xe*$e,vt=new Float64Array(Fe);if(oe.M(vt,vt,[st>.5?st-1:st,ht>.5?ht-1:ht,0]),this._alignedProjMatrix=vt,Fe=oe.aq(new Float64Array(16),this._pixelMatrix),!Fe)throw new Error("failed to invert matrix");this._pixelMatrixInverse=Fe,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const re=this.screenPointToMercatorCoordinate(new oe.P(0,0)),he=[re.x*this.worldSize,re.y*this.worldSize,0,1];return oe.aw(he,he,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const re=oe.aj(1,this.center.lat)*this.worldSize;return tr(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/re).toLngLat()}lngLatToCameraDepth(re,he){const fe=oe.a1.fromLngLat(re),_e=[fe.x*this.worldSize,fe.y*this.worldSize,he,1];return oe.aw(_e,_e,this._viewProjMatrix),_e[2]/_e[3]}getProjectionData(re){const{overscaledTileID:he,aligned:fe,applyTerrainMatrix:_e}=re,we=this._helper.getMercatorTileCoordinates(he),Me=he?this.calculatePosMatrix(he,fe,!0):null;let Fe;return Fe=he&&he.terrainRttPosMatrix32f&&_e?he.terrainRttPosMatrix32f:Me||oe.b8(),{mainMatrix:Fe,tileMercatorCoords:we,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:Fe}}isLocationOccluded(re){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(re,he,fe){return 1}transformLightDirection(re){return oe.aT(re)}getRayDirectionFromPixel(re){throw new Error("Not implemented.")}projectTileCoordinates(re,he,fe,_e){const we=this.calculatePosMatrix(fe);let Me;_e?(Me=[re,he,_e(re,he),1],oe.aw(Me,Me,we)):(Me=[re,he,0,1],si(Me,Me,we));const Fe=Me[3];return{point:new oe.P(Me[0]/Fe,Me[1]/Fe),signedDistanceFromCamera:Fe,isOccluded:!1}}populateCache(re){for(const he of re)this.calculatePosMatrix(he)}getMatrixForModel(re,he){const fe=oe.a1.fromLngLat(re,he),_e=fe.meterInMercatorCoordinateUnits(),we=oe.b9();return oe.M(we,we,[fe.x,fe.y,fe.z]),oe.b6(we,we,Math.PI),oe.b7(we,we,Math.PI/2),oe.N(we,we,[-_e,_e,_e]),we}getProjectionDataForCustomLayer(re=!0){const he=new oe.Z(0,0,0,0,0),fe=this.getProjectionData({overscaledTileID:he,applyGlobeMatrix:re}),_e=Vt(he,this.worldSize);oe.O(_e,this._viewProjMatrix,_e),fe.tileMercatorCoords=[0,0,1,1];const we=[oe.$,oe.$,this.worldSize/this._helper.pixelsPerMeter],Me=oe.ba();return oe.N(Me,_e,we),fe.fallbackMatrix=Me,fe.mainMatrix=Me,fe}getFastPathSimpleProjectionMatrix(re){return this.calculatePosMatrix(re)}}function On(){oe.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function _l(be){if(be.useSlerp)if(be.k<1){const re=oe.bb(be.startEulerAngles.roll,be.startEulerAngles.pitch,be.startEulerAngles.bearing),he=oe.bb(be.endEulerAngles.roll,be.endEulerAngles.pitch,be.endEulerAngles.bearing),fe=new Float64Array(4);oe.bc(fe,re,he,be.k);const _e=oe.bd(fe);be.tr.setRoll(_e.roll),be.tr.setPitch(_e.pitch),be.tr.setBearing(_e.bearing)}else be.tr.setRoll(be.endEulerAngles.roll),be.tr.setPitch(be.endEulerAngles.pitch),be.tr.setBearing(be.endEulerAngles.bearing);else be.tr.setRoll(oe.C.number(be.startEulerAngles.roll,be.endEulerAngles.roll,be.k)),be.tr.setPitch(oe.C.number(be.startEulerAngles.pitch,be.endEulerAngles.pitch,be.k)),be.tr.setBearing(oe.C.number(be.startEulerAngles.bearing,be.endEulerAngles.bearing,be.k))}function ro(be,re,he,fe,_e){const we=_e.padding,Me=It(_e.worldSize,he.getNorthWest()),Fe=It(_e.worldSize,he.getNorthEast()),Be=It(_e.worldSize,he.getSouthEast()),$e=It(_e.worldSize,he.getSouthWest()),We=oe.ag(-fe),Je=Me.rotate(We),Xe=Fe.rotate(We),st=Be.rotate(We),ht=$e.rotate(We),vt=new oe.P(Math.max(Je.x,Xe.x,ht.x,st.x),Math.max(Je.y,Xe.y,ht.y,st.y)),bt=new oe.P(Math.min(Je.x,Xe.x,ht.x,st.x),Math.min(Je.y,Xe.y,ht.y,st.y)),xt=vt.sub(bt),Ct=(_e.width-(we.left+we.right+re.left+re.right))/xt.x,kt=(_e.height-(we.top+we.bottom+re.top+re.bottom))/xt.y;if(kt<0||Ct<0)return void On();const Tt=Math.min(oe.ak(_e.scale*Math.min(Ct,kt)),be.maxZoom),Lt=oe.P.convert(be.offset),Rt=new oe.P((re.left-re.right)/2,(re.top-re.bottom)/2).rotate(oe.ag(fe)),Pt=Lt.add(Rt).mult(_e.scale/oe.ah(Tt));return{center:qt(_e.worldSize,Me.add(Be).div(2).sub(Pt)),zoom:Tt,bearing:fe}}class Gi{get useGlobeControls(){return!1}handlePanInertia(re,he){const fe=re.mag(),_e=Math.abs(Dt(he));return{easingOffset:re.mult(Math.min(.75*_e/fe,1)),easingCenter:he.center}}handleMapControlsRollPitchBearingZoom(re,he){re.bearingDelta&&he.setBearing(he.bearing+re.bearingDelta),re.pitchDelta&&he.setPitch(he.pitch+re.pitchDelta),re.rollDelta&&he.setRoll(he.roll+re.rollDelta),re.zoomDelta&&he.setZoom(he.zoom+re.zoomDelta)}handleMapControlsPan(re,he,fe){re.around.distSqr(he.centerPoint)<.01||he.setLocationAtPoint(fe,re.around)}cameraForBoxAndBearing(re,he,fe,_e,we){return ro(re,he,fe,_e,we)}handleJumpToCenterZoom(re,he){re.zoom!==(he.zoom!==void 0?+he.zoom:re.zoom)&&re.setZoom(+he.zoom),he.center!==void 0&&re.setCenter(oe.S.convert(he.center))}handleEaseTo(re,he){const fe=re.zoom,_e=re.padding,we={roll:re.roll,pitch:re.pitch,bearing:re.bearing},Me={roll:he.roll===void 0?re.roll:he.roll,pitch:he.pitch===void 0?re.pitch:he.pitch,bearing:he.bearing===void 0?re.bearing:he.bearing},Fe=he.zoom!==void 0,Be=!re.isPaddingEqual(he.padding);let $e=!1;const We=Fe?+he.zoom:re.zoom;let Je=re.centerPoint.add(he.offsetAsPoint);const Xe=re.screenPointToLocation(Je),{center:st,zoom:ht}=re.constrain(oe.S.convert(he.center||Xe),We!=null?We:fe);dn(re,st);const vt=It(re.worldSize,Xe),bt=It(re.worldSize,st).sub(vt),xt=oe.ah(ht-fe);return $e=ht!==fe,{easeFunc:Ct=>{if($e&&re.setZoom(oe.C.number(fe,ht,Ct)),oe.be(we,Me)||_l({startEulerAngles:we,endEulerAngles:Me,tr:re,k:Ct,useSlerp:we.roll!=Me.roll}),Be&&(re.interpolatePadding(_e,he.padding,Ct),Je=re.centerPoint.add(he.offsetAsPoint)),he.around)re.setLocationAtPoint(he.around,he.aroundPoint);else{const kt=oe.ah(re.zoom-fe),Tt=ht>fe?Math.min(2,xt):Math.max(.5,xt),Lt=Math.pow(Tt,1-Ct),Rt=qt(re.worldSize,vt.add(bt.mult(Ct*Lt)).mult(kt));re.setLocationAtPoint(re.renderWorldCopies?Rt.wrap():Rt,Je)}},isZooming:$e,elevationCenter:st}}handleFlyTo(re,he){const fe=he.zoom!==void 0,_e=re.zoom,we=re.constrain(oe.S.convert(he.center||he.locationAtOffset),fe?+he.zoom:_e),Me=we.center,Fe=we.zoom;dn(re,Me);const Be=It(re.worldSize,he.locationAtOffset),$e=It(re.worldSize,Me).sub(Be),We=$e.mag(),Je=oe.ah(Fe-_e);let Xe;if(he.minZoom!==void 0){const st=Math.min(+he.minZoom,_e,Fe),ht=re.constrain(Me,st).zoom;Xe=oe.ah(ht-_e)}return{easeFunc:(st,ht,vt,bt)=>{re.setZoom(st===1?Fe:_e+oe.ak(ht));const xt=st===1?Me:qt(re.worldSize,Be.add($e.mult(vt)).mult(ht));re.setLocationAtPoint(re.renderWorldCopies?xt.wrap():xt,bt)},scaleOfZoom:Je,targetCenter:Me,scaleOfMinZoom:Xe,pixelPathLength:We}}}class Ii{constructor(re,he,fe){this.blendFunction=re,this.blendColor=he,this.mask=fe}}Ii.Replace=[1,0],Ii.disabled=new Ii(Ii.Replace,oe.bf.transparent,[!1,!1,!1,!1]),Ii.unblended=new Ii(Ii.Replace,oe.bf.transparent,[!0,!0,!0,!0]),Ii.alphaBlended=new Ii([1,771],oe.bf.transparent,[!0,!0,!0,!0]);const fs=2305;class xi{constructor(re,he,fe){this.enable=re,this.mode=he,this.frontFace=fe}}xi.disabled=new xi(!1,1029,fs),xi.backCCW=new xi(!0,1029,fs),xi.frontCCW=new xi(!0,1028,fs);class ei{constructor(re,he,fe){this.func=re,this.mask=he,this.range=fe}}ei.ReadOnly=!1,ei.ReadWrite=!0,ei.disabled=new ei(519,ei.ReadOnly,[0,1]);const ca=7680;class fi{constructor(re,he,fe,_e,we,Me){this.test=re,this.ref=he,this.mask=fe,this.fail=_e,this.depthFail=we,this.pass=Me}}fi.disabled=new fi({func:519,mask:0},0,0,ca,ca,ca);const yl=new WeakMap;function as(be){var re;if(yl.has(be))return yl.get(be);{const he=(re=be.getParameter(be.VERSION))===null||re===void 0?void 0:re.startsWith("WebGL 2.0");return yl.set(be,he),he}}class io{get awaitingQuery(){return!!this._readbackQueue}constructor(re){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=re;const he=re.context,fe=he.gl;this._texFormat=fe.RGBA,this._texType=fe.UNSIGNED_BYTE;const _e=new oe.aL;_e.emplaceBack(-1,-1),_e.emplaceBack(2,-1),_e.emplaceBack(-1,2);const we=new oe.aN;we.emplaceBack(0,1,2),this._fullscreenTriangle=new Yn(he.createVertexBuffer(_e,ai.members),he.createIndexBuffer(we),oe.aM.simpleSegment(0,0,_e.length,we.length)),this._resultBuffer=new Uint8Array(4),he.activeTexture.set(fe.TEXTURE1);const Me=fe.createTexture();fe.bindTexture(fe.TEXTURE_2D,Me),fe.texParameteri(fe.TEXTURE_2D,fe.TEXTURE_WRAP_S,fe.CLAMP_TO_EDGE),fe.texParameteri(fe.TEXTURE_2D,fe.TEXTURE_WRAP_T,fe.CLAMP_TO_EDGE),fe.texParameteri(fe.TEXTURE_2D,fe.TEXTURE_MIN_FILTER,fe.NEAREST),fe.texParameteri(fe.TEXTURE_2D,fe.TEXTURE_MAG_FILTER,fe.NEAREST),fe.texImage2D(fe.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=he.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(Me),as(fe)&&(this._pbo=fe.createBuffer(),fe.bindBuffer(fe.PIXEL_PACK_BUFFER,this._pbo),fe.bufferData(fe.PIXEL_PACK_BUFFER,4,fe.STREAM_READ),fe.bindBuffer(fe.PIXEL_PACK_BUFFER,null))}destroy(){const re=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),re.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(re,he){const fe=this._updateCount;return this._readbackQueue?fe>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():fe>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(re,he),this._updateCount++,this._measuredError}_bindFramebuffer(){const re=this._cachedRenderContext.context,he=re.gl;re.activeTexture.set(he.TEXTURE1),he.bindTexture(he.TEXTURE_2D,this._fbo.colorAttachment.get()),re.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(re,he){const fe=this._cachedRenderContext.context,_e=fe.gl;if(this._bindFramebuffer(),fe.viewport.set([0,0,this._texWidth,this._texHeight]),fe.clear({color:oe.bf.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(fe,_e.TRIANGLES,ei.disabled,fi.disabled,Ii.unblended,xi.disabled,((we,Me)=>({u_input:we,u_output_expected:Me}))(re,he),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&as(_e)){_e.bindBuffer(_e.PIXEL_PACK_BUFFER,this._pbo),_e.readBuffer(_e.COLOR_ATTACHMENT0),_e.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),_e.bindBuffer(_e.PIXEL_PACK_BUFFER,null);const we=_e.fenceSync(_e.SYNC_GPU_COMMANDS_COMPLETE,0);_e.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:we}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const re=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&as(re)){const he=re.clientWaitSync(this._readbackQueue.sync,0,0);if(he===re.WAIT_FAILED)return oe.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(he===re.TIMEOUT_EXPIRED)return;re.bindBuffer(re.PIXEL_PACK_BUFFER,this._pbo),re.getBufferSubData(re.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),re.bindBuffer(re.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),re.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=io._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(re){let he=0;return he+=re[0]/256,he+=re[1]/65536,he+=re[2]/16777216,re[3]<127&&(he=-he),he/128}}const Os=oe.$/128;function Do(be,re){const he=be.granularity!==void 0?Math.max(be.granularity,1):1,fe=he+(be.generateBorders?2:0),_e=he+(be.extendToNorthPole||be.generateBorders?1:0)+(be.extendToSouthPole||be.generateBorders?1:0),we=fe+1,Me=_e+1,Fe=be.generateBorders?-1:0,Be=be.generateBorders||be.extendToNorthPole?-1:0,$e=he+(be.generateBorders?1:0),We=he+(be.generateBorders||be.extendToSouthPole?1:0),Je=we*Me,Xe=fe*_e*6,st=we*Me>65536;if(st&&re==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const ht=st||re==="32bit",vt=new Int16Array(2*Je);let bt=0;for(let kt=Be;kt<=We;kt++)for(let Tt=Fe;Tt<=$e;Tt++){let Lt=Tt/he*oe.$;Tt===-1&&(Lt=-Os),Tt===he+1&&(Lt=oe.$+Os);let Rt=kt/he*oe.$;kt===-1&&(Rt=be.extendToNorthPole?oe.bh:-Os),kt===he+1&&(Rt=be.extendToSouthPole?oe.bi:oe.$+Os),vt[bt++]=Lt,vt[bt++]=Rt}const xt=ht?new Uint32Array(Xe):new Uint16Array(Xe);let Ct=0;for(let kt=0;kt<_e;kt++)for(let Tt=0;Tt<fe;Tt++){const Lt=Tt+1+kt*we,Rt=Tt+(kt+1)*we,Pt=Tt+1+(kt+1)*we;xt[Ct++]=Tt+kt*we,xt[Ct++]=Rt,xt[Ct++]=Lt,xt[Ct++]=Lt,xt[Ct++]=Rt,xt[Ct++]=Pt}return{vertices:vt.buffer.slice(0),indices:xt.buffer.slice(0),uses32bitIndices:ht}}const Bo=new oe.aK({fill:new oe.bj(128,2),line:new oe.bj(512,0),tile:new oe.bj(128,32),stencil:new oe.bj(128,1),circle:3});class ha{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return os.projectionGlobe}get vertexShaderPreludeCode(){return os.projectionMercator.vertexSource}get subdivisionGranularity(){return Bo}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(re){this._errorMeasurement||(this._errorMeasurement=new io(re));const he=oe.U(this._errorQueryLatitudeDegrees),fe=2*Math.atan(Math.exp(Math.PI-he*Math.PI*2))-.5*Math.PI,_e=this._errorMeasurement.updateErrorLoop(he,fe),we=Ae();_e!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=_e,this._errorMeasurementLastChangeTime=we);const Me=Math.min(Math.max((we-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=oe.bk(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,oe.bl(Me))}_getMeshKey(re){return`${re.granularity.toString(36)}_${re.generateBorders?"b":""}${re.extendToNorthPole?"n":""}${re.extendToSouthPole?"s":""}`}getMeshFromTileID(re,he,fe,_e,we){const Me=(we==="stencil"?Bo.stencil:Bo.tile).getGranularityForZoomLevel(he.z);return this._getMesh(re,{granularity:Me,generateBorders:fe,extendToNorthPole:he.y===0&&_e,extendToSouthPole:he.y===(1<<he.z)-1&&_e})}_getMesh(re,he){const fe=this._getMeshKey(he);if(fe in this._tileMeshCache)return this._tileMeshCache[fe];const _e=function(we,Me){const Fe=Do(Me,"16bit"),Be=oe.aL.deserialize({arrayBuffer:Fe.vertices,length:Fe.vertices.byteLength/2/2}),$e=oe.aN.deserialize({arrayBuffer:Fe.indices,length:Fe.indices.byteLength/2/3});return new Yn(we.createVertexBuffer(Be,ai.members),we.createIndexBuffer($e),oe.aM.simpleSegment(0,0,Be.length,$e.length))}(re,he);return this._tileMeshCache[fe]=_e,_e}recalculate(re){}hasTransition(){const re=Ae();let he=!1;return he=he||(re-this._errorMeasurementLastChangeTime)/1e3<.7,he=he||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,he}setErrorQueryLatitudeDegrees(re){this._errorQueryLatitudeDegrees=re}}const ua=new oe.r({type:new oe.D(oe.v.projection.type)});class da extends oe.E{constructor(re){super(),this._transitionable=new oe.t(ua,void 0),this.setProjection(re),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new oe.F(0)),this._mercatorProjection=new Fo,this._verticalPerspectiveProjection=new ha}get transitionState(){const re=this.properties.get("type");if(typeof re=="string"&&re==="mercator")return 0;if(typeof re=="string"&&re==="vertical-perspective")return 1;if(re instanceof oe.bm){if(re.from==="vertical-perspective"&&re.to==="mercator")return 1-re.transition;if(re.from==="mercator"&&re.to==="vertical-perspective")return re.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(re){this._mercatorProjection.updateGPUdependent(re),this._verticalPerspectiveProjection.updateGPUdependent(re)}getMeshFromTileID(re,he,fe,_e,we){return this.currentProjection.getMeshFromTileID(re,he,fe,_e,we)}setProjection(re){this._transitionable.setValue("type",(re==null?void 0:re.type)||"mercator")}updateTransitions(re){this._transitioning=this._transitionable.transitioned(re,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(re){this.properties=this._transitioning.possiblyEvaluate(re)}setErrorQueryLatitudeDegrees(re){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(re),this._mercatorProjection.setErrorQueryLatitudeDegrees(re)}}function pa(be){const re=Ts(be.worldSize,be.center.lat);return 2*Math.PI*re}function Kn(be,re,he,fe,_e){const we=1/(1<<_e),Me=re/oe.$*we+fe*we,Fe=oe.bo((be/oe.$*we+he*we)*Math.PI*2+Math.PI,2*Math.PI),Be=2*Math.atan(Math.exp(Math.PI-Me*Math.PI*2))-.5*Math.PI,$e=Math.cos(Be),We=new Float64Array(3);return We[0]=Math.sin(Fe)*$e,We[1]=Math.sin(Be),We[2]=Math.cos(Fe)*$e,We}function an(be){return function(re,he){const fe=Math.cos(he),_e=new Float64Array(3);return _e[0]=Math.sin(re)*fe,_e[1]=Math.sin(he),_e[2]=Math.cos(re)*fe,_e}(be.lng*Math.PI/180,be.lat*Math.PI/180)}function Ts(be,re){return be/(2*Math.PI)/Math.cos(re*Math.PI/180)}function Sc(be){const re=Math.asin(be[1])/Math.PI*180,he=Math.sqrt(be[0]*be[0]+be[2]*be[2]);if(he>1e-6){const fe=be[0]/he,_e=Math.acos(be[2]/he),we=(fe>0?_e:-_e)/Math.PI*180;return new oe.S(oe.aO(we,-180,180),re)}return new oe.S(0,re)}function no(be){return Math.cos(be*Math.PI/180)}function ln(be,re){const he=no(be),fe=no(re);return oe.ak(fe/he)}function Tc(be,re){const he=be.rotate(re.bearingInRadians),fe=re.zoom+ln(re.center.lat,0),_e=oe.bk(1/no(re.center.lat),1/no(Math.min(Math.abs(re.center.lat),60)),oe.bn(fe,7,3,0,1)),we=360/pa({worldSize:re.worldSize,center:{lat:re.center.lat}});return new oe.S(re.center.lng-he.x*we*_e,oe.ae(re.center.lat+he.y*we,-oe.af,oe.af))}function vl(be){const re=.5*be,he=Math.sin(re),fe=Math.cos(re);return Math.log(he+fe)-Math.log(fe-he)}function zn(be,re,he,fe){const _e=be.lat+he*fe;if(Math.abs(he)>1){const we=(Math.sign(be.lat+he)!==Math.sign(be.lat)?-Math.abs(be.lat):Math.abs(be.lat))*Math.PI/180,Me=Math.abs(be.lat+he)*Math.PI/180,Fe=vl(we+fe*(Me-we)),Be=vl(we),$e=vl(Me);return new oe.S(be.lng+re*((Fe-Be)/($e-Be)),_e)}return new oe.S(be.lng+re*fe,_e)}class bl{constructor(re){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=re}swapBuffers(){if(!this._hadAnyChanges)return;const re=this._cachePrevious;this._cachePrevious=this._cache,this._cache=re,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(re,he,fe,_e){const we=`${re.z}_${re.x}_${re.y}_${_e!=null&&_e.terrain?"t":""}`,Me=this._cache.get(we);if(Me)return Me;const Fe=this._cachePrevious.get(we);if(Fe)return this._cache.set(we,Fe),Fe;const Be=this._boundingVolumeFactory(re,he,fe,_e);return this._cache.set(we,Be),this._hadAnyChanges=!0,Be}}class Rn{constructor(re,he,fe,_e){this.min=fe,this.max=_e,this.points=re,this.planes=he}static fromAabb(re,he){const fe=[];for(let _e=0;_e<8;_e++)fe.push([1&~_e?re[0]:he[0],(_e>>1&1)==1?he[1]:re[1],(_e>>2&1)==1?he[2]:re[2]]);return new Rn(fe,[[-1,0,0,he[0]],[1,0,0,-re[0]],[0,-1,0,he[1]],[0,1,0,-re[1]],[0,0,-1,he[2]],[0,0,1,-re[2]]],re,he)}static fromCenterSizeAngles(re,he,fe){const _e=oe.br([],fe[0],fe[1],fe[2]),we=oe.bs([],[he[0],0,0],_e),Me=oe.bs([],[0,he[1],0],_e),Fe=oe.bs([],[0,0,he[2]],_e),Be=[...re],$e=[...re];for(let Je=0;Je<8;Je++)for(let Xe=0;Xe<3;Xe++){const st=re[Xe]+we[Xe]*(1&~Je?-1:1)+Me[Xe]*((Je>>1&1)==1?1:-1)+Fe[Xe]*((Je>>2&1)==1?1:-1);Be[Xe]=Math.min(Be[Xe],st),$e[Xe]=Math.max($e[Xe],st)}const We=[];for(let Je=0;Je<8;Je++){const Xe=[...re];oe.aS(Xe,Xe,oe.aR([],we,1&~Je?-1:1)),oe.aS(Xe,Xe,oe.aR([],Me,(Je>>1&1)==1?1:-1)),oe.aS(Xe,Xe,oe.aR([],Fe,(Je>>2&1)==1?1:-1)),We.push(Xe)}return new Rn(We,[[...we,-oe.aX(we,We[0])],[...Me,-oe.aX(Me,We[0])],[...Fe,-oe.aX(Fe,We[0])],[-we[0],-we[1],-we[2],-oe.aX(we,We[7])],[-Me[0],-Me[1],-Me[2],-oe.aX(Me,We[7])],[-Fe[0],-Fe[1],-Fe[2],-oe.aX(Fe,We[7])]],Be,$e)}intersectsFrustum(re){let he=!0;const fe=this.points.length,_e=this.planes.length,we=re.planes.length,Me=re.points.length;for(let Fe=0;Fe<we;Fe++){const Be=re.planes[Fe];let $e=0;for(let We=0;We<fe;We++){const Je=this.points[We];Be[0]*Je[0]+Be[1]*Je[1]+Be[2]*Je[2]+Be[3]>=0&&$e++}if($e===0)return 0;$e<fe&&(he=!1)}if(he)return 2;for(let Fe=0;Fe<_e;Fe++){const Be=this.planes[Fe];let $e=0;for(let We=0;We<Me;We++){const Je=re.points[We];Be[0]*Je[0]+Be[1]*Je[1]+Be[2]*Je[2]+Be[3]>=0&&$e++}if($e===0)return 0}return 1}intersectsPlane(re){const he=this.points.length;let fe=0;for(let _e=0;_e<he;_e++){const we=this.points[_e];re[0]*we[0]+re[1]*we[1]+re[2]*we[2]+re[3]>=0&&fe++}return fe===he?2:fe===0?0:1}}function Vs(be,re,he){const fe=be-re;return fe<0?-fe:Math.max(0,fe-he)}function fa(be,re,he,fe,_e){const we=be-he;let Me;return Me=we<0?Math.min(-we,1+we-_e):we>1?Math.min(Math.max(we-_e,0),1-we):0,Math.max(Me,Vs(re,fe,_e))}class Cc{constructor(){this._boundingVolumeCache=new bl(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(re,he,fe,_e){const we=1<<fe.z,Me=1/we,Fe=fe.x/we,Be=fe.y/we;let $e=2;return $e=Math.min($e,fa(re,he,Fe,Be,Me)),$e=Math.min($e,fa(re,he,Fe+.5,-Be-Me,Me)),$e=Math.min($e,fa(re,he,Fe+.5,2-Be-Me,Me)),$e}getWrap(re,he,fe){const _e=1<<he.z,we=1/_e,Me=he.x/_e,Fe=Vs(re.x,Me,we),Be=Vs(re.x,Me-1,we),$e=Vs(re.x,Me+1,we),We=Math.min(Fe,Be,$e);return We===$e?1:We===Be?-1:0}allowVariableZoom(re,he){return Xr(re,he)>4}allowWorldCopies(){return!1}getTileBoundingVolume(re,he,fe,_e){return this._boundingVolumeCache.getTileBoundingVolume(re,he,fe,_e)}_computeTileBoundingVolume(re,he,fe,_e){var we,Me;let Fe=0,Be=0;if(_e!=null&&_e.terrain){const $e=new oe.Z(re.z,he,re.z,re.x,re.y),We=_e.terrain.getMinMaxElevation($e);Fe=(we=We.minElevation)!==null&&we!==void 0?we:Math.min(0,fe),Be=(Me=We.maxElevation)!==null&&Me!==void 0?Me:Math.max(0,fe)}if(Fe/=oe.bu,Be/=oe.bu,Fe+=1,Be+=1,re.z<=0)return Rn.fromAabb([-Be,-Be,-Be],[Be,Be,Be]);if(re.z===1)return Rn.fromAabb([re.x===0?-Be:0,re.y===0?0:-Be,-Be],[re.x===0?0:Be,re.y===0?Be:0,Be]);{const $e=[Kn(0,0,re.x,re.y,re.z),Kn(oe.$,0,re.x,re.y,re.z),Kn(oe.$,oe.$,re.x,re.y,re.z),Kn(0,oe.$,re.x,re.y,re.z)],We=[];for(const Ut of $e)We.push(oe.aR([],Ut,Be));if(Be!==Fe)for(const Ut of $e)We.push(oe.aR([],Ut,Fe));re.y===0&&We.push([0,1,0]),re.y===(1<<re.z)-1&&We.push([0,-1,0]);const Je=[1,1,1],Xe=[-1,-1,-1];for(const Ut of We)for(let Kt=0;Kt<3;Kt++)Je[Kt]=Math.min(Je[Kt],Ut[Kt]),Xe[Kt]=Math.max(Xe[Kt],Ut[Kt]);const st=Kn(oe.$/2,oe.$/2,re.x,re.y,re.z),ht=oe.aW([],[0,1,0],st);oe.aV(ht,ht);const vt=oe.aW([],st,ht);oe.aV(vt,vt);const bt=oe.aW([],$e[2],$e[1]);oe.aV(bt,bt);const xt=oe.aW([],$e[0],$e[3]);oe.aV(xt,xt),We.push(oe.aR([],st,Be)),re.y>=(1<<re.z)/2&&We.push(oe.aR([],Kn(oe.$/2,0,re.x,re.y,re.z),Be)),re.y<(1<<re.z)/2&&We.push(oe.aR([],Kn(oe.$/2,oe.$,re.x,re.y,re.z),Be));const Ct=Ns(st,We),kt=Ns(vt,We),Tt=[-st[0],-st[1],-st[2],Ct.max],Lt=[st[0],st[1],st[2],-Ct.min],Rt=[-vt[0],-vt[1],-vt[2],kt.max],Pt=[vt[0],vt[1],vt[2],-kt.min],Nt=[...bt,0],Yt=[...xt,0],Wt=[];return re.y===0?Wt.push(oe.bt(Yt,Nt,Tt),oe.bt(Yt,Nt,Lt)):Wt.push(oe.bt(Rt,Nt,Tt),oe.bt(Rt,Nt,Lt),oe.bt(Rt,Yt,Tt),oe.bt(Rt,Yt,Lt)),re.y===(1<<re.z)-1?Wt.push(oe.bt(Yt,Nt,Tt),oe.bt(Yt,Nt,Lt)):Wt.push(oe.bt(Pt,Nt,Tt),oe.bt(Pt,Nt,Lt),oe.bt(Pt,Yt,Tt),oe.bt(Pt,Yt,Lt)),new Rn(Wt,[Tt,Lt,Rt,Pt,Nt,Yt],Je,Xe)}}}function Ns(be,re){let he=1/0,fe=-1/0;for(const _e of re){const we=oe.aX(be,_e);he=Math.min(he,we),fe=Math.max(fe,we)}return{min:he,max:fe}}class ma{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(re){this._helper.setMinZoom(re)}setMaxZoom(re){this._helper.setMaxZoom(re)}setMinPitch(re){this._helper.setMinPitch(re)}setMaxPitch(re){this._helper.setMaxPitch(re)}setRenderWorldCopies(re){this._helper.setRenderWorldCopies(re)}setBearing(re){this._helper.setBearing(re)}setPitch(re){this._helper.setPitch(re)}setRoll(re){this._helper.setRoll(re)}setFov(re){this._helper.setFov(re)}setZoom(re){this._helper.setZoom(re)}setCenter(re){this._helper.setCenter(re)}setElevation(re){this._helper.setElevation(re)}setMinElevationForCurrentTile(re){this._helper.setMinElevationForCurrentTile(re)}setPadding(re){this._helper.setPadding(re)}interpolatePadding(re,he,fe){return this._helper.interpolatePadding(re,he,fe)}isPaddingEqual(re){return this._helper.isPaddingEqual(re)}resize(re,he){this._helper.resize(re,he)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(re){this._helper.setMaxBounds(re)}setConstrain(re){this._helper.setConstrain(re)}overrideNearFarZ(re,he){this._helper.overrideNearFarZ(re,he)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(re){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),re)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get constrain(){return this._helper.constrain}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(re){}constructor(re){this._cachedClippingPlane=oe.bv(),this._projectionMatrix=oe.b9(),this._globeViewProjMatrix32f=oe.b8(),this._globeViewProjMatrixNoCorrection=oe.b9(),this._globeViewProjMatrixNoCorrectionInverted=oe.b9(),this._globeProjMatrixInverted=oe.b9(),this._cameraPosition=oe.bp(),this._globeLatitudeErrorCorrectionRadians=0,this.defaultConstrain=(he,fe)=>{const _e=oe.ae(he.lat,-oe.af,oe.af),we=oe.ae(+fe,this.minZoom+ln(0,_e),this.maxZoom);return{center:new oe.S(he.lng,_e),zoom:we}},this._helper=new on({calcMatrices:()=>{this._calcMatrices()},constrain:(he,fe)=>this.defaultConstrain(he,fe)},re),this._coveringTilesDetailsProvider=new Cc}clone(){const re=new ma;return re.apply(this),re}apply(re,he){this._globeLatitudeErrorCorrectionRadians=he||0,this._helper.apply(re)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const re=oe.bp();return re[0]=this._cameraPosition[0],re[1]=this._cameraPosition[1],re[2]=this._cameraPosition[2],re}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(re){const{overscaledTileID:he,applyGlobeMatrix:fe}=re,_e=this._helper.getMercatorTileCoordinates(he);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:_e,clippingPlane:this._cachedClippingPlane,projectionTransition:fe?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(re){const he=this.pitchInRadians,fe=this.cameraToCenterDistance/re,_e=Math.sin(he)*fe,we=Math.cos(he)*fe+1,Me=1/Math.sqrt(_e*_e+we*we)*1;let Fe=-_e,Be=we;const $e=Math.sqrt(Fe*Fe+Be*Be);Fe/=$e,Be/=$e;const We=[0,Fe,Be];oe.bw(We,We,[0,0,0],-this.bearingInRadians),oe.bx(We,We,[0,0,0],-1*this.center.lat*Math.PI/180),oe.by(We,We,[0,0,0],this.center.lng*Math.PI/180);const Je=1/oe.aZ(We);return oe.aR(We,We,Je),[...We,-Me*Je]}isLocationOccluded(re){return!this.isSurfacePointVisible(an(re))}transformLightDirection(re){const he=this._helper._center.lng*Math.PI/180,fe=this._helper._center.lat*Math.PI/180,_e=Math.cos(fe),we=[Math.sin(he)*_e,Math.sin(fe),Math.cos(he)*_e],Me=[we[2],0,-we[0]],Fe=[0,0,0];oe.aW(Fe,Me,we),oe.aV(Me,Me),oe.aV(Fe,Fe);const Be=[0,0,0];return oe.aV(Be,[Me[0]*re[0]+Fe[0]*re[1]+we[0]*re[2],Me[1]*re[0]+Fe[1]*re[1]+we[1]*re[2],Me[2]*re[0]+Fe[2]*re[1]+we[2]*re[2]]),Be}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(re,he,fe){const _e=function(Fe,Be,$e){const We=1/(1<<$e.z);return new oe.a1(Fe/oe.$*We+$e.x*We,Be/oe.$*We+$e.y*We)}(re,he,fe.canonical),we=(Me=_e.y,[oe.bo(_e.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-Me*Math.PI*2))-.5*Math.PI]);var Me;return this.getCircleRadiusCorrection()/Math.cos(we[1])}projectTileCoordinates(re,he,fe,_e){const we=fe.canonical,Me=Kn(re,he,we.x,we.y,we.z),Fe=1+(_e?_e(re,he):0)/oe.bu,Be=[Me[0]*Fe,Me[1]*Fe,Me[2]*Fe,1];oe.aw(Be,Be,this._globeViewProjMatrixNoCorrection);const $e=this._cachedClippingPlane,We=$e[0]*Me[0]+$e[1]*Me[1]+$e[2]*Me[2]+$e[3]<0;return{point:new oe.P(Be[0]/Be[3],Be[1]/Be[3]),signedDistanceFromCamera:Be[3],isOccluded:We}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const re=Ts(this.worldSize,this.center.lat),he=oe.ba(),fe=oe.ba();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*re),oe.b4(he,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const _e=this.centerOffset;he[8]=2*-_e.x/this._helper._width,he[9]=2*_e.y/this._helper._height,this._projectionMatrix=oe.b5(he),this._globeProjMatrixInverted=oe.ba(),oe.aq(this._globeProjMatrixInverted,he),oe.M(he,he,[0,0,-this.cameraToCenterDistance]),oe.b6(he,he,this.rollInRadians),oe.b7(he,he,-this.pitchInRadians),oe.b6(he,he,this.bearingInRadians),oe.M(he,he,[0,0,-re]);const we=oe.bp();we[0]=re,we[1]=re,we[2]=re,oe.b7(fe,he,this.center.lat*Math.PI/180),oe.bz(fe,fe,-this.center.lng*Math.PI/180),oe.N(fe,fe,we),this._globeViewProjMatrixNoCorrection=fe,oe.b7(he,he,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),oe.bz(he,he,-this.center.lng*Math.PI/180),oe.N(he,he,we),this._globeViewProjMatrix32f=new Float32Array(he),this._globeViewProjMatrixNoCorrectionInverted=oe.ba(),oe.aq(this._globeViewProjMatrixNoCorrectionInverted,fe);const Me=oe.bp();this._cameraPosition=oe.bp(),this._cameraPosition[2]=this.cameraToCenterDistance/re,oe.bw(this._cameraPosition,this._cameraPosition,Me,-this.rollInRadians),oe.bx(this._cameraPosition,this._cameraPosition,Me,this.pitchInRadians),oe.bw(this._cameraPosition,this._cameraPosition,Me,-this.bearingInRadians),oe.aS(this._cameraPosition,this._cameraPosition,[0,0,1]),oe.bx(this._cameraPosition,this._cameraPosition,Me,-this.center.lat*Math.PI/180),oe.by(this._cameraPosition,this._cameraPosition,Me,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(re);const Fe=oe.b5(this._globeViewProjMatrixNoCorrectionInverted);oe.N(Fe,Fe,[1,1,-1]),this._cachedFrustum=wn.fromInvProjectionMatrix(Fe,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(re){oe.w("calculateFogMatrix is not supported on globe projection.");const he=oe.ba();return oe.ai(he),he}getVisibleUnwrappedCoordinates(re){return[new oe.b2(0,re)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(re){re&&oe.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(re,he){if(!this._globeViewProjMatrixNoCorrection)return 1;const fe=an(re);oe.aR(fe,fe,1+he/oe.bu);const _e=oe.bv();return oe.aw(_e,[fe[0],fe[1],fe[2],1],this._globeViewProjMatrixNoCorrection),_e[2]/_e[3]}populateCache(re){}getBounds(){const re=.5*this.width,he=.5*this.height,fe=[new oe.P(0,0),new oe.P(re,0),new oe.P(this.width,0),new oe.P(this.width,he),new oe.P(this.width,this.height),new oe.P(re,this.height),new oe.P(0,this.height),new oe.P(0,he)],_e=[];for(const Je of fe)_e.push(this.unprojectScreenPoint(Je));let we=0,Me=0,Fe=0,Be=0;const $e=this.center;for(const Je of _e){const Xe=oe.bA($e.lng,Je.lng),st=oe.bA($e.lat,Je.lat);Xe<Me&&(Me=Xe),Xe>we&&(we=Xe),st<Be&&(Be=st),st>Fe&&(Fe=st)}const We=[$e.lng+Me,$e.lat+Be,$e.lng+we,$e.lat+Fe];return this.isSurfacePointOnScreen([0,1,0])&&(We[3]=90,We[0]=-180,We[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(We[1]=-90,We[0]=-180,We[2]=180),new qr(We)}calculateCenterFromCameraLngLatAlt(re,he,fe,_e){return this._helper.calculateCenterFromCameraLngLatAlt(re,he,fe,_e)}setLocationAtPoint(re,he){const fe=an(this.unprojectScreenPoint(he)),_e=an(re),we=oe.bp();oe.bB(we);const Me=oe.bp();oe.by(Me,fe,we,-this.center.lng*Math.PI/180),oe.bx(Me,Me,we,this.center.lat*Math.PI/180);const Fe=_e[0]*_e[0]+_e[2]*_e[2],Be=Me[0]*Me[0];if(Fe<Be)return;const $e=Math.sqrt(Fe-Be),We=-$e,Je=oe.bC(_e[0],_e[2],Me[0],$e),Xe=oe.bC(_e[0],_e[2],Me[0],We),st=oe.bp();oe.by(st,_e,we,-Je);const ht=oe.bC(st[1],st[2],Me[1],Me[2]),vt=oe.bp();oe.by(vt,_e,we,-Xe);const bt=oe.bC(vt[1],vt[2],Me[1],Me[2]),xt=.5*Math.PI,Ct=ht>=-xt&&ht<=xt,kt=bt>=-xt&&bt<=xt;let Tt,Lt;if(Ct&&kt){const Yt=this.center.lng*Math.PI/180,Wt=this.center.lat*Math.PI/180;oe.bD(Je,Yt)+oe.bD(ht,Wt)<oe.bD(Xe,Yt)+oe.bD(bt,Wt)?(Tt=Je,Lt=ht):(Tt=Xe,Lt=bt)}else if(Ct)Tt=Je,Lt=ht;else{if(!kt)return;Tt=Xe,Lt=bt}const Rt=Tt/Math.PI*180,Pt=Lt/Math.PI*180,Nt=this.center.lat;this.setCenter(new oe.S(Rt,oe.ae(Pt,-90,90))),this.setZoom(this.zoom+ln(Nt,this.center.lat))}locationToScreenPoint(re,he){const fe=an(re);if(he){const _e=he.getElevationForLngLatZoom(re,this._helper._tileZoom);oe.aR(fe,fe,1+_e/oe.bu)}return this._projectSurfacePointToScreen(fe)}_projectSurfacePointToScreen(re){const he=oe.bv();return oe.aw(he,[...re,1],this._globeViewProjMatrixNoCorrection),he[0]/=he[3],he[1]/=he[3],new oe.P((.5*he[0]+.5)*this.width,(.5*-he[1]+.5)*this.height)}screenPointToMercatorCoordinate(re,he){if(he){const fe=he.pointCoordinate(re);if(fe)return fe}return oe.a1.fromLngLat(this.unprojectScreenPoint(re))}screenPointToLocation(re,he){var fe;return(fe=this.screenPointToMercatorCoordinate(re,he))===null||fe===void 0?void 0:fe.toLngLat()}isPointOnMapSurface(re,he){const fe=this._cameraPosition,_e=this.getRayDirectionFromPixel(re);return!!this.rayPlanetIntersection(fe,_e)}getRayDirectionFromPixel(re){const he=oe.bv();he[0]=re.x/this.width*2-1,he[1]=-1*(re.y/this.height*2-1),he[2]=1,he[3]=1,oe.aw(he,he,this._globeViewProjMatrixNoCorrectionInverted),he[0]/=he[3],he[1]/=he[3],he[2]/=he[3];const fe=oe.bp();fe[0]=he[0]-this._cameraPosition[0],fe[1]=he[1]-this._cameraPosition[1],fe[2]=he[2]-this._cameraPosition[2];const _e=oe.bp();return oe.aV(_e,fe),_e}isSurfacePointVisible(re){const he=this._cachedClippingPlane;return he[0]*re[0]+he[1]*re[1]+he[2]*re[2]+he[3]>=0}isSurfacePointOnScreen(re){if(!this.isSurfacePointVisible(re))return!1;const he=oe.bv();return oe.aw(he,[...re,1],this._globeViewProjMatrixNoCorrection),he[0]/=he[3],he[1]/=he[3],he[2]/=he[3],he[0]>-1&&he[0]<1&&he[1]>-1&&he[1]<1&&he[2]>-1&&he[2]<1}rayPlanetIntersection(re,he){const fe=oe.aX(re,he),_e=oe.bp(),we=oe.bp();oe.aR(we,he,fe),oe.aU(_e,re,we);const Me=1-oe.aX(_e,_e);if(Me<0)return null;const Fe=oe.aX(re,re)-1,Be=-fe+(fe<0?1:-1)*Math.sqrt(Me),$e=Fe/Be,We=Be;return{tMin:Math.min($e,We),tMax:Math.max($e,We)}}unprojectScreenPoint(re){const he=this._cameraPosition,fe=this.getRayDirectionFromPixel(re),_e=this.rayPlanetIntersection(he,fe);if(_e){const We=oe.bp();oe.aS(We,he,[fe[0]*_e.tMin,fe[1]*_e.tMin,fe[2]*_e.tMin]);const Je=oe.bp();return oe.aV(Je,We),Sc(Je)}const we=this._cachedClippingPlane,Me=we[0]*fe[0]+we[1]*fe[1]+we[2]*fe[2],Fe=-oe.b1(we,he)/Me,Be=oe.bp();if(Fe>0)oe.aS(Be,he,[fe[0]*Fe,fe[1]*Fe,fe[2]*Fe]);else{const We=oe.bp();oe.aS(We,he,[2*fe[0],2*fe[1],2*fe[2]]);const Je=oe.b1(this._cachedClippingPlane,We);oe.aU(Be,We,[this._cachedClippingPlane[0]*Je,this._cachedClippingPlane[1]*Je,this._cachedClippingPlane[2]*Je])}const $e=function(We){const Je=oe.bp();return Je[0]=We[0]*-We[3],Je[1]=We[1]*-We[3],Je[2]=We[2]*-We[3],{center:Je,radius:Math.sqrt(1-We[3]*We[3])}}(we);return Sc(function(We,Je,Xe){const st=oe.bp();oe.aU(st,Xe,We);const ht=oe.bp();return oe.bq(ht,We,st,Je/oe.a$(st)),ht}($e.center,$e.radius,Be))}getMatrixForModel(re,he){const fe=oe.S.convert(re),_e=1/oe.bu,we=oe.b9();return oe.bz(we,we,fe.lng/180*Math.PI),oe.b7(we,we,-fe.lat/180*Math.PI),oe.M(we,we,[0,0,1+he/oe.bu]),oe.b7(we,we,.5*Math.PI),oe.N(we,we,[_e,_e,_e]),we}getProjectionDataForCustomLayer(re=!0){const he=this.getProjectionData({overscaledTileID:new oe.Z(0,0,0,0,0),applyGlobeMatrix:re});return he.tileMercatorCoords=[0,0,1,1],he}getFastPathSimpleProjectionMatrix(re){}}class ga{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(re){this._helper.setMinZoom(re)}setMaxZoom(re){this._helper.setMaxZoom(re)}setMinPitch(re){this._helper.setMinPitch(re)}setMaxPitch(re){this._helper.setMaxPitch(re)}setRenderWorldCopies(re){this._helper.setRenderWorldCopies(re)}setBearing(re){this._helper.setBearing(re)}setPitch(re){this._helper.setPitch(re)}setRoll(re){this._helper.setRoll(re)}setFov(re){this._helper.setFov(re)}setZoom(re){this._helper.setZoom(re)}setCenter(re){this._helper.setCenter(re)}setElevation(re){this._helper.setElevation(re)}setMinElevationForCurrentTile(re){this._helper.setMinElevationForCurrentTile(re)}setPadding(re){this._helper.setPadding(re)}interpolatePadding(re,he,fe){return this._helper.interpolatePadding(re,he,fe)}isPaddingEqual(re){return this._helper.isPaddingEqual(re)}resize(re,he,fe=!0){this._helper.resize(re,he,fe)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(re){this._helper.setMaxBounds(re)}setConstrain(re){this._helper.setConstrain(re)}overrideNearFarZ(re,he){this._helper.overrideNearFarZ(re,he)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(re){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),re)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrain(){return this._helper.constrain}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(re,he){this._globeness=re,this._globeLatitudeErrorCorrectionRadians=he,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(re){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this.defaultConstrain=(he,fe)=>this.currentTransform.defaultConstrain(he,fe),this._helper=new on({calcMatrices:()=>{this._calcMatrices()},constrain:(he,fe)=>this.defaultConstrain(he,fe)},re),this._globeness=1,this._mercatorTransform=new Sn,this._verticalPerspectiveTransform=new ma}clone(){const re=new ga;return re._globeness=this._globeness,re._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,re.apply(this),re}apply(re){this._helper.apply(re),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(re){const he=this._mercatorTransform.getProjectionData(re),fe=this._verticalPerspectiveTransform.getProjectionData(re);return{mainMatrix:this.isGlobeRendering?fe.mainMatrix:he.mainMatrix,clippingPlane:fe.clippingPlane,tileMercatorCoords:fe.tileMercatorCoords,projectionTransition:re.applyGlobeMatrix?this._globeness:0,fallbackMatrix:he.fallbackMatrix}}isLocationOccluded(re){return this.currentTransform.isLocationOccluded(re)}transformLightDirection(re){return this.currentTransform.transformLightDirection(re)}getPixelScale(){return oe.bk(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return oe.bk(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(re,he,fe){const _e=this._mercatorTransform.getPitchedTextCorrection(re,he,fe),we=this._verticalPerspectiveTransform.getPitchedTextCorrection(re,he,fe);return oe.bk(_e,we,this._globeness)}projectTileCoordinates(re,he,fe,_e){return this.currentTransform.projectTileCoordinates(re,he,fe,_e)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(re){return this.currentTransform.calculateFogMatrix(re)}getVisibleUnwrappedCoordinates(re){return this.currentTransform.getVisibleUnwrappedCoordinates(re)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(re){this._mercatorTransform.recalculateZoomAndCenter(re),this._verticalPerspectiveTransform.recalculateZoomAndCenter(re)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(re,he){return this.currentTransform.lngLatToCameraDepth(re,he)}populateCache(re){this._mercatorTransform.populateCache(re),this._verticalPerspectiveTransform.populateCache(re)}getBounds(){return this.currentTransform.getBounds()}calculateCenterFromCameraLngLatAlt(re,he,fe,_e){return this._helper.calculateCenterFromCameraLngLatAlt(re,he,fe,_e)}setLocationAtPoint(re,he){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(re,he),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(re,he),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(re,he){return this.currentTransform.locationToScreenPoint(re,he)}screenPointToMercatorCoordinate(re,he){return this.currentTransform.screenPointToMercatorCoordinate(re,he)}screenPointToLocation(re,he){return this.currentTransform.screenPointToLocation(re,he)}isPointOnMapSurface(re,he){return this.currentTransform.isPointOnMapSurface(re,he)}getRayDirectionFromPixel(re){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(re)}getMatrixForModel(re,he){return this.currentTransform.getMatrixForModel(re,he)}getProjectionDataForCustomLayer(re=!0){const he=this._mercatorTransform.getProjectionDataForCustomLayer(re);if(!this.isGlobeRendering)return he;const fe=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(re);return fe.fallbackMatrix=he.mainMatrix,fe}getFastPathSimpleProjectionMatrix(re){return this.currentTransform.getFastPathSimpleProjectionMatrix(re)}}class Jn{get useGlobeControls(){return!0}handlePanInertia(re,he){const fe=Tc(re,he);return Math.abs(fe.lng-he.center.lng)>180&&(fe.lng=he.center.lng+179.5*Math.sign(fe.lng-he.center.lng)),{easingCenter:fe,easingOffset:new oe.P(0,0)}}handleMapControlsRollPitchBearingZoom(re,he){const fe=re.around,_e=he.screenPointToLocation(fe);re.bearingDelta&&he.setBearing(he.bearing+re.bearingDelta),re.pitchDelta&&he.setPitch(he.pitch+re.pitchDelta),re.rollDelta&&he.setRoll(he.roll+re.rollDelta);const we=he.zoom;re.zoomDelta&&he.setZoom(he.zoom+re.zoomDelta);const Me=he.zoom-we;if(Me===0)return;const Fe=oe.bA(he.center.lng,_e.lng),Be=Fe/(Math.abs(Fe/180)+1),$e=oe.bA(he.center.lat,_e.lat),We=he.getRayDirectionFromPixel(fe),Je=he.cameraPosition,Xe=-1*oe.aX(Je,We),st=oe.bp();oe.aS(st,Je,[We[0]*Xe,We[1]*Xe,We[2]*Xe]);const ht=oe.aZ(st)-1,vt=Math.exp(.5*-Math.max(ht-.3,0)),bt=Ts(he.worldSize,he.center.lat)/Math.min(he.width,he.height),xt=oe.bn(bt,.9,.5,1,.25),Ct=(1-oe.ah(-Me))*Math.min(vt,xt),kt=he.center.lat,Tt=he.zoom,Lt=new oe.S(he.center.lng+Be*Ct,oe.ae(he.center.lat+$e*Ct,-oe.af,oe.af));he.setLocationAtPoint(_e,fe);const Rt=he.center,Pt=oe.bn(Math.abs(Fe),45,85,0,1),Nt=oe.bn(bt,.75,.35,0,1),Yt=Math.pow(Math.max(Pt,Nt),.25),Wt=oe.bA(Rt.lng,Lt.lng),Ut=oe.bA(Rt.lat,Lt.lat);he.setCenter(new oe.S(Rt.lng+Wt*Yt,Rt.lat+Ut*Yt).wrap()),he.setZoom(Tt+ln(kt,he.center.lat))}handleMapControlsPan(re,he,fe){if(!re.panDelta)return;const _e=he.center.lat,we=he.zoom;he.setCenter(Tc(re.panDelta,he).wrap()),he.setZoom(we+ln(_e,he.center.lat))}cameraForBoxAndBearing(re,he,fe,_e,we){const Me=ro(re,he,fe,_e,we),Fe=he.left/we.width*2-1,Be=(we.width-he.right)/we.width*2-1,$e=he.top/we.height*-2+1,We=(we.height-he.bottom)/we.height*-2+1,Je=oe.bA(fe.getWest(),fe.getEast())<0,Xe=Je?fe.getEast():fe.getWest(),st=Je?fe.getWest():fe.getEast(),ht=Math.max(fe.getNorth(),fe.getSouth()),vt=Math.min(fe.getNorth(),fe.getSouth()),bt=Xe+.5*oe.bA(Xe,st),xt=ht+.5*oe.bA(ht,vt),Ct=we.clone();Ct.setCenter(Me.center),Ct.setBearing(Me.bearing),Ct.setPitch(0),Ct.setRoll(0),Ct.setZoom(Me.zoom);const kt=Ct.modelViewProjectionMatrix,Tt=[an(fe.getNorthWest()),an(fe.getNorthEast()),an(fe.getSouthWest()),an(fe.getSouthEast()),an(new oe.S(st,xt)),an(new oe.S(Xe,xt)),an(new oe.S(bt,ht)),an(new oe.S(bt,vt))],Lt=an(Me.center);let Rt=Number.POSITIVE_INFINITY;for(const Pt of Tt)Fe<0&&(Rt=Jn.getLesserNonNegativeNonNull(Rt,Jn.solveVectorScale(Pt,Lt,kt,"x",Fe))),Be>0&&(Rt=Jn.getLesserNonNegativeNonNull(Rt,Jn.solveVectorScale(Pt,Lt,kt,"x",Be))),$e>0&&(Rt=Jn.getLesserNonNegativeNonNull(Rt,Jn.solveVectorScale(Pt,Lt,kt,"y",$e))),We<0&&(Rt=Jn.getLesserNonNegativeNonNull(Rt,Jn.solveVectorScale(Pt,Lt,kt,"y",We)));if(Number.isFinite(Rt)&&Rt!==0)return Me.zoom=Ct.zoom+oe.ak(Rt),Me;On()}handleJumpToCenterZoom(re,he){const fe=re.center.lat,_e=re.constrain(he.center?oe.S.convert(he.center):re.center,re.zoom).center;re.setCenter(_e.wrap());const we=he.zoom!==void 0?+he.zoom:re.zoom+ln(fe,_e.lat);re.zoom!==we&&re.setZoom(we)}handleEaseTo(re,he){const fe=re.zoom,_e=re.center,we=re.padding,Me={roll:re.roll,pitch:re.pitch,bearing:re.bearing},Fe={roll:he.roll===void 0?re.roll:he.roll,pitch:he.pitch===void 0?re.pitch:he.pitch,bearing:he.bearing===void 0?re.bearing:he.bearing},Be=he.zoom!==void 0,$e=!re.isPaddingEqual(he.padding);let We=!1;const Je=he.center?oe.S.convert(he.center):_e,Xe=re.constrain(Je,fe).center;dn(re,Xe);const st=re.clone();st.setCenter(Xe),st.setZoom(Be?+he.zoom:fe+ln(_e.lat,Je.lat)),st.setBearing(he.bearing);const ht=new oe.P(oe.ae(re.centerPoint.x+he.offsetAsPoint.x,0,re.width),oe.ae(re.centerPoint.y+he.offsetAsPoint.y,0,re.height));st.setLocationAtPoint(Xe,ht);const vt=(he.offset&&he.offsetAsPoint.mag())>0?st.center:Xe,bt=Be?+he.zoom:fe+ln(_e.lat,vt.lat),xt=fe+ln(_e.lat,0),Ct=bt+ln(vt.lat,0),kt=oe.bA(_e.lng,vt.lng),Tt=oe.bA(_e.lat,vt.lat),Lt=oe.ah(Ct-xt);return We=bt!==fe,{easeFunc:Rt=>{if(oe.be(Me,Fe)||_l({startEulerAngles:Me,endEulerAngles:Fe,tr:re,k:Rt,useSlerp:Me.roll!=Fe.roll}),$e&&re.interpolatePadding(we,he.padding,Rt),he.around)oe.w("Easing around a point is not supported under globe projection."),re.setLocationAtPoint(he.around,he.aroundPoint);else{const Pt=Ct>xt?Math.min(2,Lt):Math.max(.5,Lt),Nt=Math.pow(Pt,1-Rt),Yt=zn(_e,kt,Tt,Rt*Nt);re.setCenter(Yt.wrap())}if(We){const Pt=oe.C.number(xt,Ct,Rt)+ln(0,re.center.lat);re.setZoom(Pt)}},isZooming:We,elevationCenter:vt}}handleFlyTo(re,he){const fe=he.zoom!==void 0,_e=re.center,we=re.zoom,Me=re.padding,Fe=!re.isPaddingEqual(he.padding),Be=re.constrain(oe.S.convert(he.center||he.locationAtOffset),we).center,$e=fe?+he.zoom:re.zoom+ln(re.center.lat,Be.lat),We=re.clone();We.setCenter(Be),We.setZoom($e),We.setBearing(he.bearing);const Je=new oe.P(oe.ae(re.centerPoint.x+he.offsetAsPoint.x,0,re.width),oe.ae(re.centerPoint.y+he.offsetAsPoint.y,0,re.height));We.setLocationAtPoint(Be,Je);const Xe=We.center;dn(re,Xe);const st=function(Tt,Lt,Rt){const Pt=an(Lt),Nt=an(Rt),Yt=oe.aX(Pt,Nt),Wt=Math.acos(Yt),Ut=pa(Tt);return Wt/(2*Math.PI)*Ut}(re,_e,Xe),ht=we+ln(_e.lat,0),vt=$e+ln(Xe.lat,0),bt=oe.ah(vt-ht);let xt;if(typeof he.minZoom=="number"){const Tt=+he.minZoom+ln(Xe.lat,0),Lt=Math.min(Tt,ht,vt)+ln(0,Xe.lat),Rt=re.constrain(Xe,Lt).zoom+ln(Xe.lat,0);xt=oe.ah(Rt-ht)}const Ct=oe.bA(_e.lng,Xe.lng),kt=oe.bA(_e.lat,Xe.lat);return{easeFunc:(Tt,Lt,Rt,Pt)=>{const Nt=zn(_e,Ct,kt,Rt);Fe&&re.interpolatePadding(Me,he.padding,Tt);const Yt=Tt===1?Xe:Nt;re.setCenter(Yt.wrap());const Wt=ht+oe.ak(Lt);re.setZoom(Tt===1?$e:Wt+ln(0,Yt.lat))},scaleOfZoom:bt,targetCenter:Xe,scaleOfMinZoom:xt,pixelPathLength:st}}static solveVectorScale(re,he,fe,_e,we){const Me=_e==="x"?[fe[0],fe[4],fe[8],fe[12]]:[fe[1],fe[5],fe[9],fe[13]],Fe=[fe[3],fe[7],fe[11],fe[15]],Be=re[0]*Me[0]+re[1]*Me[1]+re[2]*Me[2],$e=re[0]*Fe[0]+re[1]*Fe[1]+re[2]*Fe[2],We=he[0]*Me[0]+he[1]*Me[1]+he[2]*Me[2],Je=he[0]*Fe[0]+he[1]*Fe[1]+he[2]*Fe[2];return We+we*$e===Be+we*Je||Fe[3]*(Be-We)+Me[3]*(Je-$e)+Be*Je==We*$e?null:(We+Me[3]-we*Je-we*Fe[3])/(We-Be-we*Je+we*$e)}static getLesserNonNegativeNonNull(re,he){return he!==null&&he>=0&&he<re?he:re}}class Pc{constructor(re){this._globe=re,this._mercatorCameraHelper=new Gi,this._verticalPerspectiveCameraHelper=new Jn}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(re,he){return this.currentHelper.handlePanInertia(re,he)}handleMapControlsRollPitchBearingZoom(re,he){return this.currentHelper.handleMapControlsRollPitchBearingZoom(re,he)}handleMapControlsPan(re,he,fe){this.currentHelper.handleMapControlsPan(re,he,fe)}cameraForBoxAndBearing(re,he,fe,_e,we){return this.currentHelper.cameraForBoxAndBearing(re,he,fe,_e,we)}handleJumpToCenterZoom(re,he){this.currentHelper.handleJumpToCenterZoom(re,he)}handleEaseTo(re,he){return this.currentHelper.handleEaseTo(re,he)}handleFlyTo(re,he){return this.currentHelper.handleFlyTo(re,he)}}const _a=(be,re)=>oe.y(be,re&&re.filter(he=>he.identifier!=="source.canvas")),Uh=oe.bE();class so extends oe.E{constructor(re,he={}){var fe,_e;super(),this._rtlPluginLoaded=()=>{for(const Me in this.sourceCaches){const Fe=this.sourceCaches[Me].getSource().type;Fe!=="vector"&&Fe!=="geojson"||this.sourceCaches[Me].reload()}},this.map=re,this.dispatcher=new Nr(Lr(),re._getMapId()),this.dispatcher.registerMessageHandler("GG",(Me,Fe)=>this.getGlyphs(Me,Fe)),this.dispatcher.registerMessageHandler("GI",(Me,Fe)=>this.getImages(Me,Fe)),this.dispatcher.registerMessageHandler("GDA",(Me,Fe)=>this.getDashes(Me,Fe)),this.imageManager=new ft,this.imageManager.setEventedParent(this);const we=((fe=re._container)===null||fe===void 0?void 0:fe.lang)||typeof document!="undefined"&&((_e=document.documentElement)===null||_e===void 0?void 0:_e.lang)||void 0;this.glyphManager=new _t(re._requestManager,he.localIdeographFontFamily,we),this.lineAtlas=new lt(256,512),this.crossTileSymbolIndex=new Bs,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new oe.bF,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",oe.bG()),ir().on(Ft,this._rtlPluginLoaded),this.on("data",Me=>{if(Me.dataType!=="source"||Me.sourceDataType!=="metadata")return;const Fe=this.sourceCaches[Me.sourceId];if(!Fe)return;const Be=Fe.getSource();if(Be&&Be.vectorLayerIds)for(const $e in this._layers){const We=this._layers[$e];We.source===Be.id&&this._validateLayer(We)}})}setGlobalStateProperty(re,he){var fe,_e,we;this._checkLoaded();const Me=he===null?(we=(_e=(fe=this.stylesheet.state)===null||fe===void 0?void 0:fe[re])===null||_e===void 0?void 0:_e.default)!==null&&we!==void 0?we:null:he;if(oe.bH(Me,this._globalState[re]))return this;this._globalState[re]=Me,this._applyGlobalStateChanges([re])}getGlobalState(){return this._globalState}setGlobalState(re){this._checkLoaded();const he=[];for(const fe in re)!oe.bH(this._globalState[fe],re[fe].default)&&(he.push(fe),this._globalState[fe]=re[fe].default);this._applyGlobalStateChanges(he)}_applyGlobalStateChanges(re){if(re.length===0)return;const he=new Set,fe={};for(const _e of re){fe[_e]=this._globalState[_e];for(const we in this._layers){const Me=this._layers[we],Fe=Me.getLayoutAffectingGlobalStateRefs(),Be=Me.getPaintAffectingGlobalStateRefs();if(Fe.has(_e)&&he.add(Me.source),Be.has(_e))for(const{name:$e,value:We}of Be.get(_e))this._updatePaintProperty(Me,$e,We)}}this.dispatcher.broadcast("UGS",fe);for(const _e in this.sourceCaches)he.has(_e)&&(this._reloadSource(_e),this._changed=!0)}loadURL(re,he={},fe){this.fire(new oe.l("dataloading",{dataType:"style"})),he.validate=typeof he.validate!="boolean"||he.validate;const _e=this.map._requestManager.transformRequest(re,"Style");this._loadStyleRequest=new AbortController;const we=this._loadStyleRequest;oe.j(_e,this._loadStyleRequest).then(Me=>{this._loadStyleRequest=null,this._load(Me.data,he,fe)}).catch(Me=>{this._loadStyleRequest=null,Me&&!we.signal.aborted&&this.fire(new oe.k(Me))})}loadJSON(re,he={},fe){this.fire(new oe.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,ye.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,he.validate=he.validate!==!1,this._load(re,he,fe)}).catch(()=>{})}loadEmpty(){this.fire(new oe.l("dataloading",{dataType:"style"})),this._load(Uh,{validate:!1})}_load(re,he,fe){var _e,we;let Me=he.transformStyle?he.transformStyle(fe,re):re;if(!he.validate||!_a(this,oe.z(Me))){Me=Object.assign({},Me),this._loaded=!0,this.stylesheet=Me;for(const Fe in Me.sources)this.addSource(Fe,Me.sources[Fe],{validate:!1});Me.sprite?this._loadSprite(Me.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(Me.glyphs),this._createLayers(),this.light=new Ge(this.stylesheet.light),this._setProjectionInternal(((_e=this.stylesheet.projection)===null||_e===void 0?void 0:_e.type)||"mercator"),this.sky=new Ke(this.stylesheet.sky),this.map.setTerrain((we=this.stylesheet.terrain)!==null&&we!==void 0?we:null),this.fire(new oe.l("data",{dataType:"style"})),this.fire(new oe.l("style.load"))}}_createLayers(){var re,he,fe;const _e=oe.bI(this.stylesheet.layers);this.setGlobalState((re=this.stylesheet.state)!==null&&re!==void 0?re:null),this.dispatcher.broadcast("SL",_e),this._order=_e.map(we=>we.id),this._layers={},this._serializedLayers=null;for(const we of _e){const Me=oe.bJ(we,this._globalState);if(Me.setEventedParent(this,{layer:{id:we.id}}),this._layers[we.id]=Me,oe.bK(Me)&&this.sourceCaches[Me.source]){const Fe=(fe=(he=we.paint)===null||he===void 0?void 0:he["raster-fade-duration"])!==null&&fe!==void 0?fe:Me.paint.get("raster-fade-duration");this.sourceCaches[Me.source].setRasterFadeDuration(Fe)}}}_loadSprite(re,he=!1,fe=void 0){let _e;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(we,Me,Fe,Be){return oe._(this,void 0,void 0,function*(){const $e=Ye(we),We=Fe>1?"@2x":"",Je={},Xe={};for(const{id:st,url:ht}of $e){const vt=Me.transformRequest(ct(ht,We,".json"),"SpriteJSON");Je[st]=oe.j(vt,Be);const bt=Me.transformRequest(ct(ht,We,".png"),"SpriteImage");Xe[st]=Ze.getImage(bt,Be)}return yield Promise.all([...Object.values(Je),...Object.values(Xe)]),function(st,ht){return oe._(this,void 0,void 0,function*(){const vt={};for(const bt in st){vt[bt]={};const xt=ye.getImageCanvasContext((yield ht[bt]).data),Ct=(yield st[bt]).data;for(const kt in Ct){const{width:Tt,height:Lt,x:Rt,y:Pt,sdf:Nt,pixelRatio:Yt,stretchX:Wt,stretchY:Ut,content:Kt,textFitWidth:br,textFitHeight:xr}=Ct[kt];vt[bt][kt]={data:null,pixelRatio:Yt,sdf:Nt,stretchX:Wt,stretchY:Ut,content:Kt,textFitWidth:br,textFitHeight:xr,spriteData:{width:Tt,height:Lt,x:Rt,y:Pt,context:xt}}}}return vt})}(Je,Xe)})}(re,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(we=>{if(this._spriteRequest=null,we)for(const Me in we){this._spritesImagesIds[Me]=[];const Fe=this._spritesImagesIds[Me]?this._spritesImagesIds[Me].filter(Be=>!(Be in we)):[];for(const Be of Fe)this.imageManager.removeImage(Be),this._changedImages[Be]=!0;for(const Be in we[Me]){const $e=Me==="default"?Be:`${Me}:${Be}`;this._spritesImagesIds[Me].push($e),$e in this.imageManager.images?this.imageManager.updateImage($e,we[Me][Be],!1):this.imageManager.addImage($e,we[Me][Be]),he&&(this._changedImages[$e]=!0)}}}).catch(we=>{this._spriteRequest=null,_e=we,this.fire(new oe.k(_e))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),he&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new oe.l("data",{dataType:"style"})),fe&&fe(_e)})}_unloadSprite(){for(const re of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(re),this._changedImages[re]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new oe.l("data",{dataType:"style"}))}_validateLayer(re){const he=this.sourceCaches[re.source];if(!he)return;const fe=re.sourceLayer;if(!fe)return;const _e=he.getSource();(_e.type==="geojson"||_e.vectorLayerIds&&_e.vectorLayerIds.indexOf(fe)===-1)&&this.fire(new oe.k(new Error(`Source layer "${fe}" does not exist on source "${_e.id}" as specified by style layer "${re.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const re in this.sourceCaches)if(!this.sourceCaches[re].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(re,he=!1){const fe=this._serializedAllLayers();if(!re||re.length===0)return Object.values(he?oe.bL(fe):fe);const _e=[];for(const we of re)if(fe[we]){const Me=he?oe.bL(fe[we]):fe[we];_e.push(Me)}return _e}_serializedAllLayers(){let re=this._serializedLayers;if(re)return re;re=this._serializedLayers={};const he=Object.keys(this._layers);for(const fe of he){const _e=this._layers[fe];_e.type!=="custom"&&(re[fe]=_e.serialize())}return re}hasTransitions(){var re,he,fe;if(!((re=this.light)===null||re===void 0)&&re.hasTransition()||!((he=this.sky)===null||he===void 0)&&he.hasTransition()||!((fe=this.projection)===null||fe===void 0)&&fe.hasTransition())return!0;for(const _e in this.sourceCaches)if(this.sourceCaches[_e].hasTransition())return!0;for(const _e in this._layers)if(this._layers[_e].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(re){if(!this._loaded)return;const he=this._changed;if(he){const _e=Object.keys(this._updatedLayers),we=Object.keys(this._removedLayers);(_e.length||we.length)&&this._updateWorkerLayers(_e,we);for(const Me in this._updatedSources){const Fe=this._updatedSources[Me];if(Fe==="reload")this._reloadSource(Me);else{if(Fe!=="clear")throw new Error(`Invalid action ${Fe}`);this._clearSource(Me)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const Me in this._updatedPaintProps)this._layers[Me].updateTransitions(re);this.light.updateTransitions(re),this.sky.updateTransitions(re),this._resetUpdates()}const fe={};for(const _e in this.sourceCaches){const we=this.sourceCaches[_e];fe[_e]=we.used,we.used=!1}for(const _e of this._order){const we=this._layers[_e];we.recalculate(re,this._availableImages),!we.isHidden(re.zoom)&&we.source&&(this.sourceCaches[we.source].used=!0)}for(const _e in fe){const we=this.sourceCaches[_e];!!fe[_e]!=!!we.used&&we.fire(new oe.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:_e}))}this.light.recalculate(re),this.sky.recalculate(re),this.projection.recalculate(re),this.z=re.zoom,he&&this.fire(new oe.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const re=Object.keys(this._changedImages);if(re.length){for(const he in this.sourceCaches)this.sourceCaches[he].reloadTilesForDependencies(["icons","patterns"],re);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const re in this.sourceCaches)this.sourceCaches[re].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(re,he){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(re,!1),removedIds:he})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(re,he={}){var fe;this._checkLoaded();const _e=this.serialize();if(re=he.transformStyle?he.transformStyle(_e,re):re,((fe=he.validate)===null||fe===void 0||fe)&&_a(this,oe.z(re)))return!1;(re=oe.bL(re)).layers=oe.bI(re.layers);const we=oe.bM(_e,re),Me=this._getOperationsToPerform(we);if(Me.unimplemented.length>0)throw new Error(`Unimplemented: ${Me.unimplemented.join(", ")}.`);if(Me.operations.length===0)return!1;for(const Fe of Me.operations)Fe();return this.stylesheet=re,this._serializedLayers=null,!0}_getOperationsToPerform(re){const he=[],fe=[];for(const _e of re)switch(_e.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":he.push(()=>this.addLayer.apply(this,_e.args));break;case"removeLayer":he.push(()=>this.removeLayer.apply(this,_e.args));break;case"setPaintProperty":he.push(()=>this.setPaintProperty.apply(this,_e.args));break;case"setLayoutProperty":he.push(()=>this.setLayoutProperty.apply(this,_e.args));break;case"setFilter":he.push(()=>this.setFilter.apply(this,_e.args));break;case"addSource":he.push(()=>this.addSource.apply(this,_e.args));break;case"removeSource":he.push(()=>this.removeSource.apply(this,_e.args));break;case"setLayerZoomRange":he.push(()=>this.setLayerZoomRange.apply(this,_e.args));break;case"setLight":he.push(()=>this.setLight.apply(this,_e.args));break;case"setGeoJSONSourceData":he.push(()=>this.setGeoJSONSourceData.apply(this,_e.args));break;case"setGlyphs":he.push(()=>this.setGlyphs.apply(this,_e.args));break;case"setSprite":he.push(()=>this.setSprite.apply(this,_e.args));break;case"setTerrain":he.push(()=>this.map.setTerrain.apply(this,_e.args));break;case"setSky":he.push(()=>this.setSky.apply(this,_e.args));break;case"setProjection":this.setProjection.apply(this,_e.args);break;case"setGlobalState":he.push(()=>this.setGlobalState.apply(this,_e.args));break;case"setTransition":he.push(()=>{});break;default:fe.push(_e.command)}return{operations:he,unimplemented:fe}}addImage(re,he){if(this.getImage(re))return this.fire(new oe.k(new Error(`An image named "${re}" already exists.`)));this.imageManager.addImage(re,he),this._afterImageUpdated(re)}updateImage(re,he){this.imageManager.updateImage(re,he)}getImage(re){return this.imageManager.getImage(re)}removeImage(re){if(!this.getImage(re))return this.fire(new oe.k(new Error(`An image named "${re}" does not exist.`)));this.imageManager.removeImage(re),this._afterImageUpdated(re)}_afterImageUpdated(re){this._availableImages=this.imageManager.listImages(),this._changedImages[re]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new oe.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(re,he,fe={}){if(this._checkLoaded(),this.sourceCaches[re]!==void 0)throw new Error(`Source "${re}" already exists.`);if(!he.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(he).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(he.type)>=0&&this._validate(oe.z.source,`sources.${re}`,he,null,fe))return;this.map&&this.map._collectResourceTiming&&(he.collectResourceTiming=!0);const _e=this.sourceCaches[re]=new mr(re,he,this.dispatcher);_e.style=this,_e.setEventedParent(this,()=>({isSourceLoaded:_e.loaded(),source:_e.serialize(),sourceId:re})),_e.onAdd(this.map),this._changed=!0}removeSource(re){if(this._checkLoaded(),this.sourceCaches[re]===void 0)throw new Error("There is no source with this ID");for(const fe in this._layers)if(this._layers[fe].source===re)return this.fire(new oe.k(new Error(`Source "${re}" cannot be removed while layer "${fe}" is using it.`)));const he=this.sourceCaches[re];delete this.sourceCaches[re],delete this._updatedSources[re],he.fire(new oe.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:re})),he.setEventedParent(null),he.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(re,he){if(this._checkLoaded(),this.sourceCaches[re]===void 0)throw new Error(`There is no source with this ID=${re}`);const fe=this.sourceCaches[re].getSource();if(fe.type!=="geojson")throw new Error(`geojsonSource.type is ${fe.type}, which is !== 'geojson`);fe.setData(he),this._changed=!0}getSource(re){return this.sourceCaches[re]&&this.sourceCaches[re].getSource()}addLayer(re,he,fe={}){this._checkLoaded();const _e=re.id;if(this.getLayer(_e))return void this.fire(new oe.k(new Error(`Layer "${_e}" already exists on this map.`)));let we;if(re.type==="custom"){if(_a(this,oe.bN(re)))return;we=oe.bJ(re,this._globalState)}else{if("source"in re&&typeof re.source=="object"&&(this.addSource(_e,re.source),re=oe.bL(re),re=oe.e(re,{source:_e})),this._validate(oe.z.layer,`layers.${_e}`,re,{arrayIndex:-1},fe))return;we=oe.bJ(re,this._globalState),this._validateLayer(we),we.setEventedParent(this,{layer:{id:_e}})}const Me=he?this._order.indexOf(he):this._order.length;if(he&&Me===-1)this.fire(new oe.k(new Error(`Cannot add layer "${_e}" before non-existing layer "${he}".`)));else{if(this._order.splice(Me,0,_e),this._layerOrderChanged=!0,this._layers[_e]=we,this._removedLayers[_e]&&we.source&&we.type!=="custom"){const Fe=this._removedLayers[_e];delete this._removedLayers[_e],Fe.type!==we.type?this._updatedSources[we.source]="clear":(this._updatedSources[we.source]="reload",this.sourceCaches[we.source].pause())}this._updateLayer(we),we.onAdd&&we.onAdd(this.map)}}moveLayer(re,he){if(this._checkLoaded(),this._changed=!0,!this._layers[re])return void this.fire(new oe.k(new Error(`The layer '${re}' does not exist in the map's style and cannot be moved.`)));if(re===he)return;const fe=this._order.indexOf(re);this._order.splice(fe,1);const _e=he?this._order.indexOf(he):this._order.length;he&&_e===-1?this.fire(new oe.k(new Error(`Cannot move layer "${re}" before non-existing layer "${he}".`))):(this._order.splice(_e,0,re),this._layerOrderChanged=!0)}removeLayer(re){this._checkLoaded();const he=this._layers[re];if(!he)return void this.fire(new oe.k(new Error(`Cannot remove non-existing layer "${re}".`)));he.setEventedParent(null);const fe=this._order.indexOf(re);this._order.splice(fe,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[re]=he,delete this._layers[re],this._serializedLayers&&delete this._serializedLayers[re],delete this._updatedLayers[re],delete this._updatedPaintProps[re],he.onRemove&&he.onRemove(this.map)}getLayer(re){return this._layers[re]}getLayersOrder(){return[...this._order]}hasLayer(re){return re in this._layers}setLayerZoomRange(re,he,fe){this._checkLoaded();const _e=this.getLayer(re);_e?_e.minzoom===he&&_e.maxzoom===fe||(he!=null&&(_e.minzoom=he),fe!=null&&(_e.maxzoom=fe),this._updateLayer(_e)):this.fire(new oe.k(new Error(`Cannot set the zoom range of non-existing layer "${re}".`)))}setFilter(re,he,fe={}){this._checkLoaded();const _e=this.getLayer(re);if(_e){if(!oe.bH(_e.filter,he))return he==null?(_e.setFilter(void 0),void this._updateLayer(_e)):void(this._validate(oe.z.filter,`layers.${_e.id}.filter`,he,null,fe)||(_e.setFilter(oe.bL(he)),this._updateLayer(_e)))}else this.fire(new oe.k(new Error(`Cannot filter non-existing layer "${re}".`)))}getFilter(re){return oe.bL(this.getLayer(re).filter)}setLayoutProperty(re,he,fe,_e={}){this._checkLoaded();const we=this.getLayer(re);we?oe.bH(we.getLayoutProperty(he),fe)||(we.setLayoutProperty(he,fe,_e),this._updateLayer(we)):this.fire(new oe.k(new Error(`Cannot style non-existing layer "${re}".`)))}getLayoutProperty(re,he){const fe=this.getLayer(re);if(fe)return fe.getLayoutProperty(he);this.fire(new oe.k(new Error(`Cannot get style of non-existing layer "${re}".`)))}setPaintProperty(re,he,fe,_e={}){this._checkLoaded();const we=this.getLayer(re);we?oe.bH(we.getPaintProperty(he),fe)||this._updatePaintProperty(we,he,fe,_e):this.fire(new oe.k(new Error(`Cannot style non-existing layer "${re}".`)))}_updatePaintProperty(re,he,fe,_e={}){re.setPaintProperty(he,fe,_e)&&this._updateLayer(re),oe.bK(re)&&he==="raster-fade-duration"&&this.sourceCaches[re.source].setRasterFadeDuration(fe),this._changed=!0,this._updatedPaintProps[re.id]=!0,this._serializedLayers=null}getPaintProperty(re,he){return this.getLayer(re).getPaintProperty(he)}setFeatureState(re,he){this._checkLoaded();const fe=re.source,_e=re.sourceLayer,we=this.sourceCaches[fe];if(we===void 0)return void this.fire(new oe.k(new Error(`The source '${fe}' does not exist in the map's style.`)));const Me=we.getSource().type;Me==="geojson"&&_e?this.fire(new oe.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):Me!=="vector"||_e?(re.id===void 0&&this.fire(new oe.k(new Error("The feature id parameter must be provided."))),we.setFeatureState(_e,re.id,he)):this.fire(new oe.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(re,he){this._checkLoaded();const fe=re.source,_e=this.sourceCaches[fe];if(_e===void 0)return void this.fire(new oe.k(new Error(`The source '${fe}' does not exist in the map's style.`)));const we=_e.getSource().type,Me=we==="vector"?re.sourceLayer:void 0;we!=="vector"||Me?he&&typeof re.id!="string"&&typeof re.id!="number"?this.fire(new oe.k(new Error("A feature id is required to remove its specific state property."))):_e.removeFeatureState(Me,re.id,he):this.fire(new oe.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(re){this._checkLoaded();const he=re.source,fe=re.sourceLayer,_e=this.sourceCaches[he];if(_e!==void 0)return _e.getSource().type!=="vector"||fe?(re.id===void 0&&this.fire(new oe.k(new Error("The feature id parameter must be provided."))),_e.getFeatureState(fe,re.id)):void this.fire(new oe.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new oe.k(new Error(`The source '${he}' does not exist in the map's style.`)))}getTransition(){return oe.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const re=oe.bO(this.sourceCaches,we=>we.serialize()),he=this._serializeByIds(this._order,!0),fe=this.map.getTerrain()||void 0,_e=this.stylesheet;return oe.bP({version:_e.version,name:_e.name,metadata:_e.metadata,light:_e.light,sky:_e.sky,center:_e.center,zoom:_e.zoom,bearing:_e.bearing,pitch:_e.pitch,sprite:_e.sprite,glyphs:_e.glyphs,transition:_e.transition,projection:_e.projection,sources:re,layers:he,terrain:fe},we=>we!==void 0)}_updateLayer(re){this._updatedLayers[re.id]=!0,re.source&&!this._updatedSources[re.source]&&this.sourceCaches[re.source].getSource().type!=="raster"&&(this._updatedSources[re.source]="reload",this.sourceCaches[re.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(re){const he=Me=>this._layers[Me].type==="fill-extrusion",fe={},_e=[];for(let Me=this._order.length-1;Me>=0;Me--){const Fe=this._order[Me];if(he(Fe)){fe[Fe]=Me;for(const Be of re){const $e=Be[Fe];if($e)for(const We of $e)_e.push(We)}}}_e.sort((Me,Fe)=>Fe.intersectionZ-Me.intersectionZ);const we=[];for(let Me=this._order.length-1;Me>=0;Me--){const Fe=this._order[Me];if(he(Fe))for(let Be=_e.length-1;Be>=0;Be--){const $e=_e[Be].feature;if(fe[$e.layer.id]<Me)break;we.push($e),_e.pop()}else for(const Be of re){const $e=Be[Fe];if($e)for(const We of $e)we.push(We.feature)}}return we}queryRenderedFeatures(re,he,fe){he&&he.filter&&this._validate(oe.z.filter,"queryRenderedFeatures.filter",he.filter,null,he);const _e={};if(he&&he.layers){if(!(Array.isArray(he.layers)||he.layers instanceof Set))return this.fire(new oe.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const $e of he.layers){const We=this._layers[$e];if(!We)return this.fire(new oe.k(new Error(`The layer '${$e}' does not exist in the map's style and cannot be queried for features.`))),[];_e[We.source]=!0}}const we=[];he.availableImages=this._availableImages;const Me=this._serializedAllLayers(),Fe=he.layers instanceof Set?he.layers:Array.isArray(he.layers)?new Set(he.layers):null,Be=Object.assign(Object.assign({},he),{layers:Fe,globalState:this._globalState});for(const $e in this.sourceCaches)he.layers&&!_e[$e]||we.push(Zr(this.sourceCaches[$e],this._layers,Me,re,Be,fe,this.map.terrain?(We,Je,Xe)=>this.map.terrain.getElevation(We,Je,Xe):void 0));return this.placement&&we.push(function($e,We,Je,Xe,st,ht,vt){const bt={},xt=ht.queryRenderedSymbols(Xe),Ct=[];for(const kt of Object.keys(xt).map(Number))Ct.push(vt[kt]);Ct.sort(Dr);for(const kt of Ct){const Tt=kt.featureIndex.lookupSymbolFeatures(xt[kt.bucketInstanceId],We,kt.bucketIndex,kt.sourceLayerIndex,{filterSpec:st.filter,globalState:st.globalState},st.layers,st.availableImages,$e);for(const Lt in Tt){const Rt=bt[Lt]=bt[Lt]||[],Pt=Tt[Lt];Pt.sort((Nt,Yt)=>{const Wt=kt.featureSortOrder;if(Wt){const Ut=Wt.indexOf(Nt.featureIndex);return Wt.indexOf(Yt.featureIndex)-Ut}return Yt.featureIndex-Nt.featureIndex});for(const Nt of Pt)Rt.push(Nt)}}return function(kt,Tt,Lt){for(const Rt in kt)for(const Pt of kt[Rt])dr(Pt,Lt[Tt[Rt].source]);return kt}(bt,$e,Je)}(this._layers,Me,this.sourceCaches,re,Be,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(we)}querySourceFeatures(re,he){he!=null&&he.filter&&this._validate(oe.z.filter,"querySourceFeatures.filter",he.filter,null,he);const fe=this.sourceCaches[re];return fe?function(_e,we){const Me=_e.getRenderableIds().map($e=>_e.getTileByID($e)),Fe=[],Be={};for(let $e=0;$e<Me.length;$e++){const We=Me[$e],Je=We.tileID.canonical.key;Be[Je]||(Be[Je]=!0,We.querySourceFeatures(Fe,we))}return Fe}(fe,he?Object.assign(Object.assign({},he),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(re,he={}){this._checkLoaded();const fe=this.light.getLight();let _e=!1;for(const Me in re)if(!oe.bH(re[Me],fe[Me])){_e=!0;break}if(!_e)return;const we={now:Ae(),transition:oe.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(re,he),this.light.updateTransitions(we)}getProjection(){var re;return(re=this.stylesheet)===null||re===void 0?void 0:re.projection}setProjection(re){if(this._checkLoaded(),this.projection){if(this.projection.name===re.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=re,this._setProjectionInternal(re.type)}getSky(){var re;return(re=this.stylesheet)===null||re===void 0?void 0:re.sky}setSky(re,he={}){this._checkLoaded();const fe=this.getSky();let _e=!1;if(!re&&!fe)return;if(re&&!fe)_e=!0;else if(!re&&fe)_e=!0;else for(const Me in re)if(!oe.bH(re[Me],fe[Me])){_e=!0;break}if(!_e)return;const we={now:Ae(),transition:oe.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=re,this.sky.setSky(re,he),this.sky.updateTransitions(we)}_setProjectionInternal(re){const he=function(fe,_e){const we={constrain:_e};if(Array.isArray(fe)){const Me=new da({type:fe});return{projection:Me,transform:new ga(we),cameraHelper:new Pc(Me)}}switch(fe){case"mercator":return{projection:new Fo,transform:new Sn(we),cameraHelper:new Gi};case"globe":{const Me=new da({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:Me,transform:new ga(we),cameraHelper:new Pc(Me)}}case"vertical-perspective":return{projection:new ha,transform:new ma(we),cameraHelper:new Jn};default:return oe.w(`Unknown projection name: ${fe}. Falling back to mercator projection.`),{projection:new Fo,transform:new Sn(we),cameraHelper:new Gi}}}(re,this.map.transformConstrain);this.projection=he.projection,this.map.migrateProjection(he.transform,he.cameraHelper);for(const fe in this.sourceCaches)this.sourceCaches[fe].reload()}_validate(re,he,fe,_e,we={}){return(!we||we.validate!==!1)&&_a(this,re.call(oe.z,oe.e({key:he,style:this.serialize(),value:fe,styleSpec:oe.v},_e)))}_remove(re=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),ir().off(Ft,this._rtlPluginLoaded);for(const he in this._layers)this._layers[he].setEventedParent(null);for(const he in this.sourceCaches){const fe=this.sourceCaches[he];fe.setEventedParent(null),fe.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),re&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(re)}_clearSource(re){this.sourceCaches[re].clearTiles()}_reloadSource(re){this.sourceCaches[re].resume(),this.sourceCaches[re].reload()}_updateSources(re){for(const he in this.sourceCaches)this.sourceCaches[he].update(re,this.map.terrain)}_generateCollisionBoxes(){for(const re in this.sourceCaches)this._reloadSource(re)}_updatePlacement(re,he,fe,_e,we=!1){let Me=!1,Fe=!1;const Be={};for(const $e of this._order){const We=this._layers[$e];if(We.type!=="symbol")continue;if(!Be[We.source]){const Xe=this.sourceCaches[We.source];Be[We.source]=Xe.getRenderableIds(!0).map(st=>Xe.getTileByID(st)).sort((st,ht)=>ht.tileID.overscaledZ-st.tileID.overscaledZ||(st.tileID.isLessThan(ht.tileID)?-1:1))}const Je=this.crossTileSymbolIndex.addLayer(We,Be[We.source],re.center.lng);Me=Me||Je}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((we=we||this._layerOrderChanged||fe===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(Ae(),re.zoom))&&(this.pauseablePlacement=new ml(re,this.map.terrain,this._order,we,he,fe,_e,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Be),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(Ae()),Fe=!0),Me&&this.pauseablePlacement.placement.setStale()),Fe||Me)for(const $e of this._order){const We=this._layers[$e];We.type==="symbol"&&this.placement.updateLayerOpacities(We,Be[We.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(Ae())}_releaseSymbolFadeTiles(){for(const re in this.sourceCaches)this.sourceCaches[re].releaseSymbolFadeTiles()}getImages(re,he){return oe._(this,void 0,void 0,function*(){const fe=yield this.imageManager.getImages(he.icons);this._updateTilesForChangedImages();const _e=this.sourceCaches[he.source];return _e&&_e.setDependencies(he.tileID.key,he.type,he.icons),fe})}getGlyphs(re,he){return oe._(this,void 0,void 0,function*(){const fe=yield this.glyphManager.getGlyphs(he.stacks),_e=this.sourceCaches[he.source];return _e&&_e.setDependencies(he.tileID.key,he.type,[""]),fe})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(re,he={}){this._checkLoaded(),re&&this._validate(oe.z.glyphs,"glyphs",re,null,he)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=re,this.glyphManager.entries={},this.glyphManager.setURL(re))}getDashes(re,he){return oe._(this,void 0,void 0,function*(){const fe={};for(const[_e,we]of Object.entries(he.dashes))fe[_e]=this.lineAtlas.getDash(we.dasharray,we.round);return fe})}addSprite(re,he,fe={},_e){this._checkLoaded();const we=[{id:re,url:he}],Me=[...Ye(this.stylesheet.sprite),...we];this._validate(oe.z.sprite,"sprite",Me,null,fe)||(this.stylesheet.sprite=Me,this._loadSprite(we,!0,_e))}removeSprite(re){this._checkLoaded();const he=Ye(this.stylesheet.sprite);if(he.find(fe=>fe.id===re)){if(this._spritesImagesIds[re])for(const fe of this._spritesImagesIds[re])this.imageManager.removeImage(fe),this._changedImages[fe]=!0;he.splice(he.findIndex(fe=>fe.id===re),1),this.stylesheet.sprite=he.length>0?he:void 0,delete this._spritesImagesIds[re],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new oe.l("data",{dataType:"style"}))}else this.fire(new oe.k(new Error(`Sprite "${re}" doesn't exists on this map.`)))}getSprite(){return Ye(this.stylesheet.sprite)}setSprite(re,he={},fe){this._checkLoaded(),re&&this._validate(oe.z.sprite,"sprite",re,null,he)||(this.stylesheet.sprite=re,re?this._loadSprite(re,!0,fe):(this._unloadSprite(),fe&&fe(null)))}}var xl=oe.aJ([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class ya{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(re,he,fe,_e,we,Me,Fe,Be,$e){this.context=re;let We=this.boundPaintVertexBuffers.length!==_e.length;for(let Je=0;!We&&Je<_e.length;Je++)this.boundPaintVertexBuffers[Je]!==_e[Je]&&(We=!0);!this.vao||this.boundProgram!==he||this.boundLayoutVertexBuffer!==fe||We||this.boundIndexBuffer!==we||this.boundVertexOffset!==Me||this.boundDynamicVertexBuffer!==Fe||this.boundDynamicVertexBuffer2!==Be||this.boundDynamicVertexBuffer3!==$e?this.freshBind(he,fe,_e,we,Me,Fe,Be,$e):(re.bindVertexArray.set(this.vao),Fe&&Fe.bind(),we&&we.dynamicDraw&&we.bind(),Be&&Be.bind(),$e&&$e.bind())}freshBind(re,he,fe,_e,we,Me,Fe,Be){const $e=re.numAttributes,We=this.context,Je=We.gl;this.vao&&this.destroy(),this.vao=We.createVertexArray(),We.bindVertexArray.set(this.vao),this.boundProgram=re,this.boundLayoutVertexBuffer=he,this.boundPaintVertexBuffers=fe,this.boundIndexBuffer=_e,this.boundVertexOffset=we,this.boundDynamicVertexBuffer=Me,this.boundDynamicVertexBuffer2=Fe,this.boundDynamicVertexBuffer3=Be,he.enableAttributes(Je,re);for(const Xe of fe)Xe.enableAttributes(Je,re);Me&&Me.enableAttributes(Je,re),Fe&&Fe.enableAttributes(Je,re),Be&&Be.enableAttributes(Je,re),he.bind(),he.setVertexAttribPointers(Je,re,we);for(const Xe of fe)Xe.bind(),Xe.setVertexAttribPointers(Je,re,we);Me&&(Me.bind(),Me.setVertexAttribPointers(Je,re,we)),_e&&_e.bind(),Fe&&(Fe.bind(),Fe.setVertexAttribPointers(Je,re,we)),Be&&(Be.bind(),Be.setVertexAttribPointers(Je,re,we)),We.currentNumAttributes=$e}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const wl=(be,re,he,fe,_e)=>({u_texture:0,u_ele_delta:be,u_fog_matrix:re,u_fog_color:he?he.properties.get("fog-color"):oe.bf.white,u_fog_ground_blend:he?he.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:_e?0:he?he.calculateFogBlendOpacity(fe):0,u_horizon_color:he?he.properties.get("horizon-color"):oe.bf.white,u_horizon_fog_blend:he?he.properties.get("horizon-fog-blend"):1,u_is_globe_mode:_e?1:0}),Sl={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function jn(be){const re=[];for(let he=0;he<be.length;he++){if(be[he]===null)continue;const fe=be[he].split(" ");re.push(fe.pop())}return re}class Zh{constructor(re,he,fe,_e,we,Me,Fe,Be,$e=[]){const We=re.gl;this.program=We.createProgram();const Je=jn(he.staticAttributes),Xe=fe?fe.getBinderAttributes():[],st=Je.concat(Xe),ht=os.prelude.staticUniforms?jn(os.prelude.staticUniforms):[],vt=Fe.staticUniforms?jn(Fe.staticUniforms):[],bt=he.staticUniforms?jn(he.staticUniforms):[],xt=fe?fe.getBinderUniforms():[],Ct=ht.concat(vt).concat(bt).concat(xt),kt=[];for(const Wt of Ct)kt.indexOf(Wt)<0&&kt.push(Wt);const Tt=fe?fe.defines():[];as(We)&&Tt.unshift("#version 300 es"),we&&Tt.push("#define OVERDRAW_INSPECTOR;"),Me&&Tt.push("#define TERRAIN3D;"),Be&&Tt.push(Be),$e&&Tt.push(...$e);let Lt=Tt.concat(os.prelude.fragmentSource,Fe.fragmentSource,he.fragmentSource).join(`
`),Rt=Tt.concat(os.prelude.vertexSource,Fe.vertexSource,he.vertexSource).join(`
`);as(We)||(Lt=function(Wt){return Wt.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(Lt),Rt=function(Wt){return Wt.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(Rt));const Pt=We.createShader(We.FRAGMENT_SHADER);if(We.isContextLost())return void(this.failedToCreate=!0);if(We.shaderSource(Pt,Lt),We.compileShader(Pt),!We.getShaderParameter(Pt,We.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${We.getShaderInfoLog(Pt)}`);We.attachShader(this.program,Pt);const Nt=We.createShader(We.VERTEX_SHADER);if(We.isContextLost())return void(this.failedToCreate=!0);if(We.shaderSource(Nt,Rt),We.compileShader(Nt),!We.getShaderParameter(Nt,We.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${We.getShaderInfoLog(Nt)}`);We.attachShader(this.program,Nt),this.attributes={};const Yt={};this.numAttributes=st.length;for(let Wt=0;Wt<this.numAttributes;Wt++)st[Wt]&&(We.bindAttribLocation(this.program,Wt,st[Wt]),this.attributes[st[Wt]]=Wt);if(We.linkProgram(this.program),!We.getProgramParameter(this.program,We.LINK_STATUS))throw new Error(`Program failed to link: ${We.getProgramInfoLog(this.program)}`);We.deleteShader(Nt),We.deleteShader(Pt);for(let Wt=0;Wt<kt.length;Wt++){const Ut=kt[Wt];if(Ut&&!Yt[Ut]){const Kt=We.getUniformLocation(this.program,Ut);Kt&&(Yt[Ut]=Kt)}}this.fixedUniforms=_e(re,Yt),this.terrainUniforms=((Wt,Ut)=>({u_depth:new oe.bQ(Wt,Ut.u_depth),u_terrain:new oe.bQ(Wt,Ut.u_terrain),u_terrain_dim:new oe.bg(Wt,Ut.u_terrain_dim),u_terrain_matrix:new oe.bS(Wt,Ut.u_terrain_matrix),u_terrain_unpack:new oe.bT(Wt,Ut.u_terrain_unpack),u_terrain_exaggeration:new oe.bg(Wt,Ut.u_terrain_exaggeration)}))(re,Yt),this.projectionUniforms=((Wt,Ut)=>({u_projection_matrix:new oe.bS(Wt,Ut.u_projection_matrix),u_projection_tile_mercator_coords:new oe.bT(Wt,Ut.u_projection_tile_mercator_coords),u_projection_clipping_plane:new oe.bT(Wt,Ut.u_projection_clipping_plane),u_projection_transition:new oe.bg(Wt,Ut.u_projection_transition),u_projection_fallback_matrix:new oe.bS(Wt,Ut.u_projection_fallback_matrix)}))(re,Yt),this.binderUniforms=fe?fe.getUniforms(re,Yt):[]}draw(re,he,fe,_e,we,Me,Fe,Be,$e,We,Je,Xe,st,ht,vt,bt,xt,Ct,kt){const Tt=re.gl;if(this.failedToCreate)return;if(re.program.set(this.program),re.setDepthMode(fe),re.setStencilMode(_e),re.setColorMode(we),re.setCullFace(Me),Be){re.activeTexture.set(Tt.TEXTURE2),Tt.bindTexture(Tt.TEXTURE_2D,Be.depthTexture),re.activeTexture.set(Tt.TEXTURE3),Tt.bindTexture(Tt.TEXTURE_2D,Be.texture);for(const Rt in this.terrainUniforms)this.terrainUniforms[Rt].set(Be[Rt])}if($e)for(const Rt in $e)this.projectionUniforms[Sl[Rt]].set($e[Rt]);if(Fe)for(const Rt in this.fixedUniforms)this.fixedUniforms[Rt].set(Fe[Rt]);bt&&bt.setUniforms(re,this.binderUniforms,ht,{zoom:vt});let Lt=0;switch(he){case Tt.LINES:Lt=2;break;case Tt.TRIANGLES:Lt=3;break;case Tt.LINE_STRIP:Lt=1}for(const Rt of st.get()){const Pt=Rt.vaos||(Rt.vaos={});(Pt[We]||(Pt[We]=new ya)).bind(re,this,Je,bt?bt.getPaintVertexBuffers():[],Xe,Rt.vertexOffset,xt,Ct,kt),Tt.drawElements(he,Rt.primitiveLength*Lt,Tt.UNSIGNED_SHORT,Rt.primitiveOffset*Lt*2)}}}function va(be,re,he){const fe=1/oe.aC(he,1,re.transform.tileZoom),_e=Math.pow(2,he.tileID.overscaledZ),we=he.tileSize*Math.pow(2,re.transform.tileZoom)/_e,Me=we*(he.tileID.canonical.x+he.tileID.wrap*_e),Fe=we*he.tileID.canonical.y;return{u_image:0,u_texsize:he.imageAtlasTexture.size,u_scale:[fe,be.fromScale,be.toScale],u_fade:be.t,u_pixel_coord_upper:[Me>>16,Fe>>16],u_pixel_coord_lower:[65535&Me,65535&Fe]}}const oo=(be,re,he,fe)=>{const _e=be.style.light,we=_e.properties.get("position"),Me=[we.x,we.y,we.z],Fe=oe.bW();_e.properties.get("anchor")==="viewport"&&oe.bX(Fe,be.transform.bearingInRadians),oe.bY(Me,Me,Fe);const Be=be.transform.transformLightDirection(Me),$e=_e.properties.get("color");return{u_lightpos:Me,u_lightpos_globe:Be,u_lightintensity:_e.properties.get("intensity"),u_lightcolor:[$e.r,$e.g,$e.b],u_vertical_gradient:+re,u_opacity:he,u_fill_translate:fe}},Oo=(be,re,he,fe,_e,we,Me)=>oe.e(oo(be,re,he,fe),va(we,be,Me),{u_height_factor:-Math.pow(2,_e.overscaledZ)/Me.tileSize/8}),Ec=(be,re,he,fe)=>oe.e(va(re,be,he),{u_fill_translate:fe}),ba=(be,re)=>({u_world:be,u_fill_translate:re}),Xh=(be,re,he,fe,_e)=>oe.e(Ec(be,re,he,_e),{u_world:fe}),ao=(be,re,he,fe,_e)=>{const we=be.transform;let Me,Fe,Be=0;if(he.paint.get("circle-pitch-alignment")==="map"){const $e=oe.aC(re,1,we.zoom);Me=!0,Fe=[$e,$e],Be=$e/(oe.$*Math.pow(2,re.tileID.overscaledZ))*2*Math.PI*_e}else Me=!1,Fe=we.pixelsToGLUnits;return{u_camera_to_center_distance:we.cameraToCenterDistance,u_scale_with_map:+(he.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+Me,u_device_pixel_ratio:be.pixelRatio,u_extrude_scale:Fe,u_globe_extrude_scale:Be,u_translate:fe}},Yh=be=>({u_pixel_extrude_scale:[1/be.width,1/be.height]}),Mc=be=>({u_viewport_size:[be.width,be.height]}),Ac=(be,re=1)=>({u_color:be,u_overlay:0,u_overlay_scale:re}),Tl=(be,re,he,fe)=>{const _e=oe.aC(be,1,re)/(oe.$*Math.pow(2,be.tileID.overscaledZ))*2*Math.PI*fe;return{u_extrude_scale:oe.aC(be,1,re),u_intensity:he,u_globe_extrude_scale:_e}},xa=(be,re,he,fe)=>{const _e=oe.L();oe.bZ(_e,0,be.width,be.height,0,0,1);const we=be.context.gl;return{u_matrix:_e,u_world:[we.drawingBufferWidth,we.drawingBufferHeight],u_image:he,u_color_ramp:fe,u_opacity:re.paint.get("heatmap-opacity")}},kc=(be,re,he)=>{const fe=he.paint.get("hillshade-accent-color");let _e;switch(he.paint.get("hillshade-method")){case"basic":_e=4;break;case"combined":_e=1;break;case"igor":_e=2;break;case"multidirectional":_e=3;break;default:_e=0}const we=he.getIlluminationProperties();for(let Me=0;Me<we.directionRadians.length;Me++)he.paint.get("hillshade-illumination-anchor")==="viewport"&&(we.directionRadians[Me]+=be.transform.bearingInRadians);return{u_image:0,u_latrange:Lc(0,re.tileID),u_exaggeration:he.paint.get("hillshade-exaggeration"),u_altitudes:we.altitudeRadians,u_azimuths:we.directionRadians,u_accent:fe,u_method:_e,u_highlights:we.highlightColor,u_shadows:we.shadowColor}},Ic=(be,re)=>{const he=re.stride,fe=oe.L();return oe.bZ(fe,0,oe.$,-oe.$,0,0,1),oe.M(fe,fe,[0,-oe.$,0]),{u_matrix:fe,u_image:1,u_dimension:[he,he],u_zoom:be.overscaledZ,u_unpack:re.getUnpackVector()}};function Lc(be,re){const he=Math.pow(2,re.canonical.z),fe=re.canonical.y;return[new oe.a1(0,fe/he).toLngLat().lat,new oe.a1(0,(fe+1)/he).toLngLat().lat]}const zc=(be,re,he=0)=>({u_image:0,u_unpack:re.getUnpackVector(),u_dimension:[re.stride,re.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:he,u_opacity:be.paint.get("color-relief-opacity")}),ls=(be,re,he,fe)=>{const _e=be.transform;return{u_translation:Dc(be,re,he),u_ratio:fe/oe.aC(re,1,_e.zoom),u_device_pixel_ratio:be.pixelRatio,u_units_to_pixels:[1/_e.pixelsToGLUnits[0],1/_e.pixelsToGLUnits[1]]}},Rc=(be,re,he,fe,_e)=>oe.e(ls(be,re,he,fe),{u_image:0,u_image_height:_e}),Fc=(be,re,he,fe,_e)=>{const we=be.transform,Me=lo(re,we);return{u_translation:Dc(be,re,he),u_texsize:re.imageAtlasTexture.size,u_ratio:fe/oe.aC(re,1,we.zoom),u_device_pixel_ratio:be.pixelRatio,u_image:0,u_scale:[Me,_e.fromScale,_e.toScale],u_fade:_e.t,u_units_to_pixels:[1/we.pixelsToGLUnits[0],1/we.pixelsToGLUnits[1]]}},Vo=(be,re,he,fe,_e)=>{const we=lo(re,be.transform);return oe.e(ls(be,re,he,fe),{u_tileratio:we,u_crossfade_from:_e.fromScale,u_crossfade_to:_e.toScale,u_image:0,u_mix:_e.t,u_lineatlas_width:be.lineAtlas.width,u_lineatlas_height:be.lineAtlas.height})},Kh=(be,re,he,fe,_e,we)=>{const Me=lo(re,be.transform);return oe.e(ls(be,re,he,fe),{u_image:0,u_image_height:we,u_tileratio:Me,u_crossfade_from:_e.fromScale,u_crossfade_to:_e.toScale,u_image_dash:1,u_mix:_e.t,u_lineatlas_width:be.lineAtlas.width,u_lineatlas_height:be.lineAtlas.height})};function lo(be,re){return 1/oe.aC(be,1,re.tileZoom)}function Dc(be,re,he){return oe.aD(be.transform,re,he.paint.get("line-translate"),he.paint.get("line-translate-anchor"))}const Jh=(be,re,he,fe,_e)=>{return{u_tl_parent:be,u_scale_parent:re,u_buffer_scale:1,u_fade_t:he.mix,u_opacity:he.opacity*fe.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:fe.paint.get("raster-brightness-min"),u_brightness_high:fe.paint.get("raster-brightness-max"),u_saturation_factor:(Me=fe.paint.get("raster-saturation"),Me>0?1-1/(1.001-Me):-Me),u_contrast_factor:(we=fe.paint.get("raster-contrast"),we>0?1/(1-we):1+we),u_spin_weights:Bc(fe.paint.get("raster-hue-rotate")),u_coords_top:[_e[0].x,_e[0].y,_e[1].x,_e[1].y],u_coords_bottom:[_e[3].x,_e[3].y,_e[2].x,_e[2].y]};var we,Me};function Bc(be){be*=Math.PI/180;const re=Math.sin(be),he=Math.cos(be);return[(2*he+1)/3,(-Math.sqrt(3)*re-he+1)/3,(Math.sqrt(3)*re-he+1)/3]}const Cl=(be,re,he,fe,_e,we,Me,Fe,Be,$e,We,Je,Xe)=>{const st=Me.transform;return{u_is_size_zoom_constant:+(be==="constant"||be==="source"),u_is_size_feature_constant:+(be==="constant"||be==="camera"),u_size_t:re?re.uSizeT:0,u_size:re?re.uSize:0,u_camera_to_center_distance:st.cameraToCenterDistance,u_pitch:st.pitch/360*2*Math.PI,u_rotate_symbol:+he,u_aspect_ratio:st.width/st.height,u_fade_change:Me.options.fadeDuration?Me.symbolFadeChange:1,u_label_plane_matrix:Fe,u_coord_matrix:Be,u_is_text:+We,u_pitch_with_map:+fe,u_is_along_line:_e,u_is_variable_anchor:we,u_texsize:Je,u_texture:0,u_translation:$e,u_pitched_scale:Xe}},Pl=(be,re,he,fe,_e,we,Me,Fe,Be,$e,We,Je,Xe,st)=>{const ht=Me.transform;return oe.e(Cl(be,re,he,fe,_e,we,Me,Fe,Be,$e,We,Je,st),{u_gamma_scale:fe?Math.cos(ht.pitch*Math.PI/180)*ht.cameraToCenterDistance:1,u_device_pixel_ratio:Me.pixelRatio,u_is_halo:1})},El=(be,re,he,fe,_e,we,Me,Fe,Be,$e,We,Je,Xe)=>oe.e(Pl(be,re,he,fe,_e,we,Me,Fe,Be,$e,!0,We,0,Xe),{u_texsize_icon:Je,u_texture_icon:1}),Oc=(be,re)=>({u_opacity:be,u_color:re}),wa=(be,re,he,fe,_e)=>oe.e(function(we,Me,Fe,Be){const $e=Fe.imageManager.getPattern(we.from.toString()),We=Fe.imageManager.getPattern(we.to.toString()),{width:Je,height:Xe}=Fe.imageManager.getPixelSize(),st=Math.pow(2,Be.tileID.overscaledZ),ht=Be.tileSize*Math.pow(2,Fe.transform.tileZoom)/st,vt=ht*(Be.tileID.canonical.x+Be.tileID.wrap*st),bt=ht*Be.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:$e.tl,u_pattern_br_a:$e.br,u_pattern_tl_b:We.tl,u_pattern_br_b:We.br,u_texsize:[Je,Xe],u_mix:Me.t,u_pattern_size_a:$e.displaySize,u_pattern_size_b:We.displaySize,u_scale_a:Me.fromScale,u_scale_b:Me.toScale,u_tile_units_to_pixels:1/oe.aC(Be,1,Fe.transform.tileZoom),u_pixel_coord_upper:[vt>>16,bt>>16],u_pixel_coord_lower:[65535&vt,65535&bt]}}(he,_e,re,fe),{u_opacity:be}),cs=(be,re)=>{},Ml={fillExtrusion:(be,re)=>({u_lightpos:new oe.bU(be,re.u_lightpos),u_lightpos_globe:new oe.bU(be,re.u_lightpos_globe),u_lightintensity:new oe.bg(be,re.u_lightintensity),u_lightcolor:new oe.bU(be,re.u_lightcolor),u_vertical_gradient:new oe.bg(be,re.u_vertical_gradient),u_opacity:new oe.bg(be,re.u_opacity),u_fill_translate:new oe.bV(be,re.u_fill_translate)}),fillExtrusionPattern:(be,re)=>({u_lightpos:new oe.bU(be,re.u_lightpos),u_lightpos_globe:new oe.bU(be,re.u_lightpos_globe),u_lightintensity:new oe.bg(be,re.u_lightintensity),u_lightcolor:new oe.bU(be,re.u_lightcolor),u_vertical_gradient:new oe.bg(be,re.u_vertical_gradient),u_height_factor:new oe.bg(be,re.u_height_factor),u_opacity:new oe.bg(be,re.u_opacity),u_fill_translate:new oe.bV(be,re.u_fill_translate),u_image:new oe.bQ(be,re.u_image),u_texsize:new oe.bV(be,re.u_texsize),u_pixel_coord_upper:new oe.bV(be,re.u_pixel_coord_upper),u_pixel_coord_lower:new oe.bV(be,re.u_pixel_coord_lower),u_scale:new oe.bU(be,re.u_scale),u_fade:new oe.bg(be,re.u_fade)}),fill:(be,re)=>({u_fill_translate:new oe.bV(be,re.u_fill_translate)}),fillPattern:(be,re)=>({u_image:new oe.bQ(be,re.u_image),u_texsize:new oe.bV(be,re.u_texsize),u_pixel_coord_upper:new oe.bV(be,re.u_pixel_coord_upper),u_pixel_coord_lower:new oe.bV(be,re.u_pixel_coord_lower),u_scale:new oe.bU(be,re.u_scale),u_fade:new oe.bg(be,re.u_fade),u_fill_translate:new oe.bV(be,re.u_fill_translate)}),fillOutline:(be,re)=>({u_world:new oe.bV(be,re.u_world),u_fill_translate:new oe.bV(be,re.u_fill_translate)}),fillOutlinePattern:(be,re)=>({u_world:new oe.bV(be,re.u_world),u_image:new oe.bQ(be,re.u_image),u_texsize:new oe.bV(be,re.u_texsize),u_pixel_coord_upper:new oe.bV(be,re.u_pixel_coord_upper),u_pixel_coord_lower:new oe.bV(be,re.u_pixel_coord_lower),u_scale:new oe.bU(be,re.u_scale),u_fade:new oe.bg(be,re.u_fade),u_fill_translate:new oe.bV(be,re.u_fill_translate)}),circle:(be,re)=>({u_camera_to_center_distance:new oe.bg(be,re.u_camera_to_center_distance),u_scale_with_map:new oe.bQ(be,re.u_scale_with_map),u_pitch_with_map:new oe.bQ(be,re.u_pitch_with_map),u_extrude_scale:new oe.bV(be,re.u_extrude_scale),u_device_pixel_ratio:new oe.bg(be,re.u_device_pixel_ratio),u_globe_extrude_scale:new oe.bg(be,re.u_globe_extrude_scale),u_translate:new oe.bV(be,re.u_translate)}),collisionBox:(be,re)=>({u_pixel_extrude_scale:new oe.bV(be,re.u_pixel_extrude_scale)}),collisionCircle:(be,re)=>({u_viewport_size:new oe.bV(be,re.u_viewport_size)}),debug:(be,re)=>({u_color:new oe.bR(be,re.u_color),u_overlay:new oe.bQ(be,re.u_overlay),u_overlay_scale:new oe.bg(be,re.u_overlay_scale)}),depth:cs,clippingMask:cs,heatmap:(be,re)=>({u_extrude_scale:new oe.bg(be,re.u_extrude_scale),u_intensity:new oe.bg(be,re.u_intensity),u_globe_extrude_scale:new oe.bg(be,re.u_globe_extrude_scale)}),heatmapTexture:(be,re)=>({u_matrix:new oe.bS(be,re.u_matrix),u_world:new oe.bV(be,re.u_world),u_image:new oe.bQ(be,re.u_image),u_color_ramp:new oe.bQ(be,re.u_color_ramp),u_opacity:new oe.bg(be,re.u_opacity)}),hillshade:(be,re)=>({u_image:new oe.bQ(be,re.u_image),u_latrange:new oe.bV(be,re.u_latrange),u_exaggeration:new oe.bg(be,re.u_exaggeration),u_altitudes:new oe.b$(be,re.u_altitudes),u_azimuths:new oe.b$(be,re.u_azimuths),u_accent:new oe.bR(be,re.u_accent),u_method:new oe.bQ(be,re.u_method),u_shadows:new oe.b_(be,re.u_shadows),u_highlights:new oe.b_(be,re.u_highlights)}),hillshadePrepare:(be,re)=>({u_matrix:new oe.bS(be,re.u_matrix),u_image:new oe.bQ(be,re.u_image),u_dimension:new oe.bV(be,re.u_dimension),u_zoom:new oe.bg(be,re.u_zoom),u_unpack:new oe.bT(be,re.u_unpack)}),colorRelief:(be,re)=>({u_image:new oe.bQ(be,re.u_image),u_unpack:new oe.bT(be,re.u_unpack),u_dimension:new oe.bV(be,re.u_dimension),u_elevation_stops:new oe.bQ(be,re.u_elevation_stops),u_color_stops:new oe.bQ(be,re.u_color_stops),u_color_ramp_size:new oe.bQ(be,re.u_color_ramp_size),u_opacity:new oe.bg(be,re.u_opacity)}),line:(be,re)=>({u_translation:new oe.bV(be,re.u_translation),u_ratio:new oe.bg(be,re.u_ratio),u_device_pixel_ratio:new oe.bg(be,re.u_device_pixel_ratio),u_units_to_pixels:new oe.bV(be,re.u_units_to_pixels)}),lineGradient:(be,re)=>({u_translation:new oe.bV(be,re.u_translation),u_ratio:new oe.bg(be,re.u_ratio),u_device_pixel_ratio:new oe.bg(be,re.u_device_pixel_ratio),u_units_to_pixels:new oe.bV(be,re.u_units_to_pixels),u_image:new oe.bQ(be,re.u_image),u_image_height:new oe.bg(be,re.u_image_height)}),linePattern:(be,re)=>({u_translation:new oe.bV(be,re.u_translation),u_texsize:new oe.bV(be,re.u_texsize),u_ratio:new oe.bg(be,re.u_ratio),u_device_pixel_ratio:new oe.bg(be,re.u_device_pixel_ratio),u_image:new oe.bQ(be,re.u_image),u_units_to_pixels:new oe.bV(be,re.u_units_to_pixels),u_scale:new oe.bU(be,re.u_scale),u_fade:new oe.bg(be,re.u_fade)}),lineSDF:(be,re)=>({u_translation:new oe.bV(be,re.u_translation),u_ratio:new oe.bg(be,re.u_ratio),u_device_pixel_ratio:new oe.bg(be,re.u_device_pixel_ratio),u_units_to_pixels:new oe.bV(be,re.u_units_to_pixels),u_image:new oe.bQ(be,re.u_image),u_mix:new oe.bg(be,re.u_mix),u_tileratio:new oe.bg(be,re.u_tileratio),u_crossfade_from:new oe.bg(be,re.u_crossfade_from),u_crossfade_to:new oe.bg(be,re.u_crossfade_to),u_lineatlas_width:new oe.bg(be,re.u_lineatlas_width),u_lineatlas_height:new oe.bg(be,re.u_lineatlas_height)}),lineGradientSDF:(be,re)=>({u_translation:new oe.bV(be,re.u_translation),u_ratio:new oe.bg(be,re.u_ratio),u_device_pixel_ratio:new oe.bg(be,re.u_device_pixel_ratio),u_units_to_pixels:new oe.bV(be,re.u_units_to_pixels),u_image:new oe.bQ(be,re.u_image),u_image_height:new oe.bg(be,re.u_image_height),u_tileratio:new oe.bg(be,re.u_tileratio),u_crossfade_from:new oe.bg(be,re.u_crossfade_from),u_crossfade_to:new oe.bg(be,re.u_crossfade_to),u_image_dash:new oe.bQ(be,re.u_image_dash),u_mix:new oe.bg(be,re.u_mix),u_lineatlas_width:new oe.bg(be,re.u_lineatlas_width),u_lineatlas_height:new oe.bg(be,re.u_lineatlas_height)}),raster:(be,re)=>({u_tl_parent:new oe.bV(be,re.u_tl_parent),u_scale_parent:new oe.bg(be,re.u_scale_parent),u_buffer_scale:new oe.bg(be,re.u_buffer_scale),u_fade_t:new oe.bg(be,re.u_fade_t),u_opacity:new oe.bg(be,re.u_opacity),u_image0:new oe.bQ(be,re.u_image0),u_image1:new oe.bQ(be,re.u_image1),u_brightness_low:new oe.bg(be,re.u_brightness_low),u_brightness_high:new oe.bg(be,re.u_brightness_high),u_saturation_factor:new oe.bg(be,re.u_saturation_factor),u_contrast_factor:new oe.bg(be,re.u_contrast_factor),u_spin_weights:new oe.bU(be,re.u_spin_weights),u_coords_top:new oe.bT(be,re.u_coords_top),u_coords_bottom:new oe.bT(be,re.u_coords_bottom)}),symbolIcon:(be,re)=>({u_is_size_zoom_constant:new oe.bQ(be,re.u_is_size_zoom_constant),u_is_size_feature_constant:new oe.bQ(be,re.u_is_size_feature_constant),u_size_t:new oe.bg(be,re.u_size_t),u_size:new oe.bg(be,re.u_size),u_camera_to_center_distance:new oe.bg(be,re.u_camera_to_center_distance),u_pitch:new oe.bg(be,re.u_pitch),u_rotate_symbol:new oe.bQ(be,re.u_rotate_symbol),u_aspect_ratio:new oe.bg(be,re.u_aspect_ratio),u_fade_change:new oe.bg(be,re.u_fade_change),u_label_plane_matrix:new oe.bS(be,re.u_label_plane_matrix),u_coord_matrix:new oe.bS(be,re.u_coord_matrix),u_is_text:new oe.bQ(be,re.u_is_text),u_pitch_with_map:new oe.bQ(be,re.u_pitch_with_map),u_is_along_line:new oe.bQ(be,re.u_is_along_line),u_is_variable_anchor:new oe.bQ(be,re.u_is_variable_anchor),u_texsize:new oe.bV(be,re.u_texsize),u_texture:new oe.bQ(be,re.u_texture),u_translation:new oe.bV(be,re.u_translation),u_pitched_scale:new oe.bg(be,re.u_pitched_scale)}),symbolSDF:(be,re)=>({u_is_size_zoom_constant:new oe.bQ(be,re.u_is_size_zoom_constant),u_is_size_feature_constant:new oe.bQ(be,re.u_is_size_feature_constant),u_size_t:new oe.bg(be,re.u_size_t),u_size:new oe.bg(be,re.u_size),u_camera_to_center_distance:new oe.bg(be,re.u_camera_to_center_distance),u_pitch:new oe.bg(be,re.u_pitch),u_rotate_symbol:new oe.bQ(be,re.u_rotate_symbol),u_aspect_ratio:new oe.bg(be,re.u_aspect_ratio),u_fade_change:new oe.bg(be,re.u_fade_change),u_label_plane_matrix:new oe.bS(be,re.u_label_plane_matrix),u_coord_matrix:new oe.bS(be,re.u_coord_matrix),u_is_text:new oe.bQ(be,re.u_is_text),u_pitch_with_map:new oe.bQ(be,re.u_pitch_with_map),u_is_along_line:new oe.bQ(be,re.u_is_along_line),u_is_variable_anchor:new oe.bQ(be,re.u_is_variable_anchor),u_texsize:new oe.bV(be,re.u_texsize),u_texture:new oe.bQ(be,re.u_texture),u_gamma_scale:new oe.bg(be,re.u_gamma_scale),u_device_pixel_ratio:new oe.bg(be,re.u_device_pixel_ratio),u_is_halo:new oe.bQ(be,re.u_is_halo),u_translation:new oe.bV(be,re.u_translation),u_pitched_scale:new oe.bg(be,re.u_pitched_scale)}),symbolTextAndIcon:(be,re)=>({u_is_size_zoom_constant:new oe.bQ(be,re.u_is_size_zoom_constant),u_is_size_feature_constant:new oe.bQ(be,re.u_is_size_feature_constant),u_size_t:new oe.bg(be,re.u_size_t),u_size:new oe.bg(be,re.u_size),u_camera_to_center_distance:new oe.bg(be,re.u_camera_to_center_distance),u_pitch:new oe.bg(be,re.u_pitch),u_rotate_symbol:new oe.bQ(be,re.u_rotate_symbol),u_aspect_ratio:new oe.bg(be,re.u_aspect_ratio),u_fade_change:new oe.bg(be,re.u_fade_change),u_label_plane_matrix:new oe.bS(be,re.u_label_plane_matrix),u_coord_matrix:new oe.bS(be,re.u_coord_matrix),u_is_text:new oe.bQ(be,re.u_is_text),u_pitch_with_map:new oe.bQ(be,re.u_pitch_with_map),u_is_along_line:new oe.bQ(be,re.u_is_along_line),u_is_variable_anchor:new oe.bQ(be,re.u_is_variable_anchor),u_texsize:new oe.bV(be,re.u_texsize),u_texsize_icon:new oe.bV(be,re.u_texsize_icon),u_texture:new oe.bQ(be,re.u_texture),u_texture_icon:new oe.bQ(be,re.u_texture_icon),u_gamma_scale:new oe.bg(be,re.u_gamma_scale),u_device_pixel_ratio:new oe.bg(be,re.u_device_pixel_ratio),u_is_halo:new oe.bQ(be,re.u_is_halo),u_translation:new oe.bV(be,re.u_translation),u_pitched_scale:new oe.bg(be,re.u_pitched_scale)}),background:(be,re)=>({u_opacity:new oe.bg(be,re.u_opacity),u_color:new oe.bR(be,re.u_color)}),backgroundPattern:(be,re)=>({u_opacity:new oe.bg(be,re.u_opacity),u_image:new oe.bQ(be,re.u_image),u_pattern_tl_a:new oe.bV(be,re.u_pattern_tl_a),u_pattern_br_a:new oe.bV(be,re.u_pattern_br_a),u_pattern_tl_b:new oe.bV(be,re.u_pattern_tl_b),u_pattern_br_b:new oe.bV(be,re.u_pattern_br_b),u_texsize:new oe.bV(be,re.u_texsize),u_mix:new oe.bg(be,re.u_mix),u_pattern_size_a:new oe.bV(be,re.u_pattern_size_a),u_pattern_size_b:new oe.bV(be,re.u_pattern_size_b),u_scale_a:new oe.bg(be,re.u_scale_a),u_scale_b:new oe.bg(be,re.u_scale_b),u_pixel_coord_upper:new oe.bV(be,re.u_pixel_coord_upper),u_pixel_coord_lower:new oe.bV(be,re.u_pixel_coord_lower),u_tile_units_to_pixels:new oe.bg(be,re.u_tile_units_to_pixels)}),terrain:(be,re)=>({u_texture:new oe.bQ(be,re.u_texture),u_ele_delta:new oe.bg(be,re.u_ele_delta),u_fog_matrix:new oe.bS(be,re.u_fog_matrix),u_fog_color:new oe.bR(be,re.u_fog_color),u_fog_ground_blend:new oe.bg(be,re.u_fog_ground_blend),u_fog_ground_blend_opacity:new oe.bg(be,re.u_fog_ground_blend_opacity),u_horizon_color:new oe.bR(be,re.u_horizon_color),u_horizon_fog_blend:new oe.bg(be,re.u_horizon_fog_blend),u_is_globe_mode:new oe.bg(be,re.u_is_globe_mode)}),terrainDepth:(be,re)=>({u_ele_delta:new oe.bg(be,re.u_ele_delta)}),terrainCoords:(be,re)=>({u_texture:new oe.bQ(be,re.u_texture),u_terrain_coords_id:new oe.bg(be,re.u_terrain_coords_id),u_ele_delta:new oe.bg(be,re.u_ele_delta)}),projectionErrorMeasurement:(be,re)=>({u_input:new oe.bg(be,re.u_input),u_output_expected:new oe.bg(be,re.u_output_expected)}),atmosphere:(be,re)=>({u_sun_pos:new oe.bU(be,re.u_sun_pos),u_atmosphere_blend:new oe.bg(be,re.u_atmosphere_blend),u_globe_position:new oe.bU(be,re.u_globe_position),u_globe_radius:new oe.bg(be,re.u_globe_radius),u_inv_proj_matrix:new oe.bS(be,re.u_inv_proj_matrix)}),sky:(be,re)=>({u_sky_color:new oe.bR(be,re.u_sky_color),u_horizon_color:new oe.bR(be,re.u_horizon_color),u_horizon:new oe.bV(be,re.u_horizon),u_horizon_normal:new oe.bV(be,re.u_horizon_normal),u_sky_horizon_blend:new oe.bg(be,re.u_sky_horizon_blend),u_sky_blend:new oe.bg(be,re.u_sky_blend)})};class Al{constructor(re,he,fe){this.context=re;const _e=re.gl;this.buffer=_e.createBuffer(),this.dynamicDraw=Boolean(fe),this.context.unbindVAO(),re.bindElementBuffer.set(this.buffer),_e.bufferData(_e.ELEMENT_ARRAY_BUFFER,he.arrayBuffer,this.dynamicDraw?_e.DYNAMIC_DRAW:_e.STATIC_DRAW),this.dynamicDraw||delete he.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(re){const he=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),he.bufferSubData(he.ELEMENT_ARRAY_BUFFER,0,re.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const kl={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Vc{constructor(re,he,fe,_e){this.length=he.length,this.attributes=fe,this.itemSize=he.bytesPerElement,this.dynamicDraw=_e,this.context=re;const we=re.gl;this.buffer=we.createBuffer(),re.bindVertexBuffer.set(this.buffer),we.bufferData(we.ARRAY_BUFFER,he.arrayBuffer,this.dynamicDraw?we.DYNAMIC_DRAW:we.STATIC_DRAW),this.dynamicDraw||delete he.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(re){if(re.length!==this.length)throw new Error(`Length of new data is ${re.length}, which doesn't match current length of ${this.length}`);const he=this.context.gl;this.bind(),he.bufferSubData(he.ARRAY_BUFFER,0,re.arrayBuffer)}enableAttributes(re,he){for(let fe=0;fe<this.attributes.length;fe++){const _e=he.attributes[this.attributes[fe].name];_e!==void 0&&re.enableVertexAttribArray(_e)}}setVertexAttribPointers(re,he,fe){for(let _e=0;_e<this.attributes.length;_e++){const we=this.attributes[_e],Me=he.attributes[we.name];Me!==void 0&&re.vertexAttribPointer(Me,we.components,re[kl[we.type]],!1,this.itemSize,we.offset+this.itemSize*(fe||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Si{constructor(re){this.gl=re.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(re){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class $s extends Si{getDefault(){return oe.bf.transparent}set(re){const he=this.current;(re.r!==he.r||re.g!==he.g||re.b!==he.b||re.a!==he.a||this.dirty)&&(this.gl.clearColor(re.r,re.g,re.b,re.a),this.current=re,this.dirty=!1)}}class Il extends Si{getDefault(){return 1}set(re){(re!==this.current||this.dirty)&&(this.gl.clearDepth(re),this.current=re,this.dirty=!1)}}class Qh extends Si{getDefault(){return 0}set(re){(re!==this.current||this.dirty)&&(this.gl.clearStencil(re),this.current=re,this.dirty=!1)}}class eu extends Si{getDefault(){return[!0,!0,!0,!0]}set(re){const he=this.current;(re[0]!==he[0]||re[1]!==he[1]||re[2]!==he[2]||re[3]!==he[3]||this.dirty)&&(this.gl.colorMask(re[0],re[1],re[2],re[3]),this.current=re,this.dirty=!1)}}class tu extends Si{getDefault(){return!0}set(re){(re!==this.current||this.dirty)&&(this.gl.depthMask(re),this.current=re,this.dirty=!1)}}class ru extends Si{getDefault(){return 255}set(re){(re!==this.current||this.dirty)&&(this.gl.stencilMask(re),this.current=re,this.dirty=!1)}}class Nc extends Si{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(re){const he=this.current;(re.func!==he.func||re.ref!==he.ref||re.mask!==he.mask||this.dirty)&&(this.gl.stencilFunc(re.func,re.ref,re.mask),this.current=re,this.dirty=!1)}}class iu extends Si{getDefault(){const re=this.gl;return[re.KEEP,re.KEEP,re.KEEP]}set(re){const he=this.current;(re[0]!==he[0]||re[1]!==he[1]||re[2]!==he[2]||this.dirty)&&(this.gl.stencilOp(re[0],re[1],re[2]),this.current=re,this.dirty=!1)}}class $c extends Si{getDefault(){return!1}set(re){if(re===this.current&&!this.dirty)return;const he=this.gl;re?he.enable(he.STENCIL_TEST):he.disable(he.STENCIL_TEST),this.current=re,this.dirty=!1}}class Sa extends Si{getDefault(){return[0,1]}set(re){const he=this.current;(re[0]!==he[0]||re[1]!==he[1]||this.dirty)&&(this.gl.depthRange(re[0],re[1]),this.current=re,this.dirty=!1)}}class Ta extends Si{getDefault(){return!1}set(re){if(re===this.current&&!this.dirty)return;const he=this.gl;re?he.enable(he.DEPTH_TEST):he.disable(he.DEPTH_TEST),this.current=re,this.dirty=!1}}class Ca extends Si{getDefault(){return this.gl.LESS}set(re){(re!==this.current||this.dirty)&&(this.gl.depthFunc(re),this.current=re,this.dirty=!1)}}class Ll extends Si{getDefault(){return!1}set(re){if(re===this.current&&!this.dirty)return;const he=this.gl;re?he.enable(he.BLEND):he.disable(he.BLEND),this.current=re,this.dirty=!1}}class qs extends Si{getDefault(){const re=this.gl;return[re.ONE,re.ZERO]}set(re){const he=this.current;(re[0]!==he[0]||re[1]!==he[1]||this.dirty)&&(this.gl.blendFunc(re[0],re[1]),this.current=re,this.dirty=!1)}}class No extends Si{getDefault(){return oe.bf.transparent}set(re){const he=this.current;(re.r!==he.r||re.g!==he.g||re.b!==he.b||re.a!==he.a||this.dirty)&&(this.gl.blendColor(re.r,re.g,re.b,re.a),this.current=re,this.dirty=!1)}}class co extends Si{getDefault(){return this.gl.FUNC_ADD}set(re){(re!==this.current||this.dirty)&&(this.gl.blendEquation(re),this.current=re,this.dirty=!1)}}class Un extends Si{getDefault(){return!1}set(re){if(re===this.current&&!this.dirty)return;const he=this.gl;re?he.enable(he.CULL_FACE):he.disable(he.CULL_FACE),this.current=re,this.dirty=!1}}class qc extends Si{getDefault(){return this.gl.BACK}set(re){(re!==this.current||this.dirty)&&(this.gl.cullFace(re),this.current=re,this.dirty=!1)}}class jc extends Si{getDefault(){return this.gl.CCW}set(re){(re!==this.current||this.dirty)&&(this.gl.frontFace(re),this.current=re,this.dirty=!1)}}class zl extends Si{getDefault(){return null}set(re){(re!==this.current||this.dirty)&&(this.gl.useProgram(re),this.current=re,this.dirty=!1)}}class js extends Si{getDefault(){return this.gl.TEXTURE0}set(re){(re!==this.current||this.dirty)&&(this.gl.activeTexture(re),this.current=re,this.dirty=!1)}}class Pa extends Si{getDefault(){const re=this.gl;return[0,0,re.drawingBufferWidth,re.drawingBufferHeight]}set(re){const he=this.current;(re[0]!==he[0]||re[1]!==he[1]||re[2]!==he[2]||re[3]!==he[3]||this.dirty)&&(this.gl.viewport(re[0],re[1],re[2],re[3]),this.current=re,this.dirty=!1)}}class Ea extends Si{getDefault(){return null}set(re){if(re===this.current&&!this.dirty)return;const he=this.gl;he.bindFramebuffer(he.FRAMEBUFFER,re),this.current=re,this.dirty=!1}}class $o extends Si{getDefault(){return null}set(re){if(re===this.current&&!this.dirty)return;const he=this.gl;he.bindRenderbuffer(he.RENDERBUFFER,re),this.current=re,this.dirty=!1}}class Ma extends Si{getDefault(){return null}set(re){if(re===this.current&&!this.dirty)return;const he=this.gl;he.bindTexture(he.TEXTURE_2D,re),this.current=re,this.dirty=!1}}class Wc extends Si{getDefault(){return null}set(re){if(re===this.current&&!this.dirty)return;const he=this.gl;he.bindBuffer(he.ARRAY_BUFFER,re),this.current=re,this.dirty=!1}}class ho extends Si{getDefault(){return null}set(re){const he=this.gl;he.bindBuffer(he.ELEMENT_ARRAY_BUFFER,re),this.current=re,this.dirty=!1}}class uo extends Si{getDefault(){return null}set(re){var he;if(re===this.current&&!this.dirty)return;const fe=this.gl;as(fe)?fe.bindVertexArray(re):(he=fe.getExtension("OES_vertex_array_object"))===null||he===void 0||he.bindVertexArrayOES(re),this.current=re,this.dirty=!1}}class Gc extends Si{getDefault(){return 4}set(re){if(re===this.current&&!this.dirty)return;const he=this.gl;he.pixelStorei(he.UNPACK_ALIGNMENT,re),this.current=re,this.dirty=!1}}class Rl extends Si{getDefault(){return!1}set(re){if(re===this.current&&!this.dirty)return;const he=this.gl;he.pixelStorei(he.UNPACK_PREMULTIPLY_ALPHA_WEBGL,re),this.current=re,this.dirty=!1}}class yi extends Si{getDefault(){return!1}set(re){if(re===this.current&&!this.dirty)return;const he=this.gl;he.pixelStorei(he.UNPACK_FLIP_Y_WEBGL,re),this.current=re,this.dirty=!1}}class po extends Si{constructor(re,he){super(re),this.context=re,this.parent=he}getDefault(){return null}}class nu extends po{setDirty(){this.dirty=!0}set(re){if(re===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const he=this.gl;he.framebufferTexture2D(he.FRAMEBUFFER,he.COLOR_ATTACHMENT0,he.TEXTURE_2D,re,0),this.current=re,this.dirty=!1}}class Hc extends po{set(re){if(re===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const he=this.gl;he.framebufferRenderbuffer(he.FRAMEBUFFER,he.DEPTH_ATTACHMENT,he.RENDERBUFFER,re),this.current=re,this.dirty=!1}}class qo extends po{set(re){if(re===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const he=this.gl;he.framebufferRenderbuffer(he.FRAMEBUFFER,he.DEPTH_STENCIL_ATTACHMENT,he.RENDERBUFFER,re),this.current=re,this.dirty=!1}}const Uc="Framebuffer is not complete";class su{constructor(re,he,fe,_e,we){this.context=re,this.width=he,this.height=fe;const Me=re.gl,Fe=this.framebuffer=Me.createFramebuffer();if(this.colorAttachment=new nu(re,Fe),_e)this.depthAttachment=we?new qo(re,Fe):new Hc(re,Fe);else if(we)throw new Error("Stencil cannot be set without depth");if(Me.checkFramebufferStatus(Me.FRAMEBUFFER)!==Me.FRAMEBUFFER_COMPLETE)throw new Error(Uc)}destroy(){const re=this.context.gl,he=this.colorAttachment.get();if(he&&re.deleteTexture(he),this.depthAttachment){const fe=this.depthAttachment.get();fe&&re.deleteRenderbuffer(fe)}re.deleteFramebuffer(this.framebuffer)}}class Zc{constructor(re){var he,fe;if(this.gl=re,this.clearColor=new $s(this),this.clearDepth=new Il(this),this.clearStencil=new Qh(this),this.colorMask=new eu(this),this.depthMask=new tu(this),this.stencilMask=new ru(this),this.stencilFunc=new Nc(this),this.stencilOp=new iu(this),this.stencilTest=new $c(this),this.depthRange=new Sa(this),this.depthTest=new Ta(this),this.depthFunc=new Ca(this),this.blend=new Ll(this),this.blendFunc=new qs(this),this.blendColor=new No(this),this.blendEquation=new co(this),this.cullFace=new Un(this),this.cullFaceSide=new qc(this),this.frontFace=new jc(this),this.program=new zl(this),this.activeTexture=new js(this),this.viewport=new Pa(this),this.bindFramebuffer=new Ea(this),this.bindRenderbuffer=new $o(this),this.bindTexture=new Ma(this),this.bindVertexBuffer=new Wc(this),this.bindElementBuffer=new ho(this),this.bindVertexArray=new uo(this),this.pixelStoreUnpack=new Gc(this),this.pixelStoreUnpackPremultiplyAlpha=new Rl(this),this.pixelStoreUnpackFlipY=new yi(this),this.extTextureFilterAnisotropic=re.getExtension("EXT_texture_filter_anisotropic")||re.getExtension("MOZ_EXT_texture_filter_anisotropic")||re.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=re.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=re.getParameter(re.MAX_TEXTURE_SIZE),as(re)){this.HALF_FLOAT=re.HALF_FLOAT;const _e=re.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(he=re.RGBA16F)!==null&&he!==void 0?he:_e==null?void 0:_e.RGBA16F_EXT,this.RGB16F=(fe=re.RGB16F)!==null&&fe!==void 0?fe:_e==null?void 0:_e.RGB16F_EXT,re.getExtension("EXT_color_buffer_float")}else{re.getExtension("EXT_color_buffer_half_float"),re.getExtension("OES_texture_half_float_linear");const _e=re.getExtension("OES_texture_half_float");this.HALF_FLOAT=_e==null?void 0:_e.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(re,he){return new Al(this,re,he)}createVertexBuffer(re,he,fe){return new Vc(this,re,he,fe)}createRenderbuffer(re,he,fe){const _e=this.gl,we=_e.createRenderbuffer();return this.bindRenderbuffer.set(we),_e.renderbufferStorage(_e.RENDERBUFFER,re,he,fe),this.bindRenderbuffer.set(null),we}createFramebuffer(re,he,fe,_e){return new su(this,re,he,fe,_e)}clear({color:re,depth:he,stencil:fe}){const _e=this.gl;let we=0;re&&(we|=_e.COLOR_BUFFER_BIT,this.clearColor.set(re),this.colorMask.set([!0,!0,!0,!0])),he!==void 0&&(we|=_e.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(he),this.depthMask.set(!0)),fe!==void 0&&(we|=_e.STENCIL_BUFFER_BIT,this.clearStencil.set(fe),this.stencilMask.set(255)),_e.clear(we)}setCullFace(re){re.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(re.mode),this.frontFace.set(re.frontFace))}setDepthMode(re){re.func!==this.gl.ALWAYS||re.mask?(this.depthTest.set(!0),this.depthFunc.set(re.func),this.depthMask.set(re.mask),this.depthRange.set(re.range)):this.depthTest.set(!1)}setStencilMode(re){re.test.func!==this.gl.ALWAYS||re.mask?(this.stencilTest.set(!0),this.stencilMask.set(re.mask),this.stencilOp.set([re.fail,re.depthFail,re.pass]),this.stencilFunc.set({func:re.test.func,ref:re.ref,mask:re.test.mask})):this.stencilTest.set(!1)}setColorMode(re){oe.bH(re.blendFunction,Ii.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(re.blendFunction),this.blendColor.set(re.blendColor)),this.colorMask.set(re.mask)}createVertexArray(){var re;return as(this.gl)?this.gl.createVertexArray():(re=this.gl.getExtension("OES_vertex_array_object"))===null||re===void 0?void 0:re.createVertexArrayOES()}deleteVertexArray(re){var he;return as(this.gl)?this.gl.deleteVertexArray(re):(he=this.gl.getExtension("OES_vertex_array_object"))===null||he===void 0?void 0:he.deleteVertexArrayOES(re)}unbindVAO(){this.bindVertexArray.set(null)}}let Aa;function ka(be,re,he,fe,_e){const we=be.context,Me=be.transform,Fe=we.gl,Be=be.useProgram("collisionBox"),$e=[];let We=0,Je=0;for(let xt=0;xt<fe.length;xt++){const Ct=fe[xt],kt=re.getTile(Ct).getBucket(he);if(!kt)continue;const Tt=_e?kt.textCollisionBox:kt.iconCollisionBox,Lt=kt.collisionCircleArray;Lt.length>0&&($e.push({circleArray:Lt,circleOffset:Je,coord:Ct}),We+=Lt.length/4,Je=We),Tt&&Be.draw(we,Fe.LINES,ei.disabled,fi.disabled,be.colorModeForRenderPass(),xi.disabled,Yh(be.transform),be.style.map.terrain&&be.style.map.terrain.getTerrainData(Ct),Me.getProjectionData({overscaledTileID:Ct,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),he.id,Tt.layoutVertexBuffer,Tt.indexBuffer,Tt.segments,null,be.transform.zoom,null,null,Tt.collisionVertexBuffer)}if(!_e||!$e.length)return;const Xe=be.useProgram("collisionCircle"),st=new oe.c0;st.resize(4*We),st._trim();let ht=0;for(const xt of $e)for(let Ct=0;Ct<xt.circleArray.length/4;Ct++){const kt=4*Ct,Tt=xt.circleArray[kt+0],Lt=xt.circleArray[kt+1],Rt=xt.circleArray[kt+2],Pt=xt.circleArray[kt+3];st.emplace(ht++,Tt,Lt,Rt,Pt,0),st.emplace(ht++,Tt,Lt,Rt,Pt,1),st.emplace(ht++,Tt,Lt,Rt,Pt,2),st.emplace(ht++,Tt,Lt,Rt,Pt,3)}(!Aa||Aa.length<2*We)&&(Aa=function(xt){const Ct=2*xt,kt=new oe.c2;kt.resize(Ct),kt._trim();for(let Tt=0;Tt<Ct;Tt++){const Lt=6*Tt;kt.uint16[Lt+0]=4*Tt+0,kt.uint16[Lt+1]=4*Tt+1,kt.uint16[Lt+2]=4*Tt+2,kt.uint16[Lt+3]=4*Tt+2,kt.uint16[Lt+4]=4*Tt+3,kt.uint16[Lt+5]=4*Tt+0}return kt}(We));const vt=we.createIndexBuffer(Aa,!0),bt=we.createVertexBuffer(st,oe.c1.members,!0);for(const xt of $e){const Ct=Mc(be.transform);Xe.draw(we,Fe.TRIANGLES,ei.disabled,fi.disabled,be.colorModeForRenderPass(),xi.disabled,Ct,be.style.map.terrain&&be.style.map.terrain.getTerrainData(xt.coord),null,he.id,bt,vt,oe.aM.simpleSegment(0,2*xt.circleOffset,xt.circleArray.length,xt.circleArray.length/2),null,be.transform.zoom,null,null,null)}bt.destroy(),vt.destroy()}const Ia=oe.ai(new Float32Array(16));function La(be,re,he,fe,_e,we){const{horizontalAlign:Me,verticalAlign:Fe}=oe.aH(be);return new oe.P((-(Me-.5)*re/_e+fe[0])*we,(-(Fe-.5)*he/_e+fe[1])*we)}function za(be,re,he,fe,_e,we){const Me=re.tileAnchorPoint.add(new oe.P(re.translation[0],re.translation[1]));if(re.pitchWithMap){let Fe=fe.mult(we);he||(Fe=Fe.rotate(-_e));const Be=Me.add(Fe);return Mr(Be.x,Be.y,re.pitchedLabelPlaneMatrix,re.getElevation).point}if(he){const Fe=Fr(re.tileAnchorPoint.x+1,re.tileAnchorPoint.y,re).point.sub(be),Be=Math.atan(Fe.y/Fe.x)+(Fe.x<0?Math.PI:0);return be.add(fe.rotate(Be))}return be.add(fe)}function Fl(be,re,he,fe,_e,we,Me,Fe,Be,$e,We,Je){const Xe=be.text.placedSymbolArray,st=be.text.dynamicLayoutVertexArray,ht=be.icon.dynamicLayoutVertexArray,vt={};st.clear();for(let bt=0;bt<Xe.length;bt++){const xt=Xe.get(bt),Ct=xt.hidden||!xt.crossTileID||be.allowVerticalPlacement&&!xt.placedOrientation?null:fe[xt.crossTileID];if(Ct){const kt=new oe.P(xt.anchorX,xt.anchorY),Tt={getElevation:Je,width:_e.width,height:_e.height,pitchedLabelPlaneMatrix:we,pitchWithMap:he,transform:_e,tileAnchorPoint:kt,translation:$e,unwrappedTileID:We},Lt=he?qi(kt.x,kt.y,Tt):Fr(kt.x,kt.y,Tt),Rt=pi(_e.cameraToCenterDistance,Lt.signedDistanceFromCamera);let Pt=oe.ap(be.textSizeData,Fe,xt)*Rt/oe.aB;he&&(Pt*=be.tilePixelRatio/Me);const{width:Nt,height:Yt,anchor:Wt,textOffset:Ut,textBoxScale:Kt}=Ct,br=La(Wt,Nt,Yt,Ut,Kt,Pt),xr=_e.getPitchedTextCorrection(kt.x+$e[0],kt.y+$e[1],We),_r=za(Lt.point,Tt,re,br,-_e.bearingInRadians,xr),Br=be.allowVerticalPlacement&&xt.placedOrientation===oe.ao.vertical?Math.PI/2:0;for(let ti=0;ti<xt.numGlyphs;ti++)oe.av(st,_r,Br);Be&&xt.associatedIconIndex>=0&&(vt[xt.associatedIconIndex]={shiftedAnchor:_r,angle:Br})}else Xi(xt.numGlyphs,st)}if(Be){ht.clear();const bt=be.icon.placedSymbolArray;for(let xt=0;xt<bt.length;xt++){const Ct=bt.get(xt);if(Ct.hidden)Xi(Ct.numGlyphs,ht);else{const kt=vt[xt];if(kt)for(let Tt=0;Tt<Ct.numGlyphs;Tt++)oe.av(ht,kt.shiftedAnchor,kt.angle);else Xi(Ct.numGlyphs,ht)}}be.icon.dynamicLayoutVertexBuffer.updateData(ht)}be.text.dynamicLayoutVertexBuffer.updateData(st)}function Xc(be,re,he){return he.iconsInText&&re?"symbolTextAndIcon":be?"symbolSDF":"symbolIcon"}function jo(be,re,he,fe,_e,we,Me,Fe,Be,$e,We,Je,Xe){const st=be.context,ht=st.gl,vt=be.transform,bt=Fe==="map",xt=Be==="map",Ct=Fe!=="viewport"&&he.layout.get("symbol-placement")!=="point",kt=bt&&!xt&&!Ct,Tt=!he.layout.get("symbol-sort-key").isConstant();let Lt=!1;const Rt=be.getDepthModeForSublayer(0,ei.ReadOnly),Pt=he._unevaluatedLayout.hasValue("text-variable-anchor")||he._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Nt=[],Yt=vt.getCircleRadiusCorrection();for(const Wt of fe){const Ut=re.getTile(Wt),Kt=Ut.getBucket(he);if(!Kt)continue;const br=_e?Kt.text:Kt.icon;if(!br||!br.segments.get().length||!br.hasVisibleVertices)continue;const xr=br.programConfigurations.get(he.id),_r=_e||Kt.sdfIcons,Br=_e?Kt.textSizeData:Kt.iconSizeData,ti=xt||vt.pitch!==0,Ti=be.useProgram(Xc(_r,_e,Kt),xr),Oi=oe.an(Br,vt.zoom),Fi=be.style.map.terrain&&be.style.map.terrain.getTerrainData(Wt);let di,zi,cn,Ui,pn=[0,0],Qi=null;if(_e)zi=Ut.glyphAtlasTexture,cn=ht.LINEAR,di=Ut.glyphAtlasTexture.size,Kt.iconsInText&&(pn=Ut.imageAtlasTexture.size,Qi=Ut.imageAtlasTexture,Ui=ti||be.options.rotating||be.options.zooming||Br.kind==="composite"||Br.kind==="camera"?ht.LINEAR:ht.NEAREST);else{const nn=he.layout.get("icon-size").constantOr(0)!==1||Kt.iconsNeedLinear;zi=Ut.imageAtlasTexture,cn=_r||be.options.rotating||be.options.zooming||nn||ti?ht.LINEAR:ht.NEAREST,di=Ut.imageAtlasTexture.size}const tn=oe.aC(Ut,1,be.transform.zoom),fn=hr(bt,be.transform,tn),Ms=oe.L();oe.aq(Ms,fn);const As=jt(xt,bt,be.transform,tn),Xs=oe.aD(vt,Ut,we,Me),ks=vt.getProjectionData({overscaledTileID:Wt,applyGlobeMatrix:!Xe,applyTerrainMatrix:!0}),Ys=Pt&&Kt.hasTextData(),Ko=he.layout.get("icon-text-fit")!=="none"&&Ys&&Kt.hasIconData();if(Ct){const nn=be.style.map.terrain?(Nn,en)=>be.style.map.terrain.getElevation(Wt,Nn,en):null,mn=he.layout.get("text-rotation-alignment")==="map";or(Kt,be,_e,fn,Ms,xt,$e,mn,Wt.toUnwrapped(),vt.width,vt.height,Xs,nn)}const Is=_e&&Pt||Ko,Dn=Ct||Is?Ia:xt?fn:be.transform.clipSpaceToPixelsMatrix,kn=_r&&he.paint.get(_e?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let ps;ps=_r?Kt.iconsInText?El(Br.kind,Oi,kt,xt,Ct,Is,be,Dn,As,Xs,di,pn,Yt):Pl(Br.kind,Oi,kt,xt,Ct,Is,be,Dn,As,Xs,_e,di,0,Yt):Cl(Br.kind,Oi,kt,xt,Ct,Is,be,Dn,As,Xs,_e,di,Yt);const Eo={program:Ti,buffers:br,uniformValues:ps,projectionData:ks,atlasTexture:zi,atlasTextureIcon:Qi,atlasInterpolation:cn,atlasInterpolationIcon:Ui,isSDF:_r,hasHalo:kn};if(Tt&&Kt.canOverlap){Lt=!0;const nn=br.segments.get();for(const mn of nn)Nt.push({segments:new oe.aM([mn]),sortKey:mn.sortKey,state:Eo,terrainData:Fi})}else Nt.push({segments:br.segments,sortKey:0,state:Eo,terrainData:Fi})}Lt&&Nt.sort((Wt,Ut)=>Wt.sortKey-Ut.sortKey);for(const Wt of Nt){const Ut=Wt.state;if(st.activeTexture.set(ht.TEXTURE0),Ut.atlasTexture.bind(Ut.atlasInterpolation,ht.CLAMP_TO_EDGE),Ut.atlasTextureIcon&&(st.activeTexture.set(ht.TEXTURE1),Ut.atlasTextureIcon&&Ut.atlasTextureIcon.bind(Ut.atlasInterpolationIcon,ht.CLAMP_TO_EDGE)),Ut.isSDF){const Kt=Ut.uniformValues;Ut.hasHalo&&(Kt.u_is_halo=1,Wo(Ut.buffers,Wt.segments,he,be,Ut.program,Rt,We,Je,Kt,Ut.projectionData,Wt.terrainData)),Kt.u_is_halo=0}Wo(Ut.buffers,Wt.segments,he,be,Ut.program,Rt,We,Je,Ut.uniformValues,Ut.projectionData,Wt.terrainData)}}function Wo(be,re,he,fe,_e,we,Me,Fe,Be,$e,We){const Je=fe.context;_e.draw(Je,Je.gl.TRIANGLES,we,Me,Fe,xi.backCCW,Be,We,$e,he.id,be.layoutVertexBuffer,be.indexBuffer,re,he.paint,fe.transform.zoom,be.programConfigurations.get(he.id),be.dynamicLayoutVertexBuffer,be.opacityVertexBuffer)}function Ra(be,re,he,fe,_e){const we=be.context,Me=we.gl,Fe=fi.disabled,Be=new Ii([Me.ONE,Me.ONE],oe.bf.transparent,[!0,!0,!0,!0]),$e=re.getBucket(he);if(!$e)return;const We=fe.key;let Je=he.heatmapFbos.get(We);Je||(Je=Fa(we,re.tileSize,re.tileSize),he.heatmapFbos.set(We,Je)),we.bindFramebuffer.set(Je.framebuffer),we.viewport.set([0,0,re.tileSize,re.tileSize]),we.clear({color:oe.bf.transparent});const Xe=$e.programConfigurations.get(he.id),st=be.useProgram("heatmap",Xe,!_e),ht=be.transform.getProjectionData({overscaledTileID:re.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),vt=be.style.map.terrain.getTerrainData(fe);st.draw(we,Me.TRIANGLES,ei.disabled,Fe,Be,xi.disabled,Tl(re,be.transform.zoom,he.paint.get("heatmap-intensity"),1),vt,ht,he.id,$e.layoutVertexBuffer,$e.indexBuffer,$e.segments,he.paint,be.transform.zoom,Xe)}function fo(be,re,he,fe,_e){const we=be.context,Me=we.gl,Fe=be.transform;we.setColorMode(be.colorModeForRenderPass());const Be=Yc(we,re),$e=he.key,We=re.heatmapFbos.get($e);if(!We)return;we.activeTexture.set(Me.TEXTURE0),Me.bindTexture(Me.TEXTURE_2D,We.colorAttachment.get()),we.activeTexture.set(Me.TEXTURE1),Be.bind(Me.LINEAR,Me.CLAMP_TO_EDGE);const Je=Fe.getProjectionData({overscaledTileID:he,applyTerrainMatrix:_e,applyGlobeMatrix:!fe});be.useProgram("heatmapTexture").draw(we,Me.TRIANGLES,ei.disabled,fi.disabled,be.colorModeForRenderPass(),xi.disabled,xa(be,re,0,1),null,Je,re.id,be.rasterBoundsBuffer,be.quadTriangleIndexBuffer,be.rasterBoundsSegments,re.paint,Fe.zoom),We.destroy(),re.heatmapFbos.delete($e)}function Fa(be,re,he){var fe,_e;const we=be.gl,Me=we.createTexture();we.bindTexture(we.TEXTURE_2D,Me),we.texParameteri(we.TEXTURE_2D,we.TEXTURE_WRAP_S,we.CLAMP_TO_EDGE),we.texParameteri(we.TEXTURE_2D,we.TEXTURE_WRAP_T,we.CLAMP_TO_EDGE),we.texParameteri(we.TEXTURE_2D,we.TEXTURE_MIN_FILTER,we.LINEAR),we.texParameteri(we.TEXTURE_2D,we.TEXTURE_MAG_FILTER,we.LINEAR);const Fe=(fe=be.HALF_FLOAT)!==null&&fe!==void 0?fe:we.UNSIGNED_BYTE,Be=(_e=be.RGBA16F)!==null&&_e!==void 0?_e:we.RGBA;we.texImage2D(we.TEXTURE_2D,0,Be,re,he,0,we.RGBA,Fe,null);const $e=be.createFramebuffer(re,he,!1,!1);return $e.colorAttachment.set(Me),$e}function Yc(be,re){return re.colorRampTexture||(re.colorRampTexture=new oe.T(be,re.colorRamp,be.gl.RGBA)),re.colorRampTexture}function mo(be,re,he,fe,_e,we,Me,Fe){let Be=256;if(_e.stepInterpolant){const $e=re.getSource().maxzoom,We=Me.canonical.z===$e?Math.ceil(1<<be.transform.maxZoom-Me.canonical.z):1;Be=oe.ae(oe.c4(we.maxLineLength/oe.$*1024*We),256,he.maxTextureSize)}return Fe.gradient=oe.c5({expression:_e.gradientExpression(),evaluationKey:"lineProgress",resolution:Be,image:Fe.gradient||void 0,clips:we.lineClipsArray}),Fe.texture?Fe.texture.update(Fe.gradient):Fe.texture=new oe.T(he,Fe.gradient,fe.RGBA),Fe.version=_e.gradientVersion,Fe.texture}function ou(be,re,he,fe,_e){be.activeTexture.set(re.TEXTURE0),he.imageAtlasTexture.bind(re.LINEAR,re.CLAMP_TO_EDGE),fe.updatePaintBuffers(_e)}function Kc(be,re,he,fe,_e,we){(_e||be.lineAtlas.dirty)&&(re.activeTexture.set(he.TEXTURE0),be.lineAtlas.bind(re)),fe.updatePaintBuffers(we)}function Da(be,re,he,fe,_e,we,Me){const Fe=we.gradients[_e.id];let Be=Fe.texture;_e.gradientVersion!==Fe.version&&(Be=mo(be,re,he,fe,_e,we,Me,Fe)),he.activeTexture.set(fe.TEXTURE0),Be.bind(_e.stepInterpolant?fe.NEAREST:fe.LINEAR,fe.CLAMP_TO_EDGE)}function Dl(be,re,he,fe,_e,we,Me,Fe,Be){const $e=we.gradients[_e.id];let We=$e.texture;_e.gradientVersion!==$e.version&&(We=mo(be,re,he,fe,_e,we,Me,$e)),he.activeTexture.set(fe.TEXTURE0),We.bind(_e.stepInterpolant?fe.NEAREST:fe.LINEAR,fe.CLAMP_TO_EDGE),he.activeTexture.set(fe.TEXTURE1),be.lineAtlas.bind(he),Fe.updatePaintBuffers(Be)}function Bl(be,re,he,fe,_e){if(!he||!fe||!fe.imageAtlas)return;const we=fe.imageAtlas.patternPositions;let Me=we[he.to.toString()],Fe=we[he.from.toString()];if(!Me&&Fe&&(Me=Fe),!Fe&&Me&&(Fe=Me),!Me||!Fe){const Be=_e.getPaintProperty(re);Me=we[Be],Fe=we[Be]}Me&&Fe&&be.setConstantPatternPositions(Me,Fe)}function Ol(be,re,he,fe,_e,we,Me,Fe){const Be=be.context.gl,$e="fill-pattern",We=he.paint.get($e),Je=We&&We.constantOr(1),Xe=he.getCrossfadeParameters();let st,ht,vt,bt,xt;const Ct=be.transform,kt=he.paint.get("fill-translate"),Tt=he.paint.get("fill-translate-anchor");Me?(ht=Je&&!he.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",st=Be.LINES):(ht=Je?"fillPattern":"fill",st=Be.TRIANGLES);const Lt=We.constantOr(null);for(const Rt of fe){const Pt=re.getTile(Rt);if(Je&&!Pt.patternsLoaded())continue;const Nt=Pt.getBucket(he);if(!Nt)continue;const Yt=Nt.programConfigurations.get(he.id),Wt=be.useProgram(ht,Yt),Ut=be.style.map.terrain&&be.style.map.terrain.getTerrainData(Rt);Je&&(be.context.activeTexture.set(Be.TEXTURE0),Pt.imageAtlasTexture.bind(Be.LINEAR,Be.CLAMP_TO_EDGE),Yt.updatePaintBuffers(Xe)),Bl(Yt,$e,Lt,Pt,he);const Kt=Ct.getProjectionData({overscaledTileID:Rt,applyGlobeMatrix:!Fe,applyTerrainMatrix:!0}),br=oe.aD(Ct,Pt,kt,Tt);if(Me){bt=Nt.indexBuffer2,xt=Nt.segments2;const _r=[Be.drawingBufferWidth,Be.drawingBufferHeight];vt=ht==="fillOutlinePattern"&&Je?Xh(be,Xe,Pt,_r,br):ba(_r,br)}else bt=Nt.indexBuffer,xt=Nt.segments,vt=Je?Ec(be,Xe,Pt,br):{u_fill_translate:br};const xr=be.stencilModeForClipping(Rt);Wt.draw(be.context,st,_e,xr,we,xi.backCCW,vt,Ut,Kt,he.id,Nt.layoutVertexBuffer,bt,xt,he.paint,be.transform.zoom,Yt)}}function go(be,re,he,fe,_e,we,Me,Fe){const Be=be.context,$e=Be.gl,We="fill-extrusion-pattern",Je=he.paint.get(We),Xe=Je.constantOr(1),st=he.getCrossfadeParameters(),ht=he.paint.get("fill-extrusion-opacity"),vt=Je.constantOr(null),bt=be.transform;for(const xt of fe){const Ct=re.getTile(xt),kt=Ct.getBucket(he);if(!kt)continue;const Tt=be.style.map.terrain&&be.style.map.terrain.getTerrainData(xt),Lt=kt.programConfigurations.get(he.id),Rt=be.useProgram(Xe?"fillExtrusionPattern":"fillExtrusion",Lt);Xe&&(be.context.activeTexture.set($e.TEXTURE0),Ct.imageAtlasTexture.bind($e.LINEAR,$e.CLAMP_TO_EDGE),Lt.updatePaintBuffers(st));const Pt=bt.getProjectionData({overscaledTileID:xt,applyGlobeMatrix:!Fe,applyTerrainMatrix:!0});Bl(Lt,We,vt,Ct,he);const Nt=oe.aD(bt,Ct,he.paint.get("fill-extrusion-translate"),he.paint.get("fill-extrusion-translate-anchor")),Yt=he.paint.get("fill-extrusion-vertical-gradient"),Wt=Xe?Oo(be,Yt,ht,Nt,xt,st,Ct):oo(be,Yt,ht,Nt);Rt.draw(Be,Be.gl.TRIANGLES,_e,we,Me,xi.backCCW,Wt,Tt,Pt,he.id,kt.layoutVertexBuffer,kt.indexBuffer,kt.segments,he.paint,be.transform.zoom,Lt,be.style.map.terrain&&kt.centroidVertexBuffer)}}function Go(be,re,he,fe,_e,we,Me,Fe,Be){var $e;const We=be.style.projection,Je=be.context,Xe=be.transform,st=Je.gl,ht=[`#define NUM_ILLUMINATION_SOURCES ${he.paint.get("hillshade-highlight-color").values.length}`],vt=be.useProgram("hillshade",null,!1,ht),bt=!be.options.moving;for(const xt of fe){const Ct=re.getTile(xt),kt=Ct.fbo;if(!kt)continue;const Tt=We.getMeshFromTileID(Je,xt.canonical,Fe,!0,"raster"),Lt=($e=be.style.map.terrain)===null||$e===void 0?void 0:$e.getTerrainData(xt);Je.activeTexture.set(st.TEXTURE0),st.bindTexture(st.TEXTURE_2D,kt.colorAttachment.get());const Rt=Xe.getProjectionData({overscaledTileID:xt,aligned:bt,applyGlobeMatrix:!Be,applyTerrainMatrix:!0});vt.draw(Je,st.TRIANGLES,we,_e[xt.overscaledZ],Me,xi.backCCW,kc(be,Ct,he),Lt,Rt,he.id,Tt.vertexBuffer,Tt.indexBuffer,Tt.segments)}}function Vl(be,re,he,fe,_e,we,Me,Fe,Be){var $e;const We=be.style.projection,Je=be.context,Xe=be.transform,st=Je.gl,ht=be.useProgram("colorRelief"),vt=!be.options.moving;let bt=!0,xt=0;for(const Ct of fe){const kt=re.getTile(Ct),Tt=kt.dem;if(bt){const Wt=st.getParameter(st.MAX_TEXTURE_SIZE),{elevationTexture:Ut,colorTexture:Kt}=he.getColorRampTextures(Je,Wt,Tt.getUnpackVector());Je.activeTexture.set(st.TEXTURE1),Ut.bind(st.NEAREST,st.CLAMP_TO_EDGE),Je.activeTexture.set(st.TEXTURE4),Kt.bind(st.LINEAR,st.CLAMP_TO_EDGE),bt=!1,xt=Ut.size[0]}if(!Tt||!Tt.data)continue;const Lt=Tt.stride,Rt=Tt.getPixels();if(Je.activeTexture.set(st.TEXTURE0),Je.pixelStoreUnpackPremultiplyAlpha.set(!1),kt.demTexture=kt.demTexture||be.getTileTexture(Lt),kt.demTexture){const Wt=kt.demTexture;Wt.update(Rt,{premultiply:!1}),Wt.bind(st.LINEAR,st.CLAMP_TO_EDGE)}else kt.demTexture=new oe.T(Je,Rt,st.RGBA,{premultiply:!1}),kt.demTexture.bind(st.LINEAR,st.CLAMP_TO_EDGE);const Pt=We.getMeshFromTileID(Je,Ct.canonical,Fe,!0,"raster"),Nt=($e=be.style.map.terrain)===null||$e===void 0?void 0:$e.getTerrainData(Ct),Yt=Xe.getProjectionData({overscaledTileID:Ct,aligned:vt,applyGlobeMatrix:!Be,applyTerrainMatrix:!0});ht.draw(Je,st.TRIANGLES,we,_e[Ct.overscaledZ],Me,xi.backCCW,zc(he,kt.dem,xt),Nt,Yt,he.id,Pt.vertexBuffer,Pt.indexBuffer,Pt.segments)}}const Ba=[new oe.P(0,0),new oe.P(oe.$,0),new oe.P(oe.$,oe.$),new oe.P(0,oe.$)];function Wi(be,re,he,fe,_e,we,Me,Fe,Be=!1,$e=!1){const We=fe[fe.length-1].overscaledZ,Je=be.context,Xe=Je.gl,st=be.useProgram("raster"),ht=be.transform,vt=be.style.projection,bt=be.colorModeForRenderPass(),xt=!be.options.moving,Ct=he.paint.get("raster-opacity"),kt=he.paint.get("raster-resampling"),Tt=he.paint.get("raster-fade-duration"),Lt=!!be.style.map.terrain;for(const Rt of fe){const Pt=be.getDepthModeForSublayer(Rt.overscaledZ-We,Ct===1?ei.ReadWrite:ei.ReadOnly,Xe.LESS),Nt=re.getTile(Rt),Yt=kt==="nearest"?Xe.NEAREST:Xe.LINEAR;Je.activeTexture.set(Xe.TEXTURE0),Nt.texture.bind(Yt,Xe.CLAMP_TO_EDGE,Xe.LINEAR_MIPMAP_NEAREST),Je.activeTexture.set(Xe.TEXTURE1);const{parentTile:Wt,parentScaleBy:Ut,parentTopLeft:Kt,fadeValues:br}=Ws(Nt,re,Tt,Lt);Nt.fadeOpacity=br.tileOpacity,Wt?(Wt.fadeOpacity=br.parentTileOpacity,Wt.texture.bind(Yt,Xe.CLAMP_TO_EDGE,Xe.LINEAR_MIPMAP_NEAREST)):Nt.texture.bind(Yt,Xe.CLAMP_TO_EDGE,Xe.LINEAR_MIPMAP_NEAREST),Nt.texture.useMipmap&&Je.extTextureFilterAnisotropic&&be.transform.pitch>20&&Xe.texParameterf(Xe.TEXTURE_2D,Je.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Je.extTextureFilterAnisotropicMax);const xr=be.style.map.terrain&&be.style.map.terrain.getTerrainData(Rt),_r=ht.getProjectionData({overscaledTileID:Rt,aligned:xt,applyGlobeMatrix:!$e,applyTerrainMatrix:!0}),Br=Jh(Kt,Ut,br.fadeMix,he,Fe),ti=vt.getMeshFromTileID(Je,Rt.canonical,we,Me,"raster");st.draw(Je,Xe.TRIANGLES,Pt,_e?_e[Rt.overscaledZ]:fi.disabled,bt,Be?xi.frontCCW:xi.backCCW,Br,xr,_r,he.id,ti.vertexBuffer,ti.indexBuffer,ti.segments)}}function Ws(be,re,he,fe){const _e={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(he===0||fe)return _e;if(be.fadingParentID){const we=re._getLoadedTile(be.fadingParentID);if(!we)return _e;const Me=Math.pow(2,we.tileID.overscaledZ-be.tileID.overscaledZ),Fe=[be.tileID.canonical.x*Me%1,be.tileID.canonical.y*Me%1],Be=function($e,We,Je){const Xe=Ae(),st=(Xe-We.timeAdded)/Je,ht=$e.fadingDirection===tt.Incoming,vt=oe.ae((Xe-$e.timeAdded)/Je,0,1),bt=oe.ae(1-st,0,1),xt=ht?vt:bt;return{tileOpacity:xt,parentTileOpacity:ht?bt:vt,fadeMix:{opacity:1,mix:1-xt}}}(be,we,he);return{parentTile:we,parentScaleBy:Me,parentTopLeft:Fe,fadeValues:Be}}if(be.selfFading){const we=function(Me,Fe){const Be=(Ae()-Me.timeAdded)/Fe,$e=oe.ae(Be,0,1);return{tileOpacity:$e,fadeMix:{opacity:$e,mix:0}}}(be,he);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:we}}return _e}const Zn=new oe.bf(1,0,0,1),Nl=new oe.bf(0,1,0,1),Oa=new oe.bf(0,0,1,1),Jc=new oe.bf(1,0,1,1),_o=new oe.bf(0,1,1,1);function Va(be,re,he,fe){vo(be,0,re+he/2,be.transform.width,he,fe)}function yo(be,re,he,fe){vo(be,re-he/2,0,he,be.transform.height,fe)}function vo(be,re,he,fe,_e,we){const Me=be.context,Fe=Me.gl;Fe.enable(Fe.SCISSOR_TEST),Fe.scissor(re*be.pixelRatio,he*be.pixelRatio,fe*be.pixelRatio,_e*be.pixelRatio),Me.clear({color:we}),Fe.disable(Fe.SCISSOR_TEST)}function Qc(be,re,he){const fe=be.context,_e=fe.gl,we=be.useProgram("debug"),Me=ei.disabled,Fe=fi.disabled,Be=be.colorModeForRenderPass(),$e="$debug",We=be.style.map.terrain&&be.style.map.terrain.getTerrainData(he);fe.activeTexture.set(_e.TEXTURE0);const Je=re.getTileByID(he.key).latestRawTileData,Xe=Math.floor((Je&&Je.byteLength||0)/1024),st=re.getTile(he).tileSize,ht=512/Math.min(st,512)*(he.overscaledZ/be.transform.zoom)*.5;let vt=he.canonical.toString();he.overscaledZ!==he.canonical.z&&(vt+=` => ${he.overscaledZ}`),function(xt,Ct){xt.initDebugOverlayCanvas();const kt=xt.debugOverlayCanvas,Tt=xt.context.gl,Lt=xt.debugOverlayCanvas.getContext("2d");Lt.clearRect(0,0,kt.width,kt.height),Lt.shadowColor="white",Lt.shadowBlur=2,Lt.lineWidth=1.5,Lt.strokeStyle="white",Lt.textBaseline="top",Lt.font="bold 36px Open Sans, sans-serif",Lt.fillText(Ct,5,5),Lt.strokeText(Ct,5,5),xt.debugOverlayTexture.update(kt),xt.debugOverlayTexture.bind(Tt.LINEAR,Tt.CLAMP_TO_EDGE)}(be,`${vt} ${Xe}kB`);const bt=be.transform.getProjectionData({overscaledTileID:he,applyGlobeMatrix:!0,applyTerrainMatrix:!0});we.draw(fe,_e.TRIANGLES,Me,Fe,Ii.alphaBlended,xi.disabled,Ac(oe.bf.transparent,ht),null,bt,$e,be.debugBuffer,be.quadTriangleIndexBuffer,be.debugSegments),we.draw(fe,_e.LINE_STRIP,Me,Fe,Be,xi.disabled,Ac(oe.bf.red),We,bt,$e,be.debugBuffer,be.tileBorderIndexBuffer,be.debugSegments)}function $l(be,re,he,fe){const{isRenderingGlobe:_e}=fe,we=be.context,Me=we.gl,Fe=be.transform,Be=be.colorModeForRenderPass(),$e=be.getDepthModeFor3D(),We=be.useProgram("terrain");we.bindFramebuffer.set(null),we.viewport.set([0,0,be.width,be.height]);for(const Je of he){const Xe=re.getTerrainMesh(Je.tileID),st=be.renderToTexture.getTexture(Je),ht=re.getTerrainData(Je.tileID);we.activeTexture.set(Me.TEXTURE0),Me.bindTexture(Me.TEXTURE_2D,st.texture);const vt=re.getMeshFrameDelta(Fe.zoom),bt=Fe.calculateFogMatrix(Je.tileID.toUnwrapped()),xt=wl(vt,bt,be.style.sky,Fe.pitch,_e),Ct=Fe.getProjectionData({overscaledTileID:Je.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});We.draw(we,Me.TRIANGLES,$e,fi.disabled,Be,xi.backCCW,xt,ht,Ct,"terrain",Xe.vertexBuffer,Xe.indexBuffer,Xe.segments)}}function ql(be,re){if(!re.mesh){const he=new oe.aL;he.emplaceBack(-1,-1),he.emplaceBack(1,-1),he.emplaceBack(1,1),he.emplaceBack(-1,1);const fe=new oe.aN;fe.emplaceBack(0,1,2),fe.emplaceBack(0,2,3),re.mesh=new Yn(be.createVertexBuffer(he,ai.members),be.createIndexBuffer(fe),oe.aM.simpleSegment(0,0,he.length,fe.length))}return re.mesh}class eh{constructor(re,he){this.context=new Zc(re),this.transform=he,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:oe.ai(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=mr.maxUnderzooming+mr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Bs}resize(re,he,fe){if(this.width=Math.floor(re*fe),this.height=Math.floor(he*fe),this.pixelRatio=fe,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const _e of this.style._order)this.style._layers[_e].resize()}setup(){const re=this.context,he=new oe.aL;he.emplaceBack(0,0),he.emplaceBack(oe.$,0),he.emplaceBack(0,oe.$),he.emplaceBack(oe.$,oe.$),this.tileExtentBuffer=re.createVertexBuffer(he,ai.members),this.tileExtentSegments=oe.aM.simpleSegment(0,0,4,2);const fe=new oe.aL;fe.emplaceBack(0,0),fe.emplaceBack(oe.$,0),fe.emplaceBack(0,oe.$),fe.emplaceBack(oe.$,oe.$),this.debugBuffer=re.createVertexBuffer(fe,ai.members),this.debugSegments=oe.aM.simpleSegment(0,0,4,5);const _e=new oe.c7;_e.emplaceBack(0,0,0,0),_e.emplaceBack(oe.$,0,oe.$,0),_e.emplaceBack(0,oe.$,0,oe.$),_e.emplaceBack(oe.$,oe.$,oe.$,oe.$),this.rasterBoundsBuffer=re.createVertexBuffer(_e,xl.members),this.rasterBoundsSegments=oe.aM.simpleSegment(0,0,4,2);const we=new oe.aL;we.emplaceBack(0,0),we.emplaceBack(oe.$,0),we.emplaceBack(0,oe.$),we.emplaceBack(oe.$,oe.$),this.rasterBoundsBufferPosOnly=re.createVertexBuffer(we,ai.members),this.rasterBoundsSegmentsPosOnly=oe.aM.simpleSegment(0,0,4,5);const Me=new oe.aL;Me.emplaceBack(0,0),Me.emplaceBack(1,0),Me.emplaceBack(0,1),Me.emplaceBack(1,1),this.viewportBuffer=re.createVertexBuffer(Me,ai.members),this.viewportSegments=oe.aM.simpleSegment(0,0,4,2);const Fe=new oe.c8;Fe.emplaceBack(0),Fe.emplaceBack(1),Fe.emplaceBack(3),Fe.emplaceBack(2),Fe.emplaceBack(0),this.tileBorderIndexBuffer=re.createIndexBuffer(Fe);const Be=new oe.aN;Be.emplaceBack(1,0,2),Be.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=re.createIndexBuffer(Be);const $e=this.context.gl;this.stencilClearMode=new fi({func:$e.ALWAYS,mask:0},0,255,$e.ZERO,$e.ZERO,$e.ZERO),this.tileExtentMesh=new Yn(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const re=this.context,he=re.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const fe=oe.L();oe.bZ(fe,0,this.width,this.height,0,0,1),oe.N(fe,fe,[he.drawingBufferWidth,he.drawingBufferHeight,0]);const _e={mainMatrix:fe,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:fe};this.useProgram("clippingMask",null,!0).draw(re,he.TRIANGLES,ei.disabled,this.stencilClearMode,Ii.disabled,xi.disabled,null,null,_e,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(re,he,fe){if(this.currentStencilSource===re.source||!re.isTileClipped()||!he||!he.length)return;this.currentStencilSource=re.source,this.nextStencilID+he.length>256&&this.clearStencil();const _e=this.context;_e.setColorMode(Ii.disabled),_e.setDepthMode(ei.disabled);const we={};for(const Me of he)we[Me.key]=this.nextStencilID++;this._renderTileMasks(we,he,fe,!0),this._renderTileMasks(we,he,fe,!1),this._tileClippingMaskIDs=we}_renderTileMasks(re,he,fe,_e){const we=this.context,Me=we.gl,Fe=this.style.projection,Be=this.transform,$e=this.useProgram("clippingMask");for(const We of he){const Je=re[We.key],Xe=this.style.map.terrain&&this.style.map.terrain.getTerrainData(We),st=Fe.getMeshFromTileID(this.context,We.canonical,_e,!0,"stencil"),ht=Be.getProjectionData({overscaledTileID:We,applyGlobeMatrix:!fe,applyTerrainMatrix:!0});$e.draw(we,Me.TRIANGLES,ei.disabled,new fi({func:Me.ALWAYS,mask:0},Je,255,Me.KEEP,Me.KEEP,Me.REPLACE),Ii.disabled,fe?xi.disabled:xi.backCCW,null,Xe,ht,"$clipping",st.vertexBuffer,st.indexBuffer,st.segments)}}_renderTilesDepthBuffer(){const re=this.context,he=re.gl,fe=this.style.projection,_e=this.transform,we=this.useProgram("depth"),Me=this.getDepthModeFor3D(),Fe=kr(_e,{tileSize:_e.tileSize});for(const Be of Fe){const $e=this.style.map.terrain&&this.style.map.terrain.getTerrainData(Be),We=fe.getMeshFromTileID(this.context,Be.canonical,!0,!0,"raster"),Je=_e.getProjectionData({overscaledTileID:Be,applyGlobeMatrix:!0,applyTerrainMatrix:!0});we.draw(re,he.TRIANGLES,Me,fi.disabled,Ii.disabled,xi.backCCW,null,$e,Je,"$clipping",We.vertexBuffer,We.indexBuffer,We.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const re=this.nextStencilID++,he=this.context.gl;return new fi({func:he.NOTEQUAL,mask:255},re,255,he.KEEP,he.KEEP,he.REPLACE)}stencilModeForClipping(re){const he=this.context.gl;return new fi({func:he.EQUAL,mask:255},this._tileClippingMaskIDs[re.key],0,he.KEEP,he.KEEP,he.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(re){const he=this.context.gl,fe=re.sort((Me,Fe)=>Fe.overscaledZ-Me.overscaledZ),_e=fe[fe.length-1].overscaledZ,we=fe[0].overscaledZ-_e+1;if(we>1){this.currentStencilSource=void 0,this.nextStencilID+we>256&&this.clearStencil();const Me={};for(let Fe=0;Fe<we;Fe++)Me[Fe+_e]=new fi({func:he.GEQUAL,mask:255},Fe+this.nextStencilID,255,he.KEEP,he.KEEP,he.REPLACE);return this.nextStencilID+=we,[Me,fe]}return[{[_e]:fi.disabled},fe]}stencilConfigForOverlapTwoPass(re){const he=this.context.gl,fe=re.sort((Me,Fe)=>Fe.overscaledZ-Me.overscaledZ),_e=fe[fe.length-1].overscaledZ,we=fe[0].overscaledZ-_e+1;if(this.clearStencil(),we>1){const Me={},Fe={};for(let Be=0;Be<we;Be++)Me[Be+_e]=new fi({func:he.GREATER,mask:255},we+1+Be,255,he.KEEP,he.KEEP,he.REPLACE),Fe[Be+_e]=new fi({func:he.GREATER,mask:255},1+Be,255,he.KEEP,he.KEEP,he.REPLACE);return this.nextStencilID=2*we+1,[Me,Fe,fe]}return this.nextStencilID=3,[{[_e]:new fi({func:he.GREATER,mask:255},2,255,he.KEEP,he.KEEP,he.REPLACE)},{[_e]:new fi({func:he.GREATER,mask:255},1,255,he.KEEP,he.KEEP,he.REPLACE)},fe]}colorModeForRenderPass(){const re=this.context.gl;return this._showOverdrawInspector?new Ii([re.CONSTANT_COLOR,re.ONE],new oe.bf(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Ii.unblended:Ii.alphaBlended}getDepthModeForSublayer(re,he,fe){if(!this.opaquePassEnabledForLayer())return ei.disabled;const _e=1-((1+this.currentLayer)*this.numSublayers+re)*this.depthEpsilon;return new ei(fe||this.context.gl.LEQUAL,he,[_e,_e])}getDepthModeFor3D(){return new ei(this.context.gl.LEQUAL,ei.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(re,he){var fe,_e;this.style=re,this.options=he,this.lineAtlas=re.lineAtlas,this.imageManager=re.imageManager,this.glyphManager=re.glyphManager,this.symbolFadeChange=re.placement.symbolFadeChange(Ae()),this.imageManager.beginFrame();const we=this.style._order,Me=this.style.sourceCaches,Fe={},Be={},$e={},We={isRenderingToTexture:!1,isRenderingGlobe:((fe=re.projection)===null||fe===void 0?void 0:fe.transitionState)>0};for(const Xe in Me){const st=Me[Xe];st.used&&st.prepare(this.context),Fe[Xe]=st.getVisibleCoordinates(!1),Be[Xe]=Fe[Xe].slice().reverse(),$e[Xe]=st.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Xe=0;Xe<we.length;Xe++)if(this.style._layers[we[Xe]].is3D()){this.opaquePassCutoff=Xe;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const Xe of we){const st=this.style._layers[Xe];if(!st.hasOffscreenPass()||st.isHidden(this.transform.zoom))continue;const ht=Be[st.source];(st.type==="custom"||ht.length)&&this.renderLayer(this,Me[st.source],st,ht,We)}if((_e=this.style.projection)===null||_e===void 0||_e.updateGPUdependent({context:this.context,useProgram:Xe=>this.useProgram(Xe)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:he.showOverdrawInspector?oe.bf.black:oe.bf.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(Xe,st){const ht=Xe.context,vt=ht.gl,bt=((Rt,Pt,Nt)=>{const Yt=Math.cos(Pt.rollInRadians),Wt=Math.sin(Pt.rollInRadians),Ut=Dt(Pt),Kt=Pt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Rt.properties.get("sky-color"),u_horizon_color:Rt.properties.get("horizon-color"),u_horizon:[(Pt.width/2-Ut*Wt)*Nt,(Pt.height/2+Ut*Yt)*Nt],u_horizon_normal:[-Wt,Yt],u_sky_horizon_blend:Rt.properties.get("sky-horizon-blend")*Pt.height/2*Nt,u_sky_blend:Kt}})(st,Xe.style.map.transform,Xe.pixelRatio),xt=new ei(vt.LEQUAL,ei.ReadWrite,[0,1]),Ct=fi.disabled,kt=Xe.colorModeForRenderPass(),Tt=Xe.useProgram("sky"),Lt=ql(ht,st);Tt.draw(ht,vt.TRIANGLES,xt,Ct,kt,xi.disabled,bt,null,void 0,"sky",Lt.vertexBuffer,Lt.indexBuffer,Lt.segments)}(this,this.style.sky),this._showOverdrawInspector=he.showOverdrawInspector,this.depthRangeFor3D=[0,1-(re._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=we.length-1;this.currentLayer>=0;this.currentLayer--){const Xe=this.style._layers[we[this.currentLayer]],st=Me[Xe.source],ht=Fe[Xe.source];this._renderTileClippingMasks(Xe,ht,!1),this.renderLayer(this,st,Xe,ht,We)}this.renderPass="translucent";let Je=!1;for(this.currentLayer=0;this.currentLayer<we.length;this.currentLayer++){const Xe=this.style._layers[we[this.currentLayer]],st=Me[Xe.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(Xe,We))continue;this.opaquePassEnabledForLayer()||Je||(Je=!0,We.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const ht=(Xe.type==="symbol"?$e:Be)[Xe.source];this._renderTileClippingMasks(Xe,Fe[Xe.source],!!this.renderToTexture),this.renderLayer(this,st,Xe,ht,We)}if(We.isRenderingGlobe&&function(Xe,st,ht){const vt=Xe.context,bt=vt.gl,xt=Xe.useProgram("atmosphere"),Ct=new ei(bt.LEQUAL,ei.ReadOnly,[0,1]),kt=Xe.transform,Tt=function(Kt,br){const xr=Kt.properties.get("position"),_r=[-xr.x,-xr.y,-xr.z],Br=oe.ai(new Float64Array(16));return Kt.properties.get("anchor")==="map"&&(oe.b6(Br,Br,br.rollInRadians),oe.b7(Br,Br,-br.pitchInRadians),oe.b6(Br,Br,br.bearingInRadians),oe.b7(Br,Br,br.center.lat*Math.PI/180),oe.bz(Br,Br,-br.center.lng*Math.PI/180)),oe.c6(_r,_r,Br),_r}(ht,Xe.transform),Lt=kt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Rt=st.properties.get("atmosphere-blend")*Lt.projectionTransition;if(Rt===0)return;const Pt=Ts(kt.worldSize,kt.center.lat),Nt=kt.inverseProjectionMatrix,Yt=new Float64Array(4);Yt[3]=1,oe.aw(Yt,Yt,kt.modelViewProjectionMatrix),Yt[0]/=Yt[3],Yt[1]/=Yt[3],Yt[2]/=Yt[3],Yt[3]=1,oe.aw(Yt,Yt,Nt),Yt[0]/=Yt[3],Yt[1]/=Yt[3],Yt[2]/=Yt[3],Yt[3]=1;const Wt=((Kt,br,xr,_r,Br)=>({u_sun_pos:Kt,u_atmosphere_blend:br,u_globe_position:xr,u_globe_radius:_r,u_inv_proj_matrix:Br}))(Tt,Rt,[Yt[0],Yt[1],Yt[2]],Pt,Nt),Ut=ql(vt,st);xt.draw(vt,bt.TRIANGLES,Ct,fi.disabled,Ii.alphaBlended,xi.disabled,Wt,null,null,"atmosphere",Ut.vertexBuffer,Ut.indexBuffer,Ut.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const Xe=function(st,ht){let vt=null;const bt=Object.values(st._layers).flatMap(Tt=>Tt.source&&!Tt.isHidden(ht)?[st.sourceCaches[Tt.source]]:[]),xt=bt.filter(Tt=>Tt.getSource().type==="vector"),Ct=bt.filter(Tt=>Tt.getSource().type!=="vector"),kt=Tt=>{(!vt||vt.getSource().maxzoom<Tt.getSource().maxzoom)&&(vt=Tt)};return xt.forEach(Tt=>kt(Tt)),vt||Ct.forEach(Tt=>kt(Tt)),vt}(this.style,this.transform.zoom);Xe&&function(st,ht,vt){for(let bt=0;bt<vt.length;bt++)Qc(st,ht,vt[bt])}(this,Xe,Xe.getVisibleCoordinates())}this.options.showPadding&&function(Xe){const st=Xe.transform.padding;Va(Xe,Xe.transform.height-(st.top||0),3,Zn),Va(Xe,st.bottom||0,3,Nl),yo(Xe,st.left||0,3,Oa),yo(Xe,Xe.transform.width-(st.right||0),3,Jc);const ht=Xe.transform.centerPoint;(function(vt,bt,xt,Ct){vo(vt,bt-1,xt-10,2,20,Ct),vo(vt,bt-10,xt-1,20,2,Ct)})(Xe,ht.x,Xe.transform.height-ht.y,_o)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(re){if(!this.style||!this.style.map||!this.style.map.terrain)return;const he=this.terrainFacilitator.matrix,fe=this.transform.modelViewProjectionMatrix;let _e=this.terrainFacilitator.dirty;_e||(_e=re?!oe.c9(he,fe):!oe.ca(he,fe)),_e||(_e=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),_e&&(oe.cb(he,fe),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(we,Me){const Fe=we.context,Be=Fe.gl,$e=we.transform,We=Ii.unblended,Je=new ei(Be.LEQUAL,ei.ReadWrite,[0,1]),Xe=Me.sourceCache.getRenderableTiles(),st=we.useProgram("terrainDepth");Fe.bindFramebuffer.set(Me.getFramebuffer("depth").framebuffer),Fe.viewport.set([0,0,we.width/devicePixelRatio,we.height/devicePixelRatio]),Fe.clear({color:oe.bf.transparent,depth:1});for(const ht of Xe){const vt=Me.getTerrainMesh(ht.tileID),bt=Me.getTerrainData(ht.tileID),xt=$e.getProjectionData({overscaledTileID:ht.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),Ct={u_ele_delta:Me.getMeshFrameDelta($e.zoom)};st.draw(Fe,Be.TRIANGLES,Je,fi.disabled,We,xi.backCCW,Ct,bt,xt,"terrain",vt.vertexBuffer,vt.indexBuffer,vt.segments)}Fe.bindFramebuffer.set(null),Fe.viewport.set([0,0,we.width,we.height])}(this,this.style.map.terrain),function(we,Me){const Fe=we.context,Be=Fe.gl,$e=we.transform,We=Ii.unblended,Je=new ei(Be.LEQUAL,ei.ReadWrite,[0,1]),Xe=Me.getCoordsTexture(),st=Me.sourceCache.getRenderableTiles(),ht=we.useProgram("terrainCoords");Fe.bindFramebuffer.set(Me.getFramebuffer("coords").framebuffer),Fe.viewport.set([0,0,we.width/devicePixelRatio,we.height/devicePixelRatio]),Fe.clear({color:oe.bf.transparent,depth:1}),Me.coordsIndex=[];for(const vt of st){const bt=Me.getTerrainMesh(vt.tileID),xt=Me.getTerrainData(vt.tileID);Fe.activeTexture.set(Be.TEXTURE0),Be.bindTexture(Be.TEXTURE_2D,Xe.texture);const Ct={u_terrain_coords_id:(255-Me.coordsIndex.length)/255,u_texture:0,u_ele_delta:Me.getMeshFrameDelta($e.zoom)},kt=$e.getProjectionData({overscaledTileID:vt.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ht.draw(Fe,Be.TRIANGLES,Je,fi.disabled,We,xi.backCCW,Ct,xt,kt,"terrain",bt.vertexBuffer,bt.indexBuffer,bt.segments),Me.coordsIndex.push(vt.tileID.key)}Fe.bindFramebuffer.set(null),Fe.viewport.set([0,0,we.width,we.height])}(this,this.style.map.terrain))}renderLayer(re,he,fe,_e,we){fe.isHidden(this.transform.zoom)||(fe.type==="background"||fe.type==="custom"||(_e||[]).length)&&(this.id=fe.id,oe.cc(fe)?function(Me,Fe,Be,$e,We,Je){if(Me.renderPass!=="translucent")return;const{isRenderingToTexture:Xe}=Je,st=fi.disabled,ht=Me.colorModeForRenderPass();(Be._unevaluatedLayout.hasValue("text-variable-anchor")||Be._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(vt,bt,xt,Ct,kt,Tt,Lt,Rt,Pt){const Nt=bt.transform,Yt=bt.style.map.terrain,Wt=kt==="map",Ut=Tt==="map";for(const Kt of vt){const br=Ct.getTile(Kt),xr=br.getBucket(xt);if(!xr||!xr.text||!xr.text.segments.get().length)continue;const _r=oe.an(xr.textSizeData,Nt.zoom),Br=oe.aC(br,1,bt.transform.zoom),ti=hr(Wt,bt.transform,Br),Ti=xt.layout.get("icon-text-fit")!=="none"&&xr.hasIconData();if(_r){const Oi=Math.pow(2,Nt.zoom-br.tileID.overscaledZ),Fi=Yt?(di,zi)=>Yt.getElevation(Kt,di,zi):null;Fl(xr,Wt,Ut,Pt,Nt,ti,Oi,_r,Ti,oe.aD(Nt,br,Lt,Rt),Kt.toUnwrapped(),Fi)}}}($e,Me,Be,Fe,Be.layout.get("text-rotation-alignment"),Be.layout.get("text-pitch-alignment"),Be.paint.get("text-translate"),Be.paint.get("text-translate-anchor"),We),Be.paint.get("icon-opacity").constantOr(1)!==0&&jo(Me,Fe,Be,$e,!1,Be.paint.get("icon-translate"),Be.paint.get("icon-translate-anchor"),Be.layout.get("icon-rotation-alignment"),Be.layout.get("icon-pitch-alignment"),Be.layout.get("icon-keep-upright"),st,ht,Xe),Be.paint.get("text-opacity").constantOr(1)!==0&&jo(Me,Fe,Be,$e,!0,Be.paint.get("text-translate"),Be.paint.get("text-translate-anchor"),Be.layout.get("text-rotation-alignment"),Be.layout.get("text-pitch-alignment"),Be.layout.get("text-keep-upright"),st,ht,Xe),Fe.map.showCollisionBoxes&&(ka(Me,Fe,Be,$e,!0),ka(Me,Fe,Be,$e,!1))}(re,he,fe,_e,this.style.placement.variableOffsets,we):oe.cd(fe)?function(Me,Fe,Be,$e,We){if(Me.renderPass!=="translucent")return;const{isRenderingToTexture:Je}=We,Xe=Be.paint.get("circle-opacity"),st=Be.paint.get("circle-stroke-width"),ht=Be.paint.get("circle-stroke-opacity"),vt=!Be.layout.get("circle-sort-key").isConstant();if(Xe.constantOr(1)===0&&(st.constantOr(1)===0||ht.constantOr(1)===0))return;const bt=Me.context,xt=bt.gl,Ct=Me.transform,kt=Me.getDepthModeForSublayer(0,ei.ReadOnly),Tt=fi.disabled,Lt=Me.colorModeForRenderPass(),Rt=[],Pt=Ct.getCircleRadiusCorrection();for(let Nt=0;Nt<$e.length;Nt++){const Yt=$e[Nt],Wt=Fe.getTile(Yt),Ut=Wt.getBucket(Be);if(!Ut)continue;const Kt=Be.paint.get("circle-translate"),br=Be.paint.get("circle-translate-anchor"),xr=oe.aD(Ct,Wt,Kt,br),_r=Ut.programConfigurations.get(Be.id),Br=Me.useProgram("circle",_r),ti=Ut.layoutVertexBuffer,Ti=Ut.indexBuffer,Oi=Me.style.map.terrain&&Me.style.map.terrain.getTerrainData(Yt),Fi={programConfiguration:_r,program:Br,layoutVertexBuffer:ti,indexBuffer:Ti,uniformValues:ao(Me,Wt,Be,xr,Pt),terrainData:Oi,projectionData:Ct.getProjectionData({overscaledTileID:Yt,applyGlobeMatrix:!Je,applyTerrainMatrix:!0})};if(vt){const di=Ut.segments.get();for(const zi of di)Rt.push({segments:new oe.aM([zi]),sortKey:zi.sortKey,state:Fi})}else Rt.push({segments:Ut.segments,sortKey:0,state:Fi})}vt&&Rt.sort((Nt,Yt)=>Nt.sortKey-Yt.sortKey);for(const Nt of Rt){const{programConfiguration:Yt,program:Wt,layoutVertexBuffer:Ut,indexBuffer:Kt,uniformValues:br,terrainData:xr,projectionData:_r}=Nt.state;Wt.draw(bt,xt.TRIANGLES,kt,Tt,Lt,xi.backCCW,br,xr,_r,Be.id,Ut,Kt,Nt.segments,Be.paint,Me.transform.zoom,Yt)}}(re,he,fe,_e,we):oe.ce(fe)?function(Me,Fe,Be,$e,We){if(Be.paint.get("heatmap-opacity")===0)return;const Je=Me.context,{isRenderingToTexture:Xe,isRenderingGlobe:st}=We;if(Me.style.map.terrain){for(const ht of $e){const vt=Fe.getTile(ht);Fe.hasRenderableParent(ht)||(Me.renderPass==="offscreen"?Ra(Me,vt,Be,ht,st):Me.renderPass==="translucent"&&fo(Me,Be,ht,Xe,st))}Je.viewport.set([0,0,Me.width,Me.height])}else Me.renderPass==="offscreen"?function(ht,vt,bt,xt){const Ct=ht.context,kt=Ct.gl,Tt=ht.transform,Lt=fi.disabled,Rt=new Ii([kt.ONE,kt.ONE],oe.bf.transparent,[!0,!0,!0,!0]);(function(Pt,Nt,Yt){const Wt=Pt.gl;Pt.activeTexture.set(Wt.TEXTURE1),Pt.viewport.set([0,0,Nt.width/4,Nt.height/4]);let Ut=Yt.heatmapFbos.get(oe.c3);Ut?(Wt.bindTexture(Wt.TEXTURE_2D,Ut.colorAttachment.get()),Pt.bindFramebuffer.set(Ut.framebuffer)):(Ut=Fa(Pt,Nt.width/4,Nt.height/4),Yt.heatmapFbos.set(oe.c3,Ut))})(Ct,ht,bt),Ct.clear({color:oe.bf.transparent});for(let Pt=0;Pt<xt.length;Pt++){const Nt=xt[Pt];if(vt.hasRenderableParent(Nt))continue;const Yt=vt.getTile(Nt),Wt=Yt.getBucket(bt);if(!Wt)continue;const Ut=Wt.programConfigurations.get(bt.id),Kt=ht.useProgram("heatmap",Ut),br=Tt.getProjectionData({overscaledTileID:Nt,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),xr=Tt.getCircleRadiusCorrection();Kt.draw(Ct,kt.TRIANGLES,ei.disabled,Lt,Rt,xi.backCCW,Tl(Yt,Tt.zoom,bt.paint.get("heatmap-intensity"),xr),null,br,bt.id,Wt.layoutVertexBuffer,Wt.indexBuffer,Wt.segments,bt.paint,Tt.zoom,Ut)}Ct.viewport.set([0,0,ht.width,ht.height])}(Me,Fe,Be,$e):Me.renderPass==="translucent"&&function(ht,vt){const bt=ht.context,xt=bt.gl;bt.setColorMode(ht.colorModeForRenderPass());const Ct=vt.heatmapFbos.get(oe.c3);Ct&&(bt.activeTexture.set(xt.TEXTURE0),xt.bindTexture(xt.TEXTURE_2D,Ct.colorAttachment.get()),bt.activeTexture.set(xt.TEXTURE1),Yc(bt,vt).bind(xt.LINEAR,xt.CLAMP_TO_EDGE),ht.useProgram("heatmapTexture").draw(bt,xt.TRIANGLES,ei.disabled,fi.disabled,ht.colorModeForRenderPass(),xi.disabled,xa(ht,vt,0,1),null,null,vt.id,ht.viewportBuffer,ht.quadTriangleIndexBuffer,ht.viewportSegments,vt.paint,ht.transform.zoom))}(Me,Be)}(re,he,fe,_e,we):oe.cf(fe)?function(Me,Fe,Be,$e,We){if(Me.renderPass!=="translucent")return;const{isRenderingToTexture:Je}=We,Xe=Be.paint.get("line-opacity"),st=Be.paint.get("line-width");if(Xe.constantOr(1)===0||st.constantOr(1)===0)return;const ht=Me.getDepthModeForSublayer(0,ei.ReadOnly),vt=Me.colorModeForRenderPass(),bt=Be.paint.get("line-dasharray"),xt=bt.constantOr(1),Ct=Be.paint.get("line-pattern"),kt=Ct.constantOr(1),Tt=Be.paint.get("line-gradient"),Lt=Be.getCrossfadeParameters();let Rt;Rt=kt?"linePattern":xt&&Tt?"lineGradientSDF":xt?"lineSDF":Tt?"lineGradient":"line";const Pt=Me.context,Nt=Pt.gl,Yt=Me.transform;let Wt=!0;for(const Ut of $e){const Kt=Fe.getTile(Ut);if(kt&&!Kt.patternsLoaded())continue;const br=Kt.getBucket(Be);if(!br)continue;const xr=br.programConfigurations.get(Be.id),_r=Me.context.program.get(),Br=Me.useProgram(Rt,xr),ti=Wt||Br.program!==_r,Ti=Me.style.map.terrain&&Me.style.map.terrain.getTerrainData(Ut),Oi=Ct.constantOr(null),Fi=bt&&bt.constantOr(null);if(Oi&&Kt.imageAtlas){const pn=Kt.imageAtlas,Qi=pn.patternPositions[Oi.to.toString()],tn=pn.patternPositions[Oi.from.toString()];Qi&&tn&&xr.setConstantPatternPositions(Qi,tn)}else if(Fi){const pn=Be.layout.get("line-cap")==="round",Qi=Me.lineAtlas.getDash(Fi.to,pn),tn=Me.lineAtlas.getDash(Fi.from,pn);xr.setConstantDashPositions(Qi,tn)}const di=Yt.getProjectionData({overscaledTileID:Ut,applyGlobeMatrix:!Je,applyTerrainMatrix:!0}),zi=Yt.getPixelScale();let cn;kt?(cn=Fc(Me,Kt,Be,zi,Lt),ou(Pt,Nt,Kt,xr,Lt)):xt&&Tt?(cn=Kh(Me,Kt,Be,zi,Lt,br.lineClipsArray.length),Dl(Me,Fe,Pt,Nt,Be,br,Ut,xr,Lt)):xt?(cn=Vo(Me,Kt,Be,zi,Lt),Kc(Me,Pt,Nt,xr,ti,Lt)):Tt?(cn=Rc(Me,Kt,Be,zi,br.lineClipsArray.length),Da(Me,Fe,Pt,Nt,Be,br,Ut)):cn=ls(Me,Kt,Be,zi);const Ui=Me.stencilModeForClipping(Ut);Br.draw(Pt,Nt.TRIANGLES,ht,Ui,vt,xi.disabled,cn,Ti,di,Be.id,br.layoutVertexBuffer,br.indexBuffer,br.segments,Be.paint,Me.transform.zoom,xr,br.layoutVertexBuffer2),Wt=!1}}(re,he,fe,_e,we):oe.cg(fe)?function(Me,Fe,Be,$e,We){const Je=Be.paint.get("fill-color"),Xe=Be.paint.get("fill-opacity");if(Xe.constantOr(1)===0)return;const{isRenderingToTexture:st}=We,ht=Me.colorModeForRenderPass(),vt=Be.paint.get("fill-pattern"),bt=Me.opaquePassEnabledForLayer()&&!vt.constantOr(1)&&Je.constantOr(oe.bf.transparent).a===1&&Xe.constantOr(0)===1?"opaque":"translucent";if(Me.renderPass===bt){const xt=Me.getDepthModeForSublayer(1,Me.renderPass==="opaque"?ei.ReadWrite:ei.ReadOnly);Ol(Me,Fe,Be,$e,xt,ht,!1,st)}if(Me.renderPass==="translucent"&&Be.paint.get("fill-antialias")){const xt=Me.getDepthModeForSublayer(Be.getPaintProperty("fill-outline-color")?2:0,ei.ReadOnly);Ol(Me,Fe,Be,$e,xt,ht,!0,st)}}(re,he,fe,_e,we):oe.ch(fe)?function(Me,Fe,Be,$e,We){const Je=Be.paint.get("fill-extrusion-opacity");if(Je===0)return;const{isRenderingToTexture:Xe}=We;if(Me.renderPass==="translucent"){const st=new ei(Me.context.gl.LEQUAL,ei.ReadWrite,Me.depthRangeFor3D);if(Je!==1||Be.paint.get("fill-extrusion-pattern").constantOr(1))go(Me,Fe,Be,$e,st,fi.disabled,Ii.disabled,Xe),go(Me,Fe,Be,$e,st,Me.stencilModeFor3D(),Me.colorModeForRenderPass(),Xe);else{const ht=Me.colorModeForRenderPass();go(Me,Fe,Be,$e,st,fi.disabled,ht,Xe)}}}(re,he,fe,_e,we):oe.ci(fe)?function(Me,Fe,Be,$e,We){if(Me.renderPass!=="offscreen"&&Me.renderPass!=="translucent")return;const{isRenderingToTexture:Je}=We,Xe=Me.context,st=Me.style.projection.useSubdivision,ht=Me.getDepthModeForSublayer(0,ei.ReadOnly),vt=Me.colorModeForRenderPass();if(Me.renderPass==="offscreen")(function(bt,xt,Ct,kt,Tt,Lt,Rt){const Pt=bt.context,Nt=Pt.gl;for(const Yt of Ct){const Wt=xt.getTile(Yt),Ut=Wt.dem;if(!Ut||!Ut.data||!Wt.needsHillshadePrepare)continue;const Kt=Ut.dim,br=Ut.stride,xr=Ut.getPixels();if(Pt.activeTexture.set(Nt.TEXTURE1),Pt.pixelStoreUnpackPremultiplyAlpha.set(!1),Wt.demTexture=Wt.demTexture||bt.getTileTexture(br),Wt.demTexture){const Br=Wt.demTexture;Br.update(xr,{premultiply:!1}),Br.bind(Nt.NEAREST,Nt.CLAMP_TO_EDGE)}else Wt.demTexture=new oe.T(Pt,xr,Nt.RGBA,{premultiply:!1}),Wt.demTexture.bind(Nt.NEAREST,Nt.CLAMP_TO_EDGE);Pt.activeTexture.set(Nt.TEXTURE0);let _r=Wt.fbo;if(!_r){const Br=new oe.T(Pt,{width:Kt,height:Kt,data:null},Nt.RGBA);Br.bind(Nt.LINEAR,Nt.CLAMP_TO_EDGE),_r=Wt.fbo=Pt.createFramebuffer(Kt,Kt,!0,!1),_r.colorAttachment.set(Br.texture)}Pt.bindFramebuffer.set(_r.framebuffer),Pt.viewport.set([0,0,Kt,Kt]),bt.useProgram("hillshadePrepare").draw(Pt,Nt.TRIANGLES,Tt,Lt,Rt,xi.disabled,Ic(Wt.tileID,Ut),null,null,kt.id,bt.rasterBoundsBuffer,bt.quadTriangleIndexBuffer,bt.rasterBoundsSegments),Wt.needsHillshadePrepare=!1}})(Me,Fe,$e,Be,ht,fi.disabled,vt),Xe.viewport.set([0,0,Me.width,Me.height]);else if(Me.renderPass==="translucent")if(st){const[bt,xt,Ct]=Me.stencilConfigForOverlapTwoPass($e);Go(Me,Fe,Be,Ct,bt,ht,vt,!1,Je),Go(Me,Fe,Be,Ct,xt,ht,vt,!0,Je)}else{const[bt,xt]=Me.getStencilConfigForOverlapAndUpdateStencilID($e);Go(Me,Fe,Be,xt,bt,ht,vt,!1,Je)}}(re,he,fe,_e,we):oe.cj(fe)?function(Me,Fe,Be,$e,We){if(Me.renderPass!=="translucent"||!$e.length)return;const{isRenderingToTexture:Je}=We,Xe=Me.style.projection.useSubdivision,st=Me.getDepthModeForSublayer(0,ei.ReadOnly),ht=Me.colorModeForRenderPass();if(Xe){const[vt,bt,xt]=Me.stencilConfigForOverlapTwoPass($e);Vl(Me,Fe,Be,xt,vt,st,ht,!1,Je),Vl(Me,Fe,Be,xt,bt,st,ht,!0,Je)}else{const[vt,bt]=Me.getStencilConfigForOverlapAndUpdateStencilID($e);Vl(Me,Fe,Be,bt,vt,st,ht,!1,Je)}}(re,he,fe,_e,we):oe.bK(fe)?function(Me,Fe,Be,$e,We){if(Me.renderPass!=="translucent"||Be.paint.get("raster-opacity")===0||!$e.length)return;const{isRenderingToTexture:Je}=We,Xe=Fe.getSource(),st=Me.style.projection.useSubdivision;if(Xe instanceof ri)Wi(Me,Fe,Be,$e,null,!1,!1,Xe.tileCoords,Xe.flippedWindingOrder,Je);else if(st){const[ht,vt,bt]=Me.stencilConfigForOverlapTwoPass($e);Wi(Me,Fe,Be,bt,ht,!1,!0,Ba,!1,Je),Wi(Me,Fe,Be,bt,vt,!0,!0,Ba,!1,Je)}else{const[ht,vt]=Me.getStencilConfigForOverlapAndUpdateStencilID($e);Wi(Me,Fe,Be,vt,ht,!1,!0,Ba,!1,Je)}}(re,he,fe,_e,we):oe.ck(fe)?function(Me,Fe,Be,$e,We){const Je=Be.paint.get("background-color"),Xe=Be.paint.get("background-opacity");if(Xe===0)return;const{isRenderingToTexture:st}=We,ht=Me.context,vt=ht.gl,bt=Me.style.projection,xt=Me.transform,Ct=xt.tileSize,kt=Be.paint.get("background-pattern");if(Me.isPatternMissing(kt))return;const Tt=!kt&&Je.a===1&&Xe===1&&Me.opaquePassEnabledForLayer()?"opaque":"translucent";if(Me.renderPass!==Tt)return;const Lt=fi.disabled,Rt=Me.getDepthModeForSublayer(0,Tt==="opaque"?ei.ReadWrite:ei.ReadOnly),Pt=Me.colorModeForRenderPass(),Nt=Me.useProgram(kt?"backgroundPattern":"background"),Yt=$e||kr(xt,{tileSize:Ct,terrain:Me.style.map.terrain});kt&&(ht.activeTexture.set(vt.TEXTURE0),Me.imageManager.bind(Me.context));const Wt=Be.getCrossfadeParameters();for(const Ut of Yt){const Kt=xt.getProjectionData({overscaledTileID:Ut,applyGlobeMatrix:!st,applyTerrainMatrix:!0}),br=kt?wa(Xe,Me,kt,{tileID:Ut,tileSize:Ct},Wt):Oc(Xe,Je),xr=Me.style.map.terrain&&Me.style.map.terrain.getTerrainData(Ut),_r=bt.getMeshFromTileID(ht,Ut.canonical,!1,!0,"raster");Nt.draw(ht,vt.TRIANGLES,Rt,Lt,Pt,xi.backCCW,br,xr,Kt,Be.id,_r.vertexBuffer,_r.indexBuffer,_r.segments)}}(re,0,fe,_e,we):oe.cl(fe)&&function(Me,Fe,Be,$e){const{isRenderingGlobe:We}=$e,Je=Me.context,Xe=Be.implementation,st=Me.style.projection,ht=Me.transform,vt=ht.getProjectionDataForCustomLayer(We),bt={farZ:ht.farZ,nearZ:ht.nearZ,fov:ht.fov*Math.PI/180,modelViewProjectionMatrix:ht.modelViewProjectionMatrix,projectionMatrix:ht.projectionMatrix,shaderData:{variantName:st.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${st.shaderPreludeCode.vertexSource}`,define:st.shaderDefine},defaultProjectionData:vt},xt=Xe.renderingMode?Xe.renderingMode:"2d";if(Me.renderPass==="offscreen"){const Ct=Xe.prerender;Ct&&(Me.setCustomLayerDefaults(),Je.setColorMode(Me.colorModeForRenderPass()),Ct.call(Xe,Je.gl,bt),Je.setDirty(),Me.setBaseState())}else if(Me.renderPass==="translucent"){Me.setCustomLayerDefaults(),Je.setColorMode(Me.colorModeForRenderPass()),Je.setStencilMode(fi.disabled);const Ct=xt==="3d"?Me.getDepthModeFor3D():Me.getDepthModeForSublayer(0,ei.ReadOnly);Je.setDepthMode(Ct),Xe.render(Je.gl,bt),Je.setDirty(),Me.setBaseState(),Je.bindFramebuffer.set(null)}}(re,0,fe,we))}saveTileTexture(re){const he=this._tileTextures[re.size[0]];he?he.push(re):this._tileTextures[re.size[0]]=[re]}getTileTexture(re){const he=this._tileTextures[re];return he&&he.length>0?he.pop():null}isPatternMissing(re){if(!re)return!1;if(!re.from||!re.to)return!0;const he=this.imageManager.getPattern(re.from.toString()),fe=this.imageManager.getPattern(re.to.toString());return!he||!fe}useProgram(re,he,fe=!1,_e=[]){this.cache=this.cache||{};const we=!!this.style.map.terrain,Me=this.style.projection,Fe=fe?os.projectionMercator:Me.shaderPreludeCode,Be=fe?la:Me.shaderDefine,$e=re+(he?he.cacheKey:"")+`/${fe?wc:Me.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(we?"/terrain":"")+(_e?`/${_e.join("/")}`:"");return this.cache[$e]||(this.cache[$e]=new Zh(this.context,os[re],he,Ml[re],this._showOverdrawInspector,we,Fe,Be,_e)),this.cache[$e]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const re=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(re.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new oe.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:re,drawingBufferHeight:he}=this.context.gl;return this.width!==re||this.height!==he}}function jl(be,re){let he,fe=!1,_e=null,we=null;const Me=()=>{_e=null,fe&&(be.apply(we,he),_e=setTimeout(Me,re),fe=!1)};return(...Fe)=>(fe=!0,we=this,he=Fe,_e||Me(),_e)}class Cs{constructor(re){this._getCurrentHash=()=>{const he=window.location.hash.replace("#","");if(this._hashName){let fe;return he.split("&").map(_e=>_e.split("=")).forEach(_e=>{_e[0]===this._hashName&&(fe=_e)}),(fe&&fe[1]||"").split("/")}return he.split("/")},this._onHashChange=()=>{const he=this._getCurrentHash();if(!this._isValidHash(he))return!1;const fe=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(he[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+he[2],+he[1]],zoom:+he[0],bearing:fe,pitch:+(he[4]||0)}),!0},this._updateHashUnthrottled=()=>{const he=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,he)},this._removeHash=()=>{const he=this._getCurrentHash();if(he.length===0)return;const fe=he.join("/");let _e=fe;_e.split("&").length>0&&(_e=_e.split("&")[0]),this._hashName&&(_e=`${this._hashName}=${fe}`);let we=window.location.hash.replace(_e,"");we.startsWith("#&")?we=we.slice(0,1)+we.slice(2):we==="#"&&(we="");let Me=window.location.href.replace(/(#.+)?$/,we);Me=Me.replace("&&","&"),window.history.replaceState(window.history.state,null,Me)},this._updateHash=jl(this._updateHashUnthrottled,300),this._hashName=re&&encodeURIComponent(re)}addTo(re){return this._map=re,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(re){const he=this._map.getCenter(),fe=Math.round(100*this._map.getZoom())/100,_e=Math.ceil((fe*Math.LN2+Math.log(512/360/.5))/Math.LN10),we=Math.pow(10,_e),Me=Math.round(he.lng*we)/we,Fe=Math.round(he.lat*we)/we,Be=this._map.getBearing(),$e=this._map.getPitch();let We="";if(We+=re?`/${Me}/${Fe}/${fe}`:`${fe}/${Fe}/${Me}`,(Be||$e)&&(We+="/"+Math.round(10*Be)/10),$e&&(We+=`/${Math.round($e)}`),this._hashName){const Je=this._hashName;let Xe=!1;const st=window.location.hash.slice(1).split("&").map(ht=>{const vt=ht.split("=")[0];return vt===Je?(Xe=!0,`${vt}=${We}`):ht}).filter(ht=>ht);return Xe||st.push(`${Je}=${We}`),`#${st.join("&")}`}return`#${We}`}_isValidHash(re){if(re.length<3||re.some(isNaN))return!1;try{new oe.S(+re[2],+re[1])}catch{return!1}const he=+re[0],fe=+(re[3]||0),_e=+(re[4]||0);return he>=this._map.getMinZoom()&&he<=this._map.getMaxZoom()&&fe>=-180&&fe<=180&&_e>=this._map.getMinPitch()&&_e<=this._map.getMaxPitch()}}const bo={linearity:.3,easing:oe.cm(0,0,.3,1)},th=oe.e({deceleration:2500,maxSpeed:1400},bo),rh=oe.e({deceleration:20,maxSpeed:1400},bo),ih=oe.e({deceleration:1e3,maxSpeed:360},bo),nh=oe.e({deceleration:1e3,maxSpeed:90},bo),sh=oe.e({deceleration:1e3,maxSpeed:360},bo);class oh{constructor(re){this._map=re,this.clear()}clear(){this._inertiaBuffer=[]}record(re){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:Ae(),settings:re})}_drainInertiaBuffer(){const re=this._inertiaBuffer,he=Ae();for(;re.length>0&&he-re[0].time>160;)re.shift()}_onMoveEnd(re){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const he={zoom:0,bearing:0,pitch:0,roll:0,pan:new oe.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:we}of this._inertiaBuffer)he.zoom+=we.zoomDelta||0,he.bearing+=we.bearingDelta||0,he.pitch+=we.pitchDelta||0,he.roll+=we.rollDelta||0,we.panDelta&&he.pan._add(we.panDelta),we.around&&(he.around=we.around),we.pinchAround&&(he.pinchAround=we.pinchAround);const fe=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,_e={};if(he.pan.mag()){const we=Ps(he.pan.mag(),fe,oe.e({},th,re||{})),Me=he.pan.mult(we.amount/he.pan.mag()),Fe=this._map.cameraHelper.handlePanInertia(Me,this._map.transform);_e.center=Fe.easingCenter,_e.offset=Fe.easingOffset,xo(_e,we)}if(he.zoom){const we=Ps(he.zoom,fe,rh);_e.zoom=this._map.transform.zoom+we.amount,xo(_e,we)}if(he.bearing){const we=Ps(he.bearing,fe,ih);_e.bearing=this._map.transform.bearing+oe.ae(we.amount,-179,179),xo(_e,we)}if(he.pitch){const we=Ps(he.pitch,fe,nh);_e.pitch=this._map.transform.pitch+we.amount,xo(_e,we)}if(he.roll){const we=Ps(he.roll,fe,sh);_e.roll=this._map.transform.roll+oe.ae(we.amount,-179,179),xo(_e,we)}if(_e.zoom||_e.bearing){const we=he.pinchAround===void 0?he.around:he.pinchAround;_e.around=we?this._map.unproject(we):this._map.getCenter()}return this.clear(),oe.e(_e,{noMoveStart:!0})}}function xo(be,re){(!be.duration||be.duration<re.duration)&&(be.duration=re.duration,be.easing=re.easing)}function Ps(be,re,he){const{maxSpeed:fe,linearity:_e,deceleration:we}=he,Me=oe.ae(be*_e/(re/1e3),-fe,fe),Fe=Math.abs(Me)/(we*_e);return{easing:he.easing,duration:1e3*Fe,amount:Me*(Fe/2)}}class Vn extends oe.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(re,he,fe,_e={}){fe=fe instanceof MouseEvent?fe:new MouseEvent(re,fe);const we=Ce.mousePos(he.getCanvas(),fe),Me=he.unproject(we);super(re,oe.e({point:we,lngLat:Me,originalEvent:fe},_e)),this._defaultPrevented=!1,this.target=he}}class An extends oe.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(re,he,fe){const _e=re==="touchend"?fe.changedTouches:fe.touches,we=Ce.touchPos(he.getCanvasContainer(),_e),Me=we.map(Be=>he.unproject(Be)),Fe=we.reduce((Be,$e,We,Je)=>Be.add($e.div(Je.length)),new oe.P(0,0));super(re,{points:we,point:Fe,lngLats:Me,lngLat:he.unproject(Fe),originalEvent:fe}),this._defaultPrevented=!1}}class Xn extends oe.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(re,he,fe){super(re,{originalEvent:fe}),this._defaultPrevented=!1}}class ah{constructor(re,he){this._map=re,this._clickTolerance=he.clickTolerance}reset(){delete this._mousedownPos}wheel(re){return this._firePreventable(new Xn(re.type,this._map,re))}mousedown(re,he){return this._mousedownPos=he,this._firePreventable(new Vn(re.type,this._map,re))}mouseup(re){this._map.fire(new Vn(re.type,this._map,re))}click(re,he){this._mousedownPos&&this._mousedownPos.dist(he)>=this._clickTolerance||this._map.fire(new Vn(re.type,this._map,re))}dblclick(re){return this._firePreventable(new Vn(re.type,this._map,re))}mouseover(re){this._map.fire(new Vn(re.type,this._map,re))}mouseout(re){this._map.fire(new Vn(re.type,this._map,re))}touchstart(re){return this._firePreventable(new An(re.type,this._map,re))}touchmove(re){this._map.fire(new An(re.type,this._map,re))}touchend(re){this._map.fire(new An(re.type,this._map,re))}touchcancel(re){this._map.fire(new An(re.type,this._map,re))}_firePreventable(re){if(this._map.fire(re),re.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Qn{constructor(re){this._map=re}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(re){this._map.fire(new Vn(re.type,this._map,re))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Vn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(re){this._delayContextMenu?this._contextMenuEvent=re:this._ignoreContextMenu||this._map.fire(new Vn(re.type,this._map,re)),this._map.listens("contextmenu")&&re.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class hs{constructor(re){this._map=re}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(re){return this.transform.screenPointToLocation(oe.P.convert(re),this._map.terrain)}}class lh{constructor(re,he){this._map=re,this._tr=new hs(re),this._el=re.getCanvasContainer(),this._container=re.getContainer(),this._clickTolerance=he.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(re,he){this.isEnabled()&&re.shiftKey&&re.button===0&&(Ce.disableDrag(),this._startPos=this._lastPos=he,this._active=!0)}mousemoveWindow(re,he){if(!this._active)return;const fe=he;if(this._lastPos.equals(fe)||!this._box&&fe.dist(this._startPos)<this._clickTolerance)return;const _e=this._startPos;this._lastPos=fe,this._box||(this._box=Ce.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",re));const we=Math.min(_e.x,fe.x),Me=Math.max(_e.x,fe.x),Fe=Math.min(_e.y,fe.y),Be=Math.max(_e.y,fe.y);Ce.setTransform(this._box,`translate(${we}px,${Fe}px)`),this._box.style.width=Me-we+"px",this._box.style.height=Be-Fe+"px"}mouseupWindow(re,he){if(!this._active||re.button!==0)return;const fe=this._startPos,_e=he;if(this.reset(),Ce.suppressClick(),fe.x!==_e.x||fe.y!==_e.y)return this._map.fire(new oe.l("boxzoomend",{originalEvent:re})),{cameraAnimation:we=>we.fitScreenCoordinates(fe,_e,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",re)}keydown(re){this._active&&re.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",re))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(Ce.remove(this._box),this._box=null),Ce.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(re,he){return this._map.fire(new oe.l(re,{originalEvent:he}))}}function Wl(be,re){if(be.length!==re.length)throw new Error(`The number of touches and points are not equal - touches ${be.length}, points ${re.length}`);const he={};for(let fe=0;fe<be.length;fe++)he[be[fe].identifier]=re[fe];return he}class au{constructor(re){this.reset(),this.numTouches=re.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(re,he,fe){(this.centroid||fe.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=re.timeStamp),fe.length===this.numTouches&&(this.centroid=function(_e){const we=new oe.P(0,0);for(const Me of _e)we._add(Me);return we.div(_e.length)}(he),this.touches=Wl(fe,he)))}touchmove(re,he,fe){if(this.aborted||!this.centroid)return;const _e=Wl(fe,he);for(const we in this.touches){const Me=_e[we];(!Me||Me.dist(this.touches[we])>30)&&(this.aborted=!0)}}touchend(re,he,fe){if((!this.centroid||re.timeStamp-this.startTime>500)&&(this.aborted=!0),fe.length===0){const _e=!this.aborted&&this.centroid;if(this.reset(),_e)return _e}}}class Gl{constructor(re){this.singleTap=new au(re),this.numTaps=re.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(re,he,fe){this.singleTap.touchstart(re,he,fe)}touchmove(re,he,fe){this.singleTap.touchmove(re,he,fe)}touchend(re,he,fe){const _e=this.singleTap.touchend(re,he,fe);if(_e){const we=re.timeStamp-this.lastTime<500,Me=!this.lastTap||this.lastTap.dist(_e)<30;if(we&&Me||this.reset(),this.count++,this.lastTime=re.timeStamp,this.lastTap=_e,this.count===this.numTaps)return this.reset(),_e}}}class ch{constructor(re){this._tr=new hs(re),this._zoomIn=new Gl({numTouches:1,numTaps:2}),this._zoomOut=new Gl({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(re,he,fe){this._zoomIn.touchstart(re,he,fe),this._zoomOut.touchstart(re,he,fe)}touchmove(re,he,fe){this._zoomIn.touchmove(re,he,fe),this._zoomOut.touchmove(re,he,fe)}touchend(re,he,fe){const _e=this._zoomIn.touchend(re,he,fe),we=this._zoomOut.touchend(re,he,fe),Me=this._tr;return _e?(this._active=!0,re.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:Fe=>Fe.easeTo({duration:300,zoom:Me.zoom+1,around:Me.unproject(_e)},{originalEvent:re})}):we?(this._active=!0,re.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:Fe=>Fe.easeTo({duration:300,zoom:Me.zoom-1,around:Me.unproject(we)},{originalEvent:re})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ms{constructor(re){this._enabled=!!re.enable,this._moveStateManager=re.moveStateManager,this._clickTolerance=re.clickTolerance||1,this._moveFunction=re.move,this._activateOnStart=!!re.activateOnStart,re.assignEvents(this),this.reset()}reset(re){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(re)}_move(...re){const he=this._moveFunction(...re);if(he.bearingDelta||he.pitchDelta||he.rollDelta||he.around||he.panDelta)return this._active=!0,he}dragStart(re,he){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(re)&&(this._moveStateManager.startMove(re),this._lastPoint=Array.isArray(he)?he[0]:he,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(re,he){if(!this.isEnabled())return;const fe=this._lastPoint;if(!fe)return;if(re.preventDefault(),!this._moveStateManager.isValidMoveEvent(re))return void this.reset(re);const _e=Array.isArray(he)?he[0]:he;return!this._moved&&_e.dist(fe)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=_e,this._move(fe,_e))}dragEnd(re){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(re)&&(this._moved&&Ce.suppressClick(),this.reset(re))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const gs=0,Rr=2,hh={[gs]:1,[Rr]:2};class Gs{constructor(re){this._correctEvent=re.checkCorrectEvent}startMove(re){const he=Ce.mouseButton(re);this._eventButton=he}endMove(re){delete this._eventButton}isValidStartEvent(re){return this._correctEvent(re)}isValidMoveEvent(re){return!function(he,fe){const _e=hh[fe];return he.buttons===void 0||(he.buttons&_e)!==_e}(re,this._eventButton)}isValidEndEvent(re){return Ce.mouseButton(re)===this._eventButton}}class uh{constructor(){this._firstTouch=void 0}_isOneFingerTouch(re){return re.targetTouches.length===1}_isSameTouchEvent(re){return re.targetTouches[0].identifier===this._firstTouch}startMove(re){this._firstTouch=re.targetTouches[0].identifier}endMove(re){delete this._firstTouch}isValidStartEvent(re){return this._isOneFingerTouch(re)}isValidMoveEvent(re){return this._isOneFingerTouch(re)&&this._isSameTouchEvent(re)}isValidEndEvent(re){return this._isOneFingerTouch(re)&&this._isSameTouchEvent(re)}}class Ho{constructor(re=new Gs({checkCorrectEvent:()=>!0}),he=new uh){this.mouseMoveStateManager=re,this.oneFingerTouchMoveStateManager=he}_executeRelevantHandler(re,he,fe){return re instanceof MouseEvent?he(re):typeof TouchEvent!="undefined"&&re instanceof TouchEvent?fe(re):void 0}startMove(re){this._executeRelevantHandler(re,he=>this.mouseMoveStateManager.startMove(he),he=>this.oneFingerTouchMoveStateManager.startMove(he))}endMove(re){this._executeRelevantHandler(re,he=>this.mouseMoveStateManager.endMove(he),he=>this.oneFingerTouchMoveStateManager.endMove(he))}isValidStartEvent(re){return this._executeRelevantHandler(re,he=>this.mouseMoveStateManager.isValidStartEvent(he),he=>this.oneFingerTouchMoveStateManager.isValidStartEvent(he))}isValidMoveEvent(re){return this._executeRelevantHandler(re,he=>this.mouseMoveStateManager.isValidMoveEvent(he),he=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(he))}isValidEndEvent(re){return this._executeRelevantHandler(re,he=>this.mouseMoveStateManager.isValidEndEvent(he),he=>this.oneFingerTouchMoveStateManager.isValidEndEvent(he))}}const Es=be=>{be.mousedown=be.dragStart,be.mousemoveWindow=be.dragMove,be.mouseup=be.dragEnd,be.contextmenu=re=>{re.preventDefault()}};class Hl{constructor(re,he){this._clickTolerance=re.clickTolerance||1,this._map=he,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new oe.P(0,0)}_shouldBePrevented(re){return re<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(re,he,fe){return this._calculateTransform(re,he,fe)}touchmove(re,he,fe){if(this._active){if(!this._shouldBePrevented(fe.length))return re.preventDefault(),this._calculateTransform(re,he,fe);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",re)}}touchend(re,he,fe){this._calculateTransform(re,he,fe),this._active&&this._shouldBePrevented(fe.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(re,he,fe){fe.length>0&&(this._active=!0);const _e=Wl(fe,he),we=new oe.P(0,0),Me=new oe.P(0,0);let Fe=0;for(const $e in _e){const We=_e[$e],Je=this._touches[$e];Je&&(we._add(We),Me._add(We.sub(Je)),Fe++,_e[$e]=We)}if(this._touches=_e,this._shouldBePrevented(Fe)||!Me.mag())return;const Be=Me.div(Fe);return this._sum._add(Be),this._sum.mag()<this._clickTolerance?void 0:{around:we.div(Fe),panDelta:Be}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class mi{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(re,he,fe){this._firstTwoTouches||fe.length<2||(this._firstTwoTouches=[fe[0].identifier,fe[1].identifier],this._start([he[0],he[1]]))}touchmove(re,he,fe){if(!this._firstTwoTouches)return;re.preventDefault();const[_e,we]=this._firstTwoTouches,Me=wo(fe,he,_e),Fe=wo(fe,he,we);if(!Me||!Fe)return;const Be=this._aroundCenter?null:Me.add(Fe).div(2);return this._move([Me,Fe],Be,re)}touchend(re,he,fe){if(!this._firstTwoTouches)return;const[_e,we]=this._firstTwoTouches,Me=wo(fe,he,_e),Fe=wo(fe,he,we);Me&&Fe||(this._active&&Ce.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(re){this._enabled=!0,this._aroundCenter=!!re&&re.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function wo(be,re,he){for(let fe=0;fe<be.length;fe++)if(be[fe].identifier===he)return re[fe]}function dh(be,re){return Math.log(be/re)/Math.LN2}class Na extends mi{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(re){this._startDistance=this._distance=re[0].dist(re[1])}_move(re,he){const fe=this._distance;if(this._distance=re[0].dist(re[1]),this._active||!(Math.abs(dh(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:dh(this._distance,fe),pinchAround:he}}}function ph(be,re){return 180*be.angleWith(re)/Math.PI}class fh extends mi{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(re){this._startVector=this._vector=re[0].sub(re[1]),this._minDiameter=re[0].dist(re[1])}_move(re,he,fe){const _e=this._vector;if(this._vector=re[0].sub(re[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ph(this._vector,_e),pinchAround:he}}_isBelowThreshold(re){this._minDiameter=Math.min(this._minDiameter,re.mag());const he=25/(Math.PI*this._minDiameter)*360,fe=ph(re,this._startVector);return Math.abs(fe)<he}}function $a(be){return Math.abs(be.y)>Math.abs(be.x)}class qa extends mi{constructor(re){super(),this._currentTouchCount=0,this._map=re}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(re,he,fe){super.touchstart(re,he,fe),this._currentTouchCount=fe.length}_start(re){this._lastPoints=re,$a(re[0].sub(re[1]))&&(this._valid=!1)}_move(re,he,fe){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const _e=re[0].sub(this._lastPoints[0]),we=re[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(_e,we,fe.timeStamp),this._valid?(this._lastPoints=re,this._active=!0,{pitchDelta:(_e.y+we.y)/2*-.5}):void 0}gestureBeginsVertically(re,he,fe){if(this._valid!==void 0)return this._valid;const _e=re.mag()>=2,we=he.mag()>=2;if(!_e&&!we)return;if(!_e||!we)return this._firstMove===void 0&&(this._firstMove=fe),fe-this._firstMove<100&&void 0;const Me=re.y>0==he.y>0;return $a(re)&&$a(he)&&Me}}const mh={panStep:100,bearingStep:15,pitchStep:10};class gh{constructor(re){this._tr=new hs(re);const he=mh;this._panStep=he.panStep,this._bearingStep=he.bearingStep,this._pitchStep=he.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(re){if(re.altKey||re.ctrlKey||re.metaKey)return;let he=0,fe=0,_e=0,we=0,Me=0;switch(re.keyCode){case 61:case 107:case 171:case 187:he=1;break;case 189:case 109:case 173:he=-1;break;case 37:re.shiftKey?fe=-1:(re.preventDefault(),we=-1);break;case 39:re.shiftKey?fe=1:(re.preventDefault(),we=1);break;case 38:re.shiftKey?_e=1:(re.preventDefault(),Me=-1);break;case 40:re.shiftKey?_e=-1:(re.preventDefault(),Me=1);break;default:return}return this._rotationDisabled&&(fe=0,_e=0),{cameraAnimation:Fe=>{const Be=this._tr;Fe.easeTo({duration:300,easeId:"keyboardHandler",easing:_h,zoom:he?Math.round(Be.zoom)+he*(re.shiftKey?2:1):Be.zoom,bearing:Be.bearing+fe*this._bearingStep,pitch:Be.pitch+_e*this._pitchStep,offset:[-we*this._panStep,-Me*this._panStep],center:Be.center},{originalEvent:re})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function _h(be){return be*(2-be)}const yh=4.000244140625,lu=1/450;class _s{constructor(re,he){this._onTimeout=fe=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(fe)},this._map=re,this._tr=new hs(re),this._triggerRenderFrame=he,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=lu}setZoomRate(re){this._defaultZoomRate=re}setWheelZoomRate(re){this._wheelZoomRate=re}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(re){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!re&&re.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(re){return!!this._map.cooperativeGestures.isEnabled()&&!(re.ctrlKey||this._map.cooperativeGestures.isBypassed(re))}wheel(re){if(!this.isEnabled())return;if(this._shouldBePrevented(re))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",re);let he=re.deltaMode===WheelEvent.DOM_DELTA_LINE?40*re.deltaY:re.deltaY;const fe=Ae(),_e=fe-(this._lastWheelEventTime||0);this._lastWheelEventTime=fe,he!==0&&he%yh==0?this._type="wheel":he!==0&&Math.abs(he)<4?this._type="trackpad":_e>400?(this._type=null,this._lastValue=he,this._timeout=setTimeout(this._onTimeout,40,re)):this._type||(this._type=Math.abs(_e*he)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,he+=this._lastValue)),re.shiftKey&&he&&(he/=4),this._type&&(this._lastWheelEvent=re,this._delta-=he,this._active||this._start(re)),re.preventDefault()}_start(re){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const he=Ce.mousePos(this._map.getCanvas(),re),fe=this._tr;this._aroundPoint=this._aroundCenter?fe.transform.locationToScreenPoint(oe.S.convert(fe.center)):he,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const re=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const Fe=re.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=Fe),typeof this._targetZoom=="number"&&(this._targetZoom+=Fe)}if(this._delta!==0){const Fe=this._type==="wheel"&&Math.abs(this._delta)>yh?this._wheelZoomRate:this._defaultZoomRate;let Be=2/(1+Math.exp(-Math.abs(this._delta*Fe)));this._delta<0&&Be!==0&&(Be=1/Be);const $e=typeof this._targetZoom!="number"?re.scale:oe.ah(this._targetZoom);this._targetZoom=re.constrain(re.getCameraLngLat(),oe.ak($e*Be)).zoom,this._type==="wheel"&&(this._startZoom=re.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const he=typeof this._targetZoom!="number"?re.zoom:this._targetZoom,fe=this._startZoom,_e=this._easing;let we,Me=!1;if(this._type==="wheel"&&fe&&_e){const Fe=Ae()-this._lastWheelEventTime,Be=Math.min((Fe+5)/200,1),$e=_e(Be);we=oe.C.number(fe,he,$e),Be<1?this._frameId||(this._frameId=!0):Me=!0}else we=he,Me=!0;return this._active=!0,Me&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=we,{noInertia:!0,needsRenderFrame:!Me,zoomDelta:we-re.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(re){let he=oe.co;if(this._prevEase){const fe=this._prevEase,_e=(Ae()-fe.start)/fe.duration,we=fe.easing(_e+.01)-fe.easing(_e),Me=.27/Math.sqrt(we*we+1e-4)*.01,Fe=Math.sqrt(.0729-Me*Me);he=oe.cm(Me,Fe,.25,1)}return this._prevEase={start:Ae(),duration:re,easing:he},he}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Li{constructor(re,he){this._clickZoom=re,this._tapZoom=he}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class cu{constructor(re){this._tr=new hs(re),this.reset()}reset(){this._active=!1}dblclick(re,he){return re.preventDefault(),{cameraAnimation:fe=>{fe.easeTo({duration:300,zoom:this._tr.zoom+(re.shiftKey?-1:1),around:this._tr.unproject(he)},{originalEvent:re})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ja{constructor(){this._tap=new Gl({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(re,he,fe){if(!this._swipePoint)if(this._tapTime){const _e=he[0],we=re.timeStamp-this._tapTime<500,Me=this._tapPoint.dist(_e)<30;we&&Me?fe.length>0&&(this._swipePoint=_e,this._swipeTouch=fe[0].identifier):this.reset()}else this._tap.touchstart(re,he,fe)}touchmove(re,he,fe){if(this._tapTime){if(this._swipePoint){if(fe[0].identifier!==this._swipeTouch)return;const _e=he[0],we=_e.y-this._swipePoint.y;return this._swipePoint=_e,re.preventDefault(),this._active=!0,{zoomDelta:we/128}}}else this._tap.touchmove(re,he,fe)}touchend(re,he,fe){if(this._tapTime)this._swipePoint&&fe.length===0&&this.reset();else{const _e=this._tap.touchend(re,he,fe);_e&&(this._tapTime=re.timeStamp,this._tapPoint=_e)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Wa{constructor(re,he,fe){this._el=re,this._mousePan=he,this._touchPan=fe}enable(re){this._inertiaOptions=re||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ul{constructor(re,he,fe,_e){this._pitchWithRotate=re.pitchWithRotate,this._rollEnabled=re.rollEnabled,this._mouseRotate=he,this._mousePitch=fe,this._mouseRoll=_e}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Zl{constructor(re,he,fe,_e){this._el=re,this._touchZoom=he,this._touchRotate=fe,this._tapDragZoom=_e,this._rotationDisabled=!1,this._enabled=!0}enable(re){this._touchZoom.enable(re),this._rotationDisabled||this._touchRotate.enable(re),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Xl{constructor(re,he){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=re,this._options=he,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const re=this._map.getCanvasContainer();re.classList.add("maplibregl-cooperative-gestures"),this._container=Ce.create("div","maplibregl-cooperative-gesture-screen",re);let he=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(he=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const fe=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),_e=document.createElement("div");_e.className="maplibregl-desktop-message",_e.textContent=he,this._container.appendChild(_e);const we=document.createElement("div");we.className="maplibregl-mobile-message",we.textContent=fe,this._container.appendChild(we),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(Ce.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(re){return re[this._bypassKey]}notifyGestureBlocked(re,he){this._enabled&&(this._map.fire(new oe.l("cooperativegestureprevented",{gestureType:re,originalEvent:he})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Ga=be=>be.zoom||be.drag||be.roll||be.pitch||be.rotate;class us extends oe.l{}function So(be){return be.panDelta&&be.panDelta.mag()||be.zoomDelta||be.bearingDelta||be.pitchDelta||be.rollDelta}class Vr{constructor(re,he){this.handleWindowEvent=_e=>{this.handleEvent(_e,`${_e.type}Window`)},this.handleEvent=(_e,we)=>{if(_e.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const Me=_e.type==="renderFrame"?void 0:_e,Fe={needsRenderFrame:!1},Be={},$e={};for(const{handlerName:Xe,handler:st,allowed:ht}of this._handlers){if(!st.isEnabled())continue;let vt;if(this._blockedByActive($e,ht,Xe))st.reset();else if(st[we||_e.type]){if(oe.cp(_e,we||_e.type)){const bt=Ce.mousePos(this._map.getCanvas(),_e);vt=st[we||_e.type](_e,bt)}else if(oe.cq(_e,we||_e.type)){const bt=this._getMapTouches(_e.touches),xt=Ce.touchPos(this._map.getCanvas(),bt);vt=st[we||_e.type](_e,xt,bt)}else oe.cr(we||_e.type)||(vt=st[we||_e.type](_e));this.mergeHandlerResult(Fe,Be,vt,Xe,Me),vt&&vt.needsRenderFrame&&this._triggerRenderFrame()}(vt||st.isActive())&&($e[Xe]=st)}const We={};for(const Xe in this._previousActiveHandlers)$e[Xe]||(We[Xe]=Me);this._previousActiveHandlers=$e,(Object.keys(We).length||So(Fe))&&(this._changes.push([Fe,Be,We]),this._triggerRenderFrame()),(Object.keys($e).length||So(Fe))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Je}=Fe;Je&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Je(this._map))},this._map=re,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new oh(re),this._bearingSnap=he.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(he);const fe=this._el;this._listeners=[[fe,"touchstart",{passive:!0}],[fe,"touchmove",{passive:!1}],[fe,"touchend",void 0],[fe,"touchcancel",void 0],[fe,"mousedown",void 0],[fe,"mousemove",void 0],[fe,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[fe,"mouseover",void 0],[fe,"mouseout",void 0],[fe,"dblclick",void 0],[fe,"click",void 0],[fe,"keydown",{capture:!1}],[fe,"keyup",void 0],[fe,"wheel",{passive:!1}],[fe,"contextmenu",void 0],[window,"blur",void 0]];for(const[_e,we,Me]of this._listeners)Ce.addEventListener(_e,we,_e===document?this.handleWindowEvent:this.handleEvent,Me)}destroy(){for(const[re,he,fe]of this._listeners)Ce.removeEventListener(re,he,re===document?this.handleWindowEvent:this.handleEvent,fe)}_addDefaultHandlers(re){const he=this._map,fe=he.getCanvasContainer();this._add("mapEvent",new ah(he,re));const _e=he.boxZoom=new lh(he,re);this._add("boxZoom",_e),re.interactive&&re.boxZoom&&_e.enable();const we=he.cooperativeGestures=new Xl(he,re.cooperativeGestures);this._add("cooperativeGestures",we),re.cooperativeGestures&&we.enable();const Me=new ch(he),Fe=new cu(he);he.doubleClickZoom=new Li(Fe,Me),this._add("tapZoom",Me),this._add("clickZoom",Fe),re.interactive&&re.doubleClickZoom&&he.doubleClickZoom.enable();const Be=new ja;this._add("tapDragZoom",Be);const $e=he.touchPitch=new qa(he);this._add("touchPitch",$e),re.interactive&&re.touchPitch&&he.touchPitch.enable(re.touchPitch);const We=()=>he.project(he.getCenter()),Je=function({enable:Tt,clickTolerance:Lt,aroundCenter:Rt=!0,minPixelCenterThreshold:Pt=100,rotateDegreesPerPixelMoved:Nt=.8},Yt){const Wt=new Gs({checkCorrectEvent:Ut=>Ce.mouseButton(Ut)===0&&Ut.ctrlKey||Ce.mouseButton(Ut)===2&&!Ut.ctrlKey});return new ms({clickTolerance:Lt,move:(Ut,Kt)=>{const br=Yt();if(Rt&&Math.abs(br.y-Ut.y)>Pt)return{bearingDelta:oe.cn(new oe.P(Ut.x,Kt.y),Kt,br)};let xr=(Kt.x-Ut.x)*Nt;return Rt&&Kt.y<br.y&&(xr=-xr),{bearingDelta:xr}},moveStateManager:Wt,enable:Tt,assignEvents:Es})}(re,We),Xe=function({enable:Tt,clickTolerance:Lt,pitchDegreesPerPixelMoved:Rt=-.5}){const Pt=new Gs({checkCorrectEvent:Nt=>Ce.mouseButton(Nt)===0&&Nt.ctrlKey||Ce.mouseButton(Nt)===2});return new ms({clickTolerance:Lt,move:(Nt,Yt)=>({pitchDelta:(Yt.y-Nt.y)*Rt}),moveStateManager:Pt,enable:Tt,assignEvents:Es})}(re),st=function({enable:Tt,clickTolerance:Lt,rollDegreesPerPixelMoved:Rt=.3},Pt){const Nt=new Gs({checkCorrectEvent:Yt=>Ce.mouseButton(Yt)===2&&Yt.ctrlKey});return new ms({clickTolerance:Lt,move:(Yt,Wt)=>{const Ut=Pt();let Kt=(Wt.x-Yt.x)*Rt;return Wt.y<Ut.y&&(Kt=-Kt),{rollDelta:Kt}},moveStateManager:Nt,enable:Tt,assignEvents:Es})}(re,We);he.dragRotate=new Ul(re,Je,Xe,st),this._add("mouseRotate",Je,["mousePitch"]),this._add("mousePitch",Xe,["mouseRotate","mouseRoll"]),this._add("mouseRoll",st,["mousePitch"]),re.interactive&&re.dragRotate&&he.dragRotate.enable();const ht=function({enable:Tt,clickTolerance:Lt}){const Rt=new Gs({checkCorrectEvent:Pt=>Ce.mouseButton(Pt)===0&&!Pt.ctrlKey});return new ms({clickTolerance:Lt,move:(Pt,Nt)=>({around:Nt,panDelta:Nt.sub(Pt)}),activateOnStart:!0,moveStateManager:Rt,enable:Tt,assignEvents:Es})}(re),vt=new Hl(re,he);he.dragPan=new Wa(fe,ht,vt),this._add("mousePan",ht),this._add("touchPan",vt,["touchZoom","touchRotate"]),re.interactive&&re.dragPan&&he.dragPan.enable(re.dragPan);const bt=new fh,xt=new Na;he.touchZoomRotate=new Zl(fe,xt,bt,Be),this._add("touchRotate",bt,["touchPan","touchZoom"]),this._add("touchZoom",xt,["touchPan","touchRotate"]),re.interactive&&re.touchZoomRotate&&he.touchZoomRotate.enable(re.touchZoomRotate),this._add("blockableMapEvent",new Qn(he));const Ct=he.scrollZoom=new _s(he,()=>this._triggerRenderFrame());this._add("scrollZoom",Ct,["mousePan"]),re.interactive&&re.scrollZoom&&he.scrollZoom.enable(re.scrollZoom);const kt=he.keyboard=new gh(he);this._add("keyboard",kt),re.interactive&&re.keyboard&&he.keyboard.enable()}_add(re,he,fe){this._handlers.push({handlerName:re,handler:he,allowed:fe}),this._handlersById[re]=he}stop(re){if(!this._updatingCamera){for(const{handler:he}of this._handlers)he.reset();this._inertia.clear(),this._fireEvents({},{},re),this._changes=[]}}isActive(){for(const{handler:re}of this._handlers)if(re.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Ga(this._eventsInProgress))||this.isZooming()}_blockedByActive(re,he,fe){for(const _e in re)if(_e!==fe&&(!he||he.indexOf(_e)<0))return!0;return!1}_getMapTouches(re){const he=[];for(const fe of re)this._el.contains(fe.target)&&he.push(fe);return he}mergeHandlerResult(re,he,fe,_e,we){if(!fe)return;oe.e(re,fe);const Me={handlerName:_e,originalEvent:fe.originalEvent||we};fe.zoomDelta!==void 0&&(he.zoom=Me),fe.panDelta!==void 0&&(he.drag=Me),fe.rollDelta!==void 0&&(he.roll=Me),fe.pitchDelta!==void 0&&(he.pitch=Me),fe.bearingDelta!==void 0&&(he.rotate=Me)}_applyChanges(){const re={},he={},fe={};for(const[_e,we,Me]of this._changes)_e.panDelta&&(re.panDelta=(re.panDelta||new oe.P(0,0))._add(_e.panDelta)),_e.zoomDelta&&(re.zoomDelta=(re.zoomDelta||0)+_e.zoomDelta),_e.bearingDelta&&(re.bearingDelta=(re.bearingDelta||0)+_e.bearingDelta),_e.pitchDelta&&(re.pitchDelta=(re.pitchDelta||0)+_e.pitchDelta),_e.rollDelta&&(re.rollDelta=(re.rollDelta||0)+_e.rollDelta),_e.around!==void 0&&(re.around=_e.around),_e.pinchAround!==void 0&&(re.pinchAround=_e.pinchAround),_e.noInertia&&(re.noInertia=_e.noInertia),oe.e(he,we),oe.e(fe,Me);this._updateMapTransform(re,he,fe),this._changes=[]}_updateMapTransform(re,he,fe){const _e=this._map,we=_e._getTransformForUpdate(),Me=_e.terrain;if(!(So(re)||Me&&this._terrainMovement))return this._fireEvents(he,fe,!0);_e._stop(!0);let{panDelta:Fe,zoomDelta:Be,bearingDelta:$e,pitchDelta:We,rollDelta:Je,around:Xe,pinchAround:st}=re;st!==void 0&&(Xe=st),Xe=Xe||_e.transform.centerPoint,Me&&!we.isPointOnMapSurface(Xe)&&(Xe=we.centerPoint);const ht={panDelta:Fe,zoomDelta:Be,rollDelta:Je,pitchDelta:We,bearingDelta:$e,around:Xe};this._map.cameraHelper.useGlobeControls&&!we.isPointOnMapSurface(Xe)&&(Xe=we.centerPoint);const vt=Xe.distSqr(we.centerPoint)<.01?we.center:we.screenPointToLocation(Fe?Xe.sub(Fe):Xe);this._handleMapControls({terrain:Me,tr:we,deltasForHelper:ht,preZoomAroundLoc:vt,combinedEventsInProgress:he,panDelta:Fe}),_e._applyUpdatedTransform(we),this._map._update(),re.noInertia||this._inertia.record(re),this._fireEvents(he,fe,!0)}_handleMapControls({terrain:re,tr:he,deltasForHelper:fe,preZoomAroundLoc:_e,combinedEventsInProgress:we,panDelta:Me}){const Fe=this._map.cameraHelper;if(Fe.handleMapControlsRollPitchBearingZoom(fe,he),re)return Fe.useGlobeControls?(this._terrainMovement||!we.drag&&!we.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void Fe.handleMapControlsPan(fe,he,_e)):this._terrainMovement||!we.drag&&!we.zoom?void(we.drag&&this._terrainMovement&&Me?he.setCenter(he.screenPointToLocation(he.centerPoint.sub(Me))):Fe.handleMapControlsPan(fe,he,_e)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void Fe.handleMapControlsPan(fe,he,_e));Fe.handleMapControlsPan(fe,he,_e)}_fireEvents(re,he,fe){const _e=Ga(this._eventsInProgress),we=Ga(re),Me={};for(const Je in re){const{originalEvent:Xe}=re[Je];this._eventsInProgress[Je]||(Me[`${Je}start`]=Xe),this._eventsInProgress[Je]=re[Je]}!_e&&we&&this._fireEvent("movestart",we.originalEvent);for(const Je in Me)this._fireEvent(Je,Me[Je]);we&&this._fireEvent("move",we.originalEvent);for(const Je in re){const{originalEvent:Xe}=re[Je];this._fireEvent(Je,Xe)}const Fe={};let Be;for(const Je in this._eventsInProgress){const{handlerName:Xe,originalEvent:st}=this._eventsInProgress[Je];this._handlersById[Xe].isActive()||(delete this._eventsInProgress[Je],Be=he[Xe]||st,Fe[`${Je}end`]=Be)}for(const Je in Fe)this._fireEvent(Je,Fe[Je]);const $e=Ga(this._eventsInProgress),We=(_e||we)&&!$e;if(We&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const Je=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&Je.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(Je)}if(fe&&We){this._updatingCamera=!0;const Je=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Xe=st=>st!==0&&-this._bearingSnap<st&&st<this._bearingSnap;!Je||!Je.essential&&ye.prefersReducedMotion?(this._map.fire(new oe.l("moveend",{originalEvent:Be})),Xe(this._map.getBearing())&&this._map.resetNorth()):(Xe(Je.bearing||this._map.getBearing())&&(Je.bearing=0),Je.freezeElevation=!0,this._map.easeTo(Je,{originalEvent:Be})),this._updatingCamera=!1}}_fireEvent(re,he){this._map.fire(new oe.l(re,he?{originalEvent:he}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(re=>{delete this._frameId,this.handleEvent(new us("renderFrame",{timeStamp:re})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Ur extends oe.E{constructor(re,he,fe){super(),this._renderFrameCallback=()=>{const _e=Math.min((Ae()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(_e)),_e<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=re,this._bearingSnap=fe.bearingSnap,this.cameraHelper=he,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(re,he){re.apply(this.transform),this.transform=re,this.cameraHelper=he}getCenter(){return new oe.S(this.transform.center.lng,this.transform.center.lat)}setCenter(re,he){return this.jumpTo({center:re},he)}getCenterElevation(){return this.transform.elevation}setCenterElevation(re,he){return this.jumpTo({elevation:re},he),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(re){this._centerClampedToGround=re}panBy(re,he,fe){return re=oe.P.convert(re).mult(-1),this.panTo(this.transform.center,oe.e({offset:re},he),fe)}panTo(re,he,fe){return this.easeTo(oe.e({center:re},he),fe)}getZoom(){return this.transform.zoom}setZoom(re,he){return this.jumpTo({zoom:re},he),this}zoomTo(re,he,fe){return this.easeTo(oe.e({zoom:re},he),fe)}zoomIn(re,he){return this.zoomTo(this.getZoom()+1,re,he),this}zoomOut(re,he){return this.zoomTo(this.getZoom()-1,re,he),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(re,he){return re!=this.transform.fov&&(this.transform.setFov(re),this.fire(new oe.l("movestart",he)).fire(new oe.l("move",he)).fire(new oe.l("moveend",he))),this}getBearing(){return this.transform.bearing}setBearing(re,he){return this.jumpTo({bearing:re},he),this}getPadding(){return this.transform.padding}setPadding(re,he){return this.jumpTo({padding:re},he),this}rotateTo(re,he,fe){return this.easeTo(oe.e({bearing:re},he),fe)}resetNorth(re,he){return this.rotateTo(0,oe.e({duration:1e3},re),he),this}resetNorthPitch(re,he){return this.easeTo(oe.e({bearing:0,pitch:0,roll:0,duration:1e3},re),he),this}snapToNorth(re,he){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(re,he):this}getPitch(){return this.transform.pitch}setPitch(re,he){return this.jumpTo({pitch:re},he),this}getRoll(){return this.transform.roll}setRoll(re,he){return this.jumpTo({roll:re},he),this}cameraForBounds(re,he){re=qr.convert(re).adjustAntiMeridian();const fe=he&&he.bearing||0;return this._cameraForBoxAndBearing(re.getNorthWest(),re.getSouthEast(),fe,he)}_cameraForBoxAndBearing(re,he,fe,_e){const we={top:0,bottom:0,right:0,left:0};if(typeof(_e=oe.e({padding:we,offset:[0,0],maxZoom:this.transform.maxZoom},_e)).padding=="number"){const $e=_e.padding;_e.padding={top:$e,bottom:$e,right:$e,left:$e}}const Me=oe.e(we,_e.padding);_e.padding=Me;const Fe=this.transform,Be=new qr(re,he);return this.cameraHelper.cameraForBoxAndBearing(_e,Me,Be,fe,Fe)}fitBounds(re,he,fe){return this._fitInternal(this.cameraForBounds(re,he),he,fe)}fitScreenCoordinates(re,he,fe,_e,we){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(oe.P.convert(re)),this.transform.screenPointToLocation(oe.P.convert(he)),fe,_e),_e,we)}_fitInternal(re,he,fe){return re?(delete(he=oe.e(re,he)).padding,he.linear?this.easeTo(he,fe):this.flyTo(he,fe)):this}jumpTo(re,he){this.stop();const fe=this._getTransformForUpdate();let _e=!1,we=!1,Me=!1;const Fe=fe.zoom;this.cameraHelper.handleJumpToCenterZoom(fe,re);const Be=fe.zoom!==Fe;return"elevation"in re&&fe.elevation!==+re.elevation&&fe.setElevation(+re.elevation),"bearing"in re&&fe.bearing!==+re.bearing&&(_e=!0,fe.setBearing(+re.bearing)),"pitch"in re&&fe.pitch!==+re.pitch&&(we=!0,fe.setPitch(+re.pitch)),"roll"in re&&fe.roll!==+re.roll&&(Me=!0,fe.setRoll(+re.roll)),re.padding==null||fe.isPaddingEqual(re.padding)||fe.setPadding(re.padding),this._applyUpdatedTransform(fe),this.fire(new oe.l("movestart",he)).fire(new oe.l("move",he)),Be&&this.fire(new oe.l("zoomstart",he)).fire(new oe.l("zoom",he)).fire(new oe.l("zoomend",he)),_e&&this.fire(new oe.l("rotatestart",he)).fire(new oe.l("rotate",he)).fire(new oe.l("rotateend",he)),we&&this.fire(new oe.l("pitchstart",he)).fire(new oe.l("pitch",he)).fire(new oe.l("pitchend",he)),Me&&this.fire(new oe.l("rollstart",he)).fire(new oe.l("roll",he)).fire(new oe.l("rollend",he)),this.fire(new oe.l("moveend",he))}calculateCameraOptionsFromTo(re,he,fe,_e=0){const we=oe.a1.fromLngLat(re,he),Me=oe.a1.fromLngLat(fe,_e),Fe=Me.x-we.x,Be=Me.y-we.y,$e=Me.z-we.z,We=Math.hypot(Fe,Be,$e);if(We===0)throw new Error("Can't calculate camera options with same From and To");const Je=Math.hypot(Fe,Be),Xe=oe.ak(this.transform.cameraToCenterDistance/We/this.transform.tileSize),st=180*Math.atan2(Fe,-Be)/Math.PI;let ht=180*Math.acos(Je/We)/Math.PI;return ht=$e<0?90-ht:90+ht,{center:Me.toLngLat(),elevation:_e,zoom:Xe,pitch:ht,bearing:st}}calculateCameraOptionsFromCameraLngLatAltRotation(re,he,fe,_e,we){const Me=this.transform.calculateCenterFromCameraLngLatAlt(re,he,fe,_e);return{center:Me.center,elevation:Me.elevation,zoom:Me.zoom,bearing:fe,pitch:_e,roll:we}}easeTo(re,he){this._stop(!1,re.easeId),((re=oe.e({offset:[0,0],duration:500,easing:oe.co},re)).animate===!1||!re.essential&&ye.prefersReducedMotion)&&(re.duration=0);const fe=this._getTransformForUpdate(),_e=this.getBearing(),we=fe.pitch,Me=fe.roll,Fe="bearing"in re?this._normalizeBearing(re.bearing,_e):_e,Be="pitch"in re?+re.pitch:we,$e="roll"in re?this._normalizeBearing(re.roll,Me):Me,We="padding"in re?re.padding:fe.padding,Je=oe.P.convert(re.offset);let Xe,st;re.around&&(Xe=oe.S.convert(re.around),st=fe.locationToScreenPoint(Xe));const ht={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},vt=this.cameraHelper.handleEaseTo(fe,{bearing:Fe,pitch:Be,roll:$e,padding:We,around:Xe,aroundPoint:st,offsetAsPoint:Je,offset:re.offset,zoom:re.zoom,center:re.center});return this._rotating=this._rotating||_e!==Fe,this._pitching=this._pitching||Be!==we,this._rolling=this._rolling||$e!==Me,this._padding=!fe.isPaddingEqual(We),this._zooming=this._zooming||vt.isZooming,this._easeId=re.easeId,this._prepareEase(he,re.noMoveStart,ht),this.terrain&&this._prepareElevation(vt.elevationCenter),this._ease(bt=>{vt.easeFunc(bt),this.terrain&&!re.freezeElevation&&this._updateElevation(bt),this._applyUpdatedTransform(fe),this._fireMoveEvents(he)},bt=>{this.terrain&&re.freezeElevation&&this._finalizeElevation(),this._afterEase(he,bt)},re),this}_prepareEase(re,he,fe={}){this._moving=!0,he||fe.moving||this.fire(new oe.l("movestart",re)),this._zooming&&!fe.zooming&&this.fire(new oe.l("zoomstart",re)),this._rotating&&!fe.rotating&&this.fire(new oe.l("rotatestart",re)),this._pitching&&!fe.pitching&&this.fire(new oe.l("pitchstart",re)),this._rolling&&!fe.rolling&&this.fire(new oe.l("rollstart",re))}_prepareElevation(re){this._elevationCenter=re,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(re,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(re){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const he=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(re<1&&he!==this._elevationTarget){const fe=this._elevationTarget-this._elevationStart;this._elevationStart+=re*(fe-(he-(fe*re+this._elevationStart))/(1-re)),this._elevationTarget=he}this.transform.setElevation(oe.C.number(this._elevationStart,this._elevationTarget,re))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(re){if(!this.terrain&&re.elevation>=0&&re.pitch<=90)return{};const he=re.getCameraLngLat(),fe=re.getCameraAltitude(),_e=this.terrain?this.terrain.getElevationForLngLatZoom(he,re.zoom):0;if(fe<_e){const we=this.calculateCameraOptionsFromTo(he,_e,re.center,re.elevation);return{pitch:we.pitch,zoom:we.zoom}}return{}}_applyUpdatedTransform(re){const he=[];if(he.push(_e=>this._elevateCameraIfInsideTerrain(_e)),this.transformCameraUpdate&&he.push(_e=>this.transformCameraUpdate(_e)),!he.length)return;const fe=re.clone();for(const _e of he){const we=fe.clone(),{center:Me,zoom:Fe,roll:Be,pitch:$e,bearing:We,elevation:Je}=_e(we);Me&&we.setCenter(Me),Je!==void 0&&we.setElevation(Je),Fe!==void 0&&we.setZoom(Fe),Be!==void 0&&we.setRoll(Be),$e!==void 0&&we.setPitch($e),We!==void 0&&we.setBearing(We),fe.apply(we)}this.transform.apply(fe)}_fireMoveEvents(re){this.fire(new oe.l("move",re)),this._zooming&&this.fire(new oe.l("zoom",re)),this._rotating&&this.fire(new oe.l("rotate",re)),this._pitching&&this.fire(new oe.l("pitch",re)),this._rolling&&this.fire(new oe.l("roll",re))}_afterEase(re,he){if(this._easeId&&he&&this._easeId===he)return;delete this._easeId;const fe=this._zooming,_e=this._rotating,we=this._pitching,Me=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,fe&&this.fire(new oe.l("zoomend",re)),_e&&this.fire(new oe.l("rotateend",re)),we&&this.fire(new oe.l("pitchend",re)),Me&&this.fire(new oe.l("rollend",re)),this.fire(new oe.l("moveend",re))}flyTo(re,he){if(!re.essential&&ye.prefersReducedMotion){const Kt=oe.Q(re,["center","zoom","bearing","pitch","roll","elevation","padding"]);return this.jumpTo(Kt,he)}this.stop(),re=oe.e({offset:[0,0],speed:1.2,curve:1.42,easing:oe.co},re);const fe=this._getTransformForUpdate(),_e=fe.bearing,we=fe.pitch,Me=fe.roll,Fe=fe.padding,Be="bearing"in re?this._normalizeBearing(re.bearing,_e):_e,$e="pitch"in re?+re.pitch:we,We="roll"in re?this._normalizeBearing(re.roll,Me):Me,Je="padding"in re?re.padding:fe.padding,Xe=oe.P.convert(re.offset);let st=fe.centerPoint.add(Xe);const ht=fe.screenPointToLocation(st),vt=this.cameraHelper.handleFlyTo(fe,{bearing:Be,pitch:$e,roll:We,padding:Je,locationAtOffset:ht,offsetAsPoint:Xe,center:re.center,minZoom:re.minZoom,zoom:re.zoom});let bt=re.curve;const xt=Math.max(fe.width,fe.height),Ct=xt/vt.scaleOfZoom,kt=vt.pixelPathLength;typeof vt.scaleOfMinZoom=="number"&&(bt=Math.sqrt(xt/vt.scaleOfMinZoom/kt*2));const Tt=bt*bt;function Lt(Kt){const br=(Ct*Ct-xt*xt+(Kt?-1:1)*Tt*Tt*kt*kt)/(2*(Kt?Ct:xt)*Tt*kt);return Math.log(Math.sqrt(br*br+1)-br)}function Rt(Kt){return(Math.exp(Kt)-Math.exp(-Kt))/2}function Pt(Kt){return(Math.exp(Kt)+Math.exp(-Kt))/2}const Nt=Lt(!1);let Yt=function(Kt){return Pt(Nt)/Pt(Nt+bt*Kt)},Wt=function(Kt){return xt*((Pt(Nt)*(Rt(br=Nt+bt*Kt)/Pt(br))-Rt(Nt))/Tt)/kt;var br},Ut=(Lt(!0)-Nt)/bt;if(Math.abs(kt)<2e-6||!isFinite(Ut)){if(Math.abs(xt-Ct)<1e-6)return this.easeTo(re,he);const Kt=Ct<xt?-1:1;Ut=Math.abs(Math.log(Ct/xt))/bt,Wt=()=>0,Yt=br=>Math.exp(Kt*bt*br)}return re.duration="duration"in re?+re.duration:1e3*Ut/("screenSpeed"in re?+re.screenSpeed/bt:+re.speed),re.maxDuration&&re.duration>re.maxDuration&&(re.duration=0),this._zooming=!0,this._rotating=_e!==Be,this._pitching=$e!==we,this._rolling=We!==Me,this._padding=!fe.isPaddingEqual(Je),this._prepareEase(he,!1),this.terrain&&this._prepareElevation(vt.targetCenter),this._ease(Kt=>{const br=Kt*Ut,xr=1/Yt(br),_r=Wt(br);this._rotating&&fe.setBearing(oe.C.number(_e,Be,Kt)),this._pitching&&fe.setPitch(oe.C.number(we,$e,Kt)),this._rolling&&fe.setRoll(oe.C.number(Me,We,Kt)),this._padding&&(fe.interpolatePadding(Fe,Je,Kt),st=fe.centerPoint.add(Xe)),vt.easeFunc(Kt,xr,_r,st),this.terrain&&!re.freezeElevation&&this._updateElevation(Kt),this._applyUpdatedTransform(fe),this._fireMoveEvents(he)},()=>{this.terrain&&re.freezeElevation&&this._finalizeElevation(),this._afterEase(he)},re),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(re,he){var fe;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const _e=this._onEaseEnd;delete this._onEaseEnd,_e.call(this,he)}return re||(fe=this.handlers)===null||fe===void 0||fe.stop(!1),this}_ease(re,he,fe){fe.animate===!1||fe.duration===0?(re(1),he()):(this._easeStart=Ae(),this._easeOptions=fe,this._onEaseFrame=re,this._onEaseEnd=he,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(re,he){re=oe.aO(re,-180,180);const fe=Math.abs(re-he);return Math.abs(re-360-he)<fe&&(re-=360),Math.abs(re+360-he)<fe&&(re+=360),re}queryTerrainElevation(re){return this.terrain?this.terrain.getElevationForLngLatZoom(oe.S.convert(re),this.transform.tileZoom):null}}const To={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Yl{constructor(re=To){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=he=>{!he||he.sourceDataType!=="metadata"&&he.sourceDataType!=="visibility"&&he.dataType!=="style"&&he.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=re}getDefaultPosition(){return"bottom-right"}onAdd(re){return this._map=re,this._compact=this.options.compact,this._container=Ce.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=Ce.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=Ce.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){Ce.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(re,he){const fe=this._map._getUIString(`AttributionControl.${he}`);re.title=fe,re.setAttribute("aria-label",fe)}_updateAttributions(){if(!this._map.style)return;let re=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?re=re.concat(this.options.customAttribution.map(_e=>typeof _e!="string"?"":_e)):typeof this.options.customAttribution=="string"&&re.push(this.options.customAttribution)),this._map.style.stylesheet){const _e=this._map.style.stylesheet;this.styleOwner=_e.owner,this.styleId=_e.id}const he=this._map.style.sourceCaches;for(const _e in he){const we=he[_e];if(we.used||we.usedForTerrain){const Me=we.getSource();Me.attribution&&re.indexOf(Me.attribution)<0&&re.push(Me.attribution)}}re=re.filter(_e=>String(_e).trim()),re.sort((_e,we)=>_e.length-we.length),re=re.filter((_e,we)=>{for(let Me=we+1;Me<re.length;Me++)if(re[Me].indexOf(_e)>=0)return!1;return!0});const fe=re.join(" | ");fe!==this._attribHTML&&(this._attribHTML=fe,re.length?(this._innerContainer.innerHTML=Ce.sanitize(fe),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Uo{constructor(re={}){this._updateCompact=()=>{const he=this._container.children;if(he.length){const fe=he[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&fe.classList.add("maplibregl-compact"):fe.classList.remove("maplibregl-compact")}},this.options=re}getDefaultPosition(){return"bottom-left"}onAdd(re){this._map=re,this._compact=this.options&&this.options.compact,this._container=Ce.create("div","maplibregl-ctrl");const he=Ce.create("a","maplibregl-ctrl-logo");return he.target="_blank",he.rel="noopener nofollow",he.href="https://maplibre.org/",he.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),he.setAttribute("rel","noopener nofollow"),this._container.appendChild(he),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){Ce.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Fn{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(re){const he=++this._id;return this._queue.push({callback:re,id:he,cancelled:!1}),he}remove(re){const he=this._currentlyRunning,fe=he?this._queue.concat(he):this._queue;for(const _e of fe)if(_e.id===re)return void(_e.cancelled=!0)}run(re=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const he=this._currentlyRunning=this._queue;this._queue=[];for(const fe of he)if(!fe.cancelled&&(fe.callback(re),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var vh=oe.aJ([{name:"a_pos3d",type:"Int16",components:3}]);class es extends oe.E{constructor(re){super(),this._lastTilesetChange=Ae(),this.sourceCache=re,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=re._source.tileSize*2**this.deltaZoom,re.usedForTerrain=!0,re.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(re,he){this.sourceCache.update(re,he),this._renderableTilesKeys=[];const fe={};for(const _e of kr(re,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:he,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))fe[_e.key]=!0,this._renderableTilesKeys.push(_e.key),this._tiles[_e.key]||(_e.terrainRttPosMatrix32f=new Float64Array(16),oe.bZ(_e.terrainRttPosMatrix32f,0,oe.$,oe.$,0,0,1),this._tiles[_e.key]=new rt(_e,this.tileSize),this._lastTilesetChange=Ae());for(const _e in this._tiles)fe[_e]||delete this._tiles[_e]}freeRtt(re){for(const he in this._tiles){const fe=this._tiles[he];(!re||fe.tileID.equals(re)||fe.tileID.isChildOf(re)||re.isChildOf(fe.tileID))&&(fe.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(re=>this.getTileByID(re))}getTileByID(re){return this._tiles[re]}getTerrainCoords(re,he){return he?this._getTerrainCoordsForTileRanges(re,he):this._getTerrainCoordsForRegularTile(re)}_getTerrainCoordsForRegularTile(re){const he={};for(const fe of this._renderableTilesKeys){const _e=this._tiles[fe].tileID,we=re.clone(),Me=oe.ba();if(_e.canonical.equals(re.canonical))oe.bZ(Me,0,oe.$,oe.$,0,0,1);else if(_e.canonical.isChildOf(re.canonical)){const Fe=_e.canonical.z-re.canonical.z,Be=_e.canonical.x-(_e.canonical.x>>Fe<<Fe),$e=_e.canonical.y-(_e.canonical.y>>Fe<<Fe),We=oe.$>>Fe;oe.bZ(Me,0,We,We,0,0,1),oe.M(Me,Me,[-Be*We,-$e*We,0])}else{if(!re.canonical.isChildOf(_e.canonical))continue;{const Fe=re.canonical.z-_e.canonical.z,Be=re.canonical.x-(re.canonical.x>>Fe<<Fe),$e=re.canonical.y-(re.canonical.y>>Fe<<Fe),We=oe.$>>Fe;oe.bZ(Me,0,oe.$,oe.$,0,0,1),oe.M(Me,Me,[Be*We,$e*We,0]),oe.N(Me,Me,[1/2**Fe,1/2**Fe,0])}}we.terrainRttPosMatrix32f=new Float32Array(Me),he[fe]=we}return he}_getTerrainCoordsForTileRanges(re,he){const fe={};for(const _e of this._renderableTilesKeys){const we=this._tiles[_e].tileID;if(!this._isWithinTileRanges(we,he))continue;const Me=re.clone(),Fe=oe.ba();if(we.canonical.z===re.canonical.z){const Be=re.canonical.x-we.canonical.x,$e=re.canonical.y-we.canonical.y;oe.bZ(Fe,0,oe.$,oe.$,0,0,1),oe.M(Fe,Fe,[Be*oe.$,$e*oe.$,0])}else if(we.canonical.z>re.canonical.z){const Be=we.canonical.z-re.canonical.z,$e=we.canonical.x-(we.canonical.x>>Be<<Be),We=we.canonical.y-(we.canonical.y>>Be<<Be),Je=re.canonical.x-(we.canonical.x>>Be),Xe=re.canonical.y-(we.canonical.y>>Be),st=oe.$>>Be;oe.bZ(Fe,0,st,st,0,0,1),oe.M(Fe,Fe,[-$e*st+Je*oe.$,-We*st+Xe*oe.$,0])}else{const Be=re.canonical.z-we.canonical.z,$e=re.canonical.x-(re.canonical.x>>Be<<Be),We=re.canonical.y-(re.canonical.y>>Be<<Be),Je=(re.canonical.x>>Be)-we.canonical.x,Xe=(re.canonical.y>>Be)-we.canonical.y,st=oe.$<<Be;oe.bZ(Fe,0,st,st,0,0,1),oe.M(Fe,Fe,[$e*oe.$+Je*st,We*oe.$+Xe*st,0])}Me.terrainRttPosMatrix32f=new Float32Array(Fe),fe[_e]=Me}return fe}getSourceTile(re,he){const fe=this.sourceCache._source;let _e=re.overscaledZ-this.deltaZoom;if(_e>fe.maxzoom&&(_e=fe.maxzoom),_e<fe.minzoom)return null;this._sourceTileCache[re.key]||(this._sourceTileCache[re.key]=re.scaledTo(_e).key);let we=this.sourceCache.getTileByID(this._sourceTileCache[re.key]);if((!we||!we.dem)&&he)for(;_e>=fe.minzoom&&(!we||!we.dem);)we=this.sourceCache.getTileByID(re.scaledTo(_e--).key);return we}anyTilesAfterTime(re=Date.now()){return this._lastTilesetChange>=re}_isWithinTileRanges(re,he){return he[re.canonical.z]&&re.canonical.x>=he[re.canonical.z].minTileX&&re.canonical.x<=he[re.canonical.z].maxTileX&&re.canonical.y>=he[re.canonical.z].minTileY&&re.canonical.y<=he[re.canonical.z].maxTileY}}class bh{constructor(re,he,fe){this._meshCache={},this.painter=re,this.sourceCache=new es(he),this.options=fe,this.exaggeration=typeof fe.exaggeration=="number"?fe.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(re,he,fe,_e=oe.$){var we;if(!(he>=0&&he<_e&&fe>=0&&fe<_e))return 0;const Me=this.getTerrainData(re),Fe=(we=Me.tile)===null||we===void 0?void 0:we.dem;if(!Fe)return 0;const Be=oe.cs([],[he/_e*oe.$,fe/_e*oe.$],Me.u_terrain_matrix),$e=[Be[0]*Fe.dim,Be[1]*Fe.dim],We=Math.floor($e[0]),Je=Math.floor($e[1]),Xe=$e[0]-We,st=$e[1]-Je;return Fe.get(We,Je)*(1-Xe)*(1-st)+Fe.get(We+1,Je)*Xe*(1-st)+Fe.get(We,Je+1)*(1-Xe)*st+Fe.get(We+1,Je+1)*Xe*st}getElevationForLngLatZoom(re,he){if(!oe.ct(he,re.wrap()))return 0;const{tileID:fe,mercatorX:_e,mercatorY:we}=this._getOverscaledTileIDFromLngLatZoom(re,he);return this.getElevation(fe,_e%oe.$,we%oe.$,oe.$)}getElevation(re,he,fe,_e=oe.$){return this.getDEMElevation(re,he,fe,_e)*this.exaggeration}getTerrainData(re){if(!this._emptyDemTexture){const _e=this.painter.context,we=new oe.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new oe.T(_e,we,_e.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new oe.T(_e,new oe.R({width:1,height:1}),_e.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(_e.gl.NEAREST,_e.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=oe.ai([])}const he=this.sourceCache.getSourceTile(re,!0);if(he&&he.dem&&(!he.demTexture||he.needsTerrainPrepare)){const _e=this.painter.context;he.demTexture=this.painter.getTileTexture(he.dem.stride),he.demTexture?he.demTexture.update(he.dem.getPixels(),{premultiply:!1}):he.demTexture=new oe.T(_e,he.dem.getPixels(),_e.gl.RGBA,{premultiply:!1}),he.demTexture.bind(_e.gl.NEAREST,_e.gl.CLAMP_TO_EDGE),he.needsTerrainPrepare=!1}const fe=he&&he+he.tileID.key+re.key;if(fe&&!this._demMatrixCache[fe]){const _e=this.sourceCache.sourceCache._source.maxzoom;let we=re.canonical.z-he.tileID.canonical.z;re.overscaledZ>re.canonical.z&&(re.canonical.z>=_e?we=re.canonical.z-_e:oe.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const Me=re.canonical.x-(re.canonical.x>>we<<we),Fe=re.canonical.y-(re.canonical.y>>we<<we),Be=oe.cu(new Float64Array(16),[1/(oe.$<<we),1/(oe.$<<we),0]);oe.M(Be,Be,[Me*oe.$,Fe*oe.$,0]),this._demMatrixCache[re.key]={matrix:Be,coord:re}}return{u_depth:2,u_terrain:3,u_terrain_dim:he&&he.dem&&he.dem.dim||1,u_terrain_matrix:fe?this._demMatrixCache[re.key].matrix:this._emptyDemMatrix,u_terrain_unpack:he&&he.dem&&he.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(he&&he.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:he}}getFramebuffer(re){const he=this.painter,fe=he.width/devicePixelRatio,_e=he.height/devicePixelRatio;return!this._fbo||this._fbo.width===fe&&this._fbo.height===_e||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new oe.T(he.context,{width:fe,height:_e,data:null},he.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(he.context.gl.NEAREST,he.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new oe.T(he.context,{width:fe,height:_e,data:null},he.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(he.context.gl.NEAREST,he.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=he.context.createFramebuffer(fe,_e,!0,!1),this._fbo.depthAttachment.set(he.context.createRenderbuffer(he.context.gl.DEPTH_COMPONENT16,fe,_e))),this._fbo.colorAttachment.set(re==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const re=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const he=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let we=0,Me=0;we<this._coordsTextureSize;we++)for(let Fe=0;Fe<this._coordsTextureSize;Fe++,Me+=4)he[Me+0]=255&Fe,he[Me+1]=255&we,he[Me+2]=Fe>>8<<4|we>>8,he[Me+3]=0;const fe=new oe.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(he.buffer)),_e=new oe.T(re,fe,re.gl.RGBA,{premultiply:!1});return _e.bind(re.gl.NEAREST,re.gl.CLAMP_TO_EDGE),this._coordsTexture=_e,_e}pointCoordinate(re){this.painter.maybeDrawDepthAndCoords(!0);const he=new Uint8Array(4),fe=this.painter.context,_e=fe.gl,we=Math.round(re.x*this.painter.pixelRatio/devicePixelRatio),Me=Math.round(re.y*this.painter.pixelRatio/devicePixelRatio),Fe=Math.round(this.painter.height/devicePixelRatio);fe.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),_e.readPixels(we,Fe-Me-1,1,1,_e.RGBA,_e.UNSIGNED_BYTE,he),fe.bindFramebuffer.set(null);const Be=he[0]+(he[2]>>4<<8),$e=he[1]+((15&he[2])<<8),We=this.coordsIndex[255-he[3]],Je=We&&this.sourceCache.getTileByID(We);if(!Je)return null;const Xe=this._coordsTextureSize,st=(1<<Je.tileID.canonical.z)*Xe;return new oe.a1((Je.tileID.canonical.x*Xe+Be)/st+Je.tileID.wrap,(Je.tileID.canonical.y*Xe+$e)/st,this.getElevation(Je.tileID,Be,$e,Xe))}depthAtPoint(re){const he=new Uint8Array(4),fe=this.painter.context,_e=fe.gl;return fe.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),_e.readPixels(re.x,this.painter.height/devicePixelRatio-re.y-1,1,1,_e.RGBA,_e.UNSIGNED_BYTE,he),fe.bindFramebuffer.set(null),(he[0]/16777216+he[1]/65536+he[2]/256+he[3])/256}getTerrainMesh(re){var he;const fe=((he=this.painter.style.projection)===null||he===void 0?void 0:he.transitionState)>0,_e=fe&&re.canonical.y===0,we=fe&&re.canonical.y===(1<<re.canonical.z)-1,Me=`m_${_e?"n":""}_${we?"s":""}`;if(this._meshCache[Me])return this._meshCache[Me];const Fe=this.painter.context,Be=new oe.cv,$e=new oe.aN,We=this.meshSize,Je=oe.$/We,Xe=We*We;for(let Pt=0;Pt<=We;Pt++)for(let Nt=0;Nt<=We;Nt++)Be.emplaceBack(Nt*Je,Pt*Je,0);for(let Pt=0;Pt<Xe;Pt+=We+1)for(let Nt=0;Nt<We;Nt++)$e.emplaceBack(Nt+Pt,We+Nt+Pt+1,We+Nt+Pt+2),$e.emplaceBack(Nt+Pt,We+Nt+Pt+2,Nt+Pt+1);const st=Be.length,ht=st+(We+1),vt=(We+1)*We,bt=_e?oe.bh:0,xt=_e?0:1,Ct=we?oe.bi:oe.$,kt=we?0:1;for(let Pt=0;Pt<=We;Pt++)Be.emplaceBack(Pt*Je,bt,xt);for(let Pt=0;Pt<=We;Pt++)Be.emplaceBack(Pt*Je,Ct,kt);for(let Pt=0;Pt<We;Pt++)$e.emplaceBack(vt+Pt,ht+Pt,ht+Pt+1),$e.emplaceBack(vt+Pt,ht+Pt+1,vt+Pt+1),$e.emplaceBack(0+Pt,st+Pt+1,st+Pt),$e.emplaceBack(0+Pt,0+Pt+1,st+Pt+1);const Tt=Be.length,Lt=Tt+2*(We+1);for(const Pt of[0,1])for(let Nt=0;Nt<=We;Nt++)for(const Yt of[0,1])Be.emplaceBack(Pt*oe.$,Nt*Je,Yt);for(let Pt=0;Pt<2*We;Pt+=2)$e.emplaceBack(Tt+Pt,Tt+Pt+1,Tt+Pt+3),$e.emplaceBack(Tt+Pt,Tt+Pt+3,Tt+Pt+2),$e.emplaceBack(Lt+Pt,Lt+Pt+3,Lt+Pt+1),$e.emplaceBack(Lt+Pt,Lt+Pt+2,Lt+Pt+3);const Rt=new Yn(Fe.createVertexBuffer(Be,vh.members),Fe.createIndexBuffer($e),oe.aM.simpleSegment(0,0,Be.length,$e.length));return this._meshCache[Me]=Rt,Rt}getMeshFrameDelta(re){return 2*Math.PI*oe.bu/Math.pow(2,Math.max(re,0))/5}getMinTileElevationForLngLatZoom(re,he){var fe;const{tileID:_e}=this._getOverscaledTileIDFromLngLatZoom(re,he);return(fe=this.getMinMaxElevation(_e).minElevation)!==null&&fe!==void 0?fe:0}getMinMaxElevation(re){const he=this.getTerrainData(re).tile,fe={minElevation:null,maxElevation:null};return he&&he.dem&&(fe.minElevation=he.dem.min*this.exaggeration,fe.maxElevation=he.dem.max*this.exaggeration),fe}_getOverscaledTileIDFromLngLatZoom(re,he){const fe=oe.a1.fromLngLat(re.wrap()),_e=(1<<he)*oe.$,we=fe.x*_e,Me=fe.y*_e,Fe=Math.floor(we/oe.$),Be=Math.floor(Me/oe.$);return{tileID:new oe.Z(he,0,he,Fe,Be),mercatorX:we,mercatorY:Me}}}class hu{constructor(re,he,fe){this._context=re,this._size=he,this._tileSize=fe,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const re of this._objects)re.texture.destroy(),re.fbo.destroy()}_createObject(re){const he=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),fe=new oe.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return fe.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),he.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),he.colorAttachment.set(fe.texture),{id:re,fbo:he,texture:fe,stamp:-1,inUse:!1}}getObjectForId(re){return this._objects[re]}useObject(re){re.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(he=>re.id!==he),this._recentlyUsed.push(re.id)}stampObject(re){re.stamp=++this._stamp}getOrCreateFreeObject(){for(const he of this._recentlyUsed)if(!this._objects[he].inUse)return this._objects[he];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const re=this._createObject(this._objects.length);return this._objects.push(re),re}freeObject(re){re.inUse=!1}freeAllObjects(){for(const re of this._objects)this.freeObject(re)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(re=>!re.inUse)===!1}}const Co={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class uu{constructor(re,he){this.painter=re,this.terrain=he,this.pool=new hu(re.context,30,he.sourceCache.tileSize*he.qualityFactor)}destruct(){this.pool.destruct()}getTexture(re){return this.pool.getObjectForId(re.rtt[this._stacks.length-1].id).texture}prepareForRender(re,he){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=re._order.filter(fe=>!re._layers[fe].isHidden(he)),this._coordsAscending={};for(const fe in re.sourceCaches){this._coordsAscending[fe]={};const _e=re.sourceCaches[fe].getVisibleCoordinates(),we=re.sourceCaches[fe].getSource(),Me=we instanceof ri?we.terrainTileRanges:null;for(const Fe of _e){const Be=this.terrain.sourceCache.getTerrainCoords(Fe,Me);for(const $e in Be)this._coordsAscending[fe][$e]||(this._coordsAscending[fe][$e]=[]),this._coordsAscending[fe][$e].push(Be[$e])}}this._coordsAscendingStr={};for(const fe of re._order){const _e=re._layers[fe],we=_e.source;if(Co[_e.type]&&!this._coordsAscendingStr[we]){this._coordsAscendingStr[we]={};for(const Me in this._coordsAscending[we])this._coordsAscendingStr[we][Me]=this._coordsAscending[we][Me].map(Fe=>Fe.key).sort().join()}}for(const fe of this._renderableTiles)for(const _e in this._coordsAscendingStr){const we=this._coordsAscendingStr[_e][fe.tileID.key];we&&we!==fe.rttCoords[_e]&&(fe.rtt=[])}}renderLayer(re,he){if(re.isHidden(this.painter.transform.zoom))return!1;const fe=Object.assign(Object.assign({},he),{isRenderingToTexture:!0}),_e=re.type,we=this.painter,Me=this._renderableLayerIds[this._renderableLayerIds.length-1]===re.id;if(Co[_e]&&(this._prevType&&Co[this._prevType]||this._stacks.push([]),this._prevType=_e,this._stacks[this._stacks.length-1].push(re.id),!Me))return!0;if(Co[this._prevType]||Co[_e]&&Me){this._prevType=_e;const Fe=this._stacks.length-1,Be=this._stacks[Fe]||[];for(const $e of this._renderableTiles){if(this.pool.isFull()&&($l(this.painter,this.terrain,this._rttTiles,fe),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push($e),$e.rtt[Fe]){const Je=this.pool.getObjectForId($e.rtt[Fe].id);if(Je.stamp===$e.rtt[Fe].stamp){this.pool.useObject(Je);continue}}const We=this.pool.getOrCreateFreeObject();this.pool.useObject(We),this.pool.stampObject(We),$e.rtt[Fe]={id:We.id,stamp:We.stamp},we.context.bindFramebuffer.set(We.fbo.framebuffer),we.context.clear({color:oe.bf.transparent,stencil:0}),we.currentStencilSource=void 0;for(let Je=0;Je<Be.length;Je++){const Xe=we.style._layers[Be[Je]],st=Xe.source?this._coordsAscending[Xe.source][$e.tileID.key]:[$e.tileID];we.context.viewport.set([0,0,We.fbo.width,We.fbo.height]),we._renderTileClippingMasks(Xe,st,!0),we.renderLayer(we,we.style.sourceCaches[Xe.source],Xe,st,fe),Xe.source&&($e.rttCoords[Xe.source]=this._coordsAscendingStr[Xe.source][$e.tileID.key])}}return $l(this.painter,this.terrain,this._rttTiles,fe),this._rttTiles=[],this.pool.freeAllObjects(),Co[_e]}return!1}}const Zo={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Hi=me,Ki={hash:!1,interactive:!0,bearingSnap:7,attributionControl:To,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:oe.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,transformConstrain:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},xh={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Xo{constructor(re,he,fe=!1){this.mousedown=we=>{this.startMove(we,Ce.mousePos(this.element,we)),Ce.addEventListener(window,"mousemove",this.mousemove),Ce.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=we=>{this.move(we,Ce.mousePos(this.element,we))},this.mouseup=we=>{this._rotatePitchHandler.dragEnd(we),this.offTemp()},this.touchstart=we=>{we.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=Ce.touchPos(this.element,we.targetTouches)[0],this.startMove(we,this._startPos),Ce.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),Ce.addEventListener(window,"touchend",this.touchend))},this.touchmove=we=>{we.targetTouches.length!==1?this.reset():(this._lastPos=Ce.touchPos(this.element,we.targetTouches)[0],this.move(we,this._lastPos))},this.touchend=we=>{we.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=he;const _e=new Ho;this._rotatePitchHandler=new ms({clickTolerance:3,move:(we,Me)=>{const Fe=he.getBoundingClientRect(),Be=new oe.P((Fe.bottom-Fe.top)/2,(Fe.right-Fe.left)/2);return{bearingDelta:oe.cn(new oe.P(we.x,Me.y),Me,Be),pitchDelta:fe?-.5*(Me.y-we.y):void 0}},moveStateManager:_e,enable:!0,assignEvents:()=>{}}),this.map=re,Ce.addEventListener(he,"mousedown",this.mousedown),Ce.addEventListener(he,"touchstart",this.touchstart,{passive:!1}),Ce.addEventListener(he,"touchcancel",this.reset)}startMove(re,he){this._rotatePitchHandler.dragStart(re,he),Ce.disableDrag()}move(re,he){const fe=this.map,{bearingDelta:_e,pitchDelta:we}=this._rotatePitchHandler.dragMove(re,he)||{};_e&&fe.setBearing(fe.getBearing()+_e),we&&fe.setPitch(fe.getPitch()+we)}off(){const re=this.element;Ce.removeEventListener(re,"mousedown",this.mousedown),Ce.removeEventListener(re,"touchstart",this.touchstart,{passive:!1}),Ce.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),Ce.removeEventListener(window,"touchend",this.touchend),Ce.removeEventListener(re,"touchcancel",this.reset),this.offTemp()}offTemp(){Ce.enableDrag(),Ce.removeEventListener(window,"mousemove",this.mousemove),Ce.removeEventListener(window,"mouseup",this.mouseup),Ce.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),Ce.removeEventListener(window,"touchend",this.touchend)}}let ds;function Ha(be,re,he,fe=!1){if(fe||!he.getCoveringTilesDetailsProvider().allowWorldCopies())return be==null?void 0:be.wrap();const _e=new oe.S(be.lng,be.lat);if(be=new oe.S(be.lng,be.lat),re){const we=new oe.S(be.lng-360,be.lat),Me=new oe.S(be.lng+360,be.lat),Fe=he.locationToScreenPoint(be).distSqr(re);he.locationToScreenPoint(we).distSqr(re)<Fe?be=we:he.locationToScreenPoint(Me).distSqr(re)<Fe&&(be=Me)}for(;Math.abs(be.lng-he.center.lng)>180;){const we=he.locationToScreenPoint(be);if(we.x>=0&&we.y>=0&&we.x<=he.width&&we.y<=he.height)break;be.lng>he.center.lng?be.lng-=360:be.lng+=360}return be.lng!==_e.lng&&he.isPointOnMapSurface(he.locationToScreenPoint(be))?be:_e}const Yo={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ua(be,re,he){const fe=be.classList;for(const _e in Yo)fe.remove(`maplibregl-${he}-anchor-${_e}`);fe.add(`maplibregl-${he}-anchor-${re}`)}class Hs extends oe.E{constructor(re){if(super(),this._onKeyPress=he=>{const fe=he.code,_e=he.charCode||he.keyCode;fe!=="Space"&&fe!=="Enter"&&_e!==32&&_e!==13||this.togglePopup()},this._onMapClick=he=>{const fe=he.originalEvent.target,_e=this._element;this._popup&&(fe===_e||_e.contains(fe))&&this.togglePopup()},this._update=he=>{if(!this._map)return;const fe=this._map.loaded()&&!this._map.isMoving();((he==null?void 0:he.type)==="terrain"||(he==null?void 0:he.type)==="render"&&!fe)&&this._map.once("render",this._update),this._lngLat=Ha(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let _e="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?_e=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(_e=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let we="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?we="rotateX(0deg)":this._pitchAlignment==="map"&&(we=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||he&&he.type!=="moveend"||(this._pos=this._pos.round()),Ce.setTransform(this._element,`${Yo[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${we} ${_e}`),ye.frameAsync(new AbortController).then(()=>{this._updateOpacity(he&&he.type==="moveend")}).catch(()=>{})},this._onMove=he=>{if(!this._isDragging){const fe=this._clickTolerance||this._map._clickTolerance;this._isDragging=he.point.dist(this._pointerdownPos)>=fe}this._isDragging&&(this._pos=he.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new oe.l("dragstart"))),this.fire(new oe.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new oe.l("dragend")),this._state="inactive"},this._addDragHandler=he=>{this._element.contains(he.originalEvent.target)&&(he.preventDefault(),this._positionDelta=he.point.sub(this._pos).add(this._offset),this._pointerdownPos=he.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=re&&re.anchor||"center",this._color=re&&re.color||"#3FB1CE",this._scale=re&&re.scale||1,this._draggable=re&&re.draggable||!1,this._clickTolerance=re&&re.clickTolerance||0,this._subpixelPositioning=re&&re.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=re&&re.rotation||0,this._rotationAlignment=re&&re.rotationAlignment||"auto",this._pitchAlignment=re&&re.pitchAlignment&&re.pitchAlignment!=="auto"?re.pitchAlignment:this._rotationAlignment,this.setOpacity(re==null?void 0:re.opacity,re==null?void 0:re.opacityWhenCovered),re&&re.element)this._element=re.element,this._offset=oe.P.convert(re&&re.offset||[0,0]);else{this._defaultMarker=!0,this._element=Ce.create("div");const he=Ce.createNS("http://www.w3.org/2000/svg","svg"),fe=41,_e=27;he.setAttributeNS(null,"display","block"),he.setAttributeNS(null,"height",`${fe}px`),he.setAttributeNS(null,"width",`${_e}px`),he.setAttributeNS(null,"viewBox",`0 0 ${_e} ${fe}`);const we=Ce.createNS("http://www.w3.org/2000/svg","g");we.setAttributeNS(null,"stroke","none"),we.setAttributeNS(null,"stroke-width","1"),we.setAttributeNS(null,"fill","none"),we.setAttributeNS(null,"fill-rule","evenodd");const Me=Ce.createNS("http://www.w3.org/2000/svg","g");Me.setAttributeNS(null,"fill-rule","nonzero");const Fe=Ce.createNS("http://www.w3.org/2000/svg","g");Fe.setAttributeNS(null,"transform","translate(3.0, 29.0)"),Fe.setAttributeNS(null,"fill","#000000");const Be=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const xt of Be){const Ct=Ce.createNS("http://www.w3.org/2000/svg","ellipse");Ct.setAttributeNS(null,"opacity","0.04"),Ct.setAttributeNS(null,"cx","10.5"),Ct.setAttributeNS(null,"cy","5.80029008"),Ct.setAttributeNS(null,"rx",xt.rx),Ct.setAttributeNS(null,"ry",xt.ry),Fe.appendChild(Ct)}const $e=Ce.createNS("http://www.w3.org/2000/svg","g");$e.setAttributeNS(null,"fill",this._color);const We=Ce.createNS("http://www.w3.org/2000/svg","path");We.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),$e.appendChild(We);const Je=Ce.createNS("http://www.w3.org/2000/svg","g");Je.setAttributeNS(null,"opacity","0.25"),Je.setAttributeNS(null,"fill","#000000");const Xe=Ce.createNS("http://www.w3.org/2000/svg","path");Xe.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Je.appendChild(Xe);const st=Ce.createNS("http://www.w3.org/2000/svg","g");st.setAttributeNS(null,"transform","translate(6.0, 7.0)"),st.setAttributeNS(null,"fill","#FFFFFF");const ht=Ce.createNS("http://www.w3.org/2000/svg","g");ht.setAttributeNS(null,"transform","translate(8.0, 8.0)");const vt=Ce.createNS("http://www.w3.org/2000/svg","circle");vt.setAttributeNS(null,"fill","#000000"),vt.setAttributeNS(null,"opacity","0.25"),vt.setAttributeNS(null,"cx","5.5"),vt.setAttributeNS(null,"cy","5.5"),vt.setAttributeNS(null,"r","5.4999962");const bt=Ce.createNS("http://www.w3.org/2000/svg","circle");bt.setAttributeNS(null,"fill","#FFFFFF"),bt.setAttributeNS(null,"cx","5.5"),bt.setAttributeNS(null,"cy","5.5"),bt.setAttributeNS(null,"r","5.4999962"),ht.appendChild(vt),ht.appendChild(bt),Me.appendChild(Fe),Me.appendChild($e),Me.appendChild(Je),Me.appendChild(st),Me.appendChild(ht),he.appendChild(Me),he.setAttributeNS(null,"height",fe*this._scale+"px"),he.setAttributeNS(null,"width",_e*this._scale+"px"),this._element.appendChild(he),this._offset=oe.P.convert(re&&re.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",he=>{he.preventDefault()}),this._element.addEventListener("mousedown",he=>{he.preventDefault()}),Ua(this._element,this._anchor,"marker"),re&&re.className)for(const he of re.className.split(" "))this._element.classList.add(he);this._popup=null}addTo(re){return this.remove(),this._map=re,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",re._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),re.getCanvasContainer().appendChild(this._element),re.on("move",this._update),re.on("moveend",this._update),re.on("terrain",this._update),re.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),Ce.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(re){return this._lngLat=oe.S.convert(re),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(re){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),re){if(!("offset"in re.options)){const _e=Math.abs(13.5)/Math.SQRT2;re.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[_e,-1*(38.1-13.5+_e)],"bottom-right":[-_e,-1*(38.1-13.5+_e)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=re,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(re){return this._subpixelPositioning=re,this}getPopup(){return this._popup}togglePopup(){const re=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:re?(re.isOpen()?re.remove():(re.setLngLat(this._lngLat),re.addTo(this._map)),this):this}_updateOpacity(re=!1){var he,fe;const _e=(he=this._map)===null||he===void 0?void 0:he.terrain,we=this._map.transform.isLocationOccluded(this._lngLat);if(!_e||we){const st=we?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==st&&(this._element.style.opacity=st))}if(re)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const Me=this._map,Fe=Me.terrain.depthAtPoint(this._pos),Be=Me.terrain.getElevationForLngLatZoom(this._lngLat,Me.transform.tileZoom);if(Me.transform.lngLatToCameraDepth(this._lngLat,Be)-Fe<.006)return void(this._element.style.opacity=this._opacity);const $e=-this._offset.y/Me.transform.pixelsPerMeter,We=Math.sin(Me.getPitch()*Math.PI/180)*$e,Je=Me.terrain.depthAtPoint(new oe.P(this._pos.x,this._pos.y-this._offset.y)),Xe=Me.transform.lngLatToCameraDepth(this._lngLat,Be+We)-Je>.006;((fe=this._popup)===null||fe===void 0?void 0:fe.isOpen())&&Xe&&this._popup.remove(),this._element.style.opacity=Xe?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(re){return this._offset=oe.P.convert(re),this._update(),this}addClassName(re){this._element.classList.add(re)}removeClassName(re){this._element.classList.remove(re)}toggleClassName(re){return this._element.classList.toggle(re)}setDraggable(re){return this._draggable=!!re,this._map&&(re?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(re){return this._rotation=re||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(re){return this._rotationAlignment=re||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(re){return this._pitchAlignment=re&&re!=="auto"?re:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(re,he){return(this._opacity===void 0||re===void 0&&he===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),re!==void 0&&(this._opacity=re),he!==void 0&&(this._opacityWhenCovered=he),this._map&&this._updateOpacity(!0),this}}const Kl={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Po=0,Us=!1;const Jl={maxWidth:100,unit:"metric"};function Za(be,re,he){const fe=he&&he.maxWidth||100,_e=be._container.clientHeight/2,we=be._container.clientWidth/2,Me=be.unproject([we-fe/2,_e]),Fe=be.unproject([we+fe/2,_e]),Be=Math.round(be.project(Fe).x-be.project(Me).x),$e=Math.min(fe,Be,be._container.clientWidth),We=Me.distanceTo(Fe);if(he&&he.unit==="imperial"){const Je=3.2808*We;Je>5280?Zs(re,$e,Je/5280,be._getUIString("ScaleControl.Miles")):Zs(re,$e,Je,be._getUIString("ScaleControl.Feet"))}else he&&he.unit==="nautical"?Zs(re,$e,We/1852,be._getUIString("ScaleControl.NauticalMiles")):We>=1e3?Zs(re,$e,We/1e3,be._getUIString("ScaleControl.Kilometers")):Zs(re,$e,We,be._getUIString("ScaleControl.Meters"))}function Zs(be,re,he,fe){const _e=function(we){const Me=Math.pow(10,`${Math.floor(we)}`.length-1);let Fe=we/Me;return Fe=Fe>=10?10:Fe>=5?5:Fe>=3?3:Fe>=2?2:Fe>=1?1:function(Be){const $e=Math.pow(10,Math.ceil(-Math.log(Be)/Math.LN10));return Math.round(Be*$e)/$e}(Fe),Me*Fe}(he);be.style.width=re*(_e/he)+"px",be.innerHTML=`${_e}&nbsp;${fe}`}const Ql={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},ec=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Xa(be){if(be){if(typeof be=="number"){const re=Math.round(Math.abs(be)/Math.SQRT2);return{center:new oe.P(0,0),top:new oe.P(0,be),"top-left":new oe.P(re,re),"top-right":new oe.P(-re,re),bottom:new oe.P(0,-be),"bottom-left":new oe.P(re,-re),"bottom-right":new oe.P(-re,-re),left:new oe.P(be,0),right:new oe.P(-be,0)}}if(be instanceof oe.P||Array.isArray(be)){const re=oe.P.convert(be);return{center:re,top:re,"top-left":re,"top-right":re,bottom:re,"bottom-left":re,"bottom-right":re,left:re,right:re}}return{center:oe.P.convert(be.center||[0,0]),top:oe.P.convert(be.top||[0,0]),"top-left":oe.P.convert(be["top-left"]||[0,0]),"top-right":oe.P.convert(be["top-right"]||[0,0]),bottom:oe.P.convert(be.bottom||[0,0]),"bottom-left":oe.P.convert(be["bottom-left"]||[0,0]),"bottom-right":oe.P.convert(be["bottom-right"]||[0,0]),left:oe.P.convert(be.left||[0,0]),right:oe.P.convert(be.right||[0,0])}}return Xa(new oe.P(0,0))}const Ya=me;de.AJAXError=oe.cz,de.Event=oe.l,de.Evented=oe.E,de.LngLat=oe.S,de.MercatorCoordinate=oe.a1,de.Point=oe.P,de.addProtocol=oe.cA,de.config=oe.a,de.removeProtocol=oe.cB,de.AttributionControl=Yl,de.BoxZoomHandler=lh,de.CanvasSource=Ei,de.CooperativeGesturesHandler=Xl,de.DoubleClickZoomHandler=Li,de.DragPanHandler=Wa,de.DragRotateHandler=Ul,de.EdgeInsets=xn,de.FullscreenControl=class extends oe.E{constructor(be={}){super(),this._onFullscreenChange=()=>{var re;let he=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((re=he==null?void 0:he.shadowRoot)===null||re===void 0)&&re.fullscreenElement;)he=he.shadowRoot.fullscreenElement;he===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,be&&be.container&&(be.container instanceof HTMLElement?this._container=be.container:oe.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(be){return this._map=be,this._container||(this._container=this._map.getContainer()),this._controlContainer=Ce.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){Ce.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const be=this._fullscreenButton=Ce.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);Ce.create("span","maplibregl-ctrl-icon",be).setAttribute("aria-hidden","true"),be.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const be=this._getTitle();this._fullscreenButton.setAttribute("aria-label",be),this._fullscreenButton.title=be}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new oe.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new oe.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},de.GeoJSONSource=hi,de.GeolocateControl=class extends oe.E{constructor(be){super(),this._onSuccess=re=>{if(this._map){if(this._isOutOfMapMaxBounds(re))return this._setErrorState(),this.fire(new oe.l("outofmaxbounds",re)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=re,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(re),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(re),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new oe.l("geolocate",re)),this._finish()}},this._updateCamera=re=>{const he=new oe.S(re.coords.longitude,re.coords.latitude),fe=re.coords.accuracy,_e=this._map.getBearing(),we=oe.e({bearing:_e},this.options.fitBoundsOptions),Me=qr.fromLngLat(he,fe);this._map.fitBounds(Me,we,{geolocateSource:!0})},this._updateMarker=re=>{if(re){const he=new oe.S(re.coords.longitude,re.coords.latitude);this._accuracyCircleMarker.setLngLat(he).addTo(this._map),this._userLocationDotMarker.setLngLat(he).addTo(this._map),this._accuracy=re.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=re=>{if(this._map){if(re.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const he=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=he,this._geolocateButton.setAttribute("aria-label",he),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(re.code===3&&Us)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new oe.l("error",re)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",re=>re.preventDefault()),this._geolocateButton=Ce.create("button","maplibregl-ctrl-geolocate",this._container),Ce.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=re=>{if(this._map){if(re===!1){oe.w("Geolocation support is not available so the GeolocateControl will be disabled.");const he=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=he,this._geolocateButton.setAttribute("aria-label",he)}else{const he=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=he,this._geolocateButton.setAttribute("aria-label",he)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Ce.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Hs({element:this._dotElement}),this._circleElement=Ce.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Hs({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",he=>{const fe=(he==null?void 0:he[0])instanceof ResizeObserverEntry;he.geolocateSource||this._watchState!=="ACTIVE_LOCK"||fe||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new oe.l("trackuserlocationend")),this.fire(new oe.l("userlocationlostfocus")))})}},this.options=oe.e({},Kl,be)}onAdd(be){return this._map=be,this._container=Ce.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return oe._(this,arguments,void 0,function*(re=!1){if(ds!==void 0&&!re)return ds;if(window.navigator.permissions===void 0)return ds=!!window.navigator.geolocation,ds;try{ds=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{ds=!!window.navigator.geolocation}return ds})}().then(re=>this._finishSetupUI(re)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),Ce.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,Po=0,Us=!1}_isOutOfMapMaxBounds(be){const re=this._map.getMaxBounds(),he=be.coords;return re&&(he.longitude<re.getWest()||he.longitude>re.getEast()||he.latitude<re.getSouth()||he.latitude>re.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const be=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&be))return;const re=this._map.project(be),he=this._map.unproject([re.x+100,re.y]),fe=be.distanceTo(he)/100,_e=2*this._accuracy/fe;this._circleElement.style.width=`${_e.toFixed(2)}px`,this._circleElement.style.height=`${_e.toFixed(2)}px`}trigger(){if(!this._setup)return oe.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new oe.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Po--,Us=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new oe.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new oe.l("trackuserlocationstart")),this.fire(new oe.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let be;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Po++,Po>1?(be={maximumAge:6e5,timeout:0},Us=!0):(be=this.options.positionOptions,Us=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,be)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},de.GlobeControl=class{constructor(){this._toggleProjection=()=>{var be;const re=(be=this._map.getProjection())===null||be===void 0?void 0:be.type;this._map.setProjection(re!=="mercator"&&re?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var be;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((be=this._map.getProjection())===null||be===void 0?void 0:be.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(be){return this._map=be,this._container=Ce.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=Ce.create("button","maplibregl-ctrl-globe",this._container),Ce.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){Ce.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},de.Hash=Cs,de.ImageSource=ri,de.KeyboardHandler=gh,de.LngLatBounds=qr,de.LogoControl=Uo,de.Map=class extends Ur{constructor(be){var re,he;oe.cw.mark(oe.cx.create);const fe=Object.assign(Object.assign(Object.assign({},Ki),be),{canvasContextAttributes:Object.assign(Object.assign({},Ki.canvasContextAttributes),be.canvasContextAttributes)});if(fe.minZoom!=null&&fe.maxZoom!=null&&fe.minZoom>fe.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(fe.minPitch!=null&&fe.maxPitch!=null&&fe.minPitch>fe.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(fe.minPitch!=null&&fe.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(fe.maxPitch!=null&&fe.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const _e=new Sn,we=new Gi;if(fe.minZoom!==void 0&&_e.setMinZoom(fe.minZoom),fe.maxZoom!==void 0&&_e.setMaxZoom(fe.maxZoom),fe.minPitch!==void 0&&_e.setMinPitch(fe.minPitch),fe.maxPitch!==void 0&&_e.setMaxPitch(fe.maxPitch),fe.renderWorldCopies!==void 0&&_e.setRenderWorldCopies(fe.renderWorldCopies),fe.transformConstrain!==null&&_e.setConstrain(fe.transformConstrain),super(_e,we,{bearingSnap:fe.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Fn,this._controls=[],this._mapId=oe.a7(),this._contextLost=Fe=>{Fe.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new oe.l("webglcontextlost",{originalEvent:Fe}))},this._contextRestored=Fe=>{this._setupPainter(),this.resize(),this._update(),this.fire(new oe.l("webglcontextrestored",{originalEvent:Fe}))},this._onMapScroll=Fe=>{if(Fe.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=fe.interactive,this._maxTileCacheSize=fe.maxTileCacheSize,this._maxTileCacheZoomLevels=fe.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},fe.canvasContextAttributes),this._trackResize=fe.trackResize===!0,this._bearingSnap=fe.bearingSnap,this._centerClampedToGround=fe.centerClampedToGround,this._refreshExpiredTiles=fe.refreshExpiredTiles===!0,this._fadeDuration=fe.fadeDuration,this._crossSourceCollisions=fe.crossSourceCollisions===!0,this._collectResourceTiming=fe.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Zo),fe.locale),this._clickTolerance=fe.clickTolerance,this._overridePixelRatio=fe.pixelRatio,this._maxCanvasSize=fe.maxCanvasSize,this.transformCameraUpdate=fe.transformCameraUpdate,this.transformConstrain=fe.transformConstrain,this.cancelPendingTileRequestsWhileZooming=fe.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=Ze.addThrottleControl(()=>this.isMoving()),this._requestManager=new Ue(fe.transformRequest),typeof fe.container=="string"){if(this._container=document.getElementById(fe.container),!this._container)throw new Error(`Container '${fe.container}' not found.`)}else{if(!(fe.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=fe.container}if(fe.maxBounds&&this.setMaxBounds(fe.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window!="undefined"){addEventListener("online",this._onWindowOnline,!1);let Fe=!1;const Be=jl($e=>{this._trackResize&&!this._removed&&(this.resize($e),this.redraw())},50);this._resizeObserver=new ResizeObserver($e=>{Fe?Be($e):Fe=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Vr(this,fe),this._hash=fe.hash&&new Cs(typeof fe.hash=="string"&&fe.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:fe.center,elevation:fe.elevation,zoom:fe.zoom,bearing:fe.bearing,pitch:fe.pitch,roll:fe.roll}),fe.bounds&&(this.resize(),this.fitBounds(fe.bounds,oe.e({},fe.fitBoundsOptions,{duration:0}))));const Me=typeof fe.style=="string"||((he=(re=fe.style)===null||re===void 0?void 0:re.projection)===null||he===void 0?void 0:he.type)!=="globe";this.resize(null,Me),this._localIdeographFontFamily=fe.localIdeographFontFamily,this._validateStyle=fe.validateStyle,fe.style&&this.setStyle(fe.style,{localIdeographFontFamily:fe.localIdeographFontFamily}),fe.attributionControl&&this.addControl(new Yl(typeof fe.attributionControl=="boolean"?void 0:fe.attributionControl)),fe.maplibreLogo&&this.addControl(new Uo,fe.logoPosition),this.on("style.load",()=>{if(Me||this._resizeTransform(),this.transform.unmodified){const Fe=oe.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(Fe)}}),this.on("data",Fe=>{this._update(Fe.dataType==="style"),this.fire(new oe.l(`${Fe.dataType}data`,Fe))}),this.on("dataloading",Fe=>{this.fire(new oe.l(`${Fe.dataType}dataloading`,Fe))}),this.on("dataabort",Fe=>{this.fire(new oe.l("sourcedataabort",Fe))})}_getMapId(){return this._mapId}setGlobalStateProperty(be,re){return this.style.setGlobalStateProperty(be,re),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(be,re){if(re===void 0&&(re=be.getDefaultPosition?be.getDefaultPosition():"top-right"),!be||!be.onAdd)return this.fire(new oe.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const he=be.onAdd(this);this._controls.push(be);const fe=this._controlPositions[re];return re.indexOf("bottom")!==-1?fe.insertBefore(he,fe.firstChild):fe.appendChild(he),this}removeControl(be){if(!be||!be.onRemove)return this.fire(new oe.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const re=this._controls.indexOf(be);return re>-1&&this._controls.splice(re,1),be.onRemove(this),this}hasControl(be){return this._controls.indexOf(be)>-1}coveringTiles(be){return kr(this.transform,be)}calculateCameraOptionsFromTo(be,re,he,fe){return fe==null&&this.terrain&&(fe=this.terrain.getElevationForLngLatZoom(he,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(be,re,he,fe)}resize(be,re=!0){const[he,fe]=this._containerDimensions(),_e=this._getClampedPixelRatio(he,fe);if(this._resizeCanvas(he,fe,_e),this.painter.resize(he,fe,_e),this.painter.overLimit()){const Me=this.painter.context.gl;this._maxCanvasSize=[Me.drawingBufferWidth,Me.drawingBufferHeight];const Fe=this._getClampedPixelRatio(he,fe);this._resizeCanvas(he,fe,Fe),this.painter.resize(he,fe,Fe)}this._resizeTransform(re);const we=!this._moving;return we&&(this.stop(),this.fire(new oe.l("movestart",be)).fire(new oe.l("move",be))),this.fire(new oe.l("resize",be)),we&&this.fire(new oe.l("moveend",be)),this}_resizeTransform(be=!0){var re;const[he,fe]=this._containerDimensions();this.transform.resize(he,fe,be),(re=this._requestedCameraState)===null||re===void 0||re.resize(he,fe,be)}_getClampedPixelRatio(be,re){const{0:he,1:fe}=this._maxCanvasSize,_e=this.getPixelRatio(),we=be*_e,Me=re*_e;return Math.min(we>he?he/we:1,Me>fe?fe/Me:1)*_e}getPixelRatio(){var be;return(be=this._overridePixelRatio)!==null&&be!==void 0?be:devicePixelRatio}setPixelRatio(be){this._overridePixelRatio=be,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(be){return this.transform.setMaxBounds(qr.convert(be)),this._update()}setMinZoom(be){if((be=be==null?-2:be)>=-2&&be<=this.transform.maxZoom)return this.transform.setMinZoom(be),this._update(),this.getZoom()<be&&this.setZoom(be),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(be){if((be=be==null?22:be)>=this.transform.minZoom)return this.transform.setMaxZoom(be),this._update(),this.getZoom()>be&&this.setZoom(be),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(be){if((be=be==null?0:be)<0)throw new Error("minPitch must be greater than or equal to 0");if(be>=0&&be<=this.transform.maxPitch)return this.transform.setMinPitch(be),this._update(),this.getPitch()<be&&this.setPitch(be),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(be){if((be=be==null?60:be)>180)throw new Error("maxPitch must be less than or equal to 180");if(be>=this.transform.minPitch)return this.transform.setMaxPitch(be),this._update(),this.getPitch()>be&&this.setPitch(be),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(be){return this.transform.setRenderWorldCopies(be),this._update()}setTransformConstrain(be){return this.transform.setConstrain(be),this._update()}project(be){return this.transform.locationToScreenPoint(oe.S.convert(be),this.style&&this.terrain)}unproject(be){return this.transform.screenPointToLocation(oe.P.convert(be),this.terrain)}isMoving(){var be;return this._moving||((be=this.handlers)===null||be===void 0?void 0:be.isMoving())}isZooming(){var be;return this._zooming||((be=this.handlers)===null||be===void 0?void 0:be.isZooming())}isRotating(){var be;return this._rotating||((be=this.handlers)===null||be===void 0?void 0:be.isRotating())}_createDelegatedListener(be,re,he){if(be==="mouseenter"||be==="mouseover"){let fe=!1;return{layers:re,listener:he,delegates:{mousemove:we=>{const Me=re.filter(Be=>this.getLayer(Be)),Fe=Me.length!==0?this.queryRenderedFeatures(we.point,{layers:Me}):[];Fe.length?fe||(fe=!0,he.call(this,new Vn(be,this,we.originalEvent,{features:Fe}))):fe=!1},mouseout:()=>{fe=!1}}}}if(be==="mouseleave"||be==="mouseout"){let fe=!1;return{layers:re,listener:he,delegates:{mousemove:Me=>{const Fe=re.filter(Be=>this.getLayer(Be));(Fe.length!==0?this.queryRenderedFeatures(Me.point,{layers:Fe}):[]).length?fe=!0:fe&&(fe=!1,he.call(this,new Vn(be,this,Me.originalEvent)))},mouseout:Me=>{fe&&(fe=!1,he.call(this,new Vn(be,this,Me.originalEvent)))}}}}{const fe=_e=>{const we=re.filter(Fe=>this.getLayer(Fe)),Me=we.length!==0?this.queryRenderedFeatures(_e.point,{layers:we}):[];Me.length&&(_e.features=Me,he.call(this,_e),delete _e.features)};return{layers:re,listener:he,delegates:{[be]:fe}}}}_saveDelegatedListener(be,re){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[be]=this._delegatedListeners[be]||[],this._delegatedListeners[be].push(re)}_removeDelegatedListener(be,re,he){if(!this._delegatedListeners||!this._delegatedListeners[be])return;const fe=this._delegatedListeners[be];for(let _e=0;_e<fe.length;_e++){const we=fe[_e];if(we.listener===he&&we.layers.length===re.length&&we.layers.every(Me=>re.includes(Me))){for(const Me in we.delegates)this.off(Me,we.delegates[Me]);return void fe.splice(_e,1)}}}on(be,re,he){if(he===void 0)return super.on(be,re);const fe=typeof re=="string"?[re]:re,_e=this._createDelegatedListener(be,fe,he);this._saveDelegatedListener(be,_e);for(const we in _e.delegates)this.on(we,_e.delegates[we]);return{unsubscribe:()=>{this._removeDelegatedListener(be,fe,he)}}}once(be,re,he){if(he===void 0)return super.once(be,re);const fe=typeof re=="string"?[re]:re,_e=this._createDelegatedListener(be,fe,he);for(const we in _e.delegates){const Me=_e.delegates[we];_e.delegates[we]=(...Fe)=>{this._removeDelegatedListener(be,fe,he),Me(...Fe)}}this._saveDelegatedListener(be,_e);for(const we in _e.delegates)this.once(we,_e.delegates[we]);return this}off(be,re,he){return he===void 0?super.off(be,re):(this._removeDelegatedListener(be,typeof re=="string"?[re]:re,he),this)}queryRenderedFeatures(be,re){if(!this.style)return[];let he;const fe=be instanceof oe.P||Array.isArray(be),_e=fe?be:[[0,0],[this.transform.width,this.transform.height]];if(re=re||(fe?{}:be)||{},_e instanceof oe.P||typeof _e[0]=="number")he=[oe.P.convert(_e)];else{const we=oe.P.convert(_e[0]),Me=oe.P.convert(_e[1]);he=[we,new oe.P(Me.x,we.y),Me,new oe.P(we.x,Me.y),we]}return this.style.queryRenderedFeatures(he,re,this.transform)}querySourceFeatures(be,re){return this.style.querySourceFeatures(be,re)}setStyle(be,re){return(re=oe.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},re)).diff!==!1&&re.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&be?(this._diffStyle(be,re),this):(this._localIdeographFontFamily=re.localIdeographFontFamily,this._updateStyle(be,re))}setTransformRequest(be){return this._requestManager.setTransformRequest(be),this}_getUIString(be){const re=this._locale[be];if(re==null)throw new Error(`Missing UI string '${be}'`);return re}_updateStyle(be,re){var he,fe;if(re.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(be,re));const _e=this.style&&re.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!be)),be?(this.style=new so(this,re||{}),this.style.setEventedParent(this,{style:this.style}),typeof be=="string"?this.style.loadURL(be,re,_e):this.style.loadJSON(be,re,_e),this):((fe=(he=this.style)===null||he===void 0?void 0:he.projection)===null||fe===void 0||fe.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new so(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(be,re){if(typeof be=="string"){const he=this._requestManager.transformRequest(be,"Style");oe.j(he,new AbortController).then(fe=>{this._updateDiff(fe.data,re)}).catch(fe=>{fe&&this.fire(new oe.k(fe))})}else typeof be=="object"&&this._updateDiff(be,re)}_updateDiff(be,re){try{this.style.setState(be,re)&&this._update(!0)}catch(he){oe.w(`Unable to perform style diff: ${he.message||he.error||he}.  Rebuilding the style from scratch.`),this._updateStyle(be,re)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():oe.w("There is no style added to the map.")}addSource(be,re){return this._lazyInitEmptyStyle(),this.style.addSource(be,re),this._update(!0)}isSourceLoaded(be){const re=this.style&&this.style.sourceCaches[be];if(re!==void 0)return re.loaded();this.fire(new oe.k(new Error(`There is no source with ID '${be}'`)))}setTerrain(be){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),be){const re=this.style.sourceCaches[be.source];if(!re)throw new Error(`cannot load terrain, because there exists no source with ID: ${be.source}`);this.terrain===null&&re.reload();for(const he in this.style._layers){const fe=this.style._layers[he];fe.type==="hillshade"&&fe.source===be.source&&oe.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),fe.type==="color-relief"&&fe.source===be.source&&oe.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new bh(this.painter,re,be),this.painter.renderToTexture=new uu(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=he=>{var fe;he.dataType==="style"?this.terrain.sourceCache.freeRtt():he.dataType==="source"&&he.tile&&(he.sourceId!==be.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((fe=he.source)===null||fe===void 0?void 0:fe.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(he.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new oe.l("terrain",{terrain:be})),this}getTerrain(){var be,re;return(re=(be=this.terrain)===null||be===void 0?void 0:be.options)!==null&&re!==void 0?re:null}areTilesLoaded(){const be=this.style&&this.style.sourceCaches;for(const re in be){const he=be[re]._tiles;for(const fe in he){const _e=he[fe];if(_e.state!=="loaded"&&_e.state!=="errored")return!1}}return!0}removeSource(be){return this.style.removeSource(be),this._update(!0)}getSource(be){return this.style.getSource(be)}setSourceTileLodParams(be,re,he){if(he){const fe=this.getSource(he);if(!fe)throw new Error(`There is no source with ID "${he}", cannot set LOD parameters`);fe.calculateTileZoom=Ot(Math.max(1,be),Math.max(1,re))}else for(const fe in this.style.sourceCaches)this.style.sourceCaches[fe].getSource().calculateTileZoom=Ot(Math.max(1,be),Math.max(1,re));return this._update(!0),this}refreshTiles(be,re){const he=this.style.sourceCaches[be];if(!he)throw new Error(`There is no source cache with ID "${be}", cannot refresh tile`);re===void 0?he.reload(!0):he.refreshTiles(re.map(fe=>new oe.a4(fe.z,fe.x,fe.y)))}addImage(be,re,he={}){const{pixelRatio:fe=1,sdf:_e=!1,stretchX:we,stretchY:Me,content:Fe,textFitWidth:Be,textFitHeight:$e}=he;if(this._lazyInitEmptyStyle(),!(re instanceof HTMLImageElement||oe.b(re))){if(re.width===void 0||re.height===void 0)return this.fire(new oe.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:We,height:Je,data:Xe}=re,st=re;return this.style.addImage(be,{data:new oe.R({width:We,height:Je},new Uint8Array(Xe)),pixelRatio:fe,stretchX:we,stretchY:Me,content:Fe,textFitWidth:Be,textFitHeight:$e,sdf:_e,version:0,userImage:st}),st.onAdd&&st.onAdd(this,be),this}}{const{width:We,height:Je,data:Xe}=ye.getImageData(re);this.style.addImage(be,{data:new oe.R({width:We,height:Je},Xe),pixelRatio:fe,stretchX:we,stretchY:Me,content:Fe,textFitWidth:Be,textFitHeight:$e,sdf:_e,version:0})}}updateImage(be,re){const he=this.style.getImage(be);if(!he)return this.fire(new oe.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const fe=re instanceof HTMLImageElement||oe.b(re)?ye.getImageData(re):re,{width:_e,height:we,data:Me}=fe;if(_e===void 0||we===void 0)return this.fire(new oe.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(_e!==he.data.width||we!==he.data.height)return this.fire(new oe.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const Fe=!(re instanceof HTMLImageElement||oe.b(re));return he.data.replace(Me,Fe),this.style.updateImage(be,he),this}getImage(be){return this.style.getImage(be)}hasImage(be){return be?!!this.style.getImage(be):(this.fire(new oe.k(new Error("Missing required image id"))),!1)}removeImage(be){this.style.removeImage(be)}loadImage(be){return Ze.getImage(this._requestManager.transformRequest(be,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(be,re){return this._lazyInitEmptyStyle(),this.style.addLayer(be,re),this._update(!0)}moveLayer(be,re){return this.style.moveLayer(be,re),this._update(!0)}removeLayer(be){return this.style.removeLayer(be),this._update(!0)}getLayer(be){return this.style.getLayer(be)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(be,re,he){return this.style.setLayerZoomRange(be,re,he),this._update(!0)}setFilter(be,re,he={}){return this.style.setFilter(be,re,he),this._update(!0)}getFilter(be){return this.style.getFilter(be)}setPaintProperty(be,re,he,fe={}){return this.style.setPaintProperty(be,re,he,fe),this._update(!0)}getPaintProperty(be,re){return this.style.getPaintProperty(be,re)}setLayoutProperty(be,re,he,fe={}){return this.style.setLayoutProperty(be,re,he,fe),this._update(!0)}getLayoutProperty(be,re){return this.style.getLayoutProperty(be,re)}setGlyphs(be,re={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(be,re),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(be,re,he={}){return this._lazyInitEmptyStyle(),this.style.addSprite(be,re,he,fe=>{fe||this._update(!0)}),this}removeSprite(be){return this._lazyInitEmptyStyle(),this.style.removeSprite(be),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(be,re={}){return this._lazyInitEmptyStyle(),this.style.setSprite(be,re,he=>{he||this._update(!0)}),this}setLight(be,re={}){return this._lazyInitEmptyStyle(),this.style.setLight(be,re),this._update(!0)}getLight(){return this.style.getLight()}setSky(be,re={}){return this._lazyInitEmptyStyle(),this.style.setSky(be,re),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(be,re){return this.style.setFeatureState(be,re),this._update()}removeFeatureState(be,re){return this.style.removeFeatureState(be,re),this._update()}getFeatureState(be){return this.style.getFeatureState(be)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let be=0,re=0;return this._container&&(be=this._container.clientWidth||400,re=this._container.clientHeight||300),[be,re]}_setupContainer(){const be=this._container;be.classList.add("maplibregl-map");const re=this._canvasContainer=Ce.create("div","maplibregl-canvas-container",be);this._interactive&&re.classList.add("maplibregl-interactive"),this._canvas=Ce.create("canvas","maplibregl-canvas",re),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const he=this._containerDimensions(),fe=this._getClampedPixelRatio(he[0],he[1]);this._resizeCanvas(he[0],he[1],fe);const _e=this._controlContainer=Ce.create("div","maplibregl-control-container",be),we=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(Me=>{we[Me]=Ce.create("div",`maplibregl-ctrl-${Me} `,_e)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(be,re,he){this._canvas.width=Math.floor(he*be),this._canvas.height=Math.floor(he*re),this._canvas.style.width=`${be}px`,this._canvas.style.height=`${re}px`}_setupPainter(){const be=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let re=null;this._canvas.addEventListener("webglcontextcreationerror",fe=>{re={requestedAttributes:be},fe&&(re.statusMessage=fe.statusMessage,re.type=fe.type)},{once:!0});let he=null;if(he=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,be):this._canvas.getContext("webgl2",be)||this._canvas.getContext("webgl",be),!he){const fe="Failed to initialize WebGL";throw re?(re.message=fe,new Error(JSON.stringify(re))):new Error(fe)}this.painter=new eh(he,this.transform),De.testSupport(he)}migrateProjection(be,re){super.migrateProjection(be,re),this.painter.transform=be,this.fire(new oe.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(be){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||be,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(be){return this._update(),this._renderTaskQueue.add(be)}_cancelRenderFrame(be){this._renderTaskQueue.remove(be)}_render(be){var re,he,fe,_e,we;const Me=this._idleTriggered?this._fadeDuration:0,Fe=((re=this.style.projection)===null||re===void 0?void 0:re.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(be),this._removed)return;let Be=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const Je=this.transform.zoom,Xe=Ae();this.style.zoomHistory.update(Je,Xe);const st=new oe.F(Je,{now:Xe,fadeDuration:Me,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ht=st.crossFadingFactor();ht===1&&ht===this._crossFadingFactor||(Be=!0,this._crossFadingFactor=ht),this.style.update(st)}const $e=((he=this.style.projection)===null||he===void 0?void 0:he.transitionState)>0!==Fe;(fe=this.style.projection)===null||fe===void 0||fe.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((_e=this.style.projection)===null||_e===void 0?void 0:_e.transitionState,(we=this.style.projection)===null||we===void 0?void 0:we.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||$e)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,Me,this._crossSourceCollisions,$e),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:Me,showPadding:this.showPadding}),this.fire(new oe.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,oe.cw.mark(oe.cx.load),this.fire(new oe.l("load"))),this.style&&(this.style.hasTransitions()||Be)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const We=this._sourcesDirty||this._styleDirty||this._placementDirty;return We||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new oe.l("idle")),!this._loaded||this._fullyLoaded||We||(this._fullyLoaded=!0,oe.cw.mark(oe.cx.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var be;this._hash&&this._hash.remove();for(const he of this._controls)he.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window!="undefined"&&removeEventListener("online",this._onWindowOnline,!1),Ze.removeThrottleControl(this._imageQueueHandle),(be=this._resizeObserver)===null||be===void 0||be.disconnect();const re=this.painter.context.gl.getExtension("WEBGL_lose_context");re!=null&&re.loseContext&&re.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),Ce.remove(this._canvasContainer),Ce.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),oe.cw.clearMetrics(),this._removed=!0,this.fire(new oe.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,ye.frame(this._frameRequest,be=>{oe.cw.frame(be),this._frameRequest=null;try{this._render(be)}catch(re){if(!oe.cy(re)&&!function(he){return he.message===Uc}(re))throw re}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(be){this._showTileBoundaries!==be&&(this._showTileBoundaries=be,this._update())}get showPadding(){return!!this._showPadding}set showPadding(be){this._showPadding!==be&&(this._showPadding=be,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(be){this._showCollisionBoxes!==be&&(this._showCollisionBoxes=be,be?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(be){this._showOverdrawInspector!==be&&(this._showOverdrawInspector=be,this._update())}get repaint(){return!!this._repaint}set repaint(be){this._repaint!==be&&(this._repaint=be,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(be){this._vertices=be,this._update()}get version(){return Hi}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(be){return this._lazyInitEmptyStyle(),this.style.setProjection(be),this._update(!0)}},de.MapMouseEvent=Vn,de.MapTouchEvent=An,de.MapWheelEvent=Xn,de.Marker=Hs,de.NavigationControl=class{constructor(be){this._updateZoomButtons=()=>{const re=this._map.getZoom(),he=re===this._map.getMaxZoom(),fe=re===this._map.getMinZoom();this._zoomInButton.disabled=he,this._zoomOutButton.disabled=fe,this._zoomInButton.setAttribute("aria-disabled",he.toString()),this._zoomOutButton.setAttribute("aria-disabled",fe.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(re,he)=>{const fe=this._map._getUIString(`NavigationControl.${he}`);re.title=fe,re.setAttribute("aria-label",fe)},this.options=oe.e({},xh,be),this._container=Ce.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",re=>re.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",re=>this._map.zoomIn({},{originalEvent:re})),Ce.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",re=>this._map.zoomOut({},{originalEvent:re})),Ce.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",re=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:re}):this._map.resetNorth({},{originalEvent:re})}),this._compassIcon=Ce.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(be){return this._map=be,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Xo(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){Ce.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(be,re){const he=Ce.create("button",be,this._container);return he.type="button",he.addEventListener("click",re),he}},de.Popup=class extends oe.E{constructor(be){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&Ce.remove(this._content),this._container&&(Ce.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new oe.l("close"))),this),this._onMouseUp=re=>{this._update(re.point)},this._onMouseMove=re=>{this._update(re.point)},this._onDrag=re=>{this._update(re.point)},this._update=re=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=Ce.create("div","maplibregl-popup",this._map.getContainer()),this._tip=Ce.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const Me of this.options.className.split(" "))this._container.classList.add(Me);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Ha(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!re)return;const he=this._flatPos=this._pos=this._trackPointer&&re?re:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&re?re:this._map.transform.locationToScreenPoint(this._lngLat));let fe=this.options.anchor;const _e=Xa(this.options.offset);if(!fe){const Me=this._container.offsetWidth,Fe=this._container.offsetHeight;let Be;Be=he.y+_e.bottom.y<Fe?["top"]:he.y>this._map.transform.height-Fe?["bottom"]:[],he.x<Me/2?Be.push("left"):he.x>this._map.transform.width-Me/2&&Be.push("right"),fe=Be.length===0?"bottom":Be.join("-")}let we=he.add(_e[fe]);this.options.subpixelPositioning||(we=we.round()),Ce.setTransform(this._container,`${Yo[fe]} translate(${we.x}px,${we.y}px)`),Ua(this._container,fe,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=oe.e(Object.create(Ql),be)}addTo(be){return this._map&&this.remove(),this._map=be,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new oe.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(be){return this._lngLat=oe.S.convert(be),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(be){return this.setDOMContent(document.createTextNode(be))}setHTML(be){const re=document.createDocumentFragment(),he=document.createElement("body");let fe;for(he.innerHTML=be;fe=he.firstChild,fe;)re.appendChild(fe);return this.setDOMContent(re)}getMaxWidth(){var be;return(be=this._container)===null||be===void 0?void 0:be.style.maxWidth}setMaxWidth(be){return this.options.maxWidth=be,this._update(),this}setDOMContent(be){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=Ce.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(be),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(be){return this._container&&this._container.classList.add(be),this}removeClassName(be){return this._container&&this._container.classList.remove(be),this}setOffset(be){return this.options.offset=be,this._update(),this}toggleClassName(be){if(this._container)return this._container.classList.toggle(be)}setSubpixelPositioning(be){this.options.subpixelPositioning=be}_createCloseButton(){this.options.closeButton&&(this._closeButton=Ce.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const be=this._container.querySelector(ec);be&&be.focus()}},de.RasterDEMTileSource=ci,de.RasterTileSource=gi,de.ScaleControl=class{constructor(be){this._onMove=()=>{Za(this._map,this._container,this.options)},this.setUnit=re=>{this.options.unit=re,Za(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Jl),be)}getDefaultPosition(){return"bottom-left"}onAdd(be){return this._map=be,this._container=Ce.create("div","maplibregl-ctrl maplibregl-ctrl-scale",be.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){Ce.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},de.ScrollZoomHandler=_s,de.Style=so,de.TerrainControl=class{constructor(be){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=be}onAdd(be){return this._map=be,this._container=Ce.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=Ce.create("button","maplibregl-ctrl-terrain",this._container),Ce.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){Ce.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},de.TwoFingersTouchPitchHandler=qa,de.TwoFingersTouchRotateHandler=fh,de.TwoFingersTouchZoomHandler=Na,de.TwoFingersTouchZoomRotateHandler=Zl,de.VectorTileSource=Jt,de.VideoSource=Ci,de.addSourceType=(be,re)=>oe._(void 0,void 0,void 0,function*(){if(wi(be))throw new Error(`A source type called "${be}" already exists.`);((he,fe)=>{Mi[he]=fe})(be,re)}),de.clearPrewarmedResources=function(){const be=lr;be&&(be.isPreloaded()&&be.numActive()===1?(be.release(Bt),lr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},de.createTileMesh=Do,de.getMaxParallelImageRequests=function(){return oe.a.MAX_PARALLEL_IMAGE_REQUESTS},de.getRTLTextPluginStatus=function(){return ir().getRTLTextPluginStatus()},de.getVersion=function(){return Ya},de.getWorkerCount=function(){return Xt.workerCount},de.getWorkerUrl=function(){return oe.a.WORKER_URL},de.importScriptInWorkers=function(be){return $r().broadcast("IS",be)},de.isTimeFrozen=function(){return Te.isFrozen()},de.prewarm=function(){Lr().acquire(Bt)},de.restoreNow=function(){Te.restoreNow()},de.setMaxParallelImageRequests=function(be){oe.a.MAX_PARALLEL_IMAGE_REQUESTS=be},de.setNow=function(be){Te.setNow(be)},de.setRTLTextPlugin=function(be,re){return ir().setRTLTextPlugin(be,re)},de.setWorkerCount=function(be){Xt.workerCount=be},de.setWorkerUrl=function(be){oe.a.WORKER_URL=be}});var ue=ne;return ue})})(maplibreGl);var maplibregl=getDefaultExportFromCjs(maplibreGl.exports);function initContact(te=document){const ee=te&&te.querySelector?te:document;if(!(!!(te&&te.matches&&te.matches('[data-barba-namespace="Contact"]'))||!!ee.querySelector('[data-barba-namespace="Contact"]')))return;const ae=()=>{try{return te&&te.querySelector&&te.querySelector(".is-c-map.w-widget-map, .w-widget-map.is-c-map, .is-c-map")||ee.querySelector(".is-c-map.w-widget-map, .w-widget-map.is-c-map, .is-c-map")}catch{return null}},ue=oe=>{if(!oe)return null;try{const[me,ve]=String(oe).split(","),Ee=parseFloat((me||"").trim()),Pe=parseFloat((ve||"").trim());return!Number.isNaN(Ee)&&!Number.isNaN(Pe)?{lat:Ee,lng:Pe}:null}catch{return null}};(async()=>{try{const oe=ae();if(!oe)return!1;try{if(oe.classList&&oe.classList.contains("is-c-map-js")||oe.__jsMapCreated)return!0}catch{}const me=ue(oe.getAttribute("data-widget-latlng"))||{lat:21.1716,lng:-101.7327},ve=oe.getAttribute("data-widget-zoom"),Ee=ve!=null&&ve!==""?parseInt(ve,10):14;try{oe.innerHTML=""}catch{}try{oe.classList.add("is-c-map-js")}catch{}try{const Pe=new maplibregl.Map({container:oe,style:"https://tiles.openfreemap.org/styles/dark",center:[me.lng,me.lat],zoom:Number.isNaN(Ee)?14:Ee});Pe.scrollZoom.disable(),Pe.touchZoomRotate.enable(),Pe.addControl(new maplibregl.NavigationControl);const ye=()=>{try{const Te=getComputedStyle(document.documentElement),Ae=Te.getPropertyValue("--building-color").trim()||"#E5E5E5",Ce=Te.getPropertyValue("--building-border-color").trim()||"#D1D1D1",De=Te.getPropertyValue("--road-color").trim()||"#FFFFFF",Ie=Te.getPropertyValue("--road-border-color").trim()||"#FFFFFF",ze=Te.getPropertyValue("--map-background-color").trim()||"#F3F3F3",Re=Te.getPropertyValue("--map-text-color").trim()||"#B2B2B2",Oe=Te.getPropertyValue("--map-text-halo-color").trim()||"#F3F3F3",qe=Te.getPropertyValue("--map-water-color").trim()||"#E5E5E5",Ze=Te.getPropertyValue("--map-waterway-color").trim()||"#E5E5E5",Ue=Pe.getStyle().layers||[];try{Pe.getLayer("background")&&Pe.setPaintProperty("background","background-color",ze)}catch{}Ue.forEach(Ye=>{if(Ye.type==="line"){if((Ye.id.includes("highway_")||Ye.id.includes("road_")||Ye.id.includes("railway_"))&&(Ye.id.includes("_inner")||!Ye.id.includes("_casing")))try{Pe.setPaintProperty(Ye.id,"line-color",De)}catch{}if(Ye.id.includes("_casing"))try{Pe.setPaintProperty(Ye.id,"line-color",Ie)}catch{}}if(Ye.id.includes("road_oneway")||Ye.id.includes("arrow")||Ye.id.includes("direction"))try{Pe.setLayoutProperty(Ye.id,"visibility","none")}catch{}});try{Pe.getLayer("building")&&(Pe.setPaintProperty("building","fill-color",Ae),Pe.setPaintProperty("building","fill-outline-color",Ce))}catch{}try{Pe.getLayer("water")&&Pe.setPaintProperty("water","fill-color",qe)}catch{}try{Pe.getLayer("waterway")&&Pe.setPaintProperty("waterway","line-color",Ze)}catch{}Ue.forEach(Ye=>{if(Ye.type==="symbol")try{Pe.getLayer(Ye.id)&&(Pe.setPaintProperty(Ye.id,"text-color",Re),Pe.setPaintProperty(Ye.id,"text-halo-color",Oe),Ye.id.includes("road_oneway")||Ye.id.includes("arrow")||Ye.id.includes("direction")?Pe.setLayoutProperty(Ye.id,"visibility","none"):Pe.setLayoutProperty(Ye.id,"visibility","visible"))}catch{}})}catch{}};Pe.on("style.load",()=>{ye();try{const Te=Pe.getStyle(),Ae=Te.layers.map(Ce=>Ce.type==="symbol"&&Ce.minzoom!==void 0?{...Ce,minzoom:Math.max(0,Ce.minzoom-4)}:Ce);Pe.setStyle({...Te,layers:Ae})}catch{}try{(Pe.getStyle().layers||[]).forEach(Ae=>{if(Ae.type==="symbol"&&(Ae.id.includes("label")||Ae.id.includes("street")||Ae.id.includes("road_label")||Ae.id.includes("place")||Ae.id.includes("name")))try{const Ce=Pe.getLayoutProperty(Ae.id,"text-size");if(Ce){if(typeof Ce=="number")Pe.setLayoutProperty(Ae.id,"text-size",Ce*1.2);else if(Array.isArray(Ce)&&Ce[0]==="interpolate"){const De=Ce.map((Ie,ze)=>typeof Ie=="number"&&ze>2?Ie*1.2:Ie);Pe.setLayoutProperty(Ae.id,"text-size",De)}}}catch{}})}catch{}}),Pe.on("styleimagemissing",Te=>{const Ae=document.createElement("canvas");Ae.width=1,Ae.height=1;const Ce=Ae.getContext("2d");Ce.fillStyle="rgba(0,0,0,0)",Ce.fillRect(0,0,1,1),Pe.addImage(Te.id,{width:1,height:1,data:Ce.getImageData(0,0,1,1).data})}),new maplibregl.Marker({color:"var(--accent)"}).setLngLat([me.lng,me.lat]).addTo(Pe);try{oe.__jsMapCreated=!0}catch{}return!0}catch{return!1}}catch{return!1}})();try{if(typeof window!="undefined"&&typeof window.matchMedia=="function"&&window.matchMedia("(max-width: 767px)").matches){const me=te&&te.querySelector&&te.querySelector(".content_left")||ee.querySelector(".content_left")||te&&te.querySelector&&te.querySelector(".contact_map")||ee.querySelector(".contact_map"),ve=te&&te.querySelector&&te.querySelector(".content_right")||ee.querySelector(".content_right")||te&&te.querySelector&&te.querySelector(".contact_right")||ee.querySelector(".contact_right"),Ee=te&&te.querySelector&&te.querySelector(".contact_infos")||ee.querySelector(".contact_infos");if(me&&ve&&Ee&&!me.__mobileReparented){Ee.insertAdjacentElement("afterend",me);try{me.__mobileReparented=!0}catch{}}}}catch{}}function initContactHero(te=document,ee={}){try{const ne=te&&te.querySelector?te:document;if(!(!!(te&&te.matches&&te.matches('[data-barba-namespace="Contact"]'))||!!ne.querySelector('[data-barba-namespace="Contact"]')))return;const ue=te&&te.querySelector&&(te.querySelector(".contact_map")||te.querySelector(".contact-map"))||ne.querySelector(".contact_map")||ne.querySelector(".contact-map");if(!ue)return;const de="50.8em",oe=typeof ee.duration=="number"?ee.duration:1.2,me=ee.ease||gsapWithCSS&&typeof gsapWithCSS.parseEase=="function"&&gsapWithCSS.parseEase("custom(M0,0 C0.6,0 0,1 1,1 )")||void 0,Ee=typeof ee.delay=="number"&&Number.isFinite(ee.delay)&&ee.delay>=0?ee.delay:.5,Pe=typeof window!="undefined"&&typeof window.matchMedia=="function"&&window.matchMedia("(max-width: 767px)").matches;if(!!(ee&&ee.animate)&&!Pe)try{const Te=window.getComputedStyle&&window.getComputedStyle(ue)||null,Ae=Te?parseFloat(Te.fontSize):16,Ce=Math.max(0,50.8*(Number.isFinite(Ae)?Ae:16)),De=ue&&ue.getBoundingClientRect&&ue.getBoundingClientRect().width||0;gsapWithCSS.fromTo(ue,{width:`${Math.max(0,Math.round(De))}px`},{width:`${Math.max(0,Math.round(Ce))}px`,duration:oe,ease:me,overwrite:"auto",delay:Ee});return}catch{}Pe||setTimeout(()=>{ue.style.width=de},Math.max(0,Math.round(Ee*1e3)))}catch{}}gsapWithCSS.registerPlugin(ScrollTrigger);function initCylinder(te=document){const ne=(te&&te.querySelector?te:document).querySelector(".cylindar__wrapper");if(!ne)return;const se=ne.querySelectorAll(".cylindar__text__item"),ae=ne.querySelector(".cylindar__text__wrapper"),ue=ne.querySelector(".cylindar__text")||ne;if(!se||!se.length||!ae||!ne||!ue)return;const de=(()=>{var Qe;const _t=parseInt((Qe=ne==null?void 0:ne.dataset)==null?void 0:Qe.cylinderZones,10);return Number.isFinite(_t)&&_t>0?_t:10})(),oe=(()=>{var Qe,it,Ge;const _t=parseInt((Ge=(Qe=ne==null?void 0:ne.dataset)==null?void 0:Qe.textZones)!=null?Ge:(it=ne==null?void 0:ne.dataset)==null?void 0:it.zones,10);return Number.isFinite(_t)&&_t>0?_t:7})(),me=(()=>{var Qe,it,Ge;const _t=parseInt((Ge=(Qe=ne==null?void 0:ne.dataset)==null?void 0:Qe.tickZones)!=null?Ge:(it=ne==null?void 0:ne.dataset)==null?void 0:it.textZones,10);return Number.isFinite(_t)&&_t>0?_t:oe})(),ve=(()=>{var Qe,it,Ge,je,Ke;const _t=parseInt((Ke=(Ge=(Qe=ne==null?void 0:ne.dataset)==null?void 0:Qe.tickMultiplier)!=null?Ge:(it=ne==null?void 0:ne.dataset)==null?void 0:it.tickFactor)!=null?Ke:(je=ne==null?void 0:ne.dataset)==null?void 0:je.tickDensity,10);return Number.isFinite(_t)&&_t>0?_t:1})();try{ne.__cylinderCleanup&&ne.__cylinderCleanup()}catch{}const Ee=Array.from(ne.querySelectorAll(".scroll-indicator_c")),Pe=(_t,Qe)=>{if(!_t)return[];try{_t.style.position="relative",_t.style.transformStyle="preserve-3d",_t.style.pointerEvents="none"}catch{}const it=_t.querySelector(".scroll-tick")||(()=>{const Ke=document.createElement("div");return Ke.className="scroll-tick",Ke})();let Ge=Array.from(_t.querySelectorAll(".scroll-tick"));if(Ge.length===Qe)return Ge.forEach(Ke=>{Ke.style.position="absolute",Ke.style.top="50%",Ke.style.left="50%",Ke.style.transformStyle="preserve-3d"}),Ge;try{_t.innerHTML=""}catch{}const je=document.createDocumentFragment();for(let Ke=0;Ke<Qe;Ke+=1){const lt=it.cloneNode(!0);lt.style.position="absolute",lt.style.top="50%",lt.style.left="50%",lt.style.transformStyle="preserve-3d",je.appendChild(lt)}return _t.appendChild(je),Array.from(_t.querySelectorAll(".scroll-tick"))},ye=Math.max(se.length*ve,1),Te=new Map;Ee.forEach(_t=>{Te.set(_t,Pe(_t,ye))});const Ae=()=>{const _t=se.length||1,Qe=.4,it=Math.min(window.innerWidth,window.innerHeight)*Qe,Ge=360/de,je=Ge*oe,Ke=Ge*me,lt=_t>1?je/(_t-1):je;se.forEach((Gt,lr)=>{const yr=lr*lt*Math.PI/180,Lr=lr*-lt,Nr=0,$r=Math.sin(yr)*it,Gr=Math.cos(yr)*it;Gt.style.transform=`translate3d(-50%, -50%, 0) translate3d(${Nr}px, ${$r}px, ${Gr}px) rotateX(${Lr}deg)`});const Bt=ye,Xt=me===oe?lt/ve:Bt>1?Ke/(Bt-1):Ke;Te.forEach(Gt=>{Gt.forEach((lr,yr)=>{const Lr=yr*Xt*Math.PI/180,Nr=yr*-Xt,$r=0,Gr=Math.sin(Lr)*it,Zr=Math.cos(Lr)*it;lr.style.transform=`translate3d(-50%, -50%, 0) translate3d(${$r}px, ${Gr}px, ${Zr}px) rotateX(${Nr}deg)`})})};Ae();const Ce=gsapWithCSS.timeline({defaults:{ease:"none"}});try{gsapWithCSS.set([ae,...Array.from(Ee)],{transformOrigin:"50% 50% 0",force3D:!0})}catch{}Ce.fromTo(ae,{rotateX:0},{rotateX:150},0);const De=Array.from(ne.querySelectorAll(".scroll-indicator_c"));De.length&&Ce.fromTo(De,{rotateX:0},{rotateX:160},0);const Ie=()=>{try{const _t=ne&&ne.parentElement;if(_t&&_t.classList&&_t.classList.contains("pin-spacer"))return _t;const Qe=ne&&ne.closest&&ne.closest(".pin-spacer");if(Qe)return Qe}catch{}return null};let ze=null,Re=null;const Oe=_t=>{try{if(!_t||typeof MutationObserver!="function"||Re===_t&&ze)return;if(ze){try{ze.disconnect()}catch{}ze=null,Re=null}ze=new MutationObserver(()=>{try{Ze()}catch{}}),ze.observe(_t,{attributes:!0,attributeFilter:["style"]}),Re=_t}catch{}},qe=()=>{var _t;try{if(Ue&&typeof Ue.start=="number"&&typeof Ue.end=="number")return Math.max(0,Math.round(Ue.end-Ue.start))}catch{}try{const Qe=(typeof((_t=Ue==null?void 0:Ue.vars)==null?void 0:_t.end)=="string"?Ue.vars.end:"+=2000svh").match(/\+=\s*(\d+)\s*svh/i),it=Qe&&Qe[1]?parseInt(Qe[1],10):2e3;return Math.max(0,Math.round(it*(window.innerHeight||0)))}catch{return Math.max(0,Math.round(2e3*(window.innerHeight||0)))}},Ze=()=>{try{const _t=Ie();if(!_t)return;const Qe=window.innerWidth,it=window.innerHeight,Ge=Math.min(Qe,it)<767,je=(()=>{try{const Xt=ne.getBoundingClientRect();return Math.max(0,Math.round(Xt.height||0))}catch{return 0}})(),Ke=qe(),Bt=`${Ge?2500:Math.max(je+Ke,1)}px`;_t.style.setProperty("height",Bt,"important"),_t.style.setProperty("min-height",Bt,"important"),Oe(_t)}catch{}},Ue=ScrollTrigger.create({trigger:ue,start:"center center",end:"+=2000svh",pin:ne,anticipatePin:1,pinReparent:!0,invalidateOnRefresh:!0,scrub:!0,animation:Ce,onRefresh:Ze});try{ScrollTrigger.addEventListener("refresh",Ze)}catch{}try{ScrollTrigger.addEventListener("refreshInit",Ze)}catch{}Ze();let Ye=null;const ct=()=>{Ye===null&&(Ye=requestAnimationFrame(()=>{Ye=null;try{Ae()}catch{}try{Ze()}catch{}try{ScrollTrigger.refresh()}catch{}}))},at=()=>ct(),ft=()=>{var Qe;try{if(typeof document!="undefined"&&((Qe=document==null?void 0:document.documentElement)==null?void 0:Qe.getAttribute("data-menu-open"))==="true")return}catch{}const _t=window.innerHeight/2;try{const it=Array.from(se).map(Ge=>Ge.querySelector(".body-xl, .body-xxl, .body-next"));if(it.length){let Ge=0,je=1/0;it.forEach((lt,Bt)=>{if(!lt)return;const Xt=lt.getBoundingClientRect(),Gt=Xt.top+Xt.height/2,lr=Math.abs(Gt-_t);lr<je&&(je=lr,Ge=Bt)}),it.forEach(lt=>lt&&lt.classList&&lt.classList.remove("is-active"));const Ke=it[Ge];Ke&&(Ke.classList.add("is-active"),Ke.classList.remove("is-o-15","is-o-20")),it.forEach((lt,Bt)=>{!lt||Bt===Ge||(lt.classList.remove("is-active"),lt.classList.contains("is-o-20")||lt.classList.add("is-o-20"))})}}catch{}De.forEach(it=>{const Ge=Array.from(it.querySelectorAll(".scroll-tick"));if(!Ge.length)return;let je=0,Ke=1/0;Ge.forEach((Bt,Xt)=>{const Gt=Bt.getBoundingClientRect(),lr=Gt.top+Gt.height/2,yr=Math.abs(lr-_t);yr<Ke&&(Ke=yr,je=Xt)}),Ge.forEach(Bt=>{Bt.classList.remove("is-xxl","is-xl","is-l","is-m")});const lt=(Bt,Xt)=>{Bt>=0&&Bt<Ge.length&&Ge[Bt].classList.add(Xt)};lt(je,"is-xxl"),lt(je-1,"is-xl"),lt(je+1,"is-xl"),lt(je-2,"is-l"),lt(je+2,"is-l"),lt(je-3,"is-m"),lt(je+3,"is-m")})},pt=ScrollTrigger.create({trigger:ne,start:"top bottom",end:"bottom top",onUpdate:ft,onEnter:ft,onEnterBack:ft}),Mt=()=>ft();try{gsapWithCSS.ticker.add(Mt)}catch{}ft();const At=()=>ct();window.addEventListener("resize",At);try{window.addEventListener("page:transition:after",ct)}catch{}try{window.visualViewport&&typeof window.visualViewport.addEventListener=="function"&&(window.visualViewport.addEventListener("resize",ct),window.visualViewport.addEventListener("scroll",ct))}catch{}try{window.addEventListener("orientationchange",at)}catch{}ne.__cylinderCleanup=()=>{try{Ue&&typeof Ue.kill=="function"&&Ue.kill()}catch{}try{Ce&&typeof Ce.kill=="function"&&Ce.kill()}catch{}try{window.removeEventListener("resize",At)}catch{}try{window.removeEventListener("page:transition:after",ct)}catch{}try{window.visualViewport&&typeof window.visualViewport.removeEventListener=="function"&&(window.visualViewport.removeEventListener("resize",ct),window.visualViewport.removeEventListener("scroll",ct))}catch{}try{window.removeEventListener("orientationchange",at)}catch{}try{Ye!==null&&(cancelAnimationFrame(Ye),Ye=null)}catch{}try{pt&&typeof pt.kill=="function"&&pt.kill()}catch{}try{ScrollTrigger.removeEventListener("refresh",Ze)}catch{}try{ScrollTrigger.removeEventListener("refreshInit",Ze)}catch{}try{ze&&ze.disconnect()}catch{}try{Mt&&gsapWithCSS&&gsapWithCSS.ticker&&gsapWithCSS.ticker.remove(Mt)}catch{}try{ne.__cylinderCleanup=null}catch{}}}gsapWithCSS.registerPlugin(ScrollTrigger);function buildIndicator$1(te){const ee=getComputedStyle(te),ne=parseFloat(ee.rowGap||ee.getPropertyValue("row-gap")||ee.gridRowGap||0);let se=te.querySelector(".scroll-tick");se||(se=document.createElement("div"),se.className="scroll-tick",te.appendChild(se));const ae=se.getBoundingClientRect(),ue=ae&&ae.height?ae.height:0;let de=te.clientHeight;if(!de||de<=0){const ye=te.getBoundingClientRect();de=ye&&ye.height?ye.height:0}const oe=te.closest(".section_work-team");if(oe){const ye=oe.querySelector(".scroll-list");if(ye){const Te=ye.getBoundingClientRect(),Ae=Math.max(Te&&Te.height||0,ye.clientHeight||0,ye.scrollHeight||0);Ae&&Ae>0&&(de=Ae)}}if(!de||de<=ue*2){let ye=0;if(oe){const Ie=oe.clientHeight||0,ze=oe.getBoundingClientRect();ye=Math.max(Ie,ze&&ze.height||0)}let Te=window.innerHeight||0;Te||(Te=document.documentElement?document.documentElement.clientHeight:0);const Ae=de||0,Ce=Ae>ye?Ae:ye,De=Ce>Te?Ce:Te;de=De>ue?De:ue}const me=te.closest(".content_column");if(me){const ye=me.getBoundingClientRect(),Te=ye&&ye.height||0,Ae=me.clientHeight||0,Ce=Te>Ae?Te:Ae;(!Ce||Math.abs(Ce-de)>1)&&(me.style.height=de+"px")}const ve=ue+ne;let Ee=ve>0?Math.max(1,Math.floor((de+ne)/ve)):1;te.innerHTML="";const Pe=document.createDocumentFragment();for(let ye=0;ye<Ee;ye++){const Te=document.createElement("div");Te.className="scroll-tick",Pe.appendChild(Te)}te.appendChild(Pe)}function buildAllIndicators$1(te){te.forEach(ee=>buildIndicator$1(ee))}function setupTickHighlighting$1(te,ee){const ne=document.querySelector(".page-wrap")||te.closest(".page-wrap")||window,se=typeof window!="undefined"&&window.matchMedia?window.matchMedia("(max-width: 991px)").matches:!1;let ae=0;const ue=()=>{try{const me=document.createElement("div");me.style.position="fixed",me.style.top="0",me.style.left="0",me.style.height="100svh",me.style.width="0",me.style.pointerEvents="none",me.style.opacity="0",me.style.visibility="hidden",document.documentElement.appendChild(me);const ve=me.getBoundingClientRect().height||me.offsetHeight||0;return me.remove(),ve}catch{return 0}},de=()=>{ae=ue()};if(se){de();const me=()=>{clearTimeout(me._t),me._t=setTimeout(de,100)};window.addEventListener("resize",me),window.addEventListener("orientationchange",me)}const oe=()=>{let me;const ve=se&&ae>0?ae:window.innerHeight;if(ne===window)me={top:0,height:ve};else{const Pe=ne.getBoundingClientRect();se?me={top:0,height:ve}:me={top:Pe.top,height:Pe.height}}const Ee=me.top+me.height/2;ee.forEach(Pe=>{const ye=Array.from(Pe.querySelectorAll(".scroll-tick"));if(!ye.length)return;let Te=0,Ae=1/0;ye.forEach((De,Ie)=>{const ze=De.getBoundingClientRect(),Re=ze.top+ze.height/2,Oe=Math.abs(Re-Ee);Oe<Ae&&(Ae=Oe,Te=Ie)}),ye.forEach(De=>{De.classList.remove("is-xxl","is-xl","is-l","is-m")});const Ce=(De,Ie)=>{De>=0&&De<ye.length&&ye[De].classList.add(Ie)};Ce(Te,"is-xxl"),Ce(Te-1,"is-xl"),Ce(Te+1,"is-xl"),Ce(Te-2,"is-l"),Ce(Te+2,"is-l"),Ce(Te-3,"is-m"),Ce(Te+3,"is-m")})};ScrollTrigger.create({trigger:te,start:"top bottom",end:"bottom top",onUpdate:oe,onEnter:oe,onEnterBack:oe});try{te._updateTeamTicks=oe}catch{}try{document.fonts&&document.fonts.ready&&document.fonts.ready.then(()=>oe())}catch{}oe()}function initWorkTeamSection(te){if(!te)return;const ee=Array.from(te.querySelectorAll(".scroll-list .scroll-item"));if(ee.length){const se=ee.map(me=>me.querySelector(".body-xl, .body-xxl, .body-next")).filter(Boolean);se.forEach(me=>{me.classList.remove("is-active");const ve=me.classList.contains("is-o-15")?"is-o-15":"is-o-20";me.dataset.dimClass=ve,!me.classList.contains("is-o-15")&&!me.classList.contains("is-o-20")&&me.classList.add(ve)});let ae=null;const ue=me=>{if(!me)return;if(ae&&ae!==me){ae.classList.remove("is-active");const Ee=ae.dataset.dimClass||"is-o-20";ae.classList.contains(Ee)||ae.classList.add(Ee)}const ve=me.dataset.dimClass||"is-o-20";me.classList.contains(ve)&&me.classList.remove(ve),me.classList.add("is-active"),ae=me},de=me=>{if(!me)return;me.classList.remove("is-active");const ve=me.dataset.dimClass||"is-o-20";me.classList.contains(ve)||me.classList.add(ve),ae===me&&(ae=null)};ee.forEach((me,ve)=>{const Ee=se[ve];!Ee||ScrollTrigger.create({trigger:me,start:"top center",end:"bottom center",onToggle(Pe){if(Pe.isActive)ue(Ee);else if(ae===Ee){const ye=ve===ee.length-1,Te=ve===0;if(ye&&Pe.direction>0||Te&&Pe.direction<0)return;de(Ee)}}})});const oe=()=>{const me=typeof window!="undefined"?window.innerHeight:0;if(!me)return;const ve=me/2;let Ee=null,Pe=1/0;se.forEach(ye=>{const Te=ye.getBoundingClientRect(),Ae=Te.top+Te.height/2,Ce=Math.abs(Ae-ve);Ce<Pe&&(Pe=Ce,Ee=ye)}),Ee&&ue(Ee)};ScrollTrigger.create({trigger:te,start:"top bottom",end:"bottom top",onUpdate:oe,onEnter:oe,onEnterBack:oe}),oe()}const ne=[...te.querySelectorAll(".content_column > .scroll-indicator"),...te.querySelectorAll(".content_column.scroll-indicator > .scroll-indicator")];if(ne.length){buildAllIndicators$1(ne),setupTickHighlighting$1(te,ne);let se;const ae=()=>{clearTimeout(se),se=setTimeout(()=>{buildAllIndicators$1(ne),ScrollTrigger.refresh();try{typeof te._updateTeamTicks=="function"&&te._updateTeamTicks()}catch{}},150)};window.addEventListener("resize",ae),window.addEventListener("orientationchange",ae),window.addEventListener("load",ae)}}function initEquitySlider(te){if(!te)return;const ee=te.querySelector(".equity-slider_slide_column");if(!ee)return;gsapWithCSS.set(ee,{yPercent:0});const ne=gsapWithCSS.timeline({defaults:{ease:"none"},scrollTrigger:{trigger:te,start:"top bottom",end:"+=200%",scrub:!0}});ne.to(ee,{yPercent:-50,duration:1},1);const se=te.querySelector(".circle.is-2");if(se){const ue="conic-gradient(from 0deg at 50% 50%, transparent 0deg var(--start, 0deg), #fff var(--start, 0deg) var(--end, 0deg), transparent var(--end, 0deg) 360deg)";se.style.webkitMaskImage=ue,se.style.maskImage=ue,se.style.maskMode="luminance",se.style.webkitMaskRepeat="no-repeat",se.style.maskRepeat="no-repeat",se.style.webkitMaskPosition="center",se.style.maskPosition="center",se.style.setProperty("--start","0deg"),se.style.setProperty("--end","0deg"),se.style.willChange="transform, -webkit-mask-image, mask-image";try{const oe="var(--accent)";se.querySelectorAll("line").forEach(ve=>{ve.style.stroke=oe})}catch{}const de={start:0,end:0};ne.to(de,{end:126,duration:.5,onUpdate:()=>{try{se.style.setProperty("--start",de.start+"deg"),se.style.setProperty("--end",de.end+"deg")}catch{}}},0),ne.to(de,{start:126,end:360,duration:1,onUpdate:()=>{try{se.style.setProperty("--start",de.start+"deg"),se.style.setProperty("--end",de.end+"deg")}catch{}}},1)}const ae=Array.from(te.querySelectorAll(".equity-slider_slide.is-2 .body-l"));ae.length&&(gsapWithCSS.set(ae,{yPercent:0}),ne.to(ae,{yPercent:-100,duration:1},1))}function initTeam(te=document){const ee=(te||document).querySelector(".section_work-team");ee&&initWorkTeamSection(ee);const ne=(te||document).querySelector(".equity-inner");ne&&initEquitySlider(ne);const se=(te||document).querySelector(".section_positions");if(se&&typeof window!="undefined"&&window.innerWidth>767&&abbreviatePositionsEyebrows(se),se&&typeof window!="undefined"){let ae=window.innerWidth>767,ue;window.addEventListener("resize",()=>{clearTimeout(ue),ue=setTimeout(()=>{const de=window.innerWidth>767;de!==ae&&(de?abbreviatePositionsEyebrows(se):restorePositionsEyebrows(se),ae=de)},150)})}}function abbreviatePositionsEyebrows(te){try{const ee=Array.from(te.querySelectorAll(".sissmac-row .eyebrow-wrapper .eyebrow-m"));if(!ee.length)return;ee.forEach(ne=>{if(ne.dataset.abbrevApplied==="1")return;ne.dataset.abbrevOriginal||(ne.dataset.abbrevOriginal=ne.innerHTML);const se=ne.textContent||"";if(!se.trim())return;const ae=se.match(/^(\s*)(\S+)([\s\S]*)$/);if(!ae)return;const ue=ae[1]||"",de=ae[2]||"",oe=ae[3]||"",me=de.slice(0,3);let ve=ue+me+oe;ve=ve.replace(/,\s*/,",<br> "),ne.innerHTML=ve,ne.dataset.abbrevApplied="1"})}catch{}}function restorePositionsEyebrows(te){try{const ee=Array.from(te.querySelectorAll(".sissmac-row .eyebrow-wrapper .eyebrow-m"));if(!ee.length)return;ee.forEach(ne=>{if(ne.dataset.abbrevApplied==="1"){const se=ne.dataset.abbrevOriginal;typeof se=="string"&&(ne.innerHTML=se),delete ne.dataset.abbrevApplied,delete ne.dataset.abbrevOriginal}})}catch{}}function getNavbarBaseOffset$2(){try{return typeof window!="undefined"&&typeof window.matchMedia=="function"&&window.matchMedia("(max-width: 991px)").matches?"1em":"2em"}catch{return"2em"}}gsapWithCSS.registerPlugin(CustomEase);const easeCurve$5="M0,0 C0.6,0 0,1 1,1 ";function heroAnimation(te=document,ee={}){const ne=te&&te.querySelector?te:document;try{const Pe=ne.querySelector(".hero-background .background_video video")||document.querySelector(".hero-background .background_video video");if(Pe){Pe.muted=!0,Pe.playsInline=!0,typeof Pe.currentTime=="number"&&(Pe.currentTime=0);const ye=Pe.play();ye&&typeof ye.then=="function"&&ye.catch(()=>{Pe.muted=!0,Pe.play().catch(()=>{})})}}catch{}const se=Array.from(ne.querySelectorAll(".is-h1-span")),ae=Array.from(ne.querySelectorAll(".section_hero .body-xl, .eyebrow-l")),ue=[...se,...ae];if(!ue.length)return;const de=typeof ee.duration=="number"?ee.duration:1.2,oe=ee.ease||gsapWithCSS.parseEase(`custom(${easeCurve$5})`),me=gsapWithCSS.timeline();try{const Pe=ne.querySelector(".navbar")||document.querySelector(".navbar");if(Pe){const ye=getComputedStyle(Pe),Te=getNavbarBaseOffset$2();(ye.left!==Te||ye.right!==Te)&&me.to(Pe,{left:Te,right:Te,duration:de,ease:oe,overwrite:"auto"},0)}}catch{}const ve=.03;ue.forEach((Pe,ye)=>{const Te=ye*ve;me.set(Pe,{autoAlpha:1},Te);const Ae=Pe.matches(".eyebrow-l")?130:110;me.fromTo(Pe,{yPercent:Ae,y:0},{yPercent:0,y:0,duration:de,ease:oe,overwrite:"auto"},Te)});const Ee=Array.from(ne.querySelectorAll(".section_hero .card"));if(Ee.length){const Pe=[110,120],ye=.5;Ee.forEach((Te,Ae)=>{const Ce=Pe[Ae]!=null?Pe[Ae]:100,De=ye;me.set(Te,{autoAlpha:1},De),me.fromTo(Te,{yPercent:Ce,y:0},{yPercent:0,y:0,duration:de,ease:oe,overwrite:"auto"},De)})}}function initLoader(){try{gsapWithCSS.registerPlugin(CustomEase);const te="M0,0 C0.6,0 0,1 1,1 ",ee=CustomEase.create("loaderEase",te),ne=document.querySelector(".loader"),se=document.querySelector(".loader_inner"),ae=document.querySelector(".loader-logo_wrap"),ue=document.querySelector(".logo-inner"),de=document.querySelector(".is-logo-icon"),oe=document.querySelector(".logo-icon"),me=document.querySelector(".logo-square"),ve=document.querySelector(".is-logo-text"),Ee=document.querySelector(".is-logo-text .logo-text"),Pe=document.querySelectorAll(".background_video");let ye=null,Te=null,Ae=null;if(!ne||!se||!ae||!ue||!de||!oe||!ve||!Ee)return null;const Ce=Array.from(Ee.querySelectorAll("path"));try{ye=document.createElement("div"),ye.className="loader-logo_outline",document.body.appendChild(ye),gsapWithCSS.set(ye,{position:"fixed",pointerEvents:"none",zIndex:2147483647,autoAlpha:0,mixBlendMode:"normal"}),Te=()=>{const Qe=ae.getBoundingClientRect();gsapWithCSS.set(ye,{left:Qe.left,top:Qe.top,width:Qe.width,height:Qe.height})},Te(),gsapWithCSS.ticker.add(Te),Ae=()=>Te(),window.addEventListener("resize",Ae)}catch{}const De=(Qe,it)=>{const Ge=parseFloat(getComputedStyle(Qe).fontSize)||16;return it*Ge},Ie=ue.getBoundingClientRect().width||0,Re=De(ae,7.46),Oe=gsapWithCSS.timeline({defaults:{ease:"power2.out"}});Pe&&Pe.length&&gsapWithCSS.set(Pe,{width:"100%",height:"100%"});try{const Qe=document.querySelector(".background-inner");Qe&&gsapWithCSS.set(Qe,{transformOrigin:"50% 50%",scale:1})}catch{}gsapWithCSS.set(ve,{opacity:0}),me&&(gsapWithCSS.set(me,{width:"0%",height:"0%"}),Oe.to(me,{width:"100%",height:"100%",duration:.8,ease:ee},0)),Oe.from(oe,{yPercent:100,rotation:70,transformOrigin:"50% 50%",duration:.8,ease:ee},0),Oe.set(ae,{backgroundColor:"var(--primary)"},">"),ye&&Oe.set(ye,{autoAlpha:1},">"),Oe.to(ve,{opacity:1,duration:.3,ease:ee},"<"),Oe.to(ae,{width:Ie,duration:.8,ease:ee},"<"),Oe.from(Ce,{yPercent:Qe=>100+Qe*40,stagger:.02,duration:.8},"<"),Oe.set(ae,{justifyContent:"flex-end"}),Oe.to(ae,{width:Re,duration:.3,ease:ee});const qe=window.matchMedia&&window.matchMedia("(max-width: 991px)").matches||window.innerWidth<=991,Ue=!!(window.CSS&&CSS.supports)&&CSS.supports("-webkit-touch-callout","none"),Ye=typeof navigator!="undefined"&&typeof navigator.platform=="string"&&navigator.platform.startsWith("Mac"),ct=typeof navigator!="undefined",at=ct&&typeof navigator.userAgent=="string"?navigator.userAgent:"",ft=ct&&typeof navigator.vendor=="string"?navigator.vendor:"",pt=/Safari/i.test(at)&&!/Chrome|Chromium|Edg|OPR|Brave/i.test(at),Mt=/Apple/i.test(ft),At=!!Ue&&!!Ye||Ye&&(pt||Mt);if(At)try{console.log("safari detected")}catch{}if(qe||At)return Oe.add(()=>{try{Te&&gsapWithCSS.ticker.remove(Te),Ae&&window.removeEventListener("resize",Ae),ye&&ye.remove()}catch{}}),Oe.add(()=>{try{heroAnimation()}catch{}},">"),Oe.add(()=>{try{initContactHero(document,{animate:!0,duration:1.2,ease:ee})}catch{}},"<"),Oe.add(()=>{try{initHeroBackgroundParallax(document)}catch{}},"<"),Oe.to(".background-inner",{scale:1.2,transformOrigin:"50% 50%",duration:1.2,ease:ee},"<"),Oe.to(ne,{opacity:0,duration:.5,ease:ee},"<"),Oe.add(()=>{try{ne.remove()}catch{}}),Oe;let _t=null;return Oe.add(()=>{const Qe=ve.getBoundingClientRect(),it=Ee.getBoundingClientRect(),Ge=getComputedStyle(ve),je=parseFloat(Ge.marginLeft||"0")||0;document.body.appendChild(ve),de.remove(),ae.remove();try{Te&&gsapWithCSS.ticker.remove(Te),Ae&&window.removeEventListener("resize",Ae),ye&&ye.remove()}catch{}Object.assign(ve.style,{position:"fixed",left:`${Qe.left-je}px`,top:`${Qe.top}px`,width:`${Qe.width}px`,height:`${Qe.height}px`,overflow:"visible",zIndex:"1001"}),Object.assign(Ee.style,{position:"fixed",left:`${it.left}px`,top:`${it.top}px`,width:`${it.width}px`,height:`${it.height}px`,pointerEvents:"none",zIndex:"1002",willChange:"opacity",backfaceVisibility:"hidden",transform:"translateZ(0)"});const Ke="http://www.w3.org/2000/svg",lt=document.createElementNS(Ke,"svg"),Bt=document.createElementNS(Ke,"defs"),Xt=document.createElementNS(Ke,"mask"),Gt=document.createElementNS(Ke,"rect"),lr=document.createElementNS(Ke,"rect"),yr=window.innerWidth,Lr=window.innerHeight;lt.setAttribute("width","0"),lt.setAttribute("height","0"),lt.setAttribute("viewBox",`0 0 ${yr} ${Lr}`),lt.setAttribute("preserveAspectRatio","none"),Object.assign(lt.style,{position:"absolute",width:"0",height:"0"}),Xt.setAttribute("id","pageRevealMask"),Xt.setAttribute("maskUnits","userSpaceOnUse"),Xt.setAttribute("maskContentUnits","userSpaceOnUse"),Xt.setAttribute("style","mask-type:luminance;"),Gt.setAttribute("x","0"),Gt.setAttribute("y","0"),Gt.setAttribute("width",String(yr)),Gt.setAttribute("height",String(Lr)),Gt.setAttribute("fill","white");const Nr=parseFloat(getComputedStyle(document.documentElement).fontSize)||16,$r=parseFloat(Ge.borderTopLeftRadius||"0")||Nr*.5;lr.setAttribute("x",String(Qe.left)),lr.setAttribute("y",String(Qe.top)),lr.setAttribute("width",String(Qe.width)),lr.setAttribute("height",String(Qe.height)),lr.setAttribute("fill","black"),lr.setAttribute("rx",String($r)),lr.setAttribute("ry",String($r)),Xt.appendChild(Gt),Xt.appendChild(lr),Bt.appendChild(Xt),lt.appendChild(Bt),ve.appendChild(lt),ne.style.mask="url(#pageRevealMask)",ne.style.webkitMask="url(#pageRevealMask)",_t=lr}),Oe.to(ve,{left:()=>"-24px",top:()=>"-24px",width:()=>`${window.innerWidth+48}px`,height:()=>`${window.innerHeight+48}px`,marginLeft:0,duration:1.1,ease:ee}),Oe.to(ve,{backgroundColor:"transparent",duration:.55,ease:ee},"<"),Oe.add(()=>{if(!_t)return;const Qe=window.innerWidth,it=window.innerHeight;gsapWithCSS.to(_t,{attr:{x:-24,y:-24,width:Qe+48,height:it+48},duration:1.1,ease:ee})},"<"),Oe.add(()=>{try{heroAnimation()}catch{}},"<"),Oe.add(()=>{try{initContactHero(document,{animate:!0,duration:1.2,ease:ee})}catch{}},"<"),Oe.add(()=>{try{initHeroBackgroundParallax(document)}catch{}},"<"),Oe.to(".background-inner",{scale:1.2,transformOrigin:"50% 50%",duration:1.2,ease:ee},"<"),Oe.to(Ee,{opacity:0,duration:1.1,ease:ee},"<"),Oe.add(()=>{try{ne.remove()}catch{}try{ve.remove()}catch{}}),Oe}catch{return null}}function isObject$1(te){return te!==null&&typeof te=="object"&&"constructor"in te&&te.constructor===Object}function extend$1(te={},ee={}){const ne=["__proto__","constructor","prototype"];Object.keys(ee).filter(se=>ne.indexOf(se)<0).forEach(se=>{typeof te[se]=="undefined"?te[se]=ee[se]:isObject$1(ee[se])&&isObject$1(te[se])&&Object.keys(ee[se]).length>0&&extend$1(te[se],ee[se])})}const ssrDocument={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function getDocument(){const te=typeof document!="undefined"?document:{};return extend$1(te,ssrDocument),te}const ssrWindow={document:ssrDocument,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(te){return typeof setTimeout=="undefined"?(te(),null):setTimeout(te,0)},cancelAnimationFrame(te){typeof setTimeout!="undefined"&&clearTimeout(te)}};function getWindow(){const te=typeof window!="undefined"?window:{};return extend$1(te,ssrWindow),te}function classesToTokens(te=""){return te.trim().split(" ").filter(ee=>!!ee.trim())}function deleteProps(te){const ee=te;Object.keys(ee).forEach(ne=>{try{ee[ne]=null}catch{}try{delete ee[ne]}catch{}})}function nextTick(te,ee=0){return setTimeout(te,ee)}function now(){return Date.now()}function getComputedStyle$1(te){const ee=getWindow();let ne;return ee.getComputedStyle&&(ne=ee.getComputedStyle(te,null)),!ne&&te.currentStyle&&(ne=te.currentStyle),ne||(ne=te.style),ne}function getTranslate(te,ee="x"){const ne=getWindow();let se,ae,ue;const de=getComputedStyle$1(te);return ne.WebKitCSSMatrix?(ae=de.transform||de.webkitTransform,ae.split(",").length>6&&(ae=ae.split(", ").map(oe=>oe.replace(",",".")).join(", ")),ue=new ne.WebKitCSSMatrix(ae==="none"?"":ae)):(ue=de.MozTransform||de.OTransform||de.MsTransform||de.msTransform||de.transform||de.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),se=ue.toString().split(",")),ee==="x"&&(ne.WebKitCSSMatrix?ae=ue.m41:se.length===16?ae=parseFloat(se[12]):ae=parseFloat(se[4])),ee==="y"&&(ne.WebKitCSSMatrix?ae=ue.m42:se.length===16?ae=parseFloat(se[13]):ae=parseFloat(se[5])),ae||0}function isObject(te){return typeof te=="object"&&te!==null&&te.constructor&&Object.prototype.toString.call(te).slice(8,-1)==="Object"}function isNode(te){return typeof window!="undefined"&&typeof window.HTMLElement!="undefined"?te instanceof HTMLElement:te&&(te.nodeType===1||te.nodeType===11)}function extend(...te){const ee=Object(te[0]),ne=["__proto__","constructor","prototype"];for(let se=1;se<te.length;se+=1){const ae=te[se];if(ae!=null&&!isNode(ae)){const ue=Object.keys(Object(ae)).filter(de=>ne.indexOf(de)<0);for(let de=0,oe=ue.length;de<oe;de+=1){const me=ue[de],ve=Object.getOwnPropertyDescriptor(ae,me);ve!==void 0&&ve.enumerable&&(isObject(ee[me])&&isObject(ae[me])?ae[me].__swiper__?ee[me]=ae[me]:extend(ee[me],ae[me]):!isObject(ee[me])&&isObject(ae[me])?(ee[me]={},ae[me].__swiper__?ee[me]=ae[me]:extend(ee[me],ae[me])):ee[me]=ae[me])}}}return ee}function setCSSProperty(te,ee,ne){te.style.setProperty(ee,ne)}function animateCSSModeScroll({swiper:te,targetPosition:ee,side:ne}){const se=getWindow(),ae=-te.translate;let ue=null,de;const oe=te.params.speed;te.wrapperEl.style.scrollSnapType="none",se.cancelAnimationFrame(te.cssModeFrameID);const me=ee>ae?"next":"prev",ve=(Pe,ye)=>me==="next"&&Pe>=ye||me==="prev"&&Pe<=ye,Ee=()=>{de=new Date().getTime(),ue===null&&(ue=de);const Pe=Math.max(Math.min((de-ue)/oe,1),0),ye=.5-Math.cos(Pe*Math.PI)/2;let Te=ae+ye*(ee-ae);if(ve(Te,ee)&&(Te=ee),te.wrapperEl.scrollTo({[ne]:Te}),ve(Te,ee)){te.wrapperEl.style.overflow="hidden",te.wrapperEl.style.scrollSnapType="",setTimeout(()=>{te.wrapperEl.style.overflow="",te.wrapperEl.scrollTo({[ne]:Te})}),se.cancelAnimationFrame(te.cssModeFrameID);return}te.cssModeFrameID=se.requestAnimationFrame(Ee)};Ee()}function elementChildren(te,ee=""){const ne=getWindow(),se=[...te.children];return ne.HTMLSlotElement&&te instanceof HTMLSlotElement&&se.push(...te.assignedElements()),ee?se.filter(ae=>ae.matches(ee)):se}function elementIsChildOfSlot(te,ee){const ne=[ee];for(;ne.length>0;){const se=ne.shift();if(te===se)return!0;ne.push(...se.children,...se.shadowRoot?se.shadowRoot.children:[],...se.assignedElements?se.assignedElements():[])}}function elementIsChildOf(te,ee){const ne=getWindow();let se=ee.contains(te);return!se&&ne.HTMLSlotElement&&ee instanceof HTMLSlotElement&&(se=[...ee.assignedElements()].includes(te),se||(se=elementIsChildOfSlot(te,ee))),se}function showWarning(te){try{console.warn(te);return}catch{}}function createElement(te,ee=[]){const ne=document.createElement(te);return ne.classList.add(...Array.isArray(ee)?ee:classesToTokens(ee)),ne}function elementPrevAll(te,ee){const ne=[];for(;te.previousElementSibling;){const se=te.previousElementSibling;ee?se.matches(ee)&&ne.push(se):ne.push(se),te=se}return ne}function elementNextAll(te,ee){const ne=[];for(;te.nextElementSibling;){const se=te.nextElementSibling;ee?se.matches(ee)&&ne.push(se):ne.push(se),te=se}return ne}function elementStyle(te,ee){return getWindow().getComputedStyle(te,null).getPropertyValue(ee)}function elementIndex(te){let ee=te,ne;if(ee){for(ne=0;(ee=ee.previousSibling)!==null;)ee.nodeType===1&&(ne+=1);return ne}}function elementParents(te,ee){const ne=[];let se=te.parentElement;for(;se;)ee?se.matches(ee)&&ne.push(se):ne.push(se),se=se.parentElement;return ne}function elementOuterSize(te,ee,ne){const se=getWindow();return ne?te[ee==="width"?"offsetWidth":"offsetHeight"]+parseFloat(se.getComputedStyle(te,null).getPropertyValue(ee==="width"?"margin-right":"margin-top"))+parseFloat(se.getComputedStyle(te,null).getPropertyValue(ee==="width"?"margin-left":"margin-bottom")):te.offsetWidth}let support;function calcSupport(){const te=getWindow(),ee=getDocument();return{smoothScroll:ee.documentElement&&ee.documentElement.style&&"scrollBehavior"in ee.documentElement.style,touch:!!("ontouchstart"in te||te.DocumentTouch&&ee instanceof te.DocumentTouch)}}function getSupport(){return support||(support=calcSupport()),support}let deviceCached;function calcDevice({userAgent:te}={}){const ee=getSupport(),ne=getWindow(),se=ne.navigator.platform,ae=te||ne.navigator.userAgent,ue={ios:!1,android:!1},de=ne.screen.width,oe=ne.screen.height,me=ae.match(/(Android);?[\s\/]+([\d.]+)?/);let ve=ae.match(/(iPad)(?!\1).*OS\s([\d_]+)/);const Ee=ae.match(/(iPod)(.*OS\s([\d_]+))?/),Pe=!ve&&ae.match(/(iPhone\sOS|iOS)\s([\d_]+)/),ye=se==="Win32";let Te=se==="MacIntel";const Ae=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!ve&&Te&&ee.touch&&Ae.indexOf(`${de}x${oe}`)>=0&&(ve=ae.match(/(Version)\/([\d.]+)/),ve||(ve=[0,1,"13_0_0"]),Te=!1),me&&!ye&&(ue.os="android",ue.android=!0),(ve||Pe||Ee)&&(ue.os="ios",ue.ios=!0),ue}function getDevice(te={}){return deviceCached||(deviceCached=calcDevice(te)),deviceCached}let browser;function calcBrowser(){const te=getWindow(),ee=getDevice();let ne=!1;function se(){const oe=te.navigator.userAgent.toLowerCase();return oe.indexOf("safari")>=0&&oe.indexOf("chrome")<0&&oe.indexOf("android")<0}if(se()){const oe=String(te.navigator.userAgent);if(oe.includes("Version/")){const[me,ve]=oe.split("Version/")[1].split(" ")[0].split(".").map(Ee=>Number(Ee));ne=me<16||me===16&&ve<2}}const ae=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(te.navigator.userAgent),ue=se(),de=ue||ae&&ee.ios;return{isSafari:ne||ue,needPerspectiveFix:ne,need3dFix:de,isWebView:ae}}function getBrowser(){return browser||(browser=calcBrowser()),browser}function Resize({swiper:te,on:ee,emit:ne}){const se=getWindow();let ae=null,ue=null;const de=()=>{!te||te.destroyed||!te.initialized||(ne("beforeResize"),ne("resize"))},oe=()=>{!te||te.destroyed||!te.initialized||(ae=new ResizeObserver(Ee=>{ue=se.requestAnimationFrame(()=>{const{width:Pe,height:ye}=te;let Te=Pe,Ae=ye;Ee.forEach(({contentBoxSize:Ce,contentRect:De,target:Ie})=>{Ie&&Ie!==te.el||(Te=De?De.width:(Ce[0]||Ce).inlineSize,Ae=De?De.height:(Ce[0]||Ce).blockSize)}),(Te!==Pe||Ae!==ye)&&de()})}),ae.observe(te.el))},me=()=>{ue&&se.cancelAnimationFrame(ue),ae&&ae.unobserve&&te.el&&(ae.unobserve(te.el),ae=null)},ve=()=>{!te||te.destroyed||!te.initialized||ne("orientationchange")};ee("init",()=>{if(te.params.resizeObserver&&typeof se.ResizeObserver!="undefined"){oe();return}se.addEventListener("resize",de),se.addEventListener("orientationchange",ve)}),ee("destroy",()=>{me(),se.removeEventListener("resize",de),se.removeEventListener("orientationchange",ve)})}function Observer({swiper:te,extendParams:ee,on:ne,emit:se}){const ae=[],ue=getWindow(),de=(ve,Ee={})=>{const Pe=ue.MutationObserver||ue.WebkitMutationObserver,ye=new Pe(Te=>{if(te.__preventObserver__)return;if(Te.length===1){se("observerUpdate",Te[0]);return}const Ae=function(){se("observerUpdate",Te[0])};ue.requestAnimationFrame?ue.requestAnimationFrame(Ae):ue.setTimeout(Ae,0)});ye.observe(ve,{attributes:typeof Ee.attributes=="undefined"?!0:Ee.attributes,childList:te.isElement||(typeof Ee.childList=="undefined"?!0:Ee).childList,characterData:typeof Ee.characterData=="undefined"?!0:Ee.characterData}),ae.push(ye)},oe=()=>{if(!!te.params.observer){if(te.params.observeParents){const ve=elementParents(te.hostEl);for(let Ee=0;Ee<ve.length;Ee+=1)de(ve[Ee])}de(te.hostEl,{childList:te.params.observeSlideChildren}),de(te.wrapperEl,{attributes:!1})}},me=()=>{ae.forEach(ve=>{ve.disconnect()}),ae.splice(0,ae.length)};ee({observer:!1,observeParents:!1,observeSlideChildren:!1}),ne("init",oe),ne("destroy",me)}var eventsEmitter={on(te,ee,ne){const se=this;if(!se.eventsListeners||se.destroyed||typeof ee!="function")return se;const ae=ne?"unshift":"push";return te.split(" ").forEach(ue=>{se.eventsListeners[ue]||(se.eventsListeners[ue]=[]),se.eventsListeners[ue][ae](ee)}),se},once(te,ee,ne){const se=this;if(!se.eventsListeners||se.destroyed||typeof ee!="function")return se;function ae(...ue){se.off(te,ae),ae.__emitterProxy&&delete ae.__emitterProxy,ee.apply(se,ue)}return ae.__emitterProxy=ee,se.on(te,ae,ne)},onAny(te,ee){const ne=this;if(!ne.eventsListeners||ne.destroyed||typeof te!="function")return ne;const se=ee?"unshift":"push";return ne.eventsAnyListeners.indexOf(te)<0&&ne.eventsAnyListeners[se](te),ne},offAny(te){const ee=this;if(!ee.eventsListeners||ee.destroyed||!ee.eventsAnyListeners)return ee;const ne=ee.eventsAnyListeners.indexOf(te);return ne>=0&&ee.eventsAnyListeners.splice(ne,1),ee},off(te,ee){const ne=this;return!ne.eventsListeners||ne.destroyed||!ne.eventsListeners||te.split(" ").forEach(se=>{typeof ee=="undefined"?ne.eventsListeners[se]=[]:ne.eventsListeners[se]&&ne.eventsListeners[se].forEach((ae,ue)=>{(ae===ee||ae.__emitterProxy&&ae.__emitterProxy===ee)&&ne.eventsListeners[se].splice(ue,1)})}),ne},emit(...te){const ee=this;if(!ee.eventsListeners||ee.destroyed||!ee.eventsListeners)return ee;let ne,se,ae;return typeof te[0]=="string"||Array.isArray(te[0])?(ne=te[0],se=te.slice(1,te.length),ae=ee):(ne=te[0].events,se=te[0].data,ae=te[0].context||ee),se.unshift(ae),(Array.isArray(ne)?ne:ne.split(" ")).forEach(de=>{ee.eventsAnyListeners&&ee.eventsAnyListeners.length&&ee.eventsAnyListeners.forEach(oe=>{oe.apply(ae,[de,...se])}),ee.eventsListeners&&ee.eventsListeners[de]&&ee.eventsListeners[de].forEach(oe=>{oe.apply(ae,se)})}),ee}};function updateSize(){const te=this;let ee,ne;const se=te.el;typeof te.params.width!="undefined"&&te.params.width!==null?ee=te.params.width:ee=se.clientWidth,typeof te.params.height!="undefined"&&te.params.height!==null?ne=te.params.height:ne=se.clientHeight,!(ee===0&&te.isHorizontal()||ne===0&&te.isVertical())&&(ee=ee-parseInt(elementStyle(se,"padding-left")||0,10)-parseInt(elementStyle(se,"padding-right")||0,10),ne=ne-parseInt(elementStyle(se,"padding-top")||0,10)-parseInt(elementStyle(se,"padding-bottom")||0,10),Number.isNaN(ee)&&(ee=0),Number.isNaN(ne)&&(ne=0),Object.assign(te,{width:ee,height:ne,size:te.isHorizontal()?ee:ne}))}function updateSlides(){const te=this;function ee(at,ft){return parseFloat(at.getPropertyValue(te.getDirectionLabel(ft))||0)}const ne=te.params,{wrapperEl:se,slidesEl:ae,rtlTranslate:ue,wrongRTL:de}=te,oe=te.virtual&&ne.virtual.enabled,me=oe?te.virtual.slides.length:te.slides.length,ve=elementChildren(ae,`.${te.params.slideClass}, swiper-slide`),Ee=oe?te.virtual.slides.length:ve.length;let Pe=[];const ye=[],Te=[];let Ae=ne.slidesOffsetBefore;typeof Ae=="function"&&(Ae=ne.slidesOffsetBefore.call(te));let Ce=ne.slidesOffsetAfter;typeof Ce=="function"&&(Ce=ne.slidesOffsetAfter.call(te));const De=te.snapGrid.length,Ie=te.slidesGrid.length,ze=te.size-Ae-Ce;let Re=ne.spaceBetween,Oe=-Ae,qe=0,Ze=0;if(typeof ze=="undefined")return;typeof Re=="string"&&Re.indexOf("%")>=0?Re=parseFloat(Re.replace("%",""))/100*ze:typeof Re=="string"&&(Re=parseFloat(Re)),te.virtualSize=-Re-Ae-Ce,ve.forEach(at=>{ue?at.style.marginLeft="":at.style.marginRight="",at.style.marginBottom="",at.style.marginTop=""}),ne.centeredSlides&&ne.cssMode&&(setCSSProperty(se,"--swiper-centered-offset-before",""),setCSSProperty(se,"--swiper-centered-offset-after",""));const Ue=ne.grid&&ne.grid.rows>1&&te.grid;Ue?te.grid.initSlides(ve):te.grid&&te.grid.unsetSlides();let Ye;const ct=ne.slidesPerView==="auto"&&ne.breakpoints&&Object.keys(ne.breakpoints).filter(at=>typeof ne.breakpoints[at].slidesPerView!="undefined").length>0;for(let at=0;at<Ee;at+=1){Ye=0;const ft=ve[at];if(!(ft&&(Ue&&te.grid.updateSlide(at,ft,ve),elementStyle(ft,"display")==="none"))){if(oe&&ne.slidesPerView==="auto")ne.virtual.slidesPerViewAutoSlideSize&&(Ye=ne.virtual.slidesPerViewAutoSlideSize),Ye&&ft&&(ne.roundLengths&&(Ye=Math.floor(Ye)),ft.style[te.getDirectionLabel("width")]=`${Ye}px`);else if(ne.slidesPerView==="auto"){ct&&(ft.style[te.getDirectionLabel("width")]="");const pt=getComputedStyle(ft),Mt=ft.style.transform,At=ft.style.webkitTransform;if(Mt&&(ft.style.transform="none"),At&&(ft.style.webkitTransform="none"),ne.roundLengths)Ye=te.isHorizontal()?elementOuterSize(ft,"width",!0):elementOuterSize(ft,"height",!0);else{const _t=ee(pt,"width"),Qe=ee(pt,"padding-left"),it=ee(pt,"padding-right"),Ge=ee(pt,"margin-left"),je=ee(pt,"margin-right"),Ke=pt.getPropertyValue("box-sizing");if(Ke&&Ke==="border-box")Ye=_t+Ge+je;else{const{clientWidth:lt,offsetWidth:Bt}=ft;Ye=_t+Qe+it+Ge+je+(Bt-lt)}}Mt&&(ft.style.transform=Mt),At&&(ft.style.webkitTransform=At),ne.roundLengths&&(Ye=Math.floor(Ye))}else Ye=(ze-(ne.slidesPerView-1)*Re)/ne.slidesPerView,ne.roundLengths&&(Ye=Math.floor(Ye)),ft&&(ft.style[te.getDirectionLabel("width")]=`${Ye}px`);ft&&(ft.swiperSlideSize=Ye),Te.push(Ye),ne.centeredSlides?(Oe=Oe+Ye/2+qe/2+Re,qe===0&&at!==0&&(Oe=Oe-ze/2-Re),at===0&&(Oe=Oe-ze/2-Re),Math.abs(Oe)<1/1e3&&(Oe=0),ne.roundLengths&&(Oe=Math.floor(Oe)),Ze%ne.slidesPerGroup===0&&Pe.push(Oe),ye.push(Oe)):(ne.roundLengths&&(Oe=Math.floor(Oe)),(Ze-Math.min(te.params.slidesPerGroupSkip,Ze))%te.params.slidesPerGroup===0&&Pe.push(Oe),ye.push(Oe),Oe=Oe+Ye+Re),te.virtualSize+=Ye+Re,qe=Ye,Ze+=1}}if(te.virtualSize=Math.max(te.virtualSize,ze)+Ce,ue&&de&&(ne.effect==="slide"||ne.effect==="coverflow")&&(se.style.width=`${te.virtualSize+Re}px`),ne.setWrapperSize&&(se.style[te.getDirectionLabel("width")]=`${te.virtualSize+Re}px`),Ue&&te.grid.updateWrapperSize(Ye,Pe),!ne.centeredSlides){const at=[];for(let ft=0;ft<Pe.length;ft+=1){let pt=Pe[ft];ne.roundLengths&&(pt=Math.floor(pt)),Pe[ft]<=te.virtualSize-ze&&at.push(pt)}Pe=at,Math.floor(te.virtualSize-ze)-Math.floor(Pe[Pe.length-1])>1&&Pe.push(te.virtualSize-ze)}if(oe&&ne.loop){const at=Te[0]+Re;if(ne.slidesPerGroup>1){const ft=Math.ceil((te.virtual.slidesBefore+te.virtual.slidesAfter)/ne.slidesPerGroup),pt=at*ne.slidesPerGroup;for(let Mt=0;Mt<ft;Mt+=1)Pe.push(Pe[Pe.length-1]+pt)}for(let ft=0;ft<te.virtual.slidesBefore+te.virtual.slidesAfter;ft+=1)ne.slidesPerGroup===1&&Pe.push(Pe[Pe.length-1]+at),ye.push(ye[ye.length-1]+at),te.virtualSize+=at}if(Pe.length===0&&(Pe=[0]),Re!==0){const at=te.isHorizontal()&&ue?"marginLeft":te.getDirectionLabel("marginRight");ve.filter((ft,pt)=>!ne.cssMode||ne.loop?!0:pt!==ve.length-1).forEach(ft=>{ft.style[at]=`${Re}px`})}if(ne.centeredSlides&&ne.centeredSlidesBounds){let at=0;Te.forEach(pt=>{at+=pt+(Re||0)}),at-=Re;const ft=at>ze?at-ze:0;Pe=Pe.map(pt=>pt<=0?-Ae:pt>ft?ft+Ce:pt)}if(ne.centerInsufficientSlides){let at=0;Te.forEach(pt=>{at+=pt+(Re||0)}),at-=Re;const ft=(Ae||0)+(Ce||0);if(at+ft<ze){const pt=(ze-at-ft)/2;Pe.forEach((Mt,At)=>{Pe[At]=Mt-pt}),ye.forEach((Mt,At)=>{ye[At]=Mt+pt})}}if(Object.assign(te,{slides:ve,snapGrid:Pe,slidesGrid:ye,slidesSizesGrid:Te}),ne.centeredSlides&&ne.cssMode&&!ne.centeredSlidesBounds){setCSSProperty(se,"--swiper-centered-offset-before",`${-Pe[0]}px`),setCSSProperty(se,"--swiper-centered-offset-after",`${te.size/2-Te[Te.length-1]/2}px`);const at=-te.snapGrid[0],ft=-te.slidesGrid[0];te.snapGrid=te.snapGrid.map(pt=>pt+at),te.slidesGrid=te.slidesGrid.map(pt=>pt+ft)}if(Ee!==me&&te.emit("slidesLengthChange"),Pe.length!==De&&(te.params.watchOverflow&&te.checkOverflow(),te.emit("snapGridLengthChange")),ye.length!==Ie&&te.emit("slidesGridLengthChange"),ne.watchSlidesProgress&&te.updateSlidesOffset(),te.emit("slidesUpdated"),!oe&&!ne.cssMode&&(ne.effect==="slide"||ne.effect==="fade")){const at=`${ne.containerModifierClass}backface-hidden`,ft=te.el.classList.contains(at);Ee<=ne.maxBackfaceHiddenSlides?ft||te.el.classList.add(at):ft&&te.el.classList.remove(at)}}function updateAutoHeight(te){const ee=this,ne=[],se=ee.virtual&&ee.params.virtual.enabled;let ae=0,ue;typeof te=="number"?ee.setTransition(te):te===!0&&ee.setTransition(ee.params.speed);const de=oe=>se?ee.slides[ee.getSlideIndexByData(oe)]:ee.slides[oe];if(ee.params.slidesPerView!=="auto"&&ee.params.slidesPerView>1)if(ee.params.centeredSlides)(ee.visibleSlides||[]).forEach(oe=>{ne.push(oe)});else for(ue=0;ue<Math.ceil(ee.params.slidesPerView);ue+=1){const oe=ee.activeIndex+ue;if(oe>ee.slides.length&&!se)break;ne.push(de(oe))}else ne.push(de(ee.activeIndex));for(ue=0;ue<ne.length;ue+=1)if(typeof ne[ue]!="undefined"){const oe=ne[ue].offsetHeight;ae=oe>ae?oe:ae}(ae||ae===0)&&(ee.wrapperEl.style.height=`${ae}px`)}function updateSlidesOffset(){const te=this,ee=te.slides,ne=te.isElement?te.isHorizontal()?te.wrapperEl.offsetLeft:te.wrapperEl.offsetTop:0;for(let se=0;se<ee.length;se+=1)ee[se].swiperSlideOffset=(te.isHorizontal()?ee[se].offsetLeft:ee[se].offsetTop)-ne-te.cssOverflowAdjustment()}const toggleSlideClasses$1=(te,ee,ne)=>{ee&&!te.classList.contains(ne)?te.classList.add(ne):!ee&&te.classList.contains(ne)&&te.classList.remove(ne)};function updateSlidesProgress(te=this&&this.translate||0){const ee=this,ne=ee.params,{slides:se,rtlTranslate:ae,snapGrid:ue}=ee;if(se.length===0)return;typeof se[0].swiperSlideOffset=="undefined"&&ee.updateSlidesOffset();let de=-te;ae&&(de=te),ee.visibleSlidesIndexes=[],ee.visibleSlides=[];let oe=ne.spaceBetween;typeof oe=="string"&&oe.indexOf("%")>=0?oe=parseFloat(oe.replace("%",""))/100*ee.size:typeof oe=="string"&&(oe=parseFloat(oe));for(let me=0;me<se.length;me+=1){const ve=se[me];let Ee=ve.swiperSlideOffset;ne.cssMode&&ne.centeredSlides&&(Ee-=se[0].swiperSlideOffset);const Pe=(de+(ne.centeredSlides?ee.minTranslate():0)-Ee)/(ve.swiperSlideSize+oe),ye=(de-ue[0]+(ne.centeredSlides?ee.minTranslate():0)-Ee)/(ve.swiperSlideSize+oe),Te=-(de-Ee),Ae=Te+ee.slidesSizesGrid[me],Ce=Te>=0&&Te<=ee.size-ee.slidesSizesGrid[me],De=Te>=0&&Te<ee.size-1||Ae>1&&Ae<=ee.size||Te<=0&&Ae>=ee.size;De&&(ee.visibleSlides.push(ve),ee.visibleSlidesIndexes.push(me)),toggleSlideClasses$1(ve,De,ne.slideVisibleClass),toggleSlideClasses$1(ve,Ce,ne.slideFullyVisibleClass),ve.progress=ae?-Pe:Pe,ve.originalProgress=ae?-ye:ye}}function updateProgress(te){const ee=this;if(typeof te=="undefined"){const Ee=ee.rtlTranslate?-1:1;te=ee&&ee.translate&&ee.translate*Ee||0}const ne=ee.params,se=ee.maxTranslate()-ee.minTranslate();let{progress:ae,isBeginning:ue,isEnd:de,progressLoop:oe}=ee;const me=ue,ve=de;if(se===0)ae=0,ue=!0,de=!0;else{ae=(te-ee.minTranslate())/se;const Ee=Math.abs(te-ee.minTranslate())<1,Pe=Math.abs(te-ee.maxTranslate())<1;ue=Ee||ae<=0,de=Pe||ae>=1,Ee&&(ae=0),Pe&&(ae=1)}if(ne.loop){const Ee=ee.getSlideIndexByData(0),Pe=ee.getSlideIndexByData(ee.slides.length-1),ye=ee.slidesGrid[Ee],Te=ee.slidesGrid[Pe],Ae=ee.slidesGrid[ee.slidesGrid.length-1],Ce=Math.abs(te);Ce>=ye?oe=(Ce-ye)/Ae:oe=(Ce+Ae-Te)/Ae,oe>1&&(oe-=1)}Object.assign(ee,{progress:ae,progressLoop:oe,isBeginning:ue,isEnd:de}),(ne.watchSlidesProgress||ne.centeredSlides&&ne.autoHeight)&&ee.updateSlidesProgress(te),ue&&!me&&ee.emit("reachBeginning toEdge"),de&&!ve&&ee.emit("reachEnd toEdge"),(me&&!ue||ve&&!de)&&ee.emit("fromEdge"),ee.emit("progress",ae)}const toggleSlideClasses=(te,ee,ne)=>{ee&&!te.classList.contains(ne)?te.classList.add(ne):!ee&&te.classList.contains(ne)&&te.classList.remove(ne)};function updateSlidesClasses(){const te=this,{slides:ee,params:ne,slidesEl:se,activeIndex:ae}=te,ue=te.virtual&&ne.virtual.enabled,de=te.grid&&ne.grid&&ne.grid.rows>1,oe=Pe=>elementChildren(se,`.${ne.slideClass}${Pe}, swiper-slide${Pe}`)[0];let me,ve,Ee;if(ue)if(ne.loop){let Pe=ae-te.virtual.slidesBefore;Pe<0&&(Pe=te.virtual.slides.length+Pe),Pe>=te.virtual.slides.length&&(Pe-=te.virtual.slides.length),me=oe(`[data-swiper-slide-index="${Pe}"]`)}else me=oe(`[data-swiper-slide-index="${ae}"]`);else de?(me=ee.find(Pe=>Pe.column===ae),Ee=ee.find(Pe=>Pe.column===ae+1),ve=ee.find(Pe=>Pe.column===ae-1)):me=ee[ae];me&&(de||(Ee=elementNextAll(me,`.${ne.slideClass}, swiper-slide`)[0],ne.loop&&!Ee&&(Ee=ee[0]),ve=elementPrevAll(me,`.${ne.slideClass}, swiper-slide`)[0],ne.loop&&!ve===0&&(ve=ee[ee.length-1]))),ee.forEach(Pe=>{toggleSlideClasses(Pe,Pe===me,ne.slideActiveClass),toggleSlideClasses(Pe,Pe===Ee,ne.slideNextClass),toggleSlideClasses(Pe,Pe===ve,ne.slidePrevClass)}),te.emitSlidesClasses()}const processLazyPreloader=(te,ee)=>{if(!te||te.destroyed||!te.params)return;const ne=()=>te.isElement?"swiper-slide":`.${te.params.slideClass}`,se=ee.closest(ne());if(se){let ae=se.querySelector(`.${te.params.lazyPreloaderClass}`);!ae&&te.isElement&&(se.shadowRoot?ae=se.shadowRoot.querySelector(`.${te.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{se.shadowRoot&&(ae=se.shadowRoot.querySelector(`.${te.params.lazyPreloaderClass}`),ae&&ae.remove())})),ae&&ae.remove()}},unlazy=(te,ee)=>{if(!te.slides[ee])return;const ne=te.slides[ee].querySelector('[loading="lazy"]');ne&&ne.removeAttribute("loading")},preload=te=>{if(!te||te.destroyed||!te.params)return;let ee=te.params.lazyPreloadPrevNext;const ne=te.slides.length;if(!ne||!ee||ee<0)return;ee=Math.min(ee,ne);const se=te.params.slidesPerView==="auto"?te.slidesPerViewDynamic():Math.ceil(te.params.slidesPerView),ae=te.activeIndex;if(te.params.grid&&te.params.grid.rows>1){const de=ae,oe=[de-ee];oe.push(...Array.from({length:ee}).map((me,ve)=>de+se+ve)),te.slides.forEach((me,ve)=>{oe.includes(me.column)&&unlazy(te,ve)});return}const ue=ae+se-1;if(te.params.rewind||te.params.loop)for(let de=ae-ee;de<=ue+ee;de+=1){const oe=(de%ne+ne)%ne;(oe<ae||oe>ue)&&unlazy(te,oe)}else for(let de=Math.max(ae-ee,0);de<=Math.min(ue+ee,ne-1);de+=1)de!==ae&&(de>ue||de<ae)&&unlazy(te,de)};function getActiveIndexByTranslate(te){const{slidesGrid:ee,params:ne}=te,se=te.rtlTranslate?te.translate:-te.translate;let ae;for(let ue=0;ue<ee.length;ue+=1)typeof ee[ue+1]!="undefined"?se>=ee[ue]&&se<ee[ue+1]-(ee[ue+1]-ee[ue])/2?ae=ue:se>=ee[ue]&&se<ee[ue+1]&&(ae=ue+1):se>=ee[ue]&&(ae=ue);return ne.normalizeSlideIndex&&(ae<0||typeof ae=="undefined")&&(ae=0),ae}function updateActiveIndex(te){const ee=this,ne=ee.rtlTranslate?ee.translate:-ee.translate,{snapGrid:se,params:ae,activeIndex:ue,realIndex:de,snapIndex:oe}=ee;let me=te,ve;const Ee=Te=>{let Ae=Te-ee.virtual.slidesBefore;return Ae<0&&(Ae=ee.virtual.slides.length+Ae),Ae>=ee.virtual.slides.length&&(Ae-=ee.virtual.slides.length),Ae};if(typeof me=="undefined"&&(me=getActiveIndexByTranslate(ee)),se.indexOf(ne)>=0)ve=se.indexOf(ne);else{const Te=Math.min(ae.slidesPerGroupSkip,me);ve=Te+Math.floor((me-Te)/ae.slidesPerGroup)}if(ve>=se.length&&(ve=se.length-1),me===ue&&!ee.params.loop){ve!==oe&&(ee.snapIndex=ve,ee.emit("snapIndexChange"));return}if(me===ue&&ee.params.loop&&ee.virtual&&ee.params.virtual.enabled){ee.realIndex=Ee(me);return}const Pe=ee.grid&&ae.grid&&ae.grid.rows>1;let ye;if(ee.virtual&&ae.virtual.enabled&&ae.loop)ye=Ee(me);else if(Pe){const Te=ee.slides.find(Ce=>Ce.column===me);let Ae=parseInt(Te.getAttribute("data-swiper-slide-index"),10);Number.isNaN(Ae)&&(Ae=Math.max(ee.slides.indexOf(Te),0)),ye=Math.floor(Ae/ae.grid.rows)}else if(ee.slides[me]){const Te=ee.slides[me].getAttribute("data-swiper-slide-index");Te?ye=parseInt(Te,10):ye=me}else ye=me;Object.assign(ee,{previousSnapIndex:oe,snapIndex:ve,previousRealIndex:de,realIndex:ye,previousIndex:ue,activeIndex:me}),ee.initialized&&preload(ee),ee.emit("activeIndexChange"),ee.emit("snapIndexChange"),(ee.initialized||ee.params.runCallbacksOnInit)&&(de!==ye&&ee.emit("realIndexChange"),ee.emit("slideChange"))}function updateClickedSlide(te,ee){const ne=this,se=ne.params;let ae=te.closest(`.${se.slideClass}, swiper-slide`);!ae&&ne.isElement&&ee&&ee.length>1&&ee.includes(te)&&[...ee.slice(ee.indexOf(te)+1,ee.length)].forEach(oe=>{!ae&&oe.matches&&oe.matches(`.${se.slideClass}, swiper-slide`)&&(ae=oe)});let ue=!1,de;if(ae){for(let oe=0;oe<ne.slides.length;oe+=1)if(ne.slides[oe]===ae){ue=!0,de=oe;break}}if(ae&&ue)ne.clickedSlide=ae,ne.virtual&&ne.params.virtual.enabled?ne.clickedIndex=parseInt(ae.getAttribute("data-swiper-slide-index"),10):ne.clickedIndex=de;else{ne.clickedSlide=void 0,ne.clickedIndex=void 0;return}se.slideToClickedSlide&&ne.clickedIndex!==void 0&&ne.clickedIndex!==ne.activeIndex&&ne.slideToClickedSlide()}var update={updateSize,updateSlides,updateAutoHeight,updateSlidesOffset,updateSlidesProgress,updateProgress,updateSlidesClasses,updateActiveIndex,updateClickedSlide};function getSwiperTranslate(te=this.isHorizontal()?"x":"y"){const ee=this,{params:ne,rtlTranslate:se,translate:ae,wrapperEl:ue}=ee;if(ne.virtualTranslate)return se?-ae:ae;if(ne.cssMode)return ae;let de=getTranslate(ue,te);return de+=ee.cssOverflowAdjustment(),se&&(de=-de),de||0}function setTranslate(te,ee){const ne=this,{rtlTranslate:se,params:ae,wrapperEl:ue,progress:de}=ne;let oe=0,me=0;const ve=0;ne.isHorizontal()?oe=se?-te:te:me=te,ae.roundLengths&&(oe=Math.floor(oe),me=Math.floor(me)),ne.previousTranslate=ne.translate,ne.translate=ne.isHorizontal()?oe:me,ae.cssMode?ue[ne.isHorizontal()?"scrollLeft":"scrollTop"]=ne.isHorizontal()?-oe:-me:ae.virtualTranslate||(ne.isHorizontal()?oe-=ne.cssOverflowAdjustment():me-=ne.cssOverflowAdjustment(),ue.style.transform=`translate3d(${oe}px, ${me}px, ${ve}px)`);let Ee;const Pe=ne.maxTranslate()-ne.minTranslate();Pe===0?Ee=0:Ee=(te-ne.minTranslate())/Pe,Ee!==de&&ne.updateProgress(te),ne.emit("setTranslate",ne.translate,ee)}function minTranslate(){return-this.snapGrid[0]}function maxTranslate(){return-this.snapGrid[this.snapGrid.length-1]}function translateTo(te=0,ee=this.params.speed,ne=!0,se=!0,ae){const ue=this,{params:de,wrapperEl:oe}=ue;if(ue.animating&&de.preventInteractionOnTransition)return!1;const me=ue.minTranslate(),ve=ue.maxTranslate();let Ee;if(se&&te>me?Ee=me:se&&te<ve?Ee=ve:Ee=te,ue.updateProgress(Ee),de.cssMode){const Pe=ue.isHorizontal();if(ee===0)oe[Pe?"scrollLeft":"scrollTop"]=-Ee;else{if(!ue.support.smoothScroll)return animateCSSModeScroll({swiper:ue,targetPosition:-Ee,side:Pe?"left":"top"}),!0;oe.scrollTo({[Pe?"left":"top"]:-Ee,behavior:"smooth"})}return!0}return ee===0?(ue.setTransition(0),ue.setTranslate(Ee),ne&&(ue.emit("beforeTransitionStart",ee,ae),ue.emit("transitionEnd"))):(ue.setTransition(ee),ue.setTranslate(Ee),ne&&(ue.emit("beforeTransitionStart",ee,ae),ue.emit("transitionStart")),ue.animating||(ue.animating=!0,ue.onTranslateToWrapperTransitionEnd||(ue.onTranslateToWrapperTransitionEnd=function(ye){!ue||ue.destroyed||ye.target===this&&(ue.wrapperEl.removeEventListener("transitionend",ue.onTranslateToWrapperTransitionEnd),ue.onTranslateToWrapperTransitionEnd=null,delete ue.onTranslateToWrapperTransitionEnd,ue.animating=!1,ne&&ue.emit("transitionEnd"))}),ue.wrapperEl.addEventListener("transitionend",ue.onTranslateToWrapperTransitionEnd))),!0}var translate={getTranslate:getSwiperTranslate,setTranslate,minTranslate,maxTranslate,translateTo};function setTransition(te,ee){const ne=this;ne.params.cssMode||(ne.wrapperEl.style.transitionDuration=`${te}ms`,ne.wrapperEl.style.transitionDelay=te===0?"0ms":""),ne.emit("setTransition",te,ee)}function transitionEmit({swiper:te,runCallbacks:ee,direction:ne,step:se}){const{activeIndex:ae,previousIndex:ue}=te;let de=ne;de||(ae>ue?de="next":ae<ue?de="prev":de="reset"),te.emit(`transition${se}`),ee&&de==="reset"?te.emit(`slideResetTransition${se}`):ee&&ae!==ue&&(te.emit(`slideChangeTransition${se}`),de==="next"?te.emit(`slideNextTransition${se}`):te.emit(`slidePrevTransition${se}`))}function transitionStart(te=!0,ee){const ne=this,{params:se}=ne;se.cssMode||(se.autoHeight&&ne.updateAutoHeight(),transitionEmit({swiper:ne,runCallbacks:te,direction:ee,step:"Start"}))}function transitionEnd(te=!0,ee){const ne=this,{params:se}=ne;ne.animating=!1,!se.cssMode&&(ne.setTransition(0),transitionEmit({swiper:ne,runCallbacks:te,direction:ee,step:"End"}))}var transition={setTransition,transitionStart,transitionEnd};function slideTo(te=0,ee,ne=!0,se,ae){typeof te=="string"&&(te=parseInt(te,10));const ue=this;let de=te;de<0&&(de=0);const{params:oe,snapGrid:me,slidesGrid:ve,previousIndex:Ee,activeIndex:Pe,rtlTranslate:ye,wrapperEl:Te,enabled:Ae}=ue;if(!Ae&&!se&&!ae||ue.destroyed||ue.animating&&oe.preventInteractionOnTransition)return!1;typeof ee=="undefined"&&(ee=ue.params.speed);const Ce=Math.min(ue.params.slidesPerGroupSkip,de);let De=Ce+Math.floor((de-Ce)/ue.params.slidesPerGroup);De>=me.length&&(De=me.length-1);const Ie=-me[De];if(oe.normalizeSlideIndex)for(let Ue=0;Ue<ve.length;Ue+=1){const Ye=-Math.floor(Ie*100),ct=Math.floor(ve[Ue]*100),at=Math.floor(ve[Ue+1]*100);typeof ve[Ue+1]!="undefined"?Ye>=ct&&Ye<at-(at-ct)/2?de=Ue:Ye>=ct&&Ye<at&&(de=Ue+1):Ye>=ct&&(de=Ue)}if(ue.initialized&&de!==Pe&&(!ue.allowSlideNext&&(ye?Ie>ue.translate&&Ie>ue.minTranslate():Ie<ue.translate&&Ie<ue.minTranslate())||!ue.allowSlidePrev&&Ie>ue.translate&&Ie>ue.maxTranslate()&&(Pe||0)!==de))return!1;de!==(Ee||0)&&ne&&ue.emit("beforeSlideChangeStart"),ue.updateProgress(Ie);let ze;de>Pe?ze="next":de<Pe?ze="prev":ze="reset";const Re=ue.virtual&&ue.params.virtual.enabled;if(!(Re&&ae)&&(ye&&-Ie===ue.translate||!ye&&Ie===ue.translate))return ue.updateActiveIndex(de),oe.autoHeight&&ue.updateAutoHeight(),ue.updateSlidesClasses(),oe.effect!=="slide"&&ue.setTranslate(Ie),ze!=="reset"&&(ue.transitionStart(ne,ze),ue.transitionEnd(ne,ze)),!1;if(oe.cssMode){const Ue=ue.isHorizontal(),Ye=ye?Ie:-Ie;if(ee===0)Re&&(ue.wrapperEl.style.scrollSnapType="none",ue._immediateVirtual=!0),Re&&!ue._cssModeVirtualInitialSet&&ue.params.initialSlide>0?(ue._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{Te[Ue?"scrollLeft":"scrollTop"]=Ye})):Te[Ue?"scrollLeft":"scrollTop"]=Ye,Re&&requestAnimationFrame(()=>{ue.wrapperEl.style.scrollSnapType="",ue._immediateVirtual=!1});else{if(!ue.support.smoothScroll)return animateCSSModeScroll({swiper:ue,targetPosition:Ye,side:Ue?"left":"top"}),!0;Te.scrollTo({[Ue?"left":"top"]:Ye,behavior:"smooth"})}return!0}const Ze=getBrowser().isSafari;return Re&&!ae&&Ze&&ue.isElement&&ue.virtual.update(!1,!1,de),ue.setTransition(ee),ue.setTranslate(Ie),ue.updateActiveIndex(de),ue.updateSlidesClasses(),ue.emit("beforeTransitionStart",ee,se),ue.transitionStart(ne,ze),ee===0?ue.transitionEnd(ne,ze):ue.animating||(ue.animating=!0,ue.onSlideToWrapperTransitionEnd||(ue.onSlideToWrapperTransitionEnd=function(Ye){!ue||ue.destroyed||Ye.target===this&&(ue.wrapperEl.removeEventListener("transitionend",ue.onSlideToWrapperTransitionEnd),ue.onSlideToWrapperTransitionEnd=null,delete ue.onSlideToWrapperTransitionEnd,ue.transitionEnd(ne,ze))}),ue.wrapperEl.addEventListener("transitionend",ue.onSlideToWrapperTransitionEnd)),!0}function slideToLoop(te=0,ee,ne=!0,se){typeof te=="string"&&(te=parseInt(te,10));const ae=this;if(ae.destroyed)return;typeof ee=="undefined"&&(ee=ae.params.speed);const ue=ae.grid&&ae.params.grid&&ae.params.grid.rows>1;let de=te;if(ae.params.loop)if(ae.virtual&&ae.params.virtual.enabled)de=de+ae.virtual.slidesBefore;else{let oe;if(ue){const Ce=de*ae.params.grid.rows;oe=ae.slides.find(De=>De.getAttribute("data-swiper-slide-index")*1===Ce).column}else oe=ae.getSlideIndexByData(de);const me=ue?Math.ceil(ae.slides.length/ae.params.grid.rows):ae.slides.length,{centeredSlides:ve,slidesOffsetBefore:Ee,slidesOffsetAfter:Pe}=ae.params,ye=ve||!!Ee||!!Pe;let Te=ae.params.slidesPerView;Te==="auto"?Te=ae.slidesPerViewDynamic():(Te=Math.ceil(parseFloat(ae.params.slidesPerView,10)),ye&&Te%2===0&&(Te=Te+1));let Ae=me-oe<Te;if(ye&&(Ae=Ae||oe<Math.ceil(Te/2)),se&&ye&&ae.params.slidesPerView!=="auto"&&!ue&&(Ae=!1),Ae){const Ce=ye?oe<ae.activeIndex?"prev":"next":oe-ae.activeIndex-1<ae.params.slidesPerView?"next":"prev";ae.loopFix({direction:Ce,slideTo:!0,activeSlideIndex:Ce==="next"?oe+1:oe-me+1,slideRealIndex:Ce==="next"?ae.realIndex:void 0})}if(ue){const Ce=de*ae.params.grid.rows;de=ae.slides.find(De=>De.getAttribute("data-swiper-slide-index")*1===Ce).column}else de=ae.getSlideIndexByData(de)}return requestAnimationFrame(()=>{ae.slideTo(de,ee,ne,se)}),ae}function slideNext(te,ee=!0,ne){const se=this,{enabled:ae,params:ue,animating:de}=se;if(!ae||se.destroyed)return se;typeof te=="undefined"&&(te=se.params.speed);let oe=ue.slidesPerGroup;ue.slidesPerView==="auto"&&ue.slidesPerGroup===1&&ue.slidesPerGroupAuto&&(oe=Math.max(se.slidesPerViewDynamic("current",!0),1));const me=se.activeIndex<ue.slidesPerGroupSkip?1:oe,ve=se.virtual&&ue.virtual.enabled;if(ue.loop){if(de&&!ve&&ue.loopPreventsSliding)return!1;if(se.loopFix({direction:"next"}),se._clientLeft=se.wrapperEl.clientLeft,se.activeIndex===se.slides.length-1&&ue.cssMode)return requestAnimationFrame(()=>{se.slideTo(se.activeIndex+me,te,ee,ne)}),!0}return ue.rewind&&se.isEnd?se.slideTo(0,te,ee,ne):se.slideTo(se.activeIndex+me,te,ee,ne)}function slidePrev(te,ee=!0,ne){const se=this,{params:ae,snapGrid:ue,slidesGrid:de,rtlTranslate:oe,enabled:me,animating:ve}=se;if(!me||se.destroyed)return se;typeof te=="undefined"&&(te=se.params.speed);const Ee=se.virtual&&ae.virtual.enabled;if(ae.loop){if(ve&&!Ee&&ae.loopPreventsSliding)return!1;se.loopFix({direction:"prev"}),se._clientLeft=se.wrapperEl.clientLeft}const Pe=oe?se.translate:-se.translate;function ye(ze){return ze<0?-Math.floor(Math.abs(ze)):Math.floor(ze)}const Te=ye(Pe),Ae=ue.map(ze=>ye(ze)),Ce=ae.freeMode&&ae.freeMode.enabled;let De=ue[Ae.indexOf(Te)-1];if(typeof De=="undefined"&&(ae.cssMode||Ce)){let ze;ue.forEach((Re,Oe)=>{Te>=Re&&(ze=Oe)}),typeof ze!="undefined"&&(De=Ce?ue[ze]:ue[ze>0?ze-1:ze])}let Ie=0;if(typeof De!="undefined"&&(Ie=de.indexOf(De),Ie<0&&(Ie=se.activeIndex-1),ae.slidesPerView==="auto"&&ae.slidesPerGroup===1&&ae.slidesPerGroupAuto&&(Ie=Ie-se.slidesPerViewDynamic("previous",!0)+1,Ie=Math.max(Ie,0))),ae.rewind&&se.isBeginning){const ze=se.params.virtual&&se.params.virtual.enabled&&se.virtual?se.virtual.slides.length-1:se.slides.length-1;return se.slideTo(ze,te,ee,ne)}else if(ae.loop&&se.activeIndex===0&&ae.cssMode)return requestAnimationFrame(()=>{se.slideTo(Ie,te,ee,ne)}),!0;return se.slideTo(Ie,te,ee,ne)}function slideReset(te,ee=!0,ne){const se=this;if(!se.destroyed)return typeof te=="undefined"&&(te=se.params.speed),se.slideTo(se.activeIndex,te,ee,ne)}function slideToClosest(te,ee=!0,ne,se=.5){const ae=this;if(ae.destroyed)return;typeof te=="undefined"&&(te=ae.params.speed);let ue=ae.activeIndex;const de=Math.min(ae.params.slidesPerGroupSkip,ue),oe=de+Math.floor((ue-de)/ae.params.slidesPerGroup),me=ae.rtlTranslate?ae.translate:-ae.translate;if(me>=ae.snapGrid[oe]){const ve=ae.snapGrid[oe],Ee=ae.snapGrid[oe+1];me-ve>(Ee-ve)*se&&(ue+=ae.params.slidesPerGroup)}else{const ve=ae.snapGrid[oe-1],Ee=ae.snapGrid[oe];me-ve<=(Ee-ve)*se&&(ue-=ae.params.slidesPerGroup)}return ue=Math.max(ue,0),ue=Math.min(ue,ae.slidesGrid.length-1),ae.slideTo(ue,te,ee,ne)}function slideToClickedSlide(){const te=this;if(te.destroyed)return;const{params:ee,slidesEl:ne}=te,se=ee.slidesPerView==="auto"?te.slidesPerViewDynamic():ee.slidesPerView;let ae=te.getSlideIndexWhenGrid(te.clickedIndex),ue;const de=te.isElement?"swiper-slide":`.${ee.slideClass}`,oe=te.grid&&te.params.grid&&te.params.grid.rows>1;if(ee.loop){if(te.animating)return;ue=parseInt(te.clickedSlide.getAttribute("data-swiper-slide-index"),10),ee.centeredSlides?te.slideToLoop(ue):ae>(oe?(te.slides.length-se)/2-(te.params.grid.rows-1):te.slides.length-se)?(te.loopFix(),ae=te.getSlideIndex(elementChildren(ne,`${de}[data-swiper-slide-index="${ue}"]`)[0]),nextTick(()=>{te.slideTo(ae)})):te.slideTo(ae)}else te.slideTo(ae)}var slide={slideTo,slideToLoop,slideNext,slidePrev,slideReset,slideToClosest,slideToClickedSlide};function loopCreate(te,ee){const ne=this,{params:se,slidesEl:ae}=ne;if(!se.loop||ne.virtual&&ne.params.virtual.enabled)return;const ue=()=>{elementChildren(ae,`.${se.slideClass}, swiper-slide`).forEach((Ae,Ce)=>{Ae.setAttribute("data-swiper-slide-index",Ce)})},de=()=>{const Te=elementChildren(ae,`.${se.slideBlankClass}`);Te.forEach(Ae=>{Ae.remove()}),Te.length>0&&(ne.recalcSlides(),ne.updateSlides())},oe=ne.grid&&se.grid&&se.grid.rows>1;se.loopAddBlankSlides&&(se.slidesPerGroup>1||oe)&&de();const me=se.slidesPerGroup*(oe?se.grid.rows:1),ve=ne.slides.length%me!==0,Ee=oe&&ne.slides.length%se.grid.rows!==0,Pe=Te=>{for(let Ae=0;Ae<Te;Ae+=1){const Ce=ne.isElement?createElement("swiper-slide",[se.slideBlankClass]):createElement("div",[se.slideClass,se.slideBlankClass]);ne.slidesEl.append(Ce)}};if(ve){if(se.loopAddBlankSlides){const Te=me-ne.slides.length%me;Pe(Te),ne.recalcSlides(),ne.updateSlides()}else showWarning("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");ue()}else if(Ee){if(se.loopAddBlankSlides){const Te=se.grid.rows-ne.slides.length%se.grid.rows;Pe(Te),ne.recalcSlides(),ne.updateSlides()}else showWarning("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");ue()}else ue();const ye=se.centeredSlides||!!se.slidesOffsetBefore||!!se.slidesOffsetAfter;ne.loopFix({slideRealIndex:te,direction:ye?void 0:"next",initial:ee})}function loopFix({slideRealIndex:te,slideTo:ee=!0,direction:ne,setTranslate:se,activeSlideIndex:ae,initial:ue,byController:de,byMousewheel:oe}={}){const me=this;if(!me.params.loop)return;me.emit("beforeLoopFix");const{slides:ve,allowSlidePrev:Ee,allowSlideNext:Pe,slidesEl:ye,params:Te}=me,{centeredSlides:Ae,slidesOffsetBefore:Ce,slidesOffsetAfter:De,initialSlide:Ie}=Te,ze=Ae||!!Ce||!!De;if(me.allowSlidePrev=!0,me.allowSlideNext=!0,me.virtual&&Te.virtual.enabled){ee&&(!ze&&me.snapIndex===0?me.slideTo(me.virtual.slides.length,0,!1,!0):ze&&me.snapIndex<Te.slidesPerView?me.slideTo(me.virtual.slides.length+me.snapIndex,0,!1,!0):me.snapIndex===me.snapGrid.length-1&&me.slideTo(me.virtual.slidesBefore,0,!1,!0)),me.allowSlidePrev=Ee,me.allowSlideNext=Pe,me.emit("loopFix");return}let Re=Te.slidesPerView;Re==="auto"?Re=me.slidesPerViewDynamic():(Re=Math.ceil(parseFloat(Te.slidesPerView,10)),ze&&Re%2===0&&(Re=Re+1));const Oe=Te.slidesPerGroupAuto?Re:Te.slidesPerGroup;let qe=ze?Math.max(Oe,Math.ceil(Re/2)):Oe;qe%Oe!==0&&(qe+=Oe-qe%Oe),qe+=Te.loopAdditionalSlides,me.loopedSlides=qe;const Ze=me.grid&&Te.grid&&Te.grid.rows>1;ve.length<Re+qe||me.params.effect==="cards"&&ve.length<Re+qe*2?showWarning("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled or not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):Ze&&Te.grid.fill==="row"&&showWarning("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const Ue=[],Ye=[],ct=Ze?Math.ceil(ve.length/Te.grid.rows):ve.length,at=ue&&ct-Ie<Re&&!ze;let ft=at?Ie:me.activeIndex;typeof ae=="undefined"?ae=me.getSlideIndex(ve.find(Ge=>Ge.classList.contains(Te.slideActiveClass))):ft=ae;const pt=ne==="next"||!ne,Mt=ne==="prev"||!ne;let At=0,_t=0;const it=(Ze?ve[ae].column:ae)+(ze&&typeof se=="undefined"?-Re/2+.5:0);if(it<qe){At=Math.max(qe-it,Oe);for(let Ge=0;Ge<qe-it;Ge+=1){const je=Ge-Math.floor(Ge/ct)*ct;if(Ze){const Ke=ct-je-1;for(let lt=ve.length-1;lt>=0;lt-=1)ve[lt].column===Ke&&Ue.push(lt)}else Ue.push(ct-je-1)}}else if(it+Re>ct-qe){_t=Math.max(it-(ct-qe*2),Oe),at&&(_t=Math.max(_t,Re-ct+Ie+1));for(let Ge=0;Ge<_t;Ge+=1){const je=Ge-Math.floor(Ge/ct)*ct;Ze?ve.forEach((Ke,lt)=>{Ke.column===je&&Ye.push(lt)}):Ye.push(je)}}if(me.__preventObserver__=!0,requestAnimationFrame(()=>{me.__preventObserver__=!1}),me.params.effect==="cards"&&ve.length<Re+qe*2&&(Ye.includes(ae)&&Ye.splice(Ye.indexOf(ae),1),Ue.includes(ae)&&Ue.splice(Ue.indexOf(ae),1)),Mt&&Ue.forEach(Ge=>{ve[Ge].swiperLoopMoveDOM=!0,ye.prepend(ve[Ge]),ve[Ge].swiperLoopMoveDOM=!1}),pt&&Ye.forEach(Ge=>{ve[Ge].swiperLoopMoveDOM=!0,ye.append(ve[Ge]),ve[Ge].swiperLoopMoveDOM=!1}),me.recalcSlides(),Te.slidesPerView==="auto"?me.updateSlides():Ze&&(Ue.length>0&&Mt||Ye.length>0&&pt)&&me.slides.forEach((Ge,je)=>{me.grid.updateSlide(je,Ge,me.slides)}),Te.watchSlidesProgress&&me.updateSlidesOffset(),ee){if(Ue.length>0&&Mt){if(typeof te=="undefined"){const Ge=me.slidesGrid[ft],Ke=me.slidesGrid[ft+At]-Ge;oe?me.setTranslate(me.translate-Ke):(me.slideTo(ft+Math.ceil(At),0,!1,!0),se&&(me.touchEventsData.startTranslate=me.touchEventsData.startTranslate-Ke,me.touchEventsData.currentTranslate=me.touchEventsData.currentTranslate-Ke))}else if(se){const Ge=Ze?Ue.length/Te.grid.rows:Ue.length;me.slideTo(me.activeIndex+Ge,0,!1,!0),me.touchEventsData.currentTranslate=me.translate}}else if(Ye.length>0&&pt)if(typeof te=="undefined"){const Ge=me.slidesGrid[ft],Ke=me.slidesGrid[ft-_t]-Ge;oe?me.setTranslate(me.translate-Ke):(me.slideTo(ft-_t,0,!1,!0),se&&(me.touchEventsData.startTranslate=me.touchEventsData.startTranslate-Ke,me.touchEventsData.currentTranslate=me.touchEventsData.currentTranslate-Ke))}else{const Ge=Ze?Ye.length/Te.grid.rows:Ye.length;me.slideTo(me.activeIndex-Ge,0,!1,!0)}}if(me.allowSlidePrev=Ee,me.allowSlideNext=Pe,me.controller&&me.controller.control&&!de){const Ge={slideRealIndex:te,direction:ne,setTranslate:se,activeSlideIndex:ae,byController:!0};Array.isArray(me.controller.control)?me.controller.control.forEach(je=>{!je.destroyed&&je.params.loop&&je.loopFix({...Ge,slideTo:je.params.slidesPerView===Te.slidesPerView?ee:!1})}):me.controller.control instanceof me.constructor&&me.controller.control.params.loop&&me.controller.control.loopFix({...Ge,slideTo:me.controller.control.params.slidesPerView===Te.slidesPerView?ee:!1})}me.emit("loopFix")}function loopDestroy(){const te=this,{params:ee,slidesEl:ne}=te;if(!ee.loop||!ne||te.virtual&&te.params.virtual.enabled)return;te.recalcSlides();const se=[];te.slides.forEach(ae=>{const ue=typeof ae.swiperSlideIndex=="undefined"?ae.getAttribute("data-swiper-slide-index")*1:ae.swiperSlideIndex;se[ue]=ae}),te.slides.forEach(ae=>{ae.removeAttribute("data-swiper-slide-index")}),se.forEach(ae=>{ne.append(ae)}),te.recalcSlides(),te.slideTo(te.realIndex,0)}var loop={loopCreate,loopFix,loopDestroy};function setGrabCursor(te){const ee=this;if(!ee.params.simulateTouch||ee.params.watchOverflow&&ee.isLocked||ee.params.cssMode)return;const ne=ee.params.touchEventsTarget==="container"?ee.el:ee.wrapperEl;ee.isElement&&(ee.__preventObserver__=!0),ne.style.cursor="move",ne.style.cursor=te?"grabbing":"grab",ee.isElement&&requestAnimationFrame(()=>{ee.__preventObserver__=!1})}function unsetGrabCursor(){const te=this;te.params.watchOverflow&&te.isLocked||te.params.cssMode||(te.isElement&&(te.__preventObserver__=!0),te[te.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",te.isElement&&requestAnimationFrame(()=>{te.__preventObserver__=!1}))}var grabCursor={setGrabCursor,unsetGrabCursor};function closestElement(te,ee=this){function ne(se){if(!se||se===getDocument()||se===getWindow())return null;se.assignedSlot&&(se=se.assignedSlot);const ae=se.closest(te);return!ae&&!se.getRootNode?null:ae||ne(se.getRootNode().host)}return ne(ee)}function preventEdgeSwipe(te,ee,ne){const se=getWindow(),{params:ae}=te,ue=ae.edgeSwipeDetection,de=ae.edgeSwipeThreshold;return ue&&(ne<=de||ne>=se.innerWidth-de)?ue==="prevent"?(ee.preventDefault(),!0):!1:!0}function onTouchStart(te){const ee=this,ne=getDocument();let se=te;se.originalEvent&&(se=se.originalEvent);const ae=ee.touchEventsData;if(se.type==="pointerdown"){if(ae.pointerId!==null&&ae.pointerId!==se.pointerId)return;ae.pointerId=se.pointerId}else se.type==="touchstart"&&se.targetTouches.length===1&&(ae.touchId=se.targetTouches[0].identifier);if(se.type==="touchstart"){preventEdgeSwipe(ee,se,se.targetTouches[0].pageX);return}const{params:ue,touches:de,enabled:oe}=ee;if(!oe||!ue.simulateTouch&&se.pointerType==="mouse"||ee.animating&&ue.preventInteractionOnTransition)return;!ee.animating&&ue.cssMode&&ue.loop&&ee.loopFix();let me=se.target;if(ue.touchEventsTarget==="wrapper"&&!elementIsChildOf(me,ee.wrapperEl)||"which"in se&&se.which===3||"button"in se&&se.button>0||ae.isTouched&&ae.isMoved)return;const ve=!!ue.noSwipingClass&&ue.noSwipingClass!=="",Ee=se.composedPath?se.composedPath():se.path;ve&&se.target&&se.target.shadowRoot&&Ee&&(me=Ee[0]);const Pe=ue.noSwipingSelector?ue.noSwipingSelector:`.${ue.noSwipingClass}`,ye=!!(se.target&&se.target.shadowRoot);if(ue.noSwiping&&(ye?closestElement(Pe,me):me.closest(Pe))){ee.allowClick=!0;return}if(ue.swipeHandler&&!me.closest(ue.swipeHandler))return;de.currentX=se.pageX,de.currentY=se.pageY;const Te=de.currentX,Ae=de.currentY;if(!preventEdgeSwipe(ee,se,Te))return;Object.assign(ae,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),de.startX=Te,de.startY=Ae,ae.touchStartTime=now(),ee.allowClick=!0,ee.updateSize(),ee.swipeDirection=void 0,ue.threshold>0&&(ae.allowThresholdMove=!1);let Ce=!0;me.matches(ae.focusableElements)&&(Ce=!1,me.nodeName==="SELECT"&&(ae.isTouched=!1)),ne.activeElement&&ne.activeElement.matches(ae.focusableElements)&&ne.activeElement!==me&&(se.pointerType==="mouse"||se.pointerType!=="mouse"&&!me.matches(ae.focusableElements))&&ne.activeElement.blur();const De=Ce&&ee.allowTouchMove&&ue.touchStartPreventDefault;(ue.touchStartForcePreventDefault||De)&&!me.isContentEditable&&se.preventDefault(),ue.freeMode&&ue.freeMode.enabled&&ee.freeMode&&ee.animating&&!ue.cssMode&&ee.freeMode.onTouchStart(),ee.emit("touchStart",se)}function onTouchMove(te){const ee=getDocument(),ne=this,se=ne.touchEventsData,{params:ae,touches:ue,rtlTranslate:de,enabled:oe}=ne;if(!oe||!ae.simulateTouch&&te.pointerType==="mouse")return;let me=te;if(me.originalEvent&&(me=me.originalEvent),me.type==="pointermove"&&(se.touchId!==null||me.pointerId!==se.pointerId))return;let ve;if(me.type==="touchmove"){if(ve=[...me.changedTouches].find(Ze=>Ze.identifier===se.touchId),!ve||ve.identifier!==se.touchId)return}else ve=me;if(!se.isTouched){se.startMoving&&se.isScrolling&&ne.emit("touchMoveOpposite",me);return}const Ee=ve.pageX,Pe=ve.pageY;if(me.preventedByNestedSwiper){ue.startX=Ee,ue.startY=Pe;return}if(!ne.allowTouchMove){me.target.matches(se.focusableElements)||(ne.allowClick=!1),se.isTouched&&(Object.assign(ue,{startX:Ee,startY:Pe,currentX:Ee,currentY:Pe}),se.touchStartTime=now());return}if(ae.touchReleaseOnEdges&&!ae.loop)if(ne.isVertical()){if(Pe<ue.startY&&ne.translate<=ne.maxTranslate()||Pe>ue.startY&&ne.translate>=ne.minTranslate()){se.isTouched=!1,se.isMoved=!1;return}}else{if(de&&(Ee>ue.startX&&-ne.translate<=ne.maxTranslate()||Ee<ue.startX&&-ne.translate>=ne.minTranslate()))return;if(!de&&(Ee<ue.startX&&ne.translate<=ne.maxTranslate()||Ee>ue.startX&&ne.translate>=ne.minTranslate()))return}if(ee.activeElement&&ee.activeElement.matches(se.focusableElements)&&ee.activeElement!==me.target&&me.pointerType!=="mouse"&&ee.activeElement.blur(),ee.activeElement&&me.target===ee.activeElement&&me.target.matches(se.focusableElements)){se.isMoved=!0,ne.allowClick=!1;return}se.allowTouchCallbacks&&ne.emit("touchMove",me),ue.previousX=ue.currentX,ue.previousY=ue.currentY,ue.currentX=Ee,ue.currentY=Pe;const ye=ue.currentX-ue.startX,Te=ue.currentY-ue.startY;if(ne.params.threshold&&Math.sqrt(ye**2+Te**2)<ne.params.threshold)return;if(typeof se.isScrolling=="undefined"){let Ze;ne.isHorizontal()&&ue.currentY===ue.startY||ne.isVertical()&&ue.currentX===ue.startX?se.isScrolling=!1:ye*ye+Te*Te>=25&&(Ze=Math.atan2(Math.abs(Te),Math.abs(ye))*180/Math.PI,se.isScrolling=ne.isHorizontal()?Ze>ae.touchAngle:90-Ze>ae.touchAngle)}if(se.isScrolling&&ne.emit("touchMoveOpposite",me),typeof se.startMoving=="undefined"&&(ue.currentX!==ue.startX||ue.currentY!==ue.startY)&&(se.startMoving=!0),se.isScrolling||me.type==="touchmove"&&se.preventTouchMoveFromPointerMove){se.isTouched=!1;return}if(!se.startMoving)return;ne.allowClick=!1,!ae.cssMode&&me.cancelable&&me.preventDefault(),ae.touchMoveStopPropagation&&!ae.nested&&me.stopPropagation();let Ae=ne.isHorizontal()?ye:Te,Ce=ne.isHorizontal()?ue.currentX-ue.previousX:ue.currentY-ue.previousY;ae.oneWayMovement&&(Ae=Math.abs(Ae)*(de?1:-1),Ce=Math.abs(Ce)*(de?1:-1)),ue.diff=Ae,Ae*=ae.touchRatio,de&&(Ae=-Ae,Ce=-Ce);const De=ne.touchesDirection;ne.swipeDirection=Ae>0?"prev":"next",ne.touchesDirection=Ce>0?"prev":"next";const Ie=ne.params.loop&&!ae.cssMode,ze=ne.touchesDirection==="next"&&ne.allowSlideNext||ne.touchesDirection==="prev"&&ne.allowSlidePrev;if(!se.isMoved){if(Ie&&ze&&ne.loopFix({direction:ne.swipeDirection}),se.startTranslate=ne.getTranslate(),ne.setTransition(0),ne.animating){const Ze=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});ne.wrapperEl.dispatchEvent(Ze)}se.allowMomentumBounce=!1,ae.grabCursor&&(ne.allowSlideNext===!0||ne.allowSlidePrev===!0)&&ne.setGrabCursor(!0),ne.emit("sliderFirstMove",me)}let Re;if(new Date().getTime(),ae._loopSwapReset!==!1&&se.isMoved&&se.allowThresholdMove&&De!==ne.touchesDirection&&Ie&&ze&&Math.abs(Ae)>=1){Object.assign(ue,{startX:Ee,startY:Pe,currentX:Ee,currentY:Pe,startTranslate:se.currentTranslate}),se.loopSwapReset=!0,se.startTranslate=se.currentTranslate;return}ne.emit("sliderMove",me),se.isMoved=!0,se.currentTranslate=Ae+se.startTranslate;let Oe=!0,qe=ae.resistanceRatio;if(ae.touchReleaseOnEdges&&(qe=0),Ae>0?(Ie&&ze&&!Re&&se.allowThresholdMove&&se.currentTranslate>(ae.centeredSlides?ne.minTranslate()-ne.slidesSizesGrid[ne.activeIndex+1]-(ae.slidesPerView!=="auto"&&ne.slides.length-ae.slidesPerView>=2?ne.slidesSizesGrid[ne.activeIndex+1]+ne.params.spaceBetween:0)-ne.params.spaceBetween:ne.minTranslate())&&ne.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),se.currentTranslate>ne.minTranslate()&&(Oe=!1,ae.resistance&&(se.currentTranslate=ne.minTranslate()-1+(-ne.minTranslate()+se.startTranslate+Ae)**qe))):Ae<0&&(Ie&&ze&&!Re&&se.allowThresholdMove&&se.currentTranslate<(ae.centeredSlides?ne.maxTranslate()+ne.slidesSizesGrid[ne.slidesSizesGrid.length-1]+ne.params.spaceBetween+(ae.slidesPerView!=="auto"&&ne.slides.length-ae.slidesPerView>=2?ne.slidesSizesGrid[ne.slidesSizesGrid.length-1]+ne.params.spaceBetween:0):ne.maxTranslate())&&ne.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:ne.slides.length-(ae.slidesPerView==="auto"?ne.slidesPerViewDynamic():Math.ceil(parseFloat(ae.slidesPerView,10)))}),se.currentTranslate<ne.maxTranslate()&&(Oe=!1,ae.resistance&&(se.currentTranslate=ne.maxTranslate()+1-(ne.maxTranslate()-se.startTranslate-Ae)**qe))),Oe&&(me.preventedByNestedSwiper=!0),!ne.allowSlideNext&&ne.swipeDirection==="next"&&se.currentTranslate<se.startTranslate&&(se.currentTranslate=se.startTranslate),!ne.allowSlidePrev&&ne.swipeDirection==="prev"&&se.currentTranslate>se.startTranslate&&(se.currentTranslate=se.startTranslate),!ne.allowSlidePrev&&!ne.allowSlideNext&&(se.currentTranslate=se.startTranslate),ae.threshold>0)if(Math.abs(Ae)>ae.threshold||se.allowThresholdMove){if(!se.allowThresholdMove){se.allowThresholdMove=!0,ue.startX=ue.currentX,ue.startY=ue.currentY,se.currentTranslate=se.startTranslate,ue.diff=ne.isHorizontal()?ue.currentX-ue.startX:ue.currentY-ue.startY;return}}else{se.currentTranslate=se.startTranslate;return}!ae.followFinger||ae.cssMode||((ae.freeMode&&ae.freeMode.enabled&&ne.freeMode||ae.watchSlidesProgress)&&(ne.updateActiveIndex(),ne.updateSlidesClasses()),ae.freeMode&&ae.freeMode.enabled&&ne.freeMode&&ne.freeMode.onTouchMove(),ne.updateProgress(se.currentTranslate),ne.setTranslate(se.currentTranslate))}function onTouchEnd(te){const ee=this,ne=ee.touchEventsData;let se=te;se.originalEvent&&(se=se.originalEvent);let ae;if(se.type==="touchend"||se.type==="touchcancel"){if(ae=[...se.changedTouches].find(qe=>qe.identifier===ne.touchId),!ae||ae.identifier!==ne.touchId)return}else{if(ne.touchId!==null||se.pointerId!==ne.pointerId)return;ae=se}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(se.type)&&!(["pointercancel","contextmenu"].includes(se.type)&&(ee.browser.isSafari||ee.browser.isWebView)))return;ne.pointerId=null,ne.touchId=null;const{params:de,touches:oe,rtlTranslate:me,slidesGrid:ve,enabled:Ee}=ee;if(!Ee||!de.simulateTouch&&se.pointerType==="mouse")return;if(ne.allowTouchCallbacks&&ee.emit("touchEnd",se),ne.allowTouchCallbacks=!1,!ne.isTouched){ne.isMoved&&de.grabCursor&&ee.setGrabCursor(!1),ne.isMoved=!1,ne.startMoving=!1;return}de.grabCursor&&ne.isMoved&&ne.isTouched&&(ee.allowSlideNext===!0||ee.allowSlidePrev===!0)&&ee.setGrabCursor(!1);const Pe=now(),ye=Pe-ne.touchStartTime;if(ee.allowClick){const qe=se.path||se.composedPath&&se.composedPath();ee.updateClickedSlide(qe&&qe[0]||se.target,qe),ee.emit("tap click",se),ye<300&&Pe-ne.lastClickTime<300&&ee.emit("doubleTap doubleClick",se)}if(ne.lastClickTime=now(),nextTick(()=>{ee.destroyed||(ee.allowClick=!0)}),!ne.isTouched||!ne.isMoved||!ee.swipeDirection||oe.diff===0&&!ne.loopSwapReset||ne.currentTranslate===ne.startTranslate&&!ne.loopSwapReset){ne.isTouched=!1,ne.isMoved=!1,ne.startMoving=!1;return}ne.isTouched=!1,ne.isMoved=!1,ne.startMoving=!1;let Te;if(de.followFinger?Te=me?ee.translate:-ee.translate:Te=-ne.currentTranslate,de.cssMode)return;if(de.freeMode&&de.freeMode.enabled){ee.freeMode.onTouchEnd({currentPos:Te});return}const Ae=Te>=-ee.maxTranslate()&&!ee.params.loop;let Ce=0,De=ee.slidesSizesGrid[0];for(let qe=0;qe<ve.length;qe+=qe<de.slidesPerGroupSkip?1:de.slidesPerGroup){const Ze=qe<de.slidesPerGroupSkip-1?1:de.slidesPerGroup;typeof ve[qe+Ze]!="undefined"?(Ae||Te>=ve[qe]&&Te<ve[qe+Ze])&&(Ce=qe,De=ve[qe+Ze]-ve[qe]):(Ae||Te>=ve[qe])&&(Ce=qe,De=ve[ve.length-1]-ve[ve.length-2])}let Ie=null,ze=null;de.rewind&&(ee.isBeginning?ze=de.virtual&&de.virtual.enabled&&ee.virtual?ee.virtual.slides.length-1:ee.slides.length-1:ee.isEnd&&(Ie=0));const Re=(Te-ve[Ce])/De,Oe=Ce<de.slidesPerGroupSkip-1?1:de.slidesPerGroup;if(ye>de.longSwipesMs){if(!de.longSwipes){ee.slideTo(ee.activeIndex);return}ee.swipeDirection==="next"&&(Re>=de.longSwipesRatio?ee.slideTo(de.rewind&&ee.isEnd?Ie:Ce+Oe):ee.slideTo(Ce)),ee.swipeDirection==="prev"&&(Re>1-de.longSwipesRatio?ee.slideTo(Ce+Oe):ze!==null&&Re<0&&Math.abs(Re)>de.longSwipesRatio?ee.slideTo(ze):ee.slideTo(Ce))}else{if(!de.shortSwipes){ee.slideTo(ee.activeIndex);return}ee.navigation&&(se.target===ee.navigation.nextEl||se.target===ee.navigation.prevEl)?se.target===ee.navigation.nextEl?ee.slideTo(Ce+Oe):ee.slideTo(Ce):(ee.swipeDirection==="next"&&ee.slideTo(Ie!==null?Ie:Ce+Oe),ee.swipeDirection==="prev"&&ee.slideTo(ze!==null?ze:Ce))}}function onResize(){const te=this,{params:ee,el:ne}=te;if(ne&&ne.offsetWidth===0)return;ee.breakpoints&&te.setBreakpoint();const{allowSlideNext:se,allowSlidePrev:ae,snapGrid:ue}=te,de=te.virtual&&te.params.virtual.enabled;te.allowSlideNext=!0,te.allowSlidePrev=!0,te.updateSize(),te.updateSlides(),te.updateSlidesClasses();const oe=de&&ee.loop;(ee.slidesPerView==="auto"||ee.slidesPerView>1)&&te.isEnd&&!te.isBeginning&&!te.params.centeredSlides&&!oe?te.slideTo(te.slides.length-1,0,!1,!0):te.params.loop&&!de?te.slideToLoop(te.realIndex,0,!1,!0):te.slideTo(te.activeIndex,0,!1,!0),te.autoplay&&te.autoplay.running&&te.autoplay.paused&&(clearTimeout(te.autoplay.resizeTimeout),te.autoplay.resizeTimeout=setTimeout(()=>{te.autoplay&&te.autoplay.running&&te.autoplay.paused&&te.autoplay.resume()},500)),te.allowSlidePrev=ae,te.allowSlideNext=se,te.params.watchOverflow&&ue!==te.snapGrid&&te.checkOverflow()}function onClick(te){const ee=this;!ee.enabled||ee.allowClick||(ee.params.preventClicks&&te.preventDefault(),ee.params.preventClicksPropagation&&ee.animating&&(te.stopPropagation(),te.stopImmediatePropagation()))}function onScroll(){const te=this,{wrapperEl:ee,rtlTranslate:ne,enabled:se}=te;if(!se)return;te.previousTranslate=te.translate,te.isHorizontal()?te.translate=-ee.scrollLeft:te.translate=-ee.scrollTop,te.translate===0&&(te.translate=0),te.updateActiveIndex(),te.updateSlidesClasses();let ae;const ue=te.maxTranslate()-te.minTranslate();ue===0?ae=0:ae=(te.translate-te.minTranslate())/ue,ae!==te.progress&&te.updateProgress(ne?-te.translate:te.translate),te.emit("setTranslate",te.translate,!1)}function onLoad(te){const ee=this;processLazyPreloader(ee,te.target),!(ee.params.cssMode||ee.params.slidesPerView!=="auto"&&!ee.params.autoHeight)&&ee.update()}function onDocumentTouchStart(){const te=this;te.documentTouchHandlerProceeded||(te.documentTouchHandlerProceeded=!0,te.params.touchReleaseOnEdges&&(te.el.style.touchAction="auto"))}const events=(te,ee)=>{const ne=getDocument(),{params:se,el:ae,wrapperEl:ue,device:de}=te,oe=!!se.nested,me=ee==="on"?"addEventListener":"removeEventListener",ve=ee;!ae||typeof ae=="string"||(ne[me]("touchstart",te.onDocumentTouchStart,{passive:!1,capture:oe}),ae[me]("touchstart",te.onTouchStart,{passive:!1}),ae[me]("pointerdown",te.onTouchStart,{passive:!1}),ne[me]("touchmove",te.onTouchMove,{passive:!1,capture:oe}),ne[me]("pointermove",te.onTouchMove,{passive:!1,capture:oe}),ne[me]("touchend",te.onTouchEnd,{passive:!0}),ne[me]("pointerup",te.onTouchEnd,{passive:!0}),ne[me]("pointercancel",te.onTouchEnd,{passive:!0}),ne[me]("touchcancel",te.onTouchEnd,{passive:!0}),ne[me]("pointerout",te.onTouchEnd,{passive:!0}),ne[me]("pointerleave",te.onTouchEnd,{passive:!0}),ne[me]("contextmenu",te.onTouchEnd,{passive:!0}),(se.preventClicks||se.preventClicksPropagation)&&ae[me]("click",te.onClick,!0),se.cssMode&&ue[me]("scroll",te.onScroll),se.updateOnWindowResize?te[ve](de.ios||de.android?"resize orientationchange observerUpdate":"resize observerUpdate",onResize,!0):te[ve]("observerUpdate",onResize,!0),ae[me]("load",te.onLoad,{capture:!0}))};function attachEvents(){const te=this,{params:ee}=te;te.onTouchStart=onTouchStart.bind(te),te.onTouchMove=onTouchMove.bind(te),te.onTouchEnd=onTouchEnd.bind(te),te.onDocumentTouchStart=onDocumentTouchStart.bind(te),ee.cssMode&&(te.onScroll=onScroll.bind(te)),te.onClick=onClick.bind(te),te.onLoad=onLoad.bind(te),events(te,"on")}function detachEvents(){events(this,"off")}var events$1={attachEvents,detachEvents};const isGridEnabled=(te,ee)=>te.grid&&ee.grid&&ee.grid.rows>1;function setBreakpoint(){const te=this,{realIndex:ee,initialized:ne,params:se,el:ae}=te,ue=se.breakpoints;if(!ue||ue&&Object.keys(ue).length===0)return;const de=getDocument(),oe=se.breakpointsBase==="window"||!se.breakpointsBase?se.breakpointsBase:"container",me=["window","container"].includes(se.breakpointsBase)||!se.breakpointsBase?te.el:de.querySelector(se.breakpointsBase),ve=te.getBreakpoint(ue,oe,me);if(!ve||te.currentBreakpoint===ve)return;const Pe=(ve in ue?ue[ve]:void 0)||te.originalParams,ye=isGridEnabled(te,se),Te=isGridEnabled(te,Pe),Ae=te.params.grabCursor,Ce=Pe.grabCursor,De=se.enabled;ye&&!Te?(ae.classList.remove(`${se.containerModifierClass}grid`,`${se.containerModifierClass}grid-column`),te.emitContainerClasses()):!ye&&Te&&(ae.classList.add(`${se.containerModifierClass}grid`),(Pe.grid.fill&&Pe.grid.fill==="column"||!Pe.grid.fill&&se.grid.fill==="column")&&ae.classList.add(`${se.containerModifierClass}grid-column`),te.emitContainerClasses()),Ae&&!Ce?te.unsetGrabCursor():!Ae&&Ce&&te.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(Ze=>{if(typeof Pe[Ze]=="undefined")return;const Ue=se[Ze]&&se[Ze].enabled,Ye=Pe[Ze]&&Pe[Ze].enabled;Ue&&!Ye&&te[Ze].disable(),!Ue&&Ye&&te[Ze].enable()});const Ie=Pe.direction&&Pe.direction!==se.direction,ze=se.loop&&(Pe.slidesPerView!==se.slidesPerView||Ie),Re=se.loop;Ie&&ne&&te.changeDirection(),extend(te.params,Pe);const Oe=te.params.enabled,qe=te.params.loop;Object.assign(te,{allowTouchMove:te.params.allowTouchMove,allowSlideNext:te.params.allowSlideNext,allowSlidePrev:te.params.allowSlidePrev}),De&&!Oe?te.disable():!De&&Oe&&te.enable(),te.currentBreakpoint=ve,te.emit("_beforeBreakpoint",Pe),ne&&(ze?(te.loopDestroy(),te.loopCreate(ee),te.updateSlides()):!Re&&qe?(te.loopCreate(ee),te.updateSlides()):Re&&!qe&&te.loopDestroy()),te.emit("breakpoint",Pe)}function getBreakpoint(te,ee="window",ne){if(!te||ee==="container"&&!ne)return;let se=!1;const ae=getWindow(),ue=ee==="window"?ae.innerHeight:ne.clientHeight,de=Object.keys(te).map(oe=>{if(typeof oe=="string"&&oe.indexOf("@")===0){const me=parseFloat(oe.substr(1));return{value:ue*me,point:oe}}return{value:oe,point:oe}});de.sort((oe,me)=>parseInt(oe.value,10)-parseInt(me.value,10));for(let oe=0;oe<de.length;oe+=1){const{point:me,value:ve}=de[oe];ee==="window"?ae.matchMedia(`(min-width: ${ve}px)`).matches&&(se=me):ve<=ne.clientWidth&&(se=me)}return se||"max"}var breakpoints={setBreakpoint,getBreakpoint};function prepareClasses(te,ee){const ne=[];return te.forEach(se=>{typeof se=="object"?Object.keys(se).forEach(ae=>{se[ae]&&ne.push(ee+ae)}):typeof se=="string"&&ne.push(ee+se)}),ne}function addClasses(){const te=this,{classNames:ee,params:ne,rtl:se,el:ae,device:ue}=te,de=prepareClasses(["initialized",ne.direction,{"free-mode":te.params.freeMode&&ne.freeMode.enabled},{autoheight:ne.autoHeight},{rtl:se},{grid:ne.grid&&ne.grid.rows>1},{"grid-column":ne.grid&&ne.grid.rows>1&&ne.grid.fill==="column"},{android:ue.android},{ios:ue.ios},{"css-mode":ne.cssMode},{centered:ne.cssMode&&ne.centeredSlides},{"watch-progress":ne.watchSlidesProgress}],ne.containerModifierClass);ee.push(...de),ae.classList.add(...ee),te.emitContainerClasses()}function removeClasses(){const te=this,{el:ee,classNames:ne}=te;!ee||typeof ee=="string"||(ee.classList.remove(...ne),te.emitContainerClasses())}var classes={addClasses,removeClasses};function checkOverflow(){const te=this,{isLocked:ee,params:ne}=te,{slidesOffsetBefore:se}=ne;if(se){const ae=te.slides.length-1,ue=te.slidesGrid[ae]+te.slidesSizesGrid[ae]+se*2;te.isLocked=te.size>ue}else te.isLocked=te.snapGrid.length===1;ne.allowSlideNext===!0&&(te.allowSlideNext=!te.isLocked),ne.allowSlidePrev===!0&&(te.allowSlidePrev=!te.isLocked),ee&&ee!==te.isLocked&&(te.isEnd=!1),ee!==te.isLocked&&te.emit(te.isLocked?"lock":"unlock")}var checkOverflow$1={checkOverflow},defaults={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function moduleExtendParams(te,ee){return function(se={}){const ae=Object.keys(se)[0],ue=se[ae];if(typeof ue!="object"||ue===null){extend(ee,se);return}if(te[ae]===!0&&(te[ae]={enabled:!0}),ae==="navigation"&&te[ae]&&te[ae].enabled&&!te[ae].prevEl&&!te[ae].nextEl&&(te[ae].auto=!0),["pagination","scrollbar"].indexOf(ae)>=0&&te[ae]&&te[ae].enabled&&!te[ae].el&&(te[ae].auto=!0),!(ae in te&&"enabled"in ue)){extend(ee,se);return}typeof te[ae]=="object"&&!("enabled"in te[ae])&&(te[ae].enabled=!0),te[ae]||(te[ae]={enabled:!1}),extend(ee,se)}}const prototypes={eventsEmitter,update,translate,transition,slide,loop,grabCursor,events:events$1,breakpoints,checkOverflow:checkOverflow$1,classes},extendedDefaults={};class Swiper{constructor(...ee){let ne,se;ee.length===1&&ee[0].constructor&&Object.prototype.toString.call(ee[0]).slice(8,-1)==="Object"?se=ee[0]:[ne,se]=ee,se||(se={}),se=extend({},se),ne&&!se.el&&(se.el=ne);const ae=getDocument();if(se.el&&typeof se.el=="string"&&ae.querySelectorAll(se.el).length>1){const me=[];return ae.querySelectorAll(se.el).forEach(ve=>{const Ee=extend({},se,{el:ve});me.push(new Swiper(Ee))}),me}const ue=this;ue.__swiper__=!0,ue.support=getSupport(),ue.device=getDevice({userAgent:se.userAgent}),ue.browser=getBrowser(),ue.eventsListeners={},ue.eventsAnyListeners=[],ue.modules=[...ue.__modules__],se.modules&&Array.isArray(se.modules)&&ue.modules.push(...se.modules);const de={};ue.modules.forEach(me=>{me({params:se,swiper:ue,extendParams:moduleExtendParams(se,de),on:ue.on.bind(ue),once:ue.once.bind(ue),off:ue.off.bind(ue),emit:ue.emit.bind(ue)})});const oe=extend({},defaults,de);return ue.params=extend({},oe,extendedDefaults,se),ue.originalParams=extend({},ue.params),ue.passedParams=extend({},se),ue.params&&ue.params.on&&Object.keys(ue.params.on).forEach(me=>{ue.on(me,ue.params.on[me])}),ue.params&&ue.params.onAny&&ue.onAny(ue.params.onAny),Object.assign(ue,{enabled:ue.params.enabled,el:ne,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return ue.params.direction==="horizontal"},isVertical(){return ue.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:ue.params.allowSlideNext,allowSlidePrev:ue.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:ue.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:ue.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),ue.emit("_swiper"),ue.params.init&&ue.init(),ue}getDirectionLabel(ee){return this.isHorizontal()?ee:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[ee]}getSlideIndex(ee){const{slidesEl:ne,params:se}=this,ae=elementChildren(ne,`.${se.slideClass}, swiper-slide`),ue=elementIndex(ae[0]);return elementIndex(ee)-ue}getSlideIndexByData(ee){return this.getSlideIndex(this.slides.find(ne=>ne.getAttribute("data-swiper-slide-index")*1===ee))}getSlideIndexWhenGrid(ee){return this.grid&&this.params.grid&&this.params.grid.rows>1&&(this.params.grid.fill==="column"?ee=Math.floor(ee/this.params.grid.rows):this.params.grid.fill==="row"&&(ee=ee%Math.ceil(this.slides.length/this.params.grid.rows))),ee}recalcSlides(){const ee=this,{slidesEl:ne,params:se}=ee;ee.slides=elementChildren(ne,`.${se.slideClass}, swiper-slide`)}enable(){const ee=this;ee.enabled||(ee.enabled=!0,ee.params.grabCursor&&ee.setGrabCursor(),ee.emit("enable"))}disable(){const ee=this;!ee.enabled||(ee.enabled=!1,ee.params.grabCursor&&ee.unsetGrabCursor(),ee.emit("disable"))}setProgress(ee,ne){const se=this;ee=Math.min(Math.max(ee,0),1);const ae=se.minTranslate(),de=(se.maxTranslate()-ae)*ee+ae;se.translateTo(de,typeof ne=="undefined"?0:ne),se.updateActiveIndex(),se.updateSlidesClasses()}emitContainerClasses(){const ee=this;if(!ee.params._emitClasses||!ee.el)return;const ne=ee.el.className.split(" ").filter(se=>se.indexOf("swiper")===0||se.indexOf(ee.params.containerModifierClass)===0);ee.emit("_containerClasses",ne.join(" "))}getSlideClasses(ee){const ne=this;return ne.destroyed?"":ee.className.split(" ").filter(se=>se.indexOf("swiper-slide")===0||se.indexOf(ne.params.slideClass)===0).join(" ")}emitSlidesClasses(){const ee=this;if(!ee.params._emitClasses||!ee.el)return;const ne=[];ee.slides.forEach(se=>{const ae=ee.getSlideClasses(se);ne.push({slideEl:se,classNames:ae}),ee.emit("_slideClass",se,ae)}),ee.emit("_slideClasses",ne)}slidesPerViewDynamic(ee="current",ne=!1){const se=this,{params:ae,slides:ue,slidesGrid:de,slidesSizesGrid:oe,size:me,activeIndex:ve}=se;let Ee=1;if(typeof ae.slidesPerView=="number")return ae.slidesPerView;if(ae.centeredSlides){let Pe=ue[ve]?Math.ceil(ue[ve].swiperSlideSize):0,ye;for(let Te=ve+1;Te<ue.length;Te+=1)ue[Te]&&!ye&&(Pe+=Math.ceil(ue[Te].swiperSlideSize),Ee+=1,Pe>me&&(ye=!0));for(let Te=ve-1;Te>=0;Te-=1)ue[Te]&&!ye&&(Pe+=ue[Te].swiperSlideSize,Ee+=1,Pe>me&&(ye=!0))}else if(ee==="current")for(let Pe=ve+1;Pe<ue.length;Pe+=1)(ne?de[Pe]+oe[Pe]-de[ve]<me:de[Pe]-de[ve]<me)&&(Ee+=1);else for(let Pe=ve-1;Pe>=0;Pe-=1)de[ve]-de[Pe]<me&&(Ee+=1);return Ee}update(){const ee=this;if(!ee||ee.destroyed)return;const{snapGrid:ne,params:se}=ee;se.breakpoints&&ee.setBreakpoint(),[...ee.el.querySelectorAll('[loading="lazy"]')].forEach(de=>{de.complete&&processLazyPreloader(ee,de)}),ee.updateSize(),ee.updateSlides(),ee.updateProgress(),ee.updateSlidesClasses();function ae(){const de=ee.rtlTranslate?ee.translate*-1:ee.translate,oe=Math.min(Math.max(de,ee.maxTranslate()),ee.minTranslate());ee.setTranslate(oe),ee.updateActiveIndex(),ee.updateSlidesClasses()}let ue;if(se.freeMode&&se.freeMode.enabled&&!se.cssMode)ae(),se.autoHeight&&ee.updateAutoHeight();else{if((se.slidesPerView==="auto"||se.slidesPerView>1)&&ee.isEnd&&!se.centeredSlides){const de=ee.virtual&&se.virtual.enabled?ee.virtual.slides:ee.slides;ue=ee.slideTo(de.length-1,0,!1,!0)}else ue=ee.slideTo(ee.activeIndex,0,!1,!0);ue||ae()}se.watchOverflow&&ne!==ee.snapGrid&&ee.checkOverflow(),ee.emit("update")}changeDirection(ee,ne=!0){const se=this,ae=se.params.direction;return ee||(ee=ae==="horizontal"?"vertical":"horizontal"),ee===ae||ee!=="horizontal"&&ee!=="vertical"||(se.el.classList.remove(`${se.params.containerModifierClass}${ae}`),se.el.classList.add(`${se.params.containerModifierClass}${ee}`),se.emitContainerClasses(),se.params.direction=ee,se.slides.forEach(ue=>{ee==="vertical"?ue.style.width="":ue.style.height=""}),se.emit("changeDirection"),ne&&se.update()),se}changeLanguageDirection(ee){const ne=this;ne.rtl&&ee==="rtl"||!ne.rtl&&ee==="ltr"||(ne.rtl=ee==="rtl",ne.rtlTranslate=ne.params.direction==="horizontal"&&ne.rtl,ne.rtl?(ne.el.classList.add(`${ne.params.containerModifierClass}rtl`),ne.el.dir="rtl"):(ne.el.classList.remove(`${ne.params.containerModifierClass}rtl`),ne.el.dir="ltr"),ne.update())}mount(ee){const ne=this;if(ne.mounted)return!0;let se=ee||ne.params.el;if(typeof se=="string"&&(se=document.querySelector(se)),!se)return!1;se.swiper=ne,se.parentNode&&se.parentNode.host&&se.parentNode.host.nodeName===ne.params.swiperElementNodeName.toUpperCase()&&(ne.isElement=!0);const ae=()=>`.${(ne.params.wrapperClass||"").trim().split(" ").join(".")}`;let de=(()=>se&&se.shadowRoot&&se.shadowRoot.querySelector?se.shadowRoot.querySelector(ae()):elementChildren(se,ae())[0])();return!de&&ne.params.createElements&&(de=createElement("div",ne.params.wrapperClass),se.append(de),elementChildren(se,`.${ne.params.slideClass}`).forEach(oe=>{de.append(oe)})),Object.assign(ne,{el:se,wrapperEl:de,slidesEl:ne.isElement&&!se.parentNode.host.slideSlots?se.parentNode.host:de,hostEl:ne.isElement?se.parentNode.host:se,mounted:!0,rtl:se.dir.toLowerCase()==="rtl"||elementStyle(se,"direction")==="rtl",rtlTranslate:ne.params.direction==="horizontal"&&(se.dir.toLowerCase()==="rtl"||elementStyle(se,"direction")==="rtl"),wrongRTL:elementStyle(de,"display")==="-webkit-box"}),!0}init(ee){const ne=this;if(ne.initialized||ne.mount(ee)===!1)return ne;ne.emit("beforeInit"),ne.params.breakpoints&&ne.setBreakpoint(),ne.addClasses(),ne.updateSize(),ne.updateSlides(),ne.params.watchOverflow&&ne.checkOverflow(),ne.params.grabCursor&&ne.enabled&&ne.setGrabCursor(),ne.params.loop&&ne.virtual&&ne.params.virtual.enabled?ne.slideTo(ne.params.initialSlide+ne.virtual.slidesBefore,0,ne.params.runCallbacksOnInit,!1,!0):ne.slideTo(ne.params.initialSlide,0,ne.params.runCallbacksOnInit,!1,!0),ne.params.loop&&ne.loopCreate(void 0,!0),ne.attachEvents();const ae=[...ne.el.querySelectorAll('[loading="lazy"]')];return ne.isElement&&ae.push(...ne.hostEl.querySelectorAll('[loading="lazy"]')),ae.forEach(ue=>{ue.complete?processLazyPreloader(ne,ue):ue.addEventListener("load",de=>{processLazyPreloader(ne,de.target)})}),preload(ne),ne.initialized=!0,preload(ne),ne.emit("init"),ne.emit("afterInit"),ne}destroy(ee=!0,ne=!0){const se=this,{params:ae,el:ue,wrapperEl:de,slides:oe}=se;return typeof se.params=="undefined"||se.destroyed||(se.emit("beforeDestroy"),se.initialized=!1,se.detachEvents(),ae.loop&&se.loopDestroy(),ne&&(se.removeClasses(),ue&&typeof ue!="string"&&ue.removeAttribute("style"),de&&de.removeAttribute("style"),oe&&oe.length&&oe.forEach(me=>{me.classList.remove(ae.slideVisibleClass,ae.slideFullyVisibleClass,ae.slideActiveClass,ae.slideNextClass,ae.slidePrevClass),me.removeAttribute("style"),me.removeAttribute("data-swiper-slide-index")})),se.emit("destroy"),Object.keys(se.eventsListeners).forEach(me=>{se.off(me)}),ee!==!1&&(se.el&&typeof se.el!="string"&&(se.el.swiper=null),deleteProps(se)),se.destroyed=!0),null}static extendDefaults(ee){extend(extendedDefaults,ee)}static get extendedDefaults(){return extendedDefaults}static get defaults(){return defaults}static installModule(ee){Swiper.prototype.__modules__||(Swiper.prototype.__modules__=[]);const ne=Swiper.prototype.__modules__;typeof ee=="function"&&ne.indexOf(ee)<0&&ne.push(ee)}static use(ee){return Array.isArray(ee)?(ee.forEach(ne=>Swiper.installModule(ne)),Swiper):(Swiper.installModule(ee),Swiper)}}Object.keys(prototypes).forEach(te=>{Object.keys(prototypes[te]).forEach(ee=>{Swiper.prototype[ee]=prototypes[te][ee]})}),Swiper.use([Resize,Observer]);function Mousewheel({swiper:te,extendParams:ee,on:ne,emit:se}){const ae=getWindow();ee({mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null,noMousewheelClass:"swiper-no-mousewheel"}}),te.mousewheel={enabled:!1};let ue,de=now(),oe;const me=[];function ve(ze){let Ze=0,Ue=0,Ye=0,ct=0;return"detail"in ze&&(Ue=ze.detail),"wheelDelta"in ze&&(Ue=-ze.wheelDelta/120),"wheelDeltaY"in ze&&(Ue=-ze.wheelDeltaY/120),"wheelDeltaX"in ze&&(Ze=-ze.wheelDeltaX/120),"axis"in ze&&ze.axis===ze.HORIZONTAL_AXIS&&(Ze=Ue,Ue=0),Ye=Ze*10,ct=Ue*10,"deltaY"in ze&&(ct=ze.deltaY),"deltaX"in ze&&(Ye=ze.deltaX),ze.shiftKey&&!Ye&&(Ye=ct,ct=0),(Ye||ct)&&ze.deltaMode&&(ze.deltaMode===1?(Ye*=40,ct*=40):(Ye*=800,ct*=800)),Ye&&!Ze&&(Ze=Ye<1?-1:1),ct&&!Ue&&(Ue=ct<1?-1:1),{spinX:Ze,spinY:Ue,pixelX:Ye,pixelY:ct}}function Ee(){!te.enabled||(te.mouseEntered=!0)}function Pe(){!te.enabled||(te.mouseEntered=!1)}function ye(ze){return te.params.mousewheel.thresholdDelta&&ze.delta<te.params.mousewheel.thresholdDelta||te.params.mousewheel.thresholdTime&&now()-de<te.params.mousewheel.thresholdTime?!1:ze.delta>=6&&now()-de<60?!0:(ze.direction<0?(!te.isEnd||te.params.loop)&&!te.animating&&(te.slideNext(),se("scroll",ze.raw)):(!te.isBeginning||te.params.loop)&&!te.animating&&(te.slidePrev(),se("scroll",ze.raw)),de=new ae.Date().getTime(),!1)}function Te(ze){const Re=te.params.mousewheel;if(ze.direction<0){if(te.isEnd&&!te.params.loop&&Re.releaseOnEdges)return!0}else if(te.isBeginning&&!te.params.loop&&Re.releaseOnEdges)return!0;return!1}function Ae(ze){let Re=ze,Oe=!0;if(!te.enabled||ze.target.closest(`.${te.params.mousewheel.noMousewheelClass}`))return;const qe=te.params.mousewheel;te.params.cssMode&&Re.preventDefault();let Ze=te.el;te.params.mousewheel.eventsTarget!=="container"&&(Ze=document.querySelector(te.params.mousewheel.eventsTarget));const Ue=Ze&&Ze.contains(Re.target);if(!te.mouseEntered&&!Ue&&!qe.releaseOnEdges)return!0;Re.originalEvent&&(Re=Re.originalEvent);let Ye=0;const ct=te.rtlTranslate?-1:1,at=ve(Re);if(qe.forceToAxis)if(te.isHorizontal())if(Math.abs(at.pixelX)>Math.abs(at.pixelY))Ye=-at.pixelX*ct;else return!0;else if(Math.abs(at.pixelY)>Math.abs(at.pixelX))Ye=-at.pixelY;else return!0;else Ye=Math.abs(at.pixelX)>Math.abs(at.pixelY)?-at.pixelX*ct:-at.pixelY;if(Ye===0)return!0;qe.invert&&(Ye=-Ye);let ft=te.getTranslate()+Ye*qe.sensitivity;if(ft>=te.minTranslate()&&(ft=te.minTranslate()),ft<=te.maxTranslate()&&(ft=te.maxTranslate()),Oe=te.params.loop?!0:!(ft===te.minTranslate()||ft===te.maxTranslate()),Oe&&te.params.nested&&Re.stopPropagation(),!te.params.freeMode||!te.params.freeMode.enabled){const pt={time:now(),delta:Math.abs(Ye),direction:Math.sign(Ye),raw:ze};me.length>=2&&me.shift();const Mt=me.length?me[me.length-1]:void 0;if(me.push(pt),Mt?(pt.direction!==Mt.direction||pt.delta>Mt.delta||pt.time>Mt.time+150)&&ye(pt):ye(pt),Te(pt))return!0}else{const pt={time:now(),delta:Math.abs(Ye),direction:Math.sign(Ye)},Mt=oe&&pt.time<oe.time+500&&pt.delta<=oe.delta&&pt.direction===oe.direction;if(!Mt){oe=void 0;let At=te.getTranslate()+Ye*qe.sensitivity;const _t=te.isBeginning,Qe=te.isEnd;if(At>=te.minTranslate()&&(At=te.minTranslate()),At<=te.maxTranslate()&&(At=te.maxTranslate()),te.setTransition(0),te.setTranslate(At),te.updateProgress(),te.updateActiveIndex(),te.updateSlidesClasses(),(!_t&&te.isBeginning||!Qe&&te.isEnd)&&te.updateSlidesClasses(),te.params.loop&&te.loopFix({direction:pt.direction<0?"next":"prev",byMousewheel:!0}),te.params.freeMode.sticky){clearTimeout(ue),ue=void 0,me.length>=15&&me.shift();const it=me.length?me[me.length-1]:void 0,Ge=me[0];if(me.push(pt),it&&(pt.delta>it.delta||pt.direction!==it.direction))me.splice(0);else if(me.length>=15&&pt.time-Ge.time<500&&Ge.delta-pt.delta>=1&&pt.delta<=6){const je=Ye>0?.8:.2;oe=pt,me.splice(0),ue=nextTick(()=>{te.destroyed||!te.params||te.slideToClosest(te.params.speed,!0,void 0,je)},0)}ue||(ue=nextTick(()=>{if(te.destroyed||!te.params)return;const je=.5;oe=pt,me.splice(0),te.slideToClosest(te.params.speed,!0,void 0,je)},500))}if(Mt||se("scroll",Re),te.params.autoplay&&te.params.autoplay.disableOnInteraction&&te.autoplay.stop(),qe.releaseOnEdges&&(At===te.minTranslate()||At===te.maxTranslate()))return!0}}return Re.preventDefault?Re.preventDefault():Re.returnValue=!1,!1}function Ce(ze){let Re=te.el;te.params.mousewheel.eventsTarget!=="container"&&(Re=document.querySelector(te.params.mousewheel.eventsTarget)),Re[ze]("mouseenter",Ee),Re[ze]("mouseleave",Pe),Re[ze]("wheel",Ae)}function De(){return te.params.cssMode?(te.wrapperEl.removeEventListener("wheel",Ae),!0):te.mousewheel.enabled?!1:(Ce("addEventListener"),te.mousewheel.enabled=!0,!0)}function Ie(){return te.params.cssMode?(te.wrapperEl.addEventListener(event,Ae),!0):te.mousewheel.enabled?(Ce("removeEventListener"),te.mousewheel.enabled=!1,!0):!1}ne("init",()=>{!te.params.mousewheel.enabled&&te.params.cssMode&&Ie(),te.params.mousewheel.enabled&&De()}),ne("destroy",()=>{te.params.cssMode&&De(),te.mousewheel.enabled&&Ie()}),Object.assign(te.mousewheel,{enable:De,disable:Ie})}var swiper="";gsapWithCSS.registerPlugin(CustomEase);function initMap(te=document){var it,Ge;const ee=te||document,ne=Array.from(ee.querySelectorAll('.marker[id^="marker-"]')),se=Array.from(ee.querySelectorAll('.region[id^="region-"]')),ae=Array.from(ee.querySelectorAll(".project-item")),ue=Array.from(ee.querySelectorAll(".projects-overlay-item"));if(!ne.length&&!se.length&&!ae.length)return;const de=new Map,oe=new Map;ne.forEach(je=>{const lt=(je.id||"").match(/^marker-(.+)$/);if(lt&&lt[1]!=null){const Bt=String(lt[1]);de.set(Bt,je),oe.set(je,Bt)}});const me=12,ve=new Map,Ee=(je,Ke)=>{try{const lt=je.getBoundingClientRect();Ke.style.left=`${lt.left-me}px`,Ke.style.top=`${lt.top-me}px`,Ke.style.width=`${lt.width+me*2}px`,Ke.style.height=`${lt.height+me*2}px`}catch{}},Pe=()=>{ve.forEach((je,Ke)=>Ee(Ke,je))};try{ne.forEach(Ke=>{if(ve.has(Ke))return;const lt=document.createElement("button");lt.type="button",lt.className="marker-hitbox",lt.setAttribute("aria-label","Open project"),Object.assign(lt.style,{position:"fixed",left:"0px",top:"0px",width:"0px",height:"0px",padding:"0",margin:"0",background:"transparent",border:"0",outline:"none",cursor:"pointer",zIndex:"4"}),lt.addEventListener("mouseenter",()=>{const Bt=oe.get(Ke);!Bt||(qe(Bt),Ze()||_t(Bt),Ze()&&_t(Bt))}),lt.addEventListener("mouseleave",()=>{var Xt;const Bt=(ee||document).querySelector(".projects_overlays");((Xt=Bt==null?void 0:Bt.dataset)==null?void 0:Xt.open)!=="true"&&(Ye(),Mt())}),lt.addEventListener("click",Bt=>{Bt.preventDefault(),Bt.stopPropagation();const Xt=oe.get(Ke);!Xt||_t(Xt)}),document.body.appendChild(lt),ve.set(Ke,lt),Ee(Ke,lt)});const je=()=>Pe();window.addEventListener("resize",je),window.addEventListener("scroll",je,!0);try{const Ke=window.__lenisWrapper||null;Ke&&typeof Ke.addEventListener=="function"&&Ke.addEventListener("scroll",je)}catch{}}catch{}const ye=je=>{if(!je&&je!==0)return null;try{let Ke=String(je).trim().toLowerCase();return Ke.startsWith("#")&&(Ke=Ke.slice(1)),Ke.startsWith("region-")&&(Ke=Ke.slice(7)),Ke||null}catch{return null}},Te=new Map;se.forEach(je=>{const lt=(je.id||"").match(/^region-(.+)$/);if(lt&&lt[1]!=null){const Bt=ye(lt[1]);Te.set(Bt,je)}});const Ae=new Map,Ce=new Map,De=new Map;ae.forEach(je=>{var Bt,Xt;const Ke=(Bt=je==null?void 0:je.dataset)!=null&&Bt.point?String(je.dataset.point):null,lt=(Xt=je==null?void 0:je.dataset)!=null&&Xt.region?ye(je.dataset.region):null;if(Ke){const Gt=Ae.get(Ke)||[];Gt.push(je),Ae.set(Ke,Gt)}if(lt){const Gt=Ce.get(lt)||[];Gt.push(je),Ce.set(lt,Gt)}Ke&&lt&&!De.has(Ke)&&De.set(Ke,lt)});const Ie=new Map;ue.forEach(je=>{var lt;const Ke=(lt=je==null?void 0:je.dataset)!=null&&lt.point?String(je.dataset.point):null;if(Ke){const Bt=Ie.get(Ke)||[];Bt.push(je),Ie.set(Ke,Bt)}});const ze=()=>{try{if(typeof navigator=="undefined")return!1;const je=navigator.userAgent||"",Ke=/iP(ad|hone|od)/.test(je),lt=/Safari\//.test(je)&&!/Chrome\//.test(je)&&!/CriOS\//.test(je);return Ke||lt}catch{return!1}},Re=je=>{try{const Ke=de.get(je),lt=Gt=>{try{if(!Gt)return null;const lr="marker-shadow";let yr=Gt.querySelector(`#${lr}`);if(!yr){let Lr=Gt.querySelector("defs");Lr||(Lr=document.createElementNS("http://www.w3.org/2000/svg","defs"),Gt.insertBefore(Lr,Gt.firstChild)),yr=document.createElementNS("http://www.w3.org/2000/svg","filter"),yr.setAttribute("id",lr),yr.setAttribute("x","-50%"),yr.setAttribute("y","-50%"),yr.setAttribute("width","200%"),yr.setAttribute("height","200%"),yr.setAttribute("filterUnits","userSpaceOnUse"),yr.setAttribute("color-interpolation-filters","sRGB");const Nr=(li,Jt,gi,ci)=>{const hi=document.createElementNS("http://www.w3.org/2000/svg","feDropShadow");if(hi.setAttribute("dx",String(li)),hi.setAttribute("dy",String(Jt)),hi.setAttribute("stdDeviation",String(gi)),typeof ci=="object"&&ci){const{hex:ri,opacity:Ci}=ci;hi.setAttribute("flood-color",ri),hi.setAttribute("flood-opacity",String(Ci))}else hi.setAttribute("flood-color",String(ci));return hi};yr.appendChild(Nr(0,0,2,{hex:"#ffffff",opacity:.5})),yr.appendChild(Nr(0,0,5,{hex:"#ff8832",opacity:1})),yr.appendChild(Nr(0,0,12,{hex:"#ff8832",opacity:1}));const $r=document.createElementNS("http://www.w3.org/2000/svg","feGaussianBlur");$r.setAttribute("in","SourceAlpha"),$r.setAttribute("stdDeviation","4"),$r.setAttribute("result","blur");const Gr=document.createElementNS("http://www.w3.org/2000/svg","feOffset");Gr.setAttribute("dx","0"),Gr.setAttribute("dy","0"),Gr.setAttribute("result","offsetBlur");const Zr=document.createElementNS("http://www.w3.org/2000/svg","feFlood");Zr.setAttribute("flood-color","#ff8832"),Zr.setAttribute("flood-opacity","0.8"),Zr.setAttribute("result","color");const Dr=document.createElementNS("http://www.w3.org/2000/svg","feComposite");Dr.setAttribute("in","color"),Dr.setAttribute("in2","offsetBlur"),Dr.setAttribute("operator","in"),Dr.setAttribute("result","shadow");const dr=document.createElementNS("http://www.w3.org/2000/svg","feMerge"),fr=document.createElementNS("http://www.w3.org/2000/svg","feMergeNode");fr.setAttribute("in","shadow");const qr=document.createElementNS("http://www.w3.org/2000/svg","feMergeNode");qr.setAttribute("in","SourceGraphic"),dr.appendChild(fr),dr.appendChild(qr),yr.appendChild($r),yr.appendChild(Gr),yr.appendChild(Zr),yr.appendChild(Dr),yr.appendChild(dr),Lr.appendChild(yr)}return lr}catch{return null}},Bt=(Gt,lr)=>{try{const yr=Gt&&Gt.closest?Gt.closest("svg"):null;if(!yr)return;const Lr=lt(yr),$r=(Gt.querySelector?Gt.querySelector("circle"):null)||Gt;if(lr&&Lr){if(ze()){$r.setAttribute("filter",`url(#${Lr})`);try{typeof $r.getBBox=="function"&&$r.getBBox()}catch{}}}else ze()&&$r.removeAttribute("filter")}catch{}},Xt=(Gt,lr)=>{try{if(!(Gt&&Gt.closest?Gt.closest("svg"):null))return;const Lr=Gt.querySelector?Gt.querySelector("circle"):null;if(!Lr)return;const Nr=Lr.getAttribute("cx")||"0",$r=Lr.getAttribute("cy")||"0",Gr=Lr.getAttribute("r")||"0",Zr=Number(Gr)||0;if(Gt.querySelectorAll(".marker-glow, .marker-glow-2").forEach(li=>li.parentNode&&li.parentNode.removeChild(li)),!lr)return;const dr=(li,Jt,gi,ci)=>{const hi=document.createElementNS("http://www.w3.org/2000/svg","circle");return hi.setAttribute("class",li),hi.setAttribute("cx",Nr),hi.setAttribute("cy",$r),hi.setAttribute("r",String(Jt)),hi.setAttribute("fill",gi),hi.setAttribute("opacity",String(ci)),hi},fr=dr("marker-glow",Zr+10,"#ff8832",.35),qr=dr("marker-glow-2",Zr+5,"#ff8832",.6);Lr.parentNode&&(Lr.parentNode.insertBefore(fr,Lr),Lr.parentNode.insertBefore(qr,Lr))}catch{}};ne.forEach(Gt=>{const lr=Gt===Ke;lr?Gt.classList.add("highlight"):Gt.classList.remove("highlight"),Gt.classList.remove("dimmed"),ze()?Xt(Gt,lr):Bt(Gt,lr)})}catch{}},Oe=je=>{var Ke;try{if(!je)return null;const lt=De.get(je);if(lt)return lt;const Bt=Array.from(ee.querySelectorAll(".project-item")).find(Gt=>{var lr;return String(((lr=Gt==null?void 0:Gt.dataset)==null?void 0:lr.point)||"")===String(je)});return((Ke=Bt==null?void 0:Bt.dataset)!=null&&Ke.region?ye(Bt.dataset.region):null)||null}catch{return null}},qe=je=>{try{if(!je){Ue(),Ye();return}pt=String(je),Re(je);const Ke=Oe(je);Ke?At(Ke):Ye()}catch{}},Ze=()=>{try{return typeof window=="undefined"||!window.matchMedia?!1:window.matchMedia("(max-width: 767px)").matches}catch{return!1}},Ue=()=>{ne.forEach(je=>{je.classList.remove("highlight"),je.classList.remove("dimmed");try{const lt=(je.querySelector?je.querySelector("circle"):null)||je;ze()&&lt.removeAttribute("filter"),je.querySelectorAll(".marker-glow, .marker-glow-2").forEach(Xt=>Xt.parentNode&&Xt.parentNode.removeChild(Xt))}catch{}})},Ye=()=>{se.forEach(je=>je.classList.remove("highlight"))},ct=()=>{ae.forEach(je=>je.classList.remove("is-dimmed"))};let at=ae.length?ae[0]:null,ft=(it=at==null?void 0:at.dataset)!=null&&it.point?String(at.dataset.point):null,pt=ft||null;try{ft&&qe(ft);try{const je=ee.querySelector(".swiper.projects-wrapper")||ee.querySelector(".projects-wrapper.swiper"),Ke=je&&(je.__projectsSwiper||je.swiper)?je.__projectsSwiper||je.swiper:null;if(Ke&&Ke.slides&&typeof Ke.activeIndex=="number"){const lt=Ke.slides[Ke.activeIndex],Bt=(Ge=lt==null?void 0:lt.dataset)!=null&&Ge.point?String(lt.dataset.point):null;Bt&&qe(Bt)}try{typeof window!="undefined"&&typeof window.requestAnimationFrame=="function"&&window.requestAnimationFrame(()=>{pt&&qe(pt)})}catch{}}catch{}}catch{}const Mt=()=>{try{const je=pt;je?qe(je):(Ue(),Ye())}catch{}},At=je=>{const Ke=ye(je);if(!Ke){Ye();return}const lt=Te.get(Ke);if(!lt){Ye();return}se.forEach(Bt=>{Bt===lt?Bt.classList.add("highlight"):Bt.classList.remove("highlight")});try{const Bt=lt.parentNode;Bt&&typeof Bt.appendChild=="function"&&Bt.appendChild(lt)}catch{}};try{const je=ee.querySelector(".swiper.projects-wrapper")||ee.querySelector(".projects-wrapper.swiper");if(je&&!je.__swiperInitialized){je.__swiperInitialized=!0;const Ke=new Swiper(je,{modules:[Mousewheel],slidesPerView:1.1,speed:600,loop:!1,centeredSlides:!1,observer:!0,observeParents:!0,allowTouchMove:!0,simulateTouch:!0,grabCursor:!0,touchStartPreventDefault:!1,passiveListeners:!1,touchEventsTarget:"container",preventClicks:!0,preventClicksPropagation:!0,threshold:0,mousewheel:{enabled:!0,forceToAxis:!0,sensitivity:1,releaseOnEdges:!0},breakpoints:{0:{slidesPerView:1.1,centeredSlides:!1,speed:600},768:{slidesPerView:1,spaceBetween:0,centeredSlides:!1,speed:0}}});je.__projectsSwiper=Ke;try{je.swiper=je.swiper||Ke}catch{}const lt=Bt=>{var Xt;try{const Gt=Bt&&typeof Bt.activeIndex=="number"?Bt.activeIndex:null,lr=Gt!=null&&Bt&&Bt.slides&&Bt.slides[Gt]?Bt.slides[Gt]:je.querySelector(".swiper-slide-active");if(!lr)return;const yr=(Xt=lr==null?void 0:lr.dataset)!=null&&Xt.point?String(lr.dataset.point):null;if(!yr)return;qe(yr)}catch{}};try{Ke.on("slideChange",()=>lt(Ke)),Ke.on("activeIndexChange",()=>lt(Ke)),Ke.on("transitionEnd",()=>lt(Ke))}catch{}lt(Ke)}}catch{}const _t=je=>{try{const Ke=ee.querySelector(".swiper.projects-wrapper")||ee.querySelector(".projects-wrapper.swiper"),lt=Ke&&(Ke.__projectsSwiper||Ke.swiper)?Ke.__projectsSwiper||Ke.swiper:null;if(!lt)return!1;const Xt=(lt.slides?Array.from(lt.slides):[]).findIndex(Gt=>{var yr;const lr=(yr=Gt==null?void 0:Gt.dataset)!=null&&yr.point?String(Gt.dataset.point):null;return lr&&lr===String(je)});if(Xt>=0){let Gt=300;try{typeof window!="undefined"&&window.matchMedia&&window.matchMedia("(min-width: 768px)").matches&&(Gt=0)}catch{}lt.slideTo(Xt,Gt);try{qe(je)}catch{}try{typeof lt.once=="function"&&lt.once("transitionEnd",()=>qe(je))}catch{}return!0}}catch{}return!1};try{const je=()=>{try{return typeof window=="undefined"||!window.matchMedia?!0:!window.matchMedia("(max-width: 767px)").matches}catch{return!0}};ne.forEach(Ke=>{Ke.addEventListener("mouseenter",()=>{if(!je())return;const lt=oe.get(Ke);!lt||(qe(lt),_t(lt))})})}catch{}se.forEach(je=>{je.addEventListener("mouseenter",()=>{const lt=(je.id||"").match(/^region-(.+)$/),Bt=lt&&lt[1]?ye(lt[1]):null;Bt?At(Bt):Ye()}),je.addEventListener("mouseleave",()=>{Mt()})});const Qe=()=>{try{return typeof window=="undefined"||!window.matchMedia?!1:window.matchMedia("(pointer: coarse)").matches||window.matchMedia("(max-width: 991px)").matches}catch{return!1}};try{Qe()&&Array.from(ee.querySelectorAll(".project-card")).forEach(Ke=>{try{Ke.style.transition="none"}catch{}})}catch{}ae.forEach(je=>{je.addEventListener("mouseenter",()=>{var lt;if(Qe())return;const Ke=(lt=je==null?void 0:je.dataset)!=null&&lt.point?String(je.dataset.point):null;Ke&&qe(Ke),Ke&&ne.forEach(Bt=>{const Xt=oe.get(Bt);Xt&&Xt!==Ke&&(Bt.classList.add("dimmed"),Bt.classList.remove("highlight"))})}),je.addEventListener("mouseleave",()=>{var lt;if(Qe())return;const Ke=(ee||document).querySelector(".projects_overlays");((lt=Ke==null?void 0:Ke.dataset)==null?void 0:lt.open)!=="true"&&Mt()}),je.addEventListener("click",Ke=>{var lt,Bt;try{const Xt=(lt=je==null?void 0:je.dataset)!=null&&lt.point?String(je.dataset.point):null;if(!Xt)return;Ke.preventDefault(),Ke.stopPropagation(),pt=String(Xt),Re(pt);try{const Gt=(Bt=je==null?void 0:je.dataset)==null?void 0:Bt.region,lr=Gt?ye(Gt):De.get(pt);lr?At(lr):Ye()}catch{}_t(Xt)}catch{}})});try{const je=ee.querySelector(".cards-wrapper");je&&!je.__cardsWrapperHandlersAttached&&(je.__cardsWrapperHandlersAttached=!0,je.addEventListener("mouseleave",()=>{ct()}))}catch{}try{const je=ee.querySelector(".projects_overlays");if(je&&!je.__overlayHandlersAttached&&(je.__overlayHandlersAttached=!0,je.addEventListener("click",Ke=>{if(Ke.target&&Ke.target.closest?Ke.target.closest(".close-button"):null){Ke.preventDefault(),Ke.stopPropagation();try{}catch{}}}),!window.__mapOverlayDocClick)){const Ke=lt=>{var Bt;try{const Xt=(ee||document).querySelector(".projects_overlays");if(!(((Bt=Xt==null?void 0:Xt.dataset)==null?void 0:Bt.open)==="true"))return;const lr=lt.target;if(!lr||Xt&&Xt.contains(lr)||lr.closest&&(lr.closest(".marker")||lr.closest(".projects_overlays")))return;}catch{}};window.__mapOverlayDocClick=Ke,document.addEventListener("click",Ke)}}catch{}return{markers:ne,regions:se,projectItems:ae,overlayItems:ue,lookups:{pointToMarker:de,markerToPoint:oe,regionNameToRegion:Te,pointToProjectItems:Ae,regionNameToProjectItems:Ce,pointToRegionName:De,pointToOverlayItems:Ie}}}function mapClose(){}gsapWithCSS.registerPlugin(ScrollTrigger,CustomEase);const mineralsEase=CustomEase.create("mineralsEase","M0,0 C0.6,0 0,1 1,1 ");function initMinerals(te=document){const ee=te.querySelector(".section_minerals");if(!ee)return null;const se=(ee.querySelector(".minerals_content")||ee).querySelector(".circle.is-2");if(!se)return null;const ae="conic-gradient(from 0deg at 50% 50%, #fff 0deg, #fff var(--angle, 0deg), transparent var(--angle, 0deg))";se.style.webkitMaskImage=ae,se.style.maskImage=ae,se.style.maskMode="luminance",se.style.webkitMaskRepeat="no-repeat",se.style.maskRepeat="no-repeat",se.style.webkitMaskPosition="center",se.style.maskPosition="center",se.style.setProperty("--angle","0deg"),se.style.willChange="transform, -webkit-mask-image, mask-image",ee.style.position="relative",ee.style.zIndex="0",(()=>{try{ee.__mineralsST&&ee.__mineralsST.kill(!0)}catch{}const Pe=ee.querySelector(".minerals-stage")||ee,ye=()=>{try{const at=Pe.offsetHeight||Pe.getBoundingClientRect().height||0;return`+=${Math.max(0,Math.round(at-window.innerHeight))}`}catch{return"+=0"}},Te=Array.from(ee.querySelectorAll(".minerals-names .body-xl")),Ae=()=>window.matchMedia&&window.matchMedia("(max-width: 767px)").matches||window.innerWidth<=767,Ce=(at,ft)=>{try{if(!at)return;at.style.overflowX="auto",at.style.overflowY="hidden",at.style.flexWrap="nowrap",at.style.webkitOverflowScrolling="touch",ft.forEach(pt=>{pt.style.flex="0 0 auto"})}catch{}},De=at=>{try{if(!Ae())return;const ft=ee.querySelector(".minerals-names"),pt=Te[at];if(!ft||!pt||(Ce(ft,Te),ft.scrollWidth<=ft.clientWidth))return;const Mt=ft.getBoundingClientRect(),At=pt.getBoundingClientRect(),_t=ft.scrollLeft||0,Qe=At.left-Mt.left+At.width/2-ft.clientWidth/2,it=Math.round(_t+Qe),Ge=Math.max(0,ft.scrollWidth-ft.clientWidth),je=Math.max(0,Math.min(it,Ge));gsapWithCSS.to(ft,{scrollLeft:je,duration:1.2,ease:mineralsEase,overwrite:"auto"})}catch{}},Ie=Array.from(ee.querySelectorAll(".eyebrow-slider")),ze=ee.querySelector(".minerals-slider_inner"),Re=Array.from(ee.querySelectorAll(".minerals-slider_img")),Oe=at=>{Te.forEach((ft,pt)=>{const Mt=pt===at;ft.classList.toggle("is-active",Mt),ft.classList.toggle("is-o-15",!Mt),gsapWithCSS.to(ft,{opacity:Mt?1:.15,duration:1.2,ease:mineralsEase,overwrite:"auto"})}),De(at)},qe=at=>{if(!ze)return;const ft=1.2,pt=Math.max(0,Math.min(at,Re.length-1)),Mt=typeof ze.__mineralsSlideIndex=="number"?ze.__mineralsSlideIndex:pt,At=-20*pt;if(gsapWithCSS.to(ze,{xPercent:At,duration:ft,ease:mineralsEase,overwrite:"auto",onUpdate:()=>{try{const Ge=-(parseFloat(gsapWithCSS.getProperty(ze,"xPercent"))||0)/20;Re.forEach((je,Ke)=>{const lt=Ke-Ge,Bt=lt===0?0:lt>0?1:-1,Xt=Math.min(1,Math.abs(lt)),Gt=30*Bt*Xt;gsapWithCSS.set(je,{rotate:Gt,transformOrigin:"50% 50%"})})}catch{}}}),ze.__mineralsSlideIndex===void 0&&Re.length){Re.forEach(it=>{it.style.willChange="transform",gsapWithCSS.set(it,{transformOrigin:"50% 50%"})});try{const it=-20*pt;gsapWithCSS.set(ze,{xPercent:it});const Ge=-it/20;Re.forEach((je,Ke)=>{const lt=Ke-Ge,Bt=lt===0?0:lt>0?1:-1,Xt=Math.min(1,Math.abs(lt)),Gt=30*Bt*Xt;gsapWithCSS.set(je,{rotate:Gt})})}catch{}}const _t=Re[pt],Qe=Re[Mt];Mt===pt?_t&&(_t.classList.add("is-active"),gsapWithCSS.set(_t,{transformOrigin:"50% 50%"})):(_t&&_t.classList.add("is-active"),Qe&&Qe.classList.remove("is-active")),ze.__mineralsSlideIndex=pt},Ze=at=>{Ie.forEach(ft=>{const pt=Array.from(ft.querySelectorAll("span"));if(!pt.length)return;ft.style.display="flex",ft.style.flexDirection="column",ft.style.willChange="transform";const Mt=pt.length-1,At=Math.min(Math.max(at,0),Mt);pt.forEach((_t,Qe)=>{Qe===At?_t.classList.add("is-active"):_t.classList.remove("is-active")}),gsapWithCSS.to(ft,{yPercent:-100*At,duration:1.2,ease:mineralsEase,overwrite:"auto"}),ft.__mineralsCurrentIndex=At})},Ue=()=>{try{const at=ee.querySelector(".minerals-list .eyebrow-wrapper"),ft=ee.querySelector(".minerals_right .eyebrow-wrapper.is-a")||ee.querySelector(".minerals_right .is-a");if(!at||!ft)return;if(window.matchMedia&&window.matchMedia("(max-width: 767px)").matches||window.innerWidth<=767){ft.style.position="",ft.style.top="";return}const Mt=ft.offsetParent||ft.parentElement;if(!Mt)return;getComputedStyle(Mt).position==="static"&&(Mt.style.position="relative");const _t=Mt.getBoundingClientRect().top+window.scrollY,Qe=at.getBoundingClientRect().top+window.scrollY,it=Math.round(Qe-_t);ft.style.position="absolute",ft.style.top=it+"px"}catch{}};ee.__mineralsAlignRightEyebrow=Ue,Ue(),window.addEventListener("resize",()=>requestAnimationFrame(Ue));const Ye=()=>{requestAnimationFrame(()=>{let at=0;const ft=ee.__mineralsActiveIndex;typeof ft=="number"&&ft>=0&&(at=ft),De(at)})};window.addEventListener("resize",Ye),ee.__mineralsCenterActiveNameMobile=De,ee.__mineralsSetActiveEyebrowIndex=Ze,ee.__mineralsActiveIndex=-1;const ct=ScrollTrigger.create({trigger:Pe,start:"top top",end:ye,scrub:1,onUpdate:at=>{const ft=Math.max(0,Math.min(360,at.progress*360));if(se.style.setProperty("--angle",ft+"deg"),Ue(),Te.length>0){const pt=Math.max(0,Math.min(.999999,at.progress)),Mt=Math.min(Te.length-1,Math.floor(pt*Te.length));Mt!==ee.__mineralsActiveIndex&&(ee.__mineralsActiveIndex=Mt,Oe(Mt),Ze(Mt),ee.__mineralsActiveIndex,qe(Mt))}},onLeave:()=>{if(se.style.setProperty("--angle","360deg"),ee.__mineralsActiveIndex!==-1){const at=(ee.querySelectorAll(".minerals-names .body-xl")||[]).length-1;at>=0&&(Oe(at),Ze(at))}},onLeaveBack:()=>{se.style.setProperty("--angle","0deg"),ee.__mineralsActiveIndex!==-1&&(Oe(0),Ze(0))},invalidateOnRefresh:!0,markers:!1});return ee.__mineralsST=ct,ct})();const de=()=>{try{const Pe=getComputedStyle(se).getPropertyValue("--angle")||"0deg",ye=parseFloat(String(Pe))||0;ee.__mineralsAngle=ye}catch{ee.__mineralsAngle=0}},oe=()=>{typeof ee.__mineralsAngle=="number"&&se.style.setProperty("--angle",ee.__mineralsAngle+"deg")},me=()=>{de()},ve=()=>{oe();try{se.style.webkitMaskImage=ae,se.style.maskImage=ae}catch{}try{typeof ee.__mineralsAlignRightEyebrow=="function"&&ee.__mineralsAlignRightEyebrow();const Pe=typeof ee.__mineralsActiveIndex=="number"&&ee.__mineralsActiveIndex>=0?ee.__mineralsActiveIndex:0;typeof ee.__mineralsCenterActiveNameMobile=="function"&&ee.__mineralsCenterActiveNameMobile(Pe),typeof ee.__mineralsSetActiveEyebrowIndex=="function"&&ee.__mineralsSetActiveEyebrowIndex(Pe)}catch{}try{ScrollTrigger.refresh(),requestAnimationFrame(()=>{try{ScrollTrigger.refresh()}catch{}})}catch{}};document.addEventListener("menu:open-start",me),document.addEventListener("menu:close-end",ve);const Ee=()=>{try{ScrollTrigger.refresh()}catch{}};return window.addEventListener("load",Ee),setTimeout(Ee,100),ee.__mineralsTL||null}const initializeNavbarTheme={themes:{white:{navbarColor:"var(--primary)",logoBgFill:"var(--white)",logoPathFill:"var(--primary)",menuIconBorder:"var(--primary)",menuIconBg:"var(--white)",menuIconBarsBg:"var(--primary)"},lightgreen:{navbarColor:"var(--primary)",logoBgFill:"var(--light-green)",logoPathFill:"var(--primary)",menuIconBorder:"var(--primary)",menuIconBg:"var(--light-green)",menuIconBarsBg:"var(--primary)"},black:{navbarColor:"var(--white)",logoBgFill:"var(--black)",logoPathFill:"var(--white)",menuIconBorder:"var(--white)",menuIconBg:"var(--black)",menuIconBarsBg:"var(--white)"},hero:{navbarColor:"var(--white)",logoBgFill:"transparent",logoPathFill:"var(--white)",menuIconBorder:"var(--white)",menuIconBg:"transparent",menuIconBarsBg:"var(--white)"},menu:{navbarColor:"var(--primary)",logoBgFill:"var(--accent)",logoPathFill:"var(--primary)",menuIconBorder:"var(--primary)",menuIconBg:"var(--primary)",menuIconBarsBg:"var(--accent)"}},transition:{duration:1.2}};function reinitializeWebflowAnimations(){const te=window.Webflow;if(!!te){try{typeof te.destroy=="function"&&te.destroy()}catch{}try{typeof te.ready=="function"&&te.ready()}catch{}try{const ee=typeof te.require=="function"?te.require("ix2"):null;ee&&typeof ee.init=="function"&&ee.init()}catch{}}}function initSticky50(te=document){try{const ee=te&&te.nodeType===1?te:document,ne=Array.from(ee.querySelectorAll(".is-sticky-50"));if(!ne.length)return;const se=ae=>{try{const ue=ae.offsetHeight||ae.getBoundingClientRect().height||0;if(!ue)return;ae.style.setProperty("--sticky-height",ue+"px"),ae.style.top="calc(50vh - (var(--sticky-height) / 2))"}catch{}};ne.forEach(ae=>{se(ae);try{if(window.ResizeObserver&&!ae.__sticky50Observed){const ue=new ResizeObserver(()=>se(ae));ue.observe(ae),ae.__sticky50Observed=ue}}catch{}});try{if(!window.__sticky50ResizeBound){const ae=()=>{try{document.querySelectorAll(".is-sticky-50").forEach(de=>se(de))}catch{}};window.addEventListener("resize",ae),window.__sticky50ResizeBound=!0}}catch{}}catch{}}gsapWithCSS.registerPlugin(CustomEase,ScrollTrigger);let linkBaseMarginsConfig=null,lastScrollPosition=0;const defaultLinkBaseMargins=["8em","11em","14em","10em","13em","16em","12em","15em","18em","21em","24em","27em"];function getCurrentScrollPosition(te){if(window.lenis&&typeof window.lenis.scroll=="number")return window.lenis.scroll;if(!te)return 0;const ee=getComputedStyle(te).transform;if(ee&&ee!=="none"){const ne=ee.match(/matrix(3d)?\(([^)]+)\)/);if(ne){const se=ne[2].split(",").map(ue=>parseFloat(ue)),ae=se.length===16?se[13]:se[5];return Math.abs(ae||0)}}return te.scrollTop||0}function getNavbarBaseOffset$1(){try{return typeof window!="undefined"&&typeof window.matchMedia=="function"&&window.matchMedia("(max-width: 991px)").matches?"1em":"2em"}catch{return"2em"}}function initializeMenuClick(te={},ee=document){const ne=ee.querySelectorAll(".is-menu"),se=ee.querySelector(".page-wrap"),ae=ee.querySelector(".menu-icon"),ue=ee.querySelector(".is-menu_label-inner"),de=ee.querySelector(".content-wrap"),oe=ee.querySelector(".navbar > a"),me=ee.querySelectorAll(".links .link-item a");linkBaseMarginsConfig=Array.isArray(te.linkBaseMargins)?te.linkBaseMargins:linkBaseMarginsConfig;const ve=ee.querySelector(".menu-icon_bar.is-1, .menu-icon_bar .is-1"),Ee=ee.querySelector(".menu-icon_bar.is-2, .menu-icon_bar .is-2"),Pe=ee.querySelectorAll(".menu-icon_bar");if(ne.length===0||!se)return;const ye=CustomEase.create("custom","M0,0 C0.68,0 0,1 1,1 "),Te=.6,Ae=()=>{if(!ae)return;try{if(Ue||document.documentElement.getAttribute("data-menu-open")==="true")return}catch{}try{ae.dataset.bgLocked="hover",ae&&ae.style&&(ae.style.setProperty("background-color","var(--primary)","important"),ae.style.setProperty("border-color","var(--primary)","important"),ae.style.setProperty("transition","none","important")),Pe&&Pe.length&&Pe.forEach(Ge=>{try{Ge&&Ge.style&&(Ge.style.setProperty("background-color","#fff","important"),Ge.style.setProperty("transition","none","important"))}catch{}})}catch{}const it=gsapWithCSS.timeline({defaults:{duration:Te,ease:ye,overwrite:"auto"}});if(it.to(ae,{gap:"0px"},0),ue){try{ue.style.setProperty("will-change","transform")}catch{}it.to(ue,{yPercent:-50},0)}Pe&&Pe.length&&it.to(Pe,{backgroundColor:"#fff"},0),ve&&it.to(ve,{top:"49%",rotation:0,transformOrigin:"50% 50%"},0),Ee&&it.to(Ee,{bottom:"49%",rotation:90,transformOrigin:"50% 50%"},0)},Ce=it=>{if(it&&typeof it.preventDefault=="function"&&it.preventDefault(),!!ae)try{if(ue){gsapWithCSS.set(ue,{yPercent:0,overwrite:"auto"});try{ue.style.removeProperty("will-change")}catch{}}ae.dataset.bgLocked="open",ae.style&&(ae.style.setProperty("background-color","var(--primary)","important"),ae.style.setProperty("border-color","var(--primary)","important"),ae.style.setProperty("transition","none","important")),Pe&&Pe.length&&Pe.forEach(Ge=>{try{Ge&&Ge.style&&(Ge.style.setProperty("background-color","#fff","important"),Ge.style.setProperty("transition","none","important"))}catch{}})}catch{}},De=()=>{var it;if(!!ae){try{if(Ue||document.documentElement.getAttribute("data-menu-open")==="true"||((it=ae==null?void 0:ae.dataset)==null?void 0:it.bgLocked)==="open")return}catch{}gsapWithCSS.to(ae,{duration:Te,ease:ye,gap:"5px",overwrite:"auto"}),ve&&gsapWithCSS.to(ve,{duration:Te,ease:ye,top:"42%",rotation:0,transformOrigin:"50% 50%",overwrite:"auto"}),Ee&&gsapWithCSS.to(Ee,{duration:Te,ease:ye,bottom:"42%",rotation:0,transformOrigin:"50% 50%",overwrite:"auto"}),ue&&gsapWithCSS.to(ue,{duration:Te,ease:ye,yPercent:0,overwrite:"auto",onComplete:()=>{try{ue.style.removeProperty("will-change")}catch{}}});try{const Ge=window.__theme&&window.__theme.currentKey||"white",je=window.__theme&&window.__theme.getThemeFor,Ke=je?je(Ge):{};ae&&gsapWithCSS.set(ae,{backgroundColor:Ke.menuIconBg,borderColor:Ke.menuIconBorder,overwrite:"auto"}),Pe&&Pe.length&&gsapWithCSS.set(Pe,{backgroundColor:Ke.menuIconBarsBg,overwrite:"auto"}),ae&&ae.dataset&&delete ae.dataset.bgLocked,ae&&ae.style&&ae.style.removeProperty("transition"),Pe&&Pe.length&&Pe.forEach(lt=>{try{lt&&lt.style&&lt.style.removeProperty("transition")}catch{}})}catch{}}},Ie=getComputedStyle(se).top,ze=Ie==="auto"?"0px":Ie,Oe=getComputedStyle(se).overflow||"visible",Ze=getComputedStyle(document.body).overflow||"visible";let Ue=!1;const Ye=CustomEase.create("custom","M0,0 C0.6,0 0,1 1,1 "),ct=1.2;let at=null,ft=null;const pt=()=>{try{if(ft){try{ft.kill()}catch{}ft=null}gsapWithCSS.killTweensOf([se,ae,ve,Ee,Pe,ue,me,document.body])}catch{}try{se&&se.style&&(se.style.removeProperty("transform"),se.style.removeProperty("scale"),se.style.removeProperty("top"),se.style.removeProperty("border-radius"),se.style.removeProperty("transform-origin"),gsapWithCSS.set(se,{top:ze,overwrite:"auto"}))}catch{}try{Mt(),me&&me.length&&gsapWithCSS.set(me,{marginTop:(it,Ge)=>Ge.dataset.originalMarginTop||"0px",overwrite:"auto"})}catch{}try{const it=window.__theme&&window.__theme.storedKey||"white",Ge=window.__theme&&window.__theme.getThemeFor?window.__theme.getThemeFor(it):{};if(ae){ae.dataset&&delete ae.dataset.bgLocked,gsapWithCSS.set(ae,{gap:"5px",rotation:0,transformOrigin:"50% 50%",backgroundColor:Ge.menuIconBg,borderColor:Ge.menuIconBorder,overwrite:"auto"});try{ae.style.removeProperty("transition")}catch{}}ve&&gsapWithCSS.set(ve,{top:"42%",rotation:0,transformOrigin:"50% 50%",overwrite:"auto"}),Ee&&gsapWithCSS.set(Ee,{bottom:"42%",rotation:0,transformOrigin:"50% 50%",overwrite:"auto"}),Pe&&Pe.length&&(gsapWithCSS.set(Pe,{backgroundColor:Ge.menuIconBarsBg,overwrite:"auto"}),Pe.forEach(je=>{try{je.style.removeProperty("transition")}catch{}}))}catch{}try{if(gsapWithCSS.set(document.body,{backgroundColor:"var(--primary)"}),window.__theme){try{window.__theme.setIconThemeSuppressed(!1)}catch{}try{window.__theme.menuCloseSamePage()}catch{}}document.documentElement.setAttribute("data-menu-open","false")}catch{}try{window.lenis&&typeof window.lenis.start=="function"&&window.lenis.start()}catch{}try{at&&(window.removeEventListener("resize",at),at=null)}catch{}try{document.dispatchEvent(new CustomEvent("menu:close-end"))}catch{}try{typeof ScrollTrigger!="undefined"&&ScrollTrigger&&typeof ScrollTrigger.refresh=="function"&&(ScrollTrigger.refresh(),requestAnimationFrame(()=>{try{ScrollTrigger.refresh()}catch{}}))}catch{}try{window.dispatchEvent(new Event("resize"))}catch{}Ue=!1,oe&&oe.setAttribute("pt-inner","")},Mt=()=>{me.forEach((it,Ge)=>{let je=null;if(Array.isArray(linkBaseMarginsConfig)&&typeof linkBaseMarginsConfig[Ge]=="string"?je=linkBaseMarginsConfig[Ge]:typeof defaultLinkBaseMargins[Ge]=="string"&&(je=defaultLinkBaseMargins[Ge]),je)it.style.marginTop=je,it.dataset.originalMarginTop=je;else{const Ke=getComputedStyle(it).marginTop||"0px";it.dataset.originalMarginTop=Ke}})},At=(it,Ge)=>{Mt(),me.length&&(Ge?gsapWithCSS.set(me,{marginTop:0}):gsapWithCSS.set(me,{marginTop:(je,Ke)=>Ke.dataset.originalMarginTop||"0px"}),Ge?it.fromTo(me,{marginTop:0},{marginTop:(je,Ke)=>Ke.dataset.originalMarginTop||"0px",overwrite:"auto"},0):it.to(me,{marginTop:0,overwrite:"auto"},0))},_t=()=>{if(!Ue||!se)return;const it=window.innerWidth,Ge=it>=768&&it<=991,je=it<768,Ke=je?"32em":Ge?"15em":"24em",Bt=Math.max(0,it-(je?32:64)),Xt=it>0?Bt/it:1;gsapWithCSS.set(se,{top:Ke,scale:Xt,overwrite:"auto"})},Qe=()=>{let it=!1;try{it=document.documentElement.getAttribute("data-menu-open")==="true"}catch{it=!!Ue}try{if(ue){gsapWithCSS.set(ue,{yPercent:0,overwrite:"auto"});try{ue.style.removeProperty("will-change")}catch{}}}catch{}try{ft&&(ft.kill(),ft=null),gsapWithCSS.killTweensOf([se,ae,ve,Ee,Pe,ue,me])}catch{}const Ge=!it;try{Ge&&document.documentElement.setAttribute("data-menu-open","true")}catch{}try{Ge?window.__theme&&typeof window.__theme.menuOpen=="function"&&window.__theme.menuOpen():window.__theme&&typeof window.__theme.menuCloseSamePage=="function"&&window.__theme.menuCloseSamePage()}catch{}if(!Ge){if(it&&!Ue){pt();return}try{ae&&ae.dataset&&delete ae.dataset.bgLocked}catch{}}if(it)oe&&oe.setAttribute("pt-inner","");else{oe&&oe.removeAttribute("pt-inner");try{const dr=document.querySelector(".page-info");dr&&(dr.style.display="none")}catch{}}const je=Oe,Ke=Ze,lt=Ue?"0rem":"1rem",Bt=window.innerWidth,Xt=Bt>=768&&Bt<=991,Gt=Bt<768;let lr;Ue?lr=ze:Gt?lr="32em":Xt?lr="15em":lr="24em";const Lr=Math.max(0,Bt-(Gt?32:64)),Nr=Bt>0?Lr/Bt:1,$r=Ue?1:Nr,Gr=Ue?"5px":"0px",Zr=Ue?0:45;if(!it){try{document.dispatchEvent(new CustomEvent("menu:open-start"))}catch{}try{ae&&(ae.dataset.bgLocked="open",ae.style&&(ae.style.setProperty("background-color","var(--primary)","important"),ae.style.setProperty("border-color","var(--primary)","important"))),Pe&&Pe.length&&Pe.forEach(dr=>{try{dr&&dr.style&&dr.style.setProperty("background-color","#fff","important")}catch{}})}catch{}lastScrollPosition=getCurrentScrollPosition(de),window.lenis&&typeof window.lenis.stop=="function"&&window.lenis.stop()}if(de&&(window.lenis&&typeof window.lenis.scrollTo=="function"?window.lenis.scrollTo(lastScrollPosition,{immediate:!0,force:!0}):de.scrollTop=lastScrollPosition),it&&window.lenis&&typeof window.lenis.start=="function")try{window.lenis.start()}catch{}const Dr=gsapWithCSS.timeline({defaults:{duration:ct,ease:Ye},onComplete:()=>{it&&window.lenis&&typeof window.lenis.start=="function"&&window.lenis.start(),Ue=!Ue,oe&&(Ue?oe.removeAttribute("pt-inner"):oe.setAttribute("pt-inner","")),document.documentElement.setAttribute("data-menu-open",Ue?"true":"false");try{Ue?(at&&window.removeEventListener("resize",at),at=()=>_t(),window.addEventListener("resize",at)):at&&(window.removeEventListener("resize",at),at=null)}catch{}try{if(Ue){const dr=document.querySelector(".page-info");dr&&(dr.style.display="none")}}catch{}try{!Ue&&window.__theme&&typeof window.__theme.setIconThemeSuppressed=="function"&&window.__theme.setIconThemeSuppressed(!1)}catch{}if(!Ue){try{gsapWithCSS.set(document.body,{backgroundColor:"var(--primary)"})}catch{}try{se&&se.style&&(se.style.removeProperty("transform"),se.style.removeProperty("scale"),se.style.removeProperty("top"),se.style.removeProperty("border-radius"),se.style.removeProperty("transform-origin"))}catch{}try{document.dispatchEvent(new CustomEvent("menu:close-end"))}catch{}try{typeof ScrollTrigger!="undefined"&&ScrollTrigger&&typeof ScrollTrigger.refresh=="function"&&(ScrollTrigger.refresh(),requestAnimationFrame(()=>{try{ScrollTrigger.refresh()}catch{}}))}catch{}try{window.dispatchEvent(new Event("resize"))}catch{}try{const dr=document.querySelectorAll(".cylindar__text__wrapper, .scroll-indicator_c");dr&&dr.length&&gsapWithCSS.set(dr,{force3D:!0,z:.01,transformOrigin:"50% 50% 0",overwrite:"auto"})}catch{}}ft=null}});try{Dr.eventCallback("onInterrupt",()=>{ft=null})}catch{}if(ft=Dr,At(Dr,it),ae){Dr.to(ae,{gap:Gr,rotation:Zr,transformOrigin:"50% 50%",overwrite:"auto"},0);try{ae.dataset.bgLocked="open",ae&&ae.style&&(ae.style.setProperty("background-color","var(--primary)","important"),ae.style.setProperty("border-color","var(--primary)","important"),ae.style.setProperty("transition","none","important")),Pe&&Pe.length&&Pe.forEach(dr=>{try{dr&&dr.style&&(dr.style.setProperty("background-color","var(--accent)","important"),dr.style.setProperty("transition","none","important"))}catch{}})}catch{}Pe&&Pe.length&&(Dr.set(Pe,{backgroundColor:"#fff",overwrite:"auto"},0),Dr.to(Pe,{backgroundColor:"var(--accent)",overwrite:"auto"},0))}if(!it)ve&&Dr.set(ve,{top:"49%",rotation:0,transformOrigin:"50% 50%"},0),Ee&&Dr.set(Ee,{bottom:"49%",rotation:90,transformOrigin:"50% 50%"},0);else{ve&&Dr.to(ve,{top:"42%",rotation:0,transformOrigin:"50% 50%",overwrite:"auto"},0),Ee&&Dr.to(Ee,{bottom:"42%",rotation:0,transformOrigin:"50% 50%",overwrite:"auto"},0);try{const dr=window.__theme&&window.__theme.storedKey||"white",fr=window.__theme&&window.__theme.getThemeFor?window.__theme.getThemeFor(dr):{};ae&&Dr.set(ae,{backgroundColor:fr.menuIconBg,borderColor:fr.menuIconBorder,overwrite:"auto"},0),Pe&&Pe.length&&Dr.to(Pe,{backgroundColor:fr.menuIconBarsBg,overwrite:"auto"},0),ae&&ae.dataset&&delete ae.dataset.bgLocked,ae&&ae.style&&ae.style.removeProperty("transition"),Pe&&Pe.length&&Pe.forEach(qr=>{try{qr&&qr.style&&qr.style.removeProperty("transition")}catch{}})}catch{}}Dr.set(se,{overflow:je},0),Dr.set(document.body,{overflow:Ke},0),it||Dr.set(document.body,{backgroundColor:"var(--accent)"},0),Dr.set(se,{transformOrigin:"50% 0%"},0),Dr.to(se,{top:lr,overwrite:"auto"},0),Dr.to(se,{scale:$r,overwrite:"auto"},0),Dr.to(se,{borderRadius:lt,overwrite:"auto"},0)};ne.forEach(it=>{if(it.__menuHandler)try{it.removeEventListener("click",it.__menuHandler)}catch{}it.__menuHandler=Qe,it.addEventListener("click",it.__menuHandler)});try{se.__menuOutsideHandler&&se.removeEventListener("click",se.__menuOutsideHandler)}catch{}se.__menuOutsideHandler=()=>{try{document.documentElement.getAttribute("data-menu-open")==="true"&&Qe()}catch{}},se.addEventListener("click",se.__menuOutsideHandler),document.documentElement.setAttribute("data-menu-open","false"),oe&&oe.setAttribute("pt-inner","");try{if(ae){ae.__hoverEnter&&ae.removeEventListener("mouseenter",ae.__hoverEnter),ae.__hoverLeave&&ae.removeEventListener("mouseleave",ae.__hoverLeave),ae.__hoverEnter=Ae,ae.__hoverLeave=De,ae.addEventListener("mouseenter",ae.__hoverEnter),ae.addEventListener("mouseleave",ae.__hoverLeave);try{ae.__pointerDownLock&&ae.removeEventListener("pointerdown",ae.__pointerDownLock)}catch{}ae.__pointerDownLock=Ce,ae.addEventListener("pointerdown",ae.__pointerDownLock);try{ae&&ae.dataset&&delete ae.dataset.bgLocked}catch{}}}catch{}}function initializeNavbarScroll(te=document){const ee=te.querySelector(".page-wrap"),ne=te.querySelector(".content-wrap"),se=te.querySelector(".navbar");if(!ee||!se)return;try{ee.__navbarScrollListener&&ee.removeEventListener("scroll",ee.__navbarScrollListener)}catch{}try{window.lenis&&window.lenis.__navbarScrollListener&&typeof window.lenis.off=="function"&&window.lenis.off("scroll",window.lenis.__navbarScrollListener)}catch{}let ae=getCurrentScrollPosition(ne||ee);const ue=oe=>{oe>2?gsapWithCSS.to(se,{duration:.5,left:"-9em",right:"-9em",pointerEvents:"none",overwrite:"auto"}):oe<-2&&gsapWithCSS.to(se,{duration:.5,left:getNavbarBaseOffset$1(),right:getNavbarBaseOffset$1(),pointerEvents:"auto",overwrite:"auto"})},de=()=>{const oe=getCurrentScrollPosition(ne||ee),me=oe-ae;ue(me),ae=oe};if(window.lenis&&typeof window.lenis.on=="function"){const oe=me=>{const ve=me&&typeof me.scroll=="number"?me.scroll:ae,Ee=ve-ae;ue(Ee),ae=ve};window.lenis.__navbarScrollListener=oe,window.lenis.on("scroll",window.lenis.__navbarScrollListener)}else{const oe=()=>requestAnimationFrame(de);ee.__navbarScrollListener=oe,ee.addEventListener("scroll",oe)}}function animateNavbarSpreadForGrid(te,ee=document){try{const ne=ee.querySelector(".navbar")||document.querySelector(".navbar");if(!ne)return;const se=getNavbarBaseOffset$1();gsapWithCSS.to(ne,{duration:.5,ease:CustomEase.create("custom","M0,0 C0.6,0 0,1 1,1 "),overwrite:"auto",left:te?"-9em":se,right:te?"-9em":se,pointerEvents:te?"none":"auto"})}catch{}}function initializeLogoHover(te=document){try{const ne=(te&&te.querySelector?te:document).querySelector(".is-logo_main");if(!ne)return;const se=ne.querySelector(".is-t-1"),ae=ne.querySelector(".is-t-2"),ue=se?se.querySelectorAll(".logo-path"):[],de=ae?ae.querySelectorAll(".logo-path"):[];se&&gsapWithCSS.set(se,{yPercent:0,overwrite:"auto"}),ae&&gsapWithCSS.set(ae,{yPercent:0,overwrite:"auto"}),ue&&ue.length&&gsapWithCSS.set(ue,{yPercent:0,overwrite:"auto"}),de&&de.length&&gsapWithCSS.set(de,{yPercent:100,overwrite:"auto"});const oe=.5,me=CustomEase.create("custom","M0,0 C0.51,0 0,1 1,1");let ve=!1;const Ee=()=>{if(ve)return;ve=!0;const Pe=gsapWithCSS.timeline({defaults:{duration:oe,ease:me,overwrite:"auto"},onComplete:()=>{se&&gsapWithCSS.set(se,{yPercent:0,overwrite:"auto"}),ae&&gsapWithCSS.set(ae,{yPercent:0,overwrite:"auto"}),ue&&ue.length&&gsapWithCSS.set(ue,{yPercent:0,overwrite:"auto"}),de&&de.length&&gsapWithCSS.set(de,{yPercent:100,overwrite:"auto"}),ve=!1}});se&&Pe.to(se,{yPercent:-120},0),ae&&Pe.to(ae,{yPercent:-100},0);const ye=[...ue,...de];ye.length&&Pe.to(ye,{yPercent:-42,stagger:{each:.03}},0)};try{ne.__logoHoverEnter&&ne.removeEventListener("mouseenter",ne.__logoHoverEnter)}catch{}ne.__logoHoverEnter=Ee,ne.addEventListener("mouseenter",Ee)}catch{}}function initializeNav2(te=document){initializeMenuClick({},te),initializeNavbarScroll(te),initializeThemeController(),initializeLogoHover(te);try{const ee=()=>{try{if(document.documentElement.getAttribute("data-menu-open")==="true")return;const ne=te&&te.querySelector?te:document,se=ne.querySelector&&ne.querySelector(".navbar")||document.querySelector(".navbar");if(!se)return;const ae=getNavbarBaseOffset$1();gsapWithCSS.set(se,{left:ae,right:ae,overwrite:"auto"})}catch{}};window.addEventListener("resize",ee)}catch{}try{const ee=te&&te.querySelector?te:document,ne=ee.querySelector&&ee.querySelector("[data-barba-namespace]")||document.querySelector("[data-barba-namespace]");let se=null;if(ne&&ne.getAttribute&&(se=ne.getAttribute("data-barba-namespace")),se==="article"){const ae=ee.querySelector&&ee.querySelector(".navbar")||document.querySelector(".navbar");ae&&gsapWithCSS.to(ae,{duration:1.2,ease:CustomEase.create("custom","M0,0 C0.6,0 0,1 1,1 "),left:getNavbarBaseOffset$1(),right:getNavbarBaseOffset$1(),pointerEvents:"auto",overwrite:"auto"})}}catch{}try{const ee=te&&te.querySelector?te:document,ne=ee.querySelector&&ee.querySelector(".navbar")||document.querySelector(".navbar");ne&&gsapWithCSS.set(ne,{left:getNavbarBaseOffset$1(),right:getNavbarBaseOffset$1(),overwrite:"auto"})}catch{}}function resetMenuLinksAnimationState(te=document){try{const ne=(te&&te.querySelector?te:document).querySelectorAll(".links .link-item a");if(!ne||!ne.length)return;ne.forEach(se=>{try{se.style.transform="",se.style.marginTop="",se.style.willChange=""}catch{}})}catch{}}function addMenuLinksCloseToTimeline(te,ee="lift"){if(!te)return;const ne=document.querySelectorAll(".links .link-item a");if(!ne||!ne.length)return;ne.forEach(ae=>{if(!ae.dataset.originalMarginTop){const ue=getComputedStyle(ae).marginTop||"0px";ae.dataset.originalMarginTop=ue}});const se=CustomEase.create("custom","M0,0 C0.6,0 0,1 1,1 ");gsapWithCSS.set(ne,{marginTop:0}),te.fromTo(ne,{marginTop:0},{marginTop:(ae,ue)=>ue.dataset.originalMarginTop||"0px",overwrite:"auto",duration:1.2,ease:se},ee)}function initializeThemeController(){const te=initializeNavbarTheme&&initializeNavbarTheme.themes||{},ee=initializeNavbarTheme&&initializeNavbarTheme.transition||{duration:.5};let ne="white",se="white",ae="white",ue="white",de="white",oe=!1;const me=document.querySelector(".navbar"),ve=document.querySelector(".logo-bg"),Ee=document.querySelectorAll(".is-logo-bg"),Pe=document.querySelectorAll(".logo-path"),ye=document.querySelector(".menu-icon"),Te=document.querySelectorAll(".menu-icon_bar"),Ae=(Ie,ze=!1)=>{var Ye,ct,at;const Re=te[Ie]||te.white||{},Oe={...ee,overwrite:"auto"},Ze={white:{fill:"var(--white)",opacity:1},black:{fill:"var(--primary)",opacity:1},hero:{fill:"transparent",opacity:0},menu:{fill:"transparent",opacity:0}}[Ie],Ue=!!((Ye=ye==null?void 0:ye.dataset)!=null&&Ye.bgLocked);if(ze){if(me&&gsapWithCSS.set(me,{color:Re.navbarColor}),ve&&gsapWithCSS.set(ve,{fill:Re.logoBgFill}),Ee.length&&Ze&&gsapWithCSS.set(Ee,{fill:Ze.fill,opacity:Ze.opacity}),Pe.length&&gsapWithCSS.set(Pe,{fill:Re.logoPathFill}),!oe&&(ye&&gsapWithCSS.set(ye,{borderColor:Ue?"var(--primary)":Re.menuIconBorder,backgroundColor:Ue?"var(--primary)":Re.menuIconBg}),Te.length)){const ft=Ue&&((ct=ye==null?void 0:ye.dataset)==null?void 0:ct.bgLocked)==="hover";gsapWithCSS.set(Te,{backgroundColor:ft?"#fff":Ue?"var(--accent)":Re.menuIconBarsBg})}}else if(me&&gsapWithCSS.to(me,{color:Re.navbarColor,...Oe}),ve&&gsapWithCSS.to(ve,{fill:Re.logoBgFill,...Oe}),Ee.length&&Ze&&gsapWithCSS.to(Ee,{fill:Ze.fill,opacity:Ze.opacity,...Oe}),Pe.length&&gsapWithCSS.to(Pe,{fill:Re.logoPathFill,...Oe}),!oe&&(ye&&gsapWithCSS.to(ye,{borderColor:Ue?"var(--primary)":Re.menuIconBorder,backgroundColor:Ue?"var(--primary)":Re.menuIconBg,...Oe}),Te.length)){const ft=Ue&&((at=ye==null?void 0:ye.dataset)==null?void 0:at.bgLocked)==="hover";gsapWithCSS.to(Te,{backgroundColor:ft?"#fff":Ue?"var(--accent)":Re.menuIconBarsBg,...Oe})}ne=Ie},Ce=()=>{const Ie=document.querySelectorAll("[bg]");if(!Ie||Ie.length===0)return"white";const ze=(document.querySelector(".navbar")||document.body).getBoundingClientRect();for(const Re of Ie){const Oe=Re.getBoundingClientRect();if(Oe.top<=ze.bottom&&Oe.bottom>=ze.top){const qe=(Re.getAttribute("bg")||"white").toLowerCase();if(te[qe])return qe}}return"white"},De=()=>{if(document.documentElement.getAttribute("data-menu-open")==="true")return;const Ie=Ce();Ie!==ne&&Ae(Ie),se=Ie,de=Ie};window.__theme={get currentKey(){return ne},get activeKey(){return se},get destinationKey(){return ae},get storedKey(){return de},getThemeFor:Ie=>te[Ie]||te.white||{},setIconThemeSuppressed:Ie=>{oe=!!Ie},setDestination:(Ie=document)=>{const Re=(Ie&&Ie.querySelector?Ie:document).querySelector("[bg]");let Oe="white";if(Re){const qe=(Re.getAttribute("bg")||"white").toLowerCase();Oe=te[qe]?qe:"white"}return ae=Oe,ae},apply:(Ie,ze=!1)=>Ae(Ie,ze),applyDestination:(Ie=!1)=>Ae(ae,Ie),compute:()=>Ce(),menuOpen:()=>{ue=Ce(),oe=!0,Ae("menu",!0)},menuCloseSamePage:()=>{const Ie=Ce(),ze=de||ue||Ie;oe=!0,Ae(ze,!0),ue=Ie},bindScroll:(Ie=document)=>{const ze=Ie.querySelector&&Ie.querySelector(".page-wrap")?Ie.querySelector(".page-wrap"):window,Re=()=>requestAnimationFrame(De);try{ze.removeEventListener&&ze.__themeHandler&&ze.removeEventListener("scroll",ze.__themeHandler)}catch{}if(ze.__themeHandler=Re,ze.addEventListener&&ze.addEventListener("scroll",Re,{passive:!0}),window.lenis&&typeof window.lenis.on=="function"){try{window.lenis.off("scroll",window.lenis.__themeHandler)}catch{}window.lenis.__themeHandler=Re,window.lenis.on("scroll",window.lenis.__themeHandler)}De()}},window.__theme.bindScroll(document),Ae(Ce(),!0)}function t(te,ee){for(var ne=0;ne<ee.length;ne++){var se=ee[ne];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(te,typeof(ae=function(ue,de){if(typeof ue!="object"||ue===null)return ue;var oe=ue[Symbol.toPrimitive];if(oe!==void 0){var me=oe.call(ue,"string");if(typeof me!="object")return me;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(ue)}(se.key))=="symbol"?ae:String(ae),se)}var ae}function n(te,ee,ne){return ee&&t(te.prototype,ee),ne&&t(te,ne),Object.defineProperty(te,"prototype",{writable:!1}),te}function r(){return r=Object.assign?Object.assign.bind():function(te){for(var ee=1;ee<arguments.length;ee++){var ne=arguments[ee];for(var se in ne)Object.prototype.hasOwnProperty.call(ne,se)&&(te[se]=ne[se])}return te},r.apply(this,arguments)}function i(te,ee){te.prototype=Object.create(ee.prototype),te.prototype.constructor=te,o(te,ee)}function e(te){return e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ee){return ee.__proto__||Object.getPrototypeOf(ee)},e(te)}function o(te,ee){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ne,se){return ne.__proto__=se,ne},o(te,ee)}function u(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function s(te,ee,ne){return s=u()?Reflect.construct.bind():function(se,ae,ue){var de=[null];de.push.apply(de,ae);var oe=new(Function.bind.apply(se,de));return ue&&o(oe,ue.prototype),oe},s.apply(null,arguments)}function f(te){var ee=typeof Map=="function"?new Map:void 0;return f=function(ne){if(ne===null||Function.toString.call(ne).indexOf("[native code]")===-1)return ne;if(typeof ne!="function")throw new TypeError("Super expression must either be null or a function");if(ee!==void 0){if(ee.has(ne))return ee.get(ne);ee.set(ne,se)}function se(){return s(ne,arguments,e(this).constructor)}return se.prototype=Object.create(ne.prototype,{constructor:{value:se,enumerable:!1,writable:!0,configurable:!0}}),o(se,ne)},f(te)}function c(te){if(te===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return te}var a,h=function(){this.before=void 0,this.beforeLeave=void 0,this.leave=void 0,this.afterLeave=void 0,this.beforeEnter=void 0,this.enter=void 0,this.afterEnter=void 0,this.after=void 0};(function(te){te[te.off=0]="off",te[te.error=1]="error",te[te.warning=2]="warning",te[te.info=3]="info",te[te.debug=4]="debug"})(a||(a={}));var v=a.off,d=function(){function te(ne){this.t=void 0,this.t=ne}te.getLevel=function(){return v},te.setLevel=function(ne){return v=a[ne]};var ee=te.prototype;return ee.error=function(){this.i(console.error,a.error,[].slice.call(arguments))},ee.warn=function(){this.i(console.warn,a.warning,[].slice.call(arguments))},ee.info=function(){this.i(console.info,a.info,[].slice.call(arguments))},ee.debug=function(){this.i(console.log,a.debug,[].slice.call(arguments))},ee.i=function(ne,se,ae){se<=te.getLevel()&&ne.apply(console,["["+this.t+"] "].concat(ae))},te}();function l(te){return te.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function p(te){return te&&te.sensitive?"":"i"}var m={container:"container",history:"history",namespace:"namespace",prefix:"data-barba",prevent:"prevent",wrapper:"wrapper"},w=new(function(){function te(){this.o=m,this.u=void 0,this.h={after:null,before:null,parent:null}}var ee=te.prototype;return ee.toString=function(ne){return ne.outerHTML},ee.toDocument=function(ne){return this.u||(this.u=new DOMParser),this.u.parseFromString(ne,"text/html")},ee.toElement=function(ne){var se=document.createElement("div");return se.innerHTML=ne,se},ee.getHtml=function(ne){return ne===void 0&&(ne=document),this.toString(ne.documentElement)},ee.getWrapper=function(ne){return ne===void 0&&(ne=document),ne.querySelector("["+this.o.prefix+'="'+this.o.wrapper+'"]')},ee.getContainer=function(ne){return ne===void 0&&(ne=document),ne.querySelector("["+this.o.prefix+'="'+this.o.container+'"]')},ee.removeContainer=function(ne){document.body.contains(ne)&&(this.v(ne),ne.parentNode.removeChild(ne))},ee.addContainer=function(ne,se){var ae=this.getContainer()||this.h.before;ae?this.l(ne,ae):this.h.after?this.h.after.parentNode.insertBefore(ne,this.h.after):this.h.parent?this.h.parent.appendChild(ne):se.appendChild(ne)},ee.getSibling=function(){return this.h},ee.getNamespace=function(ne){ne===void 0&&(ne=document);var se=ne.querySelector("["+this.o.prefix+"-"+this.o.namespace+"]");return se?se.getAttribute(this.o.prefix+"-"+this.o.namespace):null},ee.getHref=function(ne){if(ne.tagName&&ne.tagName.toLowerCase()==="a"){if(typeof ne.href=="string")return ne.href;var se=ne.getAttribute("href")||ne.getAttribute("xlink:href");if(se)return this.resolveUrl(se.baseVal||se)}return null},ee.resolveUrl=function(){var ne=[].slice.call(arguments).length;if(ne===0)throw new Error("resolveUrl requires at least one argument; got none.");var se=document.createElement("base");if(se.href=arguments[0],ne===1)return se.href;var ae=document.getElementsByTagName("head")[0];ae.insertBefore(se,ae.firstChild);for(var ue,de=document.createElement("a"),oe=1;oe<ne;oe++)de.href=arguments[oe],se.href=ue=de.href;return ae.removeChild(se),ue},ee.l=function(ne,se){se.parentNode.insertBefore(ne,se.nextSibling)},ee.v=function(ne){return this.h={after:ne.nextElementSibling,before:ne.previousElementSibling,parent:ne.parentElement},this.h},te}()),b=function(){function te(){this.p=void 0,this.m=[],this.P=-1}var ee=te.prototype;return ee.init=function(ne,se){this.p="barba";var ae={data:{},ns:se,scroll:{x:window.scrollX,y:window.scrollY},url:ne};this.P=0,this.m.push(ae);var ue={from:this.p,index:this.P,states:[].concat(this.m)};window.history&&window.history.replaceState(ue,"",ne)},ee.change=function(ne,se,ae){if(ae&&ae.state){var ue=ae.state,de=ue.index;se=this.g(this.P-de),this.replace(ue.states),this.P=de}else this.add(ne,se);return se},ee.add=function(ne,se,ae,ue){var de=ae!=null?ae:this.R(se),oe={data:ue!=null?ue:{},ns:"tmp",scroll:{x:window.scrollX,y:window.scrollY},url:ne};switch(de){case"push":this.P=this.size,this.m.push(oe);break;case"replace":this.set(this.P,oe)}var me={from:this.p,index:this.P,states:[].concat(this.m)};switch(de){case"push":window.history&&window.history.pushState(me,"",ne);break;case"replace":window.history&&window.history.replaceState(me,"",ne)}},ee.store=function(ne,se){var ae=se||this.P,ue=this.get(ae);ue.data=r({},ue.data,ne),this.set(ae,ue);var de={from:this.p,index:this.P,states:[].concat(this.m)};window.history.replaceState(de,"")},ee.update=function(ne,se){var ae=se||this.P,ue=r({},this.get(ae),ne);this.set(ae,ue)},ee.remove=function(ne){ne?this.m.splice(ne,1):this.m.pop(),this.P--},ee.clear=function(){this.m=[],this.P=-1},ee.replace=function(ne){this.m=ne},ee.get=function(ne){return this.m[ne]},ee.set=function(ne,se){return this.m[ne]=se},ee.R=function(ne){var se="push",ae=ne,ue=m.prefix+"-"+m.history;return ae.hasAttribute&&ae.hasAttribute(ue)&&(se=ae.getAttribute(ue)),se},ee.g=function(ne){return Math.abs(ne)>1?ne>0?"forward":"back":ne===0?"popstate":ne>0?"back":"forward"},n(te,[{key:"current",get:function(){return this.m[this.P]}},{key:"previous",get:function(){return this.P<1?null:this.m[this.P-1]}},{key:"size",get:function(){return this.m.length}}]),te}(),y=new b,P=function(te,ee){try{var ne=function(){if(!ee.next.html)return Promise.resolve(te).then(function(se){var ae=ee.next;if(se){var ue=w.toElement(se.html);ae.namespace=w.getNamespace(ue),ae.container=w.getContainer(ue),ae.url=se.url,ae.html=se.html,y.update({ns:ae.namespace});var de=w.toDocument(se.html);document.title=de.title}})}();return Promise.resolve(ne&&ne.then?ne.then(function(){}):void 0)}catch(se){return Promise.reject(se)}},E=function te(ee,ne,se){return ee instanceof RegExp?function(ae,ue){if(!ue)return ae;for(var de=/\((?:\?<(.*?)>)?(?!\?)/g,oe=0,me=de.exec(ae.source);me;)ue.push({name:me[1]||oe++,prefix:"",suffix:"",modifier:"",pattern:""}),me=de.exec(ae.source);return ae}(ee,ne):Array.isArray(ee)?function(ae,ue,de){var oe=ae.map(function(me){return te(me,ue,de).source});return new RegExp("(?:".concat(oe.join("|"),")"),p(de))}(ee,ne,se):function(ae,ue,de){return function(oe,me,ve){ve===void 0&&(ve={});for(var Ee=ve.strict,Pe=Ee!==void 0&&Ee,ye=ve.start,Te=ye===void 0||ye,Ae=ve.end,Ce=Ae===void 0||Ae,De=ve.encode,Ie=De===void 0?function(Qe){return Qe}:De,ze=ve.delimiter,Re=ze===void 0?"/#?":ze,Oe=ve.endsWith,qe="[".concat(l(Oe===void 0?"":Oe),"]|$"),Ze="[".concat(l(Re),"]"),Ue=Te?"^":"",Ye=0,ct=oe;Ye<ct.length;Ye++){var at=ct[Ye];if(typeof at=="string")Ue+=l(Ie(at));else{var ft=l(Ie(at.prefix)),pt=l(Ie(at.suffix));if(at.pattern)if(me&&me.push(at),ft||pt)if(at.modifier==="+"||at.modifier==="*"){var Mt=at.modifier==="*"?"?":"";Ue+="(?:".concat(ft,"((?:").concat(at.pattern,")(?:").concat(pt).concat(ft,"(?:").concat(at.pattern,"))*)").concat(pt,")").concat(Mt)}else Ue+="(?:".concat(ft,"(").concat(at.pattern,")").concat(pt,")").concat(at.modifier);else Ue+=at.modifier==="+"||at.modifier==="*"?"((?:".concat(at.pattern,")").concat(at.modifier,")"):"(".concat(at.pattern,")").concat(at.modifier);else Ue+="(?:".concat(ft).concat(pt,")").concat(at.modifier)}}if(Ce)Pe||(Ue+="".concat(Ze,"?")),Ue+=ve.endsWith?"(?=".concat(qe,")"):"$";else{var At=oe[oe.length-1],_t=typeof At=="string"?Ze.indexOf(At[At.length-1])>-1:At===void 0;Pe||(Ue+="(?:".concat(Ze,"(?=").concat(qe,"))?")),_t||(Ue+="(?=".concat(Ze,"|").concat(qe,")"))}return new RegExp(Ue,p(ve))}(function(oe,me){me===void 0&&(me={});for(var ve=function(pt){for(var Mt=[],At=0;At<pt.length;){var _t=pt[At];if(_t!=="*"&&_t!=="+"&&_t!=="?")if(_t!=="\\")if(_t!=="{")if(_t!=="}")if(_t!==":")if(_t!=="(")Mt.push({type:"CHAR",index:At,value:pt[At++]});else{var Qe=1,it="";if(pt[je=At+1]==="?")throw new TypeError('Pattern cannot start with "?" at '.concat(je));for(;je<pt.length;)if(pt[je]!=="\\"){if(pt[je]===")"){if(--Qe==0){je++;break}}else if(pt[je]==="("&&(Qe++,pt[je+1]!=="?"))throw new TypeError("Capturing groups are not allowed at ".concat(je));it+=pt[je++]}else it+=pt[je++]+pt[je++];if(Qe)throw new TypeError("Unbalanced pattern at ".concat(At));if(!it)throw new TypeError("Missing pattern at ".concat(At));Mt.push({type:"PATTERN",index:At,value:it}),At=je}else{for(var Ge="",je=At+1;je<pt.length;){var Ke=pt.charCodeAt(je);if(!(Ke>=48&&Ke<=57||Ke>=65&&Ke<=90||Ke>=97&&Ke<=122||Ke===95))break;Ge+=pt[je++]}if(!Ge)throw new TypeError("Missing parameter name at ".concat(At));Mt.push({type:"NAME",index:At,value:Ge}),At=je}else Mt.push({type:"CLOSE",index:At,value:pt[At++]});else Mt.push({type:"OPEN",index:At,value:pt[At++]});else Mt.push({type:"ESCAPED_CHAR",index:At++,value:pt[At++]});else Mt.push({type:"MODIFIER",index:At,value:pt[At++]})}return Mt.push({type:"END",index:At,value:""}),Mt}(oe),Ee=me.prefixes,Pe=Ee===void 0?"./":Ee,ye="[^".concat(l(me.delimiter||"/#?"),"]+?"),Te=[],Ae=0,Ce=0,De="",Ie=function(pt){if(Ce<ve.length&&ve[Ce].type===pt)return ve[Ce++].value},ze=function(pt){var Mt=Ie(pt);if(Mt!==void 0)return Mt;var At=ve[Ce],_t=At.index;throw new TypeError("Unexpected ".concat(At.type," at ").concat(_t,", expected ").concat(pt))},Re=function(){for(var pt,Mt="";pt=Ie("CHAR")||Ie("ESCAPED_CHAR");)Mt+=pt;return Mt};Ce<ve.length;){var Oe=Ie("CHAR"),qe=Ie("NAME"),Ze=Ie("PATTERN");if(qe||Ze)Pe.indexOf(Ye=Oe||"")===-1&&(De+=Ye,Ye=""),De&&(Te.push(De),De=""),Te.push({name:qe||Ae++,prefix:Ye,suffix:"",pattern:Ze||ye,modifier:Ie("MODIFIER")||""});else{var Ue=Oe||Ie("ESCAPED_CHAR");if(Ue)De+=Ue;else if(De&&(Te.push(De),De=""),Ie("OPEN")){var Ye=Re(),ct=Ie("NAME")||"",at=Ie("PATTERN")||"",ft=Re();ze("CLOSE"),Te.push({name:ct||(at?Ae++:""),pattern:ct&&!at?ye:at,prefix:Ye,suffix:ft,modifier:Ie("MODIFIER")||""})}else ze("END")}}return Te}(ae,de),ue,de)}(ee,ne,se)},g={__proto__:null,update:P,nextTick:function(){return new Promise(function(te){window.requestAnimationFrame(te)})},pathToRegexp:E},x=function(){return window.location.origin},R=function(te){return te===void 0&&(te=window.location.href),k(te).port},k=function(te){var ee,ne=te.match(/:\d+/);if(ne===null)/^http/.test(te)&&(ee=80),/^https/.test(te)&&(ee=443);else{var se=ne[0].substring(1);ee=parseInt(se,10)}var ae,ue=te.replace(x(),""),de={},oe=ue.indexOf("#");oe>=0&&(ae=ue.slice(oe+1),ue=ue.slice(0,oe));var me=ue.indexOf("?");return me>=0&&(de=O(ue.slice(me+1)),ue=ue.slice(0,me)),{hash:ae,path:ue,port:ee,query:de}},O=function(te){return te.split("&").reduce(function(ee,ne){var se=ne.split("=");return ee[se[0]]=se[1],ee},{})},T=function(te){return te===void 0&&(te=window.location.href),te.replace(/(\/#.*|\/|#.*)$/,"")},A={__proto__:null,getHref:function(){return window.location.href},getAbsoluteHref:function(te,ee){return ee===void 0&&(ee=document.baseURI),new URL(te,ee).href},getOrigin:x,getPort:R,getPath:function(te){return te===void 0&&(te=window.location.href),k(te).path},getQuery:function(te,ee){return ee===void 0&&(ee=!1),ee?JSON.stringify(k(te).query):k(te).query},getHash:function(te){return k(te).hash},parse:k,parseQuery:O,clean:T};function j(te,ee,ne,se,ae){return ee===void 0&&(ee=2e3),new Promise(function(ue,de){var oe=new XMLHttpRequest;oe.onreadystatechange=function(){if(oe.readyState===XMLHttpRequest.DONE){if(oe.status===200){var me=oe.responseURL!==""&&oe.responseURL!==te?oe.responseURL:te;ue({html:oe.responseText,url:r({href:me},k(me))}),se.update(te,{status:"fulfilled",target:me})}else if(oe.status){var ve={status:oe.status,statusText:oe.statusText};ne(te,ve),de(ve),se.update(te,{status:"rejected"})}}},oe.ontimeout=function(){var me=new Error("Timeout error ["+ee+"]");ne(te,me),de(me),se.update(te,{status:"rejected"})},oe.onerror=function(){var me=new Error("Fetch error");ne(te,me),de(me),se.update(te,{status:"rejected"})},oe.open("GET",te),oe.timeout=ee,oe.setRequestHeader("Accept","text/html,application/xhtml+xml,application/xml"),oe.setRequestHeader("x-barba","yes"),ae.all().forEach(function(me,ve){oe.setRequestHeader(ve,me)}),oe.send()})}function M(te){return!!te&&(typeof te=="object"||typeof te=="function")&&typeof te.then=="function"}function N(te,ee){return ee===void 0&&(ee={}),function(){var ne=arguments,se=!1,ae=new Promise(function(ue,de){ee.async=function(){return se=!0,function(me,ve){me?de(me):ue(ve)}};var oe=te.apply(ee,[].slice.call(ne));se||(M(oe)?oe.then(ue,de):ue(oe))});return ae}}var S=new(function(te){function ee(){var se;return(se=te.call(this)||this).logger=new d("@barba/core"),se.all=["ready","page","reset","currentAdded","currentRemoved","nextAdded","nextRemoved","beforeOnce","once","afterOnce","before","beforeLeave","leave","afterLeave","beforeEnter","enter","afterEnter","after"],se.registered=new Map,se.init(),se}i(ee,te);var ne=ee.prototype;return ne.init=function(){var se=this;this.registered.clear(),this.all.forEach(function(ae){se[ae]||(se[ae]=function(ue,de){se.registered.has(ae)||se.registered.set(ae,new Set),se.registered.get(ae).add({ctx:de||{},fn:ue})})})},ne.do=function(se){var ae=arguments,ue=this;if(this.registered.has(se)){var de=Promise.resolve();return this.registered.get(se).forEach(function(oe){de=de.then(function(){return N(oe.fn,oe.ctx).apply(void 0,[].slice.call(ae,1))})}),de.catch(function(oe){ue.logger.debug("Hook error ["+se+"]"),ue.logger.error(oe)})}return Promise.resolve()},ne.clear=function(){var se=this;this.all.forEach(function(ae){delete se[ae]}),this.init()},ne.help=function(){this.logger.info("Available hooks: "+this.all.join(","));var se=[];this.registered.forEach(function(ae,ue){return se.push(ue)}),this.logger.info("Registered hooks: "+se.join(","))},ee}(h)),C=function(){function te(ee){if(this.k=void 0,this.O=[],typeof ee=="boolean")this.k=ee;else{var ne=Array.isArray(ee)?ee:[ee];this.O=ne.map(function(se){return E(se)})}}return te.prototype.checkHref=function(ee){if(typeof this.k=="boolean")return this.k;var ne=k(ee).path;return this.O.some(function(se){return se.exec(ne)!==null})},te}(),L=function(te){function ee(se){var ae;return(ae=te.call(this,se)||this).T=new Map,ae}i(ee,te);var ne=ee.prototype;return ne.set=function(se,ae,ue,de,oe){return this.T.set(se,{action:ue,request:ae,status:de,target:oe!=null?oe:se}),{action:ue,request:ae,status:de,target:oe}},ne.get=function(se){return this.T.get(se)},ne.getRequest=function(se){return this.T.get(se).request},ne.getAction=function(se){return this.T.get(se).action},ne.getStatus=function(se){return this.T.get(se).status},ne.getTarget=function(se){return this.T.get(se).target},ne.has=function(se){return!this.checkHref(se)&&this.T.has(se)},ne.delete=function(se){return this.T.delete(se)},ne.update=function(se,ae){var ue=r({},this.T.get(se),ae);return this.T.set(se,ue),ue},ee}(C),H=function(){function te(){this.A=new Map}var ee=te.prototype;return ee.set=function(ne,se){return this.A.set(ne,se),{name:se}},ee.get=function(ne){return this.A.get(ne)},ee.all=function(){return this.A},ee.has=function(ne){return this.A.has(ne)},ee.delete=function(ne){return this.A.delete(ne)},ee.clear=function(){return this.A.clear()},te}(),_=function(){return!window.history.pushState},D=function(te){return!te.el||!te.href},B=function(te){var ee=te.event;return ee.which>1||ee.metaKey||ee.ctrlKey||ee.shiftKey||ee.altKey},q=function(te){var ee=te.el;return ee.hasAttribute("target")&&ee.target==="_blank"},F=function(te){var ee=te.el;return ee.protocol!==void 0&&window.location.protocol!==ee.protocol||ee.hostname!==void 0&&window.location.hostname!==ee.hostname},I=function(te){var ee=te.el;return ee.port!==void 0&&R()!==R(ee.href)},U=function(te){var ee=te.el;return ee.getAttribute&&typeof ee.getAttribute("download")=="string"},$=function(te){return te.el.hasAttribute(m.prefix+"-"+m.prevent)},Q=function(te){return Boolean(te.el.closest("["+m.prefix+"-"+m.prevent+'="all"]'))},X=function(te){var ee=te.href;return T(ee)===T()&&R(ee)===R()},z=function(te){function ee(se){var ae;return(ae=te.call(this,se)||this).suite=[],ae.tests=new Map,ae.init(),ae}i(ee,te);var ne=ee.prototype;return ne.init=function(){this.add("pushState",_),this.add("exists",D),this.add("newTab",B),this.add("blank",q),this.add("corsDomain",F),this.add("corsPort",I),this.add("download",U),this.add("preventSelf",$),this.add("preventAll",Q),this.add("sameUrl",X,!1)},ne.add=function(se,ae,ue){ue===void 0&&(ue=!0),this.tests.set(se,ae),ue&&this.suite.push(se)},ne.run=function(se,ae,ue,de){return this.tests.get(se)({el:ae,event:ue,href:de})},ne.checkLink=function(se,ae,ue){var de=this;return this.suite.some(function(oe){return de.run(oe,se,ae,ue)})},ee}(C),G=function(te){function ee(ne,se){var ae;return se===void 0&&(se="Barba error"),(ae=te.call.apply(te,[this].concat([].slice.call(arguments,2)))||this).error=void 0,ae.label=void 0,ae.error=ne,ae.label=se,Error.captureStackTrace&&Error.captureStackTrace(c(ae),ee),ae.name="BarbaError",ae}return i(ee,te),ee}(f(Error)),J=function(){function te(ne){ne===void 0&&(ne=[]),this.logger=new d("@barba/core"),this.all=[],this.page=[],this.once=[],this.j=[{name:"namespace",type:"strings"},{name:"custom",type:"function"}],ne&&(this.all=this.all.concat(ne)),this.update()}var ee=te.prototype;return ee.add=function(ne,se){ne==="rule"?this.j.splice(se.position||0,0,se.value):this.all.push(se),this.update()},ee.resolve=function(ne,se){var ae=this;se===void 0&&(se={});var ue=se.once?this.once:this.page;ue=ue.filter(se.self?function(ye){return ye.name&&ye.name==="self"}:function(ye){return!ye.name||ye.name!=="self"});var de=new Map,oe=ue.find(function(ye){var Te=!0,Ae={};return se.self&&ye.name==="self"?(de.set(ye,Ae),!0):(ae.j.reverse().forEach(function(Ce){Te&&(Te=ae.M(ye,Ce,ne,Ae),ye.from&&ye.to&&(Te=ae.M(ye,Ce,ne,Ae,"from")&&ae.M(ye,Ce,ne,Ae,"to")),ye.from&&!ye.to&&(Te=ae.M(ye,Ce,ne,Ae,"from")),!ye.from&&ye.to&&(Te=ae.M(ye,Ce,ne,Ae,"to")))}),de.set(ye,Ae),Te)}),me=de.get(oe),ve=[];if(ve.push(se.once?"once":"page"),se.self&&ve.push("self"),me){var Ee,Pe=[oe];Object.keys(me).length>0&&Pe.push(me),(Ee=this.logger).info.apply(Ee,["Transition found ["+ve.join(",")+"]"].concat(Pe))}else this.logger.info("No transition found ["+ve.join(",")+"]");return oe},ee.update=function(){var ne=this;this.all=this.all.map(function(se){return ne.N(se)}).sort(function(se,ae){return se.priority-ae.priority}).reverse().map(function(se){return delete se.priority,se}),this.page=this.all.filter(function(se){return se.leave!==void 0||se.enter!==void 0}),this.once=this.all.filter(function(se){return se.once!==void 0})},ee.M=function(ne,se,ae,ue,de){var oe=!0,me=!1,ve=ne,Ee=se.name,Pe=Ee,ye=Ee,Te=Ee,Ae=de?ve[de]:ve,Ce=de==="to"?ae.next:ae.current;if(de?Ae&&Ae[Ee]:Ae[Ee]){switch(se.type){case"strings":default:var De=Array.isArray(Ae[Pe])?Ae[Pe]:[Ae[Pe]];Ce[Pe]&&De.indexOf(Ce[Pe])!==-1&&(me=!0),De.indexOf(Ce[Pe])===-1&&(oe=!1);break;case"object":var Ie=Array.isArray(Ae[ye])?Ae[ye]:[Ae[ye]];Ce[ye]?(Ce[ye].name&&Ie.indexOf(Ce[ye].name)!==-1&&(me=!0),Ie.indexOf(Ce[ye].name)===-1&&(oe=!1)):oe=!1;break;case"function":Ae[Te](ae)?me=!0:oe=!1}me&&(de?(ue[de]=ue[de]||{},ue[de][Ee]=ve[de][Ee]):ue[Ee]=ve[Ee])}return oe},ee.S=function(ne,se,ae){var ue=0;return(ne[se]||ne.from&&ne.from[se]||ne.to&&ne.to[se])&&(ue+=Math.pow(10,ae),ne.from&&ne.from[se]&&(ue+=1),ne.to&&ne.to[se]&&(ue+=2)),ue},ee.N=function(ne){var se=this;ne.priority=0;var ae=0;return this.j.forEach(function(ue,de){ae+=se.S(ne,ue.name,de+1)}),ne.priority=ae,ne},te}();function W(te,ee){try{var ne=te()}catch(se){return ee(se)}return ne&&ne.then?ne.then(void 0,ee):ne}var K=function(){function te(ne){ne===void 0&&(ne=[]),this.logger=new d("@barba/core"),this.store=void 0,this.C=!1,this.store=new J(ne)}var ee=te.prototype;return ee.get=function(ne,se){return this.store.resolve(ne,se)},ee.doOnce=function(ne){var se=ne.data,ae=ne.transition;try{var ue=function(){de.C=!1},de=this,oe=ae||{};de.C=!0;var me=W(function(){return Promise.resolve(de.L("beforeOnce",se,oe)).then(function(){return Promise.resolve(de.once(se,oe)).then(function(){return Promise.resolve(de.L("afterOnce",se,oe)).then(function(){})})})},function(ve){de.C=!1,de.logger.debug("Transition error [before/after/once]"),de.logger.error(ve)});return Promise.resolve(me&&me.then?me.then(ue):ue())}catch(ve){return Promise.reject(ve)}},ee.doPage=function(ne){var se=ne.data,ae=ne.transition,ue=ne.page,de=ne.wrapper;try{var oe=function(ye){me.C=!1},me=this,ve=ae||{},Ee=ve.sync===!0||!1;me.C=!0;var Pe=W(function(){function ye(){return Promise.resolve(me.L("before",se,ve)).then(function(){function Ae(De){return Promise.resolve(me.remove(se)).then(function(){return Promise.resolve(me.L("after",se,ve)).then(function(){})})}var Ce=function(){if(Ee)return W(function(){return Promise.resolve(me.add(se,de)).then(function(){return Promise.resolve(me.L("beforeLeave",se,ve)).then(function(){return Promise.resolve(me.L("beforeEnter",se,ve)).then(function(){return Promise.resolve(Promise.all([me.leave(se,ve),me.enter(se,ve)])).then(function(){return Promise.resolve(me.L("afterLeave",se,ve)).then(function(){return Promise.resolve(me.L("afterEnter",se,ve)).then(function(){})})})})})})},function(Re){if(me.H(Re))throw new G(Re,"Transition error [sync]")});var De=function(Re){return W(function(){var Oe=function(){if(Ie!==!1)return Promise.resolve(me.add(se,de)).then(function(){return Promise.resolve(me.L("beforeEnter",se,ve)).then(function(){return Promise.resolve(me.enter(se,ve,Ie)).then(function(){return Promise.resolve(me.L("afterEnter",se,ve)).then(function(){})})})})}();if(Oe&&Oe.then)return Oe.then(function(){})},function(Oe){if(me.H(Oe))throw new G(Oe,"Transition error [before/after/enter]")})},Ie=!1,ze=W(function(){return Promise.resolve(me.L("beforeLeave",se,ve)).then(function(){return Promise.resolve(Promise.all([me.leave(se,ve),P(ue,se)]).then(function(Re){return Re[0]})).then(function(Re){return Ie=Re,Promise.resolve(me.L("afterLeave",se,ve)).then(function(){})})})},function(Re){if(me.H(Re))throw new G(Re,"Transition error [before/after/leave]")});return ze&&ze.then?ze.then(De):De()}();return Ce&&Ce.then?Ce.then(Ae):Ae()})}var Te=function(){if(Ee)return Promise.resolve(P(ue,se)).then(function(){})}();return Te&&Te.then?Te.then(ye):ye()},function(ye){throw me.C=!1,ye.name&&ye.name==="BarbaError"?(me.logger.debug(ye.label),me.logger.error(ye.error),ye):(me.logger.debug("Transition error [page]"),me.logger.error(ye),ye)});return Promise.resolve(Pe&&Pe.then?Pe.then(oe):oe())}catch(ye){return Promise.reject(ye)}},ee.once=function(ne,se){try{return Promise.resolve(S.do("once",ne,se)).then(function(){return se.once?N(se.once,se)(ne):Promise.resolve()})}catch(ae){return Promise.reject(ae)}},ee.leave=function(ne,se){try{return Promise.resolve(S.do("leave",ne,se)).then(function(){return se.leave?N(se.leave,se)(ne):Promise.resolve()})}catch(ae){return Promise.reject(ae)}},ee.enter=function(ne,se,ae){try{return Promise.resolve(S.do("enter",ne,se)).then(function(){return se.enter?N(se.enter,se)(ne,ae):Promise.resolve()})}catch(ue){return Promise.reject(ue)}},ee.add=function(ne,se){try{return w.addContainer(ne.next.container,se),S.do("nextAdded",ne),Promise.resolve()}catch(ae){return Promise.reject(ae)}},ee.remove=function(ne){try{return w.removeContainer(ne.current.container),S.do("currentRemoved",ne),Promise.resolve()}catch(se){return Promise.reject(se)}},ee.H=function(ne){return ne.message?!/Timeout error|Fetch error/.test(ne.message):!ne.status},ee.L=function(ne,se,ae){try{return Promise.resolve(S.do(ne,se,ae)).then(function(){return ae[ne]?N(ae[ne],ae)(se):Promise.resolve()})}catch(ue){return Promise.reject(ue)}},n(te,[{key:"isRunning",get:function(){return this.C},set:function(ne){this.C=ne}},{key:"hasOnce",get:function(){return this.store.once.length>0}},{key:"hasSelf",get:function(){return this.store.all.some(function(ne){return ne.name==="self"})}},{key:"shouldWait",get:function(){return this.store.all.some(function(ne){return ne.to&&!ne.to.route||ne.sync})}}]),te}(),V=function(){function te(ee){var ne=this;this.names=["beforeLeave","afterLeave","beforeEnter","afterEnter"],this.byNamespace=new Map,ee.length!==0&&(ee.forEach(function(se){ne.byNamespace.set(se.namespace,se)}),this.names.forEach(function(se){S[se](ne._(se))}))}return te.prototype._=function(ee){var ne=this;return function(se){var ae=ee.match(/enter/i)?se.next:se.current,ue=ne.byNamespace.get(ae.namespace);return ue&&ue[ee]?N(ue[ee],ue)(se):Promise.resolve()}},te}();Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(te){var ee=this;do{if(ee.matches(te))return ee;ee=ee.parentElement||ee.parentNode}while(ee!==null&&ee.nodeType===1);return null});var Y={container:null,html:"",namespace:"",url:{hash:"",href:"",path:"",port:null,query:{}}},Z=new(function(){function te(){this.version="2.10.3",this.schemaPage=Y,this.Logger=d,this.logger=new d("@barba/core"),this.plugins=[],this.timeout=void 0,this.cacheIgnore=void 0,this.cacheFirstPage=void 0,this.prefetchIgnore=void 0,this.preventRunning=void 0,this.hooks=S,this.cache=void 0,this.headers=void 0,this.prevent=void 0,this.transitions=void 0,this.views=void 0,this.dom=w,this.helpers=g,this.history=y,this.request=j,this.url=A,this.D=void 0,this.B=void 0,this.q=void 0,this.F=void 0}var ee=te.prototype;return ee.use=function(ne,se){var ae=this.plugins;ae.indexOf(ne)>-1?this.logger.warn("Plugin ["+ne.name+"] already installed."):typeof ne.install=="function"?(ne.install(this,se),ae.push(ne)):this.logger.warn("Plugin ["+ne.name+'] has no "install" method.')},ee.init=function(ne){var se=ne===void 0?{}:ne,ae=se.transitions,ue=ae===void 0?[]:ae,de=se.views,oe=de===void 0?[]:de,me=se.schema,ve=me===void 0?m:me,Ee=se.requestError,Pe=se.timeout,ye=Pe===void 0?2e3:Pe,Te=se.cacheIgnore,Ae=Te!==void 0&&Te,Ce=se.cacheFirstPage,De=Ce!==void 0&&Ce,Ie=se.prefetchIgnore,ze=Ie!==void 0&&Ie,Re=se.preventRunning,Oe=Re!==void 0&&Re,qe=se.prevent,Ze=qe===void 0?null:qe,Ue=se.debug,Ye=se.logLevel;if(d.setLevel((Ue!==void 0&&Ue)===!0?"debug":Ye===void 0?"off":Ye),this.logger.info(this.version),Object.keys(ve).forEach(function(ft){m[ft]&&(m[ft]=ve[ft])}),this.B=Ee,this.timeout=ye,this.cacheIgnore=Ae,this.cacheFirstPage=De,this.prefetchIgnore=ze,this.preventRunning=Oe,this.q=this.dom.getWrapper(),!this.q)throw new Error("[@barba/core] No Barba wrapper found");this.I();var ct=this.data.current;if(!ct.container)throw new Error("[@barba/core] No Barba container found");if(this.cache=new L(Ae),this.headers=new H,this.prevent=new z(ze),this.transitions=new K(ue),this.views=new V(oe),Ze!==null){if(typeof Ze!="function")throw new Error("[@barba/core] Prevent should be a function");this.prevent.add("preventCustom",Ze)}this.history.init(ct.url.href,ct.namespace),De&&this.cache.set(ct.url.href,Promise.resolve({html:ct.html,url:ct.url}),"init","fulfilled"),this.U=this.U.bind(this),this.$=this.$.bind(this),this.X=this.X.bind(this),this.G(),this.plugins.forEach(function(ft){return ft.init()});var at=this.data;at.trigger="barba",at.next=at.current,at.current=r({},this.schemaPage),this.hooks.do("ready",at),this.once(at),this.I()},ee.destroy=function(){this.I(),this.J(),this.history.clear(),this.hooks.clear(),this.plugins=[]},ee.force=function(ne){window.location.assign(ne)},ee.go=function(ne,se,ae){var ue;if(se===void 0&&(se="barba"),this.F=null,this.transitions.isRunning)this.force(ne);else if(!(ue=se==="popstate"?this.history.current&&this.url.getPath(this.history.current.url)===this.url.getPath(ne)&&this.url.getQuery(this.history.current.url,!0)===this.url.getQuery(ne,!0):this.prevent.run("sameUrl",null,null,ne))||this.transitions.hasSelf)return se=this.history.change(this.cache.has(ne)?this.cache.get(ne).target:ne,se,ae),ae&&(ae.stopPropagation(),ae.preventDefault()),this.page(ne,se,ae!=null?ae:void 0,ue)},ee.once=function(ne){try{var se=this;return Promise.resolve(se.hooks.do("beforeEnter",ne)).then(function(){function ae(){return Promise.resolve(se.hooks.do("afterEnter",ne)).then(function(){})}var ue=function(){if(se.transitions.hasOnce){var de=se.transitions.get(ne,{once:!0});return Promise.resolve(se.transitions.doOnce({transition:de,data:ne})).then(function(){})}}();return ue&&ue.then?ue.then(ae):ae()})}catch(ae){return Promise.reject(ae)}},ee.page=function(ne,se,ae,ue){try{var de,oe=function(){var Pe=me.data;return Promise.resolve(me.hooks.do("page",Pe)).then(function(){var ye=function(Te,Ae){try{var Ce=(De=me.transitions.get(Pe,{once:!1,self:ue}),Promise.resolve(me.transitions.doPage({data:Pe,page:de,transition:De,wrapper:me.q})).then(function(){me.I()}))}catch{return Ae()}var De;return Ce&&Ce.then?Ce.then(void 0,Ae):Ce}(0,function(){d.getLevel()===0&&me.force(Pe.next.url.href)});if(ye&&ye.then)return ye.then(function(){})})},me=this;if(me.data.next.url=r({href:ne},me.url.parse(ne)),me.data.trigger=se,me.data.event=ae,me.cache.has(ne))de=me.cache.update(ne,{action:"click"}).request;else{var ve=me.request(ne,me.timeout,me.onRequestError.bind(me,se),me.cache,me.headers);ve.then(function(Pe){Pe.url.href!==ne&&me.history.add(Pe.url.href,se,"replace")}),de=me.cache.set(ne,ve,"click","pending").request}var Ee=function(){if(me.transitions.shouldWait)return Promise.resolve(P(de,me.data)).then(function(){})}();return Promise.resolve(Ee&&Ee.then?Ee.then(oe):oe())}catch(Pe){return Promise.reject(Pe)}},ee.onRequestError=function(ne){this.transitions.isRunning=!1;var se=[].slice.call(arguments,1),ae=se[0],ue=se[1],de=this.cache.getAction(ae);return this.cache.delete(ae),this.B&&this.B(ne,de,ae,ue)===!1||de==="click"&&this.force(ae),!1},ee.prefetch=function(ne){var se=this;ne=this.url.getAbsoluteHref(ne),this.cache.has(ne)||this.cache.set(ne,this.request(ne,this.timeout,this.onRequestError.bind(this,"barba"),this.cache,this.headers).catch(function(ae){se.logger.error(ae)}),"prefetch","pending")},ee.G=function(){this.prefetchIgnore!==!0&&(document.addEventListener("mouseover",this.U),document.addEventListener("touchstart",this.U)),document.addEventListener("click",this.$),window.addEventListener("popstate",this.X)},ee.J=function(){this.prefetchIgnore!==!0&&(document.removeEventListener("mouseover",this.U),document.removeEventListener("touchstart",this.U)),document.removeEventListener("click",this.$),window.removeEventListener("popstate",this.X)},ee.U=function(ne){var se=this,ae=this.W(ne);if(ae){var ue=this.url.getAbsoluteHref(this.dom.getHref(ae));this.prevent.checkHref(ue)||this.cache.has(ue)||this.cache.set(ue,this.request(ue,this.timeout,this.onRequestError.bind(this,ae),this.cache,this.headers).catch(function(de){se.logger.error(de)}),"enter","pending")}},ee.$=function(ne){var se=this.W(ne);if(se){if(this.transitions.isRunning&&this.preventRunning)return ne.preventDefault(),void ne.stopPropagation();this.F=ne,this.go(this.dom.getHref(se),se,ne)}},ee.X=function(ne){this.go(this.url.getHref(),"popstate",ne)},ee.W=function(ne){for(var se=ne.target;se&&!this.dom.getHref(se);)se=se.parentNode;if(se&&!this.prevent.checkLink(se,ne,this.dom.getHref(se)))return se},ee.I=function(){var ne=this.url.getHref(),se={container:this.dom.getContainer(),html:this.dom.getHtml(),namespace:this.dom.getNamespace(),url:r({href:ne},this.url.parse(ne))};this.D={current:se,event:void 0,next:r({},this.schemaPage),trigger:void 0},this.hooks.do("reset",this.data)},n(te,[{key:"data",get:function(){return this.D}},{key:"wrapper",get:function(){return this.q}}]),te}());function pxFromEm(te=2){try{const ee=document.body||document.documentElement,ne=parseFloat(getComputedStyle(ee).fontSize);if(!Number.isNaN(ne)&&ne>0)return te*ne;const se=document.documentElement,ae=parseFloat(getComputedStyle(se).fontSize);if(!Number.isNaN(ae)&&ae>0)return te*ae}catch{}return te*16}function isMobileViewport(){try{if(window.matchMedia&&(window.matchMedia("(max-width: 767px)").matches||window.matchMedia("(hover: none) and (pointer: coarse)").matches))return!0}catch{}return!1}function ensureState(){return window.__videoClipSticky||(window.__videoClipSticky={rafId:null,items:new Set,running:!1,offsetPx:pxFromEm(2),resizeHandler:null,breakpointHandler:null,firstVideo:null,lastVideo:null,firstFixedApplied:!1,lastFixedRemoved:!1,prevFirstTop:null,prevLastTop:null}),window.__videoClipSticky}function getNodeScaleY(te){try{const ee=getComputedStyle(te).transform;if(!ee||ee==="none")return 1;if(ee.startsWith("matrix3d")){const ne=ee.slice(9,-1).split(",").map(se=>parseFloat(se.trim()));if(ne.length===16){const se=ne[4],ae=ne[5],ue=ne[6];return Math.sqrt(se*se+ae*ae+ue*ue)||1}return 1}if(ee.startsWith("matrix(")){const ne=ee.slice(7,-1).split(",").map(se=>parseFloat(se.trim()));if(ne.length>=4){const se=ne[1],ae=ne[3];return Math.sqrt(se*se+ae*ae)||1}return 1}return 1}catch{return 1}}function getEffectiveScaleY(te){let ee=1;try{let ne=te;for(;ne&&ne!==document&&ne!==document.documentElement;)ee*=getNodeScaleY(ne),ne=ne.parentElement||ne.parentNode}catch{}return ee||1}function registerVideoInners(te,ee){try{if(!ee)return;ee.querySelectorAll(".video-clip-inner").forEach(se=>{let ae=!1;if(te.items.forEach(ue=>{ue.el===se&&(ae=!0)}),!ae){const ue=getEffectiveScaleY(se);try{se.style.willChange="transform"}catch{}te.items.add({el:se,lastY:NaN,scaleY:ue})}})}catch{}}function unregisterVideoInners(te,ee){try{if(!ee)return;const ne=[];te.items.forEach(se=>{try{ee.contains&&ee.contains(se.el)&&ne.push(se)}catch{}}),ne.forEach(se=>{try{se.el&&(se.el.style.transform="",se.el.style.willChange="")}catch{}try{te.items.delete(se)}catch{}})}catch{}}function getContentTopOffsetPx(){try{const te=window.__lenisWrapper||document.querySelector(".page-wrap")||null;if(!te)return 0;const ee=getComputedStyle(te).top;if(!ee||ee==="auto")return 0;const ne=parseFloat(ee);return Number.isFinite(ne)?ne:0}catch{return 0}}function computeTranslateCssY(te,ee,ne,se){try{const ae=te.getBoundingClientRect(),ue=Number.isFinite(ee)?ee*se:0,de=ae.top-ue,me=(ne-de)/(se||1),ve=window.devicePixelRatio||1;return Math.round(me*ve)/ve}catch{return 0}}function startLoop(){const te=ensureState();if(te.running)return;te.running=!0;const ee=()=>{try{const ne=pxFromEm(2),se=getContentTopOffsetPx();te.offsetPx=ne+se;try{const ae=te.offsetPx,ue=0;if(te.firstVideo&&te.firstVideo.isConnected){const de=te.firstVideo.getBoundingClientRect().top,oe=te.prevFirstTop;if(oe!==null){const me=de-oe;if(me<0&&oe>ae+ue&&de<=ae){try{te.firstVideo.classList.add("is-fixed")}catch{te.firstVideo.className+=" is-fixed"}registerVideoInners(te,te.firstVideo),te.firstFixedApplied=!0}else if(me>0&&oe<ae-ue&&de>=ae){try{te.firstVideo.classList.remove("is-fixed")}catch{te.firstVideo.className=(te.firstVideo.className||"").replace(/\bis-fixed\b/,"").trim()}unregisterVideoInners(te,te.firstVideo),te.firstFixedApplied=!1}}te.prevFirstTop=de}if(te.lastVideo&&te.lastVideo.isConnected){const de=te.lastVideo.getBoundingClientRect().top,oe=te.prevLastTop,me=!!(te.lastVideo.classList&&te.lastVideo.classList.contains("is-fixed"))||(te.lastVideo.className||"").indexOf("is-fixed")!==-1;if(oe!==null){const ve=de-oe;if(ve<0&&oe>ae+ue&&de<=ae){if(me)try{te.lastVideo.classList.remove("is-fixed")}catch{te.lastVideo.className=(te.lastVideo.className||"").replace(/\bis-fixed\b/,"").trim()}unregisterVideoInners(te,te.lastVideo),te.lastFixedRemoved=!0}else if(ve>0&&oe<ae-ue&&de>=ae){try{te.lastVideo.classList.add("is-fixed")}catch{te.lastVideo.className+=" is-fixed"}registerVideoInners(te,te.lastVideo),te.lastFixedRemoved=!1}}te.prevLastTop=de}}catch{}te.items.forEach(ae=>{const{el:ue,scaleY:de}=ae;if(!ue||!ue.isConnected)return;let oe=!1;try{const ve=ue.closest?ue.closest(".video"):null;oe=!!(ve&&ve.classList&&ve.classList.contains("is-fixed"))}catch{oe=!1}if(!oe){Number.isFinite(ae.lastY)&&(ue.style.transform="",ae.lastY=NaN);return}const me=computeTranslateCssY(ue,ae.lastY,te.offsetPx,de||1);(!Number.isFinite(ae.lastY)||me!==ae.lastY)&&(ue.style.transform=`translate3d(0, ${me}px, 0)`,ae.lastY=me)})}catch{}te.rafId=requestAnimationFrame(ee)};te.rafId=requestAnimationFrame(ee)}function stopLoopIfIdle(){const te=ensureState();if(te.items.size===0&&te.running){try{cancelAnimationFrame(te.rafId)}catch{}te.rafId=null,te.running=!1}}function initVideoClipStickyTransform(te=document){const ee=ensureState(),ne=te&&te.querySelector?te:document;try{ee.breakpointHandler&&(window.removeEventListener("resize",ee.breakpointHandler),window.removeEventListener("orientationchange",ee.breakpointHandler))}catch{}const se=isMobileViewport();if(ee.breakpointHandler=(()=>{let de=se;return()=>{const oe=isMobileViewport();if(oe!==de)if(de=oe,oe)try{destroyVideoClipStickyTransform()}catch{}else try{initVideoClipStickyTransform(document)}catch{}}})(),window.addEventListener("resize",ee.breakpointHandler),window.addEventListener("orientationchange",ee.breakpointHandler),se)return destroyVideoClipStickyTransform(),[];const ae=ne.querySelectorAll(".video.is-fixed .video-clip-inner");try{ee.firstVideo=ne.querySelector('.video[data-video="first"]')||document.querySelector('.video[data-video="first"]')||null}catch{ee.firstVideo=null}try{ee.lastVideo=ne.querySelector('.video[data-video="last"]')||document.querySelector('.video[data-video="last"]')||null}catch{ee.lastVideo=null}ee.prevFirstTop=ee.firstVideo?ee.firstVideo.getBoundingClientRect().top:null,ee.prevLastTop=ee.lastVideo?ee.lastVideo.getBoundingClientRect().top:null,ee.firstFixedApplied=!!(ee.firstVideo&&ee.firstVideo.classList&&ee.firstVideo.classList.contains("is-fixed")),ee.lastFixedRemoved=!1;try{const de=pxFromEm(2)+getContentTopOffsetPx();if(ee.firstVideo&&ee.firstVideo.isConnected)if(ee.firstVideo.getBoundingClientRect().top<=de){try{ee.firstVideo.classList.add("is-fixed")}catch{ee.firstVideo.className+=" is-fixed"}registerVideoInners(ee,ee.firstVideo),ee.firstFixedApplied=!0}else{try{ee.firstVideo.classList.remove("is-fixed")}catch{ee.firstVideo.className=(ee.firstVideo.className||"").replace(/\bis-fixed\b/,"").trim()}unregisterVideoInners(ee,ee.firstVideo),ee.firstFixedApplied=!1}if(ee.lastVideo&&ee.lastVideo.isConnected)if(ee.lastVideo.getBoundingClientRect().top>de){try{ee.lastVideo.classList.add("is-fixed")}catch{ee.lastVideo.className+=" is-fixed"}registerVideoInners(ee,ee.lastVideo),ee.lastFixedRemoved=!1}else{try{ee.lastVideo.classList.remove("is-fixed")}catch{ee.lastVideo.className=(ee.lastVideo.className||"").replace(/\bis-fixed\b/,"").trim()}unregisterVideoInners(ee,ee.lastVideo),ee.lastFixedRemoved=!0}}catch{}if(!ae||!ae.length)return stopLoopIfIdle(),[];const ue=[];ae.forEach(de=>{try{let oe=!1;if(ee.items.forEach(ve=>{ve.el===de&&(oe=!0)}),oe)return;const me=getEffectiveScaleY(de);try{de.style.willChange="transform"}catch{}ee.items.add({el:de,lastY:NaN,scaleY:me}),ue.push(de)}catch{}}),ee.items.size&&startLoop();try{ee.resizeHandler&&window.removeEventListener("resize",ee.resizeHandler)}catch{}return ee.resizeHandler=(()=>{let de;return()=>{clearTimeout(de),de=setTimeout(()=>{ee.items.forEach(oe=>{try{oe.scaleY=getEffectiveScaleY(oe.el)}catch{oe.scaleY=1}})},100)}})(),window.addEventListener("resize",ee.resizeHandler),ue}function destroyVideoClipStickyTransform(){const te=ensureState();try{te.items.forEach(ee=>{ee&&ee.el&&(ee.el.style.transform="",ee.el.style.willChange="")})}catch{}te.items.clear();try{te.resizeHandler&&(window.removeEventListener("resize",te.resizeHandler),te.resizeHandler=null)}catch{}stopLoopIfIdle()}gsapWithCSS.registerPlugin(ScrollTrigger);function initProcessProgression(te=document){const ee=te.querySelector(".section_process")||document.querySelector(".section_process");if(!ee)return;const ne=ee.querySelector(".process-progression-inner"),se=ee.querySelector(".process-progression");if(!ne||!se)return;try{const me=ee.querySelector(".process-progression-wrap")||ne.parentElement||ee;ScrollTrigger.getAll().forEach(Ee=>{try{Ee&&Ee.vars&&(Ee.vars.trigger===me||Ee.vars.trigger===ne)&&Ee.kill()}catch{}})}catch{}const ae=ee.querySelector(".process-progression_number")||ee.querySelector(".procress-progression_number")||null;let ue=null;ae&&(ue=ae.querySelector(".process-progression_number-inner"),ue||(ue=ae.querySelector(".procress-progression_number-inner")));let de=ee.querySelector(".process-progression #process-progress");de||(de=ee.querySelector(".procress-progression #process-progress")),de||(de=ee.querySelector("#process-progress"));try{ae&&!ae.style.position&&(ae.style.position="relative"),ue&&(ue.style.position="absolute",ue.style.left="0%",ue.style.top="50%",ue.style.transform="translateY(-50%)",ue.style.willChange="left")}catch{}try{se.style.height="100%",se.style.flexDirection="row",se.style.justifyContent="flex-start",se.style.alignItems="flex-end"}catch{}const oe=()=>{buildVerticalTicks(se,ne);try{window.__processResizeHandler&&window.removeEventListener("resize",window.__processResizeHandler)}catch{}let me;window.__processResizeHandler=()=>{clearTimeout(me),me=setTimeout(()=>{buildVerticalTicks(se,ne),ScrollTrigger.refresh()},150)},window.addEventListener("resize",window.__processResizeHandler),setupVerticalTickHighlighting(ee,ne,se,{numberTrack:ae,numberInner:ue,progressReadout:de});try{ScrollTrigger.refresh()}catch{}};requestAnimationFrame(()=>requestAnimationFrame(oe))}function buildVerticalTicks(te,ee){const ne=getComputedStyle(te),se=parseFloat(ne.columnGap||ne.getPropertyValue("column-gap")||ne.gap||0);let ae=te.querySelector(".scroll-tick.vertical");ae||(ae=document.createElement("div"),ae.className="scroll-tick vertical",te.appendChild(ae));const de=ae.getBoundingClientRect().width||2;let oe=te.clientWidth;if(!oe&&ee)try{const Pe=getComputedStyle(ee),ye=parseFloat(Pe.paddingLeft||0),Te=parseFloat(Pe.paddingRight||0);oe=Math.max(0,ee.clientWidth-ye-Te)}catch{oe=ee.clientWidth||0}const me=de+se,ve=me>0?Math.max(1,Math.floor((oe+se)/me)):1;te.innerHTML="";const Ee=document.createDocumentFragment();for(let Pe=0;Pe<ve;Pe++){const ye=document.createElement("div");ye.className="scroll-tick vertical",Ee.appendChild(ye)}te.appendChild(Ee)}function setupVerticalTickHighlighting(te,ee,ne,se={}){const ae=Array.from(ne.querySelectorAll(".scroll-tick.vertical"));if(!ae.length)return;const ue=Array.from(te.querySelectorAll(".process")),de=ue.length?ue[0]:null,oe=ue.length?ue[ue.length-1]:null,me=ye=>ye<0?0:ye>1?1:ye,ve=()=>{const ye=window.innerHeight||document.documentElement.clientHeight||0;let Te=0,Ae=1;if(de){const Re=de.getBoundingClientRect();Te=Math.round(Re.top)}if(oe){const Re=oe.getBoundingClientRect();Ae=Math.round(Re.bottom-ye)}Ae<=Te&&(Ae=Te+1);let Ce=me((0-Te)/(Ae-Te));if(oe){const Re=oe.getBoundingClientRect();Math.round(Re.bottom-ye)<=1&&(Ce=1)}const De=Ce*(ae.length-1),Ie=Math.round(De);ae.forEach(Re=>Re.classList.remove("is-xxl","is-xl","is-l","is-m"));const ze=(Re,Oe)=>{Re>=0&&Re<ae.length&&ae[Re].classList.add(Oe)};ze(Ie,"is-xxl"),ze(Ie-1,"is-xl"),ze(Ie+1,"is-xl"),ze(Ie-2,"is-l"),ze(Ie+2,"is-l"),ze(Ie-3,"is-m"),ze(Ie+3,"is-m");try{const Re=Math.round(Ce*100);if(se&&se.numberInner){const Oe=se.numberInner.parentElement;if(Oe){const qe=Oe.clientWidth||Oe.getBoundingClientRect().width||0,Ze=se.numberInner.getBoundingClientRect().width||0,Ue=Math.max(0,qe-Ze),Ye=Math.min(Ue,Math.max(0,Ue*Ce));se.numberInner.style.left=`${Ye}px`}}se&&se.progressReadout&&(se.progressReadout.textContent=String(Re))}catch{}};try{window.__processScrollListenerCleanup&&(window.__processScrollListenerCleanup(),window.__processScrollListenerCleanup=null)}catch{}const Ee=()=>requestAnimationFrame(ve),Pe=()=>{if(window.lenis&&typeof window.lenis.on=="function"){const Te=()=>Ee();return window.lenis.on("scroll",Te),()=>{try{typeof window.lenis.off=="function"&&window.lenis.off("scroll",Te)}catch{}}}const ye=()=>Ee();return window.addEventListener("scroll",ye,{passive:!0}),()=>{try{window.removeEventListener("scroll",ye)}catch{}}};try{window.__processScrollListenerCleanup=Pe()}catch{}ScrollTrigger.create({trigger:ee,start:"top top",end:()=>"bottom bottom",onUpdate:()=>ve(),pin:!1}),ve()}gsapWithCSS.registerPlugin(ScrollTrigger);function initScrollList(te=document){const ee=Array.from((te||document).querySelectorAll(".section_partners"));!ee.length||ee.forEach(ne=>{initScrollItems(ne);const se=Array.from(ne.querySelectorAll(".content_column > .scroll-indicator"));if(se.length){buildAllIndicators(se),setupTickHighlighting(ne,se);let ae;const ue=()=>{clearTimeout(ae),ae=setTimeout(()=>{buildAllIndicators(se),ScrollTrigger.refresh()},150)};window.addEventListener("resize",ue),window.addEventListener("orientationchange",ue)}})}function initScrollItems(te){const ee=Array.from(te.querySelectorAll(".scroll-list .scroll-item"));if(!ee.length)return;const ne=ee.map(ae=>ae.querySelector(".body-xl, .body-xxl, .body-next"));ne.forEach(ae=>{if(!ae)return;ae.classList.remove("is-active");const ue=ae.classList.contains("is-o-15")?"is-o-15":"is-o-20";ae.dataset.dimClass=ue,!ae.classList.contains("is-o-15")&&!ae.classList.contains("is-o-20")&&ae.classList.add(ue)});let se=null;ee.forEach((ae,ue)=>{const de=ne[ue];!de||ScrollTrigger.create({trigger:ae,start:"top center",end:"bottom center",onToggle(oe){if(oe.isActive){if(se&&se!==de){se.classList.remove("is-active");const ve=se.dataset.dimClass||"is-o-20";se.classList.contains(ve)||se.classList.add(ve)}const me=de.dataset.dimClass||"is-o-20";de.classList.contains(me)&&de.classList.remove(me),de.classList.add("is-active"),se=de}else if(se===de){de.classList.remove("is-active");const me=de.dataset.dimClass||"is-o-20";de.classList.contains(me)||de.classList.add(me),se=null}}})})}function buildAllIndicators(te){te.forEach(ee=>buildIndicator(ee))}function buildIndicator(te){const ee=getComputedStyle(te),ne=parseFloat(ee.rowGap||ee.getPropertyValue("row-gap")||ee.gridRowGap||0);let se=te.querySelector(".scroll-tick");se||(se=document.createElement("div"),se.className="scroll-tick",te.appendChild(se));const ae=se.getBoundingClientRect(),ue=ae&&ae.height?ae.height:0;let de=te.clientHeight;if(!de||de<=0){const ye=te.getBoundingClientRect();de=ye&&ye.height?ye.height:0}const oe=te.closest(".section_partners");if(oe){const ye=oe.querySelector(".scroll-list");if(ye){const Te=ye.getBoundingClientRect(),Ae=Math.max(Te&&Te.height||0,ye.clientHeight||0,ye.scrollHeight||0);Ae&&Ae>0&&(de=Ae)}}if(!de||de<=ue*2){let ye=0;if(oe){const Ie=oe.clientHeight||0,ze=oe.getBoundingClientRect();ye=Math.max(Ie,ze&&ze.height||0)}let Te=window.innerHeight||0;Te||(Te=document.documentElement?document.documentElement.clientHeight:0);const Ae=de||0,Ce=Ae>ye?Ae:ye,De=Ce>Te?Ce:Te;de=De>ue?De:ue}const me=te.closest(".content_column");if(me){const ye=me.getBoundingClientRect(),Te=ye&&ye.height||0,Ae=me.clientHeight||0,Ce=Te>Ae?Te:Ae;(!Ce||Math.abs(Ce-de)>1)&&(me.style.height=de+"px")}const ve=ue+ne;let Ee=ve>0?Math.max(1,Math.floor((de+ne)/ve)):1;te.innerHTML="";const Pe=document.createDocumentFragment();for(let ye=0;ye<Ee;ye++){const Te=document.createElement("div");Te.className="scroll-tick",Pe.appendChild(Te)}te.appendChild(Pe)}function setupTickHighlighting(te,ee){const ne=document.querySelector(".page-wrap")||te.closest(".page-wrap")||window,se=typeof window!="undefined"&&window.matchMedia?window.matchMedia("(max-width: 991px)").matches:!1;let ae=0;const ue=()=>{try{const me=document.createElement("div");me.style.position="fixed",me.style.top="0",me.style.left="0",me.style.height="100svh",me.style.width="0",me.style.pointerEvents="none",me.style.opacity="0",me.style.visibility="hidden",document.documentElement.appendChild(me);const ve=me.getBoundingClientRect().height||me.offsetHeight||0;return me.remove(),ve}catch{return 0}},de=()=>{ae=ue()};if(se){de();const me=()=>{clearTimeout(me._t),me._t=setTimeout(de,100)};window.addEventListener("resize",me),window.addEventListener("orientationchange",me)}const oe=()=>{let me;const ve=se&&ae>0?ae:window.innerHeight;if(ne===window)me={top:0,height:ve};else{const Pe=ne.getBoundingClientRect();se?me={top:0,height:ve}:me={top:Pe.top,height:Pe.height}}const Ee=me.top+me.height/2;ee.forEach(Pe=>{const ye=Array.from(Pe.querySelectorAll(".scroll-tick"));if(!ye.length)return;let Te=0,Ae=1/0;ye.forEach((De,Ie)=>{const ze=De.getBoundingClientRect(),Re=ze.top+ze.height/2,Oe=Math.abs(Re-Ee);Oe<Ae&&(Ae=Oe,Te=Ie)}),ye.forEach(De=>{De.classList.remove("is-xxl","is-xl","is-l","is-m")});const Ce=(De,Ie)=>{De>=0&&De<ye.length&&ye[De].classList.add(Ie)};Ce(Te,"is-xxl"),Ce(Te-1,"is-xl"),Ce(Te+1,"is-xl"),Ce(Te-2,"is-l"),Ce(Te+2,"is-l"),Ce(Te-3,"is-m"),Ce(Te+3,"is-m")})};ScrollTrigger.create({trigger:te,start:"top bottom",end:"bottom top",onUpdate:oe,onEnter:oe,onEnterBack:oe}),oe()}var version="1.3.8";function clamp(te,ee,ne){return Math.max(te,Math.min(ee,ne))}function lerp(te,ee,ne){return(1-ne)*te+ne*ee}function damp(te,ee,ne,se){return lerp(te,ee,1-Math.exp(-ne*se))}function modulo(te,ee){return(te%ee+ee)%ee}var Animate=class{constructor(){Jr(this,"isRunning",!1);Jr(this,"value",0);Jr(this,"from",0);Jr(this,"to",0);Jr(this,"currentTime",0);Jr(this,"lerp");Jr(this,"duration");Jr(this,"easing");Jr(this,"onUpdate")}advance(te){var ne;if(!this.isRunning)return;let ee=!1;if(this.duration&&this.easing){this.currentTime+=te;const se=clamp(0,this.currentTime/this.duration,1);ee=se>=1;const ae=ee?1:this.easing(se);this.value=this.from+(this.to-this.from)*ae}else this.lerp?(this.value=damp(this.value,this.to,this.lerp*60,te),Math.round(this.value)===this.to&&(this.value=this.to,ee=!0)):(this.value=this.to,ee=!0);ee&&this.stop(),(ne=this.onUpdate)==null||ne.call(this,this.value,ee)}stop(){this.isRunning=!1}fromTo(te,ee,{lerp:ne,duration:se,easing:ae,onStart:ue,onUpdate:de}){this.from=this.value=te,this.to=ee,this.lerp=ne,this.duration=se,this.easing=ae,this.currentTime=0,this.isRunning=!0,ue==null||ue(),this.onUpdate=de}};function debounce$1(te,ee){let ne;return function(...se){let ae=this;clearTimeout(ne),ne=setTimeout(()=>{ne=void 0,te.apply(ae,se)},ee)}}var Dimensions=class{constructor(te,ee,{autoResize:ne=!0,debounce:se=250}={}){Jr(this,"width",0);Jr(this,"height",0);Jr(this,"scrollHeight",0);Jr(this,"scrollWidth",0);Jr(this,"debouncedResize");Jr(this,"wrapperResizeObserver");Jr(this,"contentResizeObserver");Jr(this,"resize",()=>{this.onWrapperResize(),this.onContentResize()});Jr(this,"onWrapperResize",()=>{this.wrapper instanceof Window?(this.width=window.innerWidth,this.height=window.innerHeight):(this.width=this.wrapper.clientWidth,this.height=this.wrapper.clientHeight)});Jr(this,"onContentResize",()=>{this.wrapper instanceof Window?(this.scrollHeight=this.content.scrollHeight,this.scrollWidth=this.content.scrollWidth):(this.scrollHeight=this.wrapper.scrollHeight,this.scrollWidth=this.wrapper.scrollWidth)});this.wrapper=te,this.content=ee,ne&&(this.debouncedResize=debounce$1(this.resize,se),this.wrapper instanceof Window?window.addEventListener("resize",this.debouncedResize,!1):(this.wrapperResizeObserver=new ResizeObserver(this.debouncedResize),this.wrapperResizeObserver.observe(this.wrapper)),this.contentResizeObserver=new ResizeObserver(this.debouncedResize),this.contentResizeObserver.observe(this.content)),this.resize()}destroy(){var te,ee;(te=this.wrapperResizeObserver)==null||te.disconnect(),(ee=this.contentResizeObserver)==null||ee.disconnect(),this.wrapper===window&&this.debouncedResize&&window.removeEventListener("resize",this.debouncedResize,!1)}get limit(){return{x:this.scrollWidth-this.width,y:this.scrollHeight-this.height}}},Emitter=class{constructor(){Jr(this,"events",{})}emit(te,...ee){var se;let ne=this.events[te]||[];for(let ae=0,ue=ne.length;ae<ue;ae++)(se=ne[ae])==null||se.call(ne,...ee)}on(te,ee){var ne;return(ne=this.events[te])!=null&&ne.push(ee)||(this.events[te]=[ee]),()=>{var se;this.events[te]=(se=this.events[te])==null?void 0:se.filter(ae=>ee!==ae)}}off(te,ee){var ne;this.events[te]=(ne=this.events[te])==null?void 0:ne.filter(se=>ee!==se)}destroy(){this.events={}}},LINE_HEIGHT=100/6,listenerOptions={passive:!1},VirtualScroll=class{constructor(te,ee={wheelMultiplier:1,touchMultiplier:1}){Jr(this,"touchStart",{x:0,y:0});Jr(this,"lastDelta",{x:0,y:0});Jr(this,"window",{width:0,height:0});Jr(this,"emitter",new Emitter);Jr(this,"onTouchStart",te=>{const{clientX:ee,clientY:ne}=te.targetTouches?te.targetTouches[0]:te;this.touchStart.x=ee,this.touchStart.y=ne,this.lastDelta={x:0,y:0},this.emitter.emit("scroll",{deltaX:0,deltaY:0,event:te})});Jr(this,"onTouchMove",te=>{const{clientX:ee,clientY:ne}=te.targetTouches?te.targetTouches[0]:te,se=-(ee-this.touchStart.x)*this.options.touchMultiplier,ae=-(ne-this.touchStart.y)*this.options.touchMultiplier;this.touchStart.x=ee,this.touchStart.y=ne,this.lastDelta={x:se,y:ae},this.emitter.emit("scroll",{deltaX:se,deltaY:ae,event:te})});Jr(this,"onTouchEnd",te=>{this.emitter.emit("scroll",{deltaX:this.lastDelta.x,deltaY:this.lastDelta.y,event:te})});Jr(this,"onWheel",te=>{let{deltaX:ee,deltaY:ne,deltaMode:se}=te;const ae=se===1?LINE_HEIGHT:se===2?this.window.width:1,ue=se===1?LINE_HEIGHT:se===2?this.window.height:1;ee*=ae,ne*=ue,ee*=this.options.wheelMultiplier,ne*=this.options.wheelMultiplier,this.emitter.emit("scroll",{deltaX:ee,deltaY:ne,event:te})});Jr(this,"onWindowResize",()=>{this.window={width:window.innerWidth,height:window.innerHeight}});this.element=te,this.options=ee,window.addEventListener("resize",this.onWindowResize,!1),this.onWindowResize(),this.element.addEventListener("wheel",this.onWheel,listenerOptions),this.element.addEventListener("touchstart",this.onTouchStart,listenerOptions),this.element.addEventListener("touchmove",this.onTouchMove,listenerOptions),this.element.addEventListener("touchend",this.onTouchEnd,listenerOptions)}on(te,ee){return this.emitter.on(te,ee)}destroy(){this.emitter.destroy(),window.removeEventListener("resize",this.onWindowResize,!1),this.element.removeEventListener("wheel",this.onWheel,listenerOptions),this.element.removeEventListener("touchstart",this.onTouchStart,listenerOptions),this.element.removeEventListener("touchmove",this.onTouchMove,listenerOptions),this.element.removeEventListener("touchend",this.onTouchEnd,listenerOptions)}},defaultEasing=te=>Math.min(1,1.001-Math.pow(2,-10*te)),Lenis=class{constructor({wrapper:te=window,content:ee=document.documentElement,eventsTarget:ne=te,smoothWheel:se=!0,syncTouch:ae=!1,syncTouchLerp:ue=.075,touchInertiaExponent:de=1.7,duration:oe,easing:me,lerp:ve=.1,infinite:Ee=!1,orientation:Pe="vertical",gestureOrientation:ye="vertical",touchMultiplier:Te=1,wheelMultiplier:Ae=1,autoResize:Ce=!0,prevent:De,virtualScroll:Ie,overscroll:ze=!0,autoRaf:Re=!1,anchors:Oe=!1,autoToggle:qe=!1,allowNestedScroll:Ze=!1,__experimental__naiveDimensions:Ue=!1}={}){Jr(this,"_isScrolling",!1);Jr(this,"_isStopped",!1);Jr(this,"_isLocked",!1);Jr(this,"_preventNextNativeScrollEvent",!1);Jr(this,"_resetVelocityTimeout",null);Jr(this,"__rafID",null);Jr(this,"isTouching");Jr(this,"time",0);Jr(this,"userData",{});Jr(this,"lastVelocity",0);Jr(this,"velocity",0);Jr(this,"direction",0);Jr(this,"options");Jr(this,"targetScroll");Jr(this,"animatedScroll");Jr(this,"animate",new Animate);Jr(this,"emitter",new Emitter);Jr(this,"dimensions");Jr(this,"virtualScroll");Jr(this,"onScrollEnd",te=>{te instanceof CustomEvent||(this.isScrolling==="smooth"||this.isScrolling===!1)&&te.stopPropagation()});Jr(this,"dispatchScrollendEvent",()=>{this.options.wrapper.dispatchEvent(new CustomEvent("scrollend",{bubbles:this.options.wrapper===window,detail:{lenisScrollEnd:!0}}))});Jr(this,"onTransitionEnd",te=>{if(te.propertyName.includes("overflow")){const ee=this.isHorizontal?"overflow-x":"overflow-y",ne=getComputedStyle(this.rootElement)[ee];["hidden","clip"].includes(ne)?this.internalStop():this.internalStart()}});Jr(this,"onClick",te=>{const ne=te.composedPath().find(se=>{var ae,ue,de;return se instanceof HTMLAnchorElement&&(((ae=se.getAttribute("href"))==null?void 0:ae.startsWith("#"))||((ue=se.getAttribute("href"))==null?void 0:ue.startsWith("/#"))||((de=se.getAttribute("href"))==null?void 0:de.startsWith("./#")))});if(ne){const se=ne.getAttribute("href");if(se){const ae=typeof this.options.anchors=="object"&&this.options.anchors?this.options.anchors:void 0;let ue=`#${se.split("#")[1]}`;["#","/#","./#","#top","/#top","./#top"].includes(se)&&(ue=0),this.scrollTo(ue,ae)}}});Jr(this,"onPointerDown",te=>{te.button===1&&this.reset()});Jr(this,"onVirtualScroll",te=>{if(typeof this.options.virtualScroll=="function"&&this.options.virtualScroll(te)===!1)return;const{deltaX:ee,deltaY:ne,event:se}=te;if(this.emitter.emit("virtual-scroll",{deltaX:ee,deltaY:ne,event:se}),se.ctrlKey||se.lenisStopPropagation)return;const ae=se.type.includes("touch"),ue=se.type.includes("wheel");this.isTouching=se.type==="touchstart"||se.type==="touchmove";const de=ee===0&&ne===0;if(this.options.syncTouch&&ae&&se.type==="touchstart"&&de&&!this.isStopped&&!this.isLocked){this.reset();return}const me=this.options.gestureOrientation==="vertical"&&ne===0||this.options.gestureOrientation==="horizontal"&&ee===0;if(de||me)return;let ve=se.composedPath();ve=ve.slice(0,ve.indexOf(this.rootElement));const Ee=this.options.prevent;if(ve.find(De=>{var Ie,ze,Re;return De instanceof HTMLElement&&(typeof Ee=="function"&&(Ee==null?void 0:Ee(De))||((Ie=De.hasAttribute)==null?void 0:Ie.call(De,"data-lenis-prevent"))||ae&&((ze=De.hasAttribute)==null?void 0:ze.call(De,"data-lenis-prevent-touch"))||ue&&((Re=De.hasAttribute)==null?void 0:Re.call(De,"data-lenis-prevent-wheel"))||this.options.allowNestedScroll&&this.checkNestedScroll(De,{deltaX:ee,deltaY:ne}))}))return;if(this.isStopped||this.isLocked){se.cancelable&&se.preventDefault();return}if(!(this.options.syncTouch&&ae||this.options.smoothWheel&&ue)){this.isScrolling="native",this.animate.stop(),se.lenisStopPropagation=!0;return}let ye=ne;this.options.gestureOrientation==="both"?ye=Math.abs(ne)>Math.abs(ee)?ne:ee:this.options.gestureOrientation==="horizontal"&&(ye=ee),(!this.options.overscroll||this.options.infinite||this.options.wrapper!==window&&(this.animatedScroll>0&&this.animatedScroll<this.limit||this.animatedScroll===0&&ne>0||this.animatedScroll===this.limit&&ne<0))&&(se.lenisStopPropagation=!0),se.cancelable&&se.preventDefault();const Te=ae&&this.options.syncTouch,Ce=ae&&se.type==="touchend";Ce&&(ye=Math.sign(this.velocity)*Math.pow(Math.abs(this.velocity),this.options.touchInertiaExponent)),this.scrollTo(this.targetScroll+ye,{programmatic:!1,...Te?{lerp:Ce?this.options.syncTouchLerp:1}:{lerp:this.options.lerp,duration:this.options.duration,easing:this.options.easing}})});Jr(this,"onNativeScroll",()=>{if(this._resetVelocityTimeout!==null&&(clearTimeout(this._resetVelocityTimeout),this._resetVelocityTimeout=null),this._preventNextNativeScrollEvent){this._preventNextNativeScrollEvent=!1;return}if(this.isScrolling===!1||this.isScrolling==="native"){const te=this.animatedScroll;this.animatedScroll=this.targetScroll=this.actualScroll,this.lastVelocity=this.velocity,this.velocity=this.animatedScroll-te,this.direction=Math.sign(this.animatedScroll-te),this.isStopped||(this.isScrolling="native"),this.emit(),this.velocity!==0&&(this._resetVelocityTimeout=setTimeout(()=>{this.lastVelocity=this.velocity,this.velocity=0,this.isScrolling=!1,this.emit()},400))}});Jr(this,"raf",te=>{const ee=te-(this.time||te);this.time=te,this.animate.advance(ee*.001),this.options.autoRaf&&(this.__rafID=requestAnimationFrame(this.raf))});window.lenisVersion=version,(!te||te===document.documentElement)&&(te=window),typeof oe=="number"&&typeof me!="function"?me=defaultEasing:typeof me=="function"&&typeof oe!="number"&&(oe=1),this.options={wrapper:te,content:ee,eventsTarget:ne,smoothWheel:se,syncTouch:ae,syncTouchLerp:ue,touchInertiaExponent:de,duration:oe,easing:me,lerp:ve,infinite:Ee,gestureOrientation:ye,orientation:Pe,touchMultiplier:Te,wheelMultiplier:Ae,autoResize:Ce,prevent:De,virtualScroll:Ie,overscroll:ze,autoRaf:Re,anchors:Oe,autoToggle:qe,allowNestedScroll:Ze,__experimental__naiveDimensions:Ue},this.dimensions=new Dimensions(te,ee,{autoResize:Ce}),this.updateClassName(),this.targetScroll=this.animatedScroll=this.actualScroll,this.options.wrapper.addEventListener("scroll",this.onNativeScroll,!1),this.options.wrapper.addEventListener("scrollend",this.onScrollEnd,{capture:!0}),this.options.anchors&&this.options.wrapper===window&&this.options.wrapper.addEventListener("click",this.onClick,!1),this.options.wrapper.addEventListener("pointerdown",this.onPointerDown,!1),this.virtualScroll=new VirtualScroll(ne,{touchMultiplier:Te,wheelMultiplier:Ae}),this.virtualScroll.on("scroll",this.onVirtualScroll),this.options.autoToggle&&this.rootElement.addEventListener("transitionend",this.onTransitionEnd,{passive:!0}),this.options.autoRaf&&(this.__rafID=requestAnimationFrame(this.raf))}destroy(){this.emitter.destroy(),this.options.wrapper.removeEventListener("scroll",this.onNativeScroll,!1),this.options.wrapper.removeEventListener("scrollend",this.onScrollEnd,{capture:!0}),this.options.wrapper.removeEventListener("pointerdown",this.onPointerDown,!1),this.options.anchors&&this.options.wrapper===window&&this.options.wrapper.removeEventListener("click",this.onClick,!1),this.virtualScroll.destroy(),this.dimensions.destroy(),this.cleanUpClassName(),this.__rafID&&cancelAnimationFrame(this.__rafID)}on(te,ee){return this.emitter.on(te,ee)}off(te,ee){return this.emitter.off(te,ee)}setScroll(te){this.isHorizontal?this.options.wrapper.scrollTo({left:te,behavior:"instant"}):this.options.wrapper.scrollTo({top:te,behavior:"instant"})}resize(){this.dimensions.resize(),this.animatedScroll=this.targetScroll=this.actualScroll,this.emit()}emit(){this.emitter.emit("scroll",this)}reset(){this.isLocked=!1,this.isScrolling=!1,this.animatedScroll=this.targetScroll=this.actualScroll,this.lastVelocity=this.velocity=0,this.animate.stop()}start(){if(!!this.isStopped){if(this.options.autoToggle){this.rootElement.style.removeProperty("overflow");return}this.internalStart()}}internalStart(){!this.isStopped||(this.reset(),this.isStopped=!1,this.emit())}stop(){if(!this.isStopped){if(this.options.autoToggle){this.rootElement.style.setProperty("overflow","clip");return}this.internalStop()}}internalStop(){this.isStopped||(this.reset(),this.isStopped=!0,this.emit())}scrollTo(te,{offset:ee=0,immediate:ne=!1,lock:se=!1,duration:ae=this.options.duration,easing:ue=this.options.easing,lerp:de=this.options.lerp,onStart:oe,onComplete:me,force:ve=!1,programmatic:Ee=!0,userData:Pe}={}){if(!((this.isStopped||this.isLocked)&&!ve)){if(typeof te=="string"&&["top","left","start"].includes(te))te=0;else if(typeof te=="string"&&["bottom","right","end"].includes(te))te=this.limit;else{let ye;if(typeof te=="string"?ye=document.querySelector(te):te instanceof HTMLElement&&(te==null?void 0:te.nodeType)&&(ye=te),ye){if(this.options.wrapper!==window){const Ae=this.rootElement.getBoundingClientRect();ee-=this.isHorizontal?Ae.left:Ae.top}const Te=ye.getBoundingClientRect();te=(this.isHorizontal?Te.left:Te.top)+this.animatedScroll}}if(typeof te=="number"){if(te+=ee,te=Math.round(te),this.options.infinite){if(Ee){this.targetScroll=this.animatedScroll=this.scroll;const ye=te-this.animatedScroll;ye>this.limit/2?te=te-this.limit:ye<-this.limit/2&&(te=te+this.limit)}}else te=clamp(0,te,this.limit);if(te===this.targetScroll){oe==null||oe(this),me==null||me(this);return}if(this.userData=Pe!=null?Pe:{},ne){this.animatedScroll=this.targetScroll=te,this.setScroll(this.scroll),this.reset(),this.preventNextNativeScrollEvent(),this.emit(),me==null||me(this),this.userData={},requestAnimationFrame(()=>{this.dispatchScrollendEvent()});return}Ee||(this.targetScroll=te),typeof ae=="number"&&typeof ue!="function"?ue=defaultEasing:typeof ue=="function"&&typeof ae!="number"&&(ae=1),this.animate.fromTo(this.animatedScroll,te,{duration:ae,easing:ue,lerp:de,onStart:()=>{se&&(this.isLocked=!0),this.isScrolling="smooth",oe==null||oe(this)},onUpdate:(ye,Te)=>{this.isScrolling="smooth",this.lastVelocity=this.velocity,this.velocity=ye-this.animatedScroll,this.direction=Math.sign(this.velocity),this.animatedScroll=ye,this.setScroll(this.scroll),Ee&&(this.targetScroll=ye),Te||this.emit(),Te&&(this.reset(),this.emit(),me==null||me(this),this.userData={},requestAnimationFrame(()=>{this.dispatchScrollendEvent()}),this.preventNextNativeScrollEvent())}})}}}preventNextNativeScrollEvent(){this._preventNextNativeScrollEvent=!0,requestAnimationFrame(()=>{this._preventNextNativeScrollEvent=!1})}checkNestedScroll(te,{deltaX:ee,deltaY:ne}){var qe,Ze;const se=Date.now(),ae=(qe=te._lenis)!=null?qe:te._lenis={};let ue,de,oe,me,ve,Ee,Pe,ye;const Te=this.options.gestureOrientation;if(se-((Ze=ae.time)!=null?Ze:0)>2e3){ae.time=Date.now();const Ue=window.getComputedStyle(te);ae.computedStyle=Ue;const Ye=Ue.overflowX,ct=Ue.overflowY;if(ue=["auto","overlay","scroll"].includes(Ye),de=["auto","overlay","scroll"].includes(ct),ae.hasOverflowX=ue,ae.hasOverflowY=de,!ue&&!de||Te==="vertical"&&!de||Te==="horizontal"&&!ue)return!1;ve=te.scrollWidth,Ee=te.scrollHeight,Pe=te.clientWidth,ye=te.clientHeight,oe=ve>Pe,me=Ee>ye,ae.isScrollableX=oe,ae.isScrollableY=me,ae.scrollWidth=ve,ae.scrollHeight=Ee,ae.clientWidth=Pe,ae.clientHeight=ye}else oe=ae.isScrollableX,me=ae.isScrollableY,ue=ae.hasOverflowX,de=ae.hasOverflowY,ve=ae.scrollWidth,Ee=ae.scrollHeight,Pe=ae.clientWidth,ye=ae.clientHeight;if(!ue&&!de||!oe&&!me||Te==="vertical"&&(!de||!me)||Te==="horizontal"&&(!ue||!oe))return!1;let Ae;if(Te==="horizontal")Ae="x";else if(Te==="vertical")Ae="y";else{const Ue=ee!==0,Ye=ne!==0;Ue&&ue&&oe&&(Ae="x"),Ye&&de&&me&&(Ae="y")}if(!Ae)return!1;let Ce,De,Ie,ze,Re;if(Ae==="x")Ce=te.scrollLeft,De=ve-Pe,Ie=ee,ze=ue,Re=oe;else if(Ae==="y")Ce=te.scrollTop,De=Ee-ye,Ie=ne,ze=de,Re=me;else return!1;return(Ie>0?Ce<De:Ce>0)&&ze&&Re}get rootElement(){return this.options.wrapper===window?document.documentElement:this.options.wrapper}get limit(){return this.options.__experimental__naiveDimensions?this.isHorizontal?this.rootElement.scrollWidth-this.rootElement.clientWidth:this.rootElement.scrollHeight-this.rootElement.clientHeight:this.dimensions.limit[this.isHorizontal?"x":"y"]}get isHorizontal(){return this.options.orientation==="horizontal"}get actualScroll(){var ee,ne;const te=this.options.wrapper;return this.isHorizontal?(ee=te.scrollX)!=null?ee:te.scrollLeft:(ne=te.scrollY)!=null?ne:te.scrollTop}get scroll(){return this.options.infinite?modulo(this.animatedScroll,this.limit):this.animatedScroll}get progress(){return this.limit===0?1:this.scroll/this.limit}get isScrolling(){return this._isScrolling}set isScrolling(te){this._isScrolling!==te&&(this._isScrolling=te,this.updateClassName())}get isStopped(){return this._isStopped}set isStopped(te){this._isStopped!==te&&(this._isStopped=te,this.updateClassName())}get isLocked(){return this._isLocked}set isLocked(te){this._isLocked!==te&&(this._isLocked=te,this.updateClassName())}get isSmooth(){return this.isScrolling==="smooth"}get className(){let te="lenis";return this.options.autoToggle&&(te+=" lenis-autoToggle"),this.isStopped&&(te+=" lenis-stopped"),this.isLocked&&(te+=" lenis-locked"),this.isScrolling&&(te+=" lenis-scrolling"),this.isScrolling==="smooth"&&(te+=" lenis-smooth"),te}updateClassName(){this.cleanUpClassName(),this.rootElement.className=`${this.rootElement.className} ${this.className}`.trim()}cleanUpClassName(){this.rootElement.className=this.rootElement.className.replace(/lenis(-\w+)?/g,"").trim()}};gsapWithCSS.registerPlugin(ScrollTrigger);function initLenis(te=document){const ee=te.querySelector(".page-wrap")||document.querySelector(".page-wrap"),ne=te.querySelector(".content-wrap")||document.querySelector(".content-wrap");if(!ee||!ne)return null;const se=new Lenis({wrapper:ee,content:ne,lerp:.125,smoothWheel:!0,smoothTouch:!0,syncTouch:!0,wheelEventsTarget:ee});window.lenis=se,window.__lenisWrapper=ee,se.on("scroll",ScrollTrigger.update);let ae=null;const ue=de=>{try{se.raf(de)}catch{}ae=requestAnimationFrame(ue)};ae=requestAnimationFrame(ue),window.__lenisRaf=ue,window.__lenisRafId=ae,ScrollTrigger.scrollerProxy(ee,{scrollTop(de){if(arguments.length)try{se.scrollTo(de,{immediate:!0})}catch{ee.scrollTop=de}try{return typeof se.scroll=="number"?se.scroll:ee.scrollTop}catch{return ee.scrollTop}},getBoundingClientRect(){return{top:0,left:0,width:window.innerWidth,height:window.innerHeight}},pinType:"transform"}),ScrollTrigger.defaults({scroller:ee});try{ee.scrollTop=0,window.scrollTo(0,0),document.documentElement.scrollTop=0,document.body.scrollTop=0}catch{}try{typeof se.scrollTo=="function"&&se.scrollTo(0,{immediate:!0})}catch{}return requestAnimationFrame(()=>{try{typeof se.scrollTo=="function"&&se.scrollTo(0,{immediate:!0})}catch{}try{ScrollTrigger.refresh()}catch{}}),se}function destroyLenis(){try{window.__lenisRafId&&(cancelAnimationFrame(window.__lenisRafId),window.__lenisRafId=null)}catch{}try{window.lenis&&typeof window.lenis.destroy=="function"&&window.lenis.destroy()}catch{}try{window.lenis=null,window.__lenisRaf=null}catch{}}const debounce=(te,ee=150)=>{let ne;return(...se)=>{clearTimeout(ne),ne=setTimeout(()=>te.apply(null,se),ee)}};let __svcResizeBound=!1,__svcResizeHandler=null;if(!gsapWithCSS.parseEase("machinesStep"))try{CustomEase.create("machinesStep","M0,0 C0.6,0 0,1 1,1")}catch{}function initServiceCards(te=document){const ee=te&&te.querySelector?te:document,ne=ee.querySelectorAll(".service-card"),se=()=>{try{return typeof window!="undefined"&&typeof window.matchMedia=="function"&&window.matchMedia("(max-width: 991px)").matches}catch{return!1}},ae=ve=>{var Te;const Ee=ve.querySelector(".desc"),Pe=ve.querySelector(".card-inner")||Ee;if(!Ee||!Pe)return;const ye=se();try{if(ye){Pe.style.transition="",Pe.style.transform="",Pe.style.willChange="";const Ce=Pe.querySelector(".body-l");Ce&&(Ce.style.transition="",Ce.style.transform="");const De=Ee.querySelector(".body-s");if(De)try{De.__splitLines&&typeof De.__splitLines.revert=="function"&&(De.__splitLines.revert(),De.__splitLines=null,De.__lines=null,De.__lineInners=null)}catch{}}else{const Ce=Pe.querySelector(".body-l");if(Ce){const Ie=Pe.getBoundingClientRect(),Re=Ce.getBoundingClientRect().bottom-Ie.bottom,Oe=Math.max(0,Math.round(-Re));Ce.__svcBottomOffsetPx=Oe,Ce.style.transition="transform 0.8s cubic-bezier(0.5, 0, 0, 1)",Ce.style.transform=`translateY(${Oe}px)`}const De=Ee.querySelector(".body-s");if(De)try{De.__splitLines&&typeof De.__splitLines.revert=="function"&&(De.__splitLines.revert(),De.__splitLines=null,De.__lines=null);const Ie=new SplitType(De,{types:"lines",tagName:"span"});De.__splitLines=Ie,De.__lines=Ie.lines||[];const ze=[];De.__lines.forEach(Re=>{if(Re.style.display="block",Re.style.overflow="hidden",!Re.__inner){const Oe=document.createElement("span");for(Oe.className="line-inner",Oe.style.display="inline-block";Re.firstChild;)Oe.appendChild(Re.firstChild);Re.appendChild(Oe),Re.__inner=Oe}ze.push(Re.__inner)}),ze.forEach(Re=>{Re.style.transform="translateY(100%)",Re.style.willChange="transform",Re.style.transition="transform 0.8s cubic-bezier(0.5, 0, 0, 1)"}),De.__lineInners=ze}catch{}}const Ae=(Te=ve.style.transition)==null?void 0:Te.trim();ve.style.transition=Ae?`${Ae}, background-color 0.8s cubic-bezier(0.5, 0, 0, 1)`:"background-color 0.8s cubic-bezier(0.5, 0, 0, 1)",ve.style.backgroundColor||(ve.style.backgroundColor="var(--white)")}catch{}};ne.forEach(ve=>{var Te;if(ve.__serviceCardsBound)return;const Ee=ve.querySelector(".desc"),Pe=ve.querySelector(".card-inner")||Ee;if(!Ee||!Pe)return;let ye=!1;try{ye=typeof window!="undefined"&&typeof window.matchMedia=="function"&&window.matchMedia("(max-width: 991px)").matches}catch{ye=!1}try{if(ye){Pe.style.transition="",Pe.style.transform="",Pe.style.willChange="";const Ce=Pe.querySelector(".body-l");Ce&&(Ce.style.transition="",Ce.style.transform=""),Array.from(Ee.querySelectorAll(".body-s")).forEach(Ie=>{try{Ie.__splitLines&&typeof Ie.__splitLines.revert=="function"&&(Ie.__splitLines.revert(),Ie.__splitLines=null,Ie.__lines=null,Ie.__lineInners=null)}catch{}})}else{const Ce=Pe.querySelector(".body-l");if(Ce){Ce.style.transform="";const Ie=Pe.getBoundingClientRect(),Re=Ce.getBoundingClientRect().bottom-Ie.bottom,Oe=Math.max(0,Math.round(-Re));Ce.__svcBottomOffsetPx=Oe;const qe=Ce.style.transition;Ce.style.transition="none",Ce.style.transform=`translateY(${Oe}px)`,Ce.offsetWidth,Ce.style.transition=qe||"transform 0.8s cubic-bezier(0.5, 0, 0, 1)"}Array.from(Ee.querySelectorAll(".body-s")).forEach(Ie=>{try{Ie.__splitLines&&typeof Ie.__splitLines.revert=="function"&&(Ie.__splitLines.revert(),Ie.__splitLines=null,Ie.__lines=null);const ze=new SplitType(Ie,{types:"lines",tagName:"span"});Ie.__splitLines=ze,Ie.__lines=ze.lines||[];const Re=[];Ie.__lines.forEach(Oe=>{if(Oe.style.display="block",Oe.style.overflow="hidden",!Oe.__inner){const qe=document.createElement("span");for(qe.className="line-inner",qe.style.display="inline-block";Oe.firstChild;)qe.appendChild(Oe.firstChild);Oe.appendChild(qe),Oe.__inner=qe}Re.push(Oe.__inner)}),Re.forEach(Oe=>{Oe.style.transform="translateY(100%)",Oe.style.willChange="transform",Oe.style.transition="transform 0.8s cubic-bezier(0.5, 0, 0, 1)"}),Ie.__lineInners=Re}catch{}})}const Ae=(Te=ve.style.transition)==null?void 0:Te.trim();ve.style.transition=Ae?`${Ae}, background-color 0.8s cubic-bezier(0.5, 0, 0, 1)`:"background-color 0.8s cubic-bezier(0.5, 0, 0, 1)",ve.style.backgroundColor||(ve.style.backgroundColor="var(--white)")}catch{}if(!ye){const Ae=Ee.querySelector(".body-s"),Ce=Pe.querySelector(".body-l"),De=.03,Ie=Re=>{!Ae||!Ae.__lineInners||Ae.__lineInners.forEach((Oe,qe)=>{Oe.style.transitionDelay=`${qe*De}s`,Oe.style.transform=`translateY(${Re})`})},ze=Re=>{!Ce||(Ce.style.transition="transform 0.8s cubic-bezier(0.5, 0, 0, 1)",Ce.style.transform=`translateY(${Re}px)`)};ve.addEventListener("mouseenter",()=>{se()||(ze(0),Ie("0%"),ve.style.backgroundColor="var(--accent)")}),ve.addEventListener("mouseleave",()=>{if(se())return;let Re=0;Ce&&typeof Ce.__svcBottomOffsetPx=="number"&&(Re=Ce.__svcBottomOffsetPx),ze(Re),Ie("100%"),ve.style.backgroundColor="var(--white)"}),ve.addEventListener("pointerenter",()=>{se()||(ze(0),Ie("0%"),ve.style.backgroundColor="var(--accent)")}),ve.addEventListener("pointerleave",()=>{if(se())return;let Re=0;Ce&&typeof Ce.__svcBottomOffsetPx=="number"&&(Re=Ce.__svcBottomOffsetPx),ze(Re),Ie("100%"),ve.style.backgroundColor="var(--white)"})}ve.__serviceCardsBound=!0}),ee.querySelectorAll(".machine-card").forEach(ve=>{if(ve.__machineCardsBound)return;const Ee=ve.querySelector(".machine-card_inner");if(!Ee)return;const Pe=Ee.querySelector("p, .body-s, .body-m, .body-l")||Ee;try{if(!Pe.__splitLines){const Ie=new SplitType(Pe,{types:"lines",tagName:"span"});Pe.__splitLines=Ie,Pe.__lines=Ie.lines||[]}const Ce=Pe.__lines||[],De=[];Ce.forEach(Ie=>{if(Ie.style.display="block",Ie.style.overflow="hidden",!Ie.__inner){const ze=document.createElement("span");for(ze.className="line-inner",ze.style.display="inline-block";Ie.firstChild;)ze.appendChild(Ie.firstChild);Ie.appendChild(ze),Ie.__inner=ze}De.push(Ie.__inner)}),De.forEach(Ie=>{Ie.style.transform="translateY(100%)",Ie.style.willChange="transform",Ie.style.transition="transform 0.4s ease"}),Ee.__lineInners=De}catch{}const ye=.03,Te=()=>{(Ee.__lineInners||[]).forEach((De,Ie)=>{De.style.transitionDelay=`${Ie*ye}s`,De.style.transform="translateY(0)"})},Ae=()=>{(Ee.__lineInners||[]).slice().reverse().forEach((De,Ie)=>{De.style.transitionDelay=`${Ie*ye}s`,De.style.transform="translateY(100%)"})};ve.addEventListener("mouseenter",()=>{se()||Te()}),ve.addEventListener("mouseleave",()=>{se()||Ae()}),ve.addEventListener("pointerenter",()=>{se()||Te()}),ve.addEventListener("pointerleave",()=>{se()||Ae()}),ve.__machineCardsBound=!0}),serviceCardsHover(ee),__svcResizeBound||(__svcResizeHandler=debounce(()=>{try{const ve=ee.querySelectorAll(".service-card");ve.forEach(Pe=>ae(Pe)),ve.forEach(Pe=>{const ye=Pe.querySelector(".desc"),Te=Pe.querySelector(".card-inner")||ye;if(!ye||!Te)return;if(se()){const De=Te.querySelector(".body-l");De&&(De.style.transition="",De.style.transform=""),Array.from(ye.querySelectorAll(".body-s")).forEach(ze=>{try{ze.__splitLines&&typeof ze.__splitLines.revert=="function"&&(ze.__splitLines.revert(),ze.__splitLines=null,ze.__lines=null,ze.__lineInners=null)}catch{}});return}const Ae=Te.querySelector(".body-l");if(Ae){Ae.style.transform="";const De=Te.getBoundingClientRect(),ze=Ae.getBoundingClientRect().bottom-De.bottom,Re=Math.max(0,Math.round(-ze));Ae.__svcBottomOffsetPx=Re,Ae.style.transition="none",Ae.style.transform=`translateY(${Re}px)`,Ae.offsetWidth,Ae.style.transition="transform 0.5s ease"}Array.from(ye.querySelectorAll(".body-s")).forEach(De=>{try{De.__splitLines&&typeof De.__splitLines.revert=="function"&&(De.__splitLines.revert(),De.__splitLines=null,De.__lines=null);const Ie=new SplitType(De,{types:"lines",tagName:"span"});De.__splitLines=Ie,De.__lines=Ie.lines||[];const ze=[];De.__lines.forEach(Re=>{if(Re.style.display="block",Re.style.overflow="hidden",!Re.__inner){const Oe=document.createElement("span");for(Oe.className="line-inner",Oe.style.display="inline-block";Re.firstChild;)Oe.appendChild(Re.firstChild);Re.appendChild(Oe),Re.__inner=Oe}ze.push(Re.__inner)}),ze.forEach(Re=>{Re.style.transform="translateY(100%)",Re.style.willChange="transform",Re.style.transition="transform 0.4s ease"}),De.__lineInners=ze}catch{}})}),ee.querySelectorAll(".machine-card").forEach(Pe=>{const ye=Pe.querySelector(".machine-card_inner");if(!ye)return;const Te=ye.querySelector("p, .body-s, .body-m, .body-l")||ye;try{Te.__splitLines&&typeof Te.__splitLines.revert=="function"&&(Te.__splitLines.revert(),Te.__splitLines=null,Te.__lines=null);const Ae=new SplitType(Te,{types:"lines",tagName:"span"});Te.__splitLines=Ae,Te.__lines=Ae.lines||[];const Ce=[];Te.__lines.forEach(De=>{if(De.style.display="block",De.style.overflow="hidden",!De.__inner){const Ie=document.createElement("span");for(Ie.className="line-inner",Ie.style.display="inline-block";De.firstChild;)Ie.appendChild(De.firstChild);De.appendChild(Ie),De.__inner=Ie}Ce.push(De.__inner)}),Ce.forEach(De=>{De.style.transform="translateY(100%)",De.style.willChange="transform",De.style.transition="transform 0.4s ease"}),ye.__lineInners=Ce}catch{}}),serviceCardsHover(ee)}catch{}},150),window.addEventListener("resize",__svcResizeHandler),__svcResizeBound=!0);const oe=()=>{try{return typeof window!="undefined"&&typeof window.matchMedia=="function"&&window.matchMedia("(max-width: 991px)").matches}catch{return!1}};ee.querySelectorAll(".machine-card").forEach(ve=>{if(ve.__machineMobileBound)return;const Ee=ve.querySelector(".machine-bottom-wrap"),Pe=Ee&&Ee.querySelector(".machines_label");if(!Ee||!Pe){ve.__machineMobileBound=!0;return}const ye=()=>{try{const Ie=Pe.getBoundingClientRect();return Math.max(0,Math.round(Ie.height))||24}catch{return 24}},Te=Ie=>{try{const ze=Ee.querySelector(".machine_button-wrap"),Re=ze?ze.querySelectorAll(".machine_button, .machines_button"):[];Re&&Re.length&&gsapWithCSS.to(Re,{yPercent:Ie?-100:0,duration:1.2,ease:gsapWithCSS.parseEase("machinesStep")||(qe=>qe)});const Oe=ze?ze.querySelector(".machines_button.is-close > .is-plus"):null;Oe&&gsapWithCSS.to(Oe,{rotate:Ie?135:0,duration:1.2,ease:gsapWithCSS.parseEase("machinesStep")||(qe=>qe)})}catch{}},Ae=()=>{if(!oe()){Ee.style.transition="",Ee.style.height="",Ee.style.willChange="",ve.classList.remove("is-open"),Te(!1);return}Ee.style.overflow="hidden",ve.classList.contains("is-open")?(Ee.style.height="auto",Te(!0)):(Ee.style.height=ye()+"px",Te(!1))},Ce=()=>{if(!oe())return;if(ve.classList.contains("is-open")){const ze=ye();Ee.style.height==="auto"&&(Ee.style.height=Ee.scrollHeight+"px"),ve.classList.remove("is-open"),gsapWithCSS.to(Ee,{height:ze,duration:1.2,ease:gsapWithCSS.parseEase("machinesStep")||(Oe=>Oe)}),Te(!1)}else{const ze=ye(),Re=Ee.scrollHeight;Ee.style.height==="auto"&&(Ee.style.height=Ee.scrollHeight+"px"),Ee.style.height=ze+"px",ve.classList.add("is-open"),gsapWithCSS.to(Ee,{height:Re,duration:1.2,ease:gsapWithCSS.parseEase("machinesStep")||(Oe=>Oe),onComplete:()=>{Ee.style.height="auto"}}),Te(!0)}};ve.__machineMobileClickBound||(ve.addEventListener("click",Ce),ve.__machineMobileClickBound=!0);const De=()=>Ae();ve.__machineMobileResizeBound||(window.addEventListener("resize",De),ve.__machineMobileResizeBound=!0),Ae(),ve.__machineMobileBound=!0})}function serviceCardsHover(te=document){const ee=te&&te.querySelector?te:document,ne=ee.querySelector(".service-viewer, .services-viewer");if(!ne)return;const se=()=>{try{return typeof window!="undefined"&&typeof window.matchMedia=="function"&&window.matchMedia("(max-width: 991px)").matches}catch{return!1}},ae=Array.from(ne.querySelectorAll(".service-image")),ue="cubic-bezier(0.5, 0, 0, 1)",de=ne.querySelector(".button");if(ae.forEach(Pe=>{Pe.style.transition=`opacity 0.8s ${ue}`,Pe.style.position,Pe.style.opacity="0",Pe.style.zIndex="0",Pe.style.display="none",Pe.__svcOpacityBound||(Pe.addEventListener("transitionend",ye=>{if(ye.propertyName!=="opacity")return;const Te=window.getComputedStyle(Pe);parseFloat(Te.opacity||"0")===0&&(Pe.style.display="none",Pe.style.zIndex="0")}),Pe.__svcOpacityBound=!0)}),de&&(de.style.transition=`opacity 0.8s ${ue}`,de.style.opacity="1",de.style.display="block"),!!(ne.closest&&ne.closest(".section_services.is-2"))){const Pe=ne.querySelector(".service-image.is-4");if(Pe&&(Pe.style.display="block",Pe.style.opacity="1",Pe.style.zIndex="2"),!ne.__svcViewerNoHoverResizeBound){const ye=debounce(()=>{ae.forEach(Te=>{Te.style.transition=`opacity 0.8s ${ue}`,Pe&&Te===Pe?(Te.style.display="block",Te.style.opacity="1",Te.style.zIndex="2"):(Te.style.opacity="0",Te.style.zIndex="0",Te.style.display="none")}),de&&(de.style.display="block",de.style.opacity="1")},150);window.addEventListener("resize",ye),ne.__svcViewerNoHoverResizeBound=!0}ne.__serviceViewerBound=!0;return}if(se()){if(!ne.__svcViewerResizeBound){const Pe=debounce(()=>{ae.forEach(ye=>{ye.style.transition=`opacity 0.8s ${ue}`,ye.style.opacity="0",ye.style.zIndex="0",ye.style.display="none"}),de&&(de.style.display="block",de.style.opacity="1")},150);window.addEventListener("resize",Pe),ne.__svcViewerResizeBound=!0}ne.__serviceViewerBound=!0;return}const me=Array.from(ee.querySelectorAll(".service-card")),ve=Pe=>{if(!se()&&(ae.forEach((ye,Te)=>{Te===Pe?(ye.style.display="block",ye.offsetWidth,ye.style.transition=`opacity 0.5s ${ue}`,ye.style.opacity="1",ye.style.zIndex="2"):(ye.style.transition=`opacity 0.5s ${ue}`,ye.style.opacity="0",ye.style.zIndex="0")}),de)){if(de.__onOpacityEnd){try{de.removeEventListener("transitionend",de.__onOpacityEnd)}catch{}de.__onOpacityEnd=null}de.style.transition=`opacity 0.5s ${ue}`,de.style.opacity="0";const ye=Te=>{if(Te.propertyName!=="opacity")return;const Ae=window.getComputedStyle(de);parseFloat(Ae.opacity||"0")===0&&(de.style.display="none"),de.removeEventListener("transitionend",ye),de.__onOpacityEnd=null};de.addEventListener("transitionend",ye),de.__onOpacityEnd=ye}},Ee=Pe=>{if(se())return;const ye=ae[Pe];!ye||(ye.style.transition=`opacity 0.5s ${ue}`,ye.style.opacity="0",ye.style.zIndex="0")};me.forEach((Pe,ye)=>{const Te=ne.querySelector(`.service-image.is-${ye+1}`);if(!Te)return;const Ae=ae.indexOf(Te);Ae!==-1&&(Pe.__serviceViewerHoverBound||(Pe.addEventListener("mouseenter",()=>{se()||(ve(Ae),de&&(de.style.opacity="0"))}),Pe.addEventListener("mouseleave",()=>{if(!se()&&(Ee(Ae),de&&!ee.querySelector(".service-card:hover"))){if(de.__onOpacityEnd){try{de.removeEventListener("transitionend",de.__onOpacityEnd)}catch{}de.__onOpacityEnd=null}de.style.display="block",de.offsetWidth,de.style.opacity="1"}}),Pe.addEventListener("pointerenter",()=>{se()||(ve(Ae),de&&(de.style.opacity="0"))}),Pe.addEventListener("pointerleave",()=>{if(!se()&&(Ee(Ae),de&&!ee.querySelector(".service-card:hover"))){if(de.__onOpacityEnd){try{de.removeEventListener("transitionend",de.__onOpacityEnd)}catch{}de.__onOpacityEnd=null}de.style.display="block",de.offsetWidth,de.style.opacity="1"}}),Pe.addEventListener("focus",()=>{se()||(ve(Ae),de&&(de.style.opacity="0"))}),Pe.addEventListener("blur",()=>{if(!se()&&(Ee(Ae),de&&!ee.querySelector(".service-card:hover"))){if(de.__onOpacityEnd){try{de.removeEventListener("transitionend",de.__onOpacityEnd)}catch{}de.__onOpacityEnd=null}de.style.display="block",de.offsetWidth,de.style.opacity="1"}}),Pe.__serviceViewerHoverBound=!0))}),ne.__serviceViewerBound=!0}var lottie={exports:{}};(function(module,exports){typeof document!="undefined"&&typeof navigator!="undefined"&&function(te,ee){module.exports=ee()}(commonjsGlobal,function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(ee){_useWebWorker=!!ee},getWebWorker=function(){return _useWebWorker},setLocationHref=function(ee){locationHref=ee},getLocationHref=function(){return locationHref};function createTag(te){return document.createElement(te)}function extendPrototype(te,ee){var ne,se=te.length,ae;for(ne=0;ne<se;ne+=1){ae=te[ne].prototype;for(var ue in ae)Object.prototype.hasOwnProperty.call(ae,ue)&&(ee.prototype[ue]=ae[ue])}}function getDescriptor(te,ee){return Object.getOwnPropertyDescriptor(te,ee)}function createProxyFunction(te){function ee(){}return ee.prototype=te,ee}var audioControllerFactory=function(){function te(ee){this.audios=[],this.audioFactory=ee,this._volume=1,this._isMuted=!1}return te.prototype={addAudio:function(ne){this.audios.push(ne)},pause:function(){var ne,se=this.audios.length;for(ne=0;ne<se;ne+=1)this.audios[ne].pause()},resume:function(){var ne,se=this.audios.length;for(ne=0;ne<se;ne+=1)this.audios[ne].resume()},setRate:function(ne){var se,ae=this.audios.length;for(se=0;se<ae;se+=1)this.audios[se].setRate(ne)},createAudio:function(ne){return this.audioFactory?this.audioFactory(ne):window.Howl?new window.Howl({src:[ne]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(ne){this.audioFactory=ne},setVolume:function(ne){this._volume=ne,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var ne,se=this.audios.length;for(ne=0;ne<se;ne+=1)this.audios[ne].volume(this._volume*(this._isMuted?0:1))}},function(){return new te}}(),createTypedArray=function(){function te(ne,se){var ae=0,ue=[],de;switch(ne){case"int16":case"uint8c":de=1;break;default:de=1.1;break}for(ae=0;ae<se;ae+=1)ue.push(de);return ue}function ee(ne,se){return ne==="float32"?new Float32Array(se):ne==="int16"?new Int16Array(se):ne==="uint8c"?new Uint8ClampedArray(se):te(ne,se)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?ee:te}();function createSizedArray(te){return Array.apply(null,{length:te})}function _typeof$6(te){return _typeof$6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ee){return typeof ee}:function(ee){return ee&&typeof Symbol=="function"&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee},_typeof$6(te)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var te=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],ee,ne=te.length;for(ee=0;ee<ne;ee+=1)BMMath[te[ee]]=Math[te[ee]]})(),BMMath.random=Math.random,BMMath.abs=function(te){var ee=_typeof$6(te);if(ee==="object"&&te.length){var ne=createSizedArray(te.length),se,ae=te.length;for(se=0;se<ae;se+=1)ne[se]=Math.abs(te[se]);return ne}return Math.abs(te)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(te){te.style.position="absolute",te.style.top=0,te.style.left=0,te.style.display="block",te.style.transformOrigin="0 0",te.style.webkitTransformOrigin="0 0",te.style.backfaceVisibility="visible",te.style.webkitBackfaceVisibility="visible",te.style.transformStyle="preserve-3d",te.style.webkitTransformStyle="preserve-3d",te.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(te,ee,ne,se){this.type=te,this.currentTime=ee,this.totalTime=ne,this.direction=se<0?-1:1}function BMCompleteEvent(te,ee){this.type=te,this.direction=ee<0?-1:1}function BMCompleteLoopEvent(te,ee,ne,se){this.type=te,this.currentLoop=ne,this.totalLoops=ee,this.direction=se<0?-1:1}function BMSegmentStartEvent(te,ee,ne){this.type=te,this.firstFrame=ee,this.totalFrames=ne}function BMDestroyEvent(te,ee){this.type=te,this.target=ee}function BMRenderFrameErrorEvent(te,ee){this.type="renderFrameError",this.nativeError=te,this.currentTime=ee}function BMConfigErrorEvent(te){this.type="configError",this.nativeError=te}var createElementID=function(){var te=0;return function(){return te+=1,idPrefix$1+"__lottie_element_"+te}}();function HSVtoRGB(te,ee,ne){var se,ae,ue,de,oe,me,ve,Ee;switch(de=Math.floor(te*6),oe=te*6-de,me=ne*(1-ee),ve=ne*(1-oe*ee),Ee=ne*(1-(1-oe)*ee),de%6){case 0:se=ne,ae=Ee,ue=me;break;case 1:se=ve,ae=ne,ue=me;break;case 2:se=me,ae=ne,ue=Ee;break;case 3:se=me,ae=ve,ue=ne;break;case 4:se=Ee,ae=me,ue=ne;break;case 5:se=ne,ae=me,ue=ve;break}return[se,ae,ue]}function RGBtoHSV(te,ee,ne){var se=Math.max(te,ee,ne),ae=Math.min(te,ee,ne),ue=se-ae,de,oe=se===0?0:ue/se,me=se/255;switch(se){case ae:de=0;break;case te:de=ee-ne+ue*(ee<ne?6:0),de/=6*ue;break;case ee:de=ne-te+ue*2,de/=6*ue;break;case ne:de=te-ee+ue*4,de/=6*ue;break}return[de,oe,me]}function addSaturationToRGB(te,ee){var ne=RGBtoHSV(te[0]*255,te[1]*255,te[2]*255);return ne[1]+=ee,ne[1]>1?ne[1]=1:ne[1]<=0&&(ne[1]=0),HSVtoRGB(ne[0],ne[1],ne[2])}function addBrightnessToRGB(te,ee){var ne=RGBtoHSV(te[0]*255,te[1]*255,te[2]*255);return ne[2]+=ee,ne[2]>1?ne[2]=1:ne[2]<0&&(ne[2]=0),HSVtoRGB(ne[0],ne[1],ne[2])}function addHueToRGB(te,ee){var ne=RGBtoHSV(te[0]*255,te[1]*255,te[2]*255);return ne[0]+=ee/360,ne[0]>1?ne[0]-=1:ne[0]<0&&(ne[0]+=1),HSVtoRGB(ne[0],ne[1],ne[2])}var rgbToHex=function(){var te=[],ee,ne;for(ee=0;ee<256;ee+=1)ne=ee.toString(16),te[ee]=ne.length===1?"0"+ne:ne;return function(se,ae,ue){return se<0&&(se=0),ae<0&&(ae=0),ue<0&&(ue=0),"#"+te[se]+te[ae]+te[ue]}}(),setSubframeEnabled=function(ee){subframeEnabled=!!ee},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(ee){expressionsPlugin=ee},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(ee){expressionsInterfaces=ee},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(ee){defaultCurveSegments=ee},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(ee){idPrefix$1=ee};function createNS(te){return document.createElementNS(svgNS,te)}function _typeof$5(te){return _typeof$5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ee){return typeof ee}:function(ee){return ee&&typeof Symbol=="function"&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee},_typeof$5(te)}var dataManager=function(){var te=1,ee=[],ne,se,ae={onmessage:function(){},postMessage:function(Te){ne({data:Te})}},ue={postMessage:function(Te){ae.onmessage({data:Te})}};function de(ye){if(window.Worker&&window.Blob&&getWebWorker()){var Te=new Blob(["var _workerSelf = self; self.onmessage = ",ye.toString()],{type:"text/javascript"}),Ae=URL.createObjectURL(Te);return new Worker(Ae)}return ne=ye,ae}function oe(){se||(se=de(function(Te){function Ae(){function De(_t,Qe){var it,Ge,je=_t.length,Ke,lt,Bt,Xt;for(Ge=0;Ge<je;Ge+=1)if(it=_t[Ge],"ks"in it&&!it.completed){if(it.completed=!0,it.hasMask){var Gt=it.masksProperties;for(lt=Gt.length,Ke=0;Ke<lt;Ke+=1)if(Gt[Ke].pt.k.i)qe(Gt[Ke].pt.k);else for(Xt=Gt[Ke].pt.k.length,Bt=0;Bt<Xt;Bt+=1)Gt[Ke].pt.k[Bt].s&&qe(Gt[Ke].pt.k[Bt].s[0]),Gt[Ke].pt.k[Bt].e&&qe(Gt[Ke].pt.k[Bt].e[0])}it.ty===0?(it.layers=Re(it.refId,Qe),De(it.layers,Qe)):it.ty===4?Oe(it.shapes):it.ty===5&&Mt(it)}}function Ie(_t,Qe){if(_t){var it=0,Ge=_t.length;for(it=0;it<Ge;it+=1)_t[it].t===1&&(_t[it].data.layers=Re(_t[it].data.refId,Qe),De(_t[it].data.layers,Qe))}}function ze(_t,Qe){for(var it=0,Ge=Qe.length;it<Ge;){if(Qe[it].id===_t)return Qe[it];it+=1}return null}function Re(_t,Qe){var it=ze(_t,Qe);return it?it.layers.__used?JSON.parse(JSON.stringify(it.layers)):(it.layers.__used=!0,it.layers):null}function Oe(_t){var Qe,it=_t.length,Ge,je;for(Qe=it-1;Qe>=0;Qe-=1)if(_t[Qe].ty==="sh")if(_t[Qe].ks.k.i)qe(_t[Qe].ks.k);else for(je=_t[Qe].ks.k.length,Ge=0;Ge<je;Ge+=1)_t[Qe].ks.k[Ge].s&&qe(_t[Qe].ks.k[Ge].s[0]),_t[Qe].ks.k[Ge].e&&qe(_t[Qe].ks.k[Ge].e[0]);else _t[Qe].ty==="gr"&&Oe(_t[Qe].it)}function qe(_t){var Qe,it=_t.i.length;for(Qe=0;Qe<it;Qe+=1)_t.i[Qe][0]+=_t.v[Qe][0],_t.i[Qe][1]+=_t.v[Qe][1],_t.o[Qe][0]+=_t.v[Qe][0],_t.o[Qe][1]+=_t.v[Qe][1]}function Ze(_t,Qe){var it=Qe?Qe.split("."):[100,100,100];return _t[0]>it[0]?!0:it[0]>_t[0]?!1:_t[1]>it[1]?!0:it[1]>_t[1]?!1:_t[2]>it[2]?!0:it[2]>_t[2]?!1:null}var Ue=function(){var _t=[4,4,14];function Qe(Ge){var je=Ge.t.d;Ge.t.d={k:[{s:je,t:0}]}}function it(Ge){var je,Ke=Ge.length;for(je=0;je<Ke;je+=1)Ge[je].ty===5&&Qe(Ge[je])}return function(Ge){if(Ze(_t,Ge.v)&&(it(Ge.layers),Ge.assets)){var je,Ke=Ge.assets.length;for(je=0;je<Ke;je+=1)Ge.assets[je].layers&&it(Ge.assets[je].layers)}}}(),Ye=function(){var _t=[4,7,99];return function(Qe){if(Qe.chars&&!Ze(_t,Qe.v)){var it,Ge=Qe.chars.length;for(it=0;it<Ge;it+=1){var je=Qe.chars[it];je.data&&je.data.shapes&&(Oe(je.data.shapes),je.data.ip=0,je.data.op=99999,je.data.st=0,je.data.sr=1,je.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},Qe.chars[it].t||(je.data.shapes.push({ty:"no"}),je.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),ct=function(){var _t=[5,7,15];function Qe(Ge){var je=Ge.t.p;typeof je.a=="number"&&(je.a={a:0,k:je.a}),typeof je.p=="number"&&(je.p={a:0,k:je.p}),typeof je.r=="number"&&(je.r={a:0,k:je.r})}function it(Ge){var je,Ke=Ge.length;for(je=0;je<Ke;je+=1)Ge[je].ty===5&&Qe(Ge[je])}return function(Ge){if(Ze(_t,Ge.v)&&(it(Ge.layers),Ge.assets)){var je,Ke=Ge.assets.length;for(je=0;je<Ke;je+=1)Ge.assets[je].layers&&it(Ge.assets[je].layers)}}}(),at=function(){var _t=[4,1,9];function Qe(Ge){var je,Ke=Ge.length,lt,Bt;for(je=0;je<Ke;je+=1)if(Ge[je].ty==="gr")Qe(Ge[je].it);else if(Ge[je].ty==="fl"||Ge[je].ty==="st")if(Ge[je].c.k&&Ge[je].c.k[0].i)for(Bt=Ge[je].c.k.length,lt=0;lt<Bt;lt+=1)Ge[je].c.k[lt].s&&(Ge[je].c.k[lt].s[0]/=255,Ge[je].c.k[lt].s[1]/=255,Ge[je].c.k[lt].s[2]/=255,Ge[je].c.k[lt].s[3]/=255),Ge[je].c.k[lt].e&&(Ge[je].c.k[lt].e[0]/=255,Ge[je].c.k[lt].e[1]/=255,Ge[je].c.k[lt].e[2]/=255,Ge[je].c.k[lt].e[3]/=255);else Ge[je].c.k[0]/=255,Ge[je].c.k[1]/=255,Ge[je].c.k[2]/=255,Ge[je].c.k[3]/=255}function it(Ge){var je,Ke=Ge.length;for(je=0;je<Ke;je+=1)Ge[je].ty===4&&Qe(Ge[je].shapes)}return function(Ge){if(Ze(_t,Ge.v)&&(it(Ge.layers),Ge.assets)){var je,Ke=Ge.assets.length;for(je=0;je<Ke;je+=1)Ge.assets[je].layers&&it(Ge.assets[je].layers)}}}(),ft=function(){var _t=[4,4,18];function Qe(Ge){var je,Ke=Ge.length,lt,Bt;for(je=Ke-1;je>=0;je-=1)if(Ge[je].ty==="sh")if(Ge[je].ks.k.i)Ge[je].ks.k.c=Ge[je].closed;else for(Bt=Ge[je].ks.k.length,lt=0;lt<Bt;lt+=1)Ge[je].ks.k[lt].s&&(Ge[je].ks.k[lt].s[0].c=Ge[je].closed),Ge[je].ks.k[lt].e&&(Ge[je].ks.k[lt].e[0].c=Ge[je].closed);else Ge[je].ty==="gr"&&Qe(Ge[je].it)}function it(Ge){var je,Ke,lt=Ge.length,Bt,Xt,Gt,lr;for(Ke=0;Ke<lt;Ke+=1){if(je=Ge[Ke],je.hasMask){var yr=je.masksProperties;for(Xt=yr.length,Bt=0;Bt<Xt;Bt+=1)if(yr[Bt].pt.k.i)yr[Bt].pt.k.c=yr[Bt].cl;else for(lr=yr[Bt].pt.k.length,Gt=0;Gt<lr;Gt+=1)yr[Bt].pt.k[Gt].s&&(yr[Bt].pt.k[Gt].s[0].c=yr[Bt].cl),yr[Bt].pt.k[Gt].e&&(yr[Bt].pt.k[Gt].e[0].c=yr[Bt].cl)}je.ty===4&&Qe(je.shapes)}}return function(Ge){if(Ze(_t,Ge.v)&&(it(Ge.layers),Ge.assets)){var je,Ke=Ge.assets.length;for(je=0;je<Ke;je+=1)Ge.assets[je].layers&&it(Ge.assets[je].layers)}}}();function pt(_t){_t.__complete||(at(_t),Ue(_t),Ye(_t),ct(_t),ft(_t),De(_t.layers,_t.assets),Ie(_t.chars,_t.assets),_t.__complete=!0)}function Mt(_t){_t.t.a.length===0&&"m"in _t.t.p}var At={};return At.completeData=pt,At.checkColors=at,At.checkChars=Ye,At.checkPathProperties=ct,At.checkShapes=ft,At.completeLayers=De,At}if(ue.dataManager||(ue.dataManager=Ae()),ue.assetLoader||(ue.assetLoader=function(){function De(ze){var Re=ze.getResponseHeader("content-type");return Re&&ze.responseType==="json"&&Re.indexOf("json")!==-1||ze.response&&_typeof$5(ze.response)==="object"?ze.response:ze.response&&typeof ze.response=="string"?JSON.parse(ze.response):ze.responseText?JSON.parse(ze.responseText):null}function Ie(ze,Re,Oe,qe){var Ze,Ue=new XMLHttpRequest;try{Ue.responseType="json"}catch{}Ue.onreadystatechange=function(){if(Ue.readyState===4)if(Ue.status===200)Ze=De(Ue),Oe(Ze);else try{Ze=De(Ue),Oe(Ze)}catch(Ye){qe&&qe(Ye)}};try{Ue.open(["G","E","T"].join(""),ze,!0)}catch{Ue.open(["G","E","T"].join(""),Re+"/"+ze,!0)}Ue.send()}return{load:Ie}}()),Te.data.type==="loadAnimation")ue.assetLoader.load(Te.data.path,Te.data.fullPath,function(De){ue.dataManager.completeData(De),ue.postMessage({id:Te.data.id,payload:De,status:"success"})},function(){ue.postMessage({id:Te.data.id,status:"error"})});else if(Te.data.type==="complete"){var Ce=Te.data.animation;ue.dataManager.completeData(Ce),ue.postMessage({id:Te.data.id,payload:Ce,status:"success"})}else Te.data.type==="loadData"&&ue.assetLoader.load(Te.data.path,Te.data.fullPath,function(De){ue.postMessage({id:Te.data.id,payload:De,status:"success"})},function(){ue.postMessage({id:Te.data.id,status:"error"})})}),se.onmessage=function(ye){var Te=ye.data,Ae=Te.id,Ce=ee[Ae];ee[Ae]=null,Te.status==="success"?Ce.onComplete(Te.payload):Ce.onError&&Ce.onError()})}function me(ye,Te){te+=1;var Ae="processId_"+te;return ee[Ae]={onComplete:ye,onError:Te},Ae}function ve(ye,Te,Ae){oe();var Ce=me(Te,Ae);se.postMessage({type:"loadAnimation",path:ye,fullPath:window.location.origin+window.location.pathname,id:Ce})}function Ee(ye,Te,Ae){oe();var Ce=me(Te,Ae);se.postMessage({type:"loadData",path:ye,fullPath:window.location.origin+window.location.pathname,id:Ce})}function Pe(ye,Te,Ae){oe();var Ce=me(Te,Ae);se.postMessage({type:"complete",animation:ye,id:Ce})}return{loadAnimation:ve,loadData:Ee,completeAnimation:Pe}}(),ImagePreloader=function(){var te=function(){var Ie=createTag("canvas");Ie.width=1,Ie.height=1;var ze=Ie.getContext("2d");return ze.fillStyle="rgba(0,0,0,0)",ze.fillRect(0,0,1,1),Ie}();function ee(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function ne(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function se(Ie,ze,Re){var Oe="";if(Ie.e)Oe=Ie.p;else if(ze){var qe=Ie.p;qe.indexOf("images/")!==-1&&(qe=qe.split("/")[1]),Oe=ze+qe}else Oe=Re,Oe+=Ie.u?Ie.u:"",Oe+=Ie.p;return Oe}function ae(Ie){var ze=0,Re=setInterval(function(){var Oe=Ie.getBBox();(Oe.width||ze>500)&&(this._imageLoaded(),clearInterval(Re)),ze+=1}.bind(this),50)}function ue(Ie){var ze=se(Ie,this.assetsPath,this.path),Re=createNS("image");isSafari?this.testImageLoaded(Re):Re.addEventListener("load",this._imageLoaded,!1),Re.addEventListener("error",function(){Oe.img=te,this._imageLoaded()}.bind(this),!1),Re.setAttributeNS("http://www.w3.org/1999/xlink","href",ze),this._elementHelper.append?this._elementHelper.append(Re):this._elementHelper.appendChild(Re);var Oe={img:Re,assetData:Ie};return Oe}function de(Ie){var ze=se(Ie,this.assetsPath,this.path),Re=createTag("img");Re.crossOrigin="anonymous",Re.addEventListener("load",this._imageLoaded,!1),Re.addEventListener("error",function(){Oe.img=te,this._imageLoaded()}.bind(this),!1),Re.src=ze;var Oe={img:Re,assetData:Ie};return Oe}function oe(Ie){var ze={assetData:Ie},Re=se(Ie,this.assetsPath,this.path);return dataManager.loadData(Re,function(Oe){ze.img=Oe,this._footageLoaded()}.bind(this),function(){ze.img={},this._footageLoaded()}.bind(this)),ze}function me(Ie,ze){this.imagesLoadedCb=ze;var Re,Oe=Ie.length;for(Re=0;Re<Oe;Re+=1)Ie[Re].layers||(!Ie[Re].t||Ie[Re].t==="seq"?(this.totalImages+=1,this.images.push(this._createImageData(Ie[Re]))):Ie[Re].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(Ie[Re]))))}function ve(Ie){this.path=Ie||""}function Ee(Ie){this.assetsPath=Ie||""}function Pe(Ie){for(var ze=0,Re=this.images.length;ze<Re;){if(this.images[ze].assetData===Ie)return this.images[ze].img;ze+=1}return null}function ye(){this.imagesLoadedCb=null,this.images.length=0}function Te(){return this.totalImages===this.loadedAssets}function Ae(){return this.totalFootages===this.loadedFootagesCount}function Ce(Ie,ze){Ie==="svg"?(this._elementHelper=ze,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function De(){this._imageLoaded=ee.bind(this),this._footageLoaded=ne.bind(this),this.testImageLoaded=ae.bind(this),this.createFootageData=oe.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return De.prototype={loadAssets:me,setAssetsPath:Ee,setPath:ve,loadedImages:Te,loadedFootages:Ae,destroy:ye,getAsset:Pe,createImgData:de,createImageData:ue,imageLoaded:ee,footageLoaded:ne,setCacheType:Ce},De}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(ee,ne){if(this._cbs[ee])for(var se=this._cbs[ee],ae=0;ae<se.length;ae+=1)se[ae](ne)},addEventListener:function(ee,ne){return this._cbs[ee]||(this._cbs[ee]=[]),this._cbs[ee].push(ne),function(){this.removeEventListener(ee,ne)}.bind(this)},removeEventListener:function(ee,ne){if(!ne)this._cbs[ee]=null;else if(this._cbs[ee]){for(var se=0,ae=this._cbs[ee].length;se<ae;)this._cbs[ee][se]===ne&&(this._cbs[ee].splice(se,1),se-=1,ae-=1),se+=1;this._cbs[ee].length||(this._cbs[ee]=null)}}};var markerParser=function(){function te(ee){for(var ne=ee.split(`\r
`),se={},ae,ue=0,de=0;de<ne.length;de+=1)ae=ne[de].split(":"),ae.length===2&&(se[ae[0]]=ae[1].trim(),ue+=1);if(ue===0)throw new Error;return se}return function(ee){for(var ne=[],se=0;se<ee.length;se+=1){var ae=ee[se],ue={time:ae.tm,duration:ae.dr};try{ue.payload=JSON.parse(ee[se].cm)}catch{try{ue.payload=te(ee[se].cm)}catch{ue.payload={name:ee[se].cm}}}ne.push(ue)}return ne}}(),ProjectInterface=function(){function te(ee){this.compositions.push(ee)}return function(){function ee(ne){for(var se=0,ae=this.compositions.length;se<ae;){if(this.compositions[se].data&&this.compositions[se].data.nm===ne)return this.compositions[se].prepareFrame&&this.compositions[se].data.xt&&this.compositions[se].prepareFrame(this.currentFrame),this.compositions[se].compInterface;se+=1}return null}return ee.compositions=[],ee.currentFrame=0,ee.registerComposition=te,ee}}(),renderers={},registerRenderer=function(ee,ne){renderers[ee]=ne};function getRenderer(te){return renderers[te]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var te in renderers)if(renderers[te])return te;return""}function _typeof$4(te){return _typeof$4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ee){return typeof ee}:function(ee){return ee&&typeof Symbol=="function"&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee},_typeof$4(te)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(te){(te.wrapper||te.container)&&(this.wrapper=te.wrapper||te.container);var ee="svg";te.animType?ee=te.animType:te.renderer&&(ee=te.renderer);var ne=getRenderer(ee);this.renderer=new ne(this,te.rendererSettings),this.imagePreloader.setCacheType(ee,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=ee,te.loop===""||te.loop===null||te.loop===void 0||te.loop===!0?this.loop=!0:te.loop===!1?this.loop=!1:this.loop=parseInt(te.loop,10),this.autoplay="autoplay"in te?te.autoplay:!0,this.name=te.name?te.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call(te,"autoloadSegments")?te.autoloadSegments:!0,this.assetsPath=te.assetsPath,this.initialSegment=te.initialSegment,te.audioFactory&&this.audioController.setAudioFactory(te.audioFactory),te.animationData?this.setupAnimation(te.animationData):te.path&&(te.path.lastIndexOf("\\")!==-1?this.path=te.path.substr(0,te.path.lastIndexOf("\\")+1):this.path=te.path.substr(0,te.path.lastIndexOf("/")+1),this.fileName=te.path.substr(te.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(te.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(te){dataManager.completeAnimation(te,this.configAnimation)},AnimationItem.prototype.setData=function(te,ee){ee&&_typeof$4(ee)!=="object"&&(ee=JSON.parse(ee));var ne={wrapper:te,animationData:ee},se=te.attributes;ne.path=se.getNamedItem("data-animation-path")?se.getNamedItem("data-animation-path").value:se.getNamedItem("data-bm-path")?se.getNamedItem("data-bm-path").value:se.getNamedItem("bm-path")?se.getNamedItem("bm-path").value:"",ne.animType=se.getNamedItem("data-anim-type")?se.getNamedItem("data-anim-type").value:se.getNamedItem("data-bm-type")?se.getNamedItem("data-bm-type").value:se.getNamedItem("bm-type")?se.getNamedItem("bm-type").value:se.getNamedItem("data-bm-renderer")?se.getNamedItem("data-bm-renderer").value:se.getNamedItem("bm-renderer")?se.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var ae=se.getNamedItem("data-anim-loop")?se.getNamedItem("data-anim-loop").value:se.getNamedItem("data-bm-loop")?se.getNamedItem("data-bm-loop").value:se.getNamedItem("bm-loop")?se.getNamedItem("bm-loop").value:"";ae==="false"?ne.loop=!1:ae==="true"?ne.loop=!0:ae!==""&&(ne.loop=parseInt(ae,10));var ue=se.getNamedItem("data-anim-autoplay")?se.getNamedItem("data-anim-autoplay").value:se.getNamedItem("data-bm-autoplay")?se.getNamedItem("data-bm-autoplay").value:se.getNamedItem("bm-autoplay")?se.getNamedItem("bm-autoplay").value:!0;ne.autoplay=ue!=="false",ne.name=se.getNamedItem("data-name")?se.getNamedItem("data-name").value:se.getNamedItem("data-bm-name")?se.getNamedItem("data-bm-name").value:se.getNamedItem("bm-name")?se.getNamedItem("bm-name").value:"";var de=se.getNamedItem("data-anim-prerender")?se.getNamedItem("data-anim-prerender").value:se.getNamedItem("data-bm-prerender")?se.getNamedItem("data-bm-prerender").value:se.getNamedItem("bm-prerender")?se.getNamedItem("bm-prerender").value:"";de==="false"&&(ne.prerender=!1),ne.path?this.setParams(ne):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(te){te.op>this.animationData.op&&(this.animationData.op=te.op,this.totalFrames=Math.floor(te.op-this.animationData.ip));var ee=this.animationData.layers,ne,se=ee.length,ae=te.layers,ue,de=ae.length;for(ue=0;ue<de;ue+=1)for(ne=0;ne<se;){if(ee[ne].id===ae[ue].id){ee[ne]=ae[ue];break}ne+=1}if((te.chars||te.fonts)&&(this.renderer.globalData.fontManager.addChars(te.chars),this.renderer.globalData.fontManager.addFonts(te.fonts,this.renderer.globalData.defs)),te.assets)for(se=te.assets.length,ne=0;ne<se;ne+=1)this.animationData.assets.push(te.assets[ne]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(te){this.animationData=te;var ee=getExpressionsPlugin();ee&&ee.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var te=this.animationData.segments;if(!te||te.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var ee=te.shift();this.timeCompleted=ee.time*this.frameRate;var ne=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(ne,this.includeLayers.bind(this),function(){this.trigger("data_failed")}.bind(this))},AnimationItem.prototype.loadSegments=function(){var te=this.animationData.segments;te||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(te){if(!!this.renderer)try{this.animationData=te,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(te),te.assets||(te.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(te.assets),this.markers=markerParser(te.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(ee){this.triggerConfigError(ee)}},AnimationItem.prototype.waitForFontsLoaded=function(){!this.renderer||(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var te=getExpressionsPlugin();te&&te.initExpressions(this),this.renderer.initItems(),setTimeout(function(){this.trigger("DOMLoaded")}.bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(te,ee){var ne=typeof te=="number"?te:void 0,se=typeof ee=="number"?ee:void 0;this.renderer.updateContainerSize(ne,se)},AnimationItem.prototype.setSubframe=function(te){this.isSubframeEnabled=!!te},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!(this.isLoaded===!1||!this.renderer))try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(te){this.triggerRenderFrameError(te)}},AnimationItem.prototype.play=function(te){te&&this.name!==te||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(te){te&&this.name!==te||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(te){te&&this.name!==te||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(te){te&&this.name!==te||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(te){for(var ee,ne=0;ne<this.markers.length;ne+=1)if(ee=this.markers[ne],ee.payload&&ee.payload.name===te)return ee;return null},AnimationItem.prototype.goToAndStop=function(te,ee,ne){if(!(ne&&this.name!==ne)){var se=Number(te);if(isNaN(se)){var ae=this.getMarkerData(te);ae&&this.goToAndStop(ae.time,!0)}else ee?this.setCurrentRawFrameValue(te):this.setCurrentRawFrameValue(te*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(te,ee,ne){if(!(ne&&this.name!==ne)){var se=Number(te);if(isNaN(se)){var ae=this.getMarkerData(te);ae&&(ae.duration?this.playSegments([ae.time,ae.time+ae.duration],!0):this.goToAndStop(ae.time,!0))}else this.goToAndStop(se,ee,ne);this.play()}},AnimationItem.prototype.advanceTime=function(te){if(!(this.isPaused===!0||this.isLoaded===!1)){var ee=this.currentRawFrame+te*this.frameModifier,ne=!1;ee>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(ee>this.totalFrames?ee%this.totalFrames:0)||(ne=!0,ee=this.totalFrames-1):ee>=this.totalFrames?(this.playCount+=1,this.checkSegments(ee%this.totalFrames)||(this.setCurrentRawFrameValue(ee%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(ee):ee<0?this.checkSegments(ee%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+ee%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(ne=!0,ee=0)):this.setCurrentRawFrameValue(ee),ne&&(this.setCurrentRawFrameValue(ee),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(te,ee){this.playCount=0,te[1]<te[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=te[0]-te[1],this.timeCompleted=this.totalFrames,this.firstFrame=te[1],this.setCurrentRawFrameValue(this.totalFrames-.001-ee)):te[1]>te[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=te[1]-te[0],this.timeCompleted=this.totalFrames,this.firstFrame=te[0],this.setCurrentRawFrameValue(.001+ee)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(te,ee){var ne=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<te?ne=te:this.currentRawFrame+this.firstFrame>ee&&(ne=ee-te)),this.firstFrame=te,this.totalFrames=ee-te,this.timeCompleted=this.totalFrames,ne!==-1&&this.goToAndStop(ne,!0)},AnimationItem.prototype.playSegments=function(te,ee){if(ee&&(this.segments.length=0),_typeof$4(te[0])==="object"){var ne,se=te.length;for(ne=0;ne<se;ne+=1)this.segments.push(te[ne])}else this.segments.push(te);this.segments.length&&ee&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(te){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),te&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(te){return this.segments.length?(this.adjustSegment(this.segments.shift(),te),!0):!1},AnimationItem.prototype.destroy=function(te){te&&this.name!==te||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(te){this.currentRawFrame=te,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(te){this.playSpeed=te,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(te){this.playDirection=te<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(te){this.loop=te},AnimationItem.prototype.setVolume=function(te,ee){ee&&this.name!==ee||this.audioController.setVolume(te)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(te){te&&this.name!==te||this.audioController.mute()},AnimationItem.prototype.unmute=function(te){te&&this.name!==te||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(te){var ee="";if(te.e)ee=te.p;else if(this.assetsPath){var ne=te.p;ne.indexOf("images/")!==-1&&(ne=ne.split("/")[1]),ee=this.assetsPath+ne}else ee=this.path,ee+=te.u?te.u:"",ee+=te.p;return ee},AnimationItem.prototype.getAssetData=function(te){for(var ee=0,ne=this.assets.length;ee<ne;){if(te===this.assets[ee].id)return this.assets[ee];ee+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(te){return te?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(te,ee,ne){try{var se=this.renderer.getElementByPath(te);se.updateDocumentData(ee,ne)}catch{}},AnimationItem.prototype.trigger=function(te){if(this._cbs&&this._cbs[te])switch(te){case"enterFrame":this.triggerEvent(te,new BMEnterFrameEvent(te,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(te,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(te,new BMCompleteLoopEvent(te,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(te,new BMCompleteEvent(te,this.frameMult));break;case"segmentStart":this.triggerEvent(te,new BMSegmentStartEvent(te,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(te,new BMDestroyEvent(te,this));break;default:this.triggerEvent(te)}te==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(te,this.currentFrame,this.totalFrames,this.frameMult)),te==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(te,this.loop,this.playCount,this.frameMult)),te==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(te,this.frameMult)),te==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(te,this.firstFrame,this.totalFrames)),te==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(te,this))},AnimationItem.prototype.triggerRenderFrameError=function(te){var ee=new BMRenderFrameErrorEvent(te,this.currentFrame);this.triggerEvent("error",ee),this.onError&&this.onError.call(this,ee)},AnimationItem.prototype.triggerConfigError=function(te){var ee=new BMConfigErrorEvent(te,this.currentFrame);this.triggerEvent("error",ee),this.onError&&this.onError.call(this,ee)};var animationManager=function(){var te={},ee=[],ne=0,se=0,ae=0,ue=!0,de=!1;function oe(Qe){for(var it=0,Ge=Qe.target;it<se;)ee[it].animation===Ge&&(ee.splice(it,1),it-=1,se-=1,Ge.isPaused||Pe()),it+=1}function me(Qe,it){if(!Qe)return null;for(var Ge=0;Ge<se;){if(ee[Ge].elem===Qe&&ee[Ge].elem!==null)return ee[Ge].animation;Ge+=1}var je=new AnimationItem;return ye(je,Qe),je.setData(Qe,it),je}function ve(){var Qe,it=ee.length,Ge=[];for(Qe=0;Qe<it;Qe+=1)Ge.push(ee[Qe].animation);return Ge}function Ee(){ae+=1,at()}function Pe(){ae-=1}function ye(Qe,it){Qe.addEventListener("destroy",oe),Qe.addEventListener("_active",Ee),Qe.addEventListener("_idle",Pe),ee.push({elem:it,animation:Qe}),se+=1}function Te(Qe){var it=new AnimationItem;return ye(it,null),it.setParams(Qe),it}function Ae(Qe,it){var Ge;for(Ge=0;Ge<se;Ge+=1)ee[Ge].animation.setSpeed(Qe,it)}function Ce(Qe,it){var Ge;for(Ge=0;Ge<se;Ge+=1)ee[Ge].animation.setDirection(Qe,it)}function De(Qe){var it;for(it=0;it<se;it+=1)ee[it].animation.play(Qe)}function Ie(Qe){var it=Qe-ne,Ge;for(Ge=0;Ge<se;Ge+=1)ee[Ge].animation.advanceTime(it);ne=Qe,ae&&!de?window.requestAnimationFrame(Ie):ue=!0}function ze(Qe){ne=Qe,window.requestAnimationFrame(Ie)}function Re(Qe){var it;for(it=0;it<se;it+=1)ee[it].animation.pause(Qe)}function Oe(Qe,it,Ge){var je;for(je=0;je<se;je+=1)ee[je].animation.goToAndStop(Qe,it,Ge)}function qe(Qe){var it;for(it=0;it<se;it+=1)ee[it].animation.stop(Qe)}function Ze(Qe){var it;for(it=0;it<se;it+=1)ee[it].animation.togglePause(Qe)}function Ue(Qe){var it;for(it=se-1;it>=0;it-=1)ee[it].animation.destroy(Qe)}function Ye(Qe,it,Ge){var je=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),Ke,lt=je.length;for(Ke=0;Ke<lt;Ke+=1)Ge&&je[Ke].setAttribute("data-bm-type",Ge),me(je[Ke],Qe);if(it&&lt===0){Ge||(Ge="svg");var Bt=document.getElementsByTagName("body")[0];Bt.innerText="";var Xt=createTag("div");Xt.style.width="100%",Xt.style.height="100%",Xt.setAttribute("data-bm-type",Ge),Bt.appendChild(Xt),me(Xt,Qe)}}function ct(){var Qe;for(Qe=0;Qe<se;Qe+=1)ee[Qe].animation.resize()}function at(){!de&&ae&&ue&&(window.requestAnimationFrame(ze),ue=!1)}function ft(){de=!0}function pt(){de=!1,at()}function Mt(Qe,it){var Ge;for(Ge=0;Ge<se;Ge+=1)ee[Ge].animation.setVolume(Qe,it)}function At(Qe){var it;for(it=0;it<se;it+=1)ee[it].animation.mute(Qe)}function _t(Qe){var it;for(it=0;it<se;it+=1)ee[it].animation.unmute(Qe)}return te.registerAnimation=me,te.loadAnimation=Te,te.setSpeed=Ae,te.setDirection=Ce,te.play=De,te.pause=Re,te.stop=qe,te.togglePause=Ze,te.searchAnimations=Ye,te.resize=ct,te.goToAndStop=Oe,te.destroy=Ue,te.freeze=ft,te.unfreeze=pt,te.setVolume=Mt,te.mute=At,te.unmute=_t,te.getRegisteredAnimations=ve,te}(),BezierFactory=function(){var te={};te.getBezierEasing=ne;var ee={};function ne(ze,Re,Oe,qe,Ze){var Ue=Ze||("bez_"+ze+"_"+Re+"_"+Oe+"_"+qe).replace(/\./g,"p");if(ee[Ue])return ee[Ue];var Ye=new Ie([ze,Re,Oe,qe]);return ee[Ue]=Ye,Ye}var se=4,ae=.001,ue=1e-7,de=10,oe=11,me=1/(oe-1),ve=typeof Float32Array=="function";function Ee(ze,Re){return 1-3*Re+3*ze}function Pe(ze,Re){return 3*Re-6*ze}function ye(ze){return 3*ze}function Te(ze,Re,Oe){return((Ee(Re,Oe)*ze+Pe(Re,Oe))*ze+ye(Re))*ze}function Ae(ze,Re,Oe){return 3*Ee(Re,Oe)*ze*ze+2*Pe(Re,Oe)*ze+ye(Re)}function Ce(ze,Re,Oe,qe,Ze){var Ue,Ye,ct=0;do Ye=Re+(Oe-Re)/2,Ue=Te(Ye,qe,Ze)-ze,Ue>0?Oe=Ye:Re=Ye;while(Math.abs(Ue)>ue&&++ct<de);return Ye}function De(ze,Re,Oe,qe){for(var Ze=0;Ze<se;++Ze){var Ue=Ae(Re,Oe,qe);if(Ue===0)return Re;var Ye=Te(Re,Oe,qe)-ze;Re-=Ye/Ue}return Re}function Ie(ze){this._p=ze,this._mSampleValues=ve?new Float32Array(oe):new Array(oe),this._precomputed=!1,this.get=this.get.bind(this)}return Ie.prototype={get:function(Re){var Oe=this._p[0],qe=this._p[1],Ze=this._p[2],Ue=this._p[3];return this._precomputed||this._precompute(),Oe===qe&&Ze===Ue?Re:Re===0?0:Re===1?1:Te(this._getTForX(Re),qe,Ue)},_precompute:function(){var Re=this._p[0],Oe=this._p[1],qe=this._p[2],Ze=this._p[3];this._precomputed=!0,(Re!==Oe||qe!==Ze)&&this._calcSampleValues()},_calcSampleValues:function(){for(var Re=this._p[0],Oe=this._p[2],qe=0;qe<oe;++qe)this._mSampleValues[qe]=Te(qe*me,Re,Oe)},_getTForX:function(Re){for(var Oe=this._p[0],qe=this._p[2],Ze=this._mSampleValues,Ue=0,Ye=1,ct=oe-1;Ye!==ct&&Ze[Ye]<=Re;++Ye)Ue+=me;--Ye;var at=(Re-Ze[Ye])/(Ze[Ye+1]-Ze[Ye]),ft=Ue+at*me,pt=Ae(ft,Oe,qe);return pt>=ae?De(Re,ft,Oe,qe):pt===0?ft:Ce(Re,Ue,Ue+me,Oe,qe)}},te}(),pooling=function(){function te(ee){return ee.concat(createSizedArray(ee.length))}return{double:te}}(),poolFactory=function(){return function(te,ee,ne){var se=0,ae=te,ue=createSizedArray(ae),de={newElement:oe,release:me};function oe(){var ve;return se?(se-=1,ve=ue[se]):ve=ee(),ve}function me(ve){se===ae&&(ue=pooling.double(ue),ae*=2),ne&&ne(ve),ue[se]=ve,se+=1}return de}}(),bezierLengthPool=function(){function te(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,te)}(),segmentsLengthPool=function(){function te(){return{lengths:[],totalLength:0}}function ee(ne){var se,ae=ne.lengths.length;for(se=0;se<ae;se+=1)bezierLengthPool.release(ne.lengths[se]);ne.lengths.length=0}return poolFactory(8,te,ee)}();function bezFunction(){var te=Math;function ee(ye,Te,Ae,Ce,De,Ie){var ze=ye*Ce+Te*De+Ae*Ie-De*Ce-Ie*ye-Ae*Te;return ze>-.001&&ze<.001}function ne(ye,Te,Ae,Ce,De,Ie,ze,Re,Oe){if(Ae===0&&Ie===0&&Oe===0)return ee(ye,Te,Ce,De,ze,Re);var qe=te.sqrt(te.pow(Ce-ye,2)+te.pow(De-Te,2)+te.pow(Ie-Ae,2)),Ze=te.sqrt(te.pow(ze-ye,2)+te.pow(Re-Te,2)+te.pow(Oe-Ae,2)),Ue=te.sqrt(te.pow(ze-Ce,2)+te.pow(Re-De,2)+te.pow(Oe-Ie,2)),Ye;return qe>Ze?qe>Ue?Ye=qe-Ze-Ue:Ye=Ue-Ze-qe:Ue>Ze?Ye=Ue-Ze-qe:Ye=Ze-qe-Ue,Ye>-1e-4&&Ye<1e-4}var se=function(){return function(ye,Te,Ae,Ce){var De=getDefaultCurveSegments(),Ie,ze,Re,Oe,qe,Ze=0,Ue,Ye=[],ct=[],at=bezierLengthPool.newElement();for(Re=Ae.length,Ie=0;Ie<De;Ie+=1){for(qe=Ie/(De-1),Ue=0,ze=0;ze<Re;ze+=1)Oe=bmPow(1-qe,3)*ye[ze]+3*bmPow(1-qe,2)*qe*Ae[ze]+3*(1-qe)*bmPow(qe,2)*Ce[ze]+bmPow(qe,3)*Te[ze],Ye[ze]=Oe,ct[ze]!==null&&(Ue+=bmPow(Ye[ze]-ct[ze],2)),ct[ze]=Ye[ze];Ue&&(Ue=bmSqrt(Ue),Ze+=Ue),at.percents[Ie]=qe,at.lengths[Ie]=Ze}return at.addedLength=Ze,at}}();function ae(ye){var Te=segmentsLengthPool.newElement(),Ae=ye.c,Ce=ye.v,De=ye.o,Ie=ye.i,ze,Re=ye._length,Oe=Te.lengths,qe=0;for(ze=0;ze<Re-1;ze+=1)Oe[ze]=se(Ce[ze],Ce[ze+1],De[ze],Ie[ze+1]),qe+=Oe[ze].addedLength;return Ae&&Re&&(Oe[ze]=se(Ce[ze],Ce[0],De[ze],Ie[0]),qe+=Oe[ze].addedLength),Te.totalLength=qe,Te}function ue(ye){this.segmentLength=0,this.points=new Array(ye)}function de(ye,Te){this.partialLength=ye,this.point=Te}var oe=function(){var ye={};return function(Te,Ae,Ce,De){var Ie=(Te[0]+"_"+Te[1]+"_"+Ae[0]+"_"+Ae[1]+"_"+Ce[0]+"_"+Ce[1]+"_"+De[0]+"_"+De[1]).replace(/\./g,"p");if(!ye[Ie]){var ze=getDefaultCurveSegments(),Re,Oe,qe,Ze,Ue,Ye=0,ct,at,ft=null;Te.length===2&&(Te[0]!==Ae[0]||Te[1]!==Ae[1])&&ee(Te[0],Te[1],Ae[0],Ae[1],Te[0]+Ce[0],Te[1]+Ce[1])&&ee(Te[0],Te[1],Ae[0],Ae[1],Ae[0]+De[0],Ae[1]+De[1])&&(ze=2);var pt=new ue(ze);for(qe=Ce.length,Re=0;Re<ze;Re+=1){for(at=createSizedArray(qe),Ue=Re/(ze-1),ct=0,Oe=0;Oe<qe;Oe+=1)Ze=bmPow(1-Ue,3)*Te[Oe]+3*bmPow(1-Ue,2)*Ue*(Te[Oe]+Ce[Oe])+3*(1-Ue)*bmPow(Ue,2)*(Ae[Oe]+De[Oe])+bmPow(Ue,3)*Ae[Oe],at[Oe]=Ze,ft!==null&&(ct+=bmPow(at[Oe]-ft[Oe],2));ct=bmSqrt(ct),Ye+=ct,pt.points[Re]=new de(ct,at),ft=at}pt.segmentLength=Ye,ye[Ie]=pt}return ye[Ie]}}();function me(ye,Te){var Ae=Te.percents,Ce=Te.lengths,De=Ae.length,Ie=bmFloor((De-1)*ye),ze=ye*Te.addedLength,Re=0;if(Ie===De-1||Ie===0||ze===Ce[Ie])return Ae[Ie];for(var Oe=Ce[Ie]>ze?-1:1,qe=!0;qe;)if(Ce[Ie]<=ze&&Ce[Ie+1]>ze?(Re=(ze-Ce[Ie])/(Ce[Ie+1]-Ce[Ie]),qe=!1):Ie+=Oe,Ie<0||Ie>=De-1){if(Ie===De-1)return Ae[Ie];qe=!1}return Ae[Ie]+(Ae[Ie+1]-Ae[Ie])*Re}function ve(ye,Te,Ae,Ce,De,Ie){var ze=me(De,Ie),Re=1-ze,Oe=te.round((Re*Re*Re*ye[0]+(ze*Re*Re+Re*ze*Re+Re*Re*ze)*Ae[0]+(ze*ze*Re+Re*ze*ze+ze*Re*ze)*Ce[0]+ze*ze*ze*Te[0])*1e3)/1e3,qe=te.round((Re*Re*Re*ye[1]+(ze*Re*Re+Re*ze*Re+Re*Re*ze)*Ae[1]+(ze*ze*Re+Re*ze*ze+ze*Re*ze)*Ce[1]+ze*ze*ze*Te[1])*1e3)/1e3;return[Oe,qe]}var Ee=createTypedArray("float32",8);function Pe(ye,Te,Ae,Ce,De,Ie,ze){De<0?De=0:De>1&&(De=1);var Re=me(De,ze);Ie=Ie>1?1:Ie;var Oe=me(Ie,ze),qe,Ze=ye.length,Ue=1-Re,Ye=1-Oe,ct=Ue*Ue*Ue,at=Re*Ue*Ue*3,ft=Re*Re*Ue*3,pt=Re*Re*Re,Mt=Ue*Ue*Ye,At=Re*Ue*Ye+Ue*Re*Ye+Ue*Ue*Oe,_t=Re*Re*Ye+Ue*Re*Oe+Re*Ue*Oe,Qe=Re*Re*Oe,it=Ue*Ye*Ye,Ge=Re*Ye*Ye+Ue*Oe*Ye+Ue*Ye*Oe,je=Re*Oe*Ye+Ue*Oe*Oe+Re*Ye*Oe,Ke=Re*Oe*Oe,lt=Ye*Ye*Ye,Bt=Oe*Ye*Ye+Ye*Oe*Ye+Ye*Ye*Oe,Xt=Oe*Oe*Ye+Ye*Oe*Oe+Oe*Ye*Oe,Gt=Oe*Oe*Oe;for(qe=0;qe<Ze;qe+=1)Ee[qe*4]=te.round((ct*ye[qe]+at*Ae[qe]+ft*Ce[qe]+pt*Te[qe])*1e3)/1e3,Ee[qe*4+1]=te.round((Mt*ye[qe]+At*Ae[qe]+_t*Ce[qe]+Qe*Te[qe])*1e3)/1e3,Ee[qe*4+2]=te.round((it*ye[qe]+Ge*Ae[qe]+je*Ce[qe]+Ke*Te[qe])*1e3)/1e3,Ee[qe*4+3]=te.round((lt*ye[qe]+Bt*Ae[qe]+Xt*Ce[qe]+Gt*Te[qe])*1e3)/1e3;return Ee}return{getSegmentsLength:ae,getNewSegment:Pe,getPointInSegment:ve,buildBezierData:oe,pointOnLine2D:ee,pointOnLine3D:ne}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(te,ee){var ne=this.offsetTime,se;this.propType==="multidimensional"&&(se=createTypedArray("float32",this.pv.length));for(var ae=ee.lastIndex,ue=ae,de=this.keyframes.length-1,oe=!0,me,ve,Ee;oe;){if(me=this.keyframes[ue],ve=this.keyframes[ue+1],ue===de-1&&te>=ve.t-ne){me.h&&(me=ve),ae=0;break}if(ve.t-ne>te){ae=ue;break}ue<de-1?ue+=1:(ae=0,oe=!1)}Ee=this.keyframesMetadata[ue]||{};var Pe,ye,Te,Ae,Ce,De,Ie=ve.t-ne,ze=me.t-ne,Re;if(me.to){Ee.bezierData||(Ee.bezierData=bez.buildBezierData(me.s,ve.s||me.e,me.to,me.ti));var Oe=Ee.bezierData;if(te>=Ie||te<ze){var qe=te>=Ie?Oe.points.length-1:0;for(ye=Oe.points[qe].point.length,Pe=0;Pe<ye;Pe+=1)se[Pe]=Oe.points[qe].point[Pe]}else{Ee.__fnct?De=Ee.__fnct:(De=BezierFactory.getBezierEasing(me.o.x,me.o.y,me.i.x,me.i.y,me.n).get,Ee.__fnct=De),Te=De((te-ze)/(Ie-ze));var Ze=Oe.segmentLength*Te,Ue,Ye=ee.lastFrame<te&&ee._lastKeyframeIndex===ue?ee._lastAddedLength:0;for(Ce=ee.lastFrame<te&&ee._lastKeyframeIndex===ue?ee._lastPoint:0,oe=!0,Ae=Oe.points.length;oe;){if(Ye+=Oe.points[Ce].partialLength,Ze===0||Te===0||Ce===Oe.points.length-1){for(ye=Oe.points[Ce].point.length,Pe=0;Pe<ye;Pe+=1)se[Pe]=Oe.points[Ce].point[Pe];break}else if(Ze>=Ye&&Ze<Ye+Oe.points[Ce+1].partialLength){for(Ue=(Ze-Ye)/Oe.points[Ce+1].partialLength,ye=Oe.points[Ce].point.length,Pe=0;Pe<ye;Pe+=1)se[Pe]=Oe.points[Ce].point[Pe]+(Oe.points[Ce+1].point[Pe]-Oe.points[Ce].point[Pe])*Ue;break}Ce<Ae-1?Ce+=1:oe=!1}ee._lastPoint=Ce,ee._lastAddedLength=Ye-Oe.points[Ce].partialLength,ee._lastKeyframeIndex=ue}}else{var ct,at,ft,pt,Mt;if(de=me.s.length,Re=ve.s||me.e,this.sh&&me.h!==1)if(te>=Ie)se[0]=Re[0],se[1]=Re[1],se[2]=Re[2];else if(te<=ze)se[0]=me.s[0],se[1]=me.s[1],se[2]=me.s[2];else{var At=createQuaternion(me.s),_t=createQuaternion(Re),Qe=(te-ze)/(Ie-ze);quaternionToEuler(se,slerp(At,_t,Qe))}else for(ue=0;ue<de;ue+=1)me.h!==1&&(te>=Ie?Te=1:te<ze?Te=0:(me.o.x.constructor===Array?(Ee.__fnct||(Ee.__fnct=[]),Ee.__fnct[ue]?De=Ee.__fnct[ue]:(ct=me.o.x[ue]===void 0?me.o.x[0]:me.o.x[ue],at=me.o.y[ue]===void 0?me.o.y[0]:me.o.y[ue],ft=me.i.x[ue]===void 0?me.i.x[0]:me.i.x[ue],pt=me.i.y[ue]===void 0?me.i.y[0]:me.i.y[ue],De=BezierFactory.getBezierEasing(ct,at,ft,pt).get,Ee.__fnct[ue]=De)):Ee.__fnct?De=Ee.__fnct:(ct=me.o.x,at=me.o.y,ft=me.i.x,pt=me.i.y,De=BezierFactory.getBezierEasing(ct,at,ft,pt).get,me.keyframeMetadata=De),Te=De((te-ze)/(Ie-ze)))),Re=ve.s||me.e,Mt=me.h===1?me.s[ue]:me.s[ue]+(Re[ue]-me.s[ue])*Te,this.propType==="multidimensional"?se[ue]=Mt:se=Mt}return ee.lastIndex=ae,se}function slerp(te,ee,ne){var se=[],ae=te[0],ue=te[1],de=te[2],oe=te[3],me=ee[0],ve=ee[1],Ee=ee[2],Pe=ee[3],ye,Te,Ae,Ce,De;return Te=ae*me+ue*ve+de*Ee+oe*Pe,Te<0&&(Te=-Te,me=-me,ve=-ve,Ee=-Ee,Pe=-Pe),1-Te>1e-6?(ye=Math.acos(Te),Ae=Math.sin(ye),Ce=Math.sin((1-ne)*ye)/Ae,De=Math.sin(ne*ye)/Ae):(Ce=1-ne,De=ne),se[0]=Ce*ae+De*me,se[1]=Ce*ue+De*ve,se[2]=Ce*de+De*Ee,se[3]=Ce*oe+De*Pe,se}function quaternionToEuler(te,ee){var ne=ee[0],se=ee[1],ae=ee[2],ue=ee[3],de=Math.atan2(2*se*ue-2*ne*ae,1-2*se*se-2*ae*ae),oe=Math.asin(2*ne*se+2*ae*ue),me=Math.atan2(2*ne*ue-2*se*ae,1-2*ne*ne-2*ae*ae);te[0]=de/degToRads,te[1]=oe/degToRads,te[2]=me/degToRads}function createQuaternion(te){var ee=te[0]*degToRads,ne=te[1]*degToRads,se=te[2]*degToRads,ae=Math.cos(ee/2),ue=Math.cos(ne/2),de=Math.cos(se/2),oe=Math.sin(ee/2),me=Math.sin(ne/2),ve=Math.sin(se/2),Ee=ae*ue*de-oe*me*ve,Pe=oe*me*de+ae*ue*ve,ye=oe*ue*de+ae*me*ve,Te=ae*me*de-oe*ue*ve;return[Pe,ye,Te,Ee]}function getValueAtCurrentTime(){var te=this.comp.renderedFrame-this.offsetTime,ee=this.keyframes[0].t-this.offsetTime,ne=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(te===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=ne&&te>=ne||this._caching.lastFrame<ee&&te<ee))){this._caching.lastFrame>=te&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var se=this.interpolateValue(te,this._caching);this.pv=se}return this._caching.lastFrame=te,this.pv}function setVValue(te){var ee;if(this.propType==="unidimensional")ee=te*this.mult,mathAbs(this.v-ee)>1e-5&&(this.v=ee,this._mdf=!0);else for(var ne=0,se=this.v.length;ne<se;)ee=te[ne]*this.mult,mathAbs(this.v[ne]-ee)>1e-5&&(this.v[ne]=ee,this._mdf=!0),ne+=1}function processEffectsSequence(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var te,ee=this.effectsSequence.length,ne=this.kf?this.pv:this.data.k;for(te=0;te<ee;te+=1)ne=this.effectsSequence[te](ne);this.setVValue(ne),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(te){this.effectsSequence.push(te),this.container.addDynamicProperty(this)}function ValueProperty(te,ee,ne,se){this.propType="unidimensional",this.mult=ne||1,this.data=ee,this.v=ne?ee.k*ne:ee.k,this.pv=ee.k,this._mdf=!1,this.elem=te,this.container=se,this.comp=te.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(te,ee,ne,se){this.propType="multidimensional",this.mult=ne||1,this.data=ee,this._mdf=!1,this.elem=te,this.container=se,this.comp=te.comp,this.k=!1,this.kf=!1,this.frameId=-1;var ae,ue=ee.k.length;for(this.v=createTypedArray("float32",ue),this.pv=createTypedArray("float32",ue),this.vel=createTypedArray("float32",ue),ae=0;ae<ue;ae+=1)this.v[ae]=ee.k[ae]*this.mult,this.pv[ae]=ee.k[ae];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(te,ee,ne,se){this.propType="unidimensional",this.keyframes=ee.k,this.keyframesMetadata=[],this.offsetTime=te.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=ee,this.mult=ne||1,this.elem=te,this.container=se,this.comp=te.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(te,ee,ne,se){this.propType="multidimensional";var ae,ue=ee.k.length,de,oe,me,ve;for(ae=0;ae<ue-1;ae+=1)ee.k[ae].to&&ee.k[ae].s&&ee.k[ae+1]&&ee.k[ae+1].s&&(de=ee.k[ae].s,oe=ee.k[ae+1].s,me=ee.k[ae].to,ve=ee.k[ae].ti,(de.length===2&&!(de[0]===oe[0]&&de[1]===oe[1])&&bez.pointOnLine2D(de[0],de[1],oe[0],oe[1],de[0]+me[0],de[1]+me[1])&&bez.pointOnLine2D(de[0],de[1],oe[0],oe[1],oe[0]+ve[0],oe[1]+ve[1])||de.length===3&&!(de[0]===oe[0]&&de[1]===oe[1]&&de[2]===oe[2])&&bez.pointOnLine3D(de[0],de[1],de[2],oe[0],oe[1],oe[2],de[0]+me[0],de[1]+me[1],de[2]+me[2])&&bez.pointOnLine3D(de[0],de[1],de[2],oe[0],oe[1],oe[2],oe[0]+ve[0],oe[1]+ve[1],oe[2]+ve[2]))&&(ee.k[ae].to=null,ee.k[ae].ti=null),de[0]===oe[0]&&de[1]===oe[1]&&me[0]===0&&me[1]===0&&ve[0]===0&&ve[1]===0&&(de.length===2||de[2]===oe[2]&&me[2]===0&&ve[2]===0)&&(ee.k[ae].to=null,ee.k[ae].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=ee,this.keyframes=ee.k,this.keyframesMetadata=[],this.offsetTime=te.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=ne||1,this.elem=te,this.container=se,this.comp=te.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var Ee=ee.k[0].s.length;for(this.v=createTypedArray("float32",Ee),this.pv=createTypedArray("float32",Ee),ae=0;ae<Ee;ae+=1)this.v[ae]=initFrame,this.pv[ae]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",Ee)},this.addEffect=addEffect}var PropertyFactory=function(){function te(ne,se,ae,ue,de){se.sid&&(se=ne.globalData.slotManager.getProp(se));var oe;if(!se.k.length)oe=new ValueProperty(ne,se,ue,de);else if(typeof se.k[0]=="number")oe=new MultiDimensionalProperty(ne,se,ue,de);else switch(ae){case 0:oe=new KeyframedValueProperty(ne,se,ue,de);break;case 1:oe=new KeyframedMultidimensionalProperty(ne,se,ue,de);break}return oe.effectsSequence.length&&de.addDynamicProperty(oe),oe}var ee={getProp:te};return ee}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(ee){this.dynamicProperties.indexOf(ee)===-1&&(this.dynamicProperties.push(ee),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var ee,ne=this.dynamicProperties.length;for(ee=0;ee<ne;ee+=1)this.dynamicProperties[ee].getValue(),this.dynamicProperties[ee]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(ee){this.container=ee,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=function(){function te(){return createTypedArray("float32",2)}return poolFactory(8,te)}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(te,ee){this.c=te,this.setLength(ee);for(var ne=0;ne<ee;)this.v[ne]=pointPool.newElement(),this.o[ne]=pointPool.newElement(),this.i[ne]=pointPool.newElement(),ne+=1},ShapePath.prototype.setLength=function(te){for(;this._maxLength<te;)this.doubleArrayLength();this._length=te},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(te,ee,ne,se,ae){var ue;switch(this._length=Math.max(this._length,se+1),this._length>=this._maxLength&&this.doubleArrayLength(),ne){case"v":ue=this.v;break;case"i":ue=this.i;break;case"o":ue=this.o;break;default:ue=[];break}(!ue[se]||ue[se]&&!ae)&&(ue[se]=pointPool.newElement()),ue[se][0]=te,ue[se][1]=ee},ShapePath.prototype.setTripleAt=function(te,ee,ne,se,ae,ue,de,oe){this.setXYAt(te,ee,"v",de,oe),this.setXYAt(ne,se,"o",de,oe),this.setXYAt(ae,ue,"i",de,oe)},ShapePath.prototype.reverse=function(){var te=new ShapePath;te.setPathData(this.c,this._length);var ee=this.v,ne=this.o,se=this.i,ae=0;this.c&&(te.setTripleAt(ee[0][0],ee[0][1],se[0][0],se[0][1],ne[0][0],ne[0][1],0,!1),ae=1);var ue=this._length-1,de=this._length,oe;for(oe=ae;oe<de;oe+=1)te.setTripleAt(ee[ue][0],ee[ue][1],se[ue][0],se[ue][1],ne[ue][0],ne[ue][1],oe,!1),ue-=1;return te},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){function te(){return new ShapePath}function ee(ae){var ue=ae._length,de;for(de=0;de<ue;de+=1)pointPool.release(ae.v[de]),pointPool.release(ae.i[de]),pointPool.release(ae.o[de]),ae.v[de]=null,ae.i[de]=null,ae.o[de]=null;ae._length=0,ae.c=!1}function ne(ae){var ue=se.newElement(),de,oe=ae._length===void 0?ae.v.length:ae._length;for(ue.setLength(oe),ue.c=ae.c,de=0;de<oe;de+=1)ue.setTripleAt(ae.v[de][0],ae.v[de][1],ae.o[de][0],ae.o[de][1],ae.i[de][0],ae.i[de][1],de);return ue}var se=poolFactory(4,te,ee);return se.clone=ne,se}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(te){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=te,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var te;for(te=0;te<this._length;te+=1)shapePool.release(this.shapes[te]);this._length=0};var shapeCollectionPool=function(){var te={newShapeCollection:ae,release:ue},ee=0,ne=4,se=createSizedArray(ne);function ae(){var de;return ee?(ee-=1,de=se[ee]):de=new ShapeCollection,de}function ue(de){var oe,me=de._length;for(oe=0;oe<me;oe+=1)shapePool.release(de.shapes[oe]);de._length=0,ee===ne&&(se=pooling.double(se),ne*=2),se[ee]=de,ee+=1}return te}(),ShapePropertyFactory=function(){var te=-999999;function ee(Ie,ze,Re){var Oe=Re.lastIndex,qe,Ze,Ue,Ye,ct,at,ft,pt,Mt,At=this.keyframes;if(Ie<At[0].t-this.offsetTime)qe=At[0].s[0],Ue=!0,Oe=0;else if(Ie>=At[At.length-1].t-this.offsetTime)qe=At[At.length-1].s?At[At.length-1].s[0]:At[At.length-2].e[0],Ue=!0;else{for(var _t=Oe,Qe=At.length-1,it=!0,Ge,je,Ke;it&&(Ge=At[_t],je=At[_t+1],!(je.t-this.offsetTime>Ie));)_t<Qe-1?_t+=1:it=!1;if(Ke=this.keyframesMetadata[_t]||{},Ue=Ge.h===1,Oe=_t,!Ue){if(Ie>=je.t-this.offsetTime)pt=1;else if(Ie<Ge.t-this.offsetTime)pt=0;else{var lt;Ke.__fnct?lt=Ke.__fnct:(lt=BezierFactory.getBezierEasing(Ge.o.x,Ge.o.y,Ge.i.x,Ge.i.y).get,Ke.__fnct=lt),pt=lt((Ie-(Ge.t-this.offsetTime))/(je.t-this.offsetTime-(Ge.t-this.offsetTime)))}Ze=je.s?je.s[0]:Ge.e[0]}qe=Ge.s[0]}for(at=ze._length,ft=qe.i[0].length,Re.lastIndex=Oe,Ye=0;Ye<at;Ye+=1)for(ct=0;ct<ft;ct+=1)Mt=Ue?qe.i[Ye][ct]:qe.i[Ye][ct]+(Ze.i[Ye][ct]-qe.i[Ye][ct])*pt,ze.i[Ye][ct]=Mt,Mt=Ue?qe.o[Ye][ct]:qe.o[Ye][ct]+(Ze.o[Ye][ct]-qe.o[Ye][ct])*pt,ze.o[Ye][ct]=Mt,Mt=Ue?qe.v[Ye][ct]:qe.v[Ye][ct]+(Ze.v[Ye][ct]-qe.v[Ye][ct])*pt,ze.v[Ye][ct]=Mt}function ne(){var Ie=this.comp.renderedFrame-this.offsetTime,ze=this.keyframes[0].t-this.offsetTime,Re=this.keyframes[this.keyframes.length-1].t-this.offsetTime,Oe=this._caching.lastFrame;return Oe!==te&&(Oe<ze&&Ie<ze||Oe>Re&&Ie>Re)||(this._caching.lastIndex=Oe<Ie?this._caching.lastIndex:0,this.interpolateShape(Ie,this.pv,this._caching)),this._caching.lastFrame=Ie,this.pv}function se(){this.paths=this.localShapeCollection}function ae(Ie,ze){if(Ie._length!==ze._length||Ie.c!==ze.c)return!1;var Re,Oe=Ie._length;for(Re=0;Re<Oe;Re+=1)if(Ie.v[Re][0]!==ze.v[Re][0]||Ie.v[Re][1]!==ze.v[Re][1]||Ie.o[Re][0]!==ze.o[Re][0]||Ie.o[Re][1]!==ze.o[Re][1]||Ie.i[Re][0]!==ze.i[Re][0]||Ie.i[Re][1]!==ze.i[Re][1])return!1;return!0}function ue(Ie){ae(this.v,Ie)||(this.v=shapePool.clone(Ie),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function de(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var Ie;this.kf?Ie=this.pv:this.data.ks?Ie=this.data.ks.k:Ie=this.data.pt.k;var ze,Re=this.effectsSequence.length;for(ze=0;ze<Re;ze+=1)Ie=this.effectsSequence[ze](Ie);this.setVValue(Ie),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function oe(Ie,ze,Re){this.propType="shape",this.comp=Ie.comp,this.container=Ie,this.elem=Ie,this.data=ze,this.k=!1,this.kf=!1,this._mdf=!1;var Oe=Re===3?ze.pt.k:ze.ks.k;this.v=shapePool.clone(Oe),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=se,this.effectsSequence=[]}function me(Ie){this.effectsSequence.push(Ie),this.container.addDynamicProperty(this)}oe.prototype.interpolateShape=ee,oe.prototype.getValue=de,oe.prototype.setVValue=ue,oe.prototype.addEffect=me;function ve(Ie,ze,Re){this.propType="shape",this.comp=Ie.comp,this.elem=Ie,this.container=Ie,this.offsetTime=Ie.data.st,this.keyframes=Re===3?ze.pt.k:ze.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var Oe=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,Oe),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=te,this.reset=se,this._caching={lastFrame:te,lastIndex:0},this.effectsSequence=[ne.bind(this)]}ve.prototype.getValue=de,ve.prototype.interpolateShape=ee,ve.prototype.setVValue=ue,ve.prototype.addEffect=me;var Ee=function(){var Ie=roundCorner;function ze(Re,Oe){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=Oe.d,this.elem=Re,this.comp=Re.comp,this.frameId=-1,this.initDynamicPropertyContainer(Re),this.p=PropertyFactory.getProp(Re,Oe.p,1,0,this),this.s=PropertyFactory.getProp(Re,Oe.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return ze.prototype={reset:se,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var Oe=this.p.v[0],qe=this.p.v[1],Ze=this.s.v[0]/2,Ue=this.s.v[1]/2,Ye=this.d!==3,ct=this.v;ct.v[0][0]=Oe,ct.v[0][1]=qe-Ue,ct.v[1][0]=Ye?Oe+Ze:Oe-Ze,ct.v[1][1]=qe,ct.v[2][0]=Oe,ct.v[2][1]=qe+Ue,ct.v[3][0]=Ye?Oe-Ze:Oe+Ze,ct.v[3][1]=qe,ct.i[0][0]=Ye?Oe-Ze*Ie:Oe+Ze*Ie,ct.i[0][1]=qe-Ue,ct.i[1][0]=Ye?Oe+Ze:Oe-Ze,ct.i[1][1]=qe-Ue*Ie,ct.i[2][0]=Ye?Oe+Ze*Ie:Oe-Ze*Ie,ct.i[2][1]=qe+Ue,ct.i[3][0]=Ye?Oe-Ze:Oe+Ze,ct.i[3][1]=qe+Ue*Ie,ct.o[0][0]=Ye?Oe+Ze*Ie:Oe-Ze*Ie,ct.o[0][1]=qe-Ue,ct.o[1][0]=Ye?Oe+Ze:Oe-Ze,ct.o[1][1]=qe+Ue*Ie,ct.o[2][0]=Ye?Oe-Ze*Ie:Oe+Ze*Ie,ct.o[2][1]=qe+Ue,ct.o[3][0]=Ye?Oe-Ze:Oe+Ze,ct.o[3][1]=qe-Ue*Ie}},extendPrototype([DynamicPropertyContainer],ze),ze}(),Pe=function(){function Ie(ze,Re){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=ze,this.comp=ze.comp,this.data=Re,this.frameId=-1,this.d=Re.d,this.initDynamicPropertyContainer(ze),Re.sy===1?(this.ir=PropertyFactory.getProp(ze,Re.ir,0,0,this),this.is=PropertyFactory.getProp(ze,Re.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(ze,Re.pt,0,0,this),this.p=PropertyFactory.getProp(ze,Re.p,1,0,this),this.r=PropertyFactory.getProp(ze,Re.r,0,degToRads,this),this.or=PropertyFactory.getProp(ze,Re.or,0,0,this),this.os=PropertyFactory.getProp(ze,Re.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return Ie.prototype={reset:se,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var Re=Math.floor(this.pt.v)*2,Oe=Math.PI*2/Re,qe=!0,Ze=this.or.v,Ue=this.ir.v,Ye=this.os.v,ct=this.is.v,at=2*Math.PI*Ze/(Re*2),ft=2*Math.PI*Ue/(Re*2),pt,Mt,At,_t,Qe=-Math.PI/2;Qe+=this.r.v;var it=this.data.d===3?-1:1;for(this.v._length=0,pt=0;pt<Re;pt+=1){Mt=qe?Ze:Ue,At=qe?Ye:ct,_t=qe?at:ft;var Ge=Mt*Math.cos(Qe),je=Mt*Math.sin(Qe),Ke=Ge===0&&je===0?0:je/Math.sqrt(Ge*Ge+je*je),lt=Ge===0&&je===0?0:-Ge/Math.sqrt(Ge*Ge+je*je);Ge+=+this.p.v[0],je+=+this.p.v[1],this.v.setTripleAt(Ge,je,Ge-Ke*_t*At*it,je-lt*_t*At*it,Ge+Ke*_t*At*it,je+lt*_t*At*it,pt,!0),qe=!qe,Qe+=Oe*it}},convertPolygonToPath:function(){var Re=Math.floor(this.pt.v),Oe=Math.PI*2/Re,qe=this.or.v,Ze=this.os.v,Ue=2*Math.PI*qe/(Re*4),Ye,ct=-Math.PI*.5,at=this.data.d===3?-1:1;for(ct+=this.r.v,this.v._length=0,Ye=0;Ye<Re;Ye+=1){var ft=qe*Math.cos(ct),pt=qe*Math.sin(ct),Mt=ft===0&&pt===0?0:pt/Math.sqrt(ft*ft+pt*pt),At=ft===0&&pt===0?0:-ft/Math.sqrt(ft*ft+pt*pt);ft+=+this.p.v[0],pt+=+this.p.v[1],this.v.setTripleAt(ft,pt,ft-Mt*Ue*Ze*at,pt-At*Ue*Ze*at,ft+Mt*Ue*Ze*at,pt+At*Ue*Ze*at,Ye,!0),ct+=Oe*at}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],Ie),Ie}(),ye=function(){function Ie(ze,Re){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=ze,this.comp=ze.comp,this.frameId=-1,this.d=Re.d,this.initDynamicPropertyContainer(ze),this.p=PropertyFactory.getProp(ze,Re.p,1,0,this),this.s=PropertyFactory.getProp(ze,Re.s,1,0,this),this.r=PropertyFactory.getProp(ze,Re.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return Ie.prototype={convertRectToPath:function(){var Re=this.p.v[0],Oe=this.p.v[1],qe=this.s.v[0]/2,Ze=this.s.v[1]/2,Ue=bmMin(qe,Ze,this.r.v),Ye=Ue*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(Re+qe,Oe-Ze+Ue,Re+qe,Oe-Ze+Ue,Re+qe,Oe-Ze+Ye,0,!0),this.v.setTripleAt(Re+qe,Oe+Ze-Ue,Re+qe,Oe+Ze-Ye,Re+qe,Oe+Ze-Ue,1,!0),Ue!==0?(this.v.setTripleAt(Re+qe-Ue,Oe+Ze,Re+qe-Ue,Oe+Ze,Re+qe-Ye,Oe+Ze,2,!0),this.v.setTripleAt(Re-qe+Ue,Oe+Ze,Re-qe+Ye,Oe+Ze,Re-qe+Ue,Oe+Ze,3,!0),this.v.setTripleAt(Re-qe,Oe+Ze-Ue,Re-qe,Oe+Ze-Ue,Re-qe,Oe+Ze-Ye,4,!0),this.v.setTripleAt(Re-qe,Oe-Ze+Ue,Re-qe,Oe-Ze+Ye,Re-qe,Oe-Ze+Ue,5,!0),this.v.setTripleAt(Re-qe+Ue,Oe-Ze,Re-qe+Ue,Oe-Ze,Re-qe+Ye,Oe-Ze,6,!0),this.v.setTripleAt(Re+qe-Ue,Oe-Ze,Re+qe-Ye,Oe-Ze,Re+qe-Ue,Oe-Ze,7,!0)):(this.v.setTripleAt(Re-qe,Oe+Ze,Re-qe+Ye,Oe+Ze,Re-qe,Oe+Ze,2),this.v.setTripleAt(Re-qe,Oe-Ze,Re-qe,Oe-Ze+Ye,Re-qe,Oe-Ze,3))):(this.v.setTripleAt(Re+qe,Oe-Ze+Ue,Re+qe,Oe-Ze+Ye,Re+qe,Oe-Ze+Ue,0,!0),Ue!==0?(this.v.setTripleAt(Re+qe-Ue,Oe-Ze,Re+qe-Ue,Oe-Ze,Re+qe-Ye,Oe-Ze,1,!0),this.v.setTripleAt(Re-qe+Ue,Oe-Ze,Re-qe+Ye,Oe-Ze,Re-qe+Ue,Oe-Ze,2,!0),this.v.setTripleAt(Re-qe,Oe-Ze+Ue,Re-qe,Oe-Ze+Ue,Re-qe,Oe-Ze+Ye,3,!0),this.v.setTripleAt(Re-qe,Oe+Ze-Ue,Re-qe,Oe+Ze-Ye,Re-qe,Oe+Ze-Ue,4,!0),this.v.setTripleAt(Re-qe+Ue,Oe+Ze,Re-qe+Ue,Oe+Ze,Re-qe+Ye,Oe+Ze,5,!0),this.v.setTripleAt(Re+qe-Ue,Oe+Ze,Re+qe-Ye,Oe+Ze,Re+qe-Ue,Oe+Ze,6,!0),this.v.setTripleAt(Re+qe,Oe+Ze-Ue,Re+qe,Oe+Ze-Ue,Re+qe,Oe+Ze-Ye,7,!0)):(this.v.setTripleAt(Re-qe,Oe-Ze,Re-qe+Ye,Oe-Ze,Re-qe,Oe-Ze,1,!0),this.v.setTripleAt(Re-qe,Oe+Ze,Re-qe,Oe+Ze-Ye,Re-qe,Oe+Ze,2,!0),this.v.setTripleAt(Re+qe,Oe+Ze,Re+qe-Ye,Oe+Ze,Re+qe,Oe+Ze,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:se},extendPrototype([DynamicPropertyContainer],Ie),Ie}();function Te(Ie,ze,Re){var Oe;if(Re===3||Re===4){var qe=Re===3?ze.pt:ze.ks,Ze=qe.k;Ze.length?Oe=new ve(Ie,ze,Re):Oe=new oe(Ie,ze,Re)}else Re===5?Oe=new ye(Ie,ze):Re===6?Oe=new Ee(Ie,ze):Re===7&&(Oe=new Pe(Ie,ze));return Oe.k&&Ie.addDynamicProperty(Oe),Oe}function Ae(){return oe}function Ce(){return ve}var De={};return De.getShapeProp=Te,De.getConstructorFunction=Ae,De.getKeyframedConstructorFunction=Ce,De}();/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */var Matrix=function(){var te=Math.cos,ee=Math.sin,ne=Math.tan,se=Math.round;function ae(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function ue(Ge){if(Ge===0)return this;var je=te(Ge),Ke=ee(Ge);return this._t(je,-Ke,0,0,Ke,je,0,0,0,0,1,0,0,0,0,1)}function de(Ge){if(Ge===0)return this;var je=te(Ge),Ke=ee(Ge);return this._t(1,0,0,0,0,je,-Ke,0,0,Ke,je,0,0,0,0,1)}function oe(Ge){if(Ge===0)return this;var je=te(Ge),Ke=ee(Ge);return this._t(je,0,Ke,0,0,1,0,0,-Ke,0,je,0,0,0,0,1)}function me(Ge){if(Ge===0)return this;var je=te(Ge),Ke=ee(Ge);return this._t(je,-Ke,0,0,Ke,je,0,0,0,0,1,0,0,0,0,1)}function ve(Ge,je){return this._t(1,je,Ge,1,0,0)}function Ee(Ge,je){return this.shear(ne(Ge),ne(je))}function Pe(Ge,je){var Ke=te(je),lt=ee(je);return this._t(Ke,lt,0,0,-lt,Ke,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,ne(Ge),1,0,0,0,0,1,0,0,0,0,1)._t(Ke,-lt,0,0,lt,Ke,0,0,0,0,1,0,0,0,0,1)}function ye(Ge,je,Ke){return!Ke&&Ke!==0&&(Ke=1),Ge===1&&je===1&&Ke===1?this:this._t(Ge,0,0,0,0,je,0,0,0,0,Ke,0,0,0,0,1)}function Te(Ge,je,Ke,lt,Bt,Xt,Gt,lr,yr,Lr,Nr,$r,Gr,Zr,Dr,dr){return this.props[0]=Ge,this.props[1]=je,this.props[2]=Ke,this.props[3]=lt,this.props[4]=Bt,this.props[5]=Xt,this.props[6]=Gt,this.props[7]=lr,this.props[8]=yr,this.props[9]=Lr,this.props[10]=Nr,this.props[11]=$r,this.props[12]=Gr,this.props[13]=Zr,this.props[14]=Dr,this.props[15]=dr,this}function Ae(Ge,je,Ke){return Ke=Ke||0,Ge!==0||je!==0||Ke!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,Ge,je,Ke,1):this}function Ce(Ge,je,Ke,lt,Bt,Xt,Gt,lr,yr,Lr,Nr,$r,Gr,Zr,Dr,dr){var fr=this.props;if(Ge===1&&je===0&&Ke===0&&lt===0&&Bt===0&&Xt===1&&Gt===0&&lr===0&&yr===0&&Lr===0&&Nr===1&&$r===0)return fr[12]=fr[12]*Ge+fr[15]*Gr,fr[13]=fr[13]*Xt+fr[15]*Zr,fr[14]=fr[14]*Nr+fr[15]*Dr,fr[15]*=dr,this._identityCalculated=!1,this;var qr=fr[0],li=fr[1],Jt=fr[2],gi=fr[3],ci=fr[4],hi=fr[5],ri=fr[6],Ci=fr[7],Ei=fr[8],Mi=fr[9],wi=fr[10],Ft=fr[11],er=fr[12],sr=fr[13],ir=fr[14],mt=fr[15];return fr[0]=qr*Ge+li*Bt+Jt*yr+gi*Gr,fr[1]=qr*je+li*Xt+Jt*Lr+gi*Zr,fr[2]=qr*Ke+li*Gt+Jt*Nr+gi*Dr,fr[3]=qr*lt+li*lr+Jt*$r+gi*dr,fr[4]=ci*Ge+hi*Bt+ri*yr+Ci*Gr,fr[5]=ci*je+hi*Xt+ri*Lr+Ci*Zr,fr[6]=ci*Ke+hi*Gt+ri*Nr+Ci*Dr,fr[7]=ci*lt+hi*lr+ri*$r+Ci*dr,fr[8]=Ei*Ge+Mi*Bt+wi*yr+Ft*Gr,fr[9]=Ei*je+Mi*Xt+wi*Lr+Ft*Zr,fr[10]=Ei*Ke+Mi*Gt+wi*Nr+Ft*Dr,fr[11]=Ei*lt+Mi*lr+wi*$r+Ft*dr,fr[12]=er*Ge+sr*Bt+ir*yr+mt*Gr,fr[13]=er*je+sr*Xt+ir*Lr+mt*Zr,fr[14]=er*Ke+sr*Gt+ir*Nr+mt*Dr,fr[15]=er*lt+sr*lr+ir*$r+mt*dr,this._identityCalculated=!1,this}function De(Ge){var je=Ge.props;return this.transform(je[0],je[1],je[2],je[3],je[4],je[5],je[6],je[7],je[8],je[9],je[10],je[11],je[12],je[13],je[14],je[15])}function Ie(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function ze(Ge){for(var je=0;je<16;){if(Ge.props[je]!==this.props[je])return!1;je+=1}return!0}function Re(Ge){var je;for(je=0;je<16;je+=1)Ge.props[je]=this.props[je];return Ge}function Oe(Ge){var je;for(je=0;je<16;je+=1)this.props[je]=Ge[je]}function qe(Ge,je,Ke){return{x:Ge*this.props[0]+je*this.props[4]+Ke*this.props[8]+this.props[12],y:Ge*this.props[1]+je*this.props[5]+Ke*this.props[9]+this.props[13],z:Ge*this.props[2]+je*this.props[6]+Ke*this.props[10]+this.props[14]}}function Ze(Ge,je,Ke){return Ge*this.props[0]+je*this.props[4]+Ke*this.props[8]+this.props[12]}function Ue(Ge,je,Ke){return Ge*this.props[1]+je*this.props[5]+Ke*this.props[9]+this.props[13]}function Ye(Ge,je,Ke){return Ge*this.props[2]+je*this.props[6]+Ke*this.props[10]+this.props[14]}function ct(){var Ge=this.props[0]*this.props[5]-this.props[1]*this.props[4],je=this.props[5]/Ge,Ke=-this.props[1]/Ge,lt=-this.props[4]/Ge,Bt=this.props[0]/Ge,Xt=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/Ge,Gt=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/Ge,lr=new Matrix;return lr.props[0]=je,lr.props[1]=Ke,lr.props[4]=lt,lr.props[5]=Bt,lr.props[12]=Xt,lr.props[13]=Gt,lr}function at(Ge){var je=this.getInverseMatrix();return je.applyToPointArray(Ge[0],Ge[1],Ge[2]||0)}function ft(Ge){var je,Ke=Ge.length,lt=[];for(je=0;je<Ke;je+=1)lt[je]=at(Ge[je]);return lt}function pt(Ge,je,Ke){var lt=createTypedArray("float32",6);if(this.isIdentity())lt[0]=Ge[0],lt[1]=Ge[1],lt[2]=je[0],lt[3]=je[1],lt[4]=Ke[0],lt[5]=Ke[1];else{var Bt=this.props[0],Xt=this.props[1],Gt=this.props[4],lr=this.props[5],yr=this.props[12],Lr=this.props[13];lt[0]=Ge[0]*Bt+Ge[1]*Gt+yr,lt[1]=Ge[0]*Xt+Ge[1]*lr+Lr,lt[2]=je[0]*Bt+je[1]*Gt+yr,lt[3]=je[0]*Xt+je[1]*lr+Lr,lt[4]=Ke[0]*Bt+Ke[1]*Gt+yr,lt[5]=Ke[0]*Xt+Ke[1]*lr+Lr}return lt}function Mt(Ge,je,Ke){var lt;return this.isIdentity()?lt=[Ge,je,Ke]:lt=[Ge*this.props[0]+je*this.props[4]+Ke*this.props[8]+this.props[12],Ge*this.props[1]+je*this.props[5]+Ke*this.props[9]+this.props[13],Ge*this.props[2]+je*this.props[6]+Ke*this.props[10]+this.props[14]],lt}function At(Ge,je){if(this.isIdentity())return Ge+","+je;var Ke=this.props;return Math.round((Ge*Ke[0]+je*Ke[4]+Ke[12])*100)/100+","+Math.round((Ge*Ke[1]+je*Ke[5]+Ke[13])*100)/100}function _t(){for(var Ge=0,je=this.props,Ke="matrix3d(",lt=1e4;Ge<16;)Ke+=se(je[Ge]*lt)/lt,Ke+=Ge===15?")":",",Ge+=1;return Ke}function Qe(Ge){var je=1e4;return Ge<1e-6&&Ge>0||Ge>-1e-6&&Ge<0?se(Ge*je)/je:Ge}function it(){var Ge=this.props,je=Qe(Ge[0]),Ke=Qe(Ge[1]),lt=Qe(Ge[4]),Bt=Qe(Ge[5]),Xt=Qe(Ge[12]),Gt=Qe(Ge[13]);return"matrix("+je+","+Ke+","+lt+","+Bt+","+Xt+","+Gt+")"}return function(){this.reset=ae,this.rotate=ue,this.rotateX=de,this.rotateY=oe,this.rotateZ=me,this.skew=Ee,this.skewFromAxis=Pe,this.shear=ve,this.scale=ye,this.setTransform=Te,this.translate=Ae,this.transform=Ce,this.multiply=De,this.applyToPoint=qe,this.applyToX=Ze,this.applyToY=Ue,this.applyToZ=Ye,this.applyToPointArray=Mt,this.applyToTriplePoints=pt,this.applyToPointStringified=At,this.toCSS=_t,this.to2dCSS=it,this.clone=Re,this.cloneFromProps=Oe,this.equals=ze,this.inversePoints=ft,this.inversePoint=at,this.getInverseMatrix=ct,this._t=this.transform,this.isIdentity=Ie,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(te){return _typeof$3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ee){return typeof ee}:function(ee){return ee&&typeof Symbol=="function"&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee},_typeof$3(te)}var lottie={};function setLocation(te){setLocationHref(te)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(te){setSubframeEnabled(te)}function setPrefix(te){setIdPrefix(te)}function loadAnimation(te){return animationManager.loadAnimation(te)}function setQuality(te){if(typeof te=="string")switch(te){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else!isNaN(te)&&te>1&&setDefaultCurveSegments(te)}function inBrowser(){return typeof navigator!="undefined"}function installPlugin(te,ee){te==="expressions"&&setExpressionsPlugin(ee)}function getFactory(te){switch(te){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.13.0";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(te){for(var ee=queryString.split("&"),ne=0;ne<ee.length;ne+=1){var se=ee[ne].split("=");if(decodeURIComponent(se[0])==te)return decodeURIComponent(se[1])}return null}var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch(te){}var ShapeModifiers=function(){var te={},ee={};te.registerModifier=ne,te.getModifier=se;function ne(ae,ue){ee[ae]||(ee[ae]=ue)}function se(ae,ue,de){return new ee[ae](ue,de)}return te}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(te){if(!this.closed){te.sh.container.addDynamicProperty(te.sh);var ee={shape:te.sh,data:te,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(ee),this.addShapeToModifier(ee),this._isAnimated&&te.setAsAnimated()}},ShapeModifier.prototype.init=function(te,ee){this.shapes=[],this.elem=te,this.initDynamicPropertyContainer(te),this.initModifierProperties(te,ee),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(te,ee){this.s=PropertyFactory.getProp(te,ee.s,0,.01,this),this.e=PropertyFactory.getProp(te,ee.e,0,.01,this),this.o=PropertyFactory.getProp(te,ee.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=ee.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(te){te.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(te,ee,ne,se,ae){var ue=[];ee<=1?ue.push({s:te,e:ee}):te>=1?ue.push({s:te-1,e:ee-1}):(ue.push({s:te,e:1}),ue.push({s:0,e:ee-1}));var de=[],oe,me=ue.length,ve;for(oe=0;oe<me;oe+=1)if(ve=ue[oe],!(ve.e*ae<se||ve.s*ae>se+ne)){var Ee,Pe;ve.s*ae<=se?Ee=0:Ee=(ve.s*ae-se)/ne,ve.e*ae>=se+ne?Pe=1:Pe=(ve.e*ae-se)/ne,de.push([Ee,Pe])}return de.length||de.push([0,0]),de},TrimModifier.prototype.releasePathsData=function(te){var ee,ne=te.length;for(ee=0;ee<ne;ee+=1)segmentsLengthPool.release(te[ee]);return te.length=0,te},TrimModifier.prototype.processShapes=function(te){var ee,ne;if(this._mdf||te){var se=this.o.v%360/360;if(se<0&&(se+=1),this.s.v>1?ee=1+se:this.s.v<0?ee=0+se:ee=this.s.v+se,this.e.v>1?ne=1+se:this.e.v<0?ne=0+se:ne=this.e.v+se,ee>ne){var ae=ee;ee=ne,ne=ae}ee=Math.round(ee*1e4)*1e-4,ne=Math.round(ne*1e4)*1e-4,this.sValue=ee,this.eValue=ne}else ee=this.sValue,ne=this.eValue;var ue,de,oe=this.shapes.length,me,ve,Ee,Pe,ye,Te=0;if(ne===ee)for(de=0;de<oe;de+=1)this.shapes[de].localShapeCollection.releaseShapes(),this.shapes[de].shape._mdf=!0,this.shapes[de].shape.paths=this.shapes[de].localShapeCollection,this._mdf&&(this.shapes[de].pathsData.length=0);else if(ne===1&&ee===0||ne===0&&ee===1){if(this._mdf)for(de=0;de<oe;de+=1)this.shapes[de].pathsData.length=0,this.shapes[de].shape._mdf=!0}else{var Ae=[],Ce,De;for(de=0;de<oe;de+=1)if(Ce=this.shapes[de],!Ce.shape._mdf&&!this._mdf&&!te&&this.m!==2)Ce.shape.paths=Ce.localShapeCollection;else{if(ue=Ce.shape.paths,ve=ue._length,ye=0,!Ce.shape._mdf&&Ce.pathsData.length)ye=Ce.totalShapeLength;else{for(Ee=this.releasePathsData(Ce.pathsData),me=0;me<ve;me+=1)Pe=bez.getSegmentsLength(ue.shapes[me]),Ee.push(Pe),ye+=Pe.totalLength;Ce.totalShapeLength=ye,Ce.pathsData=Ee}Te+=ye,Ce.shape._mdf=!0}var Ie=ee,ze=ne,Re=0,Oe;for(de=oe-1;de>=0;de-=1)if(Ce=this.shapes[de],Ce.shape._mdf){for(De=Ce.localShapeCollection,De.releaseShapes(),this.m===2&&oe>1?(Oe=this.calculateShapeEdges(ee,ne,Ce.totalShapeLength,Re,Te),Re+=Ce.totalShapeLength):Oe=[[Ie,ze]],ve=Oe.length,me=0;me<ve;me+=1){Ie=Oe[me][0],ze=Oe[me][1],Ae.length=0,ze<=1?Ae.push({s:Ce.totalShapeLength*Ie,e:Ce.totalShapeLength*ze}):Ie>=1?Ae.push({s:Ce.totalShapeLength*(Ie-1),e:Ce.totalShapeLength*(ze-1)}):(Ae.push({s:Ce.totalShapeLength*Ie,e:Ce.totalShapeLength}),Ae.push({s:0,e:Ce.totalShapeLength*(ze-1)}));var qe=this.addShapes(Ce,Ae[0]);if(Ae[0].s!==Ae[0].e){if(Ae.length>1){var Ze=Ce.shape.paths.shapes[Ce.shape.paths._length-1];if(Ze.c){var Ue=qe.pop();this.addPaths(qe,De),qe=this.addShapes(Ce,Ae[1],Ue)}else this.addPaths(qe,De),qe=this.addShapes(Ce,Ae[1])}this.addPaths(qe,De)}}Ce.shape.paths=De}}},TrimModifier.prototype.addPaths=function(te,ee){var ne,se=te.length;for(ne=0;ne<se;ne+=1)ee.addShape(te[ne])},TrimModifier.prototype.addSegment=function(te,ee,ne,se,ae,ue,de){ae.setXYAt(ee[0],ee[1],"o",ue),ae.setXYAt(ne[0],ne[1],"i",ue+1),de&&ae.setXYAt(te[0],te[1],"v",ue),ae.setXYAt(se[0],se[1],"v",ue+1)},TrimModifier.prototype.addSegmentFromArray=function(te,ee,ne,se){ee.setXYAt(te[1],te[5],"o",ne),ee.setXYAt(te[2],te[6],"i",ne+1),se&&ee.setXYAt(te[0],te[4],"v",ne),ee.setXYAt(te[3],te[7],"v",ne+1)},TrimModifier.prototype.addShapes=function(te,ee,ne){var se=te.pathsData,ae=te.shape.paths.shapes,ue,de=te.shape.paths._length,oe,me,ve=0,Ee,Pe,ye,Te,Ae=[],Ce,De=!0;for(ne?(Pe=ne._length,Ce=ne._length):(ne=shapePool.newElement(),Pe=0,Ce=0),Ae.push(ne),ue=0;ue<de;ue+=1){for(ye=se[ue].lengths,ne.c=ae[ue].c,me=ae[ue].c?ye.length:ye.length+1,oe=1;oe<me;oe+=1)if(Ee=ye[oe-1],ve+Ee.addedLength<ee.s)ve+=Ee.addedLength,ne.c=!1;else if(ve>ee.e){ne.c=!1;break}else ee.s<=ve&&ee.e>=ve+Ee.addedLength?(this.addSegment(ae[ue].v[oe-1],ae[ue].o[oe-1],ae[ue].i[oe],ae[ue].v[oe],ne,Pe,De),De=!1):(Te=bez.getNewSegment(ae[ue].v[oe-1],ae[ue].v[oe],ae[ue].o[oe-1],ae[ue].i[oe],(ee.s-ve)/Ee.addedLength,(ee.e-ve)/Ee.addedLength,ye[oe-1]),this.addSegmentFromArray(Te,ne,Pe,De),De=!1,ne.c=!1),ve+=Ee.addedLength,Pe+=1;if(ae[ue].c&&ye.length){if(Ee=ye[oe-1],ve<=ee.e){var Ie=ye[oe-1].addedLength;ee.s<=ve&&ee.e>=ve+Ie?(this.addSegment(ae[ue].v[oe-1],ae[ue].o[oe-1],ae[ue].i[0],ae[ue].v[0],ne,Pe,De),De=!1):(Te=bez.getNewSegment(ae[ue].v[oe-1],ae[ue].v[0],ae[ue].o[oe-1],ae[ue].i[0],(ee.s-ve)/Ie,(ee.e-ve)/Ie,ye[oe-1]),this.addSegmentFromArray(Te,ne,Pe,De),De=!1,ne.c=!1)}else ne.c=!1;ve+=Ee.addedLength,Pe+=1}if(ne._length&&(ne.setXYAt(ne.v[Ce][0],ne.v[Ce][1],"i",Ce),ne.setXYAt(ne.v[ne._length-1][0],ne.v[ne._length-1][1],"o",ne._length-1)),ve>ee.e)break;ue<de-1&&(ne=shapePool.newElement(),De=!0,Ae.push(ne),Pe=0)}return Ae};function PuckerAndBloatModifier(){}extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(te,ee){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(te,ee.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(te,ee){var ne=ee/100,se=[0,0],ae=te._length,ue=0;for(ue=0;ue<ae;ue+=1)se[0]+=te.v[ue][0],se[1]+=te.v[ue][1];se[0]/=ae,se[1]/=ae;var de=shapePool.newElement();de.c=te.c;var oe,me,ve,Ee,Pe,ye;for(ue=0;ue<ae;ue+=1)oe=te.v[ue][0]+(se[0]-te.v[ue][0])*ne,me=te.v[ue][1]+(se[1]-te.v[ue][1])*ne,ve=te.o[ue][0]+(se[0]-te.o[ue][0])*-ne,Ee=te.o[ue][1]+(se[1]-te.o[ue][1])*-ne,Pe=te.i[ue][0]+(se[0]-te.i[ue][0])*-ne,ye=te.i[ue][1]+(se[1]-te.i[ue][1])*-ne,de.setTripleAt(oe,me,ve,Ee,Pe,ye,ue);return de},PuckerAndBloatModifier.prototype.processShapes=function(te){var ee,ne,se=this.shapes.length,ae,ue,de=this.amount.v;if(de!==0){var oe,me;for(ne=0;ne<se;ne+=1){if(oe=this.shapes[ne],me=oe.localShapeCollection,!(!oe.shape._mdf&&!this._mdf&&!te))for(me.releaseShapes(),oe.shape._mdf=!0,ee=oe.shape.paths.shapes,ue=oe.shape.paths._length,ae=0;ae<ue;ae+=1)me.addShape(this.processPath(ee[ae],de));oe.shape.paths=oe.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var te=[0,0];function ee(me){var ve=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||ve,this.a&&me.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&me.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&me.skewFromAxis(-this.sk.v,this.sa.v),this.r?me.rotate(-this.r.v):me.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?me.translate(this.px.v,this.py.v,-this.pz.v):me.translate(this.px.v,this.py.v,0):me.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function ne(me){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||me){var ve;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var Ee,Pe;if(ve=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(Ee=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/ve,0),Pe=this.p.getValueAtTime(this.p.keyframes[0].t/ve,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(Ee=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/ve,0),Pe=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/ve,0)):(Ee=this.p.pv,Pe=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/ve,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){Ee=[],Pe=[];var ye=this.px,Te=this.py;ye._caching.lastFrame+ye.offsetTime<=ye.keyframes[0].t?(Ee[0]=ye.getValueAtTime((ye.keyframes[0].t+.01)/ve,0),Ee[1]=Te.getValueAtTime((Te.keyframes[0].t+.01)/ve,0),Pe[0]=ye.getValueAtTime(ye.keyframes[0].t/ve,0),Pe[1]=Te.getValueAtTime(Te.keyframes[0].t/ve,0)):ye._caching.lastFrame+ye.offsetTime>=ye.keyframes[ye.keyframes.length-1].t?(Ee[0]=ye.getValueAtTime(ye.keyframes[ye.keyframes.length-1].t/ve,0),Ee[1]=Te.getValueAtTime(Te.keyframes[Te.keyframes.length-1].t/ve,0),Pe[0]=ye.getValueAtTime((ye.keyframes[ye.keyframes.length-1].t-.01)/ve,0),Pe[1]=Te.getValueAtTime((Te.keyframes[Te.keyframes.length-1].t-.01)/ve,0)):(Ee=[ye.pv,Te.pv],Pe[0]=ye.getValueAtTime((ye._caching.lastFrame+ye.offsetTime-.01)/ve,ye.offsetTime),Pe[1]=Te.getValueAtTime((Te._caching.lastFrame+Te.offsetTime-.01)/ve,Te.offsetTime))}else Pe=te,Ee=Pe;this.v.rotate(-Math.atan2(Ee[1]-Pe[1],Ee[0]-Pe[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function se(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function ae(){}function ue(me){this._addDynamicProperty(me),this.elem.addDynamicProperty(me),this._isDirty=!0}function de(me,ve,Ee){if(this.elem=me,this.frameId=-1,this.propType="transform",this.data=ve,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(Ee||me),ve.p&&ve.p.s?(this.px=PropertyFactory.getProp(me,ve.p.x,0,0,this),this.py=PropertyFactory.getProp(me,ve.p.y,0,0,this),ve.p.z&&(this.pz=PropertyFactory.getProp(me,ve.p.z,0,0,this))):this.p=PropertyFactory.getProp(me,ve.p||{k:[0,0,0]},1,0,this),ve.rx){if(this.rx=PropertyFactory.getProp(me,ve.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(me,ve.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(me,ve.rz,0,degToRads,this),ve.or.k[0].ti){var Pe,ye=ve.or.k.length;for(Pe=0;Pe<ye;Pe+=1)ve.or.k[Pe].to=null,ve.or.k[Pe].ti=null}this.or=PropertyFactory.getProp(me,ve.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(me,ve.r||{k:0},0,degToRads,this);ve.sk&&(this.sk=PropertyFactory.getProp(me,ve.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(me,ve.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(me,ve.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(me,ve.s||{k:[100,100,100]},1,.01,this),ve.o?this.o=PropertyFactory.getProp(me,ve.o,0,.01,me):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}de.prototype={applyToMatrix:ee,getValue:ne,precalculateMatrix:se,autoOrient:ae},extendPrototype([DynamicPropertyContainer],de),de.prototype.addDynamicProperty=ue,de.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function oe(me,ve,Ee){return new de(me,ve,Ee)}return{getTransformProperty:oe}}();function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(te,ee){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(te,ee.c,0,null,this),this.o=PropertyFactory.getProp(te,ee.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(te,ee.tr,this),this.so=PropertyFactory.getProp(te,ee.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(te,ee.tr.eo,0,.01,this),this.data=ee,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(te,ee,ne,se,ae,ue){var de=ue?-1:1,oe=se.s.v[0]+(1-se.s.v[0])*(1-ae),me=se.s.v[1]+(1-se.s.v[1])*(1-ae);te.translate(se.p.v[0]*de*ae,se.p.v[1]*de*ae,se.p.v[2]),ee.translate(-se.a.v[0],-se.a.v[1],se.a.v[2]),ee.rotate(-se.r.v*de*ae),ee.translate(se.a.v[0],se.a.v[1],se.a.v[2]),ne.translate(-se.a.v[0],-se.a.v[1],se.a.v[2]),ne.scale(ue?1/oe:oe,ue?1/me:me),ne.translate(se.a.v[0],se.a.v[1],se.a.v[2])},RepeaterModifier.prototype.init=function(te,ee,ne,se){for(this.elem=te,this.arr=ee,this.pos=ne,this.elemsData=se,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(te),this.initModifierProperties(te,ee[ne]);ne>0;)ne-=1,this._elements.unshift(ee[ne]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(te){var ee,ne=te.length;for(ee=0;ee<ne;ee+=1)te[ee]._processed=!1,te[ee].ty==="gr"&&this.resetElements(te[ee].it)},RepeaterModifier.prototype.cloneElements=function(te){var ee=JSON.parse(JSON.stringify(te));return this.resetElements(ee),ee},RepeaterModifier.prototype.changeGroupRender=function(te,ee){var ne,se=te.length;for(ne=0;ne<se;ne+=1)te[ne]._render=ee,te[ne].ty==="gr"&&this.changeGroupRender(te[ne].it,ee)},RepeaterModifier.prototype.processShapes=function(te){var ee,ne,se,ae,ue,de=!1;if(this._mdf||te){var oe=Math.ceil(this.c.v);if(this._groups.length<oe){for(;this._groups.length<oe;){var me={it:this.cloneElements(this._elements),ty:"gr"};me.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,me),this._groups.splice(0,0,me),this._currentCopies+=1}this.elem.reloadShapes(),de=!0}ue=0;var ve;for(se=0;se<=this._groups.length-1;se+=1){if(ve=ue<oe,this._groups[se]._render=ve,this.changeGroupRender(this._groups[se].it,ve),!ve){var Ee=this.elemsData[se].it,Pe=Ee[Ee.length-1];Pe.transform.op.v!==0?(Pe.transform.op._mdf=!0,Pe.transform.op.v=0):Pe.transform.op._mdf=!1}ue+=1}this._currentCopies=oe;var ye=this.o.v,Te=ye%1,Ae=ye>0?Math.floor(ye):Math.ceil(ye),Ce=this.pMatrix.props,De=this.rMatrix.props,Ie=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var ze=0;if(ye>0){for(;ze<Ae;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),ze+=1;Te&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,Te,!1),ze+=Te)}else if(ye<0){for(;ze>Ae;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),ze-=1;Te&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-Te,!0),ze-=Te)}se=this.data.m===1?0:this._currentCopies-1,ae=this.data.m===1?1:-1,ue=this._currentCopies;for(var Re,Oe;ue;){if(ee=this.elemsData[se].it,ne=ee[ee.length-1].transform.mProps.v.props,Oe=ne.length,ee[ee.length-1].transform.mProps._mdf=!0,ee[ee.length-1].transform.op._mdf=!0,ee[ee.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(se/(this._currentCopies-1)),ze!==0){for((se!==0&&ae===1||se!==this._currentCopies-1&&ae===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(De[0],De[1],De[2],De[3],De[4],De[5],De[6],De[7],De[8],De[9],De[10],De[11],De[12],De[13],De[14],De[15]),this.matrix.transform(Ie[0],Ie[1],Ie[2],Ie[3],Ie[4],Ie[5],Ie[6],Ie[7],Ie[8],Ie[9],Ie[10],Ie[11],Ie[12],Ie[13],Ie[14],Ie[15]),this.matrix.transform(Ce[0],Ce[1],Ce[2],Ce[3],Ce[4],Ce[5],Ce[6],Ce[7],Ce[8],Ce[9],Ce[10],Ce[11],Ce[12],Ce[13],Ce[14],Ce[15]),Re=0;Re<Oe;Re+=1)ne[Re]=this.matrix.props[Re];this.matrix.reset()}else for(this.matrix.reset(),Re=0;Re<Oe;Re+=1)ne[Re]=this.matrix.props[Re];ze+=1,ue-=1,se+=ae}}else for(ue=this._currentCopies,se=0,ae=1;ue;)ee=this.elemsData[se].it,ne=ee[ee.length-1].transform.mProps.v.props,ee[ee.length-1].transform.mProps._mdf=!1,ee[ee.length-1].transform.op._mdf=!1,ue-=1,se+=ae;return de},RepeaterModifier.prototype.addShape=function(){};function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(te,ee){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(te,ee.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(te,ee){var ne=shapePool.newElement();ne.c=te.c;var se,ae=te._length,ue,de,oe,me,ve,Ee,Pe=0,ye,Te,Ae,Ce,De,Ie;for(se=0;se<ae;se+=1)ue=te.v[se],oe=te.o[se],de=te.i[se],ue[0]===oe[0]&&ue[1]===oe[1]&&ue[0]===de[0]&&ue[1]===de[1]?(se===0||se===ae-1)&&!te.c?(ne.setTripleAt(ue[0],ue[1],oe[0],oe[1],de[0],de[1],Pe),Pe+=1):(se===0?me=te.v[ae-1]:me=te.v[se-1],ve=Math.sqrt(Math.pow(ue[0]-me[0],2)+Math.pow(ue[1]-me[1],2)),Ee=ve?Math.min(ve/2,ee)/ve:0,De=ue[0]+(me[0]-ue[0])*Ee,ye=De,Ie=ue[1]-(ue[1]-me[1])*Ee,Te=Ie,Ae=ye-(ye-ue[0])*roundCorner,Ce=Te-(Te-ue[1])*roundCorner,ne.setTripleAt(ye,Te,Ae,Ce,De,Ie,Pe),Pe+=1,se===ae-1?me=te.v[0]:me=te.v[se+1],ve=Math.sqrt(Math.pow(ue[0]-me[0],2)+Math.pow(ue[1]-me[1],2)),Ee=ve?Math.min(ve/2,ee)/ve:0,Ae=ue[0]+(me[0]-ue[0])*Ee,ye=Ae,Ce=ue[1]+(me[1]-ue[1])*Ee,Te=Ce,De=ye-(ye-ue[0])*roundCorner,Ie=Te-(Te-ue[1])*roundCorner,ne.setTripleAt(ye,Te,Ae,Ce,De,Ie,Pe),Pe+=1):(ne.setTripleAt(te.v[se][0],te.v[se][1],te.o[se][0],te.o[se][1],te.i[se][0],te.i[se][1],Pe),Pe+=1);return ne},RoundCornersModifier.prototype.processShapes=function(te){var ee,ne,se=this.shapes.length,ae,ue,de=this.rd.v;if(de!==0){var oe,me;for(ne=0;ne<se;ne+=1){if(oe=this.shapes[ne],me=oe.localShapeCollection,!(!oe.shape._mdf&&!this._mdf&&!te))for(me.releaseShapes(),oe.shape._mdf=!0,ee=oe.shape.paths.shapes,ue=oe.shape.paths._length,ae=0;ae<ue;ae+=1)me.addShape(this.processPath(ee[ae],de));oe.shape.paths=oe.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function floatEqual(te,ee){return Math.abs(te-ee)*1e5<=Math.min(Math.abs(te),Math.abs(ee))}function floatZero(te){return Math.abs(te)<=1e-5}function lerp(te,ee,ne){return te*(1-ne)+ee*ne}function lerpPoint(te,ee,ne){return[lerp(te[0],ee[0],ne),lerp(te[1],ee[1],ne)]}function quadRoots(te,ee,ne){if(te===0)return[];var se=ee*ee-4*te*ne;if(se<0)return[];var ae=-ee/(2*te);if(se===0)return[ae];var ue=Math.sqrt(se)/(2*te);return[ae-ue,ae+ue]}function polynomialCoefficients(te,ee,ne,se){return[-te+3*ee-3*ne+se,3*te-6*ee+3*ne,-3*te+3*ee,te]}function singlePoint(te){return new PolynomialBezier(te,te,te,te,!1)}function PolynomialBezier(te,ee,ne,se,ae){ae&&pointEqual(te,ee)&&(ee=lerpPoint(te,se,1/3)),ae&&pointEqual(ne,se)&&(ne=lerpPoint(te,se,2/3));var ue=polynomialCoefficients(te[0],ee[0],ne[0],se[0]),de=polynomialCoefficients(te[1],ee[1],ne[1],se[1]);this.a=[ue[0],de[0]],this.b=[ue[1],de[1]],this.c=[ue[2],de[2]],this.d=[ue[3],de[3]],this.points=[te,ee,ne,se]}PolynomialBezier.prototype.point=function(te){return[((this.a[0]*te+this.b[0])*te+this.c[0])*te+this.d[0],((this.a[1]*te+this.b[1])*te+this.c[1])*te+this.d[1]]},PolynomialBezier.prototype.derivative=function(te){return[(3*te*this.a[0]+2*this.b[0])*te+this.c[0],(3*te*this.a[1]+2*this.b[1])*te+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(te){var ee=this.derivative(te);return Math.atan2(ee[1],ee[0])},PolynomialBezier.prototype.normalAngle=function(te){var ee=this.derivative(te);return Math.atan2(ee[0],ee[1])},PolynomialBezier.prototype.inflectionPoints=function(){var te=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(te))return[];var ee=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/te,ne=ee*ee-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/te;if(ne<0)return[];var se=Math.sqrt(ne);return floatZero(se)?se>0&&se<1?[ee]:[]:[ee-se,ee+se].filter(function(ae){return ae>0&&ae<1})},PolynomialBezier.prototype.split=function(te){if(te<=0)return[singlePoint(this.points[0]),this];if(te>=1)return[this,singlePoint(this.points[this.points.length-1])];var ee=lerpPoint(this.points[0],this.points[1],te),ne=lerpPoint(this.points[1],this.points[2],te),se=lerpPoint(this.points[2],this.points[3],te),ae=lerpPoint(ee,ne,te),ue=lerpPoint(ne,se,te),de=lerpPoint(ae,ue,te);return[new PolynomialBezier(this.points[0],ee,ae,de,!0),new PolynomialBezier(de,ue,se,this.points[3],!0)]};function extrema(te,ee){var ne=te.points[0][ee],se=te.points[te.points.length-1][ee];if(ne>se){var ae=se;se=ne,ne=ae}for(var ue=quadRoots(3*te.a[ee],2*te.b[ee],te.c[ee]),de=0;de<ue.length;de+=1)if(ue[de]>0&&ue[de]<1){var oe=te.point(ue[de])[ee];oe<ne?ne=oe:oe>se&&(se=oe)}return{min:ne,max:se}}PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var te=this.bounds();return{left:te.x.min,right:te.x.max,top:te.y.min,bottom:te.y.max,width:te.x.max-te.x.min,height:te.y.max-te.y.min,cx:(te.x.max+te.x.min)/2,cy:(te.y.max+te.y.min)/2}};function intersectData(te,ee,ne){var se=te.boundingBox();return{cx:se.cx,cy:se.cy,width:se.width,height:se.height,bez:te,t:(ee+ne)/2,t1:ee,t2:ne}}function splitData(te){var ee=te.bez.split(.5);return[intersectData(ee[0],te.t1,te.t),intersectData(ee[1],te.t,te.t2)]}function boxIntersect(te,ee){return Math.abs(te.cx-ee.cx)*2<te.width+ee.width&&Math.abs(te.cy-ee.cy)*2<te.height+ee.height}function intersectsImpl(te,ee,ne,se,ae,ue){if(!!boxIntersect(te,ee)){if(ne>=ue||te.width<=se&&te.height<=se&&ee.width<=se&&ee.height<=se){ae.push([te.t,ee.t]);return}var de=splitData(te),oe=splitData(ee);intersectsImpl(de[0],oe[0],ne+1,se,ae,ue),intersectsImpl(de[0],oe[1],ne+1,se,ae,ue),intersectsImpl(de[1],oe[0],ne+1,se,ae,ue),intersectsImpl(de[1],oe[1],ne+1,se,ae,ue)}}PolynomialBezier.prototype.intersections=function(te,ee,ne){ee===void 0&&(ee=2),ne===void 0&&(ne=7);var se=[];return intersectsImpl(intersectData(this,0,1),intersectData(te,0,1),0,ee,se,ne),se},PolynomialBezier.shapeSegment=function(te,ee){var ne=(ee+1)%te.length();return new PolynomialBezier(te.v[ee],te.o[ee],te.i[ne],te.v[ne],!0)},PolynomialBezier.shapeSegmentInverted=function(te,ee){var ne=(ee+1)%te.length();return new PolynomialBezier(te.v[ne],te.i[ne],te.o[ee],te.v[ee],!0)};function crossProduct(te,ee){return[te[1]*ee[2]-te[2]*ee[1],te[2]*ee[0]-te[0]*ee[2],te[0]*ee[1]-te[1]*ee[0]]}function lineIntersection(te,ee,ne,se){var ae=[te[0],te[1],1],ue=[ee[0],ee[1],1],de=[ne[0],ne[1],1],oe=[se[0],se[1],1],me=crossProduct(crossProduct(ae,ue),crossProduct(de,oe));return floatZero(me[2])?null:[me[0]/me[2],me[1]/me[2]]}function polarOffset(te,ee,ne){return[te[0]+Math.cos(ee)*ne,te[1]-Math.sin(ee)*ne]}function pointDistance(te,ee){return Math.hypot(te[0]-ee[0],te[1]-ee[1])}function pointEqual(te,ee){return floatEqual(te[0],ee[0])&&floatEqual(te[1],ee[1])}function ZigZagModifier(){}extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(te,ee){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(te,ee.s,0,null,this),this.frequency=PropertyFactory.getProp(te,ee.r,0,null,this),this.pointsType=PropertyFactory.getProp(te,ee.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0};function setPoint(te,ee,ne,se,ae,ue,de){var oe=ne-Math.PI/2,me=ne+Math.PI/2,ve=ee[0]+Math.cos(ne)*se*ae,Ee=ee[1]-Math.sin(ne)*se*ae;te.setTripleAt(ve,Ee,ve+Math.cos(oe)*ue,Ee-Math.sin(oe)*ue,ve+Math.cos(me)*de,Ee-Math.sin(me)*de,te.length())}function getPerpendicularVector(te,ee){var ne=[ee[0]-te[0],ee[1]-te[1]],se=-Math.PI*.5,ae=[Math.cos(se)*ne[0]-Math.sin(se)*ne[1],Math.sin(se)*ne[0]+Math.cos(se)*ne[1]];return ae}function getProjectingAngle(te,ee){var ne=ee===0?te.length()-1:ee-1,se=(ee+1)%te.length(),ae=te.v[ne],ue=te.v[se],de=getPerpendicularVector(ae,ue);return Math.atan2(0,1)-Math.atan2(de[1],de[0])}function zigZagCorner(te,ee,ne,se,ae,ue,de){var oe=getProjectingAngle(ee,ne),me=ee.v[ne%ee._length],ve=ee.v[ne===0?ee._length-1:ne-1],Ee=ee.v[(ne+1)%ee._length],Pe=ue===2?Math.sqrt(Math.pow(me[0]-ve[0],2)+Math.pow(me[1]-ve[1],2)):0,ye=ue===2?Math.sqrt(Math.pow(me[0]-Ee[0],2)+Math.pow(me[1]-Ee[1],2)):0;setPoint(te,ee.v[ne%ee._length],oe,de,se,ye/((ae+1)*2),Pe/((ae+1)*2))}function zigZagSegment(te,ee,ne,se,ae,ue){for(var de=0;de<se;de+=1){var oe=(de+1)/(se+1),me=ae===2?Math.sqrt(Math.pow(ee.points[3][0]-ee.points[0][0],2)+Math.pow(ee.points[3][1]-ee.points[0][1],2)):0,ve=ee.normalAngle(oe),Ee=ee.point(oe);setPoint(te,Ee,ve,ue,ne,me/((se+1)*2),me/((se+1)*2)),ue=-ue}return ue}ZigZagModifier.prototype.processPath=function(te,ee,ne,se){var ae=te._length,ue=shapePool.newElement();if(ue.c=te.c,te.c||(ae-=1),ae===0)return ue;var de=-1,oe=PolynomialBezier.shapeSegment(te,0);zigZagCorner(ue,te,0,ee,ne,se,de);for(var me=0;me<ae;me+=1)de=zigZagSegment(ue,oe,ee,ne,se,-de),me===ae-1&&!te.c?oe=null:oe=PolynomialBezier.shapeSegment(te,(me+1)%ae),zigZagCorner(ue,te,me+1,ee,ne,se,de);return ue},ZigZagModifier.prototype.processShapes=function(te){var ee,ne,se=this.shapes.length,ae,ue,de=this.amplitude.v,oe=Math.max(0,Math.round(this.frequency.v)),me=this.pointsType.v;if(de!==0){var ve,Ee;for(ne=0;ne<se;ne+=1){if(ve=this.shapes[ne],Ee=ve.localShapeCollection,!(!ve.shape._mdf&&!this._mdf&&!te))for(Ee.releaseShapes(),ve.shape._mdf=!0,ee=ve.shape.paths.shapes,ue=ve.shape.paths._length,ae=0;ae<ue;ae+=1)Ee.addShape(this.processPath(ee[ae],de,oe,me));ve.shape.paths=ve.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function linearOffset(te,ee,ne){var se=Math.atan2(ee[0]-te[0],ee[1]-te[1]);return[polarOffset(te,se,ne),polarOffset(ee,se,ne)]}function offsetSegment(te,ee){var ne,se,ae,ue,de,oe,me;me=linearOffset(te.points[0],te.points[1],ee),ne=me[0],se=me[1],me=linearOffset(te.points[1],te.points[2],ee),ae=me[0],ue=me[1],me=linearOffset(te.points[2],te.points[3],ee),de=me[0],oe=me[1];var ve=lineIntersection(ne,se,ae,ue);ve===null&&(ve=se);var Ee=lineIntersection(de,oe,ae,ue);return Ee===null&&(Ee=de),new PolynomialBezier(ne,ve,Ee,oe)}function joinLines(te,ee,ne,se,ae){var ue=ee.points[3],de=ne.points[0];if(se===3||pointEqual(ue,de))return ue;if(se===2){var oe=-ee.tangentAngle(1),me=-ne.tangentAngle(0)+Math.PI,ve=lineIntersection(ue,polarOffset(ue,oe+Math.PI/2,100),de,polarOffset(de,oe+Math.PI/2,100)),Ee=ve?pointDistance(ve,ue):pointDistance(ue,de)/2,Pe=polarOffset(ue,oe,2*Ee*roundCorner);return te.setXYAt(Pe[0],Pe[1],"o",te.length()-1),Pe=polarOffset(de,me,2*Ee*roundCorner),te.setTripleAt(de[0],de[1],de[0],de[1],Pe[0],Pe[1],te.length()),de}var ye=pointEqual(ue,ee.points[2])?ee.points[0]:ee.points[2],Te=pointEqual(de,ne.points[1])?ne.points[3]:ne.points[1],Ae=lineIntersection(ye,ue,de,Te);return Ae&&pointDistance(Ae,ue)<ae?(te.setTripleAt(Ae[0],Ae[1],Ae[0],Ae[1],Ae[0],Ae[1],te.length()),Ae):ue}function getIntersection(te,ee){var ne=te.intersections(ee);return ne.length&&floatEqual(ne[0][0],1)&&ne.shift(),ne.length?ne[0]:null}function pruneSegmentIntersection(te,ee){var ne=te.slice(),se=ee.slice(),ae=getIntersection(te[te.length-1],ee[0]);return ae&&(ne[te.length-1]=te[te.length-1].split(ae[0])[0],se[0]=ee[0].split(ae[1])[1]),te.length>1&&ee.length>1&&(ae=getIntersection(te[0],ee[ee.length-1]),ae)?[[te[0].split(ae[0])[0]],[ee[ee.length-1].split(ae[1])[1]]]:[ne,se]}function pruneIntersections(te){for(var ee,ne=1;ne<te.length;ne+=1)ee=pruneSegmentIntersection(te[ne-1],te[ne]),te[ne-1]=ee[0],te[ne]=ee[1];return te.length>1&&(ee=pruneSegmentIntersection(te[te.length-1],te[0]),te[te.length-1]=ee[0],te[0]=ee[1]),te}function offsetSegmentSplit(te,ee){var ne=te.inflectionPoints(),se,ae,ue,de;if(ne.length===0)return[offsetSegment(te,ee)];if(ne.length===1||floatEqual(ne[1],1))return ue=te.split(ne[0]),se=ue[0],ae=ue[1],[offsetSegment(se,ee),offsetSegment(ae,ee)];ue=te.split(ne[0]),se=ue[0];var oe=(ne[1]-ne[0])/(1-ne[0]);return ue=ue[1].split(oe),de=ue[0],ae=ue[1],[offsetSegment(se,ee),offsetSegment(de,ee),offsetSegment(ae,ee)]}function OffsetPathModifier(){}extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(te,ee){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(te,ee.a,0,null,this),this.miterLimit=PropertyFactory.getProp(te,ee.ml,0,null,this),this.lineJoin=ee.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(te,ee,ne,se){var ae=shapePool.newElement();ae.c=te.c;var ue=te.length();te.c||(ue-=1);var de,oe,me,ve=[];for(de=0;de<ue;de+=1)me=PolynomialBezier.shapeSegment(te,de),ve.push(offsetSegmentSplit(me,ee));if(!te.c)for(de=ue-1;de>=0;de-=1)me=PolynomialBezier.shapeSegmentInverted(te,de),ve.push(offsetSegmentSplit(me,ee));ve=pruneIntersections(ve);var Ee=null,Pe=null;for(de=0;de<ve.length;de+=1){var ye=ve[de];for(Pe&&(Ee=joinLines(ae,Pe,ye[0],ne,se)),Pe=ye[ye.length-1],oe=0;oe<ye.length;oe+=1)me=ye[oe],Ee&&pointEqual(me.points[0],Ee)?ae.setXYAt(me.points[1][0],me.points[1][1],"o",ae.length()-1):ae.setTripleAt(me.points[0][0],me.points[0][1],me.points[1][0],me.points[1][1],me.points[0][0],me.points[0][1],ae.length()),ae.setTripleAt(me.points[3][0],me.points[3][1],me.points[3][0],me.points[3][1],me.points[2][0],me.points[2][1],ae.length()),Ee=me.points[3]}return ve.length&&joinLines(ae,Pe,ve[0][0],ne,se),ae},OffsetPathModifier.prototype.processShapes=function(te){var ee,ne,se=this.shapes.length,ae,ue,de=this.amount.v,oe=this.miterLimit.v,me=this.lineJoin;if(de!==0){var ve,Ee;for(ne=0;ne<se;ne+=1){if(ve=this.shapes[ne],Ee=ve.localShapeCollection,!(!ve.shape._mdf&&!this._mdf&&!te))for(Ee.releaseShapes(),ve.shape._mdf=!0,ee=ve.shape.paths.shapes,ue=ve.shape.paths._length,ae=0;ae<ue;ae+=1)Ee.addShape(this.processPath(ee[ae],de,me,oe));ve.shape.paths=ve.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function getFontProperties(te){for(var ee=te.fStyle?te.fStyle.split(" "):[],ne="normal",se="normal",ae=ee.length,ue,de=0;de<ae;de+=1)switch(ue=ee[de].toLowerCase(),ue){case"italic":se="italic";break;case"bold":ne="700";break;case"black":ne="900";break;case"medium":ne="500";break;case"regular":case"normal":ne="400";break;case"light":case"thin":ne="200";break}return{style:se,weight:te.fWeight||ne}}var FontManager=function(){var te=5e3,ee={w:0,size:0,shapes:[],data:{shapes:[]}},ne=[];ne=ne.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var se=127988,ae=917631,ue=917601,de=917626,oe=65039,me=8205,ve=127462,Ee=127487,Pe=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function ye(Qe){var it=Qe.split(","),Ge,je=it.length,Ke=[];for(Ge=0;Ge<je;Ge+=1)it[Ge]!=="sans-serif"&&it[Ge]!=="monospace"&&Ke.push(it[Ge]);return Ke.join(",")}function Te(Qe,it){var Ge=createTag("span");Ge.setAttribute("aria-hidden",!0),Ge.style.fontFamily=it;var je=createTag("span");je.innerText="giItT1WQy@!-/#",Ge.style.position="absolute",Ge.style.left="-10000px",Ge.style.top="-10000px",Ge.style.fontSize="300px",Ge.style.fontVariant="normal",Ge.style.fontStyle="normal",Ge.style.fontWeight="normal",Ge.style.letterSpacing="0",Ge.appendChild(je),document.body.appendChild(Ge);var Ke=je.offsetWidth;return je.style.fontFamily=ye(Qe)+", "+it,{node:je,w:Ke,parent:Ge}}function Ae(){var Qe,it=this.fonts.length,Ge,je,Ke=it;for(Qe=0;Qe<it;Qe+=1)this.fonts[Qe].loaded?Ke-=1:this.fonts[Qe].fOrigin==="n"||this.fonts[Qe].origin===0?this.fonts[Qe].loaded=!0:(Ge=this.fonts[Qe].monoCase.node,je=this.fonts[Qe].monoCase.w,Ge.offsetWidth!==je?(Ke-=1,this.fonts[Qe].loaded=!0):(Ge=this.fonts[Qe].sansCase.node,je=this.fonts[Qe].sansCase.w,Ge.offsetWidth!==je&&(Ke-=1,this.fonts[Qe].loaded=!0)),this.fonts[Qe].loaded&&(this.fonts[Qe].sansCase.parent.parentNode.removeChild(this.fonts[Qe].sansCase.parent),this.fonts[Qe].monoCase.parent.parentNode.removeChild(this.fonts[Qe].monoCase.parent)));Ke!==0&&Date.now()-this.initTime<te?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function Ce(Qe,it){var Ge=document.body&&it?"svg":"canvas",je,Ke=getFontProperties(Qe);if(Ge==="svg"){var lt=createNS("text");lt.style.fontSize="100px",lt.setAttribute("font-family",Qe.fFamily),lt.setAttribute("font-style",Ke.style),lt.setAttribute("font-weight",Ke.weight),lt.textContent="1",Qe.fClass?(lt.style.fontFamily="inherit",lt.setAttribute("class",Qe.fClass)):lt.style.fontFamily=Qe.fFamily,it.appendChild(lt),je=lt}else{var Bt=new OffscreenCanvas(500,500).getContext("2d");Bt.font=Ke.style+" "+Ke.weight+" 100px "+Qe.fFamily,je=Bt}function Xt(Gt){return Ge==="svg"?(je.textContent=Gt,je.getComputedTextLength()):je.measureText(Gt).width}return{measureText:Xt}}function De(Qe,it){if(!Qe){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=Qe.list;return}if(!document.body){this.isLoaded=!0,Qe.list.forEach(function(Nr){Nr.helper=Ce(Nr),Nr.cache={}}),this.fonts=Qe.list;return}var Ge=Qe.list,je,Ke=Ge.length,lt=Ke;for(je=0;je<Ke;je+=1){var Bt=!0,Xt,Gt;if(Ge[je].loaded=!1,Ge[je].monoCase=Te(Ge[je].fFamily,"monospace"),Ge[je].sansCase=Te(Ge[je].fFamily,"sans-serif"),!Ge[je].fPath)Ge[je].loaded=!0,lt-=1;else if(Ge[je].fOrigin==="p"||Ge[je].origin===3){if(Xt=document.querySelectorAll('style[f-forigin="p"][f-family="'+Ge[je].fFamily+'"], style[f-origin="3"][f-family="'+Ge[je].fFamily+'"]'),Xt.length>0&&(Bt=!1),Bt){var lr=createTag("style");lr.setAttribute("f-forigin",Ge[je].fOrigin),lr.setAttribute("f-origin",Ge[je].origin),lr.setAttribute("f-family",Ge[je].fFamily),lr.type="text/css",lr.innerText="@font-face {font-family: "+Ge[je].fFamily+"; font-style: normal; src: url('"+Ge[je].fPath+"');}",it.appendChild(lr)}}else if(Ge[je].fOrigin==="g"||Ge[je].origin===1){for(Xt=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),Gt=0;Gt<Xt.length;Gt+=1)Xt[Gt].href.indexOf(Ge[je].fPath)!==-1&&(Bt=!1);if(Bt){var yr=createTag("link");yr.setAttribute("f-forigin",Ge[je].fOrigin),yr.setAttribute("f-origin",Ge[je].origin),yr.type="text/css",yr.rel="stylesheet",yr.href=Ge[je].fPath,document.body.appendChild(yr)}}else if(Ge[je].fOrigin==="t"||Ge[je].origin===2){for(Xt=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),Gt=0;Gt<Xt.length;Gt+=1)Ge[je].fPath===Xt[Gt].src&&(Bt=!1);if(Bt){var Lr=createTag("link");Lr.setAttribute("f-forigin",Ge[je].fOrigin),Lr.setAttribute("f-origin",Ge[je].origin),Lr.setAttribute("rel","stylesheet"),Lr.setAttribute("href",Ge[je].fPath),it.appendChild(Lr)}}Ge[je].helper=Ce(Ge[je],it),Ge[je].cache={},this.fonts.push(Ge[je])}lt===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function Ie(Qe){if(!!Qe){this.chars||(this.chars=[]);var it,Ge=Qe.length,je,Ke=this.chars.length,lt;for(it=0;it<Ge;it+=1){for(je=0,lt=!1;je<Ke;)this.chars[je].style===Qe[it].style&&this.chars[je].fFamily===Qe[it].fFamily&&this.chars[je].ch===Qe[it].ch&&(lt=!0),je+=1;lt||(this.chars.push(Qe[it]),Ke+=1)}}}function ze(Qe,it,Ge){for(var je=0,Ke=this.chars.length;je<Ke;){if(this.chars[je].ch===Qe&&this.chars[je].style===it&&this.chars[je].fFamily===Ge)return this.chars[je];je+=1}return(typeof Qe=="string"&&Qe.charCodeAt(0)!==13||!Qe)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",Qe,it,Ge)),ee}function Re(Qe,it,Ge){var je=this.getFontByName(it),Ke=Qe;if(!je.cache[Ke]){var lt=je.helper;if(Qe===" "){var Bt=lt.measureText("|"+Qe+"|"),Xt=lt.measureText("||");je.cache[Ke]=(Bt-Xt)/100}else je.cache[Ke]=lt.measureText(Qe)/100}return je.cache[Ke]*Ge}function Oe(Qe){for(var it=0,Ge=this.fonts.length;it<Ge;){if(this.fonts[it].fName===Qe)return this.fonts[it];it+=1}return this.fonts[0]}function qe(Qe){var it=0,Ge=Qe.charCodeAt(0);if(Ge>=55296&&Ge<=56319){var je=Qe.charCodeAt(1);je>=56320&&je<=57343&&(it=(Ge-55296)*1024+je-56320+65536)}return it}function Ze(Qe,it){var Ge=Qe.toString(16)+it.toString(16);return Pe.indexOf(Ge)!==-1}function Ue(Qe){return Qe===me}function Ye(Qe){return Qe===oe}function ct(Qe){var it=qe(Qe);return it>=ve&&it<=Ee}function at(Qe){return ct(Qe.substr(0,2))&&ct(Qe.substr(2,2))}function ft(Qe){return ne.indexOf(Qe)!==-1}function pt(Qe,it){var Ge=qe(Qe.substr(it,2));if(Ge!==se)return!1;var je=0;for(it+=2;je<5;){if(Ge=qe(Qe.substr(it,2)),Ge<ue||Ge>de)return!1;je+=1,it+=2}return qe(Qe.substr(it,2))===ae}function Mt(){this.isLoaded=!0}var At=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};At.isModifier=Ze,At.isZeroWidthJoiner=Ue,At.isFlagEmoji=at,At.isRegionalCode=ct,At.isCombinedCharacter=ft,At.isRegionalFlag=pt,At.isVariationSelector=Ye,At.BLACK_FLAG_CODE_POINT=se;var _t={addChars:Ie,addFonts:De,getCharData:ze,getFontByName:Oe,measureText:Re,checkLoadedFonts:Ae,setIsLoaded:Mt};return At.prototype=_t,At}();function SlotManager(te){this.animationData=te}SlotManager.prototype.getProp=function(te){return this.animationData.slots&&this.animationData.slots[te.sid]?Object.assign(te,this.animationData.slots[te.sid].p):te};function slotFactory(te){return new SlotManager(te)}function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(ee){this.renderableComponents.indexOf(ee)===-1&&this.renderableComponents.push(ee)},removeRenderableComponent:function(ee){this.renderableComponents.indexOf(ee)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(ee),1)},prepareRenderableFrame:function(ee){this.checkLayerLimits(ee)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(ee){this.data.ip-this.data.st<=ee&&this.data.op-this.data.st>ee?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var ee,ne=this.renderableComponents.length;for(ee=0;ee<ne;ee+=1)this.renderableComponents[ee].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var te={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(ee){return te[ee]||""}}();function SliderEffect(te,ee,ne){this.p=PropertyFactory.getProp(ee,te.v,0,0,ne)}function AngleEffect(te,ee,ne){this.p=PropertyFactory.getProp(ee,te.v,0,0,ne)}function ColorEffect(te,ee,ne){this.p=PropertyFactory.getProp(ee,te.v,1,0,ne)}function PointEffect(te,ee,ne){this.p=PropertyFactory.getProp(ee,te.v,1,0,ne)}function LayerIndexEffect(te,ee,ne){this.p=PropertyFactory.getProp(ee,te.v,0,0,ne)}function MaskIndexEffect(te,ee,ne){this.p=PropertyFactory.getProp(ee,te.v,0,0,ne)}function CheckboxEffect(te,ee,ne){this.p=PropertyFactory.getProp(ee,te.v,0,0,ne)}function NoValueEffect(){this.p={}}function EffectsManager(te,ee){var ne=te.ef||[];this.effectElements=[];var se,ae=ne.length,ue;for(se=0;se<ae;se+=1)ue=new GroupEffect(ne[se],ee),this.effectElements.push(ue)}function GroupEffect(te,ee){this.init(te,ee)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(te,ee){this.data=te,this.effectElements=[],this.initDynamicPropertyContainer(ee);var ne,se=this.data.ef.length,ae,ue=this.data.ef;for(ne=0;ne<se;ne+=1){switch(ae=null,ue[ne].ty){case 0:ae=new SliderEffect(ue[ne],ee,this);break;case 1:ae=new AngleEffect(ue[ne],ee,this);break;case 2:ae=new ColorEffect(ue[ne],ee,this);break;case 3:ae=new PointEffect(ue[ne],ee,this);break;case 4:case 7:ae=new CheckboxEffect(ue[ne],ee,this);break;case 10:ae=new LayerIndexEffect(ue[ne],ee,this);break;case 11:ae=new MaskIndexEffect(ue[ne],ee,this);break;case 5:ae=new EffectsManager(ue[ne],ee);break;default:ae=new NoValueEffect(ue[ne]);break}ae&&this.effectElements.push(ae)}};function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var ee=0,ne=this.data.masksProperties.length;ee<ne;){if(this.data.masksProperties[ee].mode!=="n"&&this.data.masksProperties[ee].cl!==!1)return!0;ee+=1}return!1},initExpressions:function(){var ee=getExpressionInterfaces();if(!!ee){var ne=ee("layer"),se=ee("effects"),ae=ee("shape"),ue=ee("text"),de=ee("comp");this.layerInterface=ne(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var oe=se.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(oe),this.data.ty===0||this.data.xt?this.compInterface=de(this):this.data.ty===4?(this.layerInterface.shapeInterface=ae(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=ue(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var ee=getBlendMode(this.data.bm),ne=this.baseElement||this.layerElement;ne.style["mix-blend-mode"]=ee},initBaseData:function(ee,ne,se){this.globalData=ne,this.comp=se,this.data=ee,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(ee,ne){var se,ae=this.dynamicProperties.length;for(se=0;se<ae;se+=1)(ne||this._isParent&&this.dynamicProperties[se].propType==="transform")&&(this.dynamicProperties[se].getValue(),this.dynamicProperties[se]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(ee){this.dynamicProperties.indexOf(ee)===-1&&this.dynamicProperties.push(ee)}};function FootageElement(te,ee,ne){this.initFrame(),this.initRenderable(),this.assetData=ee.getAssetData(te.refId),this.footageData=ee.imageLoader.getAsset(this.assetData),this.initBaseData(te,ee,ne)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var te=getExpressionInterfaces();if(!!te){var ee=te("footage");this.layerInterface=ee(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData};function AudioElement(te,ee,ne){this.initFrame(),this.initRenderable(),this.assetData=ee.getAssetData(te.refId),this.initBaseData(te,ee,ne),this._isPlaying=!1,this._canPlay=!1;var se=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(se),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=te.tm?PropertyFactory.getProp(this,te.tm,0,ee.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,te.au&&te.au.lv?te.au.lv:{k:[100]},1,.01,this)}AudioElement.prototype.prepareFrame=function(te){if(this.prepareRenderableFrame(te,!0),this.prepareProperties(te,!0),this.tm._placeholder)this._currentTime=te/this.data.sr;else{var ee=this.tm.v;this._currentTime=ee}this._volume=this.lv.v[0];var ne=this._volume*this._volumeMultiplier;this._previousVolume!==ne&&(this._previousVolume=ne,this.audio.volume(ne))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(te){this.audio.rate(te)},AudioElement.prototype.volume=function(te){this._volumeMultiplier=te,this._previousVolume=te*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){};function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(te){var ee,ne=this.layers.length,se;for(this.completeLayers=!0,ee=ne-1;ee>=0;ee-=1)this.elements[ee]||(se=this.layers[ee],se.ip-se.st<=te-this.layers[ee].st&&se.op-se.st>te-this.layers[ee].st&&this.buildItem(ee)),this.completeLayers=this.elements[ee]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(te){switch(te.ty){case 2:return this.createImage(te);case 0:return this.createComp(te);case 1:return this.createSolid(te);case 3:return this.createNull(te);case 4:return this.createShape(te);case 5:return this.createText(te);case 6:return this.createAudio(te);case 13:return this.createCamera(te);case 15:return this.createFootage(te);default:return this.createNull(te)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(te){return new AudioElement(te,this.globalData,this)},BaseRenderer.prototype.createFootage=function(te){return new FootageElement(te,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var te,ee=this.layers.length;for(te=0;te<ee;te+=1)this.buildItem(te);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(te){this.completeLayers=!1;var ee,ne=te.length,se,ae=this.layers.length;for(ee=0;ee<ne;ee+=1)for(se=0;se<ae;){if(this.layers[se].id===te[ee].id){this.layers[se]=te[ee];break}se+=1}},BaseRenderer.prototype.setProjectInterface=function(te){this.globalData.projectInterface=te},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(te,ee,ne){for(var se=this.elements,ae=this.layers,ue=0,de=ae.length;ue<de;)ae[ue].ind==ee&&(!se[ue]||se[ue]===!0?(this.buildItem(ue),this.addPendingElement(te)):(ne.push(se[ue]),se[ue].setAsParent(),ae[ue].parent!==void 0?this.buildElementParenting(te,ae[ue].parent,ne):te.setHierarchy(ne))),ue+=1},BaseRenderer.prototype.addPendingElement=function(te){this.pendingElements.push(te)},BaseRenderer.prototype.searchExtraCompositions=function(te){var ee,ne=te.length;for(ee=0;ee<ne;ee+=1)if(te[ee].xt){var se=this.createComp(te[ee]);se.initExpressions(),this.globalData.projectInterface.registerComposition(se)}},BaseRenderer.prototype.getElementById=function(te){var ee,ne=this.elements.length;for(ee=0;ee<ne;ee+=1)if(this.elements[ee].data.ind===te)return this.elements[ee];return null},BaseRenderer.prototype.getElementByPath=function(te){var ee=te.shift(),ne;if(typeof ee=="number")ne=this.elements[ee];else{var se,ae=this.elements.length;for(se=0;se<ae;se+=1)if(this.elements[se].data.nm===ee){ne=this.elements[se];break}}return te.length===0?ne:ne.getElementByPath(te)},BaseRenderer.prototype.setupGlobalData=function(te,ee){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(te),this.globalData.fontManager.addChars(te.chars),this.globalData.fontManager.addFonts(te.fonts,ee),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=te.fr,this.globalData.nm=te.nm,this.globalData.compSize={w:te.w,h:te.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}TransformElement.prototype={initTransform:function(){var ee=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:ee,localMat:ee,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var ee,ne=this.finalTransform.mat,se=0,ae=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;se<ae;){if(this.hierarchy[se].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}se+=1}if(this.finalTransform._matMdf)for(ee=this.finalTransform.mProp.v.props,ne.cloneFromProps(ee),se=0;se<ae;se+=1)ne.multiply(this.hierarchy[se].finalTransform.mProp.v)}(!this.localTransforms||this.finalTransform._matMdf)&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var ee=0,ne=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;ee<ne;)this.localTransforms[ee]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[ee]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),ee+=1;if(this.finalTransform._localMatMdf){var se=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(se),ee=1;ee<ne;ee+=1){var ae=this.localTransforms[ee].matrix;se.multiply(ae)}se.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var ue=this.finalTransform.localOpacity;for(ee=0;ee<ne;ee+=1)ue*=this.localTransforms[ee].opacity*.01;this.finalTransform.localOpacity=ue}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var ee=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(ee.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var ne=0,se=ee.length;for(ne=0;ne<se;ne+=1)this.localTransforms.push(ee[ne])}}},globalToLocal:function(ee){var ne=[];ne.push(this.finalTransform);for(var se=!0,ae=this.comp;se;)ae.finalTransform?(ae.data.hasMask&&ne.splice(0,0,ae.finalTransform),ae=ae.comp):se=!1;var ue,de=ne.length,oe;for(ue=0;ue<de;ue+=1)oe=ne[ue].mat.applyToPointArray(0,0,0),ee=[ee[0]-oe[0],ee[1]-oe[1],0];return ee},mHelper:new Matrix};function MaskElement(te,ee,ne){this.data=te,this.element=ee,this.globalData=ne,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var se=this.globalData.defs,ae,ue=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(ue),this.solidPath="";var de,oe=this.masksProperties,me=0,ve=[],Ee,Pe,ye=createElementID(),Te,Ae,Ce,De,Ie="clipPath",ze="clip-path";for(ae=0;ae<ue;ae+=1)if((oe[ae].mode!=="a"&&oe[ae].mode!=="n"||oe[ae].inv||oe[ae].o.k!==100||oe[ae].o.x)&&(Ie="mask",ze="mask"),(oe[ae].mode==="s"||oe[ae].mode==="i")&&me===0?(Te=createNS("rect"),Te.setAttribute("fill","#ffffff"),Te.setAttribute("width",this.element.comp.data.w||0),Te.setAttribute("height",this.element.comp.data.h||0),ve.push(Te)):Te=null,de=createNS("path"),oe[ae].mode==="n")this.viewData[ae]={op:PropertyFactory.getProp(this.element,oe[ae].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,oe[ae],3),elem:de,lastPath:""},se.appendChild(de);else{me+=1,de.setAttribute("fill",oe[ae].mode==="s"?"#000000":"#ffffff"),de.setAttribute("clip-rule","nonzero");var Re;if(oe[ae].x.k!==0?(Ie="mask",ze="mask",De=PropertyFactory.getProp(this.element,oe[ae].x,0,null,this.element),Re=createElementID(),Ae=createNS("filter"),Ae.setAttribute("id",Re),Ce=createNS("feMorphology"),Ce.setAttribute("operator","erode"),Ce.setAttribute("in","SourceGraphic"),Ce.setAttribute("radius","0"),Ae.appendChild(Ce),se.appendChild(Ae),de.setAttribute("stroke",oe[ae].mode==="s"?"#000000":"#ffffff")):(Ce=null,De=null),this.storedData[ae]={elem:de,x:De,expan:Ce,lastPath:"",lastOperator:"",filterId:Re,lastRadius:0},oe[ae].mode==="i"){Pe=ve.length;var Oe=createNS("g");for(Ee=0;Ee<Pe;Ee+=1)Oe.appendChild(ve[Ee]);var qe=createNS("mask");qe.setAttribute("mask-type","alpha"),qe.setAttribute("id",ye+"_"+me),qe.appendChild(de),se.appendChild(qe),Oe.setAttribute("mask","url("+getLocationHref()+"#"+ye+"_"+me+")"),ve.length=0,ve.push(Oe)}else ve.push(de);oe[ae].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[ae]={elem:de,lastPath:"",op:PropertyFactory.getProp(this.element,oe[ae].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,oe[ae],3),invRect:Te},this.viewData[ae].prop.k||this.drawPath(oe[ae],this.viewData[ae].prop.v,this.viewData[ae])}for(this.maskElement=createNS(Ie),ue=ve.length,ae=0;ae<ue;ae+=1)this.maskElement.appendChild(ve[ae]);me>0&&(this.maskElement.setAttribute("id",ye),this.element.maskedElement.setAttribute(ze,"url("+getLocationHref()+"#"+ye+")"),se.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function(te){return this.viewData[te].prop},MaskElement.prototype.renderFrame=function(te){var ee=this.element.finalTransform.mat,ne,se=this.masksProperties.length;for(ne=0;ne<se;ne+=1)if((this.viewData[ne].prop._mdf||te)&&this.drawPath(this.masksProperties[ne],this.viewData[ne].prop.v,this.viewData[ne]),(this.viewData[ne].op._mdf||te)&&this.viewData[ne].elem.setAttribute("fill-opacity",this.viewData[ne].op.v),this.masksProperties[ne].mode!=="n"&&(this.viewData[ne].invRect&&(this.element.finalTransform.mProp._mdf||te)&&this.viewData[ne].invRect.setAttribute("transform",ee.getInverseMatrix().to2dCSS()),this.storedData[ne].x&&(this.storedData[ne].x._mdf||te))){var ae=this.storedData[ne].expan;this.storedData[ne].x.v<0?(this.storedData[ne].lastOperator!=="erode"&&(this.storedData[ne].lastOperator="erode",this.storedData[ne].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[ne].filterId+")")),ae.setAttribute("radius",-this.storedData[ne].x.v)):(this.storedData[ne].lastOperator!=="dilate"&&(this.storedData[ne].lastOperator="dilate",this.storedData[ne].elem.setAttribute("filter",null)),this.storedData[ne].elem.setAttribute("stroke-width",this.storedData[ne].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var te="M0,0 ";return te+=" h"+this.globalData.compSize.w,te+=" v"+this.globalData.compSize.h,te+=" h-"+this.globalData.compSize.w,te+=" v-"+this.globalData.compSize.h+" ",te},MaskElement.prototype.drawPath=function(te,ee,ne){var se=" M"+ee.v[0][0]+","+ee.v[0][1],ae,ue;for(ue=ee._length,ae=1;ae<ue;ae+=1)se+=" C"+ee.o[ae-1][0]+","+ee.o[ae-1][1]+" "+ee.i[ae][0]+","+ee.i[ae][1]+" "+ee.v[ae][0]+","+ee.v[ae][1];if(ee.c&&ue>1&&(se+=" C"+ee.o[ae-1][0]+","+ee.o[ae-1][1]+" "+ee.i[0][0]+","+ee.i[0][1]+" "+ee.v[0][0]+","+ee.v[0][1]),ne.lastPath!==se){var de="";ne.elem&&(ee.c&&(de=te.inv?this.solidPath+se:se),ne.elem.setAttribute("d",de)),ne.lastPath=se}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var te={};te.createFilter=ee,te.createAlphaToLuminanceFilter=ne;function ee(se,ae){var ue=createNS("filter");return ue.setAttribute("id",se),ae!==!0&&(ue.setAttribute("filterUnits","objectBoundingBox"),ue.setAttribute("x","0%"),ue.setAttribute("y","0%"),ue.setAttribute("width","100%"),ue.setAttribute("height","100%")),ue}function ne(){var se=createNS("feColorMatrix");return se.setAttribute("type","matrix"),se.setAttribute("color-interpolation-filters","sRGB"),se.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),se}return te}(),featureSupport=function(){var te={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas!="undefined"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(te.maskType=!1),/firefox/i.test(navigator.userAgent)&&(te.svgLumaHidden=!1),te}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(te){var ee,ne="SourceGraphic",se=te.data.ef?te.data.ef.length:0,ae=createElementID(),ue=filtersFactory.createFilter(ae,!0),de=0;this.filters=[];var oe;for(ee=0;ee<se;ee+=1){oe=null;var me=te.data.ef[ee].ty;if(registeredEffects$1[me]){var ve=registeredEffects$1[me].effect;oe=new ve(ue,te.effectsManager.effectElements[ee],te,idPrefix+de,ne),ne=idPrefix+de,registeredEffects$1[me].countsAsEffect&&(de+=1)}oe&&this.filters.push(oe)}de&&(te.globalData.defs.appendChild(ue),te.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+ae+")")),this.filters.length&&te.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function(te){var ee,ne=this.filters.length;for(ee=0;ee<ne;ee+=1)this.filters[ee].renderFrame(te)},SVGEffects.prototype.getEffects=function(te){var ee,ne=this.filters.length,se=[];for(ee=0;ee<ne;ee+=1)this.filters[ee].type===te&&se.push(this.filters[ee]);return se};function registerEffect$1(te,ee,ne){registeredEffects$1[te]={effect:ee,countsAsEffect:ne}}function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var ee=null;if(this.data.td){this.matteMasks={};var ne=createNS("g");ne.setAttribute("id",this.layerId),ne.appendChild(this.layerElement),ee=ne,this.globalData.defs.appendChild(ne)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),ee=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var se=createNS("clipPath"),ae=createNS("path");ae.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var ue=createElementID();if(se.setAttribute("id",ue),se.appendChild(ae),this.globalData.defs.appendChild(se),this.checkMasks()){var de=createNS("g");de.setAttribute("clip-path","url("+getLocationHref()+"#"+ue+")"),de.appendChild(this.layerElement),this.transformedElement=de,ee?ee.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+ue+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(ee){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[ee]){var ne=this.layerId+"_"+ee,se,ae,ue,de;if(ee===1||ee===3){var oe=createNS("mask");oe.setAttribute("id",ne),oe.setAttribute("mask-type",ee===3?"luminance":"alpha"),ue=createNS("use"),ue.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),oe.appendChild(ue),this.globalData.defs.appendChild(oe),!featureSupport.maskType&&ee===1&&(oe.setAttribute("mask-type","luminance"),se=createElementID(),ae=filtersFactory.createFilter(se),this.globalData.defs.appendChild(ae),ae.appendChild(filtersFactory.createAlphaToLuminanceFilter()),de=createNS("g"),de.appendChild(ue),oe.appendChild(de),de.setAttribute("filter","url("+getLocationHref()+"#"+se+")"))}else if(ee===2){var me=createNS("mask");me.setAttribute("id",ne),me.setAttribute("mask-type","alpha");var ve=createNS("g");me.appendChild(ve),se=createElementID(),ae=filtersFactory.createFilter(se);var Ee=createNS("feComponentTransfer");Ee.setAttribute("in","SourceGraphic"),ae.appendChild(Ee);var Pe=createNS("feFuncA");Pe.setAttribute("type","table"),Pe.setAttribute("tableValues","1.0 0.0"),Ee.appendChild(Pe),this.globalData.defs.appendChild(ae);var ye=createNS("rect");ye.setAttribute("width",this.comp.data.w),ye.setAttribute("height",this.comp.data.h),ye.setAttribute("x","0"),ye.setAttribute("y","0"),ye.setAttribute("fill","#ffffff"),ye.setAttribute("opacity","0"),ve.setAttribute("filter","url("+getLocationHref()+"#"+se+")"),ve.appendChild(ye),ue=createNS("use"),ue.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),ve.appendChild(ue),featureSupport.maskType||(me.setAttribute("mask-type","luminance"),ae.appendChild(filtersFactory.createAlphaToLuminanceFilter()),de=createNS("g"),ve.appendChild(ye),de.appendChild(this.layerElement),ve.appendChild(de)),this.globalData.defs.appendChild(me)}this.matteMasks[ee]=ne}return this.matteMasks[ee]},setMatte:function(ee){!this.matteElement||this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+ee+")")}};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(ee){this.hierarchy=ee},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function RenderableDOMElement(){}(function(){var te={initElement:function(ne,se,ae){this.initFrame(),this.initBaseData(ne,se,ae),this.initTransform(ne,se,ae),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var ne=this.baseElement||this.layerElement;ne.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var ne=this.baseElement||this.layerElement;ne.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(ne){this._mdf=!1,this.prepareRenderableFrame(ne),this.prepareProperties(ne,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(te)],RenderableDOMElement)})();function IImageElement(te,ee,ne){this.assetData=ee.getAssetData(te.refId),this.assetData&&this.assetData.sid&&(this.assetData=ee.slotManager.getProp(this.assetData)),this.initElement(te,ee,ne),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var te=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",te),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ProcessedElement(te,ee){this.elem=te,this.pos=ee}function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(ee){var ne,se=this.shapeModifiers.length;for(ne=0;ne<se;ne+=1)this.shapeModifiers[ne].addShape(ee)},isShapeInAnimatedModifiers:function(ee){for(var ne=0,se=this.shapeModifiers.length;ne<se;)if(this.shapeModifiers[ne].isAnimatedWithShape(ee))return!0;return!1},renderModifiers:function(){if(!!this.shapeModifiers.length){var ee,ne=this.shapes.length;for(ee=0;ee<ne;ee+=1)this.shapes[ee].sh.reset();ne=this.shapeModifiers.length;var se;for(ee=ne-1;ee>=0&&(se=this.shapeModifiers[ee].processShapes(this._isFirstFrame),!se);ee-=1);}},searchProcessedElement:function(ee){for(var ne=this.processedElements,se=0,ae=ne.length;se<ae;){if(ne[se].elem===ee)return ne[se].pos;se+=1}return 0},addProcessedElement:function(ee,ne){for(var se=this.processedElements,ae=se.length;ae;)if(ae-=1,se[ae].elem===ee){se[ae].pos=ne;return}se.push(new ProcessedElement(ee,ne))},prepareFrame:function(ee){this.prepareRenderableFrame(ee),this.prepareProperties(ee,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(te,ee,ne){this.caches=[],this.styles=[],this.transformers=te,this.lStr="",this.sh=ne,this.lvl=ee,this._isAnimated=!!ne.k;for(var se=0,ae=te.length;se<ae;){if(te[se].mProps.dynamicProperties.length){this._isAnimated=!0;break}se+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGStyleData(te,ee){this.data=te,this.type=te.ty,this.d="",this.lvl=ee,this._mdf=!1,this.closed=te.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function DashProperty(te,ee,ne,se){this.elem=te,this.frameId=-1,this.dataProps=createSizedArray(ee.length),this.renderer=ne,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",ee.length?ee.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(se);var ae,ue=ee.length||0,de;for(ae=0;ae<ue;ae+=1)de=PropertyFactory.getProp(te,ee[ae].v,0,0,this),this.k=de.k||this.k,this.dataProps[ae]={n:ee[ae].n,p:de};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function(te){if(!(this.elem.globalData.frameId===this.frameId&&!te)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||te,this._mdf)){var ee=0,ne=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),ee=0;ee<ne;ee+=1)this.dataProps[ee].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[ee].p.v:this.dashArray[ee]=this.dataProps[ee].p.v:this.dashoffset[0]=this.dataProps[ee].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function SVGStrokeStyleData(te,ee,ne){this.initDynamicPropertyContainer(te),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(te,ee.o,0,.01,this),this.w=PropertyFactory.getProp(te,ee.w,0,null,this),this.d=new DashProperty(te,ee.d||{},"svg",this),this.c=PropertyFactory.getProp(te,ee.c,1,255,this),this.style=ne,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(te,ee,ne){this.initDynamicPropertyContainer(te),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(te,ee.o,0,.01,this),this.c=PropertyFactory.getProp(te,ee.c,1,255,this),this.style=ne}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGNoStyleData(te,ee,ne){this.initDynamicPropertyContainer(te),this.getValue=this.iterateDynamicProperties,this.style=ne}extendPrototype([DynamicPropertyContainer],SVGNoStyleData);function GradientProperty(te,ee,ne){this.data=ee,this.c=createTypedArray("uint8c",ee.p*4);var se=ee.k.k[0].s?ee.k.k[0].s.length-ee.p*4:ee.k.k.length-ee.p*4;this.o=createTypedArray("float32",se),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=se,this.initDynamicPropertyContainer(ne),this.prop=PropertyFactory.getProp(te,ee.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function(te,ee){for(var ne=0,se=this.o.length/2,ae;ne<se;){if(ae=Math.abs(te[ne*4]-te[ee*4+ne*2]),ae>.01)return!1;ne+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var te=0,ee=this.data.k.k.length;te<ee;){if(!this.comparePoints(this.data.k.k[te].s,this.data.p))return!1;te+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(te){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||te){var ee,ne=this.data.p*4,se,ae;for(ee=0;ee<ne;ee+=1)se=ee%4===0?100:255,ae=Math.round(this.prop.v[ee]*se),this.c[ee]!==ae&&(this.c[ee]=ae,this._cmdf=!te);if(this.o.length)for(ne=this.prop.v.length,ee=this.data.p*4;ee<ne;ee+=1)se=ee%2===0?100:1,ae=ee%2===0?Math.round(this.prop.v[ee]*100):this.prop.v[ee],this.o[ee-this.data.p*4]!==ae&&(this.o[ee-this.data.p*4]=ae,this._omdf=!te);this._mdf=!te}},extendPrototype([DynamicPropertyContainer],GradientProperty);function SVGGradientFillStyleData(te,ee,ne){this.initDynamicPropertyContainer(te),this.getValue=this.iterateDynamicProperties,this.initGradientData(te,ee,ne)}SVGGradientFillStyleData.prototype.initGradientData=function(te,ee,ne){this.o=PropertyFactory.getProp(te,ee.o,0,.01,this),this.s=PropertyFactory.getProp(te,ee.s,1,null,this),this.e=PropertyFactory.getProp(te,ee.e,1,null,this),this.h=PropertyFactory.getProp(te,ee.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(te,ee.a||{k:0},0,degToRads,this),this.g=new GradientProperty(te,ee.g,this),this.style=ne,this.stops=[],this.setGradientData(ne.pElem,ee),this.setGradientOpacity(ee,ne),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(te,ee){var ne=createElementID(),se=createNS(ee.t===1?"linearGradient":"radialGradient");se.setAttribute("id",ne),se.setAttribute("spreadMethod","pad"),se.setAttribute("gradientUnits","userSpaceOnUse");var ae=[],ue,de,oe;for(oe=ee.g.p*4,de=0;de<oe;de+=4)ue=createNS("stop"),se.appendChild(ue),ae.push(ue);te.setAttribute(ee.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+ne+")"),this.gf=se,this.cst=ae},SVGGradientFillStyleData.prototype.setGradientOpacity=function(te,ee){if(this.g._hasOpacity&&!this.g._collapsable){var ne,se,ae,ue=createNS("mask"),de=createNS("path");ue.appendChild(de);var oe=createElementID(),me=createElementID();ue.setAttribute("id",me);var ve=createNS(te.t===1?"linearGradient":"radialGradient");ve.setAttribute("id",oe),ve.setAttribute("spreadMethod","pad"),ve.setAttribute("gradientUnits","userSpaceOnUse"),ae=te.g.k.k[0].s?te.g.k.k[0].s.length:te.g.k.k.length;var Ee=this.stops;for(se=te.g.p*4;se<ae;se+=2)ne=createNS("stop"),ne.setAttribute("stop-color","rgb(255,255,255)"),ve.appendChild(ne),Ee.push(ne);de.setAttribute(te.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+oe+")"),te.ty==="gs"&&(de.setAttribute("stroke-linecap",lineCapEnum[te.lc||2]),de.setAttribute("stroke-linejoin",lineJoinEnum[te.lj||2]),te.lj===1&&de.setAttribute("stroke-miterlimit",te.ml)),this.of=ve,this.ms=ue,this.ost=Ee,this.maskId=me,ee.msElem=de}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(te,ee,ne){this.initDynamicPropertyContainer(te),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(te,ee.w,0,null,this),this.d=new DashProperty(te,ee.d||{},"svg",this),this.initGradientData(te,ee,ne),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(te,ee,ne){this.transform={mProps:te,op:ee,container:ne},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}var buildShapeString=function(ee,ne,se,ae){if(ne===0)return"";var ue=ee.o,de=ee.i,oe=ee.v,me,ve=" M"+ae.applyToPointStringified(oe[0][0],oe[0][1]);for(me=1;me<ne;me+=1)ve+=" C"+ae.applyToPointStringified(ue[me-1][0],ue[me-1][1])+" "+ae.applyToPointStringified(de[me][0],de[me][1])+" "+ae.applyToPointStringified(oe[me][0],oe[me][1]);return se&&ne&&(ve+=" C"+ae.applyToPointStringified(ue[me-1][0],ue[me-1][1])+" "+ae.applyToPointStringified(de[0][0],de[0][1])+" "+ae.applyToPointStringified(oe[0][0],oe[0][1]),ve+="z"),ve},SVGElementsRenderer=function(){var te=new Matrix,ee=new Matrix,ne={createRenderFunction:se};function se(Pe){switch(Pe.ty){case"fl":return oe;case"gf":return ve;case"gs":return me;case"st":return Ee;case"sh":case"el":case"rc":case"sr":return de;case"tr":return ae;case"no":return ue;default:return null}}function ae(Pe,ye,Te){(Te||ye.transform.op._mdf)&&ye.transform.container.setAttribute("opacity",ye.transform.op.v),(Te||ye.transform.mProps._mdf)&&ye.transform.container.setAttribute("transform",ye.transform.mProps.v.to2dCSS())}function ue(){}function de(Pe,ye,Te){var Ae,Ce,De,Ie,ze,Re,Oe=ye.styles.length,qe=ye.lvl,Ze,Ue,Ye,ct;for(Re=0;Re<Oe;Re+=1){if(Ie=ye.sh._mdf||Te,ye.styles[Re].lvl<qe){for(Ue=ee.reset(),Ye=qe-ye.styles[Re].lvl,ct=ye.transformers.length-1;!Ie&&Ye>0;)Ie=ye.transformers[ct].mProps._mdf||Ie,Ye-=1,ct-=1;if(Ie)for(Ye=qe-ye.styles[Re].lvl,ct=ye.transformers.length-1;Ye>0;)Ue.multiply(ye.transformers[ct].mProps.v),Ye-=1,ct-=1}else Ue=te;if(Ze=ye.sh.paths,Ce=Ze._length,Ie){for(De="",Ae=0;Ae<Ce;Ae+=1)ze=Ze.shapes[Ae],ze&&ze._length&&(De+=buildShapeString(ze,ze._length,ze.c,Ue));ye.caches[Re]=De}else De=ye.caches[Re];ye.styles[Re].d+=Pe.hd===!0?"":De,ye.styles[Re]._mdf=Ie||ye.styles[Re]._mdf}}function oe(Pe,ye,Te){var Ae=ye.style;(ye.c._mdf||Te)&&Ae.pElem.setAttribute("fill","rgb("+bmFloor(ye.c.v[0])+","+bmFloor(ye.c.v[1])+","+bmFloor(ye.c.v[2])+")"),(ye.o._mdf||Te)&&Ae.pElem.setAttribute("fill-opacity",ye.o.v)}function me(Pe,ye,Te){ve(Pe,ye,Te),Ee(Pe,ye,Te)}function ve(Pe,ye,Te){var Ae=ye.gf,Ce=ye.g._hasOpacity,De=ye.s.v,Ie=ye.e.v;if(ye.o._mdf||Te){var ze=Pe.ty==="gf"?"fill-opacity":"stroke-opacity";ye.style.pElem.setAttribute(ze,ye.o.v)}if(ye.s._mdf||Te){var Re=Pe.t===1?"x1":"cx",Oe=Re==="x1"?"y1":"cy";Ae.setAttribute(Re,De[0]),Ae.setAttribute(Oe,De[1]),Ce&&!ye.g._collapsable&&(ye.of.setAttribute(Re,De[0]),ye.of.setAttribute(Oe,De[1]))}var qe,Ze,Ue,Ye;if(ye.g._cmdf||Te){qe=ye.cst;var ct=ye.g.c;for(Ue=qe.length,Ze=0;Ze<Ue;Ze+=1)Ye=qe[Ze],Ye.setAttribute("offset",ct[Ze*4]+"%"),Ye.setAttribute("stop-color","rgb("+ct[Ze*4+1]+","+ct[Ze*4+2]+","+ct[Ze*4+3]+")")}if(Ce&&(ye.g._omdf||Te)){var at=ye.g.o;for(ye.g._collapsable?qe=ye.cst:qe=ye.ost,Ue=qe.length,Ze=0;Ze<Ue;Ze+=1)Ye=qe[Ze],ye.g._collapsable||Ye.setAttribute("offset",at[Ze*2]+"%"),Ye.setAttribute("stop-opacity",at[Ze*2+1])}if(Pe.t===1)(ye.e._mdf||Te)&&(Ae.setAttribute("x2",Ie[0]),Ae.setAttribute("y2",Ie[1]),Ce&&!ye.g._collapsable&&(ye.of.setAttribute("x2",Ie[0]),ye.of.setAttribute("y2",Ie[1])));else{var ft;if((ye.s._mdf||ye.e._mdf||Te)&&(ft=Math.sqrt(Math.pow(De[0]-Ie[0],2)+Math.pow(De[1]-Ie[1],2)),Ae.setAttribute("r",ft),Ce&&!ye.g._collapsable&&ye.of.setAttribute("r",ft)),ye.s._mdf||ye.e._mdf||ye.h._mdf||ye.a._mdf||Te){ft||(ft=Math.sqrt(Math.pow(De[0]-Ie[0],2)+Math.pow(De[1]-Ie[1],2)));var pt=Math.atan2(Ie[1]-De[1],Ie[0]-De[0]),Mt=ye.h.v;Mt>=1?Mt=.99:Mt<=-1&&(Mt=-.99);var At=ft*Mt,_t=Math.cos(pt+ye.a.v)*At+De[0],Qe=Math.sin(pt+ye.a.v)*At+De[1];Ae.setAttribute("fx",_t),Ae.setAttribute("fy",Qe),Ce&&!ye.g._collapsable&&(ye.of.setAttribute("fx",_t),ye.of.setAttribute("fy",Qe))}}}function Ee(Pe,ye,Te){var Ae=ye.style,Ce=ye.d;Ce&&(Ce._mdf||Te)&&Ce.dashStr&&(Ae.pElem.setAttribute("stroke-dasharray",Ce.dashStr),Ae.pElem.setAttribute("stroke-dashoffset",Ce.dashoffset[0])),ye.c&&(ye.c._mdf||Te)&&Ae.pElem.setAttribute("stroke","rgb("+bmFloor(ye.c.v[0])+","+bmFloor(ye.c.v[1])+","+bmFloor(ye.c.v[2])+")"),(ye.o._mdf||Te)&&Ae.pElem.setAttribute("stroke-opacity",ye.o.v),(ye.w._mdf||Te)&&(Ae.pElem.setAttribute("stroke-width",ye.w.v),Ae.msElem&&Ae.msElem.setAttribute("stroke-width",ye.w.v))}return ne}();function SVGShapeElement(te,ee,ne){this.shapes=[],this.shapesData=te.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(te,ee,ne),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var te,ee=this.shapes.length,ne,se,ae=this.stylesList.length,ue,de=[],oe=!1;for(se=0;se<ae;se+=1){for(ue=this.stylesList[se],oe=!1,de.length=0,te=0;te<ee;te+=1)ne=this.shapes[te],ne.styles.indexOf(ue)!==-1&&(de.push(ne),oe=ne._isAnimated||oe);de.length>1&&oe&&this.setShapesAsAnimated(de)}},SVGShapeElement.prototype.setShapesAsAnimated=function(te){var ee,ne=te.length;for(ee=0;ee<ne;ee+=1)te[ee].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(te,ee){var ne,se=new SVGStyleData(te,ee),ae=se.pElem;if(te.ty==="st")ne=new SVGStrokeStyleData(this,te,se);else if(te.ty==="fl")ne=new SVGFillStyleData(this,te,se);else if(te.ty==="gf"||te.ty==="gs"){var ue=te.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;ne=new ue(this,te,se),this.globalData.defs.appendChild(ne.gf),ne.maskId&&(this.globalData.defs.appendChild(ne.ms),this.globalData.defs.appendChild(ne.of),ae.setAttribute("mask","url("+getLocationHref()+"#"+ne.maskId+")"))}else te.ty==="no"&&(ne=new SVGNoStyleData(this,te,se));return(te.ty==="st"||te.ty==="gs")&&(ae.setAttribute("stroke-linecap",lineCapEnum[te.lc||2]),ae.setAttribute("stroke-linejoin",lineJoinEnum[te.lj||2]),ae.setAttribute("fill-opacity","0"),te.lj===1&&ae.setAttribute("stroke-miterlimit",te.ml)),te.r===2&&ae.setAttribute("fill-rule","evenodd"),te.ln&&ae.setAttribute("id",te.ln),te.cl&&ae.setAttribute("class",te.cl),te.bm&&(ae.style["mix-blend-mode"]=getBlendMode(te.bm)),this.stylesList.push(se),this.addToAnimatedContents(te,ne),ne},SVGShapeElement.prototype.createGroupElement=function(te){var ee=new ShapeGroupData;return te.ln&&ee.gr.setAttribute("id",te.ln),te.cl&&ee.gr.setAttribute("class",te.cl),te.bm&&(ee.gr.style["mix-blend-mode"]=getBlendMode(te.bm)),ee},SVGShapeElement.prototype.createTransformElement=function(te,ee){var ne=TransformPropertyFactory.getTransformProperty(this,te,this),se=new SVGTransformData(ne,ne.o,ee);return this.addToAnimatedContents(te,se),se},SVGShapeElement.prototype.createShapeElement=function(te,ee,ne){var se=4;te.ty==="rc"?se=5:te.ty==="el"?se=6:te.ty==="sr"&&(se=7);var ae=ShapePropertyFactory.getShapeProp(this,te,se,this),ue=new SVGShapeData(ee,ne,ae);return this.shapes.push(ue),this.addShapeToModifiers(ue),this.addToAnimatedContents(te,ue),ue},SVGShapeElement.prototype.addToAnimatedContents=function(te,ee){for(var ne=0,se=this.animatedContents.length;ne<se;){if(this.animatedContents[ne].element===ee)return;ne+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(te),element:ee,data:te})},SVGShapeElement.prototype.setElementStyles=function(te){var ee=te.styles,ne,se=this.stylesList.length;for(ne=0;ne<se;ne+=1)ee.indexOf(this.stylesList[ne])===-1&&!this.stylesList[ne].closed&&ee.push(this.stylesList[ne])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var te,ee=this.itemsData.length;for(te=0;te<ee;te+=1)this.prevViewData[te]=this.itemsData[te];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),ee=this.dynamicProperties.length,te=0;te<ee;te+=1)this.dynamicProperties[te].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(te,ee,ne,se,ae,ue,de){var oe=[].concat(ue),me,ve=te.length-1,Ee,Pe,ye=[],Te=[],Ae,Ce,De;for(me=ve;me>=0;me-=1){if(De=this.searchProcessedElement(te[me]),De?ee[me]=ne[De-1]:te[me]._render=de,te[me].ty==="fl"||te[me].ty==="st"||te[me].ty==="gf"||te[me].ty==="gs"||te[me].ty==="no")De?ee[me].style.closed=te[me].hd:ee[me]=this.createStyleElement(te[me],ae),te[me]._render&&ee[me].style.pElem.parentNode!==se&&se.appendChild(ee[me].style.pElem),ye.push(ee[me].style);else if(te[me].ty==="gr"){if(!De)ee[me]=this.createGroupElement(te[me]);else for(Pe=ee[me].it.length,Ee=0;Ee<Pe;Ee+=1)ee[me].prevViewData[Ee]=ee[me].it[Ee];this.searchShapes(te[me].it,ee[me].it,ee[me].prevViewData,ee[me].gr,ae+1,oe,de),te[me]._render&&ee[me].gr.parentNode!==se&&se.appendChild(ee[me].gr)}else te[me].ty==="tr"?(De||(ee[me]=this.createTransformElement(te[me],se)),Ae=ee[me].transform,oe.push(Ae)):te[me].ty==="sh"||te[me].ty==="rc"||te[me].ty==="el"||te[me].ty==="sr"?(De||(ee[me]=this.createShapeElement(te[me],oe,ae)),this.setElementStyles(ee[me])):te[me].ty==="tm"||te[me].ty==="rd"||te[me].ty==="ms"||te[me].ty==="pb"||te[me].ty==="zz"||te[me].ty==="op"?(De?(Ce=ee[me],Ce.closed=!1):(Ce=ShapeModifiers.getModifier(te[me].ty),Ce.init(this,te[me]),ee[me]=Ce,this.shapeModifiers.push(Ce)),Te.push(Ce)):te[me].ty==="rp"&&(De?(Ce=ee[me],Ce.closed=!0):(Ce=ShapeModifiers.getModifier(te[me].ty),ee[me]=Ce,Ce.init(this,te,me,ee),this.shapeModifiers.push(Ce),de=!1),Te.push(Ce));this.addProcessedElement(te[me],me+1)}for(ve=ye.length,me=0;me<ve;me+=1)ye[me].closed=!0;for(ve=Te.length,me=0;me<ve;me+=1)Te[me].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var te,ee=this.stylesList.length;for(te=0;te<ee;te+=1)this.stylesList[te].reset();for(this.renderShape(),te=0;te<ee;te+=1)(this.stylesList[te]._mdf||this._isFirstFrame)&&(this.stylesList[te].msElem&&(this.stylesList[te].msElem.setAttribute("d",this.stylesList[te].d),this.stylesList[te].d="M0 0"+this.stylesList[te].d),this.stylesList[te].pElem.setAttribute("d",this.stylesList[te].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var te,ee=this.animatedContents.length,ne;for(te=0;te<ee;te+=1)ne=this.animatedContents[te],(this._isFirstFrame||ne.element._isAnimated)&&ne.data!==!0&&ne.fn(ne.data,ne.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function LetterProps(te,ee,ne,se,ae,ue){this.o=te,this.sw=ee,this.sc=ne,this.fc=se,this.m=ae,this.p=ue,this._mdf={o:!0,sw:!!ee,sc:!!ne,fc:!!se,m:!0,p:!0}}LetterProps.prototype.update=function(te,ee,ne,se,ae,ue){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var de=!1;return this.o!==te&&(this.o=te,this._mdf.o=!0,de=!0),this.sw!==ee&&(this.sw=ee,this._mdf.sw=!0,de=!0),this.sc!==ne&&(this.sc=ne,this._mdf.sc=!0,de=!0),this.fc!==se&&(this.fc=se,this._mdf.fc=!0,de=!0),this.m!==ae&&(this.m=ae,this._mdf.m=!0,de=!0),ue.length&&(this.p[0]!==ue[0]||this.p[1]!==ue[1]||this.p[4]!==ue[4]||this.p[5]!==ue[5]||this.p[12]!==ue[12]||this.p[13]!==ue[13])&&(this.p=ue,this._mdf.p=!0,de=!0),de};function TextProperty(te,ee){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,ee.d&&ee.d.sid&&(ee.d=te.globalData.slotManager.getProp(ee.d)),this.data=ee,this.elem=te,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(te,ee){for(var ne in ee)Object.prototype.hasOwnProperty.call(ee,ne)&&(te[ne]=ee[ne]);return te},TextProperty.prototype.setCurrentData=function(te){te.__complete||this.completeTextData(te),this.currentData=te,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(te){this.effectsSequence.push(te),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(te){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!te)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var ee=this.currentData,ne=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var se,ae=this.effectsSequence.length,ue=te||this.data.d.k[this.keysIndex].s;for(se=0;se<ae;se+=1)ne!==this.keysIndex?ue=this.effectsSequence[se](ue,ue.t):ue=this.effectsSequence[se](this.currentData,ue.t);ee!==ue&&this.setCurrentData(ue),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var te=this.data.d.k,ee=this.elem.comp.renderedFrame,ne=0,se=te.length;ne<=se-1&&!(ne===se-1||te[ne+1].t>ee);)ne+=1;return this.keysIndex!==ne&&(this.keysIndex=ne),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(te){for(var ee=[],ne=0,se=te.length,ae,ue,de=!1,oe=!1,me="";ne<se;)de=oe,oe=!1,ae=te.charCodeAt(ne),me=te.charAt(ne),FontManager.isCombinedCharacter(ae)?de=!0:ae>=55296&&ae<=56319?FontManager.isRegionalFlag(te,ne)?me=te.substr(ne,14):(ue=te.charCodeAt(ne+1),ue>=56320&&ue<=57343&&(FontManager.isModifier(ae,ue)?(me=te.substr(ne,2),de=!0):FontManager.isFlagEmoji(te.substr(ne,4))?me=te.substr(ne,4):me=te.substr(ne,2))):ae>56319?(ue=te.charCodeAt(ne+1),FontManager.isVariationSelector(ae)&&(de=!0)):FontManager.isZeroWidthJoiner(ae)&&(de=!0,oe=!0),de?(ee[ee.length-1]+=me,de=!1):ee.push(me),ne+=me.length;return ee},TextProperty.prototype.completeTextData=function(te){te.__complete=!0;var ee=this.elem.globalData.fontManager,ne=this.data,se=[],ae,ue,de,oe=0,me,ve=ne.m.g,Ee=0,Pe=0,ye=0,Te=[],Ae=0,Ce=0,De,Ie,ze=ee.getFontByName(te.f),Re,Oe=0,qe=getFontProperties(ze);te.fWeight=qe.weight,te.fStyle=qe.style,te.finalSize=te.s,te.finalText=this.buildFinalText(te.t),ue=te.finalText.length,te.finalLineHeight=te.lh;var Ze=te.tr/1e3*te.finalSize,Ue;if(te.sz)for(var Ye=!0,ct=te.sz[0],at=te.sz[1],ft,pt;Ye;){pt=this.buildFinalText(te.t),ft=0,Ae=0,ue=pt.length,Ze=te.tr/1e3*te.finalSize;var Mt=-1;for(ae=0;ae<ue;ae+=1)Ue=pt[ae].charCodeAt(0),de=!1,pt[ae]===" "?Mt=ae:(Ue===13||Ue===3)&&(Ae=0,de=!0,ft+=te.finalLineHeight||te.finalSize*1.2),ee.chars?(Re=ee.getCharData(pt[ae],ze.fStyle,ze.fFamily),Oe=de?0:Re.w*te.finalSize/100):Oe=ee.measureText(pt[ae],te.f,te.finalSize),Ae+Oe>ct&&pt[ae]!==" "?(Mt===-1?ue+=1:ae=Mt,ft+=te.finalLineHeight||te.finalSize*1.2,pt.splice(ae,Mt===ae?1:0,"\r"),Mt=-1,Ae=0):(Ae+=Oe,Ae+=Ze);ft+=ze.ascent*te.finalSize/100,this.canResize&&te.finalSize>this.minimumFontSize&&at<ft?(te.finalSize-=1,te.finalLineHeight=te.finalSize*te.lh/te.s):(te.finalText=pt,ue=te.finalText.length,Ye=!1)}Ae=-Ze,Oe=0;var At=0,_t;for(ae=0;ae<ue;ae+=1)if(de=!1,_t=te.finalText[ae],Ue=_t.charCodeAt(0),Ue===13||Ue===3?(At=0,Te.push(Ae),Ce=Ae>Ce?Ae:Ce,Ae=-2*Ze,me="",de=!0,ye+=1):me=_t,ee.chars?(Re=ee.getCharData(_t,ze.fStyle,ee.getFontByName(te.f).fFamily),Oe=de?0:Re.w*te.finalSize/100):Oe=ee.measureText(me,te.f,te.finalSize),_t===" "?At+=Oe+Ze:(Ae+=Oe+Ze+At,At=0),se.push({l:Oe,an:Oe,add:Ee,n:de,anIndexes:[],val:me,line:ye,animatorJustifyOffset:0}),ve==2){if(Ee+=Oe,me===""||me===" "||ae===ue-1){for((me===""||me===" ")&&(Ee-=Oe);Pe<=ae;)se[Pe].an=Ee,se[Pe].ind=oe,se[Pe].extra=Oe,Pe+=1;oe+=1,Ee=0}}else if(ve==3){if(Ee+=Oe,me===""||ae===ue-1){for(me===""&&(Ee-=Oe);Pe<=ae;)se[Pe].an=Ee,se[Pe].ind=oe,se[Pe].extra=Oe,Pe+=1;Ee=0,oe+=1}}else se[oe].ind=oe,se[oe].extra=0,oe+=1;if(te.l=se,Ce=Ae>Ce?Ae:Ce,Te.push(Ae),te.sz)te.boxWidth=te.sz[0],te.justifyOffset=0;else switch(te.boxWidth=Ce,te.j){case 1:te.justifyOffset=-te.boxWidth;break;case 2:te.justifyOffset=-te.boxWidth/2;break;default:te.justifyOffset=0}te.lineWidths=Te;var Qe=ne.a,it,Ge;Ie=Qe.length;var je,Ke,lt=[];for(De=0;De<Ie;De+=1){for(it=Qe[De],it.a.sc&&(te.strokeColorAnim=!0),it.a.sw&&(te.strokeWidthAnim=!0),(it.a.fc||it.a.fh||it.a.fs||it.a.fb)&&(te.fillColorAnim=!0),Ke=0,je=it.s.b,ae=0;ae<ue;ae+=1)Ge=se[ae],Ge.anIndexes[De]=Ke,(je==1&&Ge.val!==""||je==2&&Ge.val!==""&&Ge.val!==" "||je==3&&(Ge.n||Ge.val==" "||ae==ue-1)||je==4&&(Ge.n||ae==ue-1))&&(it.s.rn===1&&lt.push(Ke),Ke+=1);ne.a[De].s.totalChars=Ke;var Bt=-1,Xt;if(it.s.rn===1)for(ae=0;ae<ue;ae+=1)Ge=se[ae],Bt!=Ge.anIndexes[De]&&(Bt=Ge.anIndexes[De],Xt=lt.splice(Math.floor(Math.random()*lt.length),1)[0]),Ge.anIndexes[De]=Xt}te.yOffset=te.finalLineHeight||te.finalSize*1.2,te.ls=te.ls||0,te.ascent=ze.ascent*te.finalSize/100},TextProperty.prototype.updateDocumentData=function(te,ee){ee=ee===void 0?this.keysIndex:ee;var ne=this.copyData({},this.data.d.k[ee].s);ne=this.copyData(ne,te),this.data.d.k[ee].s=ne,this.recalculate(ee),this.setCurrentData(ne),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(te){var ee=this.data.d.k[te].s;ee.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(ee)},TextProperty.prototype.canResizeFont=function(te){this.canResize=te,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(te){this.minimumFontSize=Math.floor(te)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var te=Math.max,ee=Math.min,ne=Math.floor;function se(ue,de){this._currentTextLength=-1,this.k=!1,this.data=de,this.elem=ue,this.comp=ue.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(ue),this.s=PropertyFactory.getProp(ue,de.s||{k:0},0,0,this),"e"in de?this.e=PropertyFactory.getProp(ue,de.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(ue,de.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(ue,de.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(ue,de.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(ue,de.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(ue,de.a,0,.01,this),this.dynamicProperties.length||this.getValue()}se.prototype={getMult:function(de){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var oe=0,me=0,ve=1,Ee=1;this.ne.v>0?oe=this.ne.v/100:me=-this.ne.v/100,this.xe.v>0?ve=1-this.xe.v/100:Ee=1+this.xe.v/100;var Pe=BezierFactory.getBezierEasing(oe,me,ve,Ee).get,ye=0,Te=this.finalS,Ae=this.finalE,Ce=this.data.sh;if(Ce===2)Ae===Te?ye=de>=Ae?1:0:ye=te(0,ee(.5/(Ae-Te)+(de-Te)/(Ae-Te),1)),ye=Pe(ye);else if(Ce===3)Ae===Te?ye=de>=Ae?0:1:ye=1-te(0,ee(.5/(Ae-Te)+(de-Te)/(Ae-Te),1)),ye=Pe(ye);else if(Ce===4)Ae===Te?ye=0:(ye=te(0,ee(.5/(Ae-Te)+(de-Te)/(Ae-Te),1)),ye<.5?ye*=2:ye=1-2*(ye-.5)),ye=Pe(ye);else if(Ce===5){if(Ae===Te)ye=0;else{var De=Ae-Te;de=ee(te(0,de+.5-Te),Ae-Te);var Ie=-De/2+de,ze=De/2;ye=Math.sqrt(1-Ie*Ie/(ze*ze))}ye=Pe(ye)}else Ce===6?(Ae===Te?ye=0:(de=ee(te(0,de+.5-Te),Ae-Te),ye=(1+Math.cos(Math.PI+Math.PI*2*de/(Ae-Te)))/2),ye=Pe(ye)):(de>=ne(Te)&&(de-Te<0?ye=te(0,ee(ee(Ae,1)-(Te-de),1)):ye=te(0,ee(Ae-de,1))),ye=Pe(ye));if(this.sm.v!==100){var Re=this.sm.v*.01;Re===0&&(Re=1e-8);var Oe=.5-Re*.5;ye<Oe?ye=0:(ye=(ye-Oe)/Re,ye>1&&(ye=1))}return ye*this.a.v},getValue:function(de){this.iterateDynamicProperties(),this._mdf=de||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,de&&this.data.r===2&&(this.e.v=this._currentTextLength);var oe=this.data.r===2?1:100/this.data.totalChars,me=this.o.v/oe,ve=this.s.v/oe+me,Ee=this.e.v/oe+me;if(ve>Ee){var Pe=ve;ve=Ee,Ee=Pe}this.finalS=ve,this.finalE=Ee}},extendPrototype([DynamicPropertyContainer],se);function ae(ue,de,oe){return new se(ue,de)}return{getTextSelectorProp:ae}}();function TextAnimatorDataProperty(te,ee,ne){var se={propType:!1},ae=PropertyFactory.getProp,ue=ee.a;this.a={r:ue.r?ae(te,ue.r,0,degToRads,ne):se,rx:ue.rx?ae(te,ue.rx,0,degToRads,ne):se,ry:ue.ry?ae(te,ue.ry,0,degToRads,ne):se,sk:ue.sk?ae(te,ue.sk,0,degToRads,ne):se,sa:ue.sa?ae(te,ue.sa,0,degToRads,ne):se,s:ue.s?ae(te,ue.s,1,.01,ne):se,a:ue.a?ae(te,ue.a,1,0,ne):se,o:ue.o?ae(te,ue.o,0,.01,ne):se,p:ue.p?ae(te,ue.p,1,0,ne):se,sw:ue.sw?ae(te,ue.sw,0,0,ne):se,sc:ue.sc?ae(te,ue.sc,1,0,ne):se,fc:ue.fc?ae(te,ue.fc,1,0,ne):se,fh:ue.fh?ae(te,ue.fh,0,0,ne):se,fs:ue.fs?ae(te,ue.fs,0,.01,ne):se,fb:ue.fb?ae(te,ue.fb,0,.01,ne):se,t:ue.t?ae(te,ue.t,0,0,ne):se},this.s=TextSelectorProp.getTextSelectorProp(te,ee.s,ne),this.s.t=ee.s.t}function TextAnimatorProperty(te,ee,ne){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=te,this._renderType=ee,this._elem=ne,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(ne)}TextAnimatorProperty.prototype.searchProperties=function(){var te,ee=this._textData.a.length,ne,se=PropertyFactory.getProp;for(te=0;te<ee;te+=1)ne=this._textData.a[te],this._animatorsData[te]=new TextAnimatorDataProperty(this._elem,ne,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:se(this._elem,this._textData.p.a,0,0,this),f:se(this._elem,this._textData.p.f,0,0,this),l:se(this._elem,this._textData.p.l,0,0,this),r:se(this._elem,this._textData.p.r,0,0,this),p:se(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=se(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(te,ee){if(this.lettersChangedFlag=ee,!(!this._mdf&&!this._isFirstFrame&&!ee&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var ne=this._moreOptions.alignment.v,se=this._animatorsData,ae=this._textData,ue=this.mHelper,de=this._renderType,oe=this.renderedLetters.length,me,ve,Ee,Pe,ye=te.l,Te,Ae,Ce,De,Ie,ze,Re,Oe,qe,Ze,Ue,Ye,ct,at,ft;if(this._hasMaskedPath){if(ft=this._pathData.m,!this._pathData.n||this._pathData._mdf){var pt=ft.v;this._pathData.r.v&&(pt=pt.reverse()),Te={tLength:0,segments:[]},Pe=pt._length-1;var Mt;for(Ye=0,Ee=0;Ee<Pe;Ee+=1)Mt=bez.buildBezierData(pt.v[Ee],pt.v[Ee+1],[pt.o[Ee][0]-pt.v[Ee][0],pt.o[Ee][1]-pt.v[Ee][1]],[pt.i[Ee+1][0]-pt.v[Ee+1][0],pt.i[Ee+1][1]-pt.v[Ee+1][1]]),Te.tLength+=Mt.segmentLength,Te.segments.push(Mt),Ye+=Mt.segmentLength;Ee=Pe,ft.v.c&&(Mt=bez.buildBezierData(pt.v[Ee],pt.v[0],[pt.o[Ee][0]-pt.v[Ee][0],pt.o[Ee][1]-pt.v[Ee][1]],[pt.i[0][0]-pt.v[0][0],pt.i[0][1]-pt.v[0][1]]),Te.tLength+=Mt.segmentLength,Te.segments.push(Mt),Ye+=Mt.segmentLength),this._pathData.pi=Te}if(Te=this._pathData.pi,Ae=this._pathData.f.v,Re=0,ze=1,De=0,Ie=!0,Ze=Te.segments,Ae<0&&ft.v.c)for(Te.tLength<Math.abs(Ae)&&(Ae=-Math.abs(Ae)%Te.tLength),Re=Ze.length-1,qe=Ze[Re].points,ze=qe.length-1;Ae<0;)Ae+=qe[ze].partialLength,ze-=1,ze<0&&(Re-=1,qe=Ze[Re].points,ze=qe.length-1);qe=Ze[Re].points,Oe=qe[ze-1],Ce=qe[ze],Ue=Ce.partialLength}Pe=ye.length,me=0,ve=0;var At=te.finalSize*1.2*.714,_t=!0,Qe,it,Ge,je,Ke;je=se.length;var lt,Bt=-1,Xt,Gt,lr,yr=Ae,Lr=Re,Nr=ze,$r=-1,Gr,Zr,Dr,dr,fr,qr,li,Jt,gi="",ci=this.defaultPropsArray,hi;if(te.j===2||te.j===1){var ri=0,Ci=0,Ei=te.j===2?-.5:-1,Mi=0,wi=!0;for(Ee=0;Ee<Pe;Ee+=1)if(ye[Ee].n){for(ri&&(ri+=Ci);Mi<Ee;)ye[Mi].animatorJustifyOffset=ri,Mi+=1;ri=0,wi=!0}else{for(Ge=0;Ge<je;Ge+=1)Qe=se[Ge].a,Qe.t.propType&&(wi&&te.j===2&&(Ci+=Qe.t.v*Ei),it=se[Ge].s,lt=it.getMult(ye[Ee].anIndexes[Ge],ae.a[Ge].s.totalChars),lt.length?ri+=Qe.t.v*lt[0]*Ei:ri+=Qe.t.v*lt*Ei);wi=!1}for(ri&&(ri+=Ci);Mi<Ee;)ye[Mi].animatorJustifyOffset=ri,Mi+=1}for(Ee=0;Ee<Pe;Ee+=1){if(ue.reset(),Gr=1,ye[Ee].n)me=0,ve+=te.yOffset,ve+=_t?1:0,Ae=yr,_t=!1,this._hasMaskedPath&&(Re=Lr,ze=Nr,qe=Ze[Re].points,Oe=qe[ze-1],Ce=qe[ze],Ue=Ce.partialLength,De=0),gi="",Jt="",qr="",hi="",ci=this.defaultPropsArray;else{if(this._hasMaskedPath){if($r!==ye[Ee].line){switch(te.j){case 1:Ae+=Ye-te.lineWidths[ye[Ee].line];break;case 2:Ae+=(Ye-te.lineWidths[ye[Ee].line])/2;break}$r=ye[Ee].line}Bt!==ye[Ee].ind&&(ye[Bt]&&(Ae+=ye[Bt].extra),Ae+=ye[Ee].an/2,Bt=ye[Ee].ind),Ae+=ne[0]*ye[Ee].an*.005;var Ft=0;for(Ge=0;Ge<je;Ge+=1)Qe=se[Ge].a,Qe.p.propType&&(it=se[Ge].s,lt=it.getMult(ye[Ee].anIndexes[Ge],ae.a[Ge].s.totalChars),lt.length?Ft+=Qe.p.v[0]*lt[0]:Ft+=Qe.p.v[0]*lt),Qe.a.propType&&(it=se[Ge].s,lt=it.getMult(ye[Ee].anIndexes[Ge],ae.a[Ge].s.totalChars),lt.length?Ft+=Qe.a.v[0]*lt[0]:Ft+=Qe.a.v[0]*lt);for(Ie=!0,this._pathData.a.v&&(Ae=ye[0].an*.5+(Ye-this._pathData.f.v-ye[0].an*.5-ye[ye.length-1].an*.5)*Bt/(Pe-1),Ae+=this._pathData.f.v);Ie;)De+Ue>=Ae+Ft||!qe?(ct=(Ae+Ft-De)/Ce.partialLength,Gt=Oe.point[0]+(Ce.point[0]-Oe.point[0])*ct,lr=Oe.point[1]+(Ce.point[1]-Oe.point[1])*ct,ue.translate(-ne[0]*ye[Ee].an*.005,-(ne[1]*At)*.01),Ie=!1):qe&&(De+=Ce.partialLength,ze+=1,ze>=qe.length&&(ze=0,Re+=1,Ze[Re]?qe=Ze[Re].points:ft.v.c?(ze=0,Re=0,qe=Ze[Re].points):(De-=Ce.partialLength,qe=null)),qe&&(Oe=Ce,Ce=qe[ze],Ue=Ce.partialLength));Xt=ye[Ee].an/2-ye[Ee].add,ue.translate(-Xt,0,0)}else Xt=ye[Ee].an/2-ye[Ee].add,ue.translate(-Xt,0,0),ue.translate(-ne[0]*ye[Ee].an*.005,-ne[1]*At*.01,0);for(Ge=0;Ge<je;Ge+=1)Qe=se[Ge].a,Qe.t.propType&&(it=se[Ge].s,lt=it.getMult(ye[Ee].anIndexes[Ge],ae.a[Ge].s.totalChars),(me!==0||te.j!==0)&&(this._hasMaskedPath?lt.length?Ae+=Qe.t.v*lt[0]:Ae+=Qe.t.v*lt:lt.length?me+=Qe.t.v*lt[0]:me+=Qe.t.v*lt));for(te.strokeWidthAnim&&(Dr=te.sw||0),te.strokeColorAnim&&(te.sc?Zr=[te.sc[0],te.sc[1],te.sc[2]]:Zr=[0,0,0]),te.fillColorAnim&&te.fc&&(dr=[te.fc[0],te.fc[1],te.fc[2]]),Ge=0;Ge<je;Ge+=1)Qe=se[Ge].a,Qe.a.propType&&(it=se[Ge].s,lt=it.getMult(ye[Ee].anIndexes[Ge],ae.a[Ge].s.totalChars),lt.length?ue.translate(-Qe.a.v[0]*lt[0],-Qe.a.v[1]*lt[1],Qe.a.v[2]*lt[2]):ue.translate(-Qe.a.v[0]*lt,-Qe.a.v[1]*lt,Qe.a.v[2]*lt));for(Ge=0;Ge<je;Ge+=1)Qe=se[Ge].a,Qe.s.propType&&(it=se[Ge].s,lt=it.getMult(ye[Ee].anIndexes[Ge],ae.a[Ge].s.totalChars),lt.length?ue.scale(1+(Qe.s.v[0]-1)*lt[0],1+(Qe.s.v[1]-1)*lt[1],1):ue.scale(1+(Qe.s.v[0]-1)*lt,1+(Qe.s.v[1]-1)*lt,1));for(Ge=0;Ge<je;Ge+=1){if(Qe=se[Ge].a,it=se[Ge].s,lt=it.getMult(ye[Ee].anIndexes[Ge],ae.a[Ge].s.totalChars),Qe.sk.propType&&(lt.length?ue.skewFromAxis(-Qe.sk.v*lt[0],Qe.sa.v*lt[1]):ue.skewFromAxis(-Qe.sk.v*lt,Qe.sa.v*lt)),Qe.r.propType&&(lt.length?ue.rotateZ(-Qe.r.v*lt[2]):ue.rotateZ(-Qe.r.v*lt)),Qe.ry.propType&&(lt.length?ue.rotateY(Qe.ry.v*lt[1]):ue.rotateY(Qe.ry.v*lt)),Qe.rx.propType&&(lt.length?ue.rotateX(Qe.rx.v*lt[0]):ue.rotateX(Qe.rx.v*lt)),Qe.o.propType&&(lt.length?Gr+=(Qe.o.v*lt[0]-Gr)*lt[0]:Gr+=(Qe.o.v*lt-Gr)*lt),te.strokeWidthAnim&&Qe.sw.propType&&(lt.length?Dr+=Qe.sw.v*lt[0]:Dr+=Qe.sw.v*lt),te.strokeColorAnim&&Qe.sc.propType)for(fr=0;fr<3;fr+=1)lt.length?Zr[fr]+=(Qe.sc.v[fr]-Zr[fr])*lt[0]:Zr[fr]+=(Qe.sc.v[fr]-Zr[fr])*lt;if(te.fillColorAnim&&te.fc){if(Qe.fc.propType)for(fr=0;fr<3;fr+=1)lt.length?dr[fr]+=(Qe.fc.v[fr]-dr[fr])*lt[0]:dr[fr]+=(Qe.fc.v[fr]-dr[fr])*lt;Qe.fh.propType&&(lt.length?dr=addHueToRGB(dr,Qe.fh.v*lt[0]):dr=addHueToRGB(dr,Qe.fh.v*lt)),Qe.fs.propType&&(lt.length?dr=addSaturationToRGB(dr,Qe.fs.v*lt[0]):dr=addSaturationToRGB(dr,Qe.fs.v*lt)),Qe.fb.propType&&(lt.length?dr=addBrightnessToRGB(dr,Qe.fb.v*lt[0]):dr=addBrightnessToRGB(dr,Qe.fb.v*lt))}}for(Ge=0;Ge<je;Ge+=1)Qe=se[Ge].a,Qe.p.propType&&(it=se[Ge].s,lt=it.getMult(ye[Ee].anIndexes[Ge],ae.a[Ge].s.totalChars),this._hasMaskedPath?lt.length?ue.translate(0,Qe.p.v[1]*lt[0],-Qe.p.v[2]*lt[1]):ue.translate(0,Qe.p.v[1]*lt,-Qe.p.v[2]*lt):lt.length?ue.translate(Qe.p.v[0]*lt[0],Qe.p.v[1]*lt[1],-Qe.p.v[2]*lt[2]):ue.translate(Qe.p.v[0]*lt,Qe.p.v[1]*lt,-Qe.p.v[2]*lt));if(te.strokeWidthAnim&&(qr=Dr<0?0:Dr),te.strokeColorAnim&&(li="rgb("+Math.round(Zr[0]*255)+","+Math.round(Zr[1]*255)+","+Math.round(Zr[2]*255)+")"),te.fillColorAnim&&te.fc&&(Jt="rgb("+Math.round(dr[0]*255)+","+Math.round(dr[1]*255)+","+Math.round(dr[2]*255)+")"),this._hasMaskedPath){if(ue.translate(0,-te.ls),ue.translate(0,ne[1]*At*.01+ve,0),this._pathData.p.v){at=(Ce.point[1]-Oe.point[1])/(Ce.point[0]-Oe.point[0]);var er=Math.atan(at)*180/Math.PI;Ce.point[0]<Oe.point[0]&&(er+=180),ue.rotate(-er*Math.PI/180)}ue.translate(Gt,lr,0),Ae-=ne[0]*ye[Ee].an*.005,ye[Ee+1]&&Bt!==ye[Ee+1].ind&&(Ae+=ye[Ee].an/2,Ae+=te.tr*.001*te.finalSize)}else{switch(ue.translate(me,ve,0),te.ps&&ue.translate(te.ps[0],te.ps[1]+te.ascent,0),te.j){case 1:ue.translate(ye[Ee].animatorJustifyOffset+te.justifyOffset+(te.boxWidth-te.lineWidths[ye[Ee].line]),0,0);break;case 2:ue.translate(ye[Ee].animatorJustifyOffset+te.justifyOffset+(te.boxWidth-te.lineWidths[ye[Ee].line])/2,0,0);break}ue.translate(0,-te.ls),ue.translate(Xt,0,0),ue.translate(ne[0]*ye[Ee].an*.005,ne[1]*At*.01,0),me+=ye[Ee].l+te.tr*.001*te.finalSize}de==="html"?gi=ue.toCSS():de==="svg"?gi=ue.to2dCSS():ci=[ue.props[0],ue.props[1],ue.props[2],ue.props[3],ue.props[4],ue.props[5],ue.props[6],ue.props[7],ue.props[8],ue.props[9],ue.props[10],ue.props[11],ue.props[12],ue.props[13],ue.props[14],ue.props[15]],hi=Gr}oe<=Ee?(Ke=new LetterProps(hi,qr,li,Jt,gi,ci),this.renderedLetters.push(Ke),oe+=1,this.lettersChangedFlag=!0):(Ke=this.renderedLetters[Ee],this.lettersChangedFlag=Ke.update(hi,qr,li,Jt,gi,ci)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function ITextElement(){}ITextElement.prototype.initElement=function(te,ee,ne){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(te,ee,ne),this.textProperty=new TextProperty(this,te.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(te.t,this.renderType,this),this.initTransform(te,ee,ne),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(te){this._mdf=!1,this.prepareRenderableFrame(te),this.prepareProperties(te,this.isInRange)},ITextElement.prototype.createPathShape=function(te,ee){var ne,se=ee.length,ae,ue="";for(ne=0;ne<se;ne+=1)ee[ne].ty==="sh"&&(ae=ee[ne].ks.k,ue+=buildShapeString(ae,ae.i.length,!0,te));return ue},ITextElement.prototype.updateDocumentData=function(te,ee){this.textProperty.updateDocumentData(te,ee)},ITextElement.prototype.canResizeFont=function(te){this.textProperty.canResizeFont(te)},ITextElement.prototype.setMinimumFontSize=function(te){this.textProperty.setMinimumFontSize(te)},ITextElement.prototype.applyTextPropertiesToMatrix=function(te,ee,ne,se,ae){switch(te.ps&&ee.translate(te.ps[0],te.ps[1]+te.ascent,0),ee.translate(0,-te.ls,0),te.j){case 1:ee.translate(te.justifyOffset+(te.boxWidth-te.lineWidths[ne]),0,0);break;case 2:ee.translate(te.justifyOffset+(te.boxWidth-te.lineWidths[ne])/2,0,0);break}ee.translate(se,ae,0)},ITextElement.prototype.buildColor=function(te){return"rgb("+Math.round(te[0]*255)+","+Math.round(te[1]*255)+","+Math.round(te[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(te,ee,ne){this.textSpans=[],this.renderType="svg",this.initElement(te,ee,ne)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(te){for(var ee=0,ne=te.length,se=[],ae="";ee<ne;)te[ee]===String.fromCharCode(13)||te[ee]===String.fromCharCode(3)?(se.push(ae),ae=""):ae+=te[ee],ee+=1;return se.push(ae),se},SVGTextLottieElement.prototype.buildShapeData=function(te,ee){if(te.shapes&&te.shapes.length){var ne=te.shapes[0];if(ne.it){var se=ne.it[ne.it.length-1];se.s&&(se.s.k[0]=ee,se.s.k[1]=ee)}}return te},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var te,ee,ne=this.textProperty.currentData;this.renderedLetters=createSizedArray(ne?ne.l.length:0),ne.fc?this.layerElement.setAttribute("fill",this.buildColor(ne.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),ne.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(ne.sc)),this.layerElement.setAttribute("stroke-width",ne.sw)),this.layerElement.setAttribute("font-size",ne.finalSize);var se=this.globalData.fontManager.getFontByName(ne.f);if(se.fClass)this.layerElement.setAttribute("class",se.fClass);else{this.layerElement.setAttribute("font-family",se.fFamily);var ae=ne.fWeight,ue=ne.fStyle;this.layerElement.setAttribute("font-style",ue),this.layerElement.setAttribute("font-weight",ae)}this.layerElement.setAttribute("aria-label",ne.t);var de=ne.l||[],oe=!!this.globalData.fontManager.chars;ee=de.length;var me,ve=this.mHelper,Ee="",Pe=this.data.singleShape,ye=0,Te=0,Ae=!0,Ce=ne.tr*.001*ne.finalSize;if(Pe&&!oe&&!ne.sz){var De=this.textContainer,Ie="start";switch(ne.j){case 1:Ie="end";break;case 2:Ie="middle";break;default:Ie="start";break}De.setAttribute("text-anchor",Ie),De.setAttribute("letter-spacing",Ce);var ze=this.buildTextContents(ne.finalText);for(ee=ze.length,Te=ne.ps?ne.ps[1]+ne.ascent:0,te=0;te<ee;te+=1)me=this.textSpans[te].span||createNS("tspan"),me.textContent=ze[te],me.setAttribute("x",0),me.setAttribute("y",Te),me.style.display="inherit",De.appendChild(me),this.textSpans[te]||(this.textSpans[te]={span:null,glyph:null}),this.textSpans[te].span=me,Te+=ne.finalLineHeight;this.layerElement.appendChild(De)}else{var Re=this.textSpans.length,Oe;for(te=0;te<ee;te+=1){if(this.textSpans[te]||(this.textSpans[te]={span:null,childSpan:null,glyph:null}),!oe||!Pe||te===0){if(me=Re>te?this.textSpans[te].span:createNS(oe?"g":"text"),Re<=te){if(me.setAttribute("stroke-linecap","butt"),me.setAttribute("stroke-linejoin","round"),me.setAttribute("stroke-miterlimit","4"),this.textSpans[te].span=me,oe){var qe=createNS("g");me.appendChild(qe),this.textSpans[te].childSpan=qe}this.textSpans[te].span=me,this.layerElement.appendChild(me)}me.style.display="inherit"}if(ve.reset(),Pe&&(de[te].n&&(ye=-Ce,Te+=ne.yOffset,Te+=Ae?1:0,Ae=!1),this.applyTextPropertiesToMatrix(ne,ve,de[te].line,ye,Te),ye+=de[te].l||0,ye+=Ce),oe){Oe=this.globalData.fontManager.getCharData(ne.finalText[te],se.fStyle,this.globalData.fontManager.getFontByName(ne.f).fFamily);var Ze;if(Oe.t===1)Ze=new SVGCompElement(Oe.data,this.globalData,this);else{var Ue=emptyShapeData;Oe.data&&Oe.data.shapes&&(Ue=this.buildShapeData(Oe.data,ne.finalSize)),Ze=new SVGShapeElement(Ue,this.globalData,this)}if(this.textSpans[te].glyph){var Ye=this.textSpans[te].glyph;this.textSpans[te].childSpan.removeChild(Ye.layerElement),Ye.destroy()}this.textSpans[te].glyph=Ze,Ze._debug=!0,Ze.prepareFrame(0),Ze.renderFrame(),this.textSpans[te].childSpan.appendChild(Ze.layerElement),Oe.t===1&&this.textSpans[te].childSpan.setAttribute("transform","scale("+ne.finalSize/100+","+ne.finalSize/100+")")}else Pe&&me.setAttribute("transform","translate("+ve.props[12]+","+ve.props[13]+")"),me.textContent=de[te].val,me.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}Pe&&me&&me.setAttribute("d",Ee)}for(;te<this.textSpans.length;)this.textSpans[te].span.style.display="none",te+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var te=this.layerElement.getBBox();this.bbox={top:te.y,left:te.x,width:te.width,height:te.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var te,ee=this.textSpans.length,ne;for(this.renderedFrame=this.comp.renderedFrame,te=0;te<ee;te+=1)ne=this.textSpans[te].glyph,ne&&(ne.prepareFrame(this.comp.renderedFrame-this.data.st),ne._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var te,ee,ne=this.textAnimator.renderedLetters,se=this.textProperty.currentData.l;ee=se.length;var ae,ue,de;for(te=0;te<ee;te+=1)se[te].n||(ae=ne[te],ue=this.textSpans[te].span,de=this.textSpans[te].glyph,de&&de.renderFrame(),ae._mdf.m&&ue.setAttribute("transform",ae.m),ae._mdf.o&&ue.setAttribute("opacity",ae.o),ae._mdf.sw&&ue.setAttribute("stroke-width",ae.sw),ae._mdf.sc&&ue.setAttribute("stroke",ae.sc),ae._mdf.fc&&ue.setAttribute("fill",ae.fc))}};function ISolidElement(te,ee,ne){this.initElement(te,ee,ne)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var te=createNS("rect");te.setAttribute("width",this.data.sw),te.setAttribute("height",this.data.sh),te.setAttribute("fill",this.data.sc),this.layerElement.appendChild(te)};function NullElement(te,ee,ne){this.initFrame(),this.initBaseData(te,ee,ne),this.initFrame(),this.initTransform(te,ee,ne),this.initHierarchy()}NullElement.prototype.prepareFrame=function(te){this.prepareProperties(te,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGRendererBase(){}extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(te){return new NullElement(te,this.globalData,this)},SVGRendererBase.prototype.createShape=function(te){return new SVGShapeElement(te,this.globalData,this)},SVGRendererBase.prototype.createText=function(te){return new SVGTextLottieElement(te,this.globalData,this)},SVGRendererBase.prototype.createImage=function(te){return new IImageElement(te,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(te){return new ISolidElement(te,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(te){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+te.w+" "+te.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",te.w),this.svgElement.setAttribute("height",te.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var ee=this.globalData.defs;this.setupGlobalData(te,ee),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=te;var ne=createNS("clipPath"),se=createNS("rect");se.setAttribute("width",te.w),se.setAttribute("height",te.h),se.setAttribute("x",0),se.setAttribute("y",0);var ae=createElementID();ne.setAttribute("id",ae),ne.appendChild(se),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+ae+")"),ee.appendChild(ne),this.layers=te.layers,this.elements=createSizedArray(te.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var te,ee=this.layers?this.layers.length:0;for(te=0;te<ee;te+=1)this.elements[te]&&this.elements[te].destroy&&this.elements[te].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(te){var ee=0,ne=this.layers.length;for(ee=0;ee<ne;ee+=1)if(this.layers[ee].ind===te)return ee;return-1},SVGRendererBase.prototype.buildItem=function(te){var ee=this.elements;if(!(ee[te]||this.layers[te].ty===99)){ee[te]=!0;var ne=this.createItem(this.layers[te]);if(ee[te]=ne,getExpressionsPlugin()&&(this.layers[te].ty===0&&this.globalData.projectInterface.registerComposition(ne),ne.initExpressions()),this.appendElementInPos(ne,te),this.layers[te].tt){var se="tp"in this.layers[te]?this.findIndexByInd(this.layers[te].tp):te-1;if(se===-1)return;if(!this.elements[se]||this.elements[se]===!0)this.buildItem(se),this.addPendingElement(ne);else{var ae=ee[se],ue=ae.getMatte(this.layers[te].tt);ne.setMatte(ue)}}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var te=this.pendingElements.pop();if(te.checkParenting(),te.data.tt)for(var ee=0,ne=this.elements.length;ee<ne;){if(this.elements[ee]===te){var se="tp"in te.data?this.findIndexByInd(te.data.tp):ee-1,ae=this.elements[se],ue=ae.getMatte(this.layers[ee].tt);te.setMatte(ue);break}ee+=1}}},SVGRendererBase.prototype.renderFrame=function(te){if(!(this.renderedFrame===te||this.destroyed)){te===null?te=this.renderedFrame:this.renderedFrame=te,this.globalData.frameNum=te,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=te,this.globalData._mdf=!1;var ee,ne=this.layers.length;for(this.completeLayers||this.checkLayers(te),ee=ne-1;ee>=0;ee-=1)(this.completeLayers||this.elements[ee])&&this.elements[ee].prepareFrame(te-this.layers[ee].st);if(this.globalData._mdf)for(ee=0;ee<ne;ee+=1)(this.completeLayers||this.elements[ee])&&this.elements[ee].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(te,ee){var ne=te.getBaseElement();if(!!ne){for(var se=0,ae;se<ee;)this.elements[se]&&this.elements[se]!==!0&&this.elements[se].getBaseElement()&&(ae=this.elements[se].getBaseElement()),se+=1;ae?this.layerElement.insertBefore(ne,ae):this.layerElement.appendChild(ne)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(te,ee,ne){this.initFrame(),this.initBaseData(te,ee,ne),this.initTransform(te,ee,ne),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!ee.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(te){if(this._mdf=!1,this.prepareRenderableFrame(te),this.prepareProperties(te,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=te/this.data.sr;else{var ee=this.tm.v;ee===this.data.op&&(ee=this.data.op-1),this.renderedFrame=ee}var ne,se=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),ne=se-1;ne>=0;ne-=1)(this.completeLayers||this.elements[ne])&&(this.elements[ne].prepareFrame(this.renderedFrame-this.layers[ne].st),this.elements[ne]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var te,ee=this.layers.length;for(te=0;te<ee;te+=1)(this.completeLayers||this.elements[te])&&this.elements[te].renderFrame()},ICompElement.prototype.setElements=function(te){this.elements=te},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var te,ee=this.layers.length;for(te=0;te<ee;te+=1)this.elements[te]&&this.elements[te].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function SVGCompElement(te,ee,ne){this.layers=te.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(te,ee,ne),this.tm=te.tm?PropertyFactory.getProp(this,te.tm,0,ee.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(te){return new SVGCompElement(te,this.globalData,this)};function SVGRenderer(te,ee){this.animationItem=te,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var ne="";if(ee&&ee.title){var se=createNS("title"),ae=createElementID();se.setAttribute("id",ae),se.textContent=ee.title,this.svgElement.appendChild(se),ne+=ae}if(ee&&ee.description){var ue=createNS("desc"),de=createElementID();ue.setAttribute("id",de),ue.textContent=ee.description,this.svgElement.appendChild(ue),ne+=" "+de}ne&&this.svgElement.setAttribute("aria-labelledby",ne);var oe=createNS("defs");this.svgElement.appendChild(oe);var me=createNS("g");this.svgElement.appendChild(me),this.layerElement=me,this.renderConfig={preserveAspectRatio:ee&&ee.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:ee&&ee.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:ee&&ee.contentVisibility||"visible",progressiveLoad:ee&&ee.progressiveLoad||!1,hideOnTransparent:!(ee&&ee.hideOnTransparent===!1),viewBoxOnly:ee&&ee.viewBoxOnly||!1,viewBoxSize:ee&&ee.viewBoxSize||!1,className:ee&&ee.className||"",id:ee&&ee.id||"",focusable:ee&&ee.focusable,filterSize:{width:ee&&ee.filterSize&&ee.filterSize.width||"100%",height:ee&&ee.filterSize&&ee.filterSize.height||"100%",x:ee&&ee.filterSize&&ee.filterSize.x||"0%",y:ee&&ee.filterSize&&ee.filterSize.y||"0%"},width:ee&&ee.width,height:ee&&ee.height,runExpressions:!ee||ee.runExpressions===void 0||ee.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:oe,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(te){return new SVGCompElement(te,this.globalData,this)};function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(ee){var ne,se=ee.length,ae="_";for(ne=0;ne<se;ne+=1)ae+=ee[ne].transform.key+"_";var ue=this.sequences[ae];return ue||(ue={transforms:[].concat(ee),finalTransform:new Matrix,_mdf:!1},this.sequences[ae]=ue,this.sequenceList.push(ue)),ue},processSequence:function(ee,ne){for(var se=0,ae=ee.transforms.length,ue=ne;se<ae&&!ne;){if(ee.transforms[se].transform.mProps._mdf){ue=!0;break}se+=1}if(ue)for(ee.finalTransform.reset(),se=ae-1;se>=0;se-=1)ee.finalTransform.multiply(ee.transforms[se].transform.mProps.v);ee._mdf=ue},processSequences:function(ee){var ne,se=this.sequenceList.length;for(ne=0;ne<se;ne+=1)this.processSequence(this.sequenceList[ne],ee)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var ee="__lottie_element_luma_buffer",ne=null,se=null,ae=null;function ue(){var me=createNS("svg"),ve=createNS("filter"),Ee=createNS("feColorMatrix");return ve.setAttribute("id",ee),Ee.setAttribute("type","matrix"),Ee.setAttribute("color-interpolation-filters","sRGB"),Ee.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),ve.appendChild(Ee),me.appendChild(ve),me.setAttribute("id",ee+"_svg"),featureSupport.svgLumaHidden&&(me.style.display="none"),me}function de(){ne||(ae=ue(),document.body.appendChild(ae),ne=createTag("canvas"),se=ne.getContext("2d"),se.filter="url(#"+ee+")",se.fillStyle="rgba(0,0,0,0)",se.fillRect(0,0,1,1))}function oe(me){return ne||de(),ne.width=me.width,ne.height=me.height,se.filter="url(#"+ee+")",ne}return{load:de,get:oe}};function createCanvas(te,ee){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(te,ee);var ne=createTag("canvas");return ne.width=te,ne.height=ee,ne}var assetLoader=function(){return{loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas}}(),registeredEffects={};function CVEffects(te){var ee,ne=te.data.ef?te.data.ef.length:0;this.filters=[];var se;for(ee=0;ee<ne;ee+=1){se=null;var ae=te.data.ef[ee].ty;if(registeredEffects[ae]){var ue=registeredEffects[ae].effect;se=new ue(te.effectsManager.effectElements[ee],te)}se&&this.filters.push(se)}this.filters.length&&te.addRenderableComponent(this)}CVEffects.prototype.renderFrame=function(te){var ee,ne=this.filters.length;for(ee=0;ee<ne;ee+=1)this.filters[ee].renderFrame(te)},CVEffects.prototype.getEffects=function(te){var ee,ne=this.filters.length,se=[];for(ee=0;ee<ne;ee+=1)this.filters[ee].type===te&&se.push(this.filters[ee]);return se};function registerEffect(te,ee){registeredEffects[te]={effect:ee}}function CVMaskElement(te,ee){this.data=te,this.element=ee,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var ne,se=this.masksProperties.length,ae=!1;for(ne=0;ne<se;ne+=1)this.masksProperties[ne].mode!=="n"&&(ae=!0),this.viewData[ne]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[ne],3);this.hasMasks=ae,ae&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(!!this.hasMasks){var te=this.element.finalTransform.mat,ee=this.element.canvasContext,ne,se=this.masksProperties.length,ae,ue,de;for(ee.beginPath(),ne=0;ne<se;ne+=1)if(this.masksProperties[ne].mode!=="n"){this.masksProperties[ne].inv&&(ee.moveTo(0,0),ee.lineTo(this.element.globalData.compSize.w,0),ee.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),ee.lineTo(0,this.element.globalData.compSize.h),ee.lineTo(0,0)),de=this.viewData[ne].v,ae=te.applyToPointArray(de.v[0][0],de.v[0][1],0),ee.moveTo(ae[0],ae[1]);var oe,me=de._length;for(oe=1;oe<me;oe+=1)ue=te.applyToTriplePoints(de.o[oe-1],de.i[oe],de.v[oe]),ee.bezierCurveTo(ue[0],ue[1],ue[2],ue[3],ue[4],ue[5]);ue=te.applyToTriplePoints(de.o[oe-1],de.i[0],de.v[0]),ee.bezierCurveTo(ue[0],ue[1],ue[2],ue[3],ue[4],ue[5])}this.element.globalData.renderer.save(!0),ee.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVBaseElement(){}var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var ee=this.globalData.canvasContext,ne=assetLoader.createCanvas(ee.canvas.width,ee.canvas.height);this.buffers.push(ne);var se=assetLoader.createCanvas(ee.canvas.width,ee.canvas.height);this.buffers.push(se),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var ee=this.globalData;if(ee.blendMode!==this.data.bm){ee.blendMode=this.data.bm;var ne=getBlendMode(this.data.bm);ee.canvasContext.globalCompositeOperation=ne}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(ee){ee.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var ee=this.buffers[0],ne=ee.getContext("2d");this.clearCanvas(ne),ne.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var ee=this.buffers[1],ne=ee.getContext("2d");this.clearCanvas(ne),ne.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform);var se=this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1);if(se.renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var ae=assetLoader.getLumaCanvas(this.canvasContext.canvas),ue=ae.getContext("2d");ue.drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(ae,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(ee,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(ee){if(!(this.hidden||this.data.hd)&&!(this.data.td===1&&!ee)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var ne=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(ne),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(ne),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVShapeData(te,ee,ne,se){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var ae=4;ee.ty==="rc"?ae=5:ee.ty==="el"?ae=6:ee.ty==="sr"&&(ae=7),this.sh=ShapePropertyFactory.getShapeProp(te,ee,ae,te);var ue,de=ne.length,oe;for(ue=0;ue<de;ue+=1)ne[ue].closed||(oe={transforms:se.addTransformSequence(ne[ue].transforms),trNodes:[]},this.styledShapes.push(oe),ne[ue].elements.push(oe))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function CVShapeElement(te,ee,ne){this.shapes=[],this.shapesData=te.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(te,ee,ne)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(te,ee){var ne={data:te,type:te.ty,preTransforms:this.transformsManager.addTransformSequence(ee),transforms:[],elements:[],closed:te.hd===!0},se={};if(te.ty==="fl"||te.ty==="st"?(se.c=PropertyFactory.getProp(this,te.c,1,255,this),se.c.k||(ne.co="rgb("+bmFloor(se.c.v[0])+","+bmFloor(se.c.v[1])+","+bmFloor(se.c.v[2])+")")):(te.ty==="gf"||te.ty==="gs")&&(se.s=PropertyFactory.getProp(this,te.s,1,null,this),se.e=PropertyFactory.getProp(this,te.e,1,null,this),se.h=PropertyFactory.getProp(this,te.h||{k:0},0,.01,this),se.a=PropertyFactory.getProp(this,te.a||{k:0},0,degToRads,this),se.g=new GradientProperty(this,te.g,this)),se.o=PropertyFactory.getProp(this,te.o,0,.01,this),te.ty==="st"||te.ty==="gs"){if(ne.lc=lineCapEnum[te.lc||2],ne.lj=lineJoinEnum[te.lj||2],te.lj==1&&(ne.ml=te.ml),se.w=PropertyFactory.getProp(this,te.w,0,null,this),se.w.k||(ne.wi=se.w.v),te.d){var ae=new DashProperty(this,te.d,"canvas",this);se.d=ae,se.d.k||(ne.da=se.d.dashArray,ne.do=se.d.dashoffset[0])}}else ne.r=te.r===2?"evenodd":"nonzero";return this.stylesList.push(ne),se.style=ne,se},CVShapeElement.prototype.createGroupElement=function(){var te={it:[],prevViewData:[]};return te},CVShapeElement.prototype.createTransformElement=function(te){var ee={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,te.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,te,this)}};return ee},CVShapeElement.prototype.createShapeElement=function(te){var ee=new CVShapeData(this,te,this.stylesList,this.transformsManager);return this.shapes.push(ee),this.addShapeToModifiers(ee),ee},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var te,ee=this.itemsData.length;for(te=0;te<ee;te+=1)this.prevViewData[te]=this.itemsData[te];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),ee=this.dynamicProperties.length,te=0;te<ee;te+=1)this.dynamicProperties[te].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(te){var ee,ne=this.stylesList.length;for(ee=0;ee<ne;ee+=1)this.stylesList[ee].closed||this.stylesList[ee].transforms.push(te)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var te,ee=this.stylesList.length;for(te=0;te<ee;te+=1)this.stylesList[te].closed||this.stylesList[te].transforms.pop()},CVShapeElement.prototype.closeStyles=function(te){var ee,ne=te.length;for(ee=0;ee<ne;ee+=1)te[ee].closed=!0},CVShapeElement.prototype.searchShapes=function(te,ee,ne,se,ae){var ue,de=te.length-1,oe,me,ve=[],Ee=[],Pe,ye,Te,Ae=[].concat(ae);for(ue=de;ue>=0;ue-=1){if(Pe=this.searchProcessedElement(te[ue]),Pe?ee[ue]=ne[Pe-1]:te[ue]._shouldRender=se,te[ue].ty==="fl"||te[ue].ty==="st"||te[ue].ty==="gf"||te[ue].ty==="gs")Pe?ee[ue].style.closed=!1:ee[ue]=this.createStyleElement(te[ue],Ae),ve.push(ee[ue].style);else if(te[ue].ty==="gr"){if(!Pe)ee[ue]=this.createGroupElement(te[ue]);else for(me=ee[ue].it.length,oe=0;oe<me;oe+=1)ee[ue].prevViewData[oe]=ee[ue].it[oe];this.searchShapes(te[ue].it,ee[ue].it,ee[ue].prevViewData,se,Ae)}else te[ue].ty==="tr"?(Pe||(Te=this.createTransformElement(te[ue]),ee[ue]=Te),Ae.push(ee[ue]),this.addTransformToStyleList(ee[ue])):te[ue].ty==="sh"||te[ue].ty==="rc"||te[ue].ty==="el"||te[ue].ty==="sr"?Pe||(ee[ue]=this.createShapeElement(te[ue])):te[ue].ty==="tm"||te[ue].ty==="rd"||te[ue].ty==="pb"||te[ue].ty==="zz"||te[ue].ty==="op"?(Pe?(ye=ee[ue],ye.closed=!1):(ye=ShapeModifiers.getModifier(te[ue].ty),ye.init(this,te[ue]),ee[ue]=ye,this.shapeModifiers.push(ye)),Ee.push(ye)):te[ue].ty==="rp"&&(Pe?(ye=ee[ue],ye.closed=!0):(ye=ShapeModifiers.getModifier(te[ue].ty),ee[ue]=ye,ye.init(this,te,ue,ee),this.shapeModifiers.push(ye),se=!1),Ee.push(ye));this.addProcessedElement(te[ue],ue+1)}for(this.removeTransformFromStyleList(),this.closeStyles(ve),de=Ee.length,ue=0;ue<de;ue+=1)Ee[ue].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(te,ee){(te._opMdf||ee.op._mdf||this._isFirstFrame)&&(ee.opacity=te.opacity,ee.opacity*=ee.op.v,ee._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var te,ee=this.stylesList.length,ne,se,ae,ue,de,oe,me=this.globalData.renderer,ve=this.globalData.canvasContext,Ee,Pe;for(te=0;te<ee;te+=1)if(Pe=this.stylesList[te],Ee=Pe.type,!((Ee==="st"||Ee==="gs")&&Pe.wi===0||!Pe.data._shouldRender||Pe.coOp===0||this.globalData.currentGlobalAlpha===0)){for(me.save(),de=Pe.elements,Ee==="st"||Ee==="gs"?(me.ctxStrokeStyle(Ee==="st"?Pe.co:Pe.grd),me.ctxLineWidth(Pe.wi),me.ctxLineCap(Pe.lc),me.ctxLineJoin(Pe.lj),me.ctxMiterLimit(Pe.ml||0)):me.ctxFillStyle(Ee==="fl"?Pe.co:Pe.grd),me.ctxOpacity(Pe.coOp),Ee!=="st"&&Ee!=="gs"&&ve.beginPath(),me.ctxTransform(Pe.preTransforms.finalTransform.props),se=de.length,ne=0;ne<se;ne+=1){for((Ee==="st"||Ee==="gs")&&(ve.beginPath(),Pe.da&&(ve.setLineDash(Pe.da),ve.lineDashOffset=Pe.do)),oe=de[ne].trNodes,ue=oe.length,ae=0;ae<ue;ae+=1)oe[ae].t==="m"?ve.moveTo(oe[ae].p[0],oe[ae].p[1]):oe[ae].t==="c"?ve.bezierCurveTo(oe[ae].pts[0],oe[ae].pts[1],oe[ae].pts[2],oe[ae].pts[3],oe[ae].pts[4],oe[ae].pts[5]):ve.closePath();(Ee==="st"||Ee==="gs")&&(me.ctxStroke(),Pe.da&&ve.setLineDash(this.dashResetter))}Ee!=="st"&&Ee!=="gs"&&this.globalData.renderer.ctxFill(Pe.r),me.restore()}},CVShapeElement.prototype.renderShape=function(te,ee,ne,se){var ae,ue=ee.length-1,de;for(de=te,ae=ue;ae>=0;ae-=1)ee[ae].ty==="tr"?(de=ne[ae].transform,this.renderShapeTransform(te,de)):ee[ae].ty==="sh"||ee[ae].ty==="el"||ee[ae].ty==="rc"||ee[ae].ty==="sr"?this.renderPath(ee[ae],ne[ae]):ee[ae].ty==="fl"?this.renderFill(ee[ae],ne[ae],de):ee[ae].ty==="st"?this.renderStroke(ee[ae],ne[ae],de):ee[ae].ty==="gf"||ee[ae].ty==="gs"?this.renderGradientFill(ee[ae],ne[ae],de):ee[ae].ty==="gr"?this.renderShape(de,ee[ae].it,ne[ae].it):ee[ae].ty;se&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(te,ee){if(this._isFirstFrame||ee._mdf||te.transforms._mdf){var ne=te.trNodes,se=ee.paths,ae,ue,de,oe=se._length;ne.length=0;var me=te.transforms.finalTransform;for(de=0;de<oe;de+=1){var ve=se.shapes[de];if(ve&&ve.v){for(ue=ve._length,ae=1;ae<ue;ae+=1)ae===1&&ne.push({t:"m",p:me.applyToPointArray(ve.v[0][0],ve.v[0][1],0)}),ne.push({t:"c",pts:me.applyToTriplePoints(ve.o[ae-1],ve.i[ae],ve.v[ae])});ue===1&&ne.push({t:"m",p:me.applyToPointArray(ve.v[0][0],ve.v[0][1],0)}),ve.c&&ue&&(ne.push({t:"c",pts:me.applyToTriplePoints(ve.o[ae-1],ve.i[0],ve.v[0])}),ne.push({t:"z"}))}}te.trNodes=ne}},CVShapeElement.prototype.renderPath=function(te,ee){if(te.hd!==!0&&te._shouldRender){var ne,se=ee.styledShapes.length;for(ne=0;ne<se;ne+=1)this.renderStyledShape(ee.styledShapes[ne],ee.sh)}},CVShapeElement.prototype.renderFill=function(te,ee,ne){var se=ee.style;(ee.c._mdf||this._isFirstFrame)&&(se.co="rgb("+bmFloor(ee.c.v[0])+","+bmFloor(ee.c.v[1])+","+bmFloor(ee.c.v[2])+")"),(ee.o._mdf||ne._opMdf||this._isFirstFrame)&&(se.coOp=ee.o.v*ne.opacity)},CVShapeElement.prototype.renderGradientFill=function(te,ee,ne){var se=ee.style,ae;if(!se.grd||ee.g._mdf||ee.s._mdf||ee.e._mdf||te.t!==1&&(ee.h._mdf||ee.a._mdf)){var ue=this.globalData.canvasContext,de=ee.s.v,oe=ee.e.v;if(te.t===1)ae=ue.createLinearGradient(de[0],de[1],oe[0],oe[1]);else{var me=Math.sqrt(Math.pow(de[0]-oe[0],2)+Math.pow(de[1]-oe[1],2)),ve=Math.atan2(oe[1]-de[1],oe[0]-de[0]),Ee=ee.h.v;Ee>=1?Ee=.99:Ee<=-1&&(Ee=-.99);var Pe=me*Ee,ye=Math.cos(ve+ee.a.v)*Pe+de[0],Te=Math.sin(ve+ee.a.v)*Pe+de[1];ae=ue.createRadialGradient(ye,Te,0,de[0],de[1],me)}var Ae,Ce=te.g.p,De=ee.g.c,Ie=1;for(Ae=0;Ae<Ce;Ae+=1)ee.g._hasOpacity&&ee.g._collapsable&&(Ie=ee.g.o[Ae*2+1]),ae.addColorStop(De[Ae*4]/100,"rgba("+De[Ae*4+1]+","+De[Ae*4+2]+","+De[Ae*4+3]+","+Ie+")");se.grd=ae}se.coOp=ee.o.v*ne.opacity},CVShapeElement.prototype.renderStroke=function(te,ee,ne){var se=ee.style,ae=ee.d;ae&&(ae._mdf||this._isFirstFrame)&&(se.da=ae.dashArray,se.do=ae.dashoffset[0]),(ee.c._mdf||this._isFirstFrame)&&(se.co="rgb("+bmFloor(ee.c.v[0])+","+bmFloor(ee.c.v[1])+","+bmFloor(ee.c.v[2])+")"),(ee.o._mdf||ne._opMdf||this._isFirstFrame)&&(se.coOp=ee.o.v*ne.opacity),(ee.w._mdf||this._isFirstFrame)&&(se.wi=ee.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVTextElement(te,ee,ne){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(te,ee,ne)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var te=this.textProperty.currentData;this.renderedLetters=createSizedArray(te.l?te.l.length:0);var ee=!1;te.fc?(ee=!0,this.values.fill=this.buildColor(te.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=ee;var ne=!1;te.sc&&(ne=!0,this.values.stroke=this.buildColor(te.sc),this.values.sWidth=te.sw);var se=this.globalData.fontManager.getFontByName(te.f),ae,ue,de=te.l,oe=this.mHelper;this.stroke=ne,this.values.fValue=te.finalSize+"px "+this.globalData.fontManager.getFontByName(te.f).fFamily,ue=te.finalText.length;var me,ve,Ee,Pe,ye,Te,Ae,Ce,De,Ie,ze=this.data.singleShape,Re=te.tr*.001*te.finalSize,Oe=0,qe=0,Ze=!0,Ue=0;for(ae=0;ae<ue;ae+=1){me=this.globalData.fontManager.getCharData(te.finalText[ae],se.fStyle,this.globalData.fontManager.getFontByName(te.f).fFamily),ve=me&&me.data||{},oe.reset(),ze&&de[ae].n&&(Oe=-Re,qe+=te.yOffset,qe+=Ze?1:0,Ze=!1),ye=ve.shapes?ve.shapes[0].it:[],Ae=ye.length,oe.scale(te.finalSize/100,te.finalSize/100),ze&&this.applyTextPropertiesToMatrix(te,oe,de[ae].line,Oe,qe),De=createSizedArray(Ae-1);var Ye=0;for(Te=0;Te<Ae;Te+=1)if(ye[Te].ty==="sh"){for(Pe=ye[Te].ks.k.i.length,Ce=ye[Te].ks.k,Ie=[],Ee=1;Ee<Pe;Ee+=1)Ee===1&&Ie.push(oe.applyToX(Ce.v[0][0],Ce.v[0][1],0),oe.applyToY(Ce.v[0][0],Ce.v[0][1],0)),Ie.push(oe.applyToX(Ce.o[Ee-1][0],Ce.o[Ee-1][1],0),oe.applyToY(Ce.o[Ee-1][0],Ce.o[Ee-1][1],0),oe.applyToX(Ce.i[Ee][0],Ce.i[Ee][1],0),oe.applyToY(Ce.i[Ee][0],Ce.i[Ee][1],0),oe.applyToX(Ce.v[Ee][0],Ce.v[Ee][1],0),oe.applyToY(Ce.v[Ee][0],Ce.v[Ee][1],0));Ie.push(oe.applyToX(Ce.o[Ee-1][0],Ce.o[Ee-1][1],0),oe.applyToY(Ce.o[Ee-1][0],Ce.o[Ee-1][1],0),oe.applyToX(Ce.i[0][0],Ce.i[0][1],0),oe.applyToY(Ce.i[0][0],Ce.i[0][1],0),oe.applyToX(Ce.v[0][0],Ce.v[0][1],0),oe.applyToY(Ce.v[0][0],Ce.v[0][1],0)),De[Ye]=Ie,Ye+=1}ze&&(Oe+=de[ae].l,Oe+=Re),this.textSpans[Ue]?this.textSpans[Ue].elem=De:this.textSpans[Ue]={elem:De},Ue+=1}},CVTextElement.prototype.renderInnerContent=function(){this.validateText();var te=this.canvasContext;te.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var ee,ne,se,ae,ue,de,oe=this.textAnimator.renderedLetters,me=this.textProperty.currentData.l;ne=me.length;var ve,Ee=null,Pe=null,ye=null,Te,Ae,Ce=this.globalData.renderer;for(ee=0;ee<ne;ee+=1)if(!me[ee].n){if(ve=oe[ee],ve&&(Ce.save(),Ce.ctxTransform(ve.p),Ce.ctxOpacity(ve.o)),this.fill){for(ve&&ve.fc?Ee!==ve.fc&&(Ce.ctxFillStyle(ve.fc),Ee=ve.fc):Ee!==this.values.fill&&(Ee=this.values.fill,Ce.ctxFillStyle(this.values.fill)),Te=this.textSpans[ee].elem,ae=Te.length,this.globalData.canvasContext.beginPath(),se=0;se<ae;se+=1)for(Ae=Te[se],de=Ae.length,this.globalData.canvasContext.moveTo(Ae[0],Ae[1]),ue=2;ue<de;ue+=6)this.globalData.canvasContext.bezierCurveTo(Ae[ue],Ae[ue+1],Ae[ue+2],Ae[ue+3],Ae[ue+4],Ae[ue+5]);this.globalData.canvasContext.closePath(),Ce.ctxFill()}if(this.stroke){for(ve&&ve.sw?ye!==ve.sw&&(ye=ve.sw,Ce.ctxLineWidth(ve.sw)):ye!==this.values.sWidth&&(ye=this.values.sWidth,Ce.ctxLineWidth(this.values.sWidth)),ve&&ve.sc?Pe!==ve.sc&&(Pe=ve.sc,Ce.ctxStrokeStyle(ve.sc)):Pe!==this.values.stroke&&(Pe=this.values.stroke,Ce.ctxStrokeStyle(this.values.stroke)),Te=this.textSpans[ee].elem,ae=Te.length,this.globalData.canvasContext.beginPath(),se=0;se<ae;se+=1)for(Ae=Te[se],de=Ae.length,this.globalData.canvasContext.moveTo(Ae[0],Ae[1]),ue=2;ue<de;ue+=6)this.globalData.canvasContext.bezierCurveTo(Ae[ue],Ae[ue+1],Ae[ue+2],Ae[ue+3],Ae[ue+4],Ae[ue+5]);this.globalData.canvasContext.closePath(),Ce.ctxStroke()}ve&&this.globalData.renderer.restore()}};function CVImageElement(te,ee,ne){this.assetData=ee.getAssetData(te.refId),this.img=ee.imageLoader.getAsset(this.assetData),this.initElement(te,ee,ne)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var te=createTag("canvas");te.width=this.assetData.w,te.height=this.assetData.h;var ee=te.getContext("2d"),ne=this.img.width,se=this.img.height,ae=ne/se,ue=this.assetData.w/this.assetData.h,de,oe,me=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;ae>ue&&me==="xMidYMid slice"||ae<ue&&me!=="xMidYMid slice"?(oe=se,de=oe*ue):(de=ne,oe=de/ue),ee.drawImage(this.img,(ne-de)/2,(se-oe)/2,de,oe,0,0,this.assetData.w,this.assetData.h),this.img=te}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVSolidElement(te,ee,ne){this.initElement(te,ee,ne)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)};function CanvasRendererBase(){}extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(te){return new CVShapeElement(te,this.globalData,this)},CanvasRendererBase.prototype.createText=function(te){return new CVTextElement(te,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(te){return new CVImageElement(te,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(te){return new CVSolidElement(te,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(te){te[0]===1&&te[1]===0&&te[4]===0&&te[5]===1&&te[12]===0&&te[13]===0||this.canvasContext.transform(te[0],te[1],te[4],te[5],te[12],te[13])},CanvasRendererBase.prototype.ctxOpacity=function(te){this.canvasContext.globalAlpha*=te<0?0:te},CanvasRendererBase.prototype.ctxFillStyle=function(te){this.canvasContext.fillStyle=te},CanvasRendererBase.prototype.ctxStrokeStyle=function(te){this.canvasContext.strokeStyle=te},CanvasRendererBase.prototype.ctxLineWidth=function(te){this.canvasContext.lineWidth=te},CanvasRendererBase.prototype.ctxLineCap=function(te){this.canvasContext.lineCap=te},CanvasRendererBase.prototype.ctxLineJoin=function(te){this.canvasContext.lineJoin=te},CanvasRendererBase.prototype.ctxMiterLimit=function(te){this.canvasContext.miterLimit=te},CanvasRendererBase.prototype.ctxFill=function(te){this.canvasContext.fill(te)},CanvasRendererBase.prototype.ctxFillRect=function(te,ee,ne,se){this.canvasContext.fillRect(te,ee,ne,se)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(te){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}te&&(this.globalData.blendMode="source-over"),this.contextData.restore(te)},CanvasRendererBase.prototype.configAnimation=function(te){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var ee=this.animationItem.container.style;ee.width="100%",ee.height="100%";var ne="0px 0px 0px";ee.transformOrigin=ne,ee.mozTransformOrigin=ne,ee.webkitTransformOrigin=ne,ee["-webkit-transform"]=ne,ee.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=te,this.layers=te.layers,this.transformCanvas={w:te.w,h:te.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(te,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(te.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(te,ee){this.reset();var ne,se;te?(ne=te,se=ee,this.canvasContext.canvas.width=ne,this.canvasContext.canvas.height=se):(this.animationItem.wrapper&&this.animationItem.container?(ne=this.animationItem.wrapper.offsetWidth,se=this.animationItem.wrapper.offsetHeight):(ne=this.canvasContext.canvas.width,se=this.canvasContext.canvas.height),this.canvasContext.canvas.width=ne*this.renderConfig.dpr,this.canvasContext.canvas.height=se*this.renderConfig.dpr);var ae,ue;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var de=this.renderConfig.preserveAspectRatio.split(" "),oe=de[1]||"meet",me=de[0]||"xMidYMid",ve=me.substr(0,4),Ee=me.substr(4);ae=ne/se,ue=this.transformCanvas.w/this.transformCanvas.h,ue>ae&&oe==="meet"||ue<ae&&oe==="slice"?(this.transformCanvas.sx=ne/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=ne/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=se/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=se/(this.transformCanvas.h/this.renderConfig.dpr)),ve==="xMid"&&(ue<ae&&oe==="meet"||ue>ae&&oe==="slice")?this.transformCanvas.tx=(ne-this.transformCanvas.w*(se/this.transformCanvas.h))/2*this.renderConfig.dpr:ve==="xMax"&&(ue<ae&&oe==="meet"||ue>ae&&oe==="slice")?this.transformCanvas.tx=(ne-this.transformCanvas.w*(se/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,Ee==="YMid"&&(ue>ae&&oe==="meet"||ue<ae&&oe==="slice")?this.transformCanvas.ty=(se-this.transformCanvas.h*(ne/this.transformCanvas.w))/2*this.renderConfig.dpr:Ee==="YMax"&&(ue>ae&&oe==="meet"||ue<ae&&oe==="slice")?this.transformCanvas.ty=(se-this.transformCanvas.h*(ne/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=ne/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=se/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");var te,ee=this.layers?this.layers.length:0;for(te=ee-1;te>=0;te-=1)this.elements[te]&&this.elements[te].destroy&&this.elements[te].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(te,ee){if(!(this.renderedFrame===te&&this.renderConfig.clearCanvas===!0&&!ee||this.destroyed||te===-1)){this.renderedFrame=te,this.globalData.frameNum=te-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||ee,this.globalData.projectInterface.currentFrame=te;var ne,se=this.layers.length;for(this.completeLayers||this.checkLayers(te),ne=se-1;ne>=0;ne-=1)(this.completeLayers||this.elements[ne])&&this.elements[ne].prepareFrame(te-this.layers[ne].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),ne=se-1;ne>=0;ne-=1)(this.completeLayers||this.elements[ne])&&this.elements[ne].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(te){var ee=this.elements;if(!(ee[te]||this.layers[te].ty===99)){var ne=this.createItem(this.layers[te],this,this.globalData);ee[te]=ne,ne.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var te=this.pendingElements.pop();te.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"};function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){this.stack=[],this.cArrPos=0,this.cTr=new Matrix;var te,ee=15;for(te=0;te<ee;te+=1){var ne=new CanvasContext;this.stack[te]=ne}this._length=ee,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}CVContextData.prototype.duplicate=function(){var te=this._length*2,ee=0;for(ee=this._length;ee<te;ee+=1)this.stack[ee]=new CanvasContext;this._length=te},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(te){this.cArrPos-=1;var ee=this.stack[this.cArrPos],ne=ee.transform,se,ae=this.cTr.props;for(se=0;se<16;se+=1)ae[se]=ne[se];if(te){this.nativeContext.restore();var ue=this.stack[this.cArrPos+1];this.appliedFillStyle=ue.fillStyle,this.appliedStrokeStyle=ue.strokeStyle,this.appliedLineWidth=ue.lineWidth,this.appliedLineCap=ue.lineCap,this.appliedLineJoin=ue.lineJoin,this.appliedMiterLimit=ue.miterLimit}this.nativeContext.setTransform(ne[0],ne[1],ne[4],ne[5],ne[12],ne[13]),(te||ee.opacity!==-1&&this.currentOpacity!==ee.opacity)&&(this.nativeContext.globalAlpha=ee.opacity,this.currentOpacity=ee.opacity),this.currentFillStyle=ee.fillStyle,this.currentStrokeStyle=ee.strokeStyle,this.currentLineWidth=ee.lineWidth,this.currentLineCap=ee.lineCap,this.currentLineJoin=ee.lineJoin,this.currentMiterLimit=ee.miterLimit},CVContextData.prototype.save=function(te){te&&this.nativeContext.save();var ee=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var ne=this.stack[this.cArrPos],se;for(se=0;se<16;se+=1)ne.transform[se]=ee[se];this.cArrPos+=1;var ae=this.stack[this.cArrPos];ae.opacity=ne.opacity,ae.fillStyle=ne.fillStyle,ae.strokeStyle=ne.strokeStyle,ae.lineWidth=ne.lineWidth,ae.lineCap=ne.lineCap,ae.lineJoin=ne.lineJoin,ae.miterLimit=ne.miterLimit},CVContextData.prototype.setOpacity=function(te){this.stack[this.cArrPos].opacity=te},CVContextData.prototype.setContext=function(te){this.nativeContext=te},CVContextData.prototype.fillStyle=function(te){this.stack[this.cArrPos].fillStyle!==te&&(this.currentFillStyle=te,this.stack[this.cArrPos].fillStyle=te)},CVContextData.prototype.strokeStyle=function(te){this.stack[this.cArrPos].strokeStyle!==te&&(this.currentStrokeStyle=te,this.stack[this.cArrPos].strokeStyle=te)},CVContextData.prototype.lineWidth=function(te){this.stack[this.cArrPos].lineWidth!==te&&(this.currentLineWidth=te,this.stack[this.cArrPos].lineWidth=te)},CVContextData.prototype.lineCap=function(te){this.stack[this.cArrPos].lineCap!==te&&(this.currentLineCap=te,this.stack[this.cArrPos].lineCap=te)},CVContextData.prototype.lineJoin=function(te){this.stack[this.cArrPos].lineJoin!==te&&(this.currentLineJoin=te,this.stack[this.cArrPos].lineJoin=te)},CVContextData.prototype.miterLimit=function(te){this.stack[this.cArrPos].miterLimit!==te&&(this.currentMiterLimit=te,this.stack[this.cArrPos].miterLimit=te)},CVContextData.prototype.transform=function(te){this.transformMat.cloneFromProps(te);var ee=this.cTr;this.transformMat.multiply(ee),ee.cloneFromProps(this.transformMat.props);var ne=ee.props;this.nativeContext.setTransform(ne[0],ne[1],ne[4],ne[5],ne[12],ne[13])},CVContextData.prototype.opacity=function(te){var ee=this.stack[this.cArrPos].opacity;ee*=te<0?0:te,this.stack[this.cArrPos].opacity!==ee&&(this.currentOpacity!==te&&(this.nativeContext.globalAlpha=te,this.currentOpacity=te),this.stack[this.cArrPos].opacity=ee)},CVContextData.prototype.fill=function(te){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(te)},CVContextData.prototype.fillRect=function(te,ee,ne,se){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(te,ee,ne,se)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()};function CVCompElement(te,ee,ne){this.completeLayers=!1,this.layers=te.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(te,ee,ne),this.tm=te.tm?PropertyFactory.getProp(this,te.tm,0,ee.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var te=this.canvasContext;te.beginPath(),te.moveTo(0,0),te.lineTo(this.data.w,0),te.lineTo(this.data.w,this.data.h),te.lineTo(0,this.data.h),te.lineTo(0,0),te.clip();var ee,ne=this.layers.length;for(ee=ne-1;ee>=0;ee-=1)(this.completeLayers||this.elements[ee])&&this.elements[ee].renderFrame()},CVCompElement.prototype.destroy=function(){var te,ee=this.layers.length;for(te=ee-1;te>=0;te-=1)this.elements[te]&&this.elements[te].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(te){return new CVCompElement(te,this.globalData,this)};function CanvasRenderer(te,ee){this.animationItem=te,this.renderConfig={clearCanvas:ee&&ee.clearCanvas!==void 0?ee.clearCanvas:!0,context:ee&&ee.context||null,progressiveLoad:ee&&ee.progressiveLoad||!1,preserveAspectRatio:ee&&ee.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:ee&&ee.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:ee&&ee.contentVisibility||"visible",className:ee&&ee.className||"",id:ee&&ee.id||"",runExpressions:!ee||ee.runExpressions===void 0||ee.runExpressions},this.renderConfig.dpr=ee&&ee.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=ee&&ee.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(te){return new CVCompElement(te,this.globalData,this)};function HBaseElement(){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var ee=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var ne=this.finalTransform.mat.toCSS();ee.transform=ne,ee.webkitTransform=ne}this.finalTransform._opMdf&&(ee.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting;function HSolidElement(te,ee,ne){this.initElement(te,ee,ne)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var te;this.data.hasMask?(te=createNS("rect"),te.setAttribute("width",this.data.sw),te.setAttribute("height",this.data.sh),te.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(te=createTag("div"),te.style.width=this.data.sw+"px",te.style.height=this.data.sh+"px",te.style.backgroundColor=this.data.sc),this.layerElement.appendChild(te)};function HShapeElement(te,ee,ne){this.shapes=[],this.shapesData=te.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(te,ee,ne),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var te;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),te=this.svgElement;else{te=createNS("svg");var ee=this.comp.data?this.comp.data:this.globalData.compSize;te.setAttribute("width",ee.w),te.setAttribute("height",ee.h),te.appendChild(this.shapesContainer),this.layerElement.appendChild(te)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=te},HShapeElement.prototype.getTransformedPoint=function(te,ee){var ne,se=te.length;for(ne=0;ne<se;ne+=1)ee=te[ne].mProps.v.applyToPointArray(ee[0],ee[1],0);return ee},HShapeElement.prototype.calculateShapeBoundingBox=function(te,ee){var ne=te.sh.v,se=te.transformers,ae,ue=ne._length,de,oe,me,ve;if(!(ue<=1)){for(ae=0;ae<ue-1;ae+=1)de=this.getTransformedPoint(se,ne.v[ae]),oe=this.getTransformedPoint(se,ne.o[ae]),me=this.getTransformedPoint(se,ne.i[ae+1]),ve=this.getTransformedPoint(se,ne.v[ae+1]),this.checkBounds(de,oe,me,ve,ee);ne.c&&(de=this.getTransformedPoint(se,ne.v[ae]),oe=this.getTransformedPoint(se,ne.o[ae]),me=this.getTransformedPoint(se,ne.i[0]),ve=this.getTransformedPoint(se,ne.v[0]),this.checkBounds(de,oe,me,ve,ee))}},HShapeElement.prototype.checkBounds=function(te,ee,ne,se,ae){this.getBoundsOfCurve(te,ee,ne,se);var ue=this.shapeBoundingBox;ae.x=bmMin(ue.left,ae.x),ae.xMax=bmMax(ue.right,ae.xMax),ae.y=bmMin(ue.top,ae.y),ae.yMax=bmMax(ue.bottom,ae.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(te,ee,ne,se){for(var ae=[[te[0],se[0]],[te[1],se[1]]],ue,de,oe,me,ve,Ee,Pe,ye=0;ye<2;++ye)de=6*te[ye]-12*ee[ye]+6*ne[ye],ue=-3*te[ye]+9*ee[ye]-9*ne[ye]+3*se[ye],oe=3*ee[ye]-3*te[ye],de|=0,ue|=0,oe|=0,ue===0&&de===0||(ue===0?(me=-oe/de,me>0&&me<1&&ae[ye].push(this.calculateF(me,te,ee,ne,se,ye))):(ve=de*de-4*oe*ue,ve>=0&&(Ee=(-de+bmSqrt(ve))/(2*ue),Ee>0&&Ee<1&&ae[ye].push(this.calculateF(Ee,te,ee,ne,se,ye)),Pe=(-de-bmSqrt(ve))/(2*ue),Pe>0&&Pe<1&&ae[ye].push(this.calculateF(Pe,te,ee,ne,se,ye)))));this.shapeBoundingBox.left=bmMin.apply(null,ae[0]),this.shapeBoundingBox.top=bmMin.apply(null,ae[1]),this.shapeBoundingBox.right=bmMax.apply(null,ae[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,ae[1])},HShapeElement.prototype.calculateF=function(te,ee,ne,se,ae,ue){return bmPow(1-te,3)*ee[ue]+3*bmPow(1-te,2)*te*ne[ue]+3*(1-te)*bmPow(te,2)*se[ue]+bmPow(te,3)*ae[ue]},HShapeElement.prototype.calculateBoundingBox=function(te,ee){var ne,se=te.length;for(ne=0;ne<se;ne+=1)te[ne]&&te[ne].sh?this.calculateShapeBoundingBox(te[ne],ee):te[ne]&&te[ne].it?this.calculateBoundingBox(te[ne].it,ee):te[ne]&&te[ne].style&&te[ne].w&&this.expandStrokeBoundingBox(te[ne].w,ee)},HShapeElement.prototype.expandStrokeBoundingBox=function(te,ee){var ne=0;if(te.keyframes){for(var se=0;se<te.keyframes.length;se+=1){var ae=te.keyframes[se].s;ae>ne&&(ne=ae)}ne*=te.mult}else ne=te.v*te.mult;ee.x-=ne,ee.xMax+=ne,ee.y-=ne,ee.yMax+=ne},HShapeElement.prototype.currentBoxContains=function(te){return this.currentBBox.x<=te.x&&this.currentBBox.y<=te.y&&this.currentBBox.width+this.currentBBox.x>=te.x+te.width&&this.currentBBox.height+this.currentBBox.y>=te.y+te.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var te=this.tempBoundingBox,ee=999999;if(te.x=ee,te.xMax=-ee,te.y=ee,te.yMax=-ee,this.calculateBoundingBox(this.itemsData,te),te.width=te.xMax<te.x?0:te.xMax-te.x,te.height=te.yMax<te.y?0:te.yMax-te.y,this.currentBoxContains(te))return;var ne=!1;if(this.currentBBox.w!==te.width&&(this.currentBBox.w=te.width,this.shapeCont.setAttribute("width",te.width),ne=!0),this.currentBBox.h!==te.height&&(this.currentBBox.h=te.height,this.shapeCont.setAttribute("height",te.height),ne=!0),ne||this.currentBBox.x!==te.x||this.currentBBox.y!==te.y){this.currentBBox.w=te.width,this.currentBBox.h=te.height,this.currentBBox.x=te.x,this.currentBBox.y=te.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var se=this.shapeCont.style,ae="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";se.transform=ae,se.webkitTransform=ae}}};function HTextElement(te,ee,ne){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(te,ee,ne)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var te=createNS("g");this.maskedElement.appendChild(te),this.innerElem=te}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var te=this.textProperty.currentData;this.renderedLetters=createSizedArray(te.l?te.l.length:0);var ee=this.innerElem.style,ne=te.fc?this.buildColor(te.fc):"rgba(0,0,0,0)";ee.fill=ne,ee.color=ne,te.sc&&(ee.stroke=this.buildColor(te.sc),ee.strokeWidth=te.sw+"px");var se=this.globalData.fontManager.getFontByName(te.f);if(!this.globalData.fontManager.chars)if(ee.fontSize=te.finalSize+"px",ee.lineHeight=te.finalSize+"px",se.fClass)this.innerElem.className=se.fClass;else{ee.fontFamily=se.fFamily;var ae=te.fWeight,ue=te.fStyle;ee.fontStyle=ue,ee.fontWeight=ae}var de,oe,me=te.l;oe=me.length;var ve,Ee,Pe,ye=this.mHelper,Te,Ae="",Ce=0;for(de=0;de<oe;de+=1){if(this.globalData.fontManager.chars?(this.textPaths[Ce]?ve=this.textPaths[Ce]:(ve=createNS("path"),ve.setAttribute("stroke-linecap",lineCapEnum[1]),ve.setAttribute("stroke-linejoin",lineJoinEnum[2]),ve.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[Ce]?(Ee=this.textSpans[Ce],Pe=Ee.children[0]):(Ee=createTag("div"),Ee.style.lineHeight=0,Pe=createNS("svg"),Pe.appendChild(ve),styleDiv(Ee)))):this.isMasked?ve=this.textPaths[Ce]?this.textPaths[Ce]:createNS("text"):this.textSpans[Ce]?(Ee=this.textSpans[Ce],ve=this.textPaths[Ce]):(Ee=createTag("span"),styleDiv(Ee),ve=createTag("span"),styleDiv(ve),Ee.appendChild(ve)),this.globalData.fontManager.chars){var De=this.globalData.fontManager.getCharData(te.finalText[de],se.fStyle,this.globalData.fontManager.getFontByName(te.f).fFamily),Ie;if(De?Ie=De.data:Ie=null,ye.reset(),Ie&&Ie.shapes&&Ie.shapes.length&&(Te=Ie.shapes[0].it,ye.scale(te.finalSize/100,te.finalSize/100),Ae=this.createPathShape(ye,Te),ve.setAttribute("d",Ae)),this.isMasked)this.innerElem.appendChild(ve);else{if(this.innerElem.appendChild(Ee),Ie&&Ie.shapes){document.body.appendChild(Pe);var ze=Pe.getBBox();Pe.setAttribute("width",ze.width+2),Pe.setAttribute("height",ze.height+2),Pe.setAttribute("viewBox",ze.x-1+" "+(ze.y-1)+" "+(ze.width+2)+" "+(ze.height+2));var Re=Pe.style,Oe="translate("+(ze.x-1)+"px,"+(ze.y-1)+"px)";Re.transform=Oe,Re.webkitTransform=Oe,me[de].yOffset=ze.y-1}else Pe.setAttribute("width",1),Pe.setAttribute("height",1);Ee.appendChild(Pe)}}else if(ve.textContent=me[de].val,ve.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(ve);else{this.innerElem.appendChild(Ee);var qe=ve.style,Ze="translate3d(0,"+-te.finalSize/1.2+"px,0)";qe.transform=Ze,qe.webkitTransform=Ze}this.isMasked?this.textSpans[Ce]=ve:this.textSpans[Ce]=Ee,this.textSpans[Ce].style.display="block",this.textPaths[Ce]=ve,Ce+=1}for(;Ce<this.textSpans.length;)this.textSpans[Ce].style.display="none",Ce+=1},HTextElement.prototype.renderInnerContent=function(){this.validateText();var te;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),te=this.svgElement.style;var ee="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";te.transform=ee,te.webkitTransform=ee}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var ne,se,ae=0,ue=this.textAnimator.renderedLetters,de=this.textProperty.currentData.l;se=de.length;var oe,me,ve;for(ne=0;ne<se;ne+=1)de[ne].n?ae+=1:(me=this.textSpans[ne],ve=this.textPaths[ne],oe=ue[ae],ae+=1,oe._mdf.m&&(this.isMasked?me.setAttribute("transform",oe.m):(me.style.webkitTransform=oe.m,me.style.transform=oe.m)),me.style.opacity=oe.o,oe.sw&&oe._mdf.sw&&ve.setAttribute("stroke-width",oe.sw),oe.sc&&oe._mdf.sc&&ve.setAttribute("stroke",oe.sc),oe.fc&&oe._mdf.fc&&(ve.setAttribute("fill",oe.fc),ve.style.color=oe.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var Ee=this.innerElem.getBBox();this.currentBBox.w!==Ee.width&&(this.currentBBox.w=Ee.width,this.svgElement.setAttribute("width",Ee.width)),this.currentBBox.h!==Ee.height&&(this.currentBBox.h=Ee.height,this.svgElement.setAttribute("height",Ee.height));var Pe=1;if(this.currentBBox.w!==Ee.width+Pe*2||this.currentBBox.h!==Ee.height+Pe*2||this.currentBBox.x!==Ee.x-Pe||this.currentBBox.y!==Ee.y-Pe){this.currentBBox.w=Ee.width+Pe*2,this.currentBBox.h=Ee.height+Pe*2,this.currentBBox.x=Ee.x-Pe,this.currentBBox.y=Ee.y-Pe,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),te=this.svgElement.style;var ye="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";te.transform=ye,te.webkitTransform=ye}}}};function HCameraElement(te,ee,ne){this.initFrame(),this.initBaseData(te,ee,ne),this.initHierarchy();var se=PropertyFactory.getProp;if(this.pe=se(this,te.pe,0,0,this),te.ks.p.s?(this.px=se(this,te.ks.p.x,1,0,this),this.py=se(this,te.ks.p.y,1,0,this),this.pz=se(this,te.ks.p.z,1,0,this)):this.p=se(this,te.ks.p,1,0,this),te.ks.a&&(this.a=se(this,te.ks.a,1,0,this)),te.ks.or.k.length&&te.ks.or.k[0].to){var ae,ue=te.ks.or.k.length;for(ae=0;ae<ue;ae+=1)te.ks.or.k[ae].to=null,te.ks.or.k[ae].ti=null}this.or=se(this,te.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=se(this,te.ks.rx,0,degToRads,this),this.ry=se(this,te.ks.ry,0,degToRads,this),this.rz=se(this,te.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var te,ee=this.comp.threeDElements.length,ne,se,ae;for(te=0;te<ee;te+=1)if(ne=this.comp.threeDElements[te],ne.type==="3d"){se=ne.perspectiveElem.style,ae=ne.container.style;var ue=this.pe.v+"px",de="0px 0px 0px",oe="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";se.perspective=ue,se.webkitPerspective=ue,ae.transformOrigin=de,ae.mozTransformOrigin=de,ae.webkitTransformOrigin=de,se.transform=oe,se.webkitTransform=oe}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var te=this._isFirstFrame,ee,ne;if(this.hierarchy)for(ne=this.hierarchy.length,ee=0;ee<ne;ee+=1)te=this.hierarchy[ee].finalTransform.mProp._mdf||te;if(te||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(ne=this.hierarchy.length-1,ee=ne;ee>=0;ee-=1){var se=this.hierarchy[ee].finalTransform.mProp;this.mat.translate(-se.p.v[0],-se.p.v[1],se.p.v[2]),this.mat.rotateX(-se.or.v[0]).rotateY(-se.or.v[1]).rotateZ(se.or.v[2]),this.mat.rotateX(-se.rx.v).rotateY(-se.ry.v).rotateZ(se.rz.v),this.mat.scale(1/se.s.v[0],1/se.s.v[1],1/se.s.v[2]),this.mat.translate(se.a.v[0],se.a.v[1],se.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var ae;this.p?ae=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:ae=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var ue=Math.sqrt(Math.pow(ae[0],2)+Math.pow(ae[1],2)+Math.pow(ae[2],2)),de=[ae[0]/ue,ae[1]/ue,ae[2]/ue],oe=Math.sqrt(de[2]*de[2]+de[0]*de[0]),me=Math.atan2(de[1],oe),ve=Math.atan2(de[0],-de[2]);this.mat.rotateY(ve).rotateX(-me)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var Ee=!this._prevMat.equals(this.mat);if((Ee||this.pe._mdf)&&this.comp.threeDElements){ne=this.comp.threeDElements.length;var Pe,ye,Te;for(ee=0;ee<ne;ee+=1)if(Pe=this.comp.threeDElements[ee],Pe.type==="3d"){if(Ee){var Ae=this.mat.toCSS();Te=Pe.container.style,Te.transform=Ae,Te.webkitTransform=Ae}this.pe._mdf&&(ye=Pe.perspectiveElem.style,ye.perspective=this.pe.v+"px",ye.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(te){this.prepareProperties(te,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HImageElement(te,ee,ne){this.assetData=ee.getAssetData(te.refId),this.initElement(te,ee,ne)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var te=this.globalData.getAssetsPath(this.assetData),ee=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",te),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(ee),ee.crossOrigin="anonymous",ee.src=te,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HybridRendererBase(te,ee){this.animationItem=te,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:ee&&ee.className||"",imagePreserveAspectRatio:ee&&ee.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(ee&&ee.hideOnTransparent===!1),filterSize:{width:ee&&ee.filterSize&&ee.filterSize.width||"400%",height:ee&&ee.filterSize&&ee.filterSize.height||"400%",x:ee&&ee.filterSize&&ee.filterSize.x||"-100%",y:ee&&ee.filterSize&&ee.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var te=this.pendingElements.pop();te.checkParenting()}},HybridRendererBase.prototype.appendElementInPos=function(te,ee){var ne=te.getBaseElement();if(!!ne){var se=this.layers[ee];if(!se.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer(ne,ee);else{for(var ae=0,ue,de,oe;ae<ee;)this.elements[ae]&&this.elements[ae]!==!0&&this.elements[ae].getBaseElement&&(de=this.elements[ae],oe=this.layers[ae].ddd?this.getThreeDContainerByPos(ae):de.getBaseElement(),ue=oe||ue),ae+=1;ue?(!se.ddd||!this.supports3d)&&this.layerElement.insertBefore(ne,ue):(!se.ddd||!this.supports3d)&&this.layerElement.appendChild(ne)}else this.addTo3dContainer(ne,ee)}},HybridRendererBase.prototype.createShape=function(te){return this.supports3d?new HShapeElement(te,this.globalData,this):new SVGShapeElement(te,this.globalData,this)},HybridRendererBase.prototype.createText=function(te){return this.supports3d?new HTextElement(te,this.globalData,this):new SVGTextLottieElement(te,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(te){return this.camera=new HCameraElement(te,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(te){return this.supports3d?new HImageElement(te,this.globalData,this):new IImageElement(te,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(te){return this.supports3d?new HSolidElement(te,this.globalData,this):new ISolidElement(te,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(te){for(var ee=0,ne=this.threeDElements.length;ee<ne;){if(this.threeDElements[ee].startPos<=te&&this.threeDElements[ee].endPos>=te)return this.threeDElements[ee].perspectiveElem;ee+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(te,ee){var ne=createTag("div"),se,ae;styleDiv(ne);var ue=createTag("div");if(styleDiv(ue),ee==="3d"){se=ne.style,se.width=this.globalData.compSize.w+"px",se.height=this.globalData.compSize.h+"px";var de="50% 50%";se.webkitTransformOrigin=de,se.mozTransformOrigin=de,se.transformOrigin=de,ae=ue.style;var oe="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";ae.transform=oe,ae.webkitTransform=oe}ne.appendChild(ue);var me={container:ue,perspectiveElem:ne,startPos:te,endPos:te,type:ee};return this.threeDElements.push(me),me},HybridRendererBase.prototype.build3dContainers=function(){var te,ee=this.layers.length,ne,se="";for(te=0;te<ee;te+=1)this.layers[te].ddd&&this.layers[te].ty!==3?(se!=="3d"&&(se="3d",ne=this.createThreeDContainer(te,"3d")),ne.endPos=Math.max(ne.endPos,te)):(se!=="2d"&&(se="2d",ne=this.createThreeDContainer(te,"2d")),ne.endPos=Math.max(ne.endPos,te));for(ee=this.threeDElements.length,te=ee-1;te>=0;te-=1)this.resizerElem.appendChild(this.threeDElements[te].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(te,ee){for(var ne=0,se=this.threeDElements.length;ne<se;){if(ee<=this.threeDElements[ne].endPos){for(var ae=this.threeDElements[ne].startPos,ue;ae<ee;)this.elements[ae]&&this.elements[ae].getBaseElement&&(ue=this.elements[ae].getBaseElement()),ae+=1;ue?this.threeDElements[ne].container.insertBefore(te,ue):this.threeDElements[ne].container.appendChild(te);break}ne+=1}},HybridRendererBase.prototype.configAnimation=function(te){var ee=createTag("div"),ne=this.animationItem.wrapper,se=ee.style;se.width=te.w+"px",se.height=te.h+"px",this.resizerElem=ee,styleDiv(ee),se.transformStyle="flat",se.mozTransformStyle="flat",se.webkitTransformStyle="flat",this.renderConfig.className&&ee.setAttribute("class",this.renderConfig.className),ne.appendChild(ee),se.overflow="hidden";var ae=createNS("svg");ae.setAttribute("width","1"),ae.setAttribute("height","1"),styleDiv(ae),this.resizerElem.appendChild(ae);var ue=createNS("defs");ae.appendChild(ue),this.data=te,this.setupGlobalData(te,ae),this.globalData.defs=ue,this.layers=te.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var te,ee=this.layers?this.layers.length:0;for(te=0;te<ee;te+=1)this.elements[te]&&this.elements[te].destroy&&this.elements[te].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var te=this.animationItem.wrapper.offsetWidth,ee=this.animationItem.wrapper.offsetHeight,ne=te/ee,se=this.globalData.compSize.w/this.globalData.compSize.h,ae,ue,de,oe;se>ne?(ae=te/this.globalData.compSize.w,ue=te/this.globalData.compSize.w,de=0,oe=(ee-this.globalData.compSize.h*(te/this.globalData.compSize.w))/2):(ae=ee/this.globalData.compSize.h,ue=ee/this.globalData.compSize.h,de=(te-this.globalData.compSize.w*(ee/this.globalData.compSize.h))/2,oe=0);var me=this.resizerElem.style;me.webkitTransform="matrix3d("+ae+",0,0,0,0,"+ue+",0,0,0,0,1,0,"+de+","+oe+",0,1)",me.transform=me.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var te=this.globalData.compSize.w,ee=this.globalData.compSize.h,ne,se=this.threeDElements.length;for(ne=0;ne<se;ne+=1){var ae=this.threeDElements[ne].perspectiveElem.style;ae.webkitPerspective=Math.sqrt(Math.pow(te,2)+Math.pow(ee,2))+"px",ae.perspective=ae.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(te){var ee,ne=te.length,se=createTag("div");for(ee=0;ee<ne;ee+=1)if(te[ee].xt){var ae=this.createComp(te[ee],se,this.globalData.comp,null);ae.initExpressions(),this.globalData.projectInterface.registerComposition(ae)}};function HCompElement(te,ee,ne){this.layers=te.layers,this.supports3d=!te.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(te,ee,ne),this.tm=te.tm?PropertyFactory.getProp(this,te.tm,0,ee.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(te,ee){for(var ne=0,se;ne<ee;)this.elements[ne]&&this.elements[ne].getBaseElement&&(se=this.elements[ne].getBaseElement()),ne+=1;se?this.layerElement.insertBefore(te,se):this.layerElement.appendChild(te)},HCompElement.prototype.createComp=function(te){return this.supports3d?new HCompElement(te,this.globalData,this):new SVGCompElement(te,this.globalData,this)};function HybridRenderer(te,ee){this.animationItem=te,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:ee&&ee.className||"",imagePreserveAspectRatio:ee&&ee.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(ee&&ee.hideOnTransparent===!1),filterSize:{width:ee&&ee.filterSize&&ee.filterSize.width||"400%",height:ee&&ee.filterSize&&ee.filterSize.height||"400%",x:ee&&ee.filterSize&&ee.filterSize.x||"-100%",y:ee&&ee.filterSize&&ee.filterSize.y||"-100%"},runExpressions:!ee||ee.runExpressions===void 0||ee.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(te){return this.supports3d?new HCompElement(te,this.globalData,this):new SVGCompElement(te,this.globalData,this)};var CompExpressionInterface=function(){return function(te){function ee(ne){for(var se=0,ae=te.layers.length;se<ae;){if(te.layers[se].nm===ne||te.layers[se].ind===ne)return te.elements[se].layerInterface;se+=1}return null}return Object.defineProperty(ee,"_name",{value:te.data.nm}),ee.layer=ee,ee.pixelAspect=1,ee.height=te.data.h||te.globalData.compSize.h,ee.width=te.data.w||te.globalData.compSize.w,ee.pixelAspect=1,ee.frameDuration=1/te.globalData.frameRate,ee.displayStartTime=0,ee.numLayers=te.layers.length,ee}}();function _typeof$2(te){return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ee){return typeof ee}:function(ee){return ee&&typeof Symbol=="function"&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee},_typeof$2(te)}function seedRandom(te,ee){var ne=this,se=256,ae=6,ue=52,de="random",oe=ee.pow(se,ae),me=ee.pow(2,ue),ve=me*2,Ee=se-1,Pe;function ye(Re,Oe,qe){var Ze=[];Oe=Oe===!0?{entropy:!0}:Oe||{};var Ue=De(Ce(Oe.entropy?[Re,ze(te)]:Re===null?Ie():Re,3),Ze),Ye=new Te(Ze),ct=function(){for(var ft=Ye.g(ae),pt=oe,Mt=0;ft<me;)ft=(ft+Mt)*se,pt*=se,Mt=Ye.g(1);for(;ft>=ve;)ft/=2,pt/=2,Mt>>>=1;return(ft+Mt)/pt};return ct.int32=function(){return Ye.g(4)|0},ct.quick=function(){return Ye.g(4)/4294967296},ct.double=ct,De(ze(Ye.S),te),(Oe.pass||qe||function(at,ft,pt,Mt){return Mt&&(Mt.S&&Ae(Mt,Ye),at.state=function(){return Ae(Ye,{})}),pt?(ee[de]=at,ft):at})(ct,Ue,"global"in Oe?Oe.global:this==ee,Oe.state)}ee["seed"+de]=ye;function Te(Re){var Oe,qe=Re.length,Ze=this,Ue=0,Ye=Ze.i=Ze.j=0,ct=Ze.S=[];for(qe||(Re=[qe++]);Ue<se;)ct[Ue]=Ue++;for(Ue=0;Ue<se;Ue++)ct[Ue]=ct[Ye=Ee&Ye+Re[Ue%qe]+(Oe=ct[Ue])],ct[Ye]=Oe;Ze.g=function(at){for(var ft,pt=0,Mt=Ze.i,At=Ze.j,_t=Ze.S;at--;)ft=_t[Mt=Ee&Mt+1],pt=pt*se+_t[Ee&(_t[Mt]=_t[At=Ee&At+ft])+(_t[At]=ft)];return Ze.i=Mt,Ze.j=At,pt}}function Ae(Re,Oe){return Oe.i=Re.i,Oe.j=Re.j,Oe.S=Re.S.slice(),Oe}function Ce(Re,Oe){var qe=[],Ze=_typeof$2(Re),Ue;if(Oe&&Ze=="object")for(Ue in Re)try{qe.push(Ce(Re[Ue],Oe-1))}catch{}return qe.length?qe:Ze=="string"?Re:Re+"\0"}function De(Re,Oe){for(var qe=Re+"",Ze,Ue=0;Ue<qe.length;)Oe[Ee&Ue]=Ee&(Ze^=Oe[Ee&Ue]*19)+qe.charCodeAt(Ue++);return ze(Oe)}function Ie(){try{var Re=new Uint8Array(se);return(ne.crypto||ne.msCrypto).getRandomValues(Re),ze(Re)}catch{var Oe=ne.navigator,qe=Oe&&Oe.plugins;return[+new Date,ne,qe,ne.screen,ze(te)]}}function ze(Re){return String.fromCharCode.apply(0,Re)}De(ee.random(),te)}function initialize$2(te){seedRandom([],te)}var propTypes={SHAPE:"shape"};function _typeof$1(te){return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ee){return typeof ee}:function(ee){return ee&&typeof Symbol=="function"&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee},_typeof$1(te)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};initialize$2(BMMath);function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(te){return te.constructor===Array||te.constructor===Float32Array}function isNumerable(te,ee){return te==="number"||ee instanceof Number||te==="boolean"||te==="string"}function $bm_neg(te){var ee=_typeof$1(te);if(ee==="number"||te instanceof Number||ee==="boolean")return-te;if($bm_isInstanceOfArray(te)){var ne,se=te.length,ae=[];for(ne=0;ne<se;ne+=1)ae[ne]=-te[ne];return ae}return te.propType?te.v:-te}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(te,ee){var ne=_typeof$1(te),se=_typeof$1(ee);if(isNumerable(ne,te)&&isNumerable(se,ee)||ne==="string"||se==="string")return te+ee;if($bm_isInstanceOfArray(te)&&isNumerable(se,ee))return te=te.slice(0),te[0]+=ee,te;if(isNumerable(ne,te)&&$bm_isInstanceOfArray(ee))return ee=ee.slice(0),ee[0]=te+ee[0],ee;if($bm_isInstanceOfArray(te)&&$bm_isInstanceOfArray(ee)){for(var ae=0,ue=te.length,de=ee.length,oe=[];ae<ue||ae<de;)(typeof te[ae]=="number"||te[ae]instanceof Number)&&(typeof ee[ae]=="number"||ee[ae]instanceof Number)?oe[ae]=te[ae]+ee[ae]:oe[ae]=ee[ae]===void 0?te[ae]:te[ae]||ee[ae],ae+=1;return oe}return 0}var add=sum;function sub(te,ee){var ne=_typeof$1(te),se=_typeof$1(ee);if(isNumerable(ne,te)&&isNumerable(se,ee))return ne==="string"&&(te=parseInt(te,10)),se==="string"&&(ee=parseInt(ee,10)),te-ee;if($bm_isInstanceOfArray(te)&&isNumerable(se,ee))return te=te.slice(0),te[0]-=ee,te;if(isNumerable(ne,te)&&$bm_isInstanceOfArray(ee))return ee=ee.slice(0),ee[0]=te-ee[0],ee;if($bm_isInstanceOfArray(te)&&$bm_isInstanceOfArray(ee)){for(var ae=0,ue=te.length,de=ee.length,oe=[];ae<ue||ae<de;)(typeof te[ae]=="number"||te[ae]instanceof Number)&&(typeof ee[ae]=="number"||ee[ae]instanceof Number)?oe[ae]=te[ae]-ee[ae]:oe[ae]=ee[ae]===void 0?te[ae]:te[ae]||ee[ae],ae+=1;return oe}return 0}function mul(te,ee){var ne=_typeof$1(te),se=_typeof$1(ee),ae;if(isNumerable(ne,te)&&isNumerable(se,ee))return te*ee;var ue,de;if($bm_isInstanceOfArray(te)&&isNumerable(se,ee)){for(de=te.length,ae=createTypedArray("float32",de),ue=0;ue<de;ue+=1)ae[ue]=te[ue]*ee;return ae}if(isNumerable(ne,te)&&$bm_isInstanceOfArray(ee)){for(de=ee.length,ae=createTypedArray("float32",de),ue=0;ue<de;ue+=1)ae[ue]=te*ee[ue];return ae}return 0}function div(te,ee){var ne=_typeof$1(te),se=_typeof$1(ee),ae;if(isNumerable(ne,te)&&isNumerable(se,ee))return te/ee;var ue,de;if($bm_isInstanceOfArray(te)&&isNumerable(se,ee)){for(de=te.length,ae=createTypedArray("float32",de),ue=0;ue<de;ue+=1)ae[ue]=te[ue]/ee;return ae}if(isNumerable(ne,te)&&$bm_isInstanceOfArray(ee)){for(de=ee.length,ae=createTypedArray("float32",de),ue=0;ue<de;ue+=1)ae[ue]=te/ee[ue];return ae}return 0}function mod(te,ee){return typeof te=="string"&&(te=parseInt(te,10)),typeof ee=="string"&&(ee=parseInt(ee,10)),te%ee}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(te,ee,ne){if(ee>ne){var se=ne;ne=ee,ee=se}return Math.min(Math.max(te,ee),ne)}function radiansToDegrees(te){return te/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(te){return te*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(te,ee){if(typeof te=="number"||te instanceof Number)return ee=ee||0,Math.abs(te-ee);ee||(ee=helperLengthArray);var ne,se=Math.min(te.length,ee.length),ae=0;for(ne=0;ne<se;ne+=1)ae+=Math.pow(ee[ne]-te[ne],2);return Math.sqrt(ae)}function normalize(te){return div(te,length(te))}function rgbToHsl(te){var ee=te[0],ne=te[1],se=te[2],ae=Math.max(ee,ne,se),ue=Math.min(ee,ne,se),de,oe,me=(ae+ue)/2;if(ae===ue)de=0,oe=0;else{var ve=ae-ue;switch(oe=me>.5?ve/(2-ae-ue):ve/(ae+ue),ae){case ee:de=(ne-se)/ve+(ne<se?6:0);break;case ne:de=(se-ee)/ve+2;break;case se:de=(ee-ne)/ve+4;break}de/=6}return[de,oe,me,te[3]]}function hue2rgb(te,ee,ne){return ne<0&&(ne+=1),ne>1&&(ne-=1),ne<1/6?te+(ee-te)*6*ne:ne<1/2?ee:ne<2/3?te+(ee-te)*(2/3-ne)*6:te}function hslToRgb(te){var ee=te[0],ne=te[1],se=te[2],ae,ue,de;if(ne===0)ae=se,de=se,ue=se;else{var oe=se<.5?se*(1+ne):se+ne-se*ne,me=2*se-oe;ae=hue2rgb(me,oe,ee+1/3),ue=hue2rgb(me,oe,ee),de=hue2rgb(me,oe,ee-1/3)}return[ae,ue,de,te[3]]}function linear(te,ee,ne,se,ae){if((se===void 0||ae===void 0)&&(se=ee,ae=ne,ee=0,ne=1),ne<ee){var ue=ne;ne=ee,ee=ue}if(te<=ee)return se;if(te>=ne)return ae;var de=ne===ee?0:(te-ee)/(ne-ee);if(!se.length)return se+(ae-se)*de;var oe,me=se.length,ve=createTypedArray("float32",me);for(oe=0;oe<me;oe+=1)ve[oe]=se[oe]+(ae[oe]-se[oe])*de;return ve}function random(te,ee){if(ee===void 0&&(te===void 0?(te=0,ee=1):(ee=te,te=void 0)),ee.length){var ne,se=ee.length;te||(te=createTypedArray("float32",se));var ae=createTypedArray("float32",se),ue=BMMath.random();for(ne=0;ne<se;ne+=1)ae[ne]=te[ne]+ue*(ee[ne]-te[ne]);return ae}te===void 0&&(te=0);var de=BMMath.random();return te+de*(ee-te)}function createPath(te,ee,ne,se){var ae,ue=te.length,de=shapePool.newElement();de.setPathData(!!se,ue);var oe=[0,0],me,ve;for(ae=0;ae<ue;ae+=1)me=ee&&ee[ae]?ee[ae]:oe,ve=ne&&ne[ae]?ne[ae]:oe,de.setTripleAt(te[ae][0],te[ae][1],ve[0]+te[ae][0],ve[1]+te[ae][1],me[0]+te[ae][0],me[1]+te[ae][1],ae,!0);return de}function initiateExpression(elem,data,property){function noOp(te){return te}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty._name=elem.data.nm,thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=function te(ee,ne){var se,ae,ue=this.pv.length?this.pv.length:1,de=createTypedArray("float32",ue);ee=5;var oe=Math.floor(time*ee);for(se=0,ae=0;se<oe;){for(ae=0;ae<ue;ae+=1)de[ae]+=-ne+ne*2*BMMath.random();se+=1}var me=time*ee,ve=me-Math.floor(me),Ee=createTypedArray("float32",ue);if(ue>1){for(ae=0;ae<ue;ae+=1)Ee[ae]=this.pv[ae]+de[ae]+(-ne+ne*2*BMMath.random())*ve;return Ee}return this.pv+de[0]+(-ne+ne*2*BMMath.random())*ve}.bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration(te,ee){return loopIn(te,ee,!0)}function loopOutDuration(te,ee){return loopOut(te,ee,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(te,ee){var ne=[ee[0]-te[0],ee[1]-te[1],ee[2]-te[2]],se=Math.atan2(ne[0],Math.sqrt(ne[1]*ne[1]+ne[2]*ne[2]))/degToRads,ae=-Math.atan2(ne[1],ne[2])/degToRads;return[ae,se,0]}function easeOut(te,ee,ne,se,ae){return applyEase(easeOutBez,te,ee,ne,se,ae)}function easeIn(te,ee,ne,se,ae){return applyEase(easeInBez,te,ee,ne,se,ae)}function ease(te,ee,ne,se,ae){return applyEase(easeInOutBez,te,ee,ne,se,ae)}function applyEase(te,ee,ne,se,ae,ue){ae===void 0?(ae=ne,ue=se):ee=(ee-ne)/(se-ne),ee>1?ee=1:ee<0&&(ee=0);var de=te(ee);if($bm_isInstanceOfArray(ae)){var oe,me=ae.length,ve=createTypedArray("float32",me);for(oe=0;oe<me;oe+=1)ve[oe]=(ue[oe]-ae[oe])*de+ae[oe];return ve}return(ue-ae)*de+ae}function nearestKey(te){var ee,ne=data.k.length,se,ae;if(!data.k.length||typeof data.k[0]=="number")se=0,ae=0;else if(se=-1,te*=elem.comp.globalData.frameRate,te<data.k[0].t)se=1,ae=data.k[0].t;else{for(ee=0;ee<ne-1;ee+=1)if(te===data.k[ee].t){se=ee+1,ae=data.k[ee].t;break}else if(te>data.k[ee].t&&te<data.k[ee+1].t){te-data.k[ee].t>data.k[ee+1].t-te?(se=ee+2,ae=data.k[ee+1].t):(se=ee+1,ae=data.k[ee].t);break}se===-1&&(se=ee+1,ae=data.k[ee].t)}var ue={};return ue.index=se,ue.time=ae/elem.comp.globalData.frameRate,ue}function key(te){var ee,ne,se;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+te);te-=1,ee={time:data.k[te].t/elem.comp.globalData.frameRate,value:[]};var ae=Object.prototype.hasOwnProperty.call(data.k[te],"s")?data.k[te].s:data.k[te-1].e;for(se=ae.length,ne=0;ne<se;ne+=1)ee[ne]=ae[ne],ee.value[ne]=ae[ne];return ee}function framesToTime(te,ee){return ee||(ee=elem.comp.globalData.frameRate),te/ee}function timeToFrames(te,ee){return!te&&te!==0&&(te=time),ee||(ee=elem.comp.globalData.frameRate),te*ee}function seedRandom(te){BMMath.seedrandom(randSeed+te)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(te,ee){return typeof value=="string"?ee===void 0?value.substring(te):value.substring(te,ee):""}function substr(te,ee){return typeof value=="string"?ee===void 0?value.substr(te):value.substr(te,ee):""}function posterizeTime(te){time=te===0?0:Math.floor(time*te)/te,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(te){return value=te,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var te={};te.initExpressions=ee,te.resetFrame=ExpressionManager.resetFrame;function ee(ne){var se=0,ae=[];function ue(){se+=1}function de(){se-=1,se===0&&me()}function oe(ve){ae.indexOf(ve)===-1&&ae.push(ve)}function me(){var ve,Ee=ae.length;for(ve=0;ve<Ee;ve+=1)ae[ve].release();ae.length=0}ne.renderer.compInterface=CompExpressionInterface(ne.renderer),ne.renderer.globalData.projectInterface.registerComposition(ne.renderer),ne.renderer.globalData.pushExpression=ue,ne.renderer.globalData.popExpression=de,ne.renderer.globalData.registerExpressionProperty=oe}return te}(),MaskManagerInterface=function(){function te(ne,se){this._mask=ne,this._data=se}Object.defineProperty(te.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(te.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var ee=function(se){var ae=createSizedArray(se.viewData.length),ue,de=se.viewData.length;for(ue=0;ue<de;ue+=1)ae[ue]=new te(se.viewData[ue],se.masksProperties[ue]);var oe=function(ve){for(ue=0;ue<de;){if(se.masksProperties[ue].nm===ve)return ae[ue];ue+=1}return null};return oe};return ee}(),ExpressionPropertyInterface=function(){var te={pv:0,v:0,mult:1},ee={pv:[0,0,0],v:[0,0,0],mult:1};function ne(de,oe,me){Object.defineProperty(de,"velocity",{get:function(){return oe.getVelocityAtTime(oe.comp.currentFrame)}}),de.numKeys=oe.keyframes?oe.keyframes.length:0,de.key=function(ve){if(!de.numKeys)return 0;var Ee="";"s"in oe.keyframes[ve-1]?Ee=oe.keyframes[ve-1].s:"e"in oe.keyframes[ve-2]?Ee=oe.keyframes[ve-2].e:Ee=oe.keyframes[ve-2].s;var Pe=me==="unidimensional"?new Number(Ee):Object.assign({},Ee);return Pe.time=oe.keyframes[ve-1].t/oe.elem.comp.globalData.frameRate,Pe.value=me==="unidimensional"?Ee[0]:Ee,Pe},de.valueAtTime=oe.getValueAtTime,de.speedAtTime=oe.getSpeedAtTime,de.velocityAtTime=oe.getVelocityAtTime,de.propertyGroup=oe.propertyGroup}function se(de){(!de||!("pv"in de))&&(de=te);var oe=1/de.mult,me=de.pv*oe,ve=new Number(me);return ve.value=me,ne(ve,de,"unidimensional"),function(){return de.k&&de.getValue(),me=de.v*oe,ve.value!==me&&(ve=new Number(me),ve.value=me,ve[0]=me,ne(ve,de,"unidimensional")),ve}}function ae(de){(!de||!("pv"in de))&&(de=ee);var oe=1/de.mult,me=de.data&&de.data.l||de.pv.length,ve=createTypedArray("float32",me),Ee=createTypedArray("float32",me);return ve.value=Ee,ne(ve,de,"multidimensional"),function(){de.k&&de.getValue();for(var Pe=0;Pe<me;Pe+=1)Ee[Pe]=de.v[Pe]*oe,ve[Pe]=Ee[Pe];return ve}}function ue(){return te}return function(de){return de?de.propType==="unidimensional"?se(de):ae(de):ue}}(),TransformExpressionInterface=function(){return function(te){function ee(de){switch(de){case"scale":case"Scale":case"ADBE Scale":case 6:return ee.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return ee.rotation;case"ADBE Rotate X":return ee.xRotation;case"ADBE Rotate Y":return ee.yRotation;case"position":case"Position":case"ADBE Position":case 2:return ee.position;case"ADBE Position_0":return ee.xPosition;case"ADBE Position_1":return ee.yPosition;case"ADBE Position_2":return ee.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return ee.anchorPoint;case"opacity":case"Opacity":case 11:return ee.opacity;default:return null}}Object.defineProperty(ee,"rotation",{get:ExpressionPropertyInterface(te.r||te.rz)}),Object.defineProperty(ee,"zRotation",{get:ExpressionPropertyInterface(te.rz||te.r)}),Object.defineProperty(ee,"xRotation",{get:ExpressionPropertyInterface(te.rx)}),Object.defineProperty(ee,"yRotation",{get:ExpressionPropertyInterface(te.ry)}),Object.defineProperty(ee,"scale",{get:ExpressionPropertyInterface(te.s)});var ne,se,ae,ue;return te.p?ue=ExpressionPropertyInterface(te.p):(ne=ExpressionPropertyInterface(te.px),se=ExpressionPropertyInterface(te.py),te.pz&&(ae=ExpressionPropertyInterface(te.pz))),Object.defineProperty(ee,"position",{get:function(){return te.p?ue():[ne(),se(),ae?ae():0]}}),Object.defineProperty(ee,"xPosition",{get:ExpressionPropertyInterface(te.px)}),Object.defineProperty(ee,"yPosition",{get:ExpressionPropertyInterface(te.py)}),Object.defineProperty(ee,"zPosition",{get:ExpressionPropertyInterface(te.pz)}),Object.defineProperty(ee,"anchorPoint",{get:ExpressionPropertyInterface(te.a)}),Object.defineProperty(ee,"opacity",{get:ExpressionPropertyInterface(te.o)}),Object.defineProperty(ee,"skew",{get:ExpressionPropertyInterface(te.sk)}),Object.defineProperty(ee,"skewAxis",{get:ExpressionPropertyInterface(te.sa)}),Object.defineProperty(ee,"orientation",{get:ExpressionPropertyInterface(te.or)}),ee}}(),LayerExpressionInterface=function(){function te(ve){var Ee=new Matrix;if(ve!==void 0){var Pe=this._elem.finalTransform.mProp.getValueAtTime(ve);Pe.clone(Ee)}else{var ye=this._elem.finalTransform.mProp;ye.applyToMatrix(Ee)}return Ee}function ee(ve,Ee){var Pe=this.getMatrix(Ee);return Pe.props[12]=0,Pe.props[13]=0,Pe.props[14]=0,this.applyPoint(Pe,ve)}function ne(ve,Ee){var Pe=this.getMatrix(Ee);return this.applyPoint(Pe,ve)}function se(ve,Ee){var Pe=this.getMatrix(Ee);return Pe.props[12]=0,Pe.props[13]=0,Pe.props[14]=0,this.invertPoint(Pe,ve)}function ae(ve,Ee){var Pe=this.getMatrix(Ee);return this.invertPoint(Pe,ve)}function ue(ve,Ee){if(this._elem.hierarchy&&this._elem.hierarchy.length){var Pe,ye=this._elem.hierarchy.length;for(Pe=0;Pe<ye;Pe+=1)this._elem.hierarchy[Pe].finalTransform.mProp.applyToMatrix(ve)}return ve.applyToPointArray(Ee[0],Ee[1],Ee[2]||0)}function de(ve,Ee){if(this._elem.hierarchy&&this._elem.hierarchy.length){var Pe,ye=this._elem.hierarchy.length;for(Pe=0;Pe<ye;Pe+=1)this._elem.hierarchy[Pe].finalTransform.mProp.applyToMatrix(ve)}return ve.inversePoint(Ee)}function oe(ve){var Ee=new Matrix;if(Ee.reset(),this._elem.finalTransform.mProp.applyToMatrix(Ee),this._elem.hierarchy&&this._elem.hierarchy.length){var Pe,ye=this._elem.hierarchy.length;for(Pe=0;Pe<ye;Pe+=1)this._elem.hierarchy[Pe].finalTransform.mProp.applyToMatrix(Ee);return Ee.inversePoint(ve)}return Ee.inversePoint(ve)}function me(){return[1,1,1,1]}return function(ve){var Ee;function Pe(Ce){Te.mask=new MaskManagerInterface(Ce,ve)}function ye(Ce){Te.effect=Ce}function Te(Ce){switch(Ce){case"ADBE Root Vectors Group":case"Contents":case 2:return Te.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return Ee;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return Te.effect;case"ADBE Text Properties":return Te.textInterface;default:return null}}Te.getMatrix=te,Te.invertPoint=de,Te.applyPoint=ue,Te.toWorld=ne,Te.toWorldVec=ee,Te.fromWorld=ae,Te.fromWorldVec=se,Te.toComp=ne,Te.fromComp=oe,Te.sampleImage=me,Te.sourceRectAtTime=ve.sourceRectAtTime.bind(ve),Te._elem=ve,Ee=TransformExpressionInterface(ve.finalTransform.mProp);var Ae=getDescriptor(Ee,"anchorPoint");return Object.defineProperties(Te,{hasParent:{get:function(){return ve.hierarchy.length}},parent:{get:function(){return ve.hierarchy[0].layerInterface}},rotation:getDescriptor(Ee,"rotation"),scale:getDescriptor(Ee,"scale"),position:getDescriptor(Ee,"position"),opacity:getDescriptor(Ee,"opacity"),anchorPoint:Ae,anchor_point:Ae,transform:{get:function(){return Ee}},active:{get:function(){return ve.isInRange}}}),Te.startTime=ve.data.st,Te.index=ve.data.ind,Te.source=ve.data.refId,Te.height=ve.data.ty===0?ve.data.h:100,Te.width=ve.data.ty===0?ve.data.w:100,Te.inPoint=ve.data.ip/ve.comp.globalData.frameRate,Te.outPoint=ve.data.op/ve.comp.globalData.frameRate,Te._name=ve.data.nm,Te.registerMaskInterface=Pe,Te.registerEffectsInterface=ye,Te}}(),propertyGroupFactory=function(){return function(te,ee){return function(ne){return ne=ne===void 0?1:ne,ne<=0?te:ee(ne-1)}}}(),PropertyInterface=function(){return function(te,ee){var ne={_name:te};function se(ae){return ae=ae===void 0?1:ae,ae<=0?ne:ee(ae-1)}return se}}(),EffectsExpressionInterface=function(){var te={createEffectsInterface:ee};function ee(ae,ue){if(ae.effectsManager){var de=[],oe=ae.data.ef,me,ve=ae.effectsManager.effectElements.length;for(me=0;me<ve;me+=1)de.push(ne(oe[me],ae.effectsManager.effectElements[me],ue,ae));var Ee=ae.data.ef||[],Pe=function(Te){for(me=0,ve=Ee.length;me<ve;){if(Te===Ee[me].nm||Te===Ee[me].mn||Te===Ee[me].ix)return de[me];me+=1}return null};return Object.defineProperty(Pe,"numProperties",{get:function(){return Ee.length}}),Pe}return null}function ne(ae,ue,de,oe){function me(Te){for(var Ae=ae.ef,Ce=0,De=Ae.length;Ce<De;){if(Te===Ae[Ce].nm||Te===Ae[Ce].mn||Te===Ae[Ce].ix)return Ae[Ce].ty===5?Ee[Ce]:Ee[Ce]();Ce+=1}throw new Error}var ve=propertyGroupFactory(me,de),Ee=[],Pe,ye=ae.ef.length;for(Pe=0;Pe<ye;Pe+=1)ae.ef[Pe].ty===5?Ee.push(ne(ae.ef[Pe],ue.effectElements[Pe],ue.effectElements[Pe].propertyGroup,oe)):Ee.push(se(ue.effectElements[Pe],ae.ef[Pe].ty,oe,ve));return ae.mn==="ADBE Color Control"&&Object.defineProperty(me,"color",{get:function(){return Ee[0]()}}),Object.defineProperties(me,{numProperties:{get:function(){return ae.np}},_name:{value:ae.nm},propertyGroup:{value:ve}}),me.enabled=ae.en!==0,me.active=me.enabled,me}function se(ae,ue,de,oe){var me=ExpressionPropertyInterface(ae.p);function ve(){return ue===10?de.comp.compInterface(ae.p.v):me()}return ae.p.setGroupProperty&&ae.p.setGroupProperty(PropertyInterface("",oe)),ve}return te}(),ShapePathInterface=function(){return function(ee,ne,se){var ae=ne.sh;function ue(oe){return oe==="Shape"||oe==="shape"||oe==="Path"||oe==="path"||oe==="ADBE Vector Shape"||oe===2?ue.path:null}var de=propertyGroupFactory(ue,se);return ae.setGroupProperty(PropertyInterface("Path",de)),Object.defineProperties(ue,{path:{get:function(){return ae.k&&ae.getValue(),ae}},shape:{get:function(){return ae.k&&ae.getValue(),ae}},_name:{value:ee.nm},ix:{value:ee.ix},propertyIndex:{value:ee.ix},mn:{value:ee.mn},propertyGroup:{value:se}}),ue}}(),ShapeExpressionInterface=function(){function te(Ae,Ce,De){var Ie=[],ze,Re=Ae?Ae.length:0;for(ze=0;ze<Re;ze+=1)Ae[ze].ty==="gr"?Ie.push(ne(Ae[ze],Ce[ze],De)):Ae[ze].ty==="fl"?Ie.push(se(Ae[ze],Ce[ze],De)):Ae[ze].ty==="st"?Ie.push(de(Ae[ze],Ce[ze],De)):Ae[ze].ty==="tm"?Ie.push(oe(Ae[ze],Ce[ze],De)):Ae[ze].ty==="tr"||(Ae[ze].ty==="el"?Ie.push(ve(Ae[ze],Ce[ze],De)):Ae[ze].ty==="sr"?Ie.push(Ee(Ae[ze],Ce[ze],De)):Ae[ze].ty==="sh"?Ie.push(ShapePathInterface(Ae[ze],Ce[ze],De)):Ae[ze].ty==="rc"?Ie.push(Pe(Ae[ze],Ce[ze],De)):Ae[ze].ty==="rd"?Ie.push(ye(Ae[ze],Ce[ze],De)):Ae[ze].ty==="rp"?Ie.push(Te(Ae[ze],Ce[ze],De)):Ae[ze].ty==="gf"?Ie.push(ae(Ae[ze],Ce[ze],De)):Ie.push(ue(Ae[ze],Ce[ze])));return Ie}function ee(Ae,Ce,De){var Ie,ze=function(qe){for(var Ze=0,Ue=Ie.length;Ze<Ue;){if(Ie[Ze]._name===qe||Ie[Ze].mn===qe||Ie[Ze].propertyIndex===qe||Ie[Ze].ix===qe||Ie[Ze].ind===qe)return Ie[Ze];Ze+=1}return typeof qe=="number"?Ie[qe-1]:null};ze.propertyGroup=propertyGroupFactory(ze,De),Ie=te(Ae.it,Ce.it,ze.propertyGroup),ze.numProperties=Ie.length;var Re=me(Ae.it[Ae.it.length-1],Ce.it[Ce.it.length-1],ze.propertyGroup);return ze.transform=Re,ze.propertyIndex=Ae.cix,ze._name=Ae.nm,ze}function ne(Ae,Ce,De){var Ie=function(qe){switch(qe){case"ADBE Vectors Group":case"Contents":case 2:return Ie.content;default:return Ie.transform}};Ie.propertyGroup=propertyGroupFactory(Ie,De);var ze=ee(Ae,Ce,Ie.propertyGroup),Re=me(Ae.it[Ae.it.length-1],Ce.it[Ce.it.length-1],Ie.propertyGroup);return Ie.content=ze,Ie.transform=Re,Object.defineProperty(Ie,"_name",{get:function(){return Ae.nm}}),Ie.numProperties=Ae.np,Ie.propertyIndex=Ae.ix,Ie.nm=Ae.nm,Ie.mn=Ae.mn,Ie}function se(Ae,Ce,De){function Ie(ze){return ze==="Color"||ze==="color"?Ie.color:ze==="Opacity"||ze==="opacity"?Ie.opacity:null}return Object.defineProperties(Ie,{color:{get:ExpressionPropertyInterface(Ce.c)},opacity:{get:ExpressionPropertyInterface(Ce.o)},_name:{value:Ae.nm},mn:{value:Ae.mn}}),Ce.c.setGroupProperty(PropertyInterface("Color",De)),Ce.o.setGroupProperty(PropertyInterface("Opacity",De)),Ie}function ae(Ae,Ce,De){function Ie(ze){return ze==="Start Point"||ze==="start point"?Ie.startPoint:ze==="End Point"||ze==="end point"?Ie.endPoint:ze==="Opacity"||ze==="opacity"?Ie.opacity:null}return Object.defineProperties(Ie,{startPoint:{get:ExpressionPropertyInterface(Ce.s)},endPoint:{get:ExpressionPropertyInterface(Ce.e)},opacity:{get:ExpressionPropertyInterface(Ce.o)},type:{get:function(){return"a"}},_name:{value:Ae.nm},mn:{value:Ae.mn}}),Ce.s.setGroupProperty(PropertyInterface("Start Point",De)),Ce.e.setGroupProperty(PropertyInterface("End Point",De)),Ce.o.setGroupProperty(PropertyInterface("Opacity",De)),Ie}function ue(){function Ae(){return null}return Ae}function de(Ae,Ce,De){var Ie=propertyGroupFactory(Ue,De),ze=propertyGroupFactory(Ze,Ie);function Re(Ye){Object.defineProperty(Ze,Ae.d[Ye].nm,{get:ExpressionPropertyInterface(Ce.d.dataProps[Ye].p)})}var Oe,qe=Ae.d?Ae.d.length:0,Ze={};for(Oe=0;Oe<qe;Oe+=1)Re(Oe),Ce.d.dataProps[Oe].p.setGroupProperty(ze);function Ue(Ye){return Ye==="Color"||Ye==="color"?Ue.color:Ye==="Opacity"||Ye==="opacity"?Ue.opacity:Ye==="Stroke Width"||Ye==="stroke width"?Ue.strokeWidth:null}return Object.defineProperties(Ue,{color:{get:ExpressionPropertyInterface(Ce.c)},opacity:{get:ExpressionPropertyInterface(Ce.o)},strokeWidth:{get:ExpressionPropertyInterface(Ce.w)},dash:{get:function(){return Ze}},_name:{value:Ae.nm},mn:{value:Ae.mn}}),Ce.c.setGroupProperty(PropertyInterface("Color",Ie)),Ce.o.setGroupProperty(PropertyInterface("Opacity",Ie)),Ce.w.setGroupProperty(PropertyInterface("Stroke Width",Ie)),Ue}function oe(Ae,Ce,De){function Ie(Re){return Re===Ae.e.ix||Re==="End"||Re==="end"?Ie.end:Re===Ae.s.ix?Ie.start:Re===Ae.o.ix?Ie.offset:null}var ze=propertyGroupFactory(Ie,De);return Ie.propertyIndex=Ae.ix,Ce.s.setGroupProperty(PropertyInterface("Start",ze)),Ce.e.setGroupProperty(PropertyInterface("End",ze)),Ce.o.setGroupProperty(PropertyInterface("Offset",ze)),Ie.propertyIndex=Ae.ix,Ie.propertyGroup=De,Object.defineProperties(Ie,{start:{get:ExpressionPropertyInterface(Ce.s)},end:{get:ExpressionPropertyInterface(Ce.e)},offset:{get:ExpressionPropertyInterface(Ce.o)},_name:{value:Ae.nm}}),Ie.mn=Ae.mn,Ie}function me(Ae,Ce,De){function Ie(Re){return Ae.a.ix===Re||Re==="Anchor Point"?Ie.anchorPoint:Ae.o.ix===Re||Re==="Opacity"?Ie.opacity:Ae.p.ix===Re||Re==="Position"?Ie.position:Ae.r.ix===Re||Re==="Rotation"||Re==="ADBE Vector Rotation"?Ie.rotation:Ae.s.ix===Re||Re==="Scale"?Ie.scale:Ae.sk&&Ae.sk.ix===Re||Re==="Skew"?Ie.skew:Ae.sa&&Ae.sa.ix===Re||Re==="Skew Axis"?Ie.skewAxis:null}var ze=propertyGroupFactory(Ie,De);return Ce.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",ze)),Ce.transform.mProps.p.setGroupProperty(PropertyInterface("Position",ze)),Ce.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",ze)),Ce.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",ze)),Ce.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",ze)),Ce.transform.mProps.sk&&(Ce.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",ze)),Ce.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",ze))),Ce.transform.op.setGroupProperty(PropertyInterface("Opacity",ze)),Object.defineProperties(Ie,{opacity:{get:ExpressionPropertyInterface(Ce.transform.mProps.o)},position:{get:ExpressionPropertyInterface(Ce.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(Ce.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(Ce.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(Ce.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(Ce.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(Ce.transform.mProps.sa)},_name:{value:Ae.nm}}),Ie.ty="tr",Ie.mn=Ae.mn,Ie.propertyGroup=De,Ie}function ve(Ae,Ce,De){function Ie(Oe){return Ae.p.ix===Oe?Ie.position:Ae.s.ix===Oe?Ie.size:null}var ze=propertyGroupFactory(Ie,De);Ie.propertyIndex=Ae.ix;var Re=Ce.sh.ty==="tm"?Ce.sh.prop:Ce.sh;return Re.s.setGroupProperty(PropertyInterface("Size",ze)),Re.p.setGroupProperty(PropertyInterface("Position",ze)),Object.defineProperties(Ie,{size:{get:ExpressionPropertyInterface(Re.s)},position:{get:ExpressionPropertyInterface(Re.p)},_name:{value:Ae.nm}}),Ie.mn=Ae.mn,Ie}function Ee(Ae,Ce,De){function Ie(Oe){return Ae.p.ix===Oe?Ie.position:Ae.r.ix===Oe?Ie.rotation:Ae.pt.ix===Oe?Ie.points:Ae.or.ix===Oe||Oe==="ADBE Vector Star Outer Radius"?Ie.outerRadius:Ae.os.ix===Oe?Ie.outerRoundness:Ae.ir&&(Ae.ir.ix===Oe||Oe==="ADBE Vector Star Inner Radius")?Ie.innerRadius:Ae.is&&Ae.is.ix===Oe?Ie.innerRoundness:null}var ze=propertyGroupFactory(Ie,De),Re=Ce.sh.ty==="tm"?Ce.sh.prop:Ce.sh;return Ie.propertyIndex=Ae.ix,Re.or.setGroupProperty(PropertyInterface("Outer Radius",ze)),Re.os.setGroupProperty(PropertyInterface("Outer Roundness",ze)),Re.pt.setGroupProperty(PropertyInterface("Points",ze)),Re.p.setGroupProperty(PropertyInterface("Position",ze)),Re.r.setGroupProperty(PropertyInterface("Rotation",ze)),Ae.ir&&(Re.ir.setGroupProperty(PropertyInterface("Inner Radius",ze)),Re.is.setGroupProperty(PropertyInterface("Inner Roundness",ze))),Object.defineProperties(Ie,{position:{get:ExpressionPropertyInterface(Re.p)},rotation:{get:ExpressionPropertyInterface(Re.r)},points:{get:ExpressionPropertyInterface(Re.pt)},outerRadius:{get:ExpressionPropertyInterface(Re.or)},outerRoundness:{get:ExpressionPropertyInterface(Re.os)},innerRadius:{get:ExpressionPropertyInterface(Re.ir)},innerRoundness:{get:ExpressionPropertyInterface(Re.is)},_name:{value:Ae.nm}}),Ie.mn=Ae.mn,Ie}function Pe(Ae,Ce,De){function Ie(Oe){return Ae.p.ix===Oe?Ie.position:Ae.r.ix===Oe?Ie.roundness:Ae.s.ix===Oe||Oe==="Size"||Oe==="ADBE Vector Rect Size"?Ie.size:null}var ze=propertyGroupFactory(Ie,De),Re=Ce.sh.ty==="tm"?Ce.sh.prop:Ce.sh;return Ie.propertyIndex=Ae.ix,Re.p.setGroupProperty(PropertyInterface("Position",ze)),Re.s.setGroupProperty(PropertyInterface("Size",ze)),Re.r.setGroupProperty(PropertyInterface("Rotation",ze)),Object.defineProperties(Ie,{position:{get:ExpressionPropertyInterface(Re.p)},roundness:{get:ExpressionPropertyInterface(Re.r)},size:{get:ExpressionPropertyInterface(Re.s)},_name:{value:Ae.nm}}),Ie.mn=Ae.mn,Ie}function ye(Ae,Ce,De){function Ie(Oe){return Ae.r.ix===Oe||Oe==="Round Corners 1"?Ie.radius:null}var ze=propertyGroupFactory(Ie,De),Re=Ce;return Ie.propertyIndex=Ae.ix,Re.rd.setGroupProperty(PropertyInterface("Radius",ze)),Object.defineProperties(Ie,{radius:{get:ExpressionPropertyInterface(Re.rd)},_name:{value:Ae.nm}}),Ie.mn=Ae.mn,Ie}function Te(Ae,Ce,De){function Ie(Oe){return Ae.c.ix===Oe||Oe==="Copies"?Ie.copies:Ae.o.ix===Oe||Oe==="Offset"?Ie.offset:null}var ze=propertyGroupFactory(Ie,De),Re=Ce;return Ie.propertyIndex=Ae.ix,Re.c.setGroupProperty(PropertyInterface("Copies",ze)),Re.o.setGroupProperty(PropertyInterface("Offset",ze)),Object.defineProperties(Ie,{copies:{get:ExpressionPropertyInterface(Re.c)},offset:{get:ExpressionPropertyInterface(Re.o)},_name:{value:Ae.nm}}),Ie.mn=Ae.mn,Ie}return function(Ae,Ce,De){var Ie;function ze(Oe){if(typeof Oe=="number")return Oe=Oe===void 0?1:Oe,Oe===0?De:Ie[Oe-1];for(var qe=0,Ze=Ie.length;qe<Ze;){if(Ie[qe]._name===Oe)return Ie[qe];qe+=1}return null}function Re(){return De}return ze.propertyGroup=propertyGroupFactory(ze,Re),Ie=te(Ae,Ce,ze.propertyGroup),ze.numProperties=Ie.length,ze._name="Contents",ze}}(),TextExpressionInterface=function(){return function(te){var ee;function ne(se){switch(se){case"ADBE Text Document":return ne.sourceText;default:return null}}return Object.defineProperty(ne,"sourceText",{get:function(){te.textProperty.getValue();var ae=te.textProperty.currentData.t;return(!ee||ae!==ee.value)&&(ee=new String(ae),ee.value=ae||new String(ae),Object.defineProperty(ee,"style",{get:function(){return{fillColor:te.textProperty.currentData.fc}}})),ee}}),ne}}();function _typeof(te){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ee){return typeof ee}:function(ee){return ee&&typeof Symbol=="function"&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee},_typeof(te)}var FootageInterface=function(){var te=function(se){var ae="",ue=se.getFootageData();function de(){return ae="",ue=se.getFootageData(),oe}function oe(me){if(ue[me])return ae=me,ue=ue[me],_typeof(ue)==="object"?oe:ue;var ve=me.indexOf(ae);if(ve!==-1){var Ee=parseInt(me.substr(ve+ae.length),10);return ue=ue[Ee],_typeof(ue)==="object"?oe:ue}return""}return de},ee=function(se){function ae(ue){return ue==="Outline"?ae.outlineInterface():null}return ae._name="Outline",ae.outlineInterface=te(se),ae};return function(ne){function se(ae){return ae==="Data"?se.dataInterface:null}return se._name="Data",se.dataInterface=ee(ne),se}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(te){return interfaces[te]||null}var expressionHelpers=function(){function te(de,oe,me){oe.x&&(me.k=!0,me.x=!0,me.initiateExpression=ExpressionManager.initiateExpression,me.effectsSequence.push(me.initiateExpression(de,oe,me).bind(me)))}function ee(de){return de*=this.elem.globalData.frameRate,de-=this.offsetTime,de!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<de?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(de,this._cachingAtTime),this._cachingAtTime.lastFrame=de),this._cachingAtTime.value}function ne(de){var oe=-.01,me=this.getValueAtTime(de),ve=this.getValueAtTime(de+oe),Ee=0;if(me.length){var Pe;for(Pe=0;Pe<me.length;Pe+=1)Ee+=Math.pow(ve[Pe]-me[Pe],2);Ee=Math.sqrt(Ee)*100}else Ee=0;return Ee}function se(de){if(this.vel!==void 0)return this.vel;var oe=-.001,me=this.getValueAtTime(de),ve=this.getValueAtTime(de+oe),Ee;if(me.length){Ee=createTypedArray("float32",me.length);var Pe;for(Pe=0;Pe<me.length;Pe+=1)Ee[Pe]=(ve[Pe]-me[Pe])/oe}else Ee=(ve-me)/oe;return Ee}function ae(){return this.pv}function ue(de){this.propertyGroup=de}return{searchExpressions:te,getSpeedAtTime:ne,getVelocityAtTime:se,getValueAtTime:ee,getStaticValueAtTime:ae,setGroupProperty:ue}}();function addPropertyDecorator(){function te(ye,Te,Ae){if(!this.k||!this.keyframes)return this.pv;ye=ye?ye.toLowerCase():"";var Ce=this.comp.renderedFrame,De=this.keyframes,Ie=De[De.length-1].t;if(Ce<=Ie)return this.pv;var ze,Re;Ae?(Te?ze=Math.abs(Ie-this.elem.comp.globalData.frameRate*Te):ze=Math.max(0,Ie-this.elem.data.ip),Re=Ie-ze):((!Te||Te>De.length-1)&&(Te=De.length-1),Re=De[De.length-1-Te].t,ze=Ie-Re);var Oe,qe,Ze;if(ye==="pingpong"){var Ue=Math.floor((Ce-Re)/ze);if(Ue%2!==0)return this.getValueAtTime((ze-(Ce-Re)%ze+Re)/this.comp.globalData.frameRate,0)}else if(ye==="offset"){var Ye=this.getValueAtTime(Re/this.comp.globalData.frameRate,0),ct=this.getValueAtTime(Ie/this.comp.globalData.frameRate,0),at=this.getValueAtTime(((Ce-Re)%ze+Re)/this.comp.globalData.frameRate,0),ft=Math.floor((Ce-Re)/ze);if(this.pv.length){for(Ze=new Array(Ye.length),qe=Ze.length,Oe=0;Oe<qe;Oe+=1)Ze[Oe]=(ct[Oe]-Ye[Oe])*ft+at[Oe];return Ze}return(ct-Ye)*ft+at}else if(ye==="continue"){var pt=this.getValueAtTime(Ie/this.comp.globalData.frameRate,0),Mt=this.getValueAtTime((Ie-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(Ze=new Array(pt.length),qe=Ze.length,Oe=0;Oe<qe;Oe+=1)Ze[Oe]=pt[Oe]+(pt[Oe]-Mt[Oe])*((Ce-Ie)/this.comp.globalData.frameRate)/5e-4;return Ze}return pt+(pt-Mt)*((Ce-Ie)/.001)}return this.getValueAtTime(((Ce-Re)%ze+Re)/this.comp.globalData.frameRate,0)}function ee(ye,Te,Ae){if(!this.k)return this.pv;ye=ye?ye.toLowerCase():"";var Ce=this.comp.renderedFrame,De=this.keyframes,Ie=De[0].t;if(Ce>=Ie)return this.pv;var ze,Re;Ae?(Te?ze=Math.abs(this.elem.comp.globalData.frameRate*Te):ze=Math.max(0,this.elem.data.op-Ie),Re=Ie+ze):((!Te||Te>De.length-1)&&(Te=De.length-1),Re=De[Te].t,ze=Re-Ie);var Oe,qe,Ze;if(ye==="pingpong"){var Ue=Math.floor((Ie-Ce)/ze);if(Ue%2===0)return this.getValueAtTime(((Ie-Ce)%ze+Ie)/this.comp.globalData.frameRate,0)}else if(ye==="offset"){var Ye=this.getValueAtTime(Ie/this.comp.globalData.frameRate,0),ct=this.getValueAtTime(Re/this.comp.globalData.frameRate,0),at=this.getValueAtTime((ze-(Ie-Ce)%ze+Ie)/this.comp.globalData.frameRate,0),ft=Math.floor((Ie-Ce)/ze)+1;if(this.pv.length){for(Ze=new Array(Ye.length),qe=Ze.length,Oe=0;Oe<qe;Oe+=1)Ze[Oe]=at[Oe]-(ct[Oe]-Ye[Oe])*ft;return Ze}return at-(ct-Ye)*ft}else if(ye==="continue"){var pt=this.getValueAtTime(Ie/this.comp.globalData.frameRate,0),Mt=this.getValueAtTime((Ie+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(Ze=new Array(pt.length),qe=Ze.length,Oe=0;Oe<qe;Oe+=1)Ze[Oe]=pt[Oe]+(pt[Oe]-Mt[Oe])*(Ie-Ce)/.001;return Ze}return pt+(pt-Mt)*(Ie-Ce)/.001}return this.getValueAtTime((ze-((Ie-Ce)%ze+Ie))/this.comp.globalData.frameRate,0)}function ne(ye,Te){if(!this.k)return this.pv;if(ye=(ye||.4)*.5,Te=Math.floor(Te||5),Te<=1)return this.pv;var Ae=this.comp.renderedFrame/this.comp.globalData.frameRate,Ce=Ae-ye,De=Ae+ye,Ie=Te>1?(De-Ce)/(Te-1):1,ze=0,Re=0,Oe;this.pv.length?Oe=createTypedArray("float32",this.pv.length):Oe=0;for(var qe;ze<Te;){if(qe=this.getValueAtTime(Ce+ze*Ie),this.pv.length)for(Re=0;Re<this.pv.length;Re+=1)Oe[Re]+=qe[Re];else Oe+=qe;ze+=1}if(this.pv.length)for(Re=0;Re<this.pv.length;Re+=1)Oe[Re]/=Te;else Oe/=Te;return Oe}function se(ye){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var Te=this._transformCachingAtTime.v;if(Te.cloneFromProps(this.pre.props),this.appliedTransformations<1){var Ae=this.a.getValueAtTime(ye);Te.translate(-Ae[0]*this.a.mult,-Ae[1]*this.a.mult,Ae[2]*this.a.mult)}if(this.appliedTransformations<2){var Ce=this.s.getValueAtTime(ye);Te.scale(Ce[0]*this.s.mult,Ce[1]*this.s.mult,Ce[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var De=this.sk.getValueAtTime(ye),Ie=this.sa.getValueAtTime(ye);Te.skewFromAxis(-De*this.sk.mult,Ie*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var ze=this.r.getValueAtTime(ye);Te.rotate(-ze*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var Re=this.rz.getValueAtTime(ye),Oe=this.ry.getValueAtTime(ye),qe=this.rx.getValueAtTime(ye),Ze=this.or.getValueAtTime(ye);Te.rotateZ(-Re*this.rz.mult).rotateY(Oe*this.ry.mult).rotateX(qe*this.rx.mult).rotateZ(-Ze[2]*this.or.mult).rotateY(Ze[1]*this.or.mult).rotateX(Ze[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var Ue=this.px.getValueAtTime(ye),Ye=this.py.getValueAtTime(ye);if(this.data.p.z){var ct=this.pz.getValueAtTime(ye);Te.translate(Ue*this.px.mult,Ye*this.py.mult,-ct*this.pz.mult)}else Te.translate(Ue*this.px.mult,Ye*this.py.mult,0)}else{var at=this.p.getValueAtTime(ye);Te.translate(at[0]*this.p.mult,at[1]*this.p.mult,-at[2]*this.p.mult)}return Te}function ae(){return this.v.clone(new Matrix)}var ue=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(ye,Te,Ae){var Ce=ue(ye,Te,Ae);return Ce.dynamicProperties.length?Ce.getValueAtTime=se.bind(Ce):Ce.getValueAtTime=ae.bind(Ce),Ce.setGroupProperty=expressionHelpers.setGroupProperty,Ce};var de=PropertyFactory.getProp;PropertyFactory.getProp=function(ye,Te,Ae,Ce,De){var Ie=de(ye,Te,Ae,Ce,De);Ie.kf?Ie.getValueAtTime=expressionHelpers.getValueAtTime.bind(Ie):Ie.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(Ie),Ie.setGroupProperty=expressionHelpers.setGroupProperty,Ie.loopOut=te,Ie.loopIn=ee,Ie.smooth=ne,Ie.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(Ie),Ie.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(Ie),Ie.numKeys=Te.a===1?Te.k.length:0,Ie.propertyIndex=Te.ix;var ze=0;return Ae!==0&&(ze=createTypedArray("float32",Te.a===1?Te.k[0].s.length:Te.k.length)),Ie._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:ze},expressionHelpers.searchExpressions(ye,Te,Ie),Ie.k&&De.addDynamicProperty(Ie),Ie};function oe(ye){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),ye*=this.elem.globalData.frameRate,ye-=this.offsetTime,ye!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<ye?this._caching.lastIndex:0,this._cachingAtTime.lastTime=ye,this.interpolateShape(ye,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var me=ShapePropertyFactory.getConstructorFunction(),ve=ShapePropertyFactory.getKeyframedConstructorFunction();function Ee(){}Ee.prototype={vertices:function(Te,Ae){this.k&&this.getValue();var Ce=this.v;Ae!==void 0&&(Ce=this.getValueAtTime(Ae,0));var De,Ie=Ce._length,ze=Ce[Te],Re=Ce.v,Oe=createSizedArray(Ie);for(De=0;De<Ie;De+=1)Te==="i"||Te==="o"?Oe[De]=[ze[De][0]-Re[De][0],ze[De][1]-Re[De][1]]:Oe[De]=[ze[De][0],ze[De][1]];return Oe},points:function(Te){return this.vertices("v",Te)},inTangents:function(Te){return this.vertices("i",Te)},outTangents:function(Te){return this.vertices("o",Te)},isClosed:function(){return this.v.c},pointOnPath:function(Te,Ae){var Ce=this.v;Ae!==void 0&&(Ce=this.getValueAtTime(Ae,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(Ce));for(var De=this._segmentsLength,Ie=De.lengths,ze=De.totalLength*Te,Re=0,Oe=Ie.length,qe=0,Ze;Re<Oe;){if(qe+Ie[Re].addedLength>ze){var Ue=Re,Ye=Ce.c&&Re===Oe-1?0:Re+1,ct=(ze-qe)/Ie[Re].addedLength;Ze=bez.getPointInSegment(Ce.v[Ue],Ce.v[Ye],Ce.o[Ue],Ce.i[Ye],ct,Ie[Re]);break}else qe+=Ie[Re].addedLength;Re+=1}return Ze||(Ze=Ce.c?[Ce.v[0][0],Ce.v[0][1]]:[Ce.v[Ce._length-1][0],Ce.v[Ce._length-1][1]]),Ze},vectorOnPath:function(Te,Ae,Ce){Te==1?Te=this.v.c:Te==0&&(Te=.999);var De=this.pointOnPath(Te,Ae),Ie=this.pointOnPath(Te+.001,Ae),ze=Ie[0]-De[0],Re=Ie[1]-De[1],Oe=Math.sqrt(Math.pow(ze,2)+Math.pow(Re,2));if(Oe===0)return[0,0];var qe=Ce==="tangent"?[ze/Oe,Re/Oe]:[-Re/Oe,ze/Oe];return qe},tangentOnPath:function(Te,Ae){return this.vectorOnPath(Te,Ae,"tangent")},normalOnPath:function(Te,Ae){return this.vectorOnPath(Te,Ae,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([Ee],me),extendPrototype([Ee],ve),ve.prototype.getValueAtTime=oe,ve.prototype.initiateExpression=ExpressionManager.initiateExpression;var Pe=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(ye,Te,Ae,Ce,De){var Ie=Pe(ye,Te,Ae,Ce,De);return Ie.propertyIndex=Te.ix,Ie.lock=!1,Ae===3?expressionHelpers.searchExpressions(ye,Te.pt,Ie):Ae===4&&expressionHelpers.searchExpressions(ye,Te.ks,Ie),Ie.k&&ye.addDynamicProperty(Ie),Ie}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function te(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(ee,ne){var se=this.calculateExpression(ne);if(ee.t!==se){var ae={};return this.copyData(ae,ee),ae.t=se.toString(),ae.__complete=!1,ae}return ee},TextProperty.prototype.searchProperty=function(){var ee=this.searchKeyframes(),ne=this.searchExpressions();return this.kf=ee||ne,this.kf},TextProperty.prototype.searchExpressions=te}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function te(ee,ne){var se=createNS("feMerge");se.setAttribute("result",ee);var ae,ue;for(ue=0;ue<ne.length;ue+=1)ae=createNS("feMergeNode"),ae.setAttribute("in",ne[ue]),se.appendChild(ae),se.appendChild(ae);return se}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(te,ee,ne,se,ae){this.filterManager=ee;var ue=createNS("feColorMatrix");ue.setAttribute("type","matrix"),ue.setAttribute("color-interpolation-filters","linearRGB"),ue.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=ue,ue.setAttribute("result",se+"_tint_1"),te.appendChild(ue),ue=createNS("feColorMatrix"),ue.setAttribute("type","matrix"),ue.setAttribute("color-interpolation-filters","sRGB"),ue.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),ue.setAttribute("result",se+"_tint_2"),te.appendChild(ue),this.matrixFilter=ue;var de=this.createMergeNode(se,[ae,se+"_tint_1",se+"_tint_2"]);te.appendChild(de)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(te){if(te||this.filterManager._mdf){var ee=this.filterManager.effectElements[0].p.v,ne=this.filterManager.effectElements[1].p.v,se=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+se+" 0"),this.matrixFilter.setAttribute("values",ne[0]-ee[0]+" 0 0 0 "+ee[0]+" "+(ne[1]-ee[1])+" 0 0 0 "+ee[1]+" "+(ne[2]-ee[2])+" 0 0 0 "+ee[2]+" 0 0 0 1 0")}};function SVGFillFilter(te,ee,ne,se){this.filterManager=ee;var ae=createNS("feColorMatrix");ae.setAttribute("type","matrix"),ae.setAttribute("color-interpolation-filters","sRGB"),ae.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),ae.setAttribute("result",se),te.appendChild(ae),this.matrixFilter=ae}SVGFillFilter.prototype.renderFrame=function(te){if(te||this.filterManager._mdf){var ee=this.filterManager.effectElements[2].p.v,ne=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+ee[0]+" 0 0 0 0 "+ee[1]+" 0 0 0 0 "+ee[2]+" 0 0 0 "+ne+" 0")}};function SVGStrokeEffect(te,ee,ne){this.initialized=!1,this.filterManager=ee,this.elem=ne,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var te=this.elem.layerElement.children||this.elem.layerElement.childNodes,ee,ne,se,ae;for(this.filterManager.effectElements[1].p.v===1?(ae=this.elem.maskManager.masksProperties.length,se=0):(se=this.filterManager.effectElements[0].p.v-1,ae=se+1),ne=createNS("g"),ne.setAttribute("fill","none"),ne.setAttribute("stroke-linecap","round"),ne.setAttribute("stroke-dashoffset",1),se;se<ae;se+=1)ee=createNS("path"),ne.appendChild(ee),this.paths.push({p:ee,m:se});if(this.filterManager.effectElements[10].p.v===3){var ue=createNS("mask"),de=createElementID();ue.setAttribute("id",de),ue.setAttribute("mask-type","alpha"),ue.appendChild(ne),this.elem.globalData.defs.appendChild(ue);var oe=createNS("g");for(oe.setAttribute("mask","url("+getLocationHref()+"#"+de+")");te[0];)oe.appendChild(te[0]);this.elem.layerElement.appendChild(oe),this.masker=ue,ne.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(te=this.elem.layerElement.children||this.elem.layerElement.childNodes;te.length;)this.elem.layerElement.removeChild(te[0]);this.elem.layerElement.appendChild(ne),this.elem.layerElement.removeAttribute("mask"),ne.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=ne},SVGStrokeEffect.prototype.renderFrame=function(te){this.initialized||this.initialize();var ee,ne=this.paths.length,se,ae;for(ee=0;ee<ne;ee+=1)if(this.paths[ee].m!==-1&&(se=this.elem.maskManager.viewData[this.paths[ee].m],ae=this.paths[ee].p,(te||this.filterManager._mdf||se.prop._mdf)&&ae.setAttribute("d",se.lastPath),te||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||se.prop._mdf)){var ue;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var de=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,oe=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,me=ae.getTotalLength();ue="0 0 0 "+me*de+" ";var ve=me*(oe-de),Ee=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01,Pe=Math.floor(ve/Ee),ye;for(ye=0;ye<Pe;ye+=1)ue+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01+" ";ue+="0 "+me*10+" 0 0"}else ue="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01;ae.setAttribute("stroke-dasharray",ue)}if((te||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),(te||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(te||this.filterManager.effectElements[3].p._mdf)){var Te=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(Te[0]*255)+","+bmFloor(Te[1]*255)+","+bmFloor(Te[2]*255)+")")}};function SVGTritoneFilter(te,ee,ne,se){this.filterManager=ee;var ae=createNS("feColorMatrix");ae.setAttribute("type","matrix"),ae.setAttribute("color-interpolation-filters","linearRGB"),ae.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),te.appendChild(ae);var ue=createNS("feComponentTransfer");ue.setAttribute("color-interpolation-filters","sRGB"),ue.setAttribute("result",se),this.matrixFilter=ue;var de=createNS("feFuncR");de.setAttribute("type","table"),ue.appendChild(de),this.feFuncR=de;var oe=createNS("feFuncG");oe.setAttribute("type","table"),ue.appendChild(oe),this.feFuncG=oe;var me=createNS("feFuncB");me.setAttribute("type","table"),ue.appendChild(me),this.feFuncB=me,te.appendChild(ue)}SVGTritoneFilter.prototype.renderFrame=function(te){if(te||this.filterManager._mdf){var ee=this.filterManager.effectElements[0].p.v,ne=this.filterManager.effectElements[1].p.v,se=this.filterManager.effectElements[2].p.v,ae=se[0]+" "+ne[0]+" "+ee[0],ue=se[1]+" "+ne[1]+" "+ee[1],de=se[2]+" "+ne[2]+" "+ee[2];this.feFuncR.setAttribute("tableValues",ae),this.feFuncG.setAttribute("tableValues",ue),this.feFuncB.setAttribute("tableValues",de)}};function SVGProLevelsFilter(te,ee,ne,se){this.filterManager=ee;var ae=this.filterManager.effectElements,ue=createNS("feComponentTransfer");(ae[10].p.k||ae[10].p.v!==0||ae[11].p.k||ae[11].p.v!==1||ae[12].p.k||ae[12].p.v!==1||ae[13].p.k||ae[13].p.v!==0||ae[14].p.k||ae[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",ue)),(ae[17].p.k||ae[17].p.v!==0||ae[18].p.k||ae[18].p.v!==1||ae[19].p.k||ae[19].p.v!==1||ae[20].p.k||ae[20].p.v!==0||ae[21].p.k||ae[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",ue)),(ae[24].p.k||ae[24].p.v!==0||ae[25].p.k||ae[25].p.v!==1||ae[26].p.k||ae[26].p.v!==1||ae[27].p.k||ae[27].p.v!==0||ae[28].p.k||ae[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",ue)),(ae[31].p.k||ae[31].p.v!==0||ae[32].p.k||ae[32].p.v!==1||ae[33].p.k||ae[33].p.v!==1||ae[34].p.k||ae[34].p.v!==0||ae[35].p.k||ae[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",ue)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(ue.setAttribute("color-interpolation-filters","sRGB"),te.appendChild(ue)),(ae[3].p.k||ae[3].p.v!==0||ae[4].p.k||ae[4].p.v!==1||ae[5].p.k||ae[5].p.v!==1||ae[6].p.k||ae[6].p.v!==0||ae[7].p.k||ae[7].p.v!==1)&&(ue=createNS("feComponentTransfer"),ue.setAttribute("color-interpolation-filters","sRGB"),ue.setAttribute("result",se),te.appendChild(ue),this.feFuncRComposed=this.createFeFunc("feFuncR",ue),this.feFuncGComposed=this.createFeFunc("feFuncG",ue),this.feFuncBComposed=this.createFeFunc("feFuncB",ue))}SVGProLevelsFilter.prototype.createFeFunc=function(te,ee){var ne=createNS(te);return ne.setAttribute("type","table"),ee.appendChild(ne),ne},SVGProLevelsFilter.prototype.getTableValue=function(te,ee,ne,se,ae){for(var ue=0,de=256,oe,me=Math.min(te,ee),ve=Math.max(te,ee),Ee=Array.call(null,{length:de}),Pe,ye=0,Te=ae-se,Ae=ee-te;ue<=256;)oe=ue/256,oe<=me?Pe=Ae<0?ae:se:oe>=ve?Pe=Ae<0?se:ae:Pe=se+Te*Math.pow((oe-te)/Ae,1/ne),Ee[ye]=Pe,ye+=1,ue+=256/(de-1);return Ee.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(te){if(te||this.filterManager._mdf){var ee,ne=this.filterManager.effectElements;this.feFuncRComposed&&(te||ne[3].p._mdf||ne[4].p._mdf||ne[5].p._mdf||ne[6].p._mdf||ne[7].p._mdf)&&(ee=this.getTableValue(ne[3].p.v,ne[4].p.v,ne[5].p.v,ne[6].p.v,ne[7].p.v),this.feFuncRComposed.setAttribute("tableValues",ee),this.feFuncGComposed.setAttribute("tableValues",ee),this.feFuncBComposed.setAttribute("tableValues",ee)),this.feFuncR&&(te||ne[10].p._mdf||ne[11].p._mdf||ne[12].p._mdf||ne[13].p._mdf||ne[14].p._mdf)&&(ee=this.getTableValue(ne[10].p.v,ne[11].p.v,ne[12].p.v,ne[13].p.v,ne[14].p.v),this.feFuncR.setAttribute("tableValues",ee)),this.feFuncG&&(te||ne[17].p._mdf||ne[18].p._mdf||ne[19].p._mdf||ne[20].p._mdf||ne[21].p._mdf)&&(ee=this.getTableValue(ne[17].p.v,ne[18].p.v,ne[19].p.v,ne[20].p.v,ne[21].p.v),this.feFuncG.setAttribute("tableValues",ee)),this.feFuncB&&(te||ne[24].p._mdf||ne[25].p._mdf||ne[26].p._mdf||ne[27].p._mdf||ne[28].p._mdf)&&(ee=this.getTableValue(ne[24].p.v,ne[25].p.v,ne[26].p.v,ne[27].p.v,ne[28].p.v),this.feFuncB.setAttribute("tableValues",ee)),this.feFuncA&&(te||ne[31].p._mdf||ne[32].p._mdf||ne[33].p._mdf||ne[34].p._mdf||ne[35].p._mdf)&&(ee=this.getTableValue(ne[31].p.v,ne[32].p.v,ne[33].p.v,ne[34].p.v,ne[35].p.v),this.feFuncA.setAttribute("tableValues",ee))}};function SVGDropShadowEffect(te,ee,ne,se,ae){var ue=ee.container.globalData.renderConfig.filterSize,de=ee.data.fs||ue;te.setAttribute("x",de.x||ue.x),te.setAttribute("y",de.y||ue.y),te.setAttribute("width",de.width||ue.width),te.setAttribute("height",de.height||ue.height),this.filterManager=ee;var oe=createNS("feGaussianBlur");oe.setAttribute("in","SourceAlpha"),oe.setAttribute("result",se+"_drop_shadow_1"),oe.setAttribute("stdDeviation","0"),this.feGaussianBlur=oe,te.appendChild(oe);var me=createNS("feOffset");me.setAttribute("dx","25"),me.setAttribute("dy","0"),me.setAttribute("in",se+"_drop_shadow_1"),me.setAttribute("result",se+"_drop_shadow_2"),this.feOffset=me,te.appendChild(me);var ve=createNS("feFlood");ve.setAttribute("flood-color","#00ff00"),ve.setAttribute("flood-opacity","1"),ve.setAttribute("result",se+"_drop_shadow_3"),this.feFlood=ve,te.appendChild(ve);var Ee=createNS("feComposite");Ee.setAttribute("in",se+"_drop_shadow_3"),Ee.setAttribute("in2",se+"_drop_shadow_2"),Ee.setAttribute("operator","in"),Ee.setAttribute("result",se+"_drop_shadow_4"),te.appendChild(Ee);var Pe=this.createMergeNode(se,[se+"_drop_shadow_4",ae]);te.appendChild(Pe)}extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(te){if(te||this.filterManager._mdf){if((te||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),te||this.filterManager.effectElements[0].p._mdf){var ee=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(ee[0]*255),Math.round(ee[1]*255),Math.round(ee[2]*255)))}if((te||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),te||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var ne=this.filterManager.effectElements[3].p.v,se=(this.filterManager.effectElements[2].p.v-90)*degToRads,ae=ne*Math.cos(se),ue=ne*Math.sin(se);this.feOffset.setAttribute("dx",ae),this.feOffset.setAttribute("dy",ue)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(te,ee,ne){this.initialized=!1,this.filterManager=ee,this.filterElem=te,this.elem=ne,ne.matteElement=createNS("g"),ne.matteElement.appendChild(ne.layerElement),ne.matteElement.appendChild(ne.transformedElement),ne.baseElement=ne.matteElement}SVGMatte3Effect.prototype.findSymbol=function(te){for(var ee=0,ne=_svgMatteSymbols.length;ee<ne;){if(_svgMatteSymbols[ee]===te)return _svgMatteSymbols[ee];ee+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(te,ee){var ne=te.layerElement.parentNode;if(!!ne){for(var se=ne.children,ae=0,ue=se.length;ae<ue&&se[ae]!==te.layerElement;)ae+=1;var de;ae<=ue-2&&(de=se[ae+1]);var oe=createNS("use");oe.setAttribute("href","#"+ee),de?ne.insertBefore(oe,de):ne.appendChild(oe)}},SVGMatte3Effect.prototype.setElementAsMask=function(te,ee){if(!this.findSymbol(ee)){var ne=createElementID(),se=createNS("mask");se.setAttribute("id",ee.layerId),se.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(ee);var ae=te.globalData.defs;ae.appendChild(se);var ue=createNS("symbol");ue.setAttribute("id",ne),this.replaceInParent(ee,ne),ue.appendChild(ee.layerElement),ae.appendChild(ue);var de=createNS("use");de.setAttribute("href","#"+ne),se.appendChild(de),ee.data.hd=!1,ee.show()}te.setMatte(ee.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var te=this.filterManager.effectElements[0].p.v,ee=this.elem.comp.elements,ne=0,se=ee.length;ne<se;)ee[ne]&&ee[ne].data.ind===te&&this.setElementAsMask(this.elem,ee[ne]),ne+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGGaussianBlurEffect(te,ee,ne,se){te.setAttribute("x","-100%"),te.setAttribute("y","-100%"),te.setAttribute("width","300%"),te.setAttribute("height","300%"),this.filterManager=ee;var ae=createNS("feGaussianBlur");ae.setAttribute("result",se),te.appendChild(ae),this.feGaussianBlur=ae}SVGGaussianBlurEffect.prototype.renderFrame=function(te){if(te||this.filterManager._mdf){var ee=.3,ne=this.filterManager.effectElements[0].p.v*ee,se=this.filterManager.effectElements[1].p.v,ae=se==3?0:ne,ue=se==2?0:ne;this.feGaussianBlur.setAttribute("stdDeviation",ae+" "+ue);var de=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",de)}};function TransformEffect(){}TransformEffect.prototype.init=function(te){this.effectsManager=te,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(te){if(this._opMdf=!1,this._mdf=!1,te||this.effectsManager._mdf){var ee=this.effectsManager.effectElements,ne=ee[0].p.v,se=ee[1].p.v,ae=ee[2].p.v===1,ue=ee[3].p.v,de=ae?ue:ee[4].p.v,oe=ee[5].p.v,me=ee[6].p.v,ve=ee[7].p.v;this.matrix.reset(),this.matrix.translate(-ne[0],-ne[1],ne[2]),this.matrix.scale(de*.01,ue*.01,1),this.matrix.rotate(-ve*degToRads),this.matrix.skewFromAxis(-oe*degToRads,(me+90)*degToRads),this.matrix.translate(se[0],se[1],0),this._mdf=!0,this.opacity!==ee[8].p.v&&(this.opacity=ee[8].p.v,this._opMdf=!0)}};function SVGTransformEffect(te,ee){this.init(ee)}extendPrototype([TransformEffect],SVGTransformEffect);function CVTransformEffect(te){this.init(te)}return extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie})})(lottie,lottie.exports);var lottieWeb=lottie.exports;const LOTTIE_URLS={1:"https://cdn.prod.website-files.com/6899a2f3f7995d5e3e31b7c6/68db86c6333c80ebd3a6425e_CoMinVi%20-%20Icon%2006.json",2:"https://cdn.prod.website-files.com/6899a2f3f7995d5e3e31b7c6/68db86c6913c3a60d5253cff_CoMinVi%20-%20Icon%2007.json",3:"https://cdn.prod.website-files.com/6899a2f3f7995d5e3e31b7c6/68db86c64f785b294dba99cd_CoMinVi%20-%20Icon%2008.json",4:"https://cdn.prod.website-files.com/6899a2f3f7995d5e3e31b7c6/68db86c6913c3a60d5253d16_CoMinVi%20-%20Icon%2009.json",5:"https://cdn.prod.website-files.com/6899a2f3f7995d5e3e31b7c6/68db86c666caf1a2edf01a39_CoMinVi%20-%20Icon%2010.json",6:"https://cdn.prod.website-files.com/6899a2f3f7995d5e3e31b7c6/68db86c69287fd009887d761_CoMinVi%20-%20Icon%2001.json",7:"https://cdn.prod.website-files.com/6899a2f3f7995d5e3e31b7c6/68db86c68ae2ca249e6dc2a3_CoMinVi%20-%20Icon%2002.json",8:"https://cdn.prod.website-files.com/6899a2f3f7995d5e3e31b7c6/68db86c67409f539e5703fd4_CoMinVi%20-%20Icon%2003.json",9:"https://cdn.prod.website-files.com/6899a2f3f7995d5e3e31b7c6/68db86c6e5660af13ca675fd_CoMinVi%20-%20Icon%2004%202.json",10:"https://cdn.prod.website-files.com/6899a2f3f7995d5e3e31b7c6/68db86c68f1decbc32255f9d_CoMinVi%20-%20Icon%2005.json"};function initIcons(te=document){try{const ee=te&&te.querySelector?te:document;try{const me=typeof window!="undefined"?window.Webflow:null,ve=me&&typeof me.require=="function"?me.require("lottie"):null,Ee=ve&&(ve.lottie||ve)||null;Ee&&!window.lottie&&(window.lottie=Ee)}catch{}try{ee&&ee.getAttribute&&ee.getAttribute("data-barba-namespace")}catch{}const ne=Array.from(ee.querySelectorAll(".service-card .service-icon_icon, .team-card .service-icon_icon, .stats-card .service-icon_icon, .service-card [data-lottie], .team-card [data-lottie], .stats-card [data-lottie]"));if(!ne.length&&ee&&ee.nodeType===1){try{if(!ee.__svcIconWaitObs&&typeof MutationObserver!="undefined"){const me=new MutationObserver(()=>{try{ee.querySelector(".service-card .service-icon_icon, .team-card .service-icon_icon, .stats-card .service-icon_icon")&&(me.disconnect(),ee.__svcIconWaitObs=null,initIcons(ee))}catch{}});me.observe(ee,{childList:!0,subtree:!0}),ee.__svcIconWaitObs=me}}catch{}return}const se=me=>{var ve;try{const Ee=typeof window!="undefined"?window.Webflow:null,Pe=Ee&&typeof Ee.require=="function"?Ee.require("lottie"):null,ye=Pe&&Pe.lottie,Te=ye&&typeof ye.getRegisteredAnimations=="function"&&ye.getRegisteredAnimations()||[];for(let Ae=0;Ae<Te.length;Ae++){const Ce=Te[Ae],De=Ce.wrapper||Ce.container||((ve=Ce.renderer)==null?void 0:ve.svg);if(!De)continue;if((typeof De.closest=="function"?De.closest(".service-icon_icon"):null)===me||De===me||me.contains(De))return Ce}}catch{}try{const Ee=me.querySelector("svg"),Pe=Ee&&(Ee.__lottie||Ee._lottie);if(Pe)return Pe.animation||Pe.animations&&Pe.animations[0]}catch{}return null},ae=()=>{try{if(lottieWeb)return lottieWeb}catch{}try{const me=typeof window!="undefined"?window.Webflow:null,ve=me&&typeof me.require=="function"?me.require("lottie"):null;return ve&&(ve.lottie||ve)||window&&window.lottie||null}catch{try{return window&&window.lottie}catch{return null}}},ue=me=>{var ve;try{const Ee=ae();let Pe=null;try{const Ae=(ve=me==null?void 0:me.getAttribute)==null?void 0:ve.call(me,"data-lottie");Ae&&(/^(https?:)?\/\//i.test(Ae)||Ae&&Ae.startsWith("/")?Pe=Ae:LOTTIE_URLS&&Object.prototype.hasOwnProperty.call(LOTTIE_URLS,Ae)&&(Pe=LOTTIE_URLS[Ae]))}catch{}if(Pe||(Pe=me&&me.getAttribute&&me.getAttribute("data-src")||me&&me.getAttribute&&me.getAttribute("data-animation-path")||null),!Ee||!Pe)return null;let ye=Pe;try{/^(https?:)?\/\//i.test(Pe)||Pe&&Pe.startsWith("/")||(ye=(window&&window.location&&window.location.origin||"")+"/"+Pe.replace(/^\/+/,""))}catch{}try{for(;me.firstChild;)me.removeChild(me.firstChild)}catch{}const Te=Ee.loadAnimation({container:me,renderer:"svg",loop:!1,autoplay:!1,path:ye});try{me.removeAttribute&&me.removeAttribute("data-animation-type"),me.removeAttribute&&me.removeAttribute("data-autoplay"),me.removeAttribute&&me.removeAttribute("data-loop"),me.removeAttribute&&me.removeAttribute("data-w-id"),me.setAttribute("data-wf-ignore","true"),me.style&&(me.style.visibility="visible"),me.style&&(me.style.opacity="1"),me.style&&(me.style.display=me.style.display||"block")}catch{}try{requestAnimationFrame(()=>{try{Te.goToAndStop(0,!0)}catch{}})}catch{}try{Te.addEventListener&&Te.addEventListener("DOMLoaded",()=>{try{Te.goToAndStop(0,!0)}catch{}})}catch{}return Te}catch{return null}},de=me=>{if(!me||me.__svcIconBound)return;const ve=me.closest(".service-card, .team-card, .stats-card")||me;return{bind:(Pe,ye)=>{var Ze,Ue,Ye,ct;try{Pe.goToAndStop(0,!0)}catch{}let Te=0;try{Te=Math.max(0,Math.floor(Pe.totalFrames||0))}catch{Te=0}let Ae=.5;try{const at=(Ze=me==null?void 0:me.getAttribute)==null?void 0:Ze.call(me,"data-lottie-mid");if(at!=null&&at!==""){let ft=parseFloat(at);Number.isFinite(ft)&&(ft>1&&(ft=ft/100),ft>0&&ft<1&&(Ae=ft))}}catch{}const Ce=Math.max(1,Math.min(Te-1,Math.floor(Te*Ae))),De=Ce,Ie=Math.max(De,Te-1);let ze=1,Re=1;try{const at=(Ue=me==null?void 0:me.getAttribute)==null?void 0:Ue.call(me,"data-lottie-speed-in"),ft=(Ye=me==null?void 0:me.getAttribute)==null?void 0:Ye.call(me,"data-lottie-speed-out"),pt=(ct=me==null?void 0:me.getAttribute)==null?void 0:ct.call(me,"data-lottie-speed");pt&&Number.isFinite(parseFloat(pt))&&parseFloat(pt)>0&&(ze=Re=parseFloat(pt)),at&&Number.isFinite(parseFloat(at))&&parseFloat(at)>0&&(ze=parseFloat(at)),ft&&Number.isFinite(parseFloat(ft))&&parseFloat(ft)>0&&(Re=parseFloat(ft))}catch{}const Oe=()=>{try{Pe.__svcTOFirst&&clearTimeout(Pe.__svcTOFirst),Pe.__svcTOReset&&clearTimeout(Pe.__svcTOReset)}catch{}try{Pe.stop()}catch{}try{Pe.setDirection(1),Pe.setSpeed&&Pe.setSpeed(ze),Pe.playSegments([0,Ce],!0)}catch{}},qe=()=>{try{Pe.__svcTOFirst&&clearTimeout(Pe.__svcTOFirst),Pe.__svcTOReset&&clearTimeout(Pe.__svcTOReset)}catch{}try{Pe.stop()}catch{}try{Pe.setDirection(1),Pe.setSpeed&&Pe.setSpeed(Re),Pe.playSegments([De,Ie],!0)}catch{}};ve.__svcIconHoverBound||(ve.__svcIconEnter=Oe,ve.__svcIconLeave=qe,ve.addEventListener("pointerenter",ve.__svcIconEnter),ve.addEventListener("mouseenter",ve.__svcIconEnter),ve.addEventListener("pointerleave",ve.__svcIconLeave),ve.addEventListener("mouseleave",ve.__svcIconLeave),ve.__svcIconHoverBound=!0),ye&&ye.pending==="first"?Oe():ye&&ye.pending==="second"&&qe(),ye&&(ye.pending=null);try{if(me.__svcAnim=Pe,!me.__svcSwapObs&&typeof MutationObserver!="undefined"){const at=new MutationObserver(()=>{try{const ft=se(me);if(ft&&ft!==me.__svcAnim){me.__svcAnim=ft;try{ve.__svcIconHoverBound&&(ve.__svcIconEnter&&ve.removeEventListener("pointerenter",ve.__svcIconEnter),ve.__svcIconEnter&&ve.removeEventListener("mouseenter",ve.__svcIconEnter),ve.__svcIconLeave&&ve.removeEventListener("pointerleave",ve.__svcIconLeave),ve.__svcIconLeave&&ve.removeEventListener("mouseleave",ve.__svcIconLeave),ve.__svcIconHoverBound=!1,ve.__svcIconEnter=null,ve.__svcIconLeave=null)}catch{}const pt=()=>{try{if(Math.floor(ft.totalFrames||0)<=0)return!1}catch{}const Mt=de(me);return Mt&&Mt.bind&&Mt.bind(ft,ye),!0};if(!pt()){ft.addEventListener&&ft.addEventListener("data_ready",pt);let Mt=200;const At=()=>{pt()||Mt-- >0&&setTimeout(At,50)};At()}}}catch{}});at.observe(me,{childList:!0,subtree:!0}),me.__svcSwapObs=at}}catch{}}}};(ne||[]).forEach(me=>{if(!me||me.__svcIconBound)return;let ve=null;try{if(me.__svcOwned)ve=me.__svcAnim||se(me);else{const ye=se(me);try{ye&&typeof ye.destroy=="function"&&ye.destroy()}catch{}ve=ue(me),ve&&(me.__svcOwned=!0,me.__svcAnim=ve)}}catch{ve=se(me)}const Ee={pending:null};if(!ve){try{if(!me.__svcIconObserver&&typeof MutationObserver!="undefined"){const ye=new MutationObserver(()=>{try{const Te=se(me);if(Te){ye.disconnect(),me.__svcIconObserver=null;const Ae=()=>{try{if(me.__svcIconBound)return;if(Math.floor(Te.totalFrames||0)<=0)return!1;const De=de(me);if(De&&De.bind){De.bind(Te,Ee);try{me.__svcIconBound=!0}catch{}}return!0}catch{return!1}};try{if(Math.floor(Te.totalFrames||0)>0)Ae();else{Te.addEventListener&&Te.addEventListener("data_ready",()=>Ae());let De=200;const Ie=()=>{Ae()||De-- >0&&setTimeout(Ie,50)};Ie()}}catch{Ae()||setTimeout(()=>Ae(),50)}}}catch{}});ye.observe(me,{childList:!0,subtree:!0}),me.__svcIconObserver=ye}else setTimeout(()=>{try{const ye=se(me);if(ye){const Te=()=>{try{if(me.__svcIconBound)return;if(Math.floor(ye.totalFrames||0)<=0)return!1;const Ce=de(me);if(Ce&&Ce.bind){Ce.bind(ye,Ee);try{me.__svcIconBound=!0}catch{}}return!0}catch{return!1}};try{if(Math.floor(ye.totalFrames||0)>0)Te();else{ye.addEventListener&&ye.addEventListener("data_ready",()=>Te());let Ce=200;const De=()=>{Te()||Ce-- >0&&setTimeout(De,50)};De()}}catch{Te()||setTimeout(()=>Te(),50)}}}catch{}},100)}catch{}try{ve=ue(me)}catch{}if(!ve){try{if(!me.__svcLibRetrying){me.__svcLibRetrying=!0;let ye=200;const Te=()=>{try{if(ae()){const Ce=ue(me);if(Ce){me.__svcOwned=!0,me.__svcAnim=Ce;const De=de(me);if(De&&De.bind){const Ie=()=>{try{if(Math.floor(Ce.totalFrames||0)<=0)return!1;De.bind(Ce,Ee);try{me.__svcIconBound=!0}catch{}return!0}catch{return!1}};try{if(Math.floor(Ce.totalFrames||0)>0)Ie();else{Ce.addEventListener&&Ce.addEventListener("data_ready",()=>Ie());let Re=200;const Oe=()=>{Ie()||Re-- >0&&setTimeout(Oe,50)};Oe()}}catch{Ie()||setTimeout(()=>Ie(),50)}}me.__svcLibRetrying=!1;return}}}catch{}ye-- >0?setTimeout(Te,50):me.__svcLibRetrying=!1};Te()}}catch{}return}}let Pe=!1;try{const ye=()=>{if(Pe)return;const Te=()=>{try{if(Pe||me.__svcIconBound)return;if(Math.floor(ve.totalFrames||0)<=0)return!1;Pe=!0;const Ce=de(me);if(!Ce||!Ce.bind)return!0;Ce.bind(ve,Ee);try{me.__svcIconBound=!0}catch{}return!0}catch{return!1}};try{if(Math.floor(ve.totalFrames||0)>0)return void Te();ve.addEventListener&&ve.addEventListener("data_ready",()=>Te());let Ce=200;const De=()=>{Te()||Ce-- >0&&setTimeout(De,50)};De()}catch{Te()||setTimeout(()=>Te(),50)}};if(ve.addEventListener&&ve.addEventListener("DOMLoaded",ye),ve.addEventListener&&ve.addEventListener("data_ready",ye),(ve.isLoaded||ve.isReady||ve.__isLoaded)&&ye(),!Pe){let Te=40;const Ae=()=>{try{if(Math.floor(ve.totalFrames||0)>0)return ye()}catch{}Te-- >0?setTimeout(Ae,50):ye()};Ae()}}catch{}me.__svcLottieBound=!0})}catch{}}function resetServiceCardIcons(te=document){try{const ee=te&&te.querySelector?te:document,ne=Array.from(ee.querySelectorAll(".service-card .service-icon_icon, .team-card .service-icon_icon, .stats-card .service-icon_icon"));if(!ne.length)return;const se=ae=>{var ue;try{const de=typeof window!="undefined"?window.Webflow:null,oe=de&&typeof de.require=="function"?de.require("lottie"):null,me=oe&&oe.lottie,ve=me&&typeof me.getRegisteredAnimations=="function"&&me.getRegisteredAnimations()||[];for(let Ee=0;Ee<ve.length;Ee++){const Pe=ve[Ee],ye=Pe.wrapper||Pe.container||((ue=Pe.renderer)==null?void 0:ue.svg);if(!ye)continue;if((typeof ye.closest=="function"?ye.closest(".service-icon_icon"):null)===ae||ye===ae||ae.contains(ye))return Pe}}catch{}try{const de=ae.querySelector("svg"),oe=de&&(de.__lottie||de._lottie);if(oe)return oe.animation||oe.animations&&oe.animations[0]}catch{}return null};ne.forEach(ae=>{try{const ue=se(ae);if(!ue)return;try{ue.__svcRaf&&cancelAnimationFrame(ue.__svcRaf)}catch{}try{ue.autoplay=!1,ue.loop=!1,ae.setAttribute("data-autoplay","0"),ae.setAttribute("data-loop","0")}catch{}try{ue.setSpeed&&ue.setSpeed(1)}catch{}try{ue.stop()}catch{}try{ue.goToAndStop(0,!0)}catch{}}catch{}})}catch{}}function destroyIcons(te=document){try{const ee=te&&te.querySelector?te:document;Array.from(ee.querySelectorAll(".service-card, .team-card")).forEach(ue=>{try{ue.__svcIconHoverBound&&(ue.__svcIconEnter&&ue.removeEventListener("pointerenter",ue.__svcIconEnter),ue.__svcIconEnter&&ue.removeEventListener("mouseenter",ue.__svcIconEnter),ue.__svcIconLeave&&ue.removeEventListener("pointerleave",ue.__svcIconLeave),ue.__svcIconLeave&&ue.removeEventListener("mouseleave",ue.__svcIconLeave),ue.__svcIconHoverBound=!1,ue.__svcIconEnter=null,ue.__svcIconLeave=null)}catch{}});const se=Array.from(ee.querySelectorAll(".service-card .service-icon_icon, .team-card .service-icon_icon, .stats-card .service-icon_icon")),ae=ue=>{var de;try{const oe=typeof window!="undefined"?window.Webflow:null,me=oe&&typeof oe.require=="function"?oe.require("lottie"):null,ve=me&&me.lottie,Ee=ve&&typeof ve.getRegisteredAnimations=="function"&&ve.getRegisteredAnimations()||[];for(let Pe=0;Pe<Ee.length;Pe++){const ye=Ee[Pe],Te=ye.wrapper||ye.container||((de=ye.renderer)==null?void 0:de.svg);if(!Te)continue;if((typeof Te.closest=="function"?Te.closest(".service-icon_icon"):null)===ue||Te===ue||ue.contains(Te))return ye}}catch{}try{const oe=ue.querySelector("svg"),me=oe&&(oe.__lottie||oe._lottie);if(me)return me.animation||me.animations&&me.animations[0]}catch{}return null};se.forEach(ue=>{try{ue.__svcSwapObs&&ue.__svcSwapObs.disconnect&&ue.__svcSwapObs.disconnect(),ue.__svcSwapObs=null,ue.__svcIconObserver&&ue.__svcIconObserver.disconnect&&ue.__svcIconObserver.disconnect(),ue.__svcIconObserver=null;try{ue.removeAttribute&&ue.removeAttribute("data-animation-type"),ue.removeAttribute&&ue.removeAttribute("data-autoplay"),ue.removeAttribute&&ue.removeAttribute("data-loop"),ue.removeAttribute&&ue.removeAttribute("data-w-id"),ue.setAttribute&&ue.setAttribute("data-wf-ignore","true")}catch{}const de=ae(ue);if(de){try{de.stop&&de.stop()}catch{}try{typeof de.destroy=="function"&&de.destroy()}catch{}}try{for(;ue.firstChild;)ue.removeChild(ue.firstChild);ue.style&&(ue.style.visibility="visible"),ue.style&&(ue.style.opacity="1"),ue.style&&(ue.style.display=ue.style.display||"block")}catch{}ue.__svcIconBound=!1,ue.__svcLottieBound=!1,ue.__svcOwned=!1,ue.__svcAnim=null}catch{}})}catch{}}gsapWithCSS.registerPlugin(CustomEase);const easeCurve$4="M0,0 C0.51,0 0,1 1,1";function resolveSideMarginPx(te){try{const ae=document.body||document.documentElement,ue=window.getComputedStyle&&window.getComputedStyle(ae),de=ue&&ue.getPropertyValue("--_spacings---site-margin")||"",oe=String(de||"").trim();if(oe.endsWith("px")){const me=parseFloat(oe);if(Number.isFinite(me))return me}if(oe.endsWith("em")){const me=parseFloat(oe),ve=parseFloat(ue&&ue.fontSize||String(te||16))||16;if(Number.isFinite(me))return me*ve}}catch{}const ee=typeof window!="undefined"&&window.matchMedia&&window.matchMedia("(max-width: 991px)").matches,ne=Number.isFinite(te)?te:16;return(ee?1:2)*ne}function createViewportClipOverlay(te={}){const{repeat:ee=0,yoyo:ne=!1}=te;try{const Mt=document.querySelector(".mask-overlay");if(Mt&&Mt.__overlay){try{}catch{}return{container:Mt,wrap:Mt.__overlay.wrap,maskFill:Mt.__overlay.maskFill,overlay:Mt.__overlay.overlay,svg:Mt.__overlay.svg,tl:Mt.__overlay.tl}}}catch{}const se=document.createElement("div");se.className="viewport-clip-overlay",Object.assign(se.style,{width:"100vw",height:"100vh",pointerEvents:"none",backgroundColor:"var(--accent)"});const ae="http://www.w3.org/2000/svg",ue=document.createElementNS(ae,"svg");ue.setAttribute("xmlns",ae),ue.setAttribute("width","0"),ue.setAttribute("height","0"),ue.style.position="absolute",ue.style.inset="0",ue.style.pointerEvents="none";const de=document.createElementNS(ae,"defs"),oe=document.createElementNS(ae,"clipPath"),me=`overlay-clip-${Date.now()}-${Math.floor(Math.random()*1e4)}`;oe.setAttribute("id",me),oe.setAttribute("clipPathUnits","objectBoundingBox");const ve=document.createElementNS(ae,"path");try{ve.setAttribute("clip-rule","evenodd")}catch{}let Ee=16;try{const Mt=window.getComputedStyle(document.documentElement).fontSize;Ee=parseFloat(Mt)||Ee}catch{}const Pe=12.5*Ee,ye=resolveSideMarginPx(Ee);oe.appendChild(ve),de.appendChild(oe),ue.appendChild(de),se.appendChild(ue),se.style.clipPath=`url(#${me})`,se.style.webkitClipPath=`url(#${me})`;const Te=document.createElement("div");Te.className="mask-overlay";const Ae=document.createElement("div");Ae.className="mask-overlay_wrap",Object.assign(Ae.style,{display:"flex",justifyContent:"flex-start",alignItems:"flex-start",height:"100%",width:"100%"});const Ce=document.createElement("div");Ce.className="overlay-mask-fill",Object.assign(Ce.style,{height:"100%",width:"100vw",flex:"0 0 100vw",backgroundColor:"var(--accent)"}),Te.appendChild(Ae),Ae.appendChild(Ce),Ae.appendChild(se);try{se.style.flex="0 0 100vw"}catch{}document.body.appendChild(Te);let De=null;try{const Mt=document.querySelector(".page-info");if(Mt){De=Mt.cloneNode(!0);try{De.setAttribute("aria-hidden","true")}catch{}De.className="page-info mask-overlay_page-info",Object.assign(De.style,{position:"fixed",top:"0",left:"50%",transform:"translateX(-50%)",width:"auto",pointerEvents:"none"}),Te.appendChild(De)}}catch{}const Ie=Te.getBoundingClientRect(),ze=Math.max(1,Ie.width||window.innerWidth||1),Re=Math.max(1,Ie.height||window.innerHeight||1),Oe=Math.max(0,Math.min(1,ye/ze)),qe=Math.max(0,Math.min(1,1-2*(ye/ze))),Ze=Math.max(0,Math.min(1,Pe/Re)),Ue=Math.max(0,Math.min(1,1-Ze)),Ye=Math.max(0,Math.min(1,1*Ee/ze)),ct=Math.max(0,Math.min(1,1*Ee/Re)),at=(Mt,At,_t,Qe,it=Ye,Ge=ct)=>{const je="M0,0 H1 V1 H0 Z",Ke=Math.max(0,Math.min(it,Math.min(_t,Qe)/2)),lt=Math.max(0,Math.min(Ge,Math.min(_t,Qe)/2)),Bt=Mt+_t,Xt=At+Qe,Gt=[`M${Mt+Ke},${At}`,`H${Bt-Ke}`,`A${Ke},${lt} 0 0 1 ${Bt},${At+lt}`,`V${Xt}`,`H${Mt}`,`V${At+Ke}`,`A${Ke},${lt} 0 0 1 ${Mt+Ke},${At}`,"Z"].join(" ");return`${je} ${Gt}`};ve.setAttribute("d",at(Oe,1-Ue,qe,Ue));const ft=gsapWithCSS.timeline({repeat:ee,yoyo:ne}),pt={x:Oe,y:1-Ue,w:qe,h:Ue,rX:Ye,rY:ct};ft.set({},{},0),ft.to(pt,{x:0,w:1,h:1,rX:0,rY:0,duration:1.2,ease:gsapWithCSS.parseEase(`custom(${easeCurve$4})`),onUpdate:()=>{try{const Mt=1-pt.h;ve.setAttribute("d",at(pt.x,Mt,pt.w,pt.h,pt.rX,pt.rY))}catch{}}});try{Te.__overlay={wrap:Ae,maskFill:Ce,overlay:se,svg:ue,tl:ft,ringPath:ve,animState:pt,pageInfoClone:De}}catch{}return{container:Te,wrap:Ae,maskFill:Ce,overlay:se,svg:ue,tl:ft}}function resetOverlayClipBaseState(te){try{let ee=document.querySelector(".mask-overlay");if(!(ee&&ee.__overlay)){const Ae=createViewportClipOverlay({repeat:0,yoyo:!1});ee=Ae&&Ae.container}if(!(ee&&ee.__overlay))return!1;const ne=ee.getBoundingClientRect(),se=Math.max(1,ne.width||window.innerWidth||1),ae=Math.max(1,ne.height||window.innerHeight||1),ue=function(){try{const Ae=window.getComputedStyle&&window.getComputedStyle(document.documentElement);return parseFloat(Ae&&Ae.fontSize||"16")||16}catch{return 16}}(),de=resolveSideMarginPx(ue);let oe=Number.isFinite(te)&&te>0?te:0;if(!oe)try{const Ae=document.querySelector(".page-info"),Ce=Ae&&Ae.getBoundingClientRect?Ae.getBoundingClientRect().height:0;oe=Ce&&Number.isFinite(Ce)&&Ce>0?Ce:12.5*ue}catch{oe=12.5*ue}const me=Math.max(0,Math.min(1,de/se)),ve=Math.max(0,Math.min(1,1-2*(de/se))),Ee=Math.max(0,Math.min(1,oe/ae)),Pe=Math.max(0,Math.min(1,1-Ee)),ye=ee.__overlay&&ee.__overlay.ringPath;if(ye){const Ae=(Ce,De,Ie,ze,Re=.02)=>{const Oe="M0,0 H1 V1 H0 Z",qe=Math.max(0,Math.min(Re,Math.min(Ie,ze)/2)),Ze=qe,Ue=Ce+Ie,Ye=De+ze,ct=[`M${Ce+qe},${De}`,`H${Ue-qe}`,`A${qe},${Ze} 0 0 1 ${Ue},${De+Ze}`,`V${Ye}`,`H${Ce}`,`V${De+qe}`,`A${qe},${Ze} 0 0 1 ${Ce+qe},${De}`,"Z"].join(" ");return`${Oe} ${ct}`};ye.setAttribute("d",Ae(me,1-Pe,ve,Pe))}ee.__overlay&&ee.__overlay.animState&&(ee.__overlay.animState.x=me,ee.__overlay.animState.w=ve,ee.__overlay.animState.h=Pe,ee.__overlay.animState.r=.02);const Te=ee.__overlay&&ee.__overlay.tl;if(Te){try{Te.pause(0)}catch{}try{typeof Te.invalidate=="function"&&Te.invalidate()}catch{}}return!0}catch{return!1}}function createClipForHost(te,ee={}){try{if(!te)return null;if(te.__clip&&te.__clip.tl)return te.__clip;const{repeat:ne=0,yoyo:se=!1}=ee,ae="http://www.w3.org/2000/svg",ue=document.createElementNS(ae,"svg");ue.setAttribute("xmlns",ae),ue.setAttribute("width","0"),ue.setAttribute("height","0"),ue.style.position="absolute",ue.style.inset="0",ue.style.pointerEvents="none";const de=document.createElementNS(ae,"defs"),oe=document.createElementNS(ae,"clipPath"),me=`host-clip-${Date.now()}-${Math.floor(Math.random()*1e4)}`;oe.setAttribute("id",me),oe.setAttribute("clipPathUnits","objectBoundingBox");const ve=document.createElementNS(ae,"path");let Ee=16;try{const ct=window.getComputedStyle(document.documentElement).fontSize;Ee=parseFloat(ct)||Ee}catch{}const Pe=12.5*Ee,ye=resolveSideMarginPx(Ee);oe.appendChild(ve),de.appendChild(oe),ue.appendChild(de),te.appendChild(ue);try{te.style.clipPath=`url(#${me})`,te.style.webkitClipPath=`url(#${me})`}catch{}const Te=te.getBoundingClientRect(),Ae=Math.max(1,Te.width||window.innerWidth||1),Ce=Math.max(1,Te.height||window.innerHeight||1),De=Math.max(0,Math.min(1,ye/Ae)),Ie=Math.max(0,Math.min(1,1-2*(ye/Ae))),ze=Math.max(0,Math.min(1,Pe/Ce)),Re=Math.max(0,Math.min(1,1-ze)),Oe=Math.max(0,Math.min(1,1*Ee/Ae)),qe=Math.max(0,Math.min(1,1*Ee/Ce)),Ze=(ct,at,ft,pt,Mt=Oe,At=qe)=>{const _t=Math.max(0,Math.min(Mt,Math.min(ft,pt)/2)),Qe=Math.max(0,Math.min(At,Math.min(ft,pt)/2)),it=ct+ft,Ge=at+pt;return[`M${ct+_t},${at}`,`H${it-_t}`,`A${_t},${Qe} 0 0 1 ${it},${at+Qe}`,`V${Ge}`,`H${ct}`,`V${at+Qe}`,`A${_t},${Qe} 0 0 1 ${ct+_t},${at}`,"Z"].join(" ")};ve.setAttribute("d",Ze(De,1-Re,Ie,Re));const Ue=gsapWithCSS.timeline({repeat:ne,yoyo:se}),Ye={x:De,y:1-Re,w:Ie,h:Re,rX:Oe,rY:qe};return Ue.set({},{},0),Ue.to(Ye,{x:0,w:1,h:1,rX:0,rY:0,duration:1.2,ease:gsapWithCSS.parseEase(`custom(${easeCurve$4})`),onUpdate:()=>{try{const ct=1-Ye.h;ve.setAttribute("d",Ze(Ye.x,ct,Ye.w,Ye.h,Ye.rX,Ye.rY))}catch{}}}),te.__clip={svg:ue,defs:de,clipPath:oe,clipPathRect:ve,buildInsidePath:Ze,tl:Ue,animState:Ye,rxFrac:Oe},te.__clip}catch{return null}}function resetHostClipBaseState(te,ee){try{if(!(te&&te.__clip))return!1;const ne=te.getBoundingClientRect(),se=Math.max(1,ne.width||window.innerWidth||1),ae=Math.max(1,ne.height||window.innerHeight||1),ue=function(){try{const Ae=window.getComputedStyle&&window.getComputedStyle(document.documentElement);return parseFloat(Ae&&Ae.fontSize||"16")||16}catch{return 16}}(),de=resolveSideMarginPx(ue);let oe=Number.isFinite(ee)&&ee>0?ee:0;if(!oe)try{const Ae=document.querySelector(".page-info"),Ce=Ae&&Ae.getBoundingClientRect?Ae.getBoundingClientRect().height:0;oe=Ce&&Number.isFinite(Ce)&&Ce>0?Ce:12.5*ue}catch{oe=12.5*ue}const me=Math.max(0,Math.min(1,de/se)),ve=Math.max(0,Math.min(1,1-2*(de/se))),Ee=Math.max(0,Math.min(1,oe/ae)),Pe=Math.max(0,Math.min(1,1-Ee)),ye=te.__clip.clipPathRect;ye&&typeof te.__clip.buildInsidePath=="function"&&ye.setAttribute("d",te.__clip.buildInsidePath(me,1-Pe,ve,Pe)),te.__clip.animState&&(te.__clip.animState.x=me,te.__clip.animState.w=ve,te.__clip.animState.h=Pe,te.__clip.animState.r=te.__clip.rxFrac||.02);const Te=te.__clip.tl;if(Te){try{Te.pause(0)}catch{}try{typeof Te.invalidate=="function"&&Te.invalidate()}catch{}}return!0}catch{return!1}}gsapWithCSS.registerPlugin(ScrollTrigger,CustomEase),gsapWithCSS.parseEase("machinesStep")||CustomEase.create("machinesStep","M0,0 C0.6,0 0,1 1,1");function initTechnology(te=document){try{const Ft=te&&te.nodeType===1?te:document,sr=Ft&&Ft.getAttribute&&Ft.getAttribute("data-barba-namespace")==="technology"?Ft:Ft.querySelector('[data-barba-namespace="technology"]');if(!sr)return;te=sr}catch{return}const ee=te.querySelector(".machines-wrapper"),ne=te.querySelector(".machines-grid-wrapper"),se=te.querySelector(".toggle.is-black"),ae=te.querySelector(".machines");if(!ee||!ae)return;const ue=()=>{try{if(typeof window=="undefined")return 0;if(typeof window.innerWidth=="number")return window.innerWidth;let Ft=null;return typeof document!="undefined"&&document.documentElement&&(Ft=document.documentElement),Ft&&typeof Ft.clientWidth=="number"?Ft.clientWidth:0}catch{return 0}},de=()=>{const Ft=ue();return Ft>=768&&Ft<=991};try{initWorkshopsStickyImages(te)}catch{}try{const Ft=te.querySelector(".logos-slider_control"),er=te.querySelector(".logos-slider_inner"),sr=Ft?Ft.querySelector(".toggle.is-light"):null,ir=sr?sr.querySelectorAll(".toggle-option"):[],mt=sr?sr.querySelectorAll(".toggle-id"):[],tt=sr?sr.querySelector(".toggle-indicator"):null,rt=Ft?Ft.querySelectorAll("button.body-m"):[],dt=rt&&rt.length?rt[0]:null,yt=rt&&rt.length>1?rt[1]:null;if(Ft&&er&&sr&&ir&&ir.length>=2&&mt&&mt.length>=2&&tt&&dt&&yt){try{er.style.willChange="transform"}catch{}const wt=Array.from(te.querySelectorAll(".logos-slider_logo")),It=wt.filter(zr=>!zr.classList.contains("is-2")),qt=wt.filter(zr=>zr.classList.contains("is-2")),Dt=zr=>{try{const Xr=ir[0]?ir[0].offsetLeft:0,kr=ir[zr]?ir[zr].offsetLeft:0;tt.style.transform=`translate3d(${Math.max(0,kr-Xr)}px, 0, 0)`}catch{}},Vt=zr=>{const Xr=zr===1,kr=zr===0;dt.classList.toggle("is-white",Xr),dt.classList.toggle("is-o-30",!Xr),yt.classList.toggle("is-white",kr),yt.classList.toggle("is-o-30",!kr)},tr=zr=>{mt.forEach((Xr,kr)=>{kr===zr?Xr.classList.add("is-active"):Xr.classList.remove("is-active")})};let Zt=null;const Ir=zr=>{const Xr=Math.max(0,Math.min(1,zr));try{gsapWithCSS.parseEase("wsEase")||CustomEase.create("wsEase","M0,0 C0.6,0 0,1 1,1")}catch{}const kr=.5,ar=gsapWithCSS.parseEase("wsEase")||(Cr=>Cr),mr=Xr===0?It:qt,gr=Xr===0?qt:It;try{Zt&&(Zt.kill(),Zt=null),gsapWithCSS.killTweensOf([mr,gr]);const Cr=gsapWithCSS.timeline({defaults:{ease:ar,duration:kr}});Zt=Cr,Cr.eventCallback("onComplete",()=>{Zt=null}),gr&&gr.length&&Cr.to(gr,{opacity:0}).add(()=>{try{gr.forEach(ur=>{ur.style.display="none"})}catch{}}),mr&&mr.length&&(Cr.add(()=>{try{mr.forEach(ur=>{ur.style.display="block"}),gsapWithCSS.set(mr,{opacity:0})}catch{}}),Cr.to(mr,{opacity:1}))}catch{}},Ot=zr=>{const Xr=Math.max(0,Math.min(1,zr));Ir(Xr),tr(Xr),Dt(Xr),Vt(Xr)};yt.addEventListener("click",zr=>{zr.preventDefault(),Ot(1)}),dt.addEventListener("click",zr=>{zr.preventDefault(),Ot(0)}),ir[0].addEventListener("click",zr=>{zr.preventDefault(),Ot(0)}),ir[1].addEventListener("click",zr=>{zr.preventDefault(),Ot(1)});try{const zr=Array.from(te.querySelectorAll(".logos-slider_logo")),Xr=zr.filter(ar=>!ar.classList.contains("is-2")),kr=zr.filter(ar=>ar.classList.contains("is-2"));Xr.length&&gsapWithCSS.set(Xr,{opacity:1,display:"block"}),kr.length&&gsapWithCSS.set(kr,{opacity:0,display:"none"})}catch{try{}catch{}}tr(0),Dt(0),Vt(0)}}catch{}try{requestAnimationFrame(()=>{try{window.ScrollTrigger&&typeof window.ScrollTrigger.refresh=="function"&&window.ScrollTrigger.refresh()}catch{}})}catch{}let oe=ae.querySelector(".machines-inner");if(oe){const Ft=oe.querySelector(".machines_images");Ft&&(oe.removeChild(Ft),ae.insertBefore(Ft,oe));const er=oe.querySelector(".machines_button-wrap");er&&(oe.removeChild(er),ae.insertBefore(er,oe))}else{oe=document.createElement("div"),oe.className="machines-inner";const Ft=Array.from(ae.childNodes),er=ae.querySelector(".machines_images"),sr=ae.querySelector(".machines_button-wrap");Ft.forEach(ir=>{ir===er||ir===sr||oe.appendChild(ir)}),ae.appendChild(oe),er&&er.parentNode!==ae&&ae.insertBefore(er,oe),sr&&sr.parentNode!==ae&&ae.insertBefore(sr,oe)}const me=ae.querySelector(".machines_images")||ae,ve=ae.querySelector(".machines_images-list")||me.querySelector(".machines_images-list")||null,Ee=()=>{try{const Ft=ve||me||ae,er=window.getComputedStyle(Ft).fontSize;return(parseFloat(er||"16")||16)*11.2}catch{return 16*11.2}};let Pe=Ee(),ye=0,Te=0;const Ae=Ft=>{if(!At.length||Ft<=0)return 0;const er=At.length-1;if(Ft>=At[er])return er;let sr=0,ir=er;for(;sr<ir;){const yt=sr+ir>>1;At[yt]<=Ft?sr=yt+1:ir=yt}const mt=sr,tt=mt-1,rt=Math.max(1,(At[mt]||0)-(At[tt]||0)),dt=Math.max(0,Math.min(1,(Ft-(At[tt]||0))/rt));return tt+dt},Ce=Ft=>{if(!ve)return;const er=Ae(Ft),sr=-Math.round(er*Pe);try{gsapWithCSS.set(ve,{y:sr})}catch{}},De=()=>{try{const Ft=te.querySelector(".machine_name"),er=Ft&&Ft.closest(".machines-list-item");if(!Ft||!er)return;const sr=Ft.getBoundingClientRect(),ir=[typeof Ft.scrollHeight=="number"?Ft.scrollHeight:0,typeof Ft.clientHeight=="number"?Ft.clientHeight:0,typeof Ft.offsetHeight=="number"?Ft.offsetHeight:0,sr&&sr.height?sr.height:0],mt=Math.max.apply(null,ir),tt=parseFloat(window.getComputedStyle(er).fontSize||"16")||16,rt=mt>0?mt/tt:0;if(rt>0){te.querySelectorAll(".machine_item").forEach(dt=>{dt.style.height=""}),te.querySelectorAll(".machines-list-item").forEach(dt=>{dt.style.height=`${rt}em`}),Te=rt,_t(),Pe=Ee(),dr();try{Qe.refresh()}catch{}}}catch{}};try{me&&me!==ae&&(gsapWithCSS.set(me,{width:0,height:0}),ScrollTrigger.create({trigger:ae,start:"top 53%",once:!0,onEnter:()=>{gsapWithCSS.to(me,{width:de()?"11.8em":"13.5em",height:"11.2em",duration:1.2,ease:gsapWithCSS.parseEase("machinesStep")||(Ft=>Ft)})},scroller:window.__lenisWrapper||void 0}))}catch{}try{if(se&&ne&&ee){const Ft=se.querySelector(".toggle-indicator"),er=se.querySelector('[data-toggle="grid"]'),sr=se.querySelector('[data-toggle="list"]');let ir=null,mt=null;const tt=rt=>{const dt=rt==="grid";try{const wt=se.querySelector(`.toggle-option[data-toggle="${rt}"]`);Ft&&(dt?Ft.classList.remove("is-grid"):Ft.classList.add("is-grid")),se.querySelectorAll(".toggle-id").forEach(qt=>qt.classList.remove("is-active"));const It=wt?wt.querySelector(".toggle-id"):null;It&&It.classList.add("is-active")}catch{}if(ir==null){ee.style.display="block",ne.style.display=dt?"block":"none";try{gsapWithCSS.set([ee,ne],{clearProps:"opacity,transform"})}catch{}try{window.ScrollTrigger&&typeof window.ScrollTrigger.refresh=="function"&&window.ScrollTrigger.refresh()}catch{}try{initNextBackgroundParallax(te)}catch{}try{initParallax(te)}catch{}ir=rt;return}if(ir===rt)return;const yt=gsapWithCSS.parseEase("machinesStep")||(wt=>wt);if(ir==="list"&&dt)try{mt&&(mt.kill(),mt=null),gsapWithCSS.killTweensOf(ne);const wt=gsapWithCSS.timeline();mt=wt,wt.add(()=>{try{gsapWithCSS.set(ne,{display:"block",opacity:0,y:"8em",position:"absolute",top:0,left:0,width:"100%",zIndex:2})}catch{}}).to(ne,{opacity:1,y:"0em",duration:1.2,ease:yt}).add(()=>{try{const It=ne.getBoundingClientRect().height;It>0&&(ee.style.minHeight=It+"px")}catch{}}).add(()=>{try{gsapWithCSS.set(ne,{clearProps:"opacity,transform"})}catch{}}).add(()=>{try{window.ScrollTrigger&&typeof window.ScrollTrigger.refresh=="function"&&window.ScrollTrigger.refresh()}catch{}try{initNextBackgroundParallax(te)}catch{}try{initParallax(te)}catch{}}),wt.eventCallback("onComplete",()=>{mt=null}),ir=rt}catch{ne.style.display="block",ir=rt;try{window.ScrollTrigger&&typeof window.ScrollTrigger.refresh=="function"&&window.ScrollTrigger.refresh()}catch{}}else if(ir==="grid"&&!dt)try{mt&&(mt.kill(),mt=null),gsapWithCSS.killTweensOf(ne),ne.style.display="none",gsapWithCSS.set(ne,{clearProps:"opacity,transform"}),ee.style.minHeight="",ir=rt}catch{ne.style.display="none",ee.style.minHeight="",ir=rt}try{initNextBackgroundParallax(te)}catch{}};er&&er.addEventListener("click",rt=>{rt.preventDefault(),tt("grid")}),sr&&sr.addEventListener("click",rt=>{rt.preventDefault(),tt("list")}),ne.style.display="none",tt("list")}}catch{}const Ie=()=>{if(!Nr){try{window.lenis&&typeof window.lenis.stop=="function"&&window.lenis.stop()}catch{}try{const Ft=pt&&pt!==window?pt:document.documentElement;Ft&&(Ft.style.overflow="hidden",Ft.style.touchAction="none"),Ft!==document.documentElement&&(document.documentElement.style.overflow="hidden",document.body.style.overflow="hidden",document.body.style.touchAction="none")}catch{}Nr=!0}},ze=()=>{if(!!Nr){try{window.lenis&&typeof window.lenis.start=="function"&&window.lenis.start()}catch{}try{const Ft=pt&&pt!==window?pt:document.documentElement;Ft&&(Ft.style.overflow="",Ft.style.touchAction=""),document.documentElement.style.overflow="",document.body.style.overflow="",document.body.style.touchAction=""}catch{}Nr=!1}};try{let Ft=null,er=[],sr=[];if(ne&&(Ft=ne.querySelector(".machines-grid_list"),er=Array.from(ne.querySelectorAll(".machines-grid_item")),sr=Array.from(ne.querySelectorAll(".machines-grid_button"))),ne&&Ft&&er.length&&sr.length){let ir=null,mt=null,tt=null,rt=null,dt=null,yt=null,wt=null,It=null,qt=null;const Dt=ar=>{try{ar.style.position="",ar.style.left="",ar.style.top="",ar.style.width="",ar.style.height="",ar.style.padding="",ar.style.zIndex="",ar.style.margin=""}catch{}},Vt=(ar,mr)=>{const gr=ar.getBoundingClientRect(),Cr=gr.left+gr.width/2,ur=gr.top+gr.height/2;er.forEach(cr=>{if(cr===ar)return;const nr=cr.getBoundingClientRect(),hr=nr.left+nr.width/2,jt=nr.top+nr.height/2,Qt=hr-Cr,Mr=jt-ur,pi=gr.height*.6,Yr=Math.abs(Mr)<=pi;let or={x:0,y:0};Yr?or.x=Qt<0?-(nr.left+nr.width+50):window.innerWidth-nr.left+50:or.y=Mr<0?-(nr.top+nr.height+50):window.innerHeight-nr.top+50;const wr={x:or.x,y:or.y,duration:1.2,ease:gsapWithCSS.parseEase("machinesStep")||"power2.inOut",overwrite:"auto"};mr?mr.to(cr,wr,0):gsapWithCSS.to(cr,wr)})},tr=ar=>{er.forEach(mr=>{if(mr===ir)return;const gr={x:0,y:0,duration:1.2,ease:gsapWithCSS.parseEase("machinesStep")||"power2.inOut",clearProps:"transform",overwrite:"auto"};ar?ar.to(mr,gr,0):gsapWithCSS.to(mr,gr)})},Zt=ar=>{try{if(!ar||ar.__gridLines)return ar&&ar.__gridLines;const gr=(ar.textContent||"").split(" ");ar.textContent="";const Cr=[];gr.forEach((jt,Qt)=>{const Mr=document.createElement("span");Mr.textContent=jt,Mr.style.display="inline-block",ar.appendChild(Mr),Qt<gr.length-1&&ar.appendChild(document.createTextNode(" ")),Cr.push(Mr)});const ur=[];let cr=null,nr=[];Cr.forEach(jt=>{const Qt=jt.offsetTop;cr==null||Math.abs(Qt-cr)<2?(nr.push(jt.textContent||""),cr=Qt):(ur.push(nr),nr=[jt.textContent||""],cr=Qt)}),nr.length&&ur.push(nr),ar.textContent="";const hr=[];return ur.forEach(jt=>{const Qt=document.createElement("span");Qt.style.display="block",Qt.style.overflow="hidden";const Mr=document.createElement("span");Mr.style.display="inline-block",jt.forEach((pi,Yr)=>{const or=document.createElement("span");or.textContent=pi,or.style.display="inline",Mr.appendChild(or),Yr<jt.length-1&&Mr.appendChild(document.createTextNode(" "))}),Qt.appendChild(Mr),ar.appendChild(Qt),hr.push(Mr)}),ar.__gridLines=hr,hr}catch{return[]}},Ir=ar=>{if(ir===ar)return;ir=ar;let mr=0,gr=0,Cr=null;try{Cr=window.__lenisWrapper||null,Cr?(mr=Cr.scrollTop,gr=Cr.scrollLeft||0):(mr=window.pageYOffset||document.documentElement.scrollTop||0,gr=window.pageXOffset||document.documentElement.scrollLeft||0)}catch{}Ie();try{Cr?(Cr.scrollTop=mr,typeof Cr.scrollLeft=="number"&&(Cr.scrollLeft=gr)):window.scrollTo(gr,mr)}catch{}const ur=ar.getBoundingClientRect();try{mt=ar.cloneNode(!0);try{const Qt=mt.querySelector(".machines-grid_name-wrap");Qt&&Qt.parentNode&&Qt.parentNode.removeChild(Qt)}catch{}try{const Qt=mt.querySelector(".machines-grid_name-inner");Qt&&Qt.parentNode&&Qt.parentNode.removeChild(Qt)}catch{}try{const Qt=mt.querySelector(".machines-grid_close-button");Qt&&Qt.parentNode&&Qt.parentNode.removeChild(Qt)}catch{}const hr=ar.querySelector(".machines-grid_img-wrap"),jt=hr?hr.getBoundingClientRect():ur;mt.classList.add("machines-grid_item-clone");try{mt.style.visibility="hidden"}catch{}document.body.appendChild(mt),gsapWithCSS.set(mt,{position:"fixed",left:jt.left,top:jt.top,width:jt.width,height:jt.height,padding:0,margin:0,zIndex:6,overflow:"hidden",pointerEvents:"none"});try{hr&&gsapWithCSS.set(hr,{opacity:0})}catch{}}catch{mt=null,gsapWithCSS.set(ar,{position:"fixed",left:ur.left,top:ur.top,width:ur.width,height:ur.height,padding:0,margin:0,zIndex:5})}const cr=mt||ar,nr=gsapWithCSS.timeline({defaults:{overwrite:"auto"}});qt=nr,nr.to(cr,{left:0,top:0,width:window.innerWidth,height:window.innerHeight,padding:"1em",duration:1.2,ease:gsapWithCSS.parseEase("machinesStep")||"power2.out"},0);try{nr.eventCallback("onComplete",()=>{qt=null}),nr.eventCallback("onInterrupt",()=>{qt=null})}catch{}try{if(mt){const hr=mt.querySelector(".machines-grid_close-button");hr&&(nr.set(hr,{display:"flex",opacity:0},0),nr.to(hr,{opacity:1,duration:1.2,ease:gsapWithCSS.parseEase("machinesStep")||"power2.out"},0))}}catch{}try{if(mt){const hr=mt.querySelector(".machines-grid_name-inner");hr&&(nr.set(hr,{opacity:1},0),nr.to(hr,{y:0,duration:1.2,ease:gsapWithCSS.parseEase("machinesStep")||"power2.out"},0))}}catch{}try{if(mt){const hr=mt.querySelector(".machines-grid_img");if(hr){const jt="50%",Qt="50%",Mr="24em";hr.dataset.gridStartLeft=jt,hr.dataset.gridStartTop=Qt,hr.dataset.gridStartWidth=Mr,gsapWithCSS.set(hr,{position:"absolute",left:jt,top:Qt,width:Mr,height:"auto",margin:0,zIndex:2,pointerEvents:"none",objectFit:"contain"});const pi=de()?"50%":"80%",Yr=de()?"35%":"70%";nr.to(hr,{left:pi,top:Yr,width:"60em",duration:1.2,ease:gsapWithCSS.parseEase("machinesStep")||"power2.out"},0)}}}catch{}try{nr.set(mt,{visibility:"visible"},0)}catch{}try{animateNavbarSpreadForGrid(!0,te)}catch{}try{if(mt){const hr=mt.querySelector(".is-grid-desc"),jt=Zt(hr);jt&&jt.length&&(gsapWithCSS.set(jt,{yPercent:100}),nr.to(jt,{yPercent:0,duration:1.2,ease:gsapWithCSS.parseEase("machinesStep")||"power2.out"},0))}}catch{}try{const hr=ar.querySelector(".machines-grid_desc");if(hr){const jt=hr.getBoundingClientRect(),Qt="http://www.w3.org/2000/svg",Mr=document.createElementNS(Qt,"svg"),pi=document.createElementNS(Qt,"defs"),Yr=document.createElementNS(Qt,"mask"),or=document.createElementNS(Qt,"rect"),wr=document.createElementNS(Qt,"rect"),Wr=window.innerWidth,vi=window.innerHeight,Ni=`gridDescMask_${Date.now()}`;Mr.setAttribute("width","0"),Mr.setAttribute("height","0"),Mr.setAttribute("viewBox",`0 0 ${Wr} ${vi}`),Mr.setAttribute("preserveAspectRatio","none"),Yr.setAttribute("id",Ni),Yr.setAttribute("maskUnits","userSpaceOnUse"),Yr.setAttribute("maskContentUnits","userSpaceOnUse"),Yr.setAttribute("style","mask-type:luminance;"),or.setAttribute("x","0"),or.setAttribute("y","0"),or.setAttribute("width",String(Wr)),or.setAttribute("height",String(vi)),or.setAttribute("fill","black");const $i=mt?mt.getBoundingClientRect():ur;wr.setAttribute("x",String($i.left)),wr.setAttribute("y",String($i.top)),wr.setAttribute("width",String($i.width)),wr.setAttribute("height",String($i.height)),wr.setAttribute("fill","white"),Yr.appendChild(or),Yr.appendChild(wr),pi.appendChild(Yr),Mr.appendChild(pi),document.body.appendChild(Mr);const Fr=document.createElement("div");Fr.className="grid-desc-overlay",document.body.appendChild(Fr),gsapWithCSS.set(Fr,{position:"fixed",left:0,top:0,width:window.innerWidth,height:window.innerHeight,margin:0,zIndex:7,pointerEvents:"auto",opacity:0}),Fr.style.webkitMaskImage=`url(#${Ni})`,Fr.style.maskImage=`url(#${Ni})`;const ki=hr.cloneNode(!0);Fr.appendChild(ki),gsapWithCSS.set(ki,{position:"absolute",left:jt.left,top:jt.top,width:jt.width,height:jt.height,margin:0,opacity:1,pointerEvents:"none"});try{const Ai=ki.querySelector(".is-grid-desc"),Ri=Zt(Ai);Ri&&Ri.length&&(gsapWithCSS.set(Ri,{yPercent:100}),nr.to(Ri,{yPercent:0,duration:1.2,ease:gsapWithCSS.parseEase("machinesStep")||"power2.out"},0))}catch{}try{if(mt){const Ai=ar.querySelector(".machines-grid_name-inner");if(Ai){const oi=Ai.cloneNode(!0);Fr.appendChild(oi),gsapWithCSS.set(oi,{position:"absolute",left:"3em",top:"3em",margin:0,display:"block",opacity:1,y:"-8em",pointerEvents:"none"});try{const ni=oi.querySelector(".body-xl")||oi;if(ni&&!ni.__gridSplit){const Qr=ni.textContent||"",En=document.createDocumentFragment(),Di=Qr.split(" ");Di.forEach((ji,Yi)=>{const Pi=document.createElement("span");Pi.style.display="inline-block",Pi.style.whiteSpace="nowrap";for(let qn=0;qn<ji.length;qn++){const Lo=ji[qn],eo=document.createElement("span");eo.textContent=Lo,eo.style.display="inline-block",Pi.appendChild(eo)}En.appendChild(Pi),Yi<Di.length-1&&En.appendChild(document.createTextNode(" "))}),ni.textContent="",ni.appendChild(En),ni.__gridSplit=!0}const Xi=oi.querySelector(".body-xl")||oi,si=Array.from(Xi.querySelectorAll("span > span"));si.length&&(gsapWithCSS.set(si,{yPercent:-100}),nr.to(si,{yPercent:0,duration:1.2,ease:gsapWithCSS.parseEase("machinesStep")||"power2.out",stagger:.02},0))}catch{}nr.to(oi,{y:0,duration:1.2,ease:gsapWithCSS.parseEase("machinesStep")||"power2.out"},0)}const Ri=ar.querySelector(".machines-grid_close-button");if(Ri){const oi=Ri.cloneNode(!0);Fr.appendChild(oi),gsapWithCSS.set(oi,{position:"absolute",left:"auto",right:"3em",top:"3em",margin:0,display:"flex",opacity:0,zIndex:8,pointerEvents:"auto",cursor:"pointer"}),nr.to(oi,{opacity:1,duration:1.2,ease:gsapWithCSS.parseEase("machinesStep")||"power2.out"},0);try{const ni=si=>{if(!si)return[];if(si.__split)return si.__split;const Qr=si.textContent||"",En=document.createDocumentFragment(),Di=[];for(let ji=0;ji<Qr.length;ji++){const Yi=Qr[ji],Pi=document.createElement("span");Pi.textContent=Yi===" "?"\xA0":Yi,Pi.style.display="inline-block",En.appendChild(Pi),Di.push(Pi)}return si.textContent="",si.appendChild(En),si.__split=Di,Di};(si=>{if(!si)return;const Qr=si.querySelector(".machines-grid_close-button_inner"),En=si.querySelector(".machines-grid_close-button_row:nth-of-type(1) .button_label")||si.querySelector(".machine-grid_close-button_row:nth-of-type(1) .button_label"),Di=si.querySelector(".machines-grid_close-button_row:nth-of-type(2) .button_label")||si.querySelector(".machine-grid_close-button_row:nth-of-type(2) .button_label"),ji=si.querySelector(".machines-grid_close-button_row:nth-of-type(2) .is-plus")||si.querySelector(".machine-grid_close-button_row:nth-of-type(2) .is-plus"),Yi=ni(En),Pi=ni(Di);Qr&&gsapWithCSS.set(Qr,{yPercent:0}),ji&&gsapWithCSS.set(ji,{rotate:0,transformOrigin:"50% 50%"}),Yi.length&&gsapWithCSS.set(Yi,{yPercent:0}),Pi.length&&gsapWithCSS.set(Pi,{yPercent:100});const qn=gsapWithCSS.timeline({paused:!0,defaults:{duration:.5,ease:gsapWithCSS.parseEase("machinesStep")||"power2.out"}});Qr&&qn.to(Qr,{yPercent:-50},0),qn.to(si,{backgroundColor:"var(--accent)"},0),ji&&qn.to(ji,{rotate:90},0),Pi.length&&qn.to(Pi,{yPercent:0,stagger:.02},0),Yi.length&&qn.to(Yi,{yPercent:-100,stagger:.02},0),si.__hoverTl=qn,si.addEventListener("mouseenter",()=>{si.__hoverTl&&si.__hoverTl.play()}),si.addEventListener("mouseleave",()=>{si.__hoverTl&&si.__hoverTl.reverse()})})(oi)}catch{}}}}catch{}rt=Fr,dt=Mr,yt=wr,nr.to(Fr,{opacity:1,duration:1.2,ease:gsapWithCSS.parseEase("machinesStep")||"power2.out"},0);try{if(mt){const Ai=mt.querySelector(".machines-grid_name-inner"),Ri=mt.querySelector(".machines-grid_close-button"),oi=ni=>{!ni||(ni.style.webkitMaskImage=`url(#${Ni})`,ni.style.maskImage=`url(#${Ni})`,ni.style.webkitMaskRepeat="no-repeat",ni.style.maskRepeat="no-repeat",ni.style.webkitMaskSize="100% 100%",ni.style.maskSize="100% 100%",ni.style.webkitMaskPosition="0 0",ni.style.maskPosition="0 0")};oi(Ai),oi(Ri)}}catch{}const qi=Ai=>{try{const oi=window.getComputedStyle(Ai).borderTopLeftRadius||"0";return parseFloat(oi)||0}catch{return 0}};wt=()=>{try{const Ai=mt||ar,Ri=Ai.getBoundingClientRect();yt.setAttribute("x",String(Ri.left)),yt.setAttribute("y",String(Ri.top)),yt.setAttribute("width",String(Ri.width)),yt.setAttribute("height",String(Ri.height));const oi=qi(Ai);oi>0&&(yt.setAttribute("rx",String(oi)),yt.setAttribute("ry",String(oi)))}catch{}},wt(),nr.eventCallback("onUpdate",wt)}}catch{}try{er.forEach(hr=>{const jt=hr.querySelector(".machines-grid_name-wrap");jt&&nr.to(jt,{opacity:0,duration:1.2,ease:gsapWithCSS.parseEase("machinesStep")||"power2.out"},0);const Qt=hr.querySelector(".machines-grid_name-inner");Qt&&nr.set(Qt,{opacity:0},0)})}catch{}Vt(ar,nr),tt=()=>{const hr=mt||ar;try{gsapWithCSS.set(hr,{left:0,top:0,width:window.innerWidth,height:window.innerHeight})}catch{}try{wt&&wt()}catch{}},window.addEventListener("resize",tt);try{It&&It();const hr=Mr=>{try{if(Mr&&Mr.target&&Mr.target.closest&&Mr.target.closest(".machines-grid_button"))return}catch{}Ot()},jt=()=>Ot(),Qt=()=>Ot();requestAnimationFrame(()=>{document.addEventListener("click",hr,!0),window.addEventListener("wheel",jt,{passive:!0,capture:!0}),window.addEventListener("touchmove",Qt,{passive:!0,capture:!0})}),It=()=>{try{document.removeEventListener("click",hr,!0)}catch{}try{window.removeEventListener("wheel",jt,{passive:!0,capture:!0})}catch{}try{window.removeEventListener("touchmove",Qt,{passive:!0,capture:!0})}catch{}}}catch{}},Ot=()=>{if(!ir)return;const ar=ir;ir=null;try{qt&&(qt.kill(),qt=null)}catch{}window.removeEventListener("resize",tt),tt=null;try{It&&It()}catch{}const mr=ar.querySelector(".machines-grid_img-wrap"),gr=mr?mr.getBoundingClientRect():ar.getBoundingClientRect(),Cr=mt||ar;if(!mt){const cr=Cr.getBoundingClientRect();gsapWithCSS.set(Cr,{position:"fixed",left:cr.left,top:cr.top,width:cr.width,height:cr.height,padding:"2em",zIndex:5})}const ur=gsapWithCSS.timeline({onComplete:()=>{if(mt){try{mt.remove()}catch{}mt=null}else Dt(ar);try{rt&&rt.remove(),dt&&dt.remove()}catch{}rt=null,dt=null,yt=null;try{er.forEach(cr=>{const nr=cr.querySelector(".machines-grid_name-wrap");nr&&gsapWithCSS.set(nr,{opacity:1});const hr=cr.querySelector(".machines-grid_name-inner");hr&&gsapWithCSS.set(hr,{opacity:0})})}catch{}try{const cr=ar.querySelector(".machines-grid_img-wrap");cr&&gsapWithCSS.set(cr,{opacity:1})}catch{}try{document.querySelectorAll(".machines-grid_item-clone").forEach(nr=>{try{nr&&nr.parentNode&&nr.parentNode.removeChild(nr)}catch{}})}catch{}ze();try{initNextBackgroundParallax(te)}catch{}try{initParallax(te)}catch{}try{window.ScrollTrigger&&typeof window.ScrollTrigger.refresh=="function"&&window.ScrollTrigger.refresh()}catch{}},onInterrupt:()=>{try{setTimeout(()=>{try{mt&&(mt.remove(),mt=null)}catch{}try{rt&&rt.remove(),dt&&dt.remove(),rt=null,dt=null,yt=null}catch{}},0)}catch{}try{initNextBackgroundParallax(te)}catch{}try{initParallax(te)}catch{}try{window.ScrollTrigger&&typeof window.ScrollTrigger.refresh=="function"&&window.ScrollTrigger.refresh()}catch{}}});try{animateNavbarSpreadForGrid(!1,te)}catch{}ur.to(Cr,{left:gr.left,top:gr.top,width:gr.width,height:gr.height,padding:0,duration:1.2,ease:gsapWithCSS.parseEase("machinesStep")||"power2.inOut"},0);try{if(mt){const cr=mt.querySelector(".machines-grid_img");if(cr){const nr=cr.dataset.gridStartLeft||"50%",hr=cr.dataset.gridStartTop||"50%",jt=cr.dataset.gridStartWidth||"24em";ur.to(cr,{left:nr,top:hr,width:jt,duration:1.2,ease:gsapWithCSS.parseEase("machinesStep")||"power2.inOut"},0)}}}catch{}try{if(rt){try{const cr=rt.querySelector(".is-grid-desc"),nr=Zt(cr);nr&&nr.length&&(gsapWithCSS.set(nr,{yPercent:0}),ur.to(nr,{yPercent:100,duration:1.2,ease:gsapWithCSS.parseEase("machinesStep")||"power2.inOut"},0))}catch{}ur.to(rt,{opacity:0,duration:1.2,ease:gsapWithCSS.parseEase("machinesStep")||"power2.inOut"},0)}try{if(mt){const cr=mt.querySelector(".is-grid-desc"),nr=Zt(cr);nr&&nr.length&&(gsapWithCSS.set(nr,{yPercent:0}),ur.to(nr,{yPercent:100,duration:1.2,ease:gsapWithCSS.parseEase("machinesStep")||"power2.inOut"},0))}}catch{}yt&&ur.to(yt,{attr:{x:gr.left,y:gr.top,width:gr.width,height:gr.height},duration:1.2,ease:gsapWithCSS.parseEase("machinesStep")||"power2.inOut"},0);try{if(rt){const cr=rt.querySelector(".machines-grid_name-inner");cr&&ur.to(cr,{y:"-8em",duration:1.2,ease:gsapWithCSS.parseEase("machinesStep")||"power2.inOut"},0)}}catch{}}catch{}try{er.forEach(cr=>{const nr=cr.querySelector(".machines-grid_name-wrap");nr&&ur.to(nr,{opacity:1,duration:1.2,ease:gsapWithCSS.parseEase("machinesStep")||"power2.inOut"},0)})}catch{}tr(ur)};try{Array.from(Ft.querySelectorAll(".machines-grid_item")).forEach((mr,gr)=>{const Cr=mr.dataset.gridUid||String(gr+1);mr.dataset.gridUid=Cr;const ur=mr.querySelector(".machines-grid_button");ur&&(ur.dataset.gridUid=Cr)})}catch{}const zr=(ar,mr)=>{try{const gr=Array.from(Ft.querySelectorAll(".machines-grid_item"));let Cr=null,ur=1/0;return gr.forEach(cr=>{const nr=cr.getBoundingClientRect(),hr=nr.left+nr.width/2,jt=nr.top+nr.height/2,Qt=Math.abs(mr-jt),Mr=Math.abs(ar-hr),pi=Qt*1e3+Mr;pi<ur&&(ur=pi,Cr=cr)}),Cr}catch{return null}};(()=>{try{ne.querySelectorAll(".machines-grid_name-inner").forEach(mr=>gsapWithCSS.set(mr,{opacity:0}))}catch{}})();const kr=ar=>{try{const mr=ar.querySelector(".machines-grid_button");if(!mr||mr.__gridHandlerAttached)return;mr.__gridHandlerAttached=!0,mr.addEventListener("click",gr=>{gr.preventDefault(),gr.stopPropagation(),typeof gr.stopImmediatePropagation=="function"&&gr.stopImmediatePropagation();try{mr.blur(),document.activeElement&&document.activeElement.blur&&document.activeElement.blur()}catch{}const Cr=zr(gr.clientX,gr.clientY)||ar;ir&&ir===Cr?Ot():Ir(Cr)})}catch{}};er.forEach(ar=>kr(ar));try{const ar=document.querySelector(".cursor-pointer");if(ar){try{ar.style.display="none",ar.style.pointerEvents="none"}catch{}try{const Qt=ar.querySelector(".cursor-pointer_inner")||ar.firstElementChild;if(Qt){const Mr=getComputedStyle(Qt).transition||"";/transform/.test(Mr)||(Qt.style.transition=(Mr?Mr+", ":"")+"transform 300ms cubic-bezier(0.6, 0, 0, 1)"),Qt.style.transform="translateY(100%)";const pi=ar.style.visibility,Yr=ar.style.display,or=getComputedStyle(ar).display==="none";or&&(ar.style.visibility="hidden",ar.style.display="flex");const wr=Qt.getBoundingClientRect();ar.dataset.__cursorInnerW=String(Math.ceil(wr.width)),ar.dataset.__cursorInnerH=String(Math.ceil(wr.height)),or&&(ar.style.display=Yr||"none",ar.style.visibility=pi||"")}}catch{}let mr=8,gr=null;const Cr=()=>{try{mr=parseFloat(getComputedStyle(ar).fontSize)||16}catch{mr=8}};Cr();const ur=()=>{const Qt=ar.querySelector(".cursor-pointer_inner")||ar.firstElementChild;if(ar.style.display="flex",Qt){if(gr){try{Qt.removeEventListener("transitionend",gr)}catch{}gr=null}Qt.style.transform="translateY(100%)",Qt.getBoundingClientRect(),Qt.style.transform="translateY(0)"}},cr=()=>{const Qt=ar.querySelector(".cursor-pointer_inner")||ar.firstElementChild;Qt?(gr=()=>{ar.style.display="none";try{Qt.removeEventListener("transitionend",gr)}catch{}gr=null,Qt.style.transform="translateY(100%)"},Qt.addEventListener("transitionend",gr),Qt.style.transform="translateY(100%)"):ar.style.display="none"},nr=Qt=>{ar.style.left=Qt.pageX+mr+"px",ar.style.top=Qt.pageY+mr+"px"},hr=gsapWithCSS.parseEase("machinesStep")||(Qt=>Qt),jt=Qt=>{if(!Qt||Qt.__gridHoverBound)return;Qt.__gridHoverBound=!0;const Mr=Qt.querySelector(".is-m-name_wrap"),pi=()=>{if(ur(),Mr){try{gsapWithCSS.killTweensOf(Mr)}catch{}gsapWithCSS.to(Mr,{y:"-1.8em",opacity:1,duration:.3,ease:hr})}try{er.forEach(wr=>{if(wr===Qt)return;const Wr=wr.querySelector(".is-m-name_wrap");Wr&&gsapWithCSS.to(Wr,{opacity:.4,duration:.3,ease:hr})})}catch{}},Yr=()=>{if(cr(),Mr){try{gsapWithCSS.killTweensOf(Mr)}catch{}gsapWithCSS.to(Mr,{y:"0em",duration:.3,ease:hr})}try{er.forEach(wr=>{const Wr=wr.querySelector(".is-m-name_wrap");Wr&&gsapWithCSS.to(Wr,{opacity:1,duration:.3,ease:hr})})}catch{}},or=wr=>nr(wr);Qt.addEventListener("mouseenter",pi),Qt.addEventListener("mouseleave",Yr),Qt.addEventListener("mousemove",or)};try{const Qt=ne.querySelectorAll(".is-m-name_wrap");Qt&&Qt.length&&Qt.forEach(Mr=>gsapWithCSS.set(Mr,{opacity:1,y:0}))}catch{}er.forEach(Qt=>jt(Qt));try{new MutationObserver(()=>{try{er=Array.from(ne.querySelectorAll(".machines-grid_item"))}catch{er=[]}er.forEach(Mr=>jt(Mr))}).observe(Ft||ne,{childList:!0,subtree:!0})}catch{}try{window.addEventListener("resize",Cr)}catch{}}}catch{}ne.querySelectorAll(".machines-grid_close-button, .machines-grid_button_label").forEach(ar=>{ar.addEventListener("click",mr=>{mr.preventDefault(),mr.stopPropagation(),ir&&Ot()})})}}catch{}const Re=()=>{try{const Ft=Number(gsapWithCSS.getProperty(oe,"y"))||0,er=At[At.length-1]||0;return Math.max(0,Math.min(er,-Ft))}catch{return Qe.scroll()-Qe.start}},Oe=()=>{const Ft=Re();return fr(Ft)},qe=Ft=>{try{const sr=(me||ae).querySelectorAll(".machines_images-item");if(!sr||!sr.length)return;sr.forEach((ir,mt)=>{mt===Ft?ir.classList.add("is-active"):ir.classList.remove("is-active")})}catch{}},Ze=Ft=>{const er=ae.querySelectorAll(".machines-list-item"),sr=te.querySelector(".machines-bottom")||document.querySelector(".machines-bottom"),ir=sr?sr.querySelectorAll(".machines-list-item"):[],mt=[];return er[Ft]&&mt.push(er[Ft]),ir[Ft]&&mt.push(ir[Ft]),mt},Ue=()=>{const Ft=Oe(),er=Ze(Ft);if(er.length!==0){Ie();try{const sr=er[0],ir=sr.querySelector(".machine_item"),mt=window.getComputedStyle(sr).fontSize||"16",tt=parseFloat(mt),rt=ir?ir.getBoundingClientRect().height:0,dt=window.getComputedStyle(sr),yt=parseFloat(dt.paddingTop||"0")||0,wt=parseFloat(dt.paddingBottom||"0")||0,It=rt+yt+wt,qt=tt?It/tt:0,Dt=qt>0?qt+1.5:0;Dt>0&&er.forEach(Vt=>{gsapWithCSS.to(Vt,{height:`${Dt}em`,duration:1.2,ease:gsapWithCSS.parseEase("machinesStep")||(tr=>tr)})})}catch{}try{const sr=ae.querySelector(".machines_button-wrap"),ir=sr?sr.querySelectorAll(".machines_button"):null;ir&&ir.length&&gsapWithCSS.to(ir,{yPercent:-100,duration:1.2,ease:gsapWithCSS.parseEase("machinesStep")||(tt=>tt)});const mt=sr?sr.querySelector(".machines_button.is-close > .is-plus"):null;mt&&gsapWithCSS.to(mt,{rotate:135,duration:1.2,ease:gsapWithCSS.parseEase("machinesStep")||(tt=>tt)})}catch{}try{if(me&&me!==ae){try{const sr=Re();Ce(sr),ve&&(ye=Number(gsapWithCSS.getProperty(ve,"y"))||0)}catch{}me.classList.add("is-open"),gsapWithCSS.to(me,{width:de()?"18.1em":"28em",height:de()?"13.2em":"23.313em",duration:1.2,ease:gsapWithCSS.parseEase("machinesStep")||(sr=>sr),onUpdate:()=>{try{const sr=me.getBoundingClientRect().height||0,ir=(me||ae).querySelectorAll(".machines_images-item.is-active");sr>0&&ir&&ir.length&&ir.forEach(mt=>mt.style.height=`${Math.round(sr)}px`)}catch{}}});try{const sr=(me||ae).querySelectorAll(".machines_images-item"),ir=Ft;sr.forEach((mt,tt)=>{tt===ir?mt.classList.add("is-active"):mt.classList.remove("is-active")})}catch{}}}catch{}}},Ye=()=>{const Ft=Oe(),er=Ze(Ft);if(er.length===0)return;const sr=Te||0;try{sr>0&&er.forEach(ir=>{gsapWithCSS.to(ir,{height:`${sr}em`,duration:1.2,ease:gsapWithCSS.parseEase("machinesStep")||(mt=>mt)})})}catch{}try{const ir=ae.querySelector(".machines_button-wrap"),mt=ir?ir.querySelectorAll(".machines_button"):null;mt&&mt.length&&gsapWithCSS.to(mt,{yPercent:0,duration:1.2,ease:gsapWithCSS.parseEase("machinesStep")||(tt=>tt)})}catch{}try{me&&me!==ae&&gsapWithCSS.to(me,{width:de()?"11.8em":"13.5em",height:"11.2em",duration:1.2,ease:gsapWithCSS.parseEase("machinesStep")||(tt=>tt),onComplete:()=>{try{if(ve)gsapWithCSS.set(ve,{y:ye||0});else{const tt=Re();Ce(tt)}requestAnimationFrame(()=>{try{me.classList.remove("is-open"),ze()}catch{}})}catch{}},onUpdate:()=>{try{const tt=me.getBoundingClientRect().height||0,rt=(me||ae).querySelectorAll(".machines_images-item.is-active");tt>0&&rt&&rt.length&&rt.forEach(dt=>dt.style.height=`${Math.round(tt)}px`)}catch{}}});const ir=ae.querySelector(".machines_button-wrap"),mt=ir?ir.querySelector(".machines_button.is-close > .is-plus"):null;mt&&gsapWithCSS.to(mt,{rotate:0,duration:1.2,ease:gsapWithCSS.parseEase("machinesStep")||(tt=>tt)})}catch{}};try{ae.machineOpen=Ue,ae.machineClose=Ye;const Ft=ae.querySelector(".machines_button-wrap");if(Ft){const er=Ft.querySelectorAll(".machines_button");er[0]&&er[0].addEventListener("click",Ue),er[1]&&er[1].addEventListener("click",Ye)}try{ae.querySelectorAll(".machines-list-item").forEach(sr=>{sr.__listOpenAttached||(sr.__listOpenAttached=!0,sr.addEventListener("click",ir=>{try{if(ir&&ir.target&&ir.target.closest&&ir.target.closest(".machines_button"))return;ir.preventDefault(),ir.stopPropagation()}catch{}try{(me&&me.classList?me.classList.contains("is-open"):!1)?Ye():Ue()}catch{Ue()}}))})}catch{}}catch{}let ct=0,at=!1,ft=-1;const pt=window.__lenisWrapper||te.querySelector(".page-wrap")||window;let Mt=[],At=[];const _t=()=>{const Ft=Array.from(ae.querySelectorAll(".machines-list-item")),er=[];let sr=0;const ir=[];for(let mt=0;mt<Ft.length;mt+=1){const tt=Ft[mt],rt=tt.getBoundingClientRect(),dt=window.getComputedStyle(tt),yt=parseFloat(dt.marginTop||"0")||0,wt=parseFloat(dt.marginBottom||"0")||0,It=Math.max(0,rt.height+yt+wt);er.push(It),mt===0?ir.push(0):(sr+=er[mt-1],ir.push(sr))}Mt=er,At=ir,Mt.length>0&&(ct=Mt[0])};_t();const Qe=ScrollTrigger.create({trigger:ae,start:"top 50%",end:()=>{_t();const Ft=At[At.length-1]||0;return`+=${Math.max(1,Math.ceil(Ft))}`},onToggle:Ft=>{if(at=Ft.isActive,at){const er=Ft.scroll()-Ft.start,sr=fr(er);ft=Math.max(0,sr),At.length>0&&gsapWithCSS.set(oe,{y:-Math.round(At[ft]||0)})}else Ke=0},onUpdate:Ft=>{try{const er=Ft.scroll()-Ft.start,sr=At[At.length-1]||0,ir=Math.max(0,Math.min(sr,er));gsapWithCSS.set(oe,{y:-Math.round(ir)}),Ce(ir);const mt=fr(ir);qe(mt)}catch{}},scroller:window.__lenisWrapper||void 0}),it=.1,Ge=.28;let je=!1,Ke=0,lt=null,Bt=null,Xt=0,Gt=0,lr=it,yr=0,Lr=null,Nr=!1;const $r=140,Gr=()=>{try{Lr&&clearTimeout(Lr)}catch{}Lr=setTimeout(()=>{if(!at||je)return;let Ft=0;try{const sr=Number(gsapWithCSS.getProperty(oe,"y"))||0,ir=At[At.length-1]||0;Ft=Math.max(0,Math.min(ir,-sr))}catch{Ft=Qe.scroll()-Qe.start}const er=fr(Ft);lr=Zr(yr,Mt[er]||ct),Jt(er,lr)},$r)},Zr=(Ft,er)=>{const sr=Math.max(24,(er||ct||0)*.8),ir=Math.max(0,Math.min(1,sr?Ft/sr:0)),mt=Ge-(Ge-it)*ir;return Math.max(it,Math.min(Ge,mt))},Dr=()=>Math.max(0,At.length-1),dr=()=>{At.length===0&&_t();const Ft=ae.getBoundingClientRect().height||0,er=Math.max(0,At[At.length-1]||0),sr=Math.max(Ft+er,Ft);sr>0&&(ee.style.height=`${Math.ceil(sr)}px`)},fr=Ft=>{if(At.length===0||Ft<=0)return 0;const er=At.length-1;if(Ft>=At[er])return er;let sr=0,ir=er;for(;sr<=ir;){const yt=sr+ir>>1,wt=At[yt];if(wt===Ft)return yt;wt<Ft?sr=yt+1:ir=yt-1}const mt=Math.max(0,ir),tt=Math.min(er,sr),rt=Math.abs(Ft-At[mt]),dt=Math.abs(Ft-At[tt]);return rt<=dt?mt:tt},qr=()=>{if(ft<0){const Ft=Math.round((Qe.scroll()-Qe.start)/(ct||1));ft=Math.max(0,Math.min(Ft,Dr()))}},li=(Ft,er)=>{At.length===0&&_t();const sr=gsapWithCSS.parseEase("machinesStep")||(tr=>tr),ir=Qe.start,mt=Dr();if(ft<0){const tr=Qe.scroll()-ir,Zt=fr(tr);ft=Math.max(0,Math.min(Zt,mt))}const tt=Math.max(0,Math.min(ft+Ft,mt));if(tt===ft)return;const rt=At[ft]||0,dt=At[tt]||0,yt=ir+dt,wt=Qe.scroll(),It=yt-wt,qt=Math.abs(It)<1;if(typeof Bt=="function"){try{ScrollTrigger.removeEventListener("update",Bt)}catch{}Bt=null}const Dt=()=>{try{const tr=Qe.scroll(),Zt=ir+rt,Ir=ir+dt,Ot=Ir-Zt||1,zr=Math.max(0,Math.min(1,(tr-Zt)/Ot)),Xr=-Math.round(rt+(dt-rt)*zr);if(gsapWithCSS.set(oe,{y:Xr}),Math.abs(tr-Ir)<.5){try{ScrollTrigger.removeEventListener("update",Dt)}catch{}Bt=null}}catch{}};Bt=Dt;const Vt=()=>{je=!1;try{typeof Bt=="function"&&ScrollTrigger.removeEventListener("update",Bt)}catch{}Bt=null,Xt>0&&(Xt-=1,li(Gt,lr))};try{const tr=er||Zr(yr,Mt[ft]||ct);if(window.lenis&&typeof window.lenis.scrollTo=="function"){je=!0,qt?(window.scrollTo(0,yt),ScrollTrigger.update()):window.lenis.scrollTo(yt,{duration:tr,easing:sr,lock:!0}),ScrollTrigger.addEventListener("update",Dt);try{gsapWithCSS.killTweensOf(oe),gsapWithCSS.to(oe,{y:-Math.round(dt),ease:"machinesStep",duration:tr})}catch{}setTimeout(()=>{Vt()},Math.round(tr*1e3+120)),ft=tt}else if(pt&&pt!==window){if(je=!0,ScrollTrigger.addEventListener("update",Dt),qt){pt.scrollTop=yt,ScrollTrigger.update(),Vt();try{gsapWithCSS.set(oe,{y:-Math.round(dt)})}catch{}}else gsapWithCSS.to(pt,{scrollTop:yt,duration:tr,ease:"machinesStep",onComplete:()=>{Vt()}});try{gsapWithCSS.killTweensOf(oe),gsapWithCSS.to(oe,{y:-Math.round(dt),ease:"machinesStep",duration:tr})}catch{}ft=tt}else window.scrollTo(0,yt),ScrollTrigger.update(),gsapWithCSS.set(oe,{y:-Math.round(dt)}),ft=tt}catch{}},Jt=(Ft,er)=>{if(typeof Ft!="number")return;const sr=Dr(),ir=Math.max(0,Math.min(Ft,sr)),mt=Qe.scroll()-Qe.start,tt=fr(mt),rt=ir>tt?1:ir<tt?-1:0,dt=At[ir]||0,yt=er||Zr(yr,Mt[ir]||ct);if(rt===0){try{const wt=Qe.start+dt;window.lenis&&typeof window.lenis.scrollTo=="function"?window.lenis.scrollTo(wt,{duration:yt,easing:gsapWithCSS.parseEase("machinesStep")||(It=>It),lock:!0}):pt&&pt!==window?gsapWithCSS.to(pt,{scrollTop:wt,duration:yt,ease:"machinesStep"}):window.scrollTo(0,wt),gsapWithCSS.killTweensOf(oe),gsapWithCSS.to(oe,{y:-Math.round(dt),duration:yt,ease:"machinesStep"}),ft=ir}catch{}return}Xt=Math.abs(ir-tt)-1,Gt=rt,lr=er||Zr(yr,Mt[tt]||ct),li(rt,lr)},gi=Ft=>{if(!at||typeof Ft.deltaY!="number")return;At.length===0&&_t();const er=Math.sign(Ft.deltaY);if(er!==0){qr();const sr=Dr();if(Math.max(0,Math.min(ft+er,sr))===ft)return}je||(yr=Math.abs(Ft.deltaY),Ke+=Ft.deltaY,yr=Math.abs(Ke),Gr())};let ci=null;const hi=Ft=>{!at||(ci=Ft.changedTouches&&Ft.changedTouches[0]&&Ft.changedTouches[0].clientY||null)},ri=Ft=>{if(!at)return;const er=Ft.changedTouches&&Ft.changedTouches[0]&&Ft.changedTouches[0].clientY||null;if(ci==null||er==null)return;At.length===0&&_t();const sr=Math.sign(ci-er);if(sr!==0){qr();const ir=Dr();if(Math.max(0,Math.min(ft+sr,ir))===ft)return}yr=Math.abs(ci-er)},Ci=Ft=>{if(!at||ci==null)return;const er=Ft.changedTouches&&Ft.changedTouches[0]&&Ft.changedTouches[0].clientY||ci,sr=ci-er;ci=null;const ir=Math.sign(sr);At.length===0&&_t(),qr();const mt=Dr();Math.max(0,Math.min(ft+ir,mt))!==ft&&Gr()},Ei=Ft=>{if(!at)return;const er=Ft.code||Ft.key;let sr=0;if((er==="ArrowDown"||er==="PageDown"||er==="Space")&&(sr=1),(er==="ArrowUp"||er==="PageUp")&&(sr=-1),sr!==0){At.length===0&&_t(),qr();const ir=Dr();if(Math.max(0,Math.min(ft+sr,ir))===ft)return;try{Ft.preventDefault(),Ft.stopPropagation()}catch{}je||li(sr)}};let Mi=null;const wi=()=>{try{Mi&&clearTimeout(Mi)}catch{}Mi=setTimeout(()=>{try{De()}catch{}try{_t(),dr()}catch{}try{Pe=Ee();const Ft=Re();Ce(Ft);try{const er=fr(Ft);qe(er)}catch{}}catch{}try{if(me&&me!==ae){if(me&&me.classList?me.classList.contains("is-open"):!1){gsapWithCSS.set(me,{width:de()?"18.1em":"28em",height:de()?"13.2em":"23.313em"});try{if(ve){const er=gsapWithCSS.getProperty(ve,"y");ye=Number(er)||0}}catch{}}else gsapWithCSS.set(me,{width:de()?"11.8em":"13.5em",height:"11.2em"});try{const er=me.getBoundingClientRect().height||0,sr=(me||ae).querySelectorAll(".machines_images-item");if(er>0&&sr&&sr.length){const ir=fr(Re());sr.forEach((mt,tt)=>{mt.style.height=`${Math.round(er)}px`,tt===ir?mt.classList.add("is-active"):mt.classList.remove("is-active")})}}catch{}}}catch{}try{if(me&&me.classList?me.classList.contains("is-open"):!1){const er=Oe(),sr=Ze(er);if(sr&&sr.length){const ir=sr[0],mt=ir.querySelector(".machine_item"),tt=window.getComputedStyle(ir).fontSize||"16",rt=parseFloat(tt),dt=mt?mt.getBoundingClientRect().height:0,yt=window.getComputedStyle(ir),wt=parseFloat(yt.paddingTop||"0")||0,It=parseFloat(yt.paddingBottom||"0")||0,qt=dt+wt+It,Dt=rt?qt/(rt||16):0,Vt=Dt>0?Dt+1.5:0;Vt>0&&sr.forEach(tr=>{try{gsapWithCSS.set(tr,{height:`${Vt}em`})}catch{try{tr.style.height=`${Vt}em`}catch{}}})}}}catch{}try{Qe.refresh()}catch{try{ScrollTrigger.refresh()}catch{}}},100)};try{const Ft=pt===window?window:pt;Ft.addEventListener("wheel",gi,{passive:!1,capture:!0}),Ft.addEventListener("touchstart",hi,{passive:!0,capture:!0}),Ft.addEventListener("touchmove",ri,{passive:!1,capture:!0}),Ft.addEventListener("touchend",Ci,{passive:!1,capture:!0}),window.addEventListener("keydown",Ei,!0)}catch{}window.addEventListener("resize",wi),setTimeout(()=>{De(),_t(),dr(),Qe.refresh()},0);try{lt=new MutationObserver(()=>{try{De()}catch{}try{_t(),dr()}catch{}try{Qe.refresh()}catch{}}),lt.observe(ae,{childList:!0,subtree:!0})}catch{}return()=>{window.removeEventListener("resize",wi);try{const Ft=pt===window?window:pt;Ft.removeEventListener("wheel",gi,{capture:!0}),Ft.removeEventListener("touchstart",hi,{capture:!0}),Ft.removeEventListener("touchmove",ri,{capture:!0}),Ft.removeEventListener("touchend",Ci,{capture:!0}),window.removeEventListener("keydown",Ei,!0)}catch{}try{oe.style.transform=""}catch{}try{ee.style.height=""}catch{}try{gsapWithCSS.killTweensOf(oe),Qe.kill()}catch{}try{lt&&lt.disconnect()}catch{}}}gsapWithCSS.registerPlugin(CustomEase);try{CustomEase.create("custom","M0,0 C0.6,0 0,1 1,1 ")}catch(te){}function getTestimonialTextElements(te){const ee=Array.from(te.querySelectorAll("[data-animate-lines], .testimonial-text, .quote, .text, p.body-xl")||[]);if(ee.length)return ee;const ne=te.querySelector("p");return ne?[ne]:[te]}function ensureWordSpans(te){if(te.dataset.wordsSplitted==="true")return;const ne=(te.textContent||"").split(/(\s+)/);te.textContent="";const se=document.createDocumentFragment();ne.forEach(ae=>{if(ae.trim().length===0)se.appendChild(document.createTextNode(ae));else{const ue=document.createElement("span");ue.className="testimonial-word",ue.textContent=ae,ue.style.display="inline-block",se.appendChild(ue)}}),te.appendChild(se),te.dataset.wordsSplitted="true"}function splitIntoVisualLines(te){if(te.dataset.linesSplitted==="true")return Array.from(te.querySelectorAll(".testimonial-line-inner"));ensureWordSpans(te);const ee=Array.from(te.querySelectorAll(".testimonial-word"));if(!ee.length)return[];const ne=[];let se=null,ae=[];ee.forEach(de=>{const oe=de.offsetTop;se===null&&(se=oe),oe!==se&&ae.length&&(ne.push(ae),ae=[],se=oe),ae.push(de)}),ae.length&&ne.push(ae);const ue=document.createDocumentFragment();return ne.forEach(de=>{const oe=document.createElement("span");oe.className="testimonial-line",oe.style.display="block",oe.style.overflow="hidden";const me=document.createElement("span");me.className="testimonial-line-inner",me.style.display="inline-block",de.forEach(ve=>{const Ee=ve.nextSibling,Pe=Ee&&Ee.nodeType===Node.TEXT_NODE&&(Ee.textContent||"").trim().length===0;me.appendChild(ve),Pe&&me.appendChild(Ee)}),oe.appendChild(me),ue.appendChild(oe)}),te.textContent="",te.appendChild(ue),te.dataset.linesSplitted="true",Array.from(te.querySelectorAll(".testimonial-line-inner"))}function animateElementsLinesStaggered(te){const ee=[];te.forEach(ne=>{const se=splitIntoVisualLines(ne);se&&se.length&&ee.push(...se)}),ee.length&&(gsapWithCSS.killTweensOf(ee),gsapWithCSS.set(ee,{yPercent:100}),gsapWithCSS.to(ee,{yPercent:0,duration:.6,ease:"custom",stagger:.05,overwrite:"auto"}))}function initTestimonials(te=document){const ee=Array.from(te.querySelectorAll(".testimonials")||[]);!ee.length||ee.forEach(ne=>{const se=ne.querySelectorAll(".toggle-option"),ae=ne.querySelector(".toggle-indicator");if(!se.length||!ae)return;let ue=Array.from(ne.querySelectorAll(".testimonial")||[]);if(ue.length<2){const Ce=Array.from(ne.querySelectorAll(":scope > .w-layout-vflex")).filter(De=>{var Ie;return De!==((Ie=se[0])==null?void 0:Ie.closest(".toggle"))});Ce.length>=2&&(ue=Ce)}const de=ne.querySelectorAll(".toggle-id"),oe=Ce=>{ue.length>=2&&ue.forEach((De,Ie)=>{gsapWithCSS.set(De,{opacity:Ie===Ce?1:0})})};let me=0;const ve=(Ce,De=!0)=>{var Ie;if(Ce!==me){if(De&&gsapWithCSS.to(ae,{duration:.6,xPercent:Ce*110,ease:"custom",overwrite:"auto"}),se.forEach(ze=>ze.classList.remove("active")),(Ie=se[Ce])==null||Ie.classList.add("active"),de.forEach((ze,Re)=>{Re===Ce?ze.classList.add("is-active"):ze.classList.remove("is-active")}),ue.length>=2){const ze=ue[me],Re=ue[Ce];if(ze&&Re&&ze!==Re){ze.classList.remove("is-active"),Re.classList.add("is-active");const Oe=getTestimonialTextElements(Re);animateElementsLinesStaggered(Oe),gsapWithCSS.to(ze,{duration:.6,opacity:0,ease:"custom",overwrite:"auto"}),gsapWithCSS.to(Re,{duration:.6,opacity:1,ease:"custom",overwrite:"auto"})}}me=Ce}};let Ee=0;de.forEach((Ce,De)=>{Ce.classList.contains("is-active")&&(Ee=De)}),me=Ee,oe(Ee),gsapWithCSS.set(ae,{xPercent:Ee*110});let Pe=null;const ye=()=>{Pe||se.length<2||(Pe=window.setInterval(()=>{const Ce=(me+1)%se.length;ve(Ce)},5e3))},Te=()=>{Pe&&(clearInterval(Pe),Pe=null)};new IntersectionObserver(Ce=>{Ce.forEach(De=>{De.target===ne&&(De.isIntersecting?ye():Te())})},{threshold:.25}).observe(ne),se.forEach((Ce,De)=>{Ce.addEventListener("mouseenter",()=>{var Ie;gsapWithCSS.to(ae,{duration:.6,xPercent:De*110,ease:"custom",overwrite:"auto"}),de.forEach(ze=>ze.classList.remove("is-active")),(Ie=de[De])==null||Ie.classList.add("is-active")}),Ce.addEventListener("click",()=>{Te(),ve(De,!1),ye()})}),ne.addEventListener("mouseleave",()=>{gsapWithCSS.to(ae,{duration:.6,xPercent:me*110,ease:"custom",overwrite:"auto"}),de.forEach((Ce,De)=>{De===me?Ce.classList.add("is-active"):Ce.classList.remove("is-active")})})})}gsapWithCSS.registerPlugin(ScrollTrigger,CustomEase);const easeCurve$3="M0,0 C0.6,0 0,1 1,1 ";function initTextDisplayReveal(te=document){const ee=Array.from(te.querySelectorAll(".title-big"));!ee.length||ee.forEach(ne=>{const se=ne.closest(".display-text")||ne,ae=Array.from(ne.querySelectorAll(".overlay-gradients .overlay-gradient"));if(!ae.length)return;gsapWithCSS.set(ae,{width:"0%"});const ue=se&&se.querySelector?se.querySelector(".eyebrow-wrapper-a > .eyebrow-m"):null;let de=[];ue&&!ue.dataset.splitted?(splitIntoWordSpans(ue),ue.dataset.splitted="true",de=Array.from(ue.querySelectorAll(".eyebrow-word"))):ue&&(de=Array.from(ue.querySelectorAll(".eyebrow-word"))),de.length&&gsapWithCSS.set(de,{display:"inline-block",yPercent:100,rotation:70,transformOrigin:"left bottom"});const me=typeof window!="undefined"&&typeof window.matchMedia=="function"&&window.matchMedia("(max-width: 478px)").matches?"130%":"100%",ve=gsapWithCSS.timeline({paused:!0,defaults:{duration:2,ease:CustomEase.create("custom",easeCurve$3)}});ve.to(ae,{width:me,stagger:.025},0),de.length&&ve.to(de,{duration:1.2,yPercent:0,rotation:0,stagger:.02},0);const Ee=ne.querySelector(".display")||ne,Pe=ScrollTrigger.create({trigger:Ee,start:"top 80%",onEnter:()=>ve.play(0),toggleActions:"play none none none"});ve.eventCallback("onComplete",()=>{try{Pe&&typeof Pe.kill=="function"&&Pe.kill()}catch{}})})}function splitIntoWordSpans(te){const ne=(te.textContent||"").split(/(\s+)/);te.textContent="",ne.forEach(se=>{if(se.trim().length===0)te.appendChild(document.createTextNode(se));else{const ae=document.createElement("span");ae.className="eyebrow-word",ae.textContent=se,te.appendChild(ae)}})}gsapWithCSS.registerPlugin(ScrollTrigger);let __textRevealResizeAttached=!1,__textRevealResizeTimeout=null;function attachTextRevealResizeHandler(){if(typeof window=="undefined"||__textRevealResizeAttached)return;const te=()=>{__textRevealResizeTimeout&&clearTimeout(__textRevealResizeTimeout),__textRevealResizeTimeout=setTimeout(()=>{try{destroyTextReveal(document)}catch{}try{initTextReveal(document)}catch{}},200)};try{window.addEventListener("resize",te),window.addEventListener("orientationchange",te),window.__textRevealOnResize=te}catch{}__textRevealResizeAttached=!0}function createLetterRevealTimeline(te){const ee=new SplitType(te,{types:"lines,words,chars",tagName:"span"}),ne=ee.chars||[],se=ee.words||[],ae=ee.lines||[];if(!ne.length)return null;gsapWithCSS.set(se,{display:"inline-block",whiteSpace:"nowrap"}),gsapWithCSS.set(ne,{opacity:.2,display:"inline-block",willChange:"opacity"});const ue=window.__lenisWrapper||void 0,de=[];return ae.forEach(oe=>{try{const me=ne.filter(Ee=>oe.contains(Ee));if(!me.length)return;const ve=gsapWithCSS.to(me,{opacity:1,stagger:{each:.02,from:"start"},ease:"none",scrollTrigger:{trigger:oe,start:"top 85%",end:"top 50%",scrub:!0,scroller:ue}});de.push(ve)}catch{}}),te.__textRevealSplit=ee,te.__textRevealLineTweens=de,de}function initTextReveal(te=document){try{const se=te&&te.querySelectorAll?te:document,ae=[".section_process .process-infos h3",".section_process .process-desc p"].join(", ");se.querySelectorAll(ae).forEach(de=>{try{de.hasAttribute("tr")||de.setAttribute("tr","1")}catch{}});try{const de=".section_process .process-infos .process_index .eyebrow-m, .section_process .process-infos .process_index .eyebrow-s";se.querySelectorAll(de).forEach(me=>{try{me.hasAttribute("tr")&&me.removeAttribute("tr")}catch{}try{const ve=me.__textRevealLineTweens;ve&&Array.isArray(ve)&&(ve.forEach(Ee=>{try{Ee&&Ee.scrollTrigger&&Ee.scrollTrigger.kill(),Ee&&typeof Ee.kill=="function"&&Ee.kill()}catch{}}),me.__textRevealLineTweens=null)}catch{}try{const ve=me.__textRevealSplit;ve&&typeof ve.revert=="function"&&(ve.revert(),me.__textRevealSplit=null)}catch{}})}catch{}}catch{}const ee=te.querySelectorAll('[tr="1"]');if(!ee.length)return null;attachTextRevealResizeHandler();const ne=[];ee.forEach(se=>{const ae=createLetterRevealTimeline(se);ae&&ne.push(ae)});try{const se=te&&te.querySelectorAll?te:document,ae=[".section_process .process-infos h3",".section_process .process-desc p"].join(", "),ue=Array.from(se.querySelectorAll(ae)),de=window.__lenisWrapper||void 0;ue.forEach(oe=>{try{const me=oe.__textRevealLineTweens;if(me&&Array.isArray(me))return;gsapWithCSS.set(oe,{opacity:.2});const ve=ScrollTrigger.create({trigger:oe,start:"top 85%",end:"top 50%",scrub:!0,scroller:de,onUpdate(Ee){const Pe=Ee.progress;oe.style.opacity=String(.2+.8*Pe)}});oe.__processInFadeST=ve}catch{}})}catch{}try{const se=te&&te.querySelectorAll?te:document,ae=window.__lenisWrapper||void 0,ue=[".section_process .process-infos h3",".section_process .process-desc p"].join(", ");se.querySelectorAll(ue).forEach(oe=>{try{gsapWithCSS.set(oe,{opacity:1});const me=ScrollTrigger.create({trigger:oe,start:"top 12em",end:"top -12em",scroller:ae,onUpdate(ve){const Ee=ve.progress,Pe=1-.8*Ee;oe.style.opacity=String(Pe)},onLeave(){oe.style.opacity="0.2"}});try{oe.__processFadeST=me}catch{}}catch{}})}catch{}try{const se=te&&te.querySelectorAll?te:document,ae=window.__lenisWrapper||void 0;Array.from(se.querySelectorAll(".section_process .process")).forEach(de=>{try{const oe=de.querySelector(".process_inner"),me=".process_index .eyebrow-m, .process_index .eyebrow-s",ve=Array.from(de.querySelectorAll(me));if(ve.forEach(ze=>{try{ze.style.transition="color 0.5s ease, background-color 0.5s ease, border-color 0.5s ease, opacity 0.3s ease"}catch{}}),oe&&!oe.__processBorderTransitionSet)try{oe.style.transition="border-bottom-color 0.5s ease, border-bottom 0.5s ease",oe.__processBorderTransitionSet=!0}catch{}const Ee=de.querySelector(".process-desc p")||de.querySelector(".process-infos h3")||ve[0]||de,Pe=ze=>{try{if(!ze)return[0,0,0];const Re=String(ze).match(/rgba?\((\d+)\s*,\s*(\d+)\s*,\s*(\d+)/i);if(Re)return[parseInt(Re[1],10),parseInt(Re[2],10),parseInt(Re[3],10)]}catch{}return[0,0,0]},ye=(ze=1)=>{if(!!oe)try{const Re=Math.max(0,Math.min(1,ze));let Oe=[0,0,0];try{const Ze=getComputedStyle(Ee);Oe=Pe(Ze&&Ze.color)}catch{}const qe=`rgba(${Oe[0]}, ${Oe[1]}, ${Oe[2]}, ${Re})`;oe.style.borderBottomColor=qe,oe.style.borderBottom=`1px solid ${qe}`}catch{}};ye(.2);const Te=ScrollTrigger.create({trigger:de,start:"top 100%",end:"bottom 0%",scroller:ae,onEnter(){},onEnterBack(){},onLeave(){},onLeaveBack(){}}),Ae=[];ve.forEach(ze=>{try{gsapWithCSS.set(ze,{opacity:.2});const Re=ScrollTrigger.create({trigger:ze,start:"top 85%",end:"top 50%",scroller:ae,scrub:!0,onUpdate(Oe){const qe=Oe.progress,Ze=.2+.8*qe;ze.style.opacity=String(Ze)}});Ae.push(Re)}catch{}});const Ce=Ee||oe||de,De=ScrollTrigger.create({trigger:Ce,start:"top 90%",end:"top 55%",scroller:ae,scrub:!0,onUpdate(ze){const Re=ze.progress;ye(.2+.8*Re)}}),Ie=ScrollTrigger.create({trigger:de,start:"top 12.75em",end:"top -12.75em",scroller:ae,onUpdate(ze){if(!oe)return;const Re=ze.progress,Oe=1-.8*Re;ve.forEach(qe=>qe.style.opacity=String(Oe)),ye(Oe)},onLeave(){ve.forEach(ze=>ze.style.opacity="0.2"),ye(.2)}});try{de.__processEnterST=Te,de.__processTopST=Ie,de.__processEyInST=Ae,de.__processBorderInST=De}catch{}}catch{}})}catch{}return ScrollTrigger.refresh(),ne}function destroyTextReveal(te=document){te.querySelectorAll('[tr="1"]').forEach(ne=>{try{ne.__textRevealTimeline&&(ne.__textRevealTimeline.scrollTrigger&&ne.__textRevealTimeline.scrollTrigger.kill(),ne.__textRevealTimeline.kill(),ne.__textRevealTimeline=null)}catch{}try{ne.__textRevealLineTweens&&Array.isArray(ne.__textRevealLineTweens)&&(ne.__textRevealLineTweens.forEach(se=>{try{se&&se.scrollTrigger&&se.scrollTrigger.kill(),se&&typeof se.kill=="function"&&se.kill()}catch{}}),ne.__textRevealLineTweens=null)}catch{}try{ne.__textRevealSplit&&typeof ne.__textRevealSplit.revert=="function"&&(ne.__textRevealSplit.revert(),ne.__textRevealSplit=null)}catch{}});try{const ne=te&&te.querySelectorAll?te:document;Array.from(ne.querySelectorAll(".section_process .process")).forEach(ae=>{try{ae.__processEnterST&&(ae.__processEnterST.kill(),ae.__processEnterST=null)}catch{}try{ae.__processTopST&&(ae.__processTopST.kill(),ae.__processTopST=null)}catch{}try{ae.__processBorderInST&&(ae.__processBorderInST.kill(),ae.__processBorderInST=null)}catch{}try{ae.__processEyInST&&Array.isArray(ae.__processEyInST)&&(ae.__processEyInST.forEach(ue=>{try{ue&&typeof ue.kill=="function"&&ue.kill()}catch{}}),ae.__processEyInST=null)}catch{}try{const ue=".process_index .eyebrow-m, .process_index .eyebrow-s";ae.querySelectorAll(ue).forEach(me=>{me.style.opacity=""});const oe=ae.querySelector(".process_inner");oe&&(oe.style.borderBottomColor="")}catch{}})}catch{}try{const ne=te&&te.querySelectorAll?te:document,se=[".section_process .process-infos h3",".section_process .process-desc p"].join(", ");Array.from(ne.querySelectorAll(se)).forEach(ue=>{try{const de=ue.__processInFadeST;de&&typeof de.kill=="function"&&de.kill(),ue.__processInFadeST=null}catch{}})}catch{}ScrollTrigger.refresh()}gsapWithCSS.registerPlugin(CustomEase);let baseTopPx=0;const easeCurve$2="M0,0 C0.51,0 0,1 1,1";function setMaskOverlayActive(te){try{let ee=document.querySelector(".mask-overlay"),ne=null;if(ee||(ne=createViewportClipOverlay({repeat:0,yoyo:!1}),ee=ne&&ne.container),!ee)return;try{const se=ne&&ne.tl||ee&&ee.__overlay&&ee.__overlay.tl||window.__maskOverlay&&window.__maskOverlay.tl||null;window.__maskOverlay={container:ee,tl:se}}catch{}if(te)try{ee.classList.add("is-active")}catch{ee.className+=" is-active"}else try{ee.classList.remove("is-active")}catch{ee.className=ee.className.replace(/\bis-active\b/,"")}}catch{}}if(!window.__ptInnerClickListenerAttached){window.__ptInnerClickListenerAttached=!0;const te=ee=>{try{const ne=ee.target;if(ne&&typeof ne.closest=="function"&&ne.closest(".pt-inner")){window.__clickedPtInner=!0;try{resetOverlayClipBaseState()}catch{}setMaskOverlayActive(!0);try{const ae=document.querySelector(".mask-overlay");ae&&(ae.style.left="0px");try{const ue=ae.querySelector(".mask-overlay_page-info");ue&&(ue.style.display="flex")}catch{}}catch{}}}catch{}};document.addEventListener("pointerdown",te,!0),document.addEventListener("mousedown",te,!0),document.addEventListener("touchstart",te,{capture:!0,passive:!0}),document.addEventListener("click",te,!0)}function formatNamespaceName(te){try{return(te||"home").replace(/[-_]+/g," ").replace(/\b\w/g,ee=>ee.toUpperCase())}catch{return te||"Home"}}function slideScaleLeave$1({current:te}){const ee=te.container.querySelector(".page-wrap")||te.container,ne=ee.getBoundingClientRect();Math.max(0,Math.round(ne.top));const se=document.querySelector(".page-info");baseTopPx=se?Math.max(0,Math.round(se.getBoundingClientRect().height)):0;try{const Te=document.querySelector("#page-from");if(Te){const Ae=te.container.getAttribute("data-barba-namespace")||"";Te.textContent=formatNamespaceName(Ae)}}catch{}if(window.lenis&&typeof window.lenis.stop=="function")try{window.lenis.stop()}catch{}gsapWithCSS.set(te.container,{position:"absolute",top:0,left:0,right:0,zIndex:3,y:0});const ae=window.innerWidth,ue=typeof window!="undefined"&&window.matchMedia&&window.matchMedia("(max-width: 991px)").matches;function de(){try{const Te=window.getComputedStyle&&window.getComputedStyle(document.documentElement),Ae=parseFloat(Te&&Te.fontSize||"16");return Number.isFinite(Ae)?Ae:16}catch{return 16}}function oe(Te){try{const Ce=document.body||document.documentElement,De=window.getComputedStyle&&window.getComputedStyle(Ce),Ie=De&&De.getPropertyValue("--_spacings---site-margin")||"",ze=String(Ie||"").trim();if(ze){if(ze.endsWith("px")){const Re=parseFloat(ze);if(Number.isFinite(Re))return Re}if(ze.endsWith("em")){const Re=parseFloat(ze),Oe=parseFloat(De&&De.fontSize||String(Te||16)),qe=Number.isFinite(Oe)?Oe:16;if(Number.isFinite(Re))return Re*qe}}}catch{}const Ae=Number.isFinite(Te)?Te:16;return(ue?1:2)*Ae}const me=de(),ve=oe(me);try{window.__ptSideMarginPx=ve}catch{}gsapWithCSS.set(ee,{transformOrigin:"50% 0%"});const Ee=gsapWithCSS.timeline(),Pe=.75,ye=1;try{Ee.set(document.body,{backgroundColor:"var(--accent)"},0)}catch{}return Ee.call(()=>{try{try{document.documentElement.setAttribute("data-menu-open","true")}catch{}window.__theme&&typeof window.__theme.menuOpen=="function"&&window.__theme.menuOpen()}catch{}},[],0),Ee.to(ee,{top:baseTopPx,scale:Math.max(0,ae-ve*2)>0?(ae-ve*2)/ae:1,borderRadius:"1rem",duration:Pe,ease:gsapWithCSS.parseEase(`custom(${easeCurve$2})`),overwrite:"auto"},0),Ee.addLabel("leave-slide",Pe),Ee.call(()=>{try{window.dispatchEvent(new CustomEvent("pt-leave-slide-start"))}catch{}},[],"leave-slide"),Ee.to(ee,{x:function(){const Te=1*(Number.isFinite(me)?me:16);return-Math.max(0,ae-Te)}(),duration:ye,ease:gsapWithCSS.parseEase(`custom(${easeCurve$2})`)},"leave-slide"),Ee.to(".page-info_inner",{y:0,duration:Pe,ease:gsapWithCSS.parseEase(`custom(${easeCurve$2})`),overwrite:"auto"},0),Ee.to(".page-info_inner",{y:"-7.5em",duration:ye,ease:gsapWithCSS.parseEase(`custom(${easeCurve$2})`),overwrite:"auto"},Pe),Ee}function slideScaleEnter$1({next:te}){const ee=te.container.querySelector(".page-wrap")||te.container;try{initContact(te&&te.container)}catch{}try{const Ae=document.querySelector("#page-to");if(Ae){const Ce=te.container.getAttribute("data-barba-namespace")||"";Ae.textContent=formatNamespaceName(Ce)}}catch{}gsapWithCSS.set(te.container,{opacity:1,visibility:"visible",position:"absolute",inset:0,zIndex:1,top:0,y:0});const ne=gsapWithCSS.timeline(),se=1,ae=1,ue=.75,de=se,oe=ue+de;ne.addLabel("lift",ue),ne.addLabel("descale",oe),ne.call(()=>{try{const Ae=document.querySelector(".menu-icon"),Ce=document.querySelectorAll(".menu-icon_bar");Ae&&gsapWithCSS.set(Ae,{borderColor:"var(--primary)",overwrite:"auto"}),Ce&&Ce.length&&gsapWithCSS.set(Ce,{backgroundColor:"var(--primary)",overwrite:"auto"})}catch{}},[],0),ne.call(()=>{try{const Ae=ee;if(Ae){let Ce=0;const De=20,Ie=()=>{try{const ze=Ae.getBoundingClientRect();if(!(ze&&ze.width>1&&ze.height>1)&&Ce<De)return Ce+=1,window.requestAnimationFrame(Ie);if(createClipForHost(Ae,{repeat:0,yoyo:!1})){resetHostClipBaseState(Ae,baseTopPx);try{const qe=Ae.getBoundingClientRect();let Ze=0;qe&&Number.isFinite(qe.width)&&qe.width>0?Ze=qe.width:typeof window!="undefined"&&Number.isFinite(window.innerWidth)&&window.innerWidth>0&&(Ze=window.innerWidth);const Ue=Ze>1?Ze:1;window.__ptDestW=Ue}catch{}}}catch{}};window.requestAnimationFrame(Ie)}}catch{}},[],0),gsapWithCSS.set(ee,{transformOrigin:"50% 0%"});const me={x:1};let ve=0;ne.call(()=>{try{const Ae=ee;if(!Ae)return;let Ce=Ae.__clip;if(Ce||(Ce=createClipForHost(Ae,{repeat:0,yoyo:!1})),Ce&&Ce.animState){resetHostClipBaseState(Ae,baseTopPx);try{ve=Ce.animState.x||0}catch{ve=0}Ce.animState.x=1}}catch{}},[],"lift"),ne.to(me,{x:()=>ve,duration:ae,ease:gsapWithCSS.parseEase(`custom(${easeCurve$2})`),onUpdate:()=>{try{const Ae=ee,Ce=Ae&&Ae.__clip;if(Ce&&Ce.animState&&Ce.clipPathRect&&Ce.buildInsidePath){Ce.animState.x=me.x;const De=1-Ce.animState.h;Ce.clipPathRect.setAttribute("d",Ce.buildInsidePath(Ce.animState.x,De,Ce.animState.w,Ce.animState.h,Ce.animState.rX,Ce.animState.rY))}}catch{}}},"lift"),ne.call(()=>{try{const Ae=ee;if(Ae){let Ce=Ae.__clip;if(Ce||(Ce=createClipForHost(Ae,{repeat:0,yoyo:!1})),Ce&&Ce.tl){resetHostClipBaseState(Ae,baseTopPx),Ce.tl.pause(0);try{const De=Ae.querySelector(".background-inner")||document.querySelector(".background-inner");De&&(gsapWithCSS.set(De,{transformOrigin:"50% 50%",scale:1}),ne.to(De,{scale:1.2,transformOrigin:"50% 50%",duration:1.2,ease:gsapWithCSS.parseEase(`custom(${easeCurve$2})`),overwrite:"auto"},"descale"))}catch{}try{Ce.tl.eventCallback("onComplete",()=>{try{try{const De=document.querySelector(".page-info");De&&(De.style.display="none")}catch{}gsapWithCSS.set("#page-to",{y:0}),gsapWithCSS.set(".page-info_inner",{y:"7.5em"});try{gsapWithCSS.set(document.body,{backgroundColor:"var(--primary)"})}catch{}}catch{}})}catch{}Ce.tl.play(0)}}}catch{}},[],"descale"),addMenuLinksCloseToTimeline(ne,"lift"),ne.call(()=>{try{heroAnimation(te&&te.container,{duration:1.2,ease:gsapWithCSS.parseEase(`custom(${easeCurve$2})`)}),initContactHero(te&&te.container,{animate:!0,duration:1.2,ease:gsapWithCSS.parseEase(`custom(${easeCurve$2})`)})}catch{}},[],"descale"),ne.call(()=>{try{try{document.documentElement.setAttribute("data-menu-open","false")}catch{}try{window.__theme&&typeof window.__theme.setIconThemeSuppressed=="function"&&window.__theme.setIconThemeSuppressed(!1)}catch{}window.__theme&&typeof window.__theme.setDestination=="function"&&window.__theme.setDestination(te&&te.container),window.__theme&&typeof window.__theme.applyDestination=="function"&&window.__theme.applyDestination(!1)}catch{}},[],"descale");const Ee=document.querySelector(".menu-icon"),Pe=document.querySelector(".menu-icon_bar.is-1, .menu-icon_bar .is-1"),ye=document.querySelector(".menu-icon_bar.is-2, .menu-icon_bar .is-2");Ee&&ne.to(Ee,{gap:"5px",rotation:0,duration:de,ease:gsapWithCSS.parseEase(`custom(${easeCurve$2})`)},"lift"),Pe&&ne.to(Pe,{backgroundColor:"var(--primary)",rotation:0,yPercent:0,top:"42%",duration:de,ease:gsapWithCSS.parseEase(`custom(${easeCurve$2})`)},"lift"),ye&&ne.to(ye,{backgroundColor:"var(--primary)",rotation:0,yPercent:0,bottom:"42%",duration:de,ease:gsapWithCSS.parseEase(`custom(${easeCurve$2})`)},"lift");const Te="-7.5em";return ne.to(".page-info_inner",{y:Te,duration:ae,ease:gsapWithCSS.parseEase(`custom(${easeCurve$2})`)},"lift"),ne.to("#page-to",{y:"7.5em",duration:1.2,ease:gsapWithCSS.parseEase(`custom(${easeCurve$2})`)},"descale"),ne.call(()=>{try{gsapWithCSS.set(te.container,{clearProps:"position,top,left,right,zIndex,visibility,opacity,y"})}catch{}},[],ue+ae),ne}gsapWithCSS.registerPlugin(CustomEase);const easeCurve$1="M0,0 C0.6,0 0,1 1,1 ";function scrollToSectionNext(te){try{const ee=te&&te.querySelector?te:document,ne=ee.querySelector&&ee.querySelector(".section_next")||document.querySelector(".section_next"),se=.5;if(!ne)return gsapWithCSS.to({},{duration:0});const ae=()=>{try{const de=window.__lenisWrapper||ee.querySelector&&ee.querySelector(".page-wrap")||document.scrollingElement||window;let oe=0;const me=()=>{try{const ve=ne.getBoundingClientRect(),Ee=Math.round(ve.top);if(Ee===0||oe>5)return;if(window.lenis&&typeof window.lenis.scrollTo=="function"){const Pe=typeof window.lenis.scroll=="number"?window.lenis.scroll:de&&de.scrollTop||0;window.lenis.scrollTo(Pe+Ee,{immediate:!0})}else de&&de!==window?de.scrollTop=(de.scrollTop||0)+Ee:window.scrollTo(0,(window.pageYOffset||0)+Ee);oe+=1,requestAnimationFrame(me)}catch{}};requestAnimationFrame(me)}catch{}};if(window.lenis&&typeof window.lenis.scrollTo=="function")return gsapWithCSS.to({},{duration:se,ease:gsapWithCSS.parseEase(`custom(${easeCurve$1})`),onStart:()=>{try{window.lenis.scrollTo(ne,{duration:se,force:!0})}catch{}},onComplete:()=>{ae()}});const ue=ee.querySelector&&ee.querySelector(".page-wrap")||document.scrollingElement||window;if(ue===window)return gsapWithCSS.to({},{duration:se,ease:gsapWithCSS.parseEase(`custom(${easeCurve$1})`),onStart:()=>{try{ne.scrollIntoView({behavior:"smooth",block:"start"})}catch{try{ne.scrollIntoView({block:"start"})}catch{}}},onComplete:()=>{ae()}});if(typeof ue.scrollTo=="function"){const de=ne.getBoundingClientRect(),me=(ee.querySelector&&ee.querySelector(".content-wrap")||ue).getBoundingClientRect(),ve=de.top-me.top+(ue.scrollTop||0);return gsapWithCSS.to(ue,{scrollTop:ve,duration:se,ease:gsapWithCSS.parseEase(`custom(${easeCurve$1})`),onComplete:()=>ae()})}return gsapWithCSS.to({},{duration:se,ease:gsapWithCSS.parseEase(`custom(${easeCurve$1})`),onStart:()=>{try{ne.scrollIntoView({block:"start"})}catch{}},onComplete:()=>ae()})}catch{return gsapWithCSS.to({},{duration:0})}}function nextLeave({current:te,trigger:ee,next:ne}){const se=gsapWithCSS.timeline({defaults:{ease:gsapWithCSS.parseEase(`custom(${easeCurve$1})`)}}),ae=ee&&ee.closest?ee.closest("[pt-next]"):null;if(ae)try{ae.classList.add("is-hover-lock"),ae.style.pointerEvents="none"}catch{}return te&&te.container&&gsapWithCSS.set(te.container,{position:"absolute",inset:0,zIndex:1}),se.add(gsapWithCSS.to({},{duration:.001}),0),se.add(scrollToSectionNext(te&&te.container),"+=0"),se.call(()=>{if(ne&&ne.container){gsapWithCSS.set(ne.container,{opacity:1,visibility:"visible",position:"absolute",inset:0,zIndex:0});try{initContact(ne&&ne.container)}catch{}try{const ue=ne.container.querySelector&&ne.container.querySelector(".background-inner")||null;ue&&gsapWithCSS.set(ue,{transformOrigin:"50% 50%",scale:1.2})}catch{}}},[],">"),se.addLabel("sync"),ae&&(gsapWithCSS.set(ae,{overflow:"hidden"}),se.to(ae,{height:0,paddingTop:0,paddingBottom:0,marginTop:"0.5rem",marginBottom:"0.5rem",duration:1.4,ease:gsapWithCSS.parseEase(`custom(${easeCurve$1})`)},"sync")),te&&te.container&&(se.to(te.container,{opacity:0,duration:1.4,ease:gsapWithCSS.parseEase(`custom(${easeCurve$1})`)},"sync"),se.set(te.container,{visibility:"hidden",pointerEvents:"none"},"sync+=1.4")),ne&&ne.container&&(se.call(()=>{try{heroAnimation(ne&&ne.container,{duration:1.4,ease:gsapWithCSS.parseEase(`custom(${easeCurve$1})`)}),initContactHero(ne&&ne.container,{animate:!0,duration:1.4,ease:gsapWithCSS.parseEase(`custom(${easeCurve$1})`)})}catch{}},[],"sync"),se.set(ne.container,{clearProps:"position,top,left,right,bottom,inset,zIndex,visibility,opacity,pointerEvents"},"sync+=1.41"),se.call(()=>{try{window.ScrollTrigger&&typeof window.ScrollTrigger.refresh=="function"&&window.ScrollTrigger.refresh()}catch{}},[],"sync+=1.42")),se.call(()=>{if(ae)try{ae.classList.remove("is-hover-lock"),ae.style.pointerEvents=""}catch{}}),se}function nextEnter({next:te}){const ee=gsapWithCSS.timeline({defaults:{ease:gsapWithCSS.parseEase(`custom(${easeCurve$1})`)}});return te&&te.container&&ee.to(te.container,{duration:.01,onComplete:()=>{gsapWithCSS.set(te.container,{clearProps:"position,top,left,right,bottom,inset,zIndex,visibility,opacity"})}}),ee}function getNavbarBaseOffset(){try{return typeof window!="undefined"&&typeof window.matchMedia=="function"&&window.matchMedia("(max-width: 991px)").matches?"1em":"2em"}catch{return"2em"}}gsapWithCSS.registerPlugin(CustomEase);let lastTopOffsetPx=0;const easeCurve="M0,0 C0.6,0 0,1 1,1 ";function getDestinationTheme(){try{const te=window.__theme;if(!te||typeof te.getThemeFor!="function")return null;const ee=te&&te.destinationKey?te.destinationKey:"white";return te.getThemeFor(ee)||null}catch{return null}}function slideScaleLeave({current:te}){const ee=te.container.querySelector(".page-wrap")||te.container,ne=ee.getBoundingClientRect();if(lastTopOffsetPx=Math.max(0,Math.round(ne.top)),window.lenis&&typeof window.lenis.stop=="function")try{window.lenis.stop()}catch{}return gsapWithCSS.set(te.container,{position:"absolute",top:0,left:0,right:0,zIndex:1,y:lastTopOffsetPx}),gsapWithCSS.to(ee,{xPercent:-100,duration:1.2,ease:gsapWithCSS.parseEase(`custom(${easeCurve})`)})}function slideScaleEnter({next:te}){const ee=te.container.querySelector(".page-wrap")||te.container;try{initContact(te&&te.container)}catch{}gsapWithCSS.set(te.container,{opacity:1,visibility:"visible",position:"absolute",inset:0,zIndex:2,y:lastTopOffsetPx});const ne=window.innerWidth,ae=typeof window!="undefined"&&typeof window.matchMedia=="function"&&window.matchMedia("(max-width: 991px)").matches?32:64,ue=Math.max(0,ne-ae),de=ue>0?ue/ne:1;gsapWithCSS.set(ee,{transformOrigin:"50% 0%"}),gsapWithCSS.set(ee,{scale:de,xPercent:100,borderRadius:"1rem"});const oe=gsapWithCSS.timeline();oe.to(ee,{xPercent:0,duration:1.2,ease:gsapWithCSS.parseEase(`custom(${easeCurve})`)}),oe.addLabel("lift");let me=document.querySelector(".navbar");!me&&te&&te.container&&te.container.querySelector&&(me=te.container.querySelector(".navbar")),me&&oe.to(me,{left:getNavbarBaseOffset(),right:getNavbarBaseOffset(),pointerEvents:"auto",duration:1.2,ease:gsapWithCSS.parseEase(`custom(${easeCurve})`),overwrite:"auto"},"lift");try{const ye=ee.querySelector(".background-inner")||document.querySelector(".background-inner");if(ye){gsapWithCSS.set(ye,{transformOrigin:"50% 50%"});const Ae=1.2;oe.to(ye,{scale:Ae,transformOrigin:"50% 50%",duration:1.2,ease:gsapWithCSS.parseEase(`custom(${easeCurve})`),overwrite:"auto"},"lift")}}catch{}addMenuLinksCloseToTimeline(oe,"lift"),oe.call(()=>{try{heroAnimation(te&&te.container,{duration:1.2,ease:gsapWithCSS.parseEase(`custom(${easeCurve})`)}),initContactHero(te&&te.container,{animate:!0,duration:1.2,ease:gsapWithCSS.parseEase(`custom(${easeCurve})`)})}catch{}},[],"lift");try{const ye=ee.querySelector(".background-inner")||document.querySelector(".background-inner");ye&&(gsapWithCSS.set(ye,{transformOrigin:"50% 50%",scale:1}),oe.to(ye,{scale:1.2,transformOrigin:"50% 50%",duration:1.2,ease:gsapWithCSS.parseEase(`custom(${easeCurve})`),overwrite:"auto"},"lift"))}catch{}oe.call(()=>{try{window.__theme&&typeof window.__theme.setDestination=="function"&&window.__theme.setDestination(te&&te.container),window.__theme&&typeof window.__theme.applyDestination=="function"&&window.__theme.applyDestination(!1);try{const ye=getDestinationTheme(),Te=document.querySelector(".menu-icon"),Ae=document.querySelectorAll(".menu-icon_bar");ye&&Te&&gsapWithCSS.set(Te,{backgroundColor:ye.menuIconBg,borderColor:ye.menuIconBorder,overwrite:"auto"}),ye&&Ae&&Ae.length&&gsapWithCSS.set(Ae,{backgroundColor:ye.menuIconBarsBg,overwrite:"auto"})}catch{}}catch{}},[],"lift");const ve=document.querySelector(".menu-icon"),Ee=document.querySelector(".menu-icon_bar.is-1, .menu-icon_bar .is-1"),Pe=document.querySelector(".menu-icon_bar.is-2, .menu-icon_bar .is-2");return ve&&oe.to(ve,{gap:"5px",rotation:0,duration:1.2,ease:gsapWithCSS.parseEase(`custom(${easeCurve})`)},"lift"),Ee&&oe.to(Ee,{rotation:0,yPercent:0,top:"42%",duration:1.2,ease:gsapWithCSS.parseEase(`custom(${easeCurve})`)},"lift"),Pe&&oe.to(Pe,{rotation:0,yPercent:0,bottom:"42%",duration:1.2,ease:gsapWithCSS.parseEase(`custom(${easeCurve})`)},"lift"),oe.call(()=>{try{const ye=document.querySelector(".menu-icon"),Te=document.querySelector(".menu-icon_bar.is-1, .menu-icon_bar .is-1"),Ae=document.querySelector(".menu-icon_bar.is-2, .menu-icon_bar .is-2");ye&&gsapWithCSS.set(ye,{rotation:0,gap:"5px",overwrite:"auto"}),Te&&gsapWithCSS.set(Te,{rotation:0,yPercent:0,top:"42%",overwrite:"auto"}),Ae&&gsapWithCSS.set(Ae,{rotation:0,yPercent:0,bottom:"42%",overwrite:"auto"})}catch{}},[],"lift+=1.2"),oe.to([te.container,ee],{duration:1.2,ease:gsapWithCSS.parseEase(`custom(${easeCurve})`),onComplete:()=>{gsapWithCSS.set(te.container,{clearProps:"position,top,left,right,zIndex,visibility,opacity,y"})},y:(ye,Te)=>Te===te.container?0:void 0,borderRadius:(ye,Te)=>Te===ee?"0rem":void 0,scale:(ye,Te)=>Te===ee?1:void 0},"lift"),oe}function initializePageTransitionNav(){const te=()=>{try{const ye=window&&window.fsAttributes;if(!ye)return;try{typeof ye.destroy=="function"&&ye.destroy()}catch{}try{typeof ye.init=="function"&&ye.init()}catch{}}catch{}};try{window.addEventListener("popstate",()=>{try{window.__barbaHistoryNav=!0}catch{}})}catch{}const ee=ye=>{if(!ye)return!1;const Te=getComputedStyle(ye);return Te.display!=="none"&&Te.visibility!=="hidden"&&Te.opacity!=="0"},ne={wasNavVisible:!1,forcedPageInfoFlex:!1},se=({from:ye,to:Te})=>{try{const Ae=Ce=>{if(!Ce||!Ce.querySelector)return;const De=Ce.querySelector("#page-from"),Ie=Ce.querySelector("#page-to");De&&typeof ye=="string"&&(De.textContent=ye),Ie&&typeof Te=="string"&&(Ie.textContent=Te)};Ae(document);try{const Ce=document.querySelector(".mask-overlay");if(Ce){const De=Ce.querySelector(".mask-overlay_page-info");De&&Ae(De)}}catch{}}catch{}},ae=()=>{try{const ye=document.querySelector("#page-to")||document.querySelector("#page-from");if(ye&&ye.textContent)return ye.textContent.trim()}catch{}try{return(document.title||"").trim()}catch{return""}},ue=ye=>{try{if(!ye)return"";const Ae=(ye.closest?ye.closest("a"):null)||ye;return((Ae.querySelector&&Ae.querySelector(".navlink_label")||Ae.querySelector&&Ae.querySelector(".button-white_label")||Ae.querySelector&&Ae.querySelector(".button_label")||Ae).textContent||"").trim()}catch{return""}},de=ye=>{try{const Te=ye&&ye.querySelector?ye:document,Ae=(location&&location.pathname?location.pathname:"").split("/").pop();if(Ae){const Ce=Te.querySelector(`a[href$="${Ae}"]`)||Te.querySelector(`a[href$='/${Ae}']`);if(Ce){const Ie=((Ce.querySelector(".navlink_label")||Ce).textContent||"").trim();if(Ie)return Ie}}return(document.title||"").trim()}catch{return""}},oe=ye=>{try{if(ye&&ye.getAttribute)return(ye.getAttribute("data-barba-namespace")||"").trim()}catch{}return""},me=ye=>{try{window.__pageInfoFromLabel=ye||""}catch{}},ve=(ye=document)=>{try{const Te=ye&&ye.querySelector?ye:document,Ae=Te.querySelector&&Te.querySelector(".navbar")||document.querySelector(".navbar");Ae&&(Ae.style.pointerEvents="auto")}catch{}},Ee=()=>{try{const ye=window.__pageInfoFromLabel||"";return window.__pageInfoFromLabel="",ye}catch{return""}},Pe=()=>{try{const ye=De=>{if(!De)return!1;const Ie=getComputedStyle(De);return Ie.display!=="none"&&Ie.visibility!=="hidden"&&Ie.opacity!=="0"},Te=document.querySelector(".nav-inner"),Ae=document.querySelector(".page-info");ne.wasNavVisible=ye(Te),ne.forcedPageInfoFlex=!1,ne.wasNavVisible&&Te&&(Te.style.display="none"),Ae&&!ye(Ae)&&(Ae.style.display="flex",ne.forcedPageInfoFlex=!0);let Ce=document.querySelector(".mask-overlay");if(!Ce){const De=createViewportClipOverlay({repeat:0,yoyo:!1});Ce=De&&De.container;try{window.__maskOverlay={container:Ce,tl:De&&De.tl}}catch{}}if(Ce){try{resetOverlayClipBaseState()}catch{}try{Ce.classList.add("is-active")}catch{Ce.className+=" is-active"}Ce.style.left="0px";try{const De=Ce.querySelector(".mask-overlay_page-info");De&&(De.style.display="flex")}catch{}}window.__ptInnerFlags={...ne}}catch{}};document.addEventListener("click",ye=>{if(!!(ye.target&&ye.target.closest?ye.target.closest("[pt-inner], [data-pt-inner], #pt-inner"):null))try{const Ae=document.querySelector(".nav-inner"),Ce=document.querySelector(".page-info");ne.wasNavVisible=ee(Ae),ne.forcedPageInfoFlex=!1,ne.wasNavVisible&&Ae&&(Ae.style.display="none"),Ce&&!ee(Ce)&&(Ce.style.display="flex",ne.forcedPageInfoFlex=!0);try{let De=document.querySelector(".mask-overlay");if(!De){const Ie=createViewportClipOverlay({repeat:0,yoyo:!1});De=Ie&&Ie.container;try{window.__maskOverlay={container:De,tl:Ie&&Ie.tl}}catch{}}if(De){try{resetOverlayClipBaseState()}catch{}try{De.classList.add("is-active")}catch{De.className+=" is-active"}De.style.left="0px";try{const Ie=De.querySelector(".mask-overlay_page-info");Ie&&(Ie.style.display="flex")}catch{}}}catch{}window.__ptInnerFlags={...ne}}catch{}},!0),Z.init({preventRunning:!0,schema:{namespace:"data-barba-namespace"},prevent:({el:ye})=>{try{return!!(ye&&ye.closest?ye.closest("a.load-more"):null)}catch{return!1}},transitions:[{name:"next-scroll-and-reveal",sync:!0,custom:({trigger:ye})=>{try{return ye?!!(ye.closest?ye.closest("[pt-next]"):null):!1}catch{return!1}},leave:ye=>{try{const Te=ye&&ye.current&&ye.current.container;destroyIcons(Te||document)}catch{}Pe();try{const Te=oe(ye&&ye.current&&ye.current.container),Ae=oe(ye&&ye.next&&ye.next.container),Ce=Te||ae(),De=Ae||ue(ye&&ye.trigger);se({from:Ce,to:De}),me(Ce)}catch{}return nextLeave(ye)},enter:ye=>{try{const Te=ye&&ye.next&&ye.next.container,Ce=oe(Te)||de(Te),De=Ee(),Ie=oe(ye&&ye.current&&ye.current.container),ze=De||Ie||ae();se({from:ze,to:Ce})}catch{}return nextEnter({next:ye&&ye.next})},after:({next:ye})=>{te();try{window.__barbaAfterHandled=!0}catch{}try{const Te=window.__ptInnerFlags||{},Ae=document.querySelector(".nav-inner"),Ce=document.querySelector(".page-info");Te.wasNavVisible&&Ae&&(Ae.style.display="flex"),Te.forcedPageInfoFlex,window.__ptInnerFlags=void 0}catch{}destroyLenis(),initLenis(ye&&ye.container),reinitializeWebflowAnimations();try{resetServiceCardIcons(ye&&ye.container)}catch{}resetMenuLinksAnimationState(ye&&ye.container),initializeNav2(),ve(ye&&ye.container),initParallax(ye&&ye.container),initHeroBackgroundParallax(ye&&ye.container),initNextBackgroundParallax(ye&&ye.container),initServiceCards(ye&&ye.container);try{initIcons(ye&&ye.container)}catch{}initTextReveal(),initMinerals(),initScrollList(),initProcessProgression(ye&&ye.container),initTestimonials(),initTextDisplayReveal();try{initCylinder(ye&&ye.container)}catch{}try{initSticky50(ye&&ye.container)}catch{}try{initBlog(ye&&ye.container)}catch{}try{blogArticleInit(ye&&ye.container)}catch{}try{initTeam(ye&&ye.container)}catch{}try{destroyWorkshopsStickyImages()}catch{}try{initAbout(ye&&ye.container)}catch{}try{initAboutValuesScroll(ye&&ye.container)}catch{}try{destroyVideoClipStickyTransform()}catch{}initVideoClipStickyTransform(ye&&ye.container);try{initMap(ye&&ye.container)}catch{}try{initTechnology(ye&&ye.container)}catch{}try{initContact(ye&&ye.container)}catch{}try{const Te=window.ScrollTrigger;Te&&typeof Te.refresh=="function"&&requestAnimationFrame(()=>Te.refresh())}catch{}try{window.dispatchEvent(new Event("page:transition:after"))}catch{}try{gsapWithCSS.set(document.body,{backgroundColor:"var(--primary)"})}catch{}}},{name:"slide-scale-history-inner",sync:!0,custom:({trigger:ye})=>{try{return!ye||window.__barbaHistoryNav===!0}catch{return!1}},leave:ye=>{try{const Ie=ye&&ye.current&&ye.current.container;destroyIcons(Ie||document)}catch{}try{const Ie=ye&&ye.current&&ye.current.container;destroyIcons(Ie||document)}catch{}Pe();const Te=oe(ye&&ye.current&&ye.current.container),Ae=oe(ye&&ye.next&&ye.next.container),Ce=Te||ae(),De=Ae||ae();return me(Ce),se({from:Ce,to:De}),slideScaleLeave$1(ye)},enter:ye=>{try{const Te=ye&&ye.next&&ye.next.container,Ce=oe(Te)||de(Te),De=Ee(),Ie=oe(ye&&ye.current&&ye.current.container),ze=De||Ie||ae();se({from:ze,to:Ce})}catch{}return slideScaleEnter$1({next:ye&&ye.next})},after:({next:ye})=>{te();try{window.__barbaAfterHandled=!0}catch{}try{const Te=window.__ptInnerFlags||{},Ae=document.querySelector(".nav-inner"),Ce=document.querySelector(".page-info");Te&&Te.wasNavVisible&&Ae&&(Ae.style.display="flex"),Te&&Te.forcedPageInfoFlex,window.__ptInnerFlags=void 0}catch{}destroyLenis(),initLenis(ye&&ye.container),reinitializeWebflowAnimations();try{resetServiceCardIcons(ye&&ye.container)}catch{}resetMenuLinksAnimationState(ye&&ye.container),initializeNav2(),ve(ye&&ye.container),initParallax(ye&&ye.container),initHeroBackgroundParallax(ye&&ye.container),initNextBackgroundParallax(ye&&ye.container),initServiceCards(ye&&ye.container);try{initIcons(ye&&ye.container)}catch{}initTextReveal(),initMinerals(),initScrollList(),initProcessProgression(ye&&ye.container),initTestimonials(),initTextDisplayReveal();try{initCylinder(ye&&ye.container)}catch{}try{initSticky50(ye&&ye.container)}catch{}try{initBlog(ye&&ye.container)}catch{}try{blogArticleInit(ye&&ye.container)}catch{}try{initTeam(ye&&ye.container)}catch{}try{destroyWorkshopsStickyImages()}catch{}try{initAbout(ye&&ye.container)}catch{}try{initAboutValuesScroll(ye&&ye.container)}catch{}try{destroyVideoClipStickyTransform()}catch{}initVideoClipStickyTransform(ye&&ye.container);try{initMap(ye&&ye.container)}catch{}try{initTechnology(ye&&ye.container)}catch{}try{initContact(ye&&ye.container)}catch{}try{const Te=window.ScrollTrigger;Te&&typeof Te.refresh=="function"&&requestAnimationFrame(()=>Te.refresh())}catch{}try{window.__barbaHistoryNav=!1}catch{}try{window.dispatchEvent(new Event("page:transition:after"))}catch{}try{gsapWithCSS.set(document.body,{backgroundColor:"var(--primary)"})}catch{}}},{name:"slide-scale-inner",sync:!0,custom:({trigger:ye})=>{try{return ye?!!(ye.closest?ye.closest("[pt-inner], [data-pt-inner], #pt-inner"):null):!1}catch{return!1}},leave:ye=>{try{const Te=oe(ye&&ye.current&&ye.current.container),Ae=oe(ye&&ye.next&&ye.next.container),Ce=Te||ae(),De=Ae||ue(ye&&ye.trigger);se({from:Ce,to:De}),me(Ce)}catch{}return slideScaleLeave$1(ye)},enter:ye=>{try{const Te=ye&&ye.next&&ye.next.container,Ce=oe(Te)||de(Te),De=Ee(),Ie=oe(ye&&ye.current&&ye.current.container),ze=De||Ie||ae();se({from:ze,to:Ce})}catch{}return slideScaleEnter$1({next:ye&&ye.next})},after:({next:ye})=>{te();try{window.__barbaAfterHandled=!0}catch{}try{const Te=window.__ptInnerFlags||{},Ae=document.querySelector(".nav-inner"),Ce=document.querySelector(".page-info");Te.wasNavVisible&&Ae&&(Ae.style.display="flex"),Te.forcedPageInfoFlex,window.__ptInnerFlags=void 0}catch{}destroyLenis(),initLenis(ye&&ye.container),reinitializeWebflowAnimations(),resetMenuLinksAnimationState(ye&&ye.container),initializeNav2(),ve(ye&&ye.container),initParallax(ye&&ye.container),initHeroBackgroundParallax(ye&&ye.container),initNextBackgroundParallax(ye&&ye.container),initServiceCards(ye&&ye.container);try{resetServiceCardIcons(ye&&ye.container)}catch{}try{initIcons(ye&&ye.container)}catch{}initTextReveal(),initMinerals(),initScrollList(),initProcessProgression(ye&&ye.container),initTestimonials(),initTextDisplayReveal();try{initCylinder(ye&&ye.container)}catch{}try{initSticky50(ye&&ye.container)}catch{}try{initBlog(ye&&ye.container)}catch{}try{blogArticleInit(ye&&ye.container)}catch{}try{initTeam(ye&&ye.container)}catch{}try{destroyWorkshopsStickyImages()}catch{}try{initAbout(ye&&ye.container)}catch{}try{initAboutValuesScroll(ye&&ye.container)}catch{}try{destroyVideoClipStickyTransform()}catch{}initVideoClipStickyTransform(ye&&ye.container);try{initMap(ye&&ye.container)}catch{}try{initTechnology(ye&&ye.container)}catch{}try{initContact(ye&&ye.container)}catch{}try{gsapWithCSS.set(document.body,{backgroundColor:"var(--primary)"})}catch{}}},{name:"slide-scale",sync:!0,leave:slideScaleLeave,enter:({next:ye})=>slideScaleEnter({next:ye}),after:({next:ye})=>{te();try{window.__barbaAfterHandled=!0}catch{}destroyLenis(),initLenis(ye&&ye.container),reinitializeWebflowAnimations(),initializeNav2(),initParallax(ye&&ye.container),initHeroBackgroundParallax(ye&&ye.container),initNextBackgroundParallax(ye&&ye.container),initServiceCards(ye&&ye.container);try{resetServiceCardIcons(ye&&ye.container)}catch{}try{initIcons(ye&&ye.container)}catch{}initTextReveal(),initMinerals(),initScrollList(),initProcessProgression(ye&&ye.container),initTestimonials(),initTextDisplayReveal();try{initCylinder(ye&&ye.container)}catch{}try{initSticky50(ye&&ye.container)}catch{}try{initBlog(ye&&ye.container)}catch{}try{blogArticleInit(ye&&ye.container)}catch{}try{initTeam(ye&&ye.container)}catch{}try{destroyWorkshopsStickyImages()}catch{}try{initAbout(ye&&ye.container)}catch{}try{initAboutValuesScroll(ye&&ye.container)}catch{}try{destroyVideoClipStickyTransform()}catch{}initVideoClipStickyTransform(ye&&ye.container);try{initMap(ye&&ye.container)}catch{}try{initTechnology(ye&&ye.container)}catch{}try{initContact(ye&&ye.container)}catch{}try{const Te=window.ScrollTrigger;Te&&typeof Te.refresh=="function"&&requestAnimationFrame(()=>Te.refresh())}catch{}try{window.dispatchEvent(new Event("page:transition:after"))}catch{}}}]}),Z.hooks.beforeLeave(({current:ye})=>{try{destroyIcons(ye&&ye.container)}catch{}}),Z.hooks.after(({next:ye})=>{if(window.__barbaAfterHandled){window.__barbaAfterHandled=!1;try{resetServiceCardIcons(ye&&ye.container)}catch{}try{initIcons(ye&&ye.container)}catch{}try{resetMenuLinksAnimationState(ye&&ye.container)}catch{}try{initializeNav2()}catch{}try{ve(ye&&ye.container)}catch{}try{gsapWithCSS.set(document.body,{backgroundColor:"var(--primary)"})}catch{}return}te(),destroyLenis(),initLenis(ye&&ye.container),resetMenuLinksAnimationState(ye&&ye.container),initializeNav2(),ve(ye&&ye.container),reinitializeWebflowAnimations();try{resetServiceCardIcons(ye&&ye.container)}catch{}initParallax(ye&&ye.container),initHeroBackgroundParallax(ye&&ye.container),initNextBackgroundParallax(ye&&ye.container),initServiceCards(ye&&ye.container);try{initIcons(ye&&ye.container)}catch{}initProcessProgression(ye&&ye.container),initTextReveal(),initMinerals();try{initSticky50(ye&&ye.container)}catch{}try{initBlog(ye&&ye.container)}catch{}try{blogArticleInit(ye&&ye.container)}catch{}try{initTeam(ye&&ye.container)}catch{}try{destroyWorkshopsStickyImages()}catch{}try{initAbout(ye&&ye.container)}catch{}try{initAboutValuesScroll(ye&&ye.container)}catch{}try{destroyVideoClipStickyTransform()}catch{}initVideoClipStickyTransform(ye&&ye.container);try{initMap(ye&&ye.container)}catch{}try{initTechnology(ye&&ye.container)}catch{}try{initContact(ye&&ye.container)}catch{}try{gsapWithCSS.set(document.body,{backgroundColor:"var(--primary)"})}catch{}}),Z.hooks.afterEnter(({next:ye})=>{try{const Te=typeof window!="undefined"?window.Webflow:null,Ae=Te&&typeof Te.require=="function"?Te.require("lottie"):null,Ce=Ae&&typeof Ae.ready=="function"?Ae.ready:null;Ce&&Ce()}catch{}try{reinitializeWebflowAnimations()}catch{}try{resetMenuLinksAnimationState(ye&&ye.container),initializeNav2(),ve(ye&&ye.container)}catch{}try{initServiceCards(ye&&ye.container)}catch{}try{initAboutValuesScroll(ye&&ye.container)}catch{}try{requestAnimationFrame(()=>{try{try{const Te=typeof window!="undefined"?window.Webflow:null,Ae=Te&&typeof Te.require=="function"?Te.require("lottie"):null,Ce=Ae&&typeof Ae.ready=="function"?Ae.ready:null;Ce&&Ce()}catch{}resetServiceCardIcons(ye&&ye.container)}catch{}try{initIcons(ye&&ye.container)}catch{}try{Promise.resolve().then(()=>{try{try{const Te=typeof window!="undefined"?window.Webflow:null,Ae=Te&&typeof Te.require=="function"?Te.require("lottie"):null,Ce=Ae&&typeof Ae.ready=="function"?Ae.ready:null;Ce&&Ce()}catch{}initIcons(ye&&ye.container)}catch{}})}catch{}})}catch{}})}document.addEventListener("DOMContentLoaded",()=>{try{"scrollRestoration"in history&&(history.scrollRestoration="manual"),window.scrollTo(0,0),document.documentElement.scrollTop=0,document.body.scrollTop=0}catch{}initializePageTransitionNav(),initLoader(),initLenis(),initializeNav2();try{initCylinder(document)}catch{}initParallax(),initNextBackgroundParallax(),initServiceCards();try{initIcons(document)}catch{}initTextReveal(),initMinerals(),initScrollList(),initProcessProgression(),initTestimonials(),initTextDisplayReveal(),initVideoClipStickyTransform();try{initSticky50(document)}catch{}try{initBlog(document)}catch{}try{blogArticleInit(document)}catch{}try{initMap(document)}catch{}try{initTechnology(document)}catch{}try{initContact(document)}catch{}try{initAbout(document)}catch{}try{initAboutValuesScroll(document)}catch{}try{initTeam(document)}catch{}try{const{tl:te}=createViewportClipOverlay({});te&&typeof te.pause=="function"&&te.pause(0)}catch{}})});
